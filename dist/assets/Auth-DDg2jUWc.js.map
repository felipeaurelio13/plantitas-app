{"version":3,"file":"Auth-DDg2jUWc.js","sources":["../../src/pages/Auth.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport { Mail, Lock, User, Eye, EyeOff, Leaf } from 'lucide-react';\nimport useAuthStore from '../stores/useAuthStore';\n\nconst AuthPage: React.FC = () => {\n  const [mode, setMode] = useState<'login' | 'signup'>('login');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [fullName, setFullName] = useState('');\n  const [showPassword, setShowPassword] = useState(false);\n  const [isOAuthLoading, setOAuthLoading] = useState(false);\n\n  // Use the store for state and actions\n  const { signIn, signUp, isLoading, error, clearError } = useAuthStore();\n\n  const handleModeChange = (newMode: 'login' | 'signup') => {\n    setMode(newMode);\n    clearError(); // Clear errors when switching modes\n  };\n  \n  // Clear errors when the component unmounts or mode changes\n  useEffect(() => {\n    return () => {\n      clearError?.();\n    };\n  }, [mode, clearError]);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    clearError();\n\n    if (mode === 'login') {\n      await signIn(email, password);\n    } else {\n      if (password !== confirmPassword) {\n        // This is a client-side check.\n        // The zod schema in the store also validates this.\n        console.error(\"Passwords do not match\");\n        // We can also use the store to set a specific error here\n        return;\n      }\n      await signUp(email, password, confirmPassword, fullName);\n    }\n  };\n\n  // Remove handleGoogleSignIn as Firebase OAuth will be handled differently or implemented later if needed.\n  // const handleGoogleSignIn = async () => {\n  //   try {\n  //     setOAuthLoading(true);\n  //     await supabase.auth.signInWithOAuth({\n  //       provider: 'google',\n  //       options: {\n  //         redirectTo: window.location.origin + (import.meta.env.DEV ? '' : '/plantitas-app/')\n  //       }\n  //     });\n  //   } catch (e) {\n  //     console.error('Google sign-in error', e);\n  //   } finally {\n  //     setOAuthLoading(false);\n  //   }\n  // };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-green-50 via-emerald-50 to-teal-100 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center p-4\">\n      <motion.div\n        initial={{ opacity: 0, y: 30, scale: 0.95 }}\n        animate={{ opacity: 1, y: 0, scale: 1 }}\n        transition={{ duration: 0.5, ease: 'easeOut' }}\n        className=\"w-full max-w-md\"\n      >\n        {/* Logo/Header */}\n        <div className=\"text-center mb-10\">\n          <motion.div\n            initial={{ scale: 0.8, rotate: -10 }}\n            animate={{ scale: 1, rotate: 0 }}\n            transition={{ duration: 0.6, ease: 'easeOut' }}\n            className=\"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-green-400 to-emerald-600 rounded-2xl mb-6 shadow-lg shadow-green-200/50 animate-float\"\n          >\n            <Leaf className=\"w-10 h-10 text-white\" />\n          </motion.div>\n          <motion.h1 \n            initial={{ opacity: 0, y: 10 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: 0.2, duration: 0.5 }}\n            className=\"text-4xl font-bold bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent mb-3\"\n          >\n            Plantitas\n          </motion.h1>\n          <motion.p \n            initial={{ opacity: 0, y: 10 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: 0.3, duration: 0.5 }}\n            className=\"text-gray-600 dark:text-gray-400 text-lg\"\n          >\n            {mode === 'login' \n              ? 'Bienvenido de vuelta' \n              : 'Únete a la comunidad de plantas'\n            }\n          </motion.p>\n        </div>\n\n        {/* Auth Form */}\n        <motion.div\n          layout\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.4, duration: 0.5 }}\n          className=\"bg-white/80 backdrop-blur-sm dark:bg-gray-800/90 rounded-3xl shadow-2xl shadow-green-100/20 p-8 border border-white/20\"\n        >\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            {mode === 'signup' && (\n              <motion.div\n                initial={{ opacity: 0, height: 0 }}\n                animate={{ opacity: 1, height: 'auto' }}\n                exit={{ opacity: 0, height: 0 }}\n              >\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  Nombre completo\n                </label>\n                <div className=\"relative\">\n                  <User className=\"absolute left-3 top-3 w-5 h-5 text-gray-400\" />\n                  <input\n                    type=\"text\"\n                    value={fullName}\n                    onChange={(e) => setFullName(e.target.value)}\n                    className=\"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 focus:ring-2 focus:ring-green-500 focus:border-transparent\"\n                    placeholder=\"Tu nombre completo\"\n                    autoComplete=\"name\"\n                    required={mode === 'signup'}\n                  />\n                </div>\n              </motion.div>\n            )}\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                Email\n              </label>\n              <div className=\"relative\">\n                <Mail className=\"absolute left-3 top-3 w-5 h-5 text-gray-400\" />\n                <input\n                  type=\"email\"\n                  value={email}\n                  onChange={(e) => setEmail(e.target.value)}\n                  className=\"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 focus:ring-2 focus:ring-green-500 focus:border-transparent\"\n                  placeholder=\"tu@email.com\"\n                  autoComplete=\"email\"\n                  required\n                />\n              </div>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                Contraseña\n              </label>\n              <div className=\"relative\">\n                <Lock className=\"absolute left-3 top-3 w-5 h-5 text-gray-400\" />\n                <input\n                  type={showPassword ? 'text' : 'password'}\n                  value={password}\n                  onChange={(e) => setPassword(e.target.value)}\n                  className=\"w-full pl-10 pr-12 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 focus:ring-2 focus:ring-green-500 focus:border-transparent\"\n                  placeholder=\"••••••••\"\n                  autoComplete={mode === 'login' ? 'current-password' : 'new-password'}\n                  required\n                  minLength={6}\n                />\n                <button\n                  type=\"button\"\n                  onClick={() => setShowPassword(!showPassword)}\n                  className=\"absolute right-3 top-3 w-5 h-5 text-gray-400 hover:text-gray-600\"\n                >\n                  {showPassword ? <EyeOff /> : <Eye />}\n                </button>\n              </div>\n              {mode === 'signup' && (\n                <p className=\"text-xs text-gray-500 mt-1\">\n                  Mínimo 6 caracteres\n                </p>\n              )}\n            </div>\n\n            {mode === 'signup' && (\n              <motion.div\n                initial={{ opacity: 0, height: 0 }}\n                animate={{ opacity: 1, height: 'auto' }}\n                exit={{ opacity: 0, height: 0 }}\n              >\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  Confirmar Contraseña\n                </label>\n                <div className=\"relative\">\n                  <Lock className=\"absolute left-3 top-3 w-5 h-5 text-gray-400\" />\n                  <input\n                    type=\"password\"\n                    value={confirmPassword}\n                    onChange={(e) => setConfirmPassword(e.target.value)}\n                    className=\"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 focus:ring-2 focus:ring-green-500 focus:border-transparent\"\n                    placeholder=\"••••••••\"\n                    autoComplete=\"new-password\"\n                    required={mode === 'signup'}\n                  />\n                </div>\n              </motion.div>\n            )}\n\n            {error && (\n              <motion.div\n                initial={{ opacity: 0, y: -10 }}\n                animate={{ opacity: 1, y: 0 }}\n                className=\"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg\"\n              >\n                <p className=\"text-sm text-red-600 dark:text-red-400\">{error}</p>\n              </motion.div>\n            )}\n\n            <button\n              type=\"submit\"\n              disabled={isLoading}\n              className=\"w-full bg-green-500 hover:bg-green-600 disabled:bg-green-300 text-white font-medium py-3 px-4 rounded-lg transition-colors focus:ring-2 focus:ring-green-500 focus:ring-offset-2\"\n            >\n              {isLoading ? (\n                <div className=\"flex items-center justify-center\">\n                  <div className=\"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2\"></div>\n                  Procesando...\n                </div>\n              ) : (\n                mode === 'login' ? 'Iniciar Sesión' : 'Crear Cuenta'\n              )}\n            </button>\n          </form>\n\n          {/* Mode Switch */}\n          <div className=\"mt-6 text-center\">\n            <p className=\"text-gray-600 dark:text-gray-400\">\n              {mode === 'login' ? '¿No tienes cuenta?' : '¿Ya tienes cuenta?'}\n              <button\n                onClick={() => handleModeChange(mode === 'login' ? 'signup' : 'login')}\n                className=\"ml-1 text-green-500 hover:text-green-600 font-medium\"\n              >\n                {mode === 'login' ? 'Regístrate' : 'Inicia sesión'}\n              </button>\n            </p>\n          </div>\n\n          {/* Footer */}\n          <div className=\"text-center mt-8\">\n            <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n              Al continuar, aceptas nuestros Términos y Condiciones\n            </p>\n          </div>\n        </motion.div>\n      </motion.div>\n    </div>\n  );\n};\n\nexport default AuthPage; "],"names":["Auth_default","mode","setMode","useState","email","setEmail","password","setPassword","confirmPassword","setConfirmPassword","fullName","setFullName","showPassword","setShowPassword","isOAuthLoading","setOAuthLoading","signIn","signUp","isLoading","error","clearError","useAuthStore","useEffect","jsx","className","children","jsxs","motion","div","initial","opacity","y","scale","animate","transition","duration","ease","rotate","Leaf","h1","delay","p","layout","onSubmit","async","e","preventDefault","height","exit","User","type","value","onChange","target","placeholder","autoComplete","required","Mail","Lock","minLength","onClick","EyeOff","Eye","disabled"],"mappings":"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"}