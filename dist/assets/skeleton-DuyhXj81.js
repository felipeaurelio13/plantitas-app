import{C as h,r as u,j as a,A as f,m as p,u as v,E as j,U as b,c as k}from"./index-HdkzIkwI.js";import{B as A}from"./Button-nzMuOHmd.js";import{u as z}from"./usePlantMutations-DoZqOjZd.js";import{a as D}from"./usePlantDetail-D8vhghDG.js";import{A as N}from"./Card-CI6x9r_T.js";/**
 * @license lucide-react v0.411.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=h("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.411.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=h("Wind",[["path",{d:"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2",key:"1k4u03"}],["path",{d:"M9.6 4.6A2 2 0 1 1 11 8H2",key:"b7d0fd"}],["path",{d:"M12.6 19.4A2 2 0 1 0 14 16H2",key:"1p5cb3"}]]),U=({src:t,alt:o,className:e="",fallback:d,onLoad:s,onError:i})=>{const[r,n]=u.useState(!1),[l,c]=u.useState(!1),m=u.useCallback(()=>{n(!0),s==null||s()},[s]),g=u.useCallback(()=>{c(!0),i==null||i()},[i]);return l&&d?a.jsx(a.Fragment,{children:d}):l?a.jsx("div",{className:`bg-gray-200 dark:bg-gray-700 flex items-center justify-center ${e}`,children:a.jsx("span",{className:"text-gray-400 text-sm",children:"No image"})}):a.jsxs("div",{className:`relative overflow-hidden ${e}`,children:[a.jsx(f,{children:!r&&a.jsx(p.div,{initial:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"absolute inset-0 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 dark:from-gray-700 dark:via-gray-600 dark:to-gray-700 animate-pulse"})}),a.jsx(p.img,{src:t,alt:o,className:`w-full h-full object-cover ${r?"opacity-100":"opacity-0"}`,loading:"lazy",decoding:"async",onLoad:m,onError:g,initial:{opacity:0},animate:{opacity:r?1:0},transition:{duration:.2}})]})},$=({plant:t,variant:o="primary",size:e="sm",showLabel:d=!0,className:s=""})=>{const{updatePlantHealthMutation:i,isUpdatingPlantHealth:r}=z(),n=v(x=>x.user),{addToast:l}=j(),{plant:c}=D(t.id),m=async()=>{if(!(n!=null&&n.id)){l({type:"error",title:"Error",message:"Debes estar logueado para actualizar el diagnóstico"});return}if(!c){l({type:"error",title:"Error",message:"No se pudieron cargar los datos de la planta"});return}console.log("🩺 [Button] Actualizando diagnóstico para:",t.name),i({plant:c,userId:n.id})},g=a.jsxs(a.Fragment,{children:[r?a.jsx(p.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:a.jsx(b,{size:e.includes("icon")?16:14})}):a.jsx(N,{size:e.includes("icon")?16:14}),d&&!e.includes("icon")&&a.jsx("span",{className:"ml-2 text-xs",children:r?"Analizando...":"Analizar"})]}),y=e.includes("icon");return a.jsx(A,{onClick:m,disabled:r||!c,size:e,variant:o,className:s,"aria-label":y?`Actualizar diagnóstico de salud para ${t.name}`:void 0,title:y?`Actualizar diagnóstico de salud para ${t.name}`:void 0,children:g})};function B({className:t,...o}){return a.jsx("div",{className:k("animate-shimmer rounded-md","bg-[linear-gradient(110deg,var(--color-neutral-200)_8%,var(--color-neutral-300)_18%,var(--color-neutral-200)_33%)]","dark:bg-[linear-gradient(110deg,var(--color-neutral-800)_8%,var(--color-neutral-700)_18%,var(--color-neutral-800)_33%)]","bg-[length:200%_100%]",t),...o})}export{H as D,U as L,B as S,$ as U,P as W};
