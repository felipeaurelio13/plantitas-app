import{b as Me,i as Se,f as z,c as B,d as ue,e as Te,v as Re,g as De,h as He,k as qe,n as xe,l as Oe,s as $e,o as V,q as I,r as f,w as he,x as K,M as Fe,y as D,z as j,j as e,m as u,A as O,X as We,B as Q,C as Be,u as Ve,D as _e,P as Ue,a as pe,H as J,S as Ge,E as Xe,I as Ye,T as ee,F as Ze,G as M,J as se}from"./index-BnsrWapf.js";import{L as H,a as Ke}from"./usePlantDetail-DCk9I5Cl.js";import{C as Qe,c as Je}from"./Card-DXmGoBal.js";import{L as fe,U as es,D as ss,W as ts,S as d,P as as,M as rs}from"./skeleton-B981aF_h.js";import{C as $,a as ns,u as is}from"./usePlantMutations-D0tB_ujL.js";import{C as ls,T as os,M as cs}from"./trash-2-BCHSLm8v.js";import{B as N}from"./Button-B-sY6nwz.js";import{A as ds}from"./arrow-left-CGWeB5nm.js";import{E as ms,B as us,L as xs}from"./lightbulb-DHfKLY_t.js";import{S as w}from"./sparkles-BqZTD1pI.js";import{S}from"./sun-CcuurXMf.js";import"./index-Bnwr932r.js";const T=new WeakMap;let v;const ge=(s,t,r)=>(a,n)=>n&&n[0]?n[0][s+"Size"]:Se(a)&&"getBBox"in a?a.getBBox()[t]:a[r],hs=ge("inline","width","offsetWidth"),ps=ge("block","height","offsetHeight");function fs({target:s,borderBoxSize:t}){var r;(r=T.get(s))==null||r.forEach(a=>{a(s,{get width(){return hs(s,t)},get height(){return ps(s,t)}})})}function gs(s){s.forEach(fs)}function js(){typeof ResizeObserver>"u"||(v=new ResizeObserver(gs))}function bs(s,t){v||js();const r=Me(s);return r.forEach(a=>{let n=T.get(a);n||(n=new Set,T.set(a,n)),n.add(t),v==null||v.observe(a)}),()=>{r.forEach(a=>{const n=T.get(a);n==null||n.delete(t),n!=null&&n.size||v==null||v.unobserve(a)})}}const R=new Set;let k;function vs(){k=()=>{const s={get width(){return window.innerWidth},get height(){return window.innerHeight}};R.forEach(t=>t(s))},window.addEventListener("resize",k)}function ys(s){return R.add(s),k||vs(),()=>{R.delete(s),!R.size&&typeof k=="function"&&(window.removeEventListener("resize",k),k=void 0)}}function Ns(s,t){return typeof s=="function"?ys(s):bs(s,t)}function je(s,t){let r;const a=()=>{const{currentTime:n}=t,l=(n===null?0:n.value)/100;r!==l&&s(l),r=l};return z.preUpdate(a,!0),()=>B(a)}function ws(...s){const t=!Array.isArray(s[0]),r=t?0:-1,a=s[0+r],n=s[1+r],i=s[2+r],l=s[3+r],o=ue(n,i,l);return t?o(a):o}const ks=50,te=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),Cs=()=>({time:0,x:te(),y:te()}),Es={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function ae(s,t,r,a){const n=r[t],{length:i,position:l}=Es[t],o=n.current,c=r.time;n.current=s[`scroll${l}`],n.scrollLength=s[`scroll${i}`]-s[`client${i}`],n.offset.length=0,n.offset[0]=0,n.offset[1]=n.scrollLength,n.progress=Te(0,n.scrollLength,n.current);const m=a-c;n.velocity=m>ks?0:Re(n.current-o,m)}function Is(s,t,r){ae(s,"x",t,r),ae(s,"y",t,r),t.time=r}function zs(s,t){const r={x:0,y:0};let a=s;for(;a&&a!==t;)if(De(a))r.x+=a.offsetLeft,r.y+=a.offsetTop,a=a.offsetParent;else if(a.tagName==="svg"){const n=a.getBoundingClientRect();a=a.parentElement;const i=a.getBoundingClientRect();r.x+=n.left-i.left,r.y+=n.top-i.top}else if(a instanceof SVGGraphicsElement){const{x:n,y:i}=a.getBBox();r.x+=n,r.y+=i;let l=null,o=a.parentNode;for(;!l;)o.tagName==="svg"&&(l=o),o=a.parentNode;a=l}else break;return r}const F={start:0,center:.5,end:1};function re(s,t,r=0){let a=0;if(s in F&&(s=F[s]),typeof s=="string"){const n=parseFloat(s);s.endsWith("px")?a=n:s.endsWith("%")?s=n/100:s.endsWith("vw")?a=n/100*document.documentElement.clientWidth:s.endsWith("vh")?a=n/100*document.documentElement.clientHeight:s=n}return typeof s=="number"&&(a=t*s),r+a}const As=[0,0];function Ps(s,t,r,a){let n=Array.isArray(s)?s:As,i=0,l=0;return typeof s=="number"?n=[s,s]:typeof s=="string"&&(s=s.trim(),s.includes(" ")?n=s.split(" "):n=[s,F[s]?s:"0"]),i=re(n[0],r,a),l=re(n[1],t),i-l}const Ls={All:[[0,0],[1,1]]},Ms={x:0,y:0};function Ss(s){return"getBBox"in s&&s.tagName!=="svg"?s.getBBox():{width:s.clientWidth,height:s.clientHeight}}function Ts(s,t,r){const{offset:a=Ls.All}=r,{target:n=s,axis:i="y"}=r,l=i==="y"?"height":"width",o=n!==s?zs(n,s):Ms,c=n===s?{width:s.scrollWidth,height:s.scrollHeight}:Ss(n),m={width:s.clientWidth,height:s.clientHeight};t[i].offset.length=0;let p=!t[i].interpolate;const h=a.length;for(let g=0;g<h;g++){const A=Ps(a[g],m[l],c[l],o[i]);!p&&A!==t[i].interpolatorOffsets[g]&&(p=!0),t[i].offset[g]=A}p&&(t[i].interpolate=ue(t[i].offset,He(a),{clamp:!1}),t[i].interpolatorOffsets=[...t[i].offset]),t[i].progress=qe(0,1,t[i].interpolate(t[i].current))}function Rs(s,t=s,r){if(r.x.targetOffset=0,r.y.targetOffset=0,t!==s){let a=t;for(;a&&a!==s;)r.x.targetOffset+=a.offsetLeft,r.y.targetOffset+=a.offsetTop,a=a.offsetParent}r.x.targetLength=t===s?t.scrollWidth:t.clientWidth,r.y.targetLength=t===s?t.scrollHeight:t.clientHeight,r.x.containerLength=s.clientWidth,r.y.containerLength=s.clientHeight}function Ds(s,t,r,a={}){return{measure:n=>{Rs(s,a.target,r),Is(s,r,n),(a.offset||a.target)&&Ts(s,r,a)},notify:()=>t(r)}}const E=new WeakMap,ne=new WeakMap,q=new WeakMap,ie=s=>s===document.scrollingElement?window:s;function be(s,{container:t=document.scrollingElement,...r}={}){if(!t)return xe;let a=q.get(t);a||(a=new Set,q.set(t,a));const n=Cs(),i=Ds(t,s,n,r);if(a.add(i),!E.has(t)){const o=()=>{for(const h of a)h.measure(Oe.timestamp);z.preUpdate(c)},c=()=>{for(const h of a)h.notify()},m=()=>z.read(o);E.set(t,m);const p=ie(t);window.addEventListener("resize",m,{passive:!0}),t!==document.documentElement&&ne.set(t,Ns(t,m)),p.addEventListener("scroll",m,{passive:!0}),m()}const l=E.get(t);return z.read(l,!1,!0),()=>{var m;B(l);const o=q.get(t);if(!o||(o.delete(i),o.size))return;const c=E.get(t);E.delete(t),c&&(ie(t).removeEventListener("scroll",c),(m=ne.get(t))==null||m(),window.removeEventListener("resize",c))}}const le=new Map;function Hs(s){const t={value:0},r=be(a=>{t.value=a[s.axis].progress*100},s);return{currentTime:t,cancel:r}}function ve({source:s,container:t,...r}){const{axis:a}=r;s&&(t=s);const n=le.get(t)??new Map;le.set(t,n);const i=r.target??"self",l=n.get(i)??{},o=a+(r.offset??[]).join(",");return l[o]||(l[o]=!r.target&&$e()?new ScrollTimeline({source:t,axis:a}):Hs({container:t,...r})),l[o]}function qs(s,t){const r=ve(t);return s.attachTimeline({timeline:t.target?void 0:r,observe:a=>(a.pause(),je(n=>{a.time=a.duration*n},r))})}function Os(s){return s.length===2}function $s(s,t){return Os(s)?be(r=>{s(r[t.axis].progress,r)},t):je(s,ve(t))}function Fs(s,{axis:t="y",container:r=document.scrollingElement,...a}={}){if(!r)return xe;const n={axis:t,container:r,...a};return typeof s=="function"?$s(s,n):qs(s,n)}const Ws=()=>({scrollX:I(0),scrollY:I(0),scrollXProgress:I(0),scrollYProgress:I(0)}),L=s=>s?!s.current:!1;function Bs({container:s,target:t,...r}={}){const a=V(Ws),n=f.useRef(null),i=f.useRef(!1),l=f.useCallback(()=>(n.current=Fs((o,{x:c,y:m})=>{a.scrollX.set(c.current),a.scrollXProgress.set(c.progress),a.scrollY.set(m.current),a.scrollYProgress.set(m.progress)},{...r,container:(s==null?void 0:s.current)||void 0,target:(t==null?void 0:t.current)||void 0}),()=>{var o;(o=n.current)==null||o.call(n)}),[s,t,JSON.stringify(r.offset)]);return he(()=>{if(i.current=!1,L(s)||L(t)){i.current=!0;return}else return l()},[l]),f.useEffect(()=>{if(i.current)return K(!L(s)),K(!L(t)),l()},[l]),a}function Vs(s){const t=V(()=>I(s)),{isStatic:r}=f.useContext(Fe);if(r){const[,a]=f.useState(s);f.useEffect(()=>t.on("change",a),[])}return t}function ye(s,t){const r=Vs(t()),a=()=>r.set(t());return a(),he(()=>{const n=()=>z.preRender(a,!1,!0),i=s.map(l=>l.on("change",n));return()=>{i.forEach(l=>l()),B(a)}}),r}function _s(s){D.current=[],s();const t=ye(D.current,s);return D.current=void 0,t}function oe(s,t,r,a){if(typeof s=="function")return _s(s);const n=typeof t=="function"?t:ws(t,r,a);return Array.isArray(s)?ce(s,n):ce([s],([i])=>n(i))}function ce(s,t){const r=V(()=>[]);return ye(s,()=>{r.length=0;const a=s.length;for(let n=0;n<a;n++)r[n]=s[n].get();return t(r)})}/**
 * @license lucide-react v0.411.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=j("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.411.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=j("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.411.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=j("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.411.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=j("Flower",[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"M12 16.5A4.5 4.5 0 1 1 7.5 12 4.5 4.5 0 1 1 12 7.5a4.5 4.5 0 1 1 4.5 4.5 4.5 4.5 0 1 1-4.5 4.5",key:"14wa3c"}],["path",{d:"M12 7.5V9",key:"1oy5b0"}],["path",{d:"M7.5 12H9",key:"eltsq1"}],["path",{d:"M16.5 12H15",key:"vk5kw4"}],["path",{d:"M12 16.5V15",key:"k7eayi"}],["path",{d:"m8 8 1.88 1.88",key:"nxy4qf"}],["path",{d:"M14.12 9.88 16 8",key:"1lst6k"}],["path",{d:"m8 16 1.88-1.88",key:"h2eex1"}],["path",{d:"M14.12 14.12 16 16",key:"uqkrx3"}]]);/**
 * @license lucide-react v0.411.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=j("HeartPulse",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"1uw2ng"}]]);/**
 * @license lucide-react v0.411.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=j("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.411.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=j("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.411.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=j("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.411.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=j("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.411.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=j("Syringe",[["path",{d:"m18 2 4 4",key:"22kx64"}],["path",{d:"m17 7 3-3",key:"1w1zoj"}],["path",{d:"M19 9 8.7 19.3c-1 1-2.5 1-3.4 0l-.6-.6c-1-1-1-2.5 0-3.4L15 5",key:"1exhtz"}],["path",{d:"m9 11 4 4",key:"rovt3i"}],["path",{d:"m5 19-3 3",key:"59f2uf"}],["path",{d:"m14 4 6 6",key:"yqp9t2"}]]);/**
 * @license lucide-react v0.411.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=j("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]);/**
 * @license lucide-react v0.411.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=j("TreePine",[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]]);function tt({images:s}){const[t,r]=f.useState(null);if(!s||s.length===0)return e.jsx(Qe,{className:"mt-4",children:e.jsx(Je,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx($,{className:"w-12 h-12 text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No hay imágenes para esta planta todavía."}),e.jsx("p",{className:"text-sm text-muted-foreground/70 mt-2",children:"¡Agrega algunas fotos para seguir su progreso!"})]})})});const a=[...s].sort((c,m)=>new Date(m.timestamp).getTime()-new Date(c.timestamp).getTime()),n=c=>{r(c)},i=()=>{r(null)},l=c=>{if(t===null)return;const m=c==="prev"?(t-1+a.length)%a.length:(t+1)%a.length;r(m)},o=c=>(c instanceof Date?c:new Date(c)).toLocaleDateString("es-ES",{day:"numeric",month:"short",year:"numeric"});return e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold tracking-tight flex items-center",children:[e.jsx($,{className:"w-5 h-5 mr-2 text-primary"}),"Galería de Imágenes"]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[a.length," foto",a.length!==1?"s":""]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:a.map((c,m)=>e.jsxs(u.div,{className:"aspect-square relative rounded-xl overflow-hidden cursor-pointer group",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>n(m),children:[e.jsx(fe,{src:c.url,alt:`Imagen de planta del ${o(c.timestamp)}`,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-3",children:e.jsxs("div",{className:"flex items-center text-white text-xs",children:[e.jsx(W,{className:"w-3 h-3 mr-1"}),o(c.timestamp)]})})}),c.isProfileImage&&e.jsx("div",{className:"absolute top-2 right-2 bg-primary text-primary-foreground text-xs px-2 py-1 rounded-full font-medium",children:"Principal"})]},c.id))}),e.jsx(O,{children:t!==null&&e.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-4",onClick:i,children:e.jsxs(u.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:"relative max-w-4xl max-h-full",onClick:c=>c.stopPropagation(),children:[e.jsx("button",{onClick:i,className:"absolute top-4 right-4 z-10 bg-black/50 text-white p-2 rounded-full hover:bg-black/70 transition-colors",children:e.jsx(We,{className:"w-6 h-6"})}),a.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>l("prev"),className:"absolute left-4 top-1/2 -translate-y-1/2 z-10 bg-black/50 text-white p-2 rounded-full hover:bg-black/70 transition-colors",children:e.jsx(Gs,{className:"w-6 h-6"})}),e.jsx("button",{onClick:()=>l("next"),className:"absolute right-4 top-1/2 -translate-y-1/2 z-10 bg-black/50 text-white p-2 rounded-full hover:bg-black/70 transition-colors",children:e.jsx(ls,{className:"w-6 h-6"})})]}),e.jsx("img",{src:a[t].url,alt:`Imagen de planta del ${o(a[t].timestamp)}`,className:"max-w-full max-h-full object-contain rounded-lg"}),e.jsxs("div",{className:"absolute bottom-4 left-4 right-4 bg-black/50 text-white p-4 rounded-lg backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(W,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"text-sm",children:o(a[t].timestamp)})]}),e.jsxs("span",{className:"text-sm text-white/70",children:[t+1," de ",a.length]})]}),a[t].isProfileImage&&e.jsx("div",{className:"mt-2",children:e.jsx("span",{className:"bg-primary text-primary-foreground text-xs px-2 py-1 rounded-full",children:"Imagen Principal"})})]})]})})})]})}const at=async(s,t)=>{console.log("🚀 [API] Iniciando llamada a complete-plant-info..."),console.log("📡 [API] Parámetros enviados:",{species:s,commonName:t});const{data:{session:r},error:a}=await Q.auth.getSession();if(a||!(r!=null&&r.access_token))throw console.error("User session not available:",a),new Error("Usuario no autenticado. Por favor inicia sesión nuevamente.");const{data:n,error:i}=await Q.functions.invoke("complete-plant-info",{body:{species:s,commonName:t},headers:{Authorization:`Bearer ${r.access_token}`}});if(i)throw console.error("💥 [API] Error en complete-plant-info function:",i),new Error("Failed to complete plant info: "+i.message);console.log("🎯 [API] Respuesta recibida exitosamente:",n);const l=["interior","exterior","ambos"],o=["poca_luz","luz_indirecta","luz_directa_parcial","pleno_sol"];return{plantEnvironment:l.includes(n.plantEnvironment)?n.plantEnvironment:"interior",lightRequirements:o.includes(n.lightRequirements)?n.lightRequirements:"luz_indirecta",description:n.description||void 0,funFacts:Array.isArray(n.funFacts)?n.funFacts:void 0}},rt=new Ue,nt=()=>{const[s,t]=f.useState(!1),r=Be(),a=Ve(o=>o.user),{addToast:n}=_e(),i=ns({mutationFn:async({plantId:o,species:c,commonName:m})=>{var p;if(!a)throw new Error("User not authenticated");t(!0),console.log("🤖 [COMPLETAR IA] Iniciando completado automático de información..."),console.log("📋 [COMPLETAR IA] Datos de entrada:",{plantId:o,species:c,commonName:m||"No especificado"}),n({type:"info",title:"🤖 Completando información",message:`Consultando IA para ${m||c}...`,duration:3e3});try{console.log("🔄 [COMPLETAR IA] Consultando IA para generar información faltante...");const h=await at(c,m);console.log("✅ [COMPLETAR IA] IA respondió exitosamente:",{ambiente:h.plantEnvironment,luz:h.lightRequirements,tieneDescripcion:!!h.description,cantidadDatosCuriosos:((p=h.funFacts)==null?void 0:p.length)||0}),console.log("💾 [COMPLETAR IA] Guardando información en base de datos...");const g=await rt.updatePlantInfo(o,a.id,{plantEnvironment:h.plantEnvironment,lightRequirements:h.lightRequirements,description:h.description,funFacts:h.funFacts});return console.log("🎉 [COMPLETAR IA] ¡Proceso completado exitosamente!"),console.log("📊 [COMPLETAR IA] Datos actualizados:",{plantId:g.id,ambiente:g.plantEnvironment,necesidadesLuz:g.lightRequirements}),g}catch(h){throw console.error("❌ [COMPLETAR IA] Error durante el proceso:",h),h}finally{t(!1)}},onSuccess:o=>{console.log("🔄 [COMPLETAR IA] Refrescando datos en cache..."),n({type:"success",title:"✅ ¡Información completada!",message:`Se agregaron datos de ambiente y luz para ${o.name}`,duration:5e3}),r.invalidateQueries({queryKey:["plant",o.id]}),r.invalidateQueries({queryKey:["plants"]}),console.log("✅ [COMPLETAR IA] Cache actualizado correctamente")},onError:o=>{console.error("💥 [COMPLETAR IA] Error final en la operación:",o),n({type:"error",title:"❌ Error al completar información",message:"No se pudo obtener los datos de IA. Intenta de nuevo.",duration:7e3}),t(!1)}});return{completeInfo:(o,c,m)=>i.mutate({plantId:o,species:c,commonName:m}),isCompleting:s||i.isPending,error:i.error,isSuccess:i.isSuccess}},it=({plant:s,onShare:t})=>{var Y,Z;const r=pe(),[a,n]=f.useState(!1),[i,l]=f.useState(!1),{deletePlant:o,isDeletingPlant:c}=is(),{completeInfo:m,isCompleting:p}=nt(),{scrollY:h}=Bs(),g=oe(h,[0,300],[0,150]),A=oe(h,[0,200],[1,.3]),_=((Y=s.images)==null?void 0:Y.find(x=>x.isProfileImage))||((Z=s.images)==null?void 0:Z[0]),Ne=!s.plantEnvironment||!s.lightRequirements,we=()=>{window.confirm("¿Estás seguro de que quieres eliminar esta planta? Esta acción es irreversible.")&&o(s.id,{onSuccess:()=>{r("/")}})},ke=()=>{console.log("🎯 [UI] Usuario solicitó completar información con IA"),console.log("🌱 [UI] Datos de la planta:",{id:s.id,nombre:s.name,especie:s.species,ambienteActual:s.plantEnvironment||"No especificado",luzActual:s.lightRequirements||"No especificado"}),n(!1),l(!0)},Ce=()=>{console.log("✅ [UI] Usuario confirmó el completado automático"),l(!1),m(s.id,s.species,s.name)},U=()=>{console.log("❌ [UI] Usuario canceló el completado automático"),l(!1)},Ee=async()=>{const x={title:`Mi ${s.species}${s.nickname?` "${s.nickname}"`:""}`,text:`¡Mira mi hermosa ${s.species}${s.nickname?` "${s.nickname}"`:""}! 🌱`,url:window.location.href};if(navigator.share&&navigator.canShare&&navigator.canShare(x))try{await navigator.share(x);return}catch(b){console.log("Native sharing cancelled or failed:",b)}try{const b=`${x.text}

${x.url}`;await navigator.clipboard.writeText(b);const P=document.createElement("div");P.className="fixed bottom-4 left-4 right-4 bg-primary text-primary-foreground p-4 rounded-lg shadow-lg z-50 text-center font-medium",P.textContent="¡Enlace copiado al portapapeles!",document.body.appendChild(P),setTimeout(()=>{P.remove()},3e3)}catch(b){console.error("Failed to copy to clipboard:",b),t()}},Ie=x=>(x instanceof Date?x:new Date(x)).toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"}),ze=x=>{switch(x){case"interior":return e.jsx(J,{className:"w-4 h-4 mr-2"});case"exterior":return e.jsx(de,{className:"w-4 h-4 mr-2"});case"ambos":return e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"w-3 h-3 mr-1"}),e.jsx(de,{className:"w-3 h-3 mr-1"})]});default:return null}},G=x=>{switch(x){case"interior":return"Interior";case"exterior":return"Exterior";case"ambos":return"Interior/Exterior";default:return null}},Ae=x=>{switch(x){case"poca_luz":return e.jsx(cs,{className:"w-4 h-4 mr-2"});case"luz_indirecta":return e.jsx(S,{className:"w-4 h-4 mr-2 opacity-60"});case"luz_directa_parcial":return e.jsx(S,{className:"w-4 h-4 mr-2 opacity-80"});case"pleno_sol":return e.jsx(S,{className:"w-4 h-4 mr-2"});default:return null}},X=x=>{switch(x){case"poca_luz":return"Poca luz";case"luz_indirecta":return"Luz indirecta";case"luz_directa_parcial":return"Sol parcial";case"pleno_sol":return"Pleno sol";default:return null}},Pe={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.2,delayChildren:.1}}},C={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",damping:25,stiffness:120}}},Le={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.6}}};return f.useEffect(()=>{const x=()=>n(!1);if(a)return document.addEventListener("click",x),()=>document.removeEventListener("click",x)},[a]),e.jsxs(u.div,{className:"relative h-96 w-full overflow-hidden",variants:Pe,initial:"hidden",animate:"visible",children:[e.jsx(u.div,{className:"absolute inset-0 scale-110",style:{y:g,opacity:A},children:_?e.jsx(fe,{src:_.url,alt:s.name,className:"h-full w-full object-cover"}):e.jsx("div",{className:"h-full w-full bg-gradient-to-br from-green-400 via-green-500 to-green-600",children:e.jsx("div",{className:"absolute inset-0 opacity-30",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Ccircle cx='7' cy='7' r='2'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})})}),e.jsxs(u.div,{className:"absolute inset-0",variants:Le,children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-transparent via-transparent to-black/30"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-background/60 to-transparent"})]}),e.jsx("div",{className:"absolute top-0 left-0 right-0 p-4 pt-safe-top z-20",children:e.jsxs(u.div,{className:"flex items-center justify-between",variants:C,children:[e.jsx(N,{"aria-label":"Volver atrás",variant:"ghost",size:"icon",onClick:()=>r("/"),className:"bg-black/30 text-white backdrop-blur-lg rounded-full border border-white/20 hover:bg-black/50 transition-all duration-300",children:e.jsx(ds,{size:20})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(N,{"aria-label":"Compartir",variant:"ghost",size:"icon",onClick:Ee,className:"bg-black/30 text-white backdrop-blur-lg rounded-full border border-white/20 hover:bg-black/50 transition-all duration-300",children:e.jsx(Qs,{size:20})}),e.jsxs("div",{className:"relative",children:[e.jsx(N,{"aria-label":"Más opciones",variant:"ghost",size:"icon",onClick:x=>{x.stopPropagation(),n(b=>!b)},className:"bg-black/30 text-white backdrop-blur-lg rounded-full border border-white/20 hover:bg-black/50 transition-all duration-300",children:e.jsx(ms,{size:20})}),e.jsx(O,{children:a&&e.jsx(u.div,{initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},transition:{duration:.15},className:"absolute right-0 mt-2 w-48 origin-top-right rounded-xl bg-background/95 backdrop-blur-lg shadow-xl ring-1 ring-black/10 focus:outline-none z-30 border border-border/50",onClick:x=>x.stopPropagation(),children:e.jsxs("div",{className:"py-2",children:[Ne&&e.jsxs("button",{onClick:ke,disabled:p,className:"flex w-full items-center px-4 py-3 text-sm text-foreground hover:bg-muted/70 transition-colors rounded-lg mx-2",children:[p?e.jsx(H,{className:"mr-3 h-4 w-4 animate-spin"}):e.jsx(w,{className:"mr-3 h-4 w-4"}),e.jsx("span",{children:p?"Completando...":"Completar con IA"})]}),e.jsx("div",{className:"flex w-full items-center px-2 py-1",children:e.jsx(es,{plant:s,variant:"outline",size:"sm",showLabel:!0,className:"w-full"})}),e.jsxs("button",{onClick:we,disabled:c,className:"flex w-full items-center px-4 py-3 text-sm text-destructive hover:bg-destructive/10 transition-colors rounded-lg mx-2",children:[c?e.jsx(H,{className:"mr-3 h-4 w-4 animate-spin"}):e.jsx(os,{className:"mr-3 h-4 w-4"}),e.jsx("span",{children:c?"Eliminando...":"Eliminar planta"})]})]})})})]})]})]})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-6 pb-safe-bottom z-10",children:e.jsxs(u.div,{className:"space-y-4",variants:C,children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u.h1,{className:"text-3xl font-bold text-white drop-shadow-lg",variants:C,children:s.nickname||s.name}),e.jsx(u.p,{className:"text-lg text-white/90 font-medium",variants:C,children:s.species})]}),e.jsxs(u.div,{className:"flex flex-wrap gap-4 pt-2",variants:C,children:[s.location&&e.jsxs("div",{className:"flex items-center text-white/80 bg-black/30 backdrop-blur-sm px-3 py-2 rounded-full border border-white/20",children:[e.jsx(Zs,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"text-sm font-medium",children:s.location})]}),s.dateAdded&&e.jsxs("div",{className:"flex items-center text-white/80 bg-black/30 backdrop-blur-sm px-3 py-2 rounded-full border border-white/20",children:[e.jsx(W,{className:"w-4 h-4 mr-2"}),e.jsxs("span",{className:"text-sm font-medium",children:["Desde ",Ie(s.dateAdded)]})]}),s.plantEnvironment&&G(s.plantEnvironment)&&e.jsxs("div",{className:"flex items-center text-white/80 bg-black/30 backdrop-blur-sm px-3 py-2 rounded-full border border-white/20",children:[ze(s.plantEnvironment),e.jsx("span",{className:"text-sm font-medium",children:G(s.plantEnvironment)})]}),s.lightRequirements&&X(s.lightRequirements)&&e.jsxs("div",{className:"flex items-center text-white/80 bg-black/30 backdrop-blur-sm px-3 py-2 rounded-full border border-white/20",children:[Ae(s.lightRequirements),e.jsx("span",{className:"text-sm font-medium",children:X(s.lightRequirements)})]}),s.images&&s.images.length>0&&e.jsx("div",{className:"flex items-center text-white/80 bg-black/30 backdrop-blur-sm px-3 py-2 rounded-full border border-white/20",children:e.jsxs("span",{className:"text-sm font-medium",children:[s.images.length," foto",s.images.length!==1?"s":""]})})]})]})}),e.jsx(O,{children:i&&e.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:U,children:e.jsxs(u.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},onClick:x=>x.stopPropagation(),className:"bg-white dark:bg-gray-900 rounded-2xl p-6 max-w-md w-full mx-4 shadow-xl",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center",children:e.jsx(w,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Completar con IA"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Información automática"})]})]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"¿Quieres que la IA complete la información faltante de esta planta?"}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-3 space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-2xl",children:"🌱"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:s.name})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-2xl",children:"🔬"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:s.species})]})]}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("p",{className:"font-medium mb-1",children:"La IA agregará:"}),e.jsxs("ul",{className:"space-y-1",children:[e.jsx("li",{children:"• Ambiente recomendado (interior/exterior)"}),e.jsx("li",{children:"• Necesidades de luz específicas"})]})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(N,{variant:"outline",onClick:U,className:"flex-1",disabled:p,children:"Cancelar"}),e.jsx(N,{onClick:Ce,className:"flex-1 bg-green-600 hover:bg-green-700 text-white",disabled:p,children:p?e.jsxs(e.Fragment,{children:[e.jsx(H,{className:"w-4 h-4 mr-2 animate-spin"}),"Completando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"w-4 h-4 mr-2"}),"Completar"]})})]})]})})})]})},y=({icon:s,label:t,value:r})=>e.jsxs("div",{className:"flex items-start space-x-4 p-4 bg-muted/50 rounded-lg",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 flex items-center justify-center text-primary",children:s}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:t}),e.jsx("p",{className:"text-lg font-semibold text-foreground capitalize",children:r})]})]}),lt=({plant:s})=>{const{careProfile:t,personality:r}=s;return t?e.jsxs("div",{className:"bg-background p-6 rounded-lg shadow-lg w-full space-y-8",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-2xl font-bold text-foreground mb-4 flex items-center",children:[e.jsx(Xs,{className:"mr-3 text-primary"})," Perfil de Cuidados"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx(y,{icon:e.jsx(ss,{size:24}),label:"Riego",value:`Cada ${t.wateringFrequency} días`}),e.jsx(y,{icon:e.jsx(S,{size:24}),label:"Luz Solar",value:t.sunlightRequirement}),e.jsx(y,{icon:e.jsx(ts,{size:24}),label:"Humedad",value:t.humidityPreference}),e.jsx(y,{icon:e.jsx(st,{size:24}),label:"Temperatura Ideal",value:`${t.temperatureRange.min}°C - ${t.temperatureRange.max}°C`}),e.jsx(y,{icon:e.jsx(w,{size:24}),label:"Fertilización",value:`Cada ${t.fertilizingFrequency} días`}),e.jsx(y,{icon:e.jsx(Ge,{size:24}),label:"Tipo de Suelo",value:t.soilType})]}),t.specialCare&&t.specialCare.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"font-semibold text-lg mb-2",children:"Cuidados Especiales:"}),e.jsx("ul",{className:"list-disc list-inside space-y-1 text-muted-foreground",children:t.specialCare.map((a,n)=>e.jsx("li",{children:a},n))})]})]}),r&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-2xl font-bold text-foreground mb-4 flex items-center",children:[e.jsx(us,{className:"mr-3 text-primary"})," Personalidad de la Planta"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx(y,{icon:e.jsx(Xe,{size:24}),label:"Estilo de Comunicación",value:r.communicationStyle}),e.jsxs("div",{className:"md:col-span-2 lg:col-span-3 bg-muted/50 p-4 rounded-lg",children:[e.jsxs("h4",{className:"font-semibold text-lg mb-2 flex items-center",children:[e.jsx(Ks,{className:"mr-2"})," Frases Típicas"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.catchphrases.map((a,n)=>e.jsxs("span",{className:"bg-primary/10 text-primary px-3 py-1 rounded-full text-sm",children:['"',a,'"']},n))})]})]})]})]}):e.jsx("div",{className:"bg-background p-6 rounded-lg shadow-lg w-full text-center",children:e.jsx("p",{className:"text-muted-foreground",children:"No hay perfil de cuidados disponible para esta planta."})})},ot=({species:s,description:t,funFacts:r})=>{const a={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{staggerChildren:.1}}},n={hidden:{opacity:0,y:10},visible:{opacity:1,y:0}};return e.jsxs(u.div,{className:"bg-gradient-to-br from-background via-background to-muted/30 p-6 rounded-2xl shadow-lg border border-border/50 w-full",variants:a,initial:"hidden",animate:"visible",children:[e.jsxs(u.div,{className:"mb-8",variants:n,children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("div",{className:"p-3 bg-primary/10 rounded-full mr-4",children:e.jsx(Us,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-2xl font-bold text-foreground",children:["Acerca de tu ",s]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Conoce más sobre esta fascinante especie"})]})]}),t?e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-0 top-0 w-1 h-full bg-gradient-to-b from-primary to-primary/30 rounded-full"}),e.jsx("p",{className:"text-foreground/90 leading-relaxed text-base pl-6 font-light",children:t})]}):e.jsx("div",{className:"flex items-center justify-center p-8 bg-muted/50 rounded-xl border-2 border-dashed border-muted-foreground/20",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ye,{className:"w-8 h-8 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{className:"text-muted-foreground font-medium",children:"No hay descripción disponible"}),e.jsx("p",{className:"text-sm text-muted-foreground/70 mt-1",children:"Información sobre esta planta no está disponible en este momento"})]})})]}),r&&r.length>0&&e.jsxs(u.div,{variants:n,children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("div",{className:"p-3 bg-yellow-500/10 rounded-full mr-4",children:e.jsx(w,{className:"w-6 h-6 text-yellow-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-foreground",children:"Datos Curiosos"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Descubre cosas increíbles sobre esta planta"})]})]}),e.jsx("div",{className:"grid gap-4",children:r.map((i,l)=>e.jsxs(u.div,{className:"group flex items-start bg-yellow-500/5 hover:bg-yellow-500/10 border border-yellow-500/20 rounded-xl p-4 transition-all duration-300 hover:shadow-md",variants:n,whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx("div",{className:"flex-shrink-0 mr-4 mt-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(xs,{className:"w-5 h-5 text-yellow-500 group-hover:text-yellow-600 transition-colors"}),e.jsx("div",{className:"absolute -inset-2 bg-yellow-500/20 rounded-full opacity-0 group-hover:opacity-100 transition-opacity pulse"})]})}),e.jsx("p",{className:"text-foreground/90 leading-relaxed font-medium group-hover:text-foreground transition-colors",children:i})]},l))})]}),(!r||r.length===0)&&t&&e.jsx(u.div,{className:"mt-8 flex items-center justify-center p-6 bg-muted/30 rounded-xl border border-dashed border-muted-foreground/20",variants:n,children:e.jsxs("div",{className:"text-center",children:[e.jsx(w,{className:"w-6 h-6 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{className:"text-muted-foreground font-medium",children:"No hay datos curiosos disponibles"}),e.jsx("p",{className:"text-xs text-muted-foreground/70 mt-1",children:"¡Pronto agregaremos información interesante!"})]})})]})},ct=s=>{switch(s){case"pest":return e.jsx(ee,{className:"text-red-500"});case"disease":return e.jsx(et,{className:"text-orange-500"});case"overwatering":case"underwatering":case"light":case"nutrient":return e.jsx(ee,{className:"text-yellow-500"});default:return e.jsx(w,{className:"text-blue-500"})}},dt=({analysis:s})=>{if(!s)return null;const t=s.issues&&s.issues.length>0;return e.jsxs("div",{className:"bg-background p-6 rounded-lg shadow-lg w-full",children:[e.jsxs("h3",{className:"text-2xl font-bold text-foreground mb-4 flex items-center",children:[e.jsx(Ys,{className:"mr-3 text-primary"}),"Análisis de Salud Inicial"]}),t?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-lg mb-3",children:"Problemas Detectados"}),e.jsx("ul",{className:"space-y-4",children:s.issues.map((r,a)=>e.jsxs("li",{className:"flex items-start p-4 bg-muted/50 rounded-lg",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 flex items-center justify-center",children:ct(r.type)}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"font-semibold capitalize",children:r.type}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r.description})]})]},a))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-lg mb-3",children:"Tratamientos Sugeridos"}),e.jsx("ul",{className:"space-y-3 list-disc list-inside text-muted-foreground",children:s.issues.map((r,a)=>e.jsx("li",{children:r.treatment},a))})]})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center text-center p-6 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[e.jsx(Js,{className:"w-12 h-12 text-green-500 mb-3"}),e.jsx("h4",{className:"font-semibold text-lg text-green-700 dark:text-green-300",children:"¡Todo en orden!"}),e.jsx("p",{className:"text-muted-foreground",children:"El análisis inicial no detectó problemas de salud significativos."})]}),s.recommendations&&s.recommendations.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"font-semibold text-lg mb-3",children:"Recomendaciones Adicionales"}),e.jsx("ul",{className:"space-y-3 list-disc list-inside text-muted-foreground",children:s.recommendations.map((r,a)=>e.jsx("li",{children:r},a))})]})]})},me=()=>e.jsx(M,{children:e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"relative h-96 w-full overflow-hidden bg-gradient-to-br from-muted/50 to-muted",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background/80 via-background/20 to-transparent"}),e.jsx("div",{className:"absolute top-0 left-0 right-0 p-4 pt-safe-top",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(d,{className:"h-10 w-10 rounded-full"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(d,{className:"h-10 w-10 rounded-full"}),e.jsx(d,{className:"h-10 w-10 rounded-full"})]})]})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-6 pb-safe-bottom",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{className:"h-8 w-64"}),e.jsx(d,{className:"h-6 w-48"})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx(d,{className:"h-8 w-24 rounded-full"}),e.jsx(d,{className:"h-8 w-32 rounded-full"}),e.jsx(d,{className:"h-8 w-20 rounded-full"})]})]})})]}),e.jsxs("div",{className:"p-4 space-y-6 pb-20",children:[e.jsxs("div",{className:"bg-background p-6 rounded-2xl shadow-lg border border-border/50",children:[e.jsxs("div",{className:"mb-6 flex items-center",children:[e.jsx(d,{className:"h-12 w-12 rounded-full mr-4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{className:"h-6 w-48"}),e.jsx(d,{className:"h-4 w-64"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(d,{className:"h-4 w-full"}),e.jsx(d,{className:"h-4 w-5/6"}),e.jsx(d,{className:"h-4 w-4/5"}),e.jsx(d,{className:"h-4 w-3/4"})]}),e.jsxs("div",{className:"mt-8 space-y-4",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(d,{className:"h-12 w-12 rounded-full mr-4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{className:"h-6 w-32"}),e.jsx(d,{className:"h-4 w-56"})]})]}),[1,2,3].map(s=>e.jsxs("div",{className:"flex items-start bg-muted/20 rounded-xl p-4",children:[e.jsx(d,{className:"h-5 w-5 rounded-full mr-4 mt-1"}),e.jsx(d,{className:"h-4 w-full"})]},s))]})]}),e.jsxs("div",{className:"bg-background p-6 rounded-2xl shadow-lg border border-border/50",children:[e.jsxs("div",{className:"mb-4 flex items-center",children:[e.jsx(d,{className:"h-6 w-6 mr-3"}),e.jsx(d,{className:"h-6 w-48"})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-6",children:[e.jsx(d,{className:"h-12 w-12 mx-auto mb-3"}),e.jsx(d,{className:"h-6 w-32 mx-auto mb-2"}),e.jsx(d,{className:"h-4 w-48 mx-auto"})]})]}),e.jsxs("div",{className:"bg-background p-6 rounded-2xl shadow-lg border border-border/50",children:[e.jsxs("div",{className:"mb-4 flex items-center",children:[e.jsx(d,{className:"h-6 w-6 mr-3"}),e.jsx(d,{className:"h-6 w-40"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3,4,5,6].map(s=>e.jsxs("div",{className:"bg-muted/50 rounded-lg p-4",children:[e.jsx(d,{className:"h-8 w-8 mb-2"}),e.jsx(d,{className:"h-4 w-16 mb-1"}),e.jsx(d,{className:"h-5 w-24"})]},s))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(d,{className:"h-5 w-5 mr-2"}),e.jsx(d,{className:"h-6 w-32"})]}),e.jsx(d,{className:"h-4 w-16"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:[1,2,3,4,5,6].map(s=>e.jsx(d,{className:"aspect-square rounded-xl"},s))})]})]}),e.jsxs("div",{className:"fixed bottom-4 right-4 z-40 flex flex-col-reverse gap-3",children:[[1,2,3].map(s=>e.jsx(d,{className:"h-14 w-14 rounded-full"},s)),e.jsx(d,{className:"h-16 w-16 rounded-full"})]})]})}),mt=({plantId:s})=>{const t=pe(),r=[{icon:e.jsx($,{className:"w-5 h-5"}),label:"Tomar foto",color:"bg-primary hover:bg-primary/90",onClick:()=>t(`/camera?plantId=${s}`)},{icon:e.jsx(rs,{className:"w-5 h-5"}),label:"Chat",color:"bg-blue-500 hover:bg-blue-600",onClick:()=>t(`/chat?plantId=${s}`)}],a={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},n={hidden:{scale:0,opacity:0},visible:{scale:1,opacity:1,transition:{type:"spring",damping:15,stiffness:300}}};return e.jsxs(u.div,{className:"fixed bottom-4 right-4 z-40 flex flex-col-reverse gap-3",variants:a,initial:"hidden",animate:"visible",children:[r.map((i,l)=>e.jsxs(u.button,{className:`${i.color} text-white p-4 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 group`,onClick:i.onClick,variants:n,whileHover:{scale:1.1},whileTap:{scale:.95},title:i.label,children:[i.icon,e.jsx("span",{className:"absolute right-full mr-3 top-1/2 -translate-y-1/2 bg-gray-900 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap",children:i.label})]},l)),e.jsx(u.button,{className:"bg-primary text-primary-foreground p-4 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-110",variants:n,whileHover:{rotate:45},whileTap:{scale:.95},title:"Acciones rápidas",children:e.jsx(as,{className:"w-6 h-6"})})]})},kt=()=>{var i,l;const{plantId:s}=Ze(),{plant:t,loading:r,error:a}=Ke(s);if(r)return e.jsx(me,{});if(a)return e.jsx(M,{children:e.jsx("main",{className:"flex flex-1 flex-col items-center justify-center p-4 text-center h-screen",children:e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[e.jsx(se,{className:"w-16 h-16 text-destructive mx-auto"}),e.jsx("h1",{className:"text-2xl font-bold text-destructive",children:"Ocurrió un Error"}),e.jsx("p",{className:"text-muted-foreground max-w-md",children:a}),e.jsx(N,{onClick:()=>window.location.reload(),className:"mt-4",children:"Intentar de nuevo"})]})})});if(!t)return e.jsx(M,{children:e.jsx("main",{className:"flex flex-1 flex-col items-center justify-center p-4 text-center h-screen",children:e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[e.jsx(se,{className:"w-16 h-16 text-muted-foreground mx-auto"}),e.jsx("h1",{className:"text-2xl font-bold",children:"Planta no encontrada"}),e.jsx("p",{className:"text-muted-foreground max-w-md",children:"No se pudo encontrar la información de la planta solicitada."}),e.jsx(N,{onClick:()=>window.location.assign("/"),className:"mt-4",children:"Volver al inicio"})]})})});const n=(l=(i=t.images)==null?void 0:i[0])==null?void 0:l.healthAnalysis;return e.jsx(M,{children:e.jsx(f.Suspense,{fallback:e.jsx(me,{}),children:e.jsxs(u.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsx(it,{plant:t,onShare:()=>{const o=`¡Mira mi hermosa ${t.species}${t.nickname?` "${t.nickname}"`:""}! 🌱

${window.location.href}`;prompt("Copia este enlace para compartir:",o)}}),e.jsxs("main",{className:"p-4 space-y-6 pb-20",children:[e.jsx(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:e.jsx(ot,{species:t.species,description:t.description,funFacts:t.funFacts})}),e.jsx(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:e.jsx(dt,{analysis:n})}),e.jsx(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:e.jsx(lt,{plant:t})}),e.jsx(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:e.jsx(tt,{images:t.images})})]}),e.jsx(mt,{plantId:t.id})]})})})};export{kt as default};
