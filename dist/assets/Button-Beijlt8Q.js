import{r as a,K as L,j as g,N as W,O as z,P as A,Q as B,U as K,V as S,W as U,R as T,m as _,e as D}from"./index-CL2LZDri.js";class H extends a.Component{getSnapshotBeforeUpdate(r){const e=this.props.childRef.current;if(e&&r.isPresent&&!this.props.isPresent){const o=e.offsetParent,h=W(o)&&o.offsetWidth||0,s=this.props.sizeRef.current;s.height=e.offsetHeight||0,s.width=e.offsetWidth||0,s.top=e.offsetTop,s.left=e.offsetLeft,s.right=h-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function F({children:n,isPresent:r,anchorX:e,root:o}){const h=a.useId(),s=a.useRef(null),p=a.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:x}=a.useContext(L);return a.useInsertionEffect(()=>{const{width:y,height:t,top:d,left:i,right:l}=p.current;if(r||!s.current||!y||!t)return;const m=e==="left"?`left: ${i}`:`right: ${l}`;s.current.dataset.motionPopId=h;const u=document.createElement("style");x&&(u.nonce=x);const c=o??document.head;return c.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${h}"] {
            position: absolute !important;
            width: ${y}px !important;
            height: ${t}px !important;
            ${m}px !important;
            top: ${d}px !important;
          }
        `),()=>{c.removeChild(u),c.contains(u)&&c.removeChild(u)}},[r]),g.jsx(H,{isPresent:r,childRef:s,sizeRef:p,children:a.cloneElement(n,{ref:s})})}const G=({children:n,initial:r,isPresent:e,onExitComplete:o,custom:h,presenceAffectsLayout:s,mode:p,anchorX:x,root:y})=>{const t=z(Q),d=a.useId();let i=!0,l=a.useMemo(()=>(i=!1,{id:d,initial:r,isPresent:e,custom:h,onExitComplete:m=>{t.set(m,!0);for(const u of t.values())if(!u)return;o&&o()},register:m=>(t.set(m,!1),()=>t.delete(m))}),[e,t,o]);return s&&i&&(l={...l}),a.useMemo(()=>{t.forEach((m,u)=>t.set(u,!1))},[e]),a.useEffect(()=>{!e&&!t.size&&o&&o()},[e]),p==="popLayout"&&(n=g.jsx(F,{isPresent:e,anchorX:x,root:y,children:n})),g.jsx(A.Provider,{value:l,children:n})};function Q(){return new Map}const b=n=>n.key||"";function N(n){const r=[];return a.Children.forEach(n,e=>{a.isValidElement(e)&&r.push(e)}),r}const Z=({children:n,custom:r,initial:e=!0,onExitComplete:o,presenceAffectsLayout:h=!0,mode:s="sync",propagate:p=!1,anchorX:x="left",root:y})=>{const[t,d]=B(p),i=a.useMemo(()=>N(n),[n]),l=p&&!t?[]:i.map(b),m=a.useRef(!0),u=a.useRef(i),c=z(()=>new Map),[R,I]=a.useState(i),[C,V]=a.useState(i);K(()=>{m.current=!1,u.current=i;for(let v=0;v<C.length;v++){const f=b(C[v]);l.includes(f)?c.delete(f):c.get(f)!==!0&&c.set(f,!1)}},[C,l.length,l.join("-")]);const j=[];if(i!==R){let v=[...i];for(let f=0;f<C.length;f++){const w=C[f],P=b(w);l.includes(P)||(v.splice(f,0,w),j.push(w))}return s==="wait"&&j.length&&(v=j),V(N(v)),I(i),null}const{forceRender:E}=a.useContext(S);return g.jsx(g.Fragment,{children:C.map(v=>{const f=b(v),w=p&&!t?!1:i===C||l.includes(f),P=()=>{if(c.has(f))c.set(f,!0);else return;let M=!0;c.forEach(O=>{O||(M=!1)}),M&&(E==null||E(),V(u.current),p&&(d==null||d()),o&&o())};return g.jsx(G,{isPresent:w,initial:!m.current||e?void 0:!1,custom:r,presenceAffectsLayout:h,mode:s,root:y,onExitComplete:w?void 0:P,anchorX:x,children:v},f)})})},$=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,k=U,X=(n,r)=>e=>{var o;if((r==null?void 0:r.variants)==null)return k(n,e==null?void 0:e.class,e==null?void 0:e.className);const{variants:h,defaultVariants:s}=r,p=Object.keys(h).map(t=>{const d=e==null?void 0:e[t],i=s==null?void 0:s[t];if(d===null)return null;const l=$(d)||$(i);return h[t][l]}),x=e&&Object.entries(e).reduce((t,d)=>{let[i,l]=d;return l===void 0||(t[i]=l),t},{}),y=r==null||(o=r.compoundVariants)===null||o===void 0?void 0:o.reduce((t,d)=>{let{class:i,className:l,...m}=d;return Object.entries(m).every(u=>{let[c,R]=u;return Array.isArray(R)?R.includes({...s,...x}[c]):{...s,...x}[c]===R})?[...t,i,l]:t},[]);return k(n,p,y,e==null?void 0:e.class,e==null?void 0:e.className)},q=X("w-full px-4 py-3 rounded-xl font-medium ios-button inline-flex items-center justify-center transition-colors",{variants:{variant:{primary:"bg-primary-500 text-white hover:bg-primary-600",secondary:"bg-gray-600 text-white hover:bg-gray-700",ghost:"bg-transparent text-white hover:bg-white/10"},size:{default:"h-11 px-4 py-2",sm:"h-11 rounded-md px-3",lg:"h-12 rounded-md px-8",icon:"h-11 w-11"}},defaultVariants:{variant:"primary",size:"default"}}),J=T.forwardRef(({className:n,variant:r,size:e,...o},h)=>g.jsx(_.button,{whileTap:{scale:.95},transition:{duration:.1,ease:"easeInOut"},className:D(q({variant:r,size:e,className:n})),ref:h,...o}));J.displayName="Button";export{Z as A,J as B};
