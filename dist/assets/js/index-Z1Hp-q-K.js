const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/Settings-DM8_l4L5.js","assets/js/query-tHw9dKVh.js","assets/js/vendor-CWIcSd2s.js","assets/js/router-CqOyMAvc.js","assets/js/ui-CgrjAsfp.js","assets/js/supabase-u3H8V9hM.js","assets/js/Auth-B-L06XWJ.js"])))=>i.map(i=>d[i]);
var xd=Object.freeze,bd=Object.defineProperty;var bb=(e,t,r)=>t in e?bd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Ut=(e,t,r)=>bb(e,typeof t!="symbol"?t+"":t,r);var at=(e,t)=>xd(bd(e,"raw",{value:xd(t||e.slice())}));import{j as l,u as ko,a as Rr,b as sp,Q as lp,c as cp}from"./query-tHw9dKVh.js";import{a as uc,b as I,d as wb,r as y,e as Hr}from"./vendor-CWIcSd2s.js";import{c as jb,_ as dc}from"./supabase-u3H8V9hM.js";import{u as ot,a as up,L as Sb,O as Nb,b as fc,B as kb,R as wd,c as Vt,N as Os}from"./router-CqOyMAvc.js";import{A as se,R as dp,L as Za,C as Zt,B as mc,I as hc,a as It,b as Pb,c as hr,m as P,X as Sr,T as Kt,d as ln,P as pc,e as gc,H as Li,f as Ca,S as Eb,W as _b,g as fp,h as Br,i as Ve,j as Lr,k as mp,D as Po,E as Ab,l as sl,M as Ka,n as hp,o as Cb,p as Ob,q as Tb,U as ll,r as Ib,s as Mb,t as pp,u as gp,v as Db,w as vp,x as Fi,y as yp,z as $b,F as jd,G as vc,J as xp,K as bp,N as Sd,O as zb,Q as wp,V as yc,Y as jp,Z as Rb,_ as Lb,$ as Fb,a0 as Bb,a1 as Ub,a2 as Nd,a3 as Wb,a4 as Hb,a5 as Sp,a6 as Np,a7 as kp,a8 as qb,a9 as Zb}from"./ui-CgrjAsfp.js";function jL(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var cl={},kd=uc;cl.createRoot=kd.createRoot,cl.hydrateRoot=kd.hydrateRoot;const Pd=e=>{let t;const r=new Set,n=(u,d)=>{const f=typeof u=="function"?u(t):u;if(!Object.is(f,t)){const m=t;t=(d!=null?d:typeof f!="object"||f===null)?f:Object.assign({},t,f),r.forEach(h=>h(t,m))}},a=()=>t,s={setState:n,getState:a,getInitialState:()=>c,subscribe:u=>(r.add(u),()=>r.delete(u))},c=t=e(n,a,s);return s},Kb=e=>e?Pd(e):Pd,Gb=e=>e;function Vb(e,t=Gb){const r=I.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return I.useDebugValue(r),r}const Ed=e=>{const t=Kb(e),r=n=>Vb(t,n);return Object.assign(r,t),r},xc=e=>e?Ed(e):Ed,Pp=void 0,Yb=void 0;throw new Error("Missing Supabase environment variables");const pe=jb(Pp,Yb,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"},global:{headers:{"X-Client-Info":"plantitas-app"}},realtime:{timeout:1e4}}),Xb=Object.freeze(Object.defineProperty({__proto__:null,supabase:pe,supabaseUrl:Pp},Symbol.toStringTag,{value:"Module"}));class Qb{constructor(){Ut(this,"cache",new Map);Ut(this,"CACHE_DURATIONS",{GARDEN_CONTEXT:5*60*1e3,GARDEN_SUMMARY:3*60*1e3,SUGGESTED_QUESTIONS:10*60*1e3,PLANT_DATA:2*60*1e3})}getCacheKey(t,r){return"".concat(t,":").concat(r)}isValidCache(t){return t?Date.now()<t.expiresAt:!1}getCachedData(t){const r=this.cache.get(t);return this.isValidCache(r)?r.data:(r&&this.cache.delete(t),null)}setCachedData(t,r,n){const a={data:r,timestamp:Date.now(),expiresAt:Date.now()+n};this.cache.set(t,a),console.log("[GardenCache] Cache SET for key: ".concat(t,", expires in ").concat(n/1e3,"s"))}getGardenContext(t){const r=this.getCacheKey(t,"garden_context");return this.getCachedData(r)}setGardenContext(t,r){const n=this.getCacheKey(t,"garden_context");this.setCachedData(n,r,this.CACHE_DURATIONS.GARDEN_CONTEXT)}getGardenSummary(t){const r=this.getCacheKey(t,"garden_summary");return this.getCachedData(r)}setGardenSummary(t,r){const n=this.getCacheKey(t,"garden_summary");this.setCachedData(n,r,this.CACHE_DURATIONS.GARDEN_SUMMARY)}getSuggestedQuestions(t){const r=this.getCacheKey(t,"suggested_questions");return this.getCachedData(r)}setSuggestedQuestions(t,r){const n=this.getCacheKey(t,"suggested_questions");this.setCachedData(n,r,this.CACHE_DURATIONS.SUGGESTED_QUESTIONS)}getPlantData(t){const r=this.getCacheKey(t,"plant_data");return this.getCachedData(r)}setPlantData(t,r){const n=this.getCacheKey(t,"plant_data");this.setCachedData(n,r,this.CACHE_DURATIONS.PLANT_DATA)}invalidateCache(t,r){r?r.forEach(n=>{const a=this.getCacheKey(t,n);this.cache.delete(a),console.log("[GardenCache] Invalidated cache for key: ".concat(a))}):Array.from(this.cache.keys()).filter(a=>a.startsWith("".concat(t,":"))).forEach(a=>{this.cache.delete(a),console.log("[GardenCache] Invalidated cache for key: ".concat(a))})}invalidateOnPlantChange(t){console.log("[GardenCache] Plant data changed, invalidating related caches"),this.invalidateCache(t,["garden_context","garden_summary","plant_data","suggested_questions"])}getCacheStats(t){const r=Array.from(this.cache.keys()),n=r.filter(o=>o.startsWith("".concat(t,":")));let a=0,i=0;return n.forEach(o=>{const s=this.cache.get(o);s&&(this.isValidCache(s)?a++:i++)}),{totalEntries:r.length,userEntries:n.length,validEntries:a,expiredEntries:i}}cleanup(){const t=Date.now(),r=[];this.cache.forEach((n,a)=>{t>=n.expiresAt&&r.push(a)}),r.forEach(n=>{this.cache.delete(n)}),r.length>0&&console.log("[GardenCache] Cleaned up ".concat(r.length," expired entries"))}clearAll(){this.cache.size,this.cache.clear()}}const Rn=new Qb;typeof window<"u"&&setInterval(()=>{Rn.cleanup()},5*60*1e3);function _(e,t,r){var s;function n(c,u){var f,m;var d;Object.defineProperty(c,"_zod",{value:(f=c._zod)!=null?f:{},enumerable:!1}),(m=(d=c._zod).traits)!=null||(d.traits=new Set),c._zod.traits.add(e),t(c,u);for(const h in o.prototype)h in c||Object.defineProperty(c,h,{value:o.prototype[h].bind(c)});c._zod.constr=o,c._zod.def=u}const a=(s=r==null?void 0:r.Parent)!=null?s:Object;class i extends a{}Object.defineProperty(i,"name",{value:e});function o(c){var f;var u;const d=r!=null&&r.Parent?new i:this;n(d,c),(f=(u=d._zod).deferred)!=null||(u.deferred=[]);for(const m of d._zod.deferred)m();return d}return Object.defineProperty(o,"init",{value:n}),Object.defineProperty(o,Symbol.hasInstance,{value:c=>{var u,d;return r!=null&&r.Parent&&c instanceof r.Parent?!0:(d=(u=c==null?void 0:c._zod)==null?void 0:u.traits)==null?void 0:d.has(e)}}),Object.defineProperty(o,"name",{value:e}),o}class Oa extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const Ep={};function gn(e){return Ep}function Jb(e){const t=Object.values(e).filter(n=>typeof n=="number");return Object.entries(e).filter(([n,a])=>t.indexOf(+n)===-1).map(([n,a])=>a)}function ew(e,t){return typeof t=="bigint"?t.toString():t}function _p(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function bc(e){return e==null}function wc(e){const t=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}function tw(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,a=r>n?r:n,i=Number.parseInt(e.toFixed(a).replace(".","")),o=Number.parseInt(t.toFixed(a).replace(".",""));return i%o/10**a}function xe(e,t,r){Object.defineProperty(e,t,{get(){{const n=r();return e[t]=n,n}},set(n){Object.defineProperty(e,t,{value:n})},configurable:!0})}function jc(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function la(e){return JSON.stringify(e)}const Ap=Error.captureStackTrace?Error.captureStackTrace:(...e)=>{};function ul(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const rw=_p(()=>{var e;if(typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)!=null&&e.includes("Cloudflare")))return!1;try{const t=Function;return new t(""),!0}catch(t){return!1}});function dl(e){if(ul(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(ul(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}const nw=new Set(["string","number","symbol"]);function Eo(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Sn(e,t,r){const n=new e._zod.constr(t!=null?t:e._zod.def);return(!t||r!=null&&r.parent)&&(n._zod.parent=e),n}function H(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if((t==null?void 0:t.message)!==void 0){if((t==null?void 0:t.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function aw(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const iw={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function ow(e,t){const r={},n=e._zod.def;for(const a in t){if(!(a in n.shape))throw new Error('Unrecognized key: "'.concat(a,'"'));t[a]&&(r[a]=n.shape[a])}return Sn(e,{...e._zod.def,shape:r,checks:[]})}function sw(e,t){const r={...e._zod.def.shape},n=e._zod.def;for(const a in t){if(!(a in n.shape))throw new Error('Unrecognized key: "'.concat(a,'"'));t[a]&&delete r[a]}return Sn(e,{...e._zod.def,shape:r,checks:[]})}function lw(e,t){if(!dl(t))throw new Error("Invalid input to extend: expected a plain object");const r={...e._zod.def,get shape(){const n={...e._zod.def.shape,...t};return jc(this,"shape",n),n},checks:[]};return Sn(e,r)}function cw(e,t){return Sn(e,{...e._zod.def,get shape(){const r={...e._zod.def.shape,...t._zod.def.shape};return jc(this,"shape",r),r},catchall:t._zod.def.catchall,checks:[]})}function uw(e,t,r){const n=t._zod.def.shape,a={...n};if(r)for(const i in r){if(!(i in n))throw new Error('Unrecognized key: "'.concat(i,'"'));r[i]&&(a[i]=e?new e({type:"optional",innerType:n[i]}):n[i])}else for(const i in n)a[i]=e?new e({type:"optional",innerType:n[i]}):n[i];return Sn(t,{...t._zod.def,shape:a,checks:[]})}function dw(e,t,r){const n=t._zod.def.shape,a={...n};if(r)for(const i in r){if(!(i in a))throw new Error('Unrecognized key: "'.concat(i,'"'));r[i]&&(a[i]=new e({type:"nonoptional",innerType:n[i]}))}else for(const i in n)a[i]=new e({type:"nonoptional",innerType:n[i]});return Sn(t,{...t._zod.def,shape:a,checks:[]})}function Pa(e,t=0){var r;for(let n=t;n<e.issues.length;n++)if(((r=e.issues[n])==null?void 0:r.continue)!==!0)return!0;return!1}function Sc(e,t){return t.map(r=>{var a;var n;return(a=(n=r).path)!=null||(n.path=[]),r.path.unshift(e),r})}function ui(e){return typeof e=="string"?e:e==null?void 0:e.message}function vn(e,t,r){var a,i,o,s,c,u,d,f,m,h,g;const n={...e,path:(a=e.path)!=null?a:[]};if(!e.message){const v=(g=(h=(f=(u=ui((s=(o=(i=e.inst)==null?void 0:i._zod.def)==null?void 0:o.error)==null?void 0:s.call(o,e)))!=null?u:ui((c=t==null?void 0:t.error)==null?void 0:c.call(t,e)))!=null?f:ui((d=r.customError)==null?void 0:d.call(r,e)))!=null?h:ui((m=r.localeError)==null?void 0:m.call(r,e)))!=null?g:"Invalid input";n.message=v}return delete n.inst,delete n.continue,t!=null&&t.reportInput||delete n.input,n}function Nc(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function Ta(...e){const[t,r,n]=e;return typeof t=="string"?{message:t,code:"custom",input:r,inst:n}:{...t}}const Cp=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),Object.defineProperty(e,"message",{get(){return JSON.stringify(t,ew,2)},enumerable:!0}),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},Op=_("$ZodError",Cp),Tp=_("$ZodError",Cp,{Parent:Error});function fw(e,t=r=>r.message){const r={},n=[];for(const a of e.issues)a.path.length>0?(r[a.path[0]]=r[a.path[0]]||[],r[a.path[0]].push(t(a))):n.push(t(a));return{formErrors:n,fieldErrors:r}}function mw(e,t){const r=t||function(i){return i.message},n={_errors:[]},a=i=>{for(const o of i.issues)if(o.code==="invalid_union"&&o.errors.length)o.errors.map(s=>a({issues:s}));else if(o.code==="invalid_key")a({issues:o.issues});else if(o.code==="invalid_element")a({issues:o.issues});else if(o.path.length===0)n._errors.push(r(o));else{let s=n,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(s[u]=s[u]||{_errors:[]},s[u]._errors.push(r(o))):s[u]=s[u]||{_errors:[]},s=s[u],c++}}};return a(e),n}const hw=e=>(t,r,n,a)=>{var s;const i=n?Object.assign(n,{async:!1}):{async:!1},o=t._zod.run({value:r,issues:[]},i);if(o instanceof Promise)throw new Oa;if(o.issues.length){const c=new((s=a==null?void 0:a.Err)!=null?s:e)(o.issues.map(u=>vn(u,i,gn())));throw Ap(c,a==null?void 0:a.callee),c}return o.value},pw=e=>async(t,r,n,a)=>{var s;const i=n?Object.assign(n,{async:!0}):{async:!0};let o=t._zod.run({value:r,issues:[]},i);if(o instanceof Promise&&(o=await o),o.issues.length){const c=new((s=a==null?void 0:a.Err)!=null?s:e)(o.issues.map(u=>vn(u,i,gn())));throw Ap(c,a==null?void 0:a.callee),c}return o.value},Ip=e=>(t,r,n)=>{const a=n?{...n,async:!1}:{async:!1},i=t._zod.run({value:r,issues:[]},a);if(i instanceof Promise)throw new Oa;return i.issues.length?{success:!1,error:new(e!=null?e:Op)(i.issues.map(o=>vn(o,a,gn())))}:{success:!0,data:i.value}},gw=Ip(Tp),Mp=e=>async(t,r,n)=>{const a=n?Object.assign(n,{async:!0}):{async:!0};let i=t._zod.run({value:r,issues:[]},a);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new e(i.issues.map(o=>vn(o,a,gn())))}:{success:!0,data:i.value}},vw=Mp(Tp),yw=/^[cC][^\s-]{8,}$/,xw=/^[0-9a-z]+$/,bw=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,ww=/^[0-9a-vA-V]{20}$/,jw=/^[A-Za-z0-9]{27}$/,Sw=/^[a-zA-Z0-9_-]{21}$/,Nw=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,kw=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,_d=e=>e?new RegExp("^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-".concat(e,"[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$")):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,Pw=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,Ew="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function _w(){return new RegExp(Ew,"u")}const Aw=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Cw=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,Ow=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Tw=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Iw=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Dp=/^[A-Za-z0-9_-]*$/,Mw=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/,Dw=/^\+(?:[0-9]){6,14}[0-9]$/,$p="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",$w=new RegExp("^".concat($p,"$"));function zp(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?"".concat(t):e.precision===0?"".concat(t,":[0-5]\\d"):"".concat(t,":[0-5]\\d\\.\\d{").concat(e.precision,"}"):"".concat(t,"(?::[0-5]\\d(?:\\.\\d+)?)?")}function zw(e){return new RegExp("^".concat(zp(e),"$"))}function Rw(e){const t=zp({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-]\\d{2}:\\d{2})");const n="".concat(t,"(?:").concat(r.join("|"),")");return new RegExp("^".concat($p,"T(?:").concat(n,")$"))}const Lw=e=>{var r,n;const t=e?"[\\s\\S]{".concat((r=e==null?void 0:e.minimum)!=null?r:0,",").concat((n=e==null?void 0:e.maximum)!=null?n:"","}"):"[\\s\\S]*";return new RegExp("^".concat(t,"$"))},Fw=/^\d+$/,Bw=/^-?\d+(?:\.\d+)?/i,Uw=/true|false/i,Ww=/^[^A-Z]*$/,Hw=/^[^a-z]*$/,dt=_("$ZodCheck",(e,t)=>{var n,a;var r;(n=e._zod)!=null||(e._zod={}),e._zod.def=t,(a=(r=e._zod).onattach)!=null||(r.onattach=[])}),Rp={number:"number",bigint:"bigint",object:"date"},Lp=_("$ZodCheckLessThan",(e,t)=>{dt.init(e,t);const r=Rp[typeof t.value];e._zod.onattach.push(n=>{var o;const a=n._zod.bag,i=(o=t.inclusive?a.maximum:a.exclusiveMaximum)!=null?o:Number.POSITIVE_INFINITY;t.value<i&&(t.inclusive?a.maximum=t.value:a.exclusiveMaximum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value<=t.value:n.value<t.value)||n.issues.push({origin:r,code:"too_big",maximum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Fp=_("$ZodCheckGreaterThan",(e,t)=>{dt.init(e,t);const r=Rp[typeof t.value];e._zod.onattach.push(n=>{var o;const a=n._zod.bag,i=(o=t.inclusive?a.minimum:a.exclusiveMinimum)!=null?o:Number.NEGATIVE_INFINITY;t.value>i&&(t.inclusive?a.minimum=t.value:a.exclusiveMinimum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value>=t.value:n.value>t.value)||n.issues.push({origin:r,code:"too_small",minimum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),qw=_("$ZodCheckMultipleOf",(e,t)=>{dt.init(e,t),e._zod.onattach.push(r=>{var a;var n;(a=(n=r._zod.bag).multipleOf)!=null||(n.multipleOf=t.value)}),e._zod.check=r=>{if(typeof r.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof r.value=="bigint"?r.value%t.value===BigInt(0):tw(r.value,t.value)===0)||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:t.value,input:r.value,inst:e,continue:!t.abort})}}),Zw=_("$ZodCheckNumberFormat",(e,t)=>{var o;dt.init(e,t),t.format=t.format||"float64";const r=(o=t.format)==null?void 0:o.includes("int"),n=r?"int":"number",[a,i]=iw[t.format];e._zod.onattach.push(s=>{const c=s._zod.bag;c.format=t.format,c.minimum=a,c.maximum=i,r&&(c.pattern=Fw)}),e._zod.check=s=>{const c=s.value;if(r){if(!Number.isInteger(c)){s.issues.push({expected:n,format:t.format,code:"invalid_type",input:c,inst:e});return}if(!Number.isSafeInteger(c)){c>0?s.issues.push({input:c,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,continue:!t.abort}):s.issues.push({input:c,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,continue:!t.abort});return}}c<a&&s.issues.push({origin:"number",input:c,code:"too_small",minimum:a,inclusive:!0,inst:e,continue:!t.abort}),c>i&&s.issues.push({origin:"number",input:c,code:"too_big",maximum:i,inst:e})}}),Kw=_("$ZodCheckMaxLength",(e,t)=>{var n;var r;dt.init(e,t),(n=(r=e._zod.def).when)!=null||(r.when=a=>{const i=a.value;return!bc(i)&&i.length!==void 0}),e._zod.onattach.push(a=>{var o;const i=(o=a._zod.bag.maximum)!=null?o:Number.POSITIVE_INFINITY;t.maximum<i&&(a._zod.bag.maximum=t.maximum)}),e._zod.check=a=>{const i=a.value;if(i.length<=t.maximum)return;const s=Nc(i);a.issues.push({origin:s,code:"too_big",maximum:t.maximum,inclusive:!0,input:i,inst:e,continue:!t.abort})}}),Gw=_("$ZodCheckMinLength",(e,t)=>{var n;var r;dt.init(e,t),(n=(r=e._zod.def).when)!=null||(r.when=a=>{const i=a.value;return!bc(i)&&i.length!==void 0}),e._zod.onattach.push(a=>{var o;const i=(o=a._zod.bag.minimum)!=null?o:Number.NEGATIVE_INFINITY;t.minimum>i&&(a._zod.bag.minimum=t.minimum)}),e._zod.check=a=>{const i=a.value;if(i.length>=t.minimum)return;const s=Nc(i);a.issues.push({origin:s,code:"too_small",minimum:t.minimum,inclusive:!0,input:i,inst:e,continue:!t.abort})}}),Vw=_("$ZodCheckLengthEquals",(e,t)=>{var n;var r;dt.init(e,t),(n=(r=e._zod.def).when)!=null||(r.when=a=>{const i=a.value;return!bc(i)&&i.length!==void 0}),e._zod.onattach.push(a=>{const i=a._zod.bag;i.minimum=t.length,i.maximum=t.length,i.length=t.length}),e._zod.check=a=>{const i=a.value,o=i.length;if(o===t.length)return;const s=Nc(i),c=o>t.length;a.issues.push({origin:s,...c?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:a.value,inst:e,continue:!t.abort})}}),_o=_("$ZodCheckStringFormat",(e,t)=>{var a,i;var r,n;dt.init(e,t),e._zod.onattach.push(o=>{var c;const s=o._zod.bag;s.format=t.format,t.pattern&&((c=s.patterns)!=null||(s.patterns=new Set),s.patterns.add(t.pattern))}),t.pattern?(a=(r=e._zod).check)!=null||(r.check=o=>{t.pattern.lastIndex=0,!t.pattern.test(o.value)&&o.issues.push({origin:"string",code:"invalid_format",format:t.format,input:o.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(i=(n=e._zod).check)!=null||(n.check=()=>{})}),Yw=_("$ZodCheckRegex",(e,t)=>{_o.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),Xw=_("$ZodCheckLowerCase",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=Ww),_o.init(e,t)}),Qw=_("$ZodCheckUpperCase",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=Hw),_o.init(e,t)}),Jw=_("$ZodCheckIncludes",(e,t)=>{dt.init(e,t);const r=Eo(t.includes),n=new RegExp(typeof t.position=="number"?"^.{".concat(t.position,"}").concat(r):r);t.pattern=n,e._zod.onattach.push(a=>{var o;const i=a._zod.bag;(o=i.patterns)!=null||(i.patterns=new Set),i.patterns.add(n)}),e._zod.check=a=>{a.value.includes(t.includes,t.position)||a.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:a.value,inst:e,continue:!t.abort})}}),e1=_("$ZodCheckStartsWith",(e,t)=>{var n;dt.init(e,t);const r=new RegExp("^".concat(Eo(t.prefix),".*"));(n=t.pattern)!=null||(t.pattern=r),e._zod.onattach.push(a=>{var o;const i=a._zod.bag;(o=i.patterns)!=null||(i.patterns=new Set),i.patterns.add(r)}),e._zod.check=a=>{a.value.startsWith(t.prefix)||a.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:a.value,inst:e,continue:!t.abort})}}),t1=_("$ZodCheckEndsWith",(e,t)=>{var n;dt.init(e,t);const r=new RegExp(".*".concat(Eo(t.suffix),"$"));(n=t.pattern)!=null||(t.pattern=r),e._zod.onattach.push(a=>{var o;const i=a._zod.bag;(o=i.patterns)!=null||(i.patterns=new Set),i.patterns.add(r)}),e._zod.check=a=>{a.value.endsWith(t.suffix)||a.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:a.value,inst:e,continue:!t.abort})}}),r1=_("$ZodCheckOverwrite",(e,t)=>{dt.init(e,t),e._zod.check=r=>{r.value=t.tx(r.value)}});class n1{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const n=t.split("\n").filter(o=>o),a=Math.min(...n.map(o=>o.length-o.trimStart().length)),i=n.map(o=>o.slice(a)).map(o=>" ".repeat(this.indent*2)+o);for(const o of i)this.content.push(o)}compile(){var i;const t=Function,r=this==null?void 0:this.args,a=[...((i=this==null?void 0:this.content)!=null?i:[""]).map(o=>"  ".concat(o))];return new t(...r,a.join("\n"))}}const a1={major:4,minor:0,patch:5},Se=_("$ZodType",(e,t)=>{var a,i,o;var r;e!=null||(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=a1;const n=[...(a=e._zod.def.checks)!=null?a:[]];e._zod.traits.has("$ZodCheck")&&n.unshift(e);for(const s of n)for(const c of s._zod.onattach)c(e);if(n.length===0)(i=(r=e._zod).deferred)!=null||(r.deferred=[]),(o=e._zod.deferred)==null||o.push(()=>{e._zod.run=e._zod.parse});else{const s=(c,u,d)=>{let f=Pa(c),m;for(const h of u){if(h._zod.def.when){if(!h._zod.def.when(c))continue}else if(f)continue;const g=c.issues.length,v=h._zod.check(c);if(v instanceof Promise&&(d==null?void 0:d.async)===!1)throw new Oa;if(m||v instanceof Promise)m=(m!=null?m:Promise.resolve()).then(async()=>{await v,c.issues.length!==g&&(f||(f=Pa(c,g)))});else{if(c.issues.length===g)continue;f||(f=Pa(c,g))}}return m?m.then(()=>c):c};e._zod.run=(c,u)=>{const d=e._zod.parse(c,u);if(d instanceof Promise){if(u.async===!1)throw new Oa;return d.then(f=>s(f,n,u))}return s(d,n,u)}}e["~standard"]={validate:s=>{var c;try{const u=gw(e,s);return u.success?{value:u.data}:{issues:(c=u.error)==null?void 0:c.issues}}catch(u){return vw(e,s).then(d=>{var f;return d.success?{value:d.data}:{issues:(f=d.error)==null?void 0:f.issues}})}},vendor:"zod",version:1}}),kc=_("$ZodString",(e,t)=>{var r,n,a;Se.init(e,t),e._zod.pattern=(a=[...(n=(r=e==null?void 0:e._zod.bag)==null?void 0:r.patterns)!=null?n:[]].pop())!=null?a:Lw(e._zod.bag),e._zod.parse=(i,o)=>{if(t.coerce)try{i.value=String(i.value)}catch(s){}return typeof i.value=="string"||i.issues.push({expected:"string",code:"invalid_type",input:i.value,inst:e}),i}}),je=_("$ZodStringFormat",(e,t)=>{_o.init(e,t),kc.init(e,t)}),i1=_("$ZodGUID",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=kw),je.init(e,t)}),o1=_("$ZodUUID",(e,t)=>{var r,n;if(t.version){const i={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(i===void 0)throw new Error('Invalid UUID version: "'.concat(t.version,'"'));(r=t.pattern)!=null||(t.pattern=_d(i))}else(n=t.pattern)!=null||(t.pattern=_d());je.init(e,t)}),s1=_("$ZodEmail",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=Pw),je.init(e,t)}),l1=_("$ZodURL",(e,t)=>{je.init(e,t),e._zod.check=r=>{try{const n=r.value,a=new URL(n),i=a.href;t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(a.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:Mw.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(a.protocol.endsWith(":")?a.protocol.slice(0,-1):a.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),!n.endsWith("/")&&i.endsWith("/")?r.value=i.slice(0,-1):r.value=i;return}catch(n){r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),c1=_("$ZodEmoji",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=_w()),je.init(e,t)}),u1=_("$ZodNanoID",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=Sw),je.init(e,t)}),d1=_("$ZodCUID",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=yw),je.init(e,t)}),f1=_("$ZodCUID2",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=xw),je.init(e,t)}),m1=_("$ZodULID",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=bw),je.init(e,t)}),h1=_("$ZodXID",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=ww),je.init(e,t)}),p1=_("$ZodKSUID",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=jw),je.init(e,t)}),g1=_("$ZodISODateTime",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=Rw(t)),je.init(e,t)}),v1=_("$ZodISODate",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=$w),je.init(e,t)}),y1=_("$ZodISOTime",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=zw(t)),je.init(e,t)}),x1=_("$ZodISODuration",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=Nw),je.init(e,t)}),b1=_("$ZodIPv4",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=Aw),je.init(e,t),e._zod.onattach.push(n=>{const a=n._zod.bag;a.format="ipv4"})}),w1=_("$ZodIPv6",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=Cw),je.init(e,t),e._zod.onattach.push(n=>{const a=n._zod.bag;a.format="ipv6"}),e._zod.check=n=>{try{new URL("http://[".concat(n.value,"]"))}catch(a){n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:e,continue:!t.abort})}}}),j1=_("$ZodCIDRv4",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=Ow),je.init(e,t)}),S1=_("$ZodCIDRv6",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=Tw),je.init(e,t),e._zod.check=n=>{const[a,i]=n.value.split("/");try{if(!i)throw new Error;const o=Number(i);if("".concat(o)!==i)throw new Error;if(o<0||o>128)throw new Error;new URL("http://[".concat(a,"]"))}catch(o){n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:e,continue:!t.abort})}}});function Bp(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch(t){return!1}}const N1=_("$ZodBase64",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=Iw),je.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64"}),e._zod.check=n=>{Bp(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:e,continue:!t.abort})}});function k1(e){if(!Dp.test(e))return!1;const t=e.replace(/[-_]/g,n=>n==="-"?"+":"/"),r=t.padEnd(Math.ceil(t.length/4)*4,"=");return Bp(r)}const P1=_("$ZodBase64URL",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=Dp),je.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64url"}),e._zod.check=n=>{k1(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:e,continue:!t.abort})}}),E1=_("$ZodE164",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=Dw),je.init(e,t)});function _1(e,t=null){try{const r=e.split(".");if(r.length!==3)return!1;const[n]=r;if(!n)return!1;const a=JSON.parse(atob(n));return!("typ"in a&&(a==null?void 0:a.typ)!=="JWT"||!a.alg||t&&(!("alg"in a)||a.alg!==t))}catch(r){return!1}}const A1=_("$ZodJWT",(e,t)=>{je.init(e,t),e._zod.check=r=>{_1(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),Up=_("$ZodNumber",(e,t)=>{var r;Se.init(e,t),e._zod.pattern=(r=e._zod.bag.pattern)!=null?r:Bw,e._zod.parse=(n,a)=>{if(t.coerce)try{n.value=Number(n.value)}catch(s){}const i=n.value;if(typeof i=="number"&&!Number.isNaN(i)&&Number.isFinite(i))return n;const o=typeof i=="number"?Number.isNaN(i)?"NaN":Number.isFinite(i)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:i,inst:e,...o?{received:o}:{}}),n}}),C1=_("$ZodNumber",(e,t)=>{Zw.init(e,t),Up.init(e,t)}),O1=_("$ZodBoolean",(e,t)=>{Se.init(e,t),e._zod.pattern=Uw,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=!!r.value}catch(i){}const a=r.value;return typeof a=="boolean"||r.issues.push({expected:"boolean",code:"invalid_type",input:a,inst:e}),r}}),T1=_("$ZodUnknown",(e,t)=>{Se.init(e,t),e._zod.parse=r=>r}),I1=_("$ZodNever",(e,t)=>{Se.init(e,t),e._zod.parse=(r,n)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:e}),r)}),M1=_("$ZodDate",(e,t)=>{Se.init(e,t),e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=new Date(r.value)}catch(s){}const a=r.value,i=a instanceof Date;return i&&!Number.isNaN(a.getTime())||r.issues.push({expected:"date",code:"invalid_type",input:a,...i?{received:"Invalid Date"}:{},inst:e}),r}});function Ad(e,t,r){e.issues.length&&t.issues.push(...Sc(r,e.issues)),t.value[r]=e.value}const D1=_("$ZodArray",(e,t)=>{Se.init(e,t),e._zod.parse=(r,n)=>{const a=r.value;if(!Array.isArray(a))return r.issues.push({expected:"array",code:"invalid_type",input:a,inst:e}),r;r.value=Array(a.length);const i=[];for(let o=0;o<a.length;o++){const s=a[o],c=t.element._zod.run({value:s,issues:[]},n);c instanceof Promise?i.push(c.then(u=>Ad(u,r,o))):Ad(c,r,o)}return i.length?Promise.all(i).then(()=>r):r}});function di(e,t,r){e.issues.length&&t.issues.push(...Sc(r,e.issues)),t.value[r]=e.value}function Cd(e,t,r,n){e.issues.length?n[r]===void 0?r in n?t.value[r]=void 0:t.value[r]=e.value:t.issues.push(...Sc(r,e.issues)):e.value===void 0?r in n&&(t.value[r]=void 0):t.value[r]=e.value}const $1=_("$ZodObject",(e,t)=>{Se.init(e,t);const r=_p(()=>{const f=Object.keys(t.shape);for(const h of f)if(!(t.shape[h]instanceof Se))throw new Error('Invalid element at key "'.concat(h,'": expected a Zod schema'));const m=aw(t.shape);return{shape:t.shape,keys:f,keySet:new Set(f),numKeys:f.length,optionalKeys:new Set(m)}});xe(e._zod,"propValues",()=>{var h;const f=t.shape,m={};for(const g in f){const v=f[g]._zod;if(v.values){(h=m[g])!=null||(m[g]=new Set);for(const p of v.values)m[g].add(p)}}return m});const n=f=>{const m=new n1(["shape","payload","ctx"]),h=r.value,g=b=>{const w=la(b);return"shape[".concat(w,"]._zod.run({ value: input[").concat(w,"], issues: [] }, ctx)")};m.write("const input = payload.value;");const v=Object.create(null);let p=0;for(const b of h.keys)v[b]="key_".concat(p++);m.write("const newResult = {}");for(const b of h.keys)if(h.optionalKeys.has(b)){const w=v[b];m.write("const ".concat(w," = ").concat(g(b),";"));const j=la(b);m.write("\n        if (".concat(w,".issues.length) {\n          if (input[").concat(j,"] === undefined) {\n            if (").concat(j," in input) {\n              newResult[").concat(j,"] = undefined;\n            }\n          } else {\n            payload.issues = payload.issues.concat(\n              ").concat(w,".issues.map((iss) => ({\n                ...iss,\n                path: iss.path ? [").concat(j,", ...iss.path] : [").concat(j,"],\n              }))\n            );\n          }\n        } else if (").concat(w,".value === undefined) {\n          if (").concat(j," in input) newResult[").concat(j,"] = undefined;\n        } else {\n          newResult[").concat(j,"] = ").concat(w,".value;\n        }\n        "))}else{const w=v[b];m.write("const ".concat(w," = ").concat(g(b),";")),m.write("\n          if (".concat(w,".issues.length) payload.issues = payload.issues.concat(").concat(w,".issues.map(iss => ({\n            ...iss,\n            path: iss.path ? [").concat(la(b),", ...iss.path] : [").concat(la(b),"]\n          })));")),m.write("newResult[".concat(la(b),"] = ").concat(w,".value"))}m.write("payload.value = newResult;"),m.write("return payload;");const x=m.compile();return(b,w)=>x(f,b,w)};let a;const i=ul,o=!Ep.jitless,c=o&&rw.value,u=t.catchall;let d;e._zod.parse=(f,m)=>{d!=null||(d=r.value);const h=f.value;if(!i(h))return f.issues.push({expected:"object",code:"invalid_type",input:h,inst:e}),f;const g=[];if(o&&c&&(m==null?void 0:m.async)===!1&&m.jitless!==!0)a||(a=n(t.shape)),f=a(f,m);else{f.value={};const w=d.shape;for(const j of d.keys){const S=w[j],N=S._zod.run({value:h[j],issues:[]},m),k=S._zod.optin==="optional"&&S._zod.optout==="optional";N instanceof Promise?g.push(N.then(A=>k?Cd(A,f,j,h):di(A,f,j))):k?Cd(N,f,j,h):di(N,f,j)}}if(!u)return g.length?Promise.all(g).then(()=>f):f;const v=[],p=d.keySet,x=u._zod,b=x.def.type;for(const w of Object.keys(h)){if(p.has(w))continue;if(b==="never"){v.push(w);continue}const j=x.run({value:h[w],issues:[]},m);j instanceof Promise?g.push(j.then(S=>di(S,f,w))):di(j,f,w)}return v.length&&f.issues.push({code:"unrecognized_keys",keys:v,input:h,inst:e}),g.length?Promise.all(g).then(()=>f):f}});function Od(e,t,r,n){for(const a of e)if(a.issues.length===0)return t.value=a.value,t;return t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(a=>a.issues.map(i=>vn(i,n,gn())))}),t}const z1=_("$ZodUnion",(e,t)=>{Se.init(e,t),xe(e._zod,"optin",()=>t.options.some(r=>r._zod.optin==="optional")?"optional":void 0),xe(e._zod,"optout",()=>t.options.some(r=>r._zod.optout==="optional")?"optional":void 0),xe(e._zod,"values",()=>{if(t.options.every(r=>r._zod.values))return new Set(t.options.flatMap(r=>Array.from(r._zod.values)))}),xe(e._zod,"pattern",()=>{if(t.options.every(r=>r._zod.pattern)){const r=t.options.map(n=>n._zod.pattern);return new RegExp("^(".concat(r.map(n=>wc(n.source)).join("|"),")$"))}}),e._zod.parse=(r,n)=>{let a=!1;const i=[];for(const o of t.options){const s=o._zod.run({value:r.value,issues:[]},n);if(s instanceof Promise)i.push(s),a=!0;else{if(s.issues.length===0)return s;i.push(s)}}return a?Promise.all(i).then(o=>Od(o,r,e,n)):Od(i,r,e,n)}}),R1=_("$ZodIntersection",(e,t)=>{Se.init(e,t),e._zod.parse=(r,n)=>{const a=r.value,i=t.left._zod.run({value:a,issues:[]},n),o=t.right._zod.run({value:a,issues:[]},n);return i instanceof Promise||o instanceof Promise?Promise.all([i,o]).then(([c,u])=>Td(r,c,u)):Td(r,i,o)}});function fl(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(dl(e)&&dl(t)){const r=Object.keys(t),n=Object.keys(e).filter(i=>r.indexOf(i)!==-1),a={...e,...t};for(const i of n){const o=fl(e[i],t[i]);if(!o.valid)return{valid:!1,mergeErrorPath:[i,...o.mergeErrorPath]};a[i]=o.data}return{valid:!0,data:a}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let n=0;n<e.length;n++){const a=e[n],i=t[n],o=fl(a,i);if(!o.valid)return{valid:!1,mergeErrorPath:[n,...o.mergeErrorPath]};r.push(o.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function Td(e,t,r){if(t.issues.length&&e.issues.push(...t.issues),r.issues.length&&e.issues.push(...r.issues),Pa(e))return e;const n=fl(t.value,r.value);if(!n.valid)throw new Error("Unmergable intersection. Error path: "+"".concat(JSON.stringify(n.mergeErrorPath)));return e.value=n.data,e}const L1=_("$ZodEnum",(e,t)=>{Se.init(e,t);const r=Jb(t.entries);e._zod.values=new Set(r),e._zod.pattern=new RegExp("^(".concat(r.filter(n=>nw.has(typeof n)).map(n=>typeof n=="string"?Eo(n):n.toString()).join("|"),")$")),e._zod.parse=(n,a)=>{const i=n.value;return e._zod.values.has(i)||n.issues.push({code:"invalid_value",values:r,input:i,inst:e}),n}}),F1=_("$ZodTransform",(e,t)=>{Se.init(e,t),e._zod.parse=(r,n)=>{const a=t.transform(r.value,r);if(n.async)return(a instanceof Promise?a:Promise.resolve(a)).then(o=>(r.value=o,r));if(a instanceof Promise)throw new Oa;return r.value=a,r}}),B1=_("$ZodOptional",(e,t)=>{Se.init(e,t),e._zod.optin="optional",e._zod.optout="optional",xe(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),xe(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp("^(".concat(wc(r.source),")?$")):void 0}),e._zod.parse=(r,n)=>t.innerType._zod.optin==="optional"?t.innerType._zod.run(r,n):r.value===void 0?r:t.innerType._zod.run(r,n)}),U1=_("$ZodNullable",(e,t)=>{Se.init(e,t),xe(e._zod,"optin",()=>t.innerType._zod.optin),xe(e._zod,"optout",()=>t.innerType._zod.optout),xe(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp("^(".concat(wc(r.source),"|null)$")):void 0}),xe(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(r,n)=>r.value===null?r:t.innerType._zod.run(r,n)}),W1=_("$ZodDefault",(e,t)=>{Se.init(e,t),e._zod.optin="optional",xe(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{if(r.value===void 0)return r.value=t.defaultValue,r;const a=t.innerType._zod.run(r,n);return a instanceof Promise?a.then(i=>Id(i,t)):Id(a,t)}});function Id(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const H1=_("$ZodPrefault",(e,t)=>{Se.init(e,t),e._zod.optin="optional",xe(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>(r.value===void 0&&(r.value=t.defaultValue),t.innerType._zod.run(r,n))}),q1=_("$ZodNonOptional",(e,t)=>{Se.init(e,t),xe(e._zod,"values",()=>{const r=t.innerType._zod.values;return r?new Set([...r].filter(n=>n!==void 0)):void 0}),e._zod.parse=(r,n)=>{const a=t.innerType._zod.run(r,n);return a instanceof Promise?a.then(i=>Md(i,e)):Md(a,e)}});function Md(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const Z1=_("$ZodCatch",(e,t)=>{Se.init(e,t),e._zod.optin="optional",xe(e._zod,"optout",()=>t.innerType._zod.optout),xe(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{const a=t.innerType._zod.run(r,n);return a instanceof Promise?a.then(i=>(r.value=i.value,i.issues.length&&(r.value=t.catchValue({...r,error:{issues:i.issues.map(o=>vn(o,n,gn()))},input:r.value}),r.issues=[]),r)):(r.value=a.value,a.issues.length&&(r.value=t.catchValue({...r,error:{issues:a.issues.map(i=>vn(i,n,gn()))},input:r.value}),r.issues=[]),r)}}),K1=_("$ZodPipe",(e,t)=>{Se.init(e,t),xe(e._zod,"values",()=>t.in._zod.values),xe(e._zod,"optin",()=>t.in._zod.optin),xe(e._zod,"optout",()=>t.out._zod.optout),xe(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(r,n)=>{const a=t.in._zod.run(r,n);return a instanceof Promise?a.then(i=>Dd(i,t,n)):Dd(a,t,n)}});function Dd(e,t,r){return Pa(e)?e:t.out._zod.run({value:e.value,issues:e.issues},r)}const G1=_("$ZodReadonly",(e,t)=>{Se.init(e,t),xe(e._zod,"propValues",()=>t.innerType._zod.propValues),xe(e._zod,"values",()=>t.innerType._zod.values),xe(e._zod,"optin",()=>t.innerType._zod.optin),xe(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(r,n)=>{const a=t.innerType._zod.run(r,n);return a instanceof Promise?a.then($d):$d(a)}});function $d(e){return e.value=Object.freeze(e.value),e}const V1=_("$ZodCustom",(e,t)=>{dt.init(e,t),Se.init(e,t),e._zod.parse=(r,n)=>r,e._zod.check=r=>{const n=r.value,a=t.fn(n);if(a instanceof Promise)return a.then(i=>zd(i,r,n,e));zd(a,r,n,e)}});function zd(e,t,r,n){var a;if(!e){const i={code:"custom",input:r,inst:n,path:[...(a=n._zod.def.path)!=null?a:[]],continue:!n._zod.def.abort};n._zod.def.params&&(i.params=n._zod.def.params),t.issues.push(Ta(i))}}class Y1{constructor(){this._map=new Map,this._idmap=new Map}add(t,...r){const n=r[0];if(this._map.set(t,n),n&&typeof n=="object"&&"id"in n){if(this._idmap.has(n.id))throw new Error("ID ".concat(n.id," already exists in the registry"));this._idmap.set(n.id,t)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(t){const r=this._map.get(t);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(t),this}get(t){var n;const r=t._zod.parent;if(r){const a={...(n=this.get(r))!=null?n:{}};return delete a.id,{...a,...this._map.get(t)}}return this._map.get(t)}has(t){return this._map.has(t)}}function X1(){return new Y1}const fi=X1();function Q1(e,t){return new e({type:"string",...H(t)})}function J1(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...H(t)})}function Rd(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...H(t)})}function ej(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...H(t)})}function tj(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...H(t)})}function rj(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...H(t)})}function nj(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...H(t)})}function aj(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...H(t)})}function ij(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...H(t)})}function oj(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...H(t)})}function sj(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...H(t)})}function lj(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...H(t)})}function cj(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...H(t)})}function uj(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...H(t)})}function dj(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...H(t)})}function fj(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...H(t)})}function mj(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...H(t)})}function hj(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...H(t)})}function pj(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...H(t)})}function gj(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...H(t)})}function vj(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...H(t)})}function yj(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...H(t)})}function xj(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...H(t)})}function bj(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...H(t)})}function wj(e,t){return new e({type:"string",format:"date",check:"string_format",...H(t)})}function jj(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...H(t)})}function Sj(e,t){return new e({type:"string",format:"duration",check:"string_format",...H(t)})}function Nj(e,t){return new e({type:"number",checks:[],...H(t)})}function kj(e,t){return new e({type:"number",coerce:!0,checks:[],...H(t)})}function Pj(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...H(t)})}function Ej(e,t){return new e({type:"boolean",...H(t)})}function _j(e){return new e({type:"unknown"})}function Aj(e,t){return new e({type:"never",...H(t)})}function Cj(e,t){return new e({type:"date",...H(t)})}function Ld(e,t){return new Lp({check:"less_than",...H(t),value:e,inclusive:!1})}function Mi(e,t){return new Lp({check:"less_than",...H(t),value:e,inclusive:!0})}function Fd(e,t){return new Fp({check:"greater_than",...H(t),value:e,inclusive:!1})}function Di(e,t){return new Fp({check:"greater_than",...H(t),value:e,inclusive:!0})}function Bd(e,t){return new qw({check:"multiple_of",...H(t),value:e})}function Wp(e,t){return new Kw({check:"max_length",...H(t),maximum:e})}function Bi(e,t){return new Gw({check:"min_length",...H(t),minimum:e})}function Hp(e,t){return new Vw({check:"length_equals",...H(t),length:e})}function Oj(e,t){return new Yw({check:"string_format",format:"regex",...H(t),pattern:e})}function Tj(e){return new Xw({check:"string_format",format:"lowercase",...H(e)})}function Ij(e){return new Qw({check:"string_format",format:"uppercase",...H(e)})}function Mj(e,t){return new Jw({check:"string_format",format:"includes",...H(t),includes:e})}function Dj(e,t){return new e1({check:"string_format",format:"starts_with",...H(t),prefix:e})}function $j(e,t){return new t1({check:"string_format",format:"ends_with",...H(t),suffix:e})}function Ga(e){return new r1({check:"overwrite",tx:e})}function zj(e){return Ga(t=>t.normalize(e))}function Rj(){return Ga(e=>e.trim())}function Lj(){return Ga(e=>e.toLowerCase())}function Fj(){return Ga(e=>e.toUpperCase())}function Bj(e,t,r){return new e({type:"array",element:t,...H(r)})}function Uj(e,t,r){return new e({type:"custom",check:"custom",fn:t,...H(r)})}const Wj=_("ZodISODateTime",(e,t)=>{g1.init(e,t),Ne.init(e,t)});function Hj(e){return bj(Wj,e)}const qj=_("ZodISODate",(e,t)=>{v1.init(e,t),Ne.init(e,t)});function Zj(e){return wj(qj,e)}const Kj=_("ZodISOTime",(e,t)=>{y1.init(e,t),Ne.init(e,t)});function Gj(e){return jj(Kj,e)}const Vj=_("ZodISODuration",(e,t)=>{x1.init(e,t),Ne.init(e,t)});function Yj(e){return Sj(Vj,e)}const qp=(e,t)=>{Op.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:r=>mw(e,r)},flatten:{value:r=>fw(e,r)},addIssue:{value:r=>e.issues.push(r)},addIssues:{value:r=>e.issues.push(...r)},isEmpty:{get(){return e.issues.length===0}}})},Xj=_("ZodError",qp),Ao=_("ZodError",qp,{Parent:Error}),Qj=hw(Ao),Jj=pw(Ao),eS=Ip(Ao),tS=Mp(Ao),Ae=_("ZodType",(e,t)=>(Se.init(e,t),e.def=t,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>{var n;return e.clone({...t,checks:[...(n=t.checks)!=null?n:[],...r.map(a=>typeof a=="function"?{_zod:{check:a,def:{check:"custom"},onattach:[]}}:a)]})},e.clone=(r,n)=>Sn(e,r,n),e.brand=()=>e,e.register=(r,n)=>(r.add(e,n),e),e.parse=(r,n)=>Qj(e,r,n,{callee:e.parse}),e.safeParse=(r,n)=>eS(e,r,n),e.parseAsync=async(r,n)=>Jj(e,r,n,{callee:e.parseAsync}),e.safeParseAsync=async(r,n)=>tS(e,r,n),e.spa=e.safeParseAsync,e.refine=(r,n)=>e.check(KS(r,n)),e.superRefine=r=>e.check(GS(r)),e.overwrite=r=>e.check(Ga(r)),e.optional=()=>qd(e),e.nullable=()=>Zd(e),e.nullish=()=>qd(Zd(e)),e.nonoptional=r=>LS(e,r),e.array=()=>ne(e),e.or=r=>AS([e,r]),e.and=r=>OS(e,r),e.transform=r=>Kd(e,IS(r)),e.default=r=>$S(e,r),e.prefault=r=>RS(e,r),e.catch=r=>BS(e,r),e.pipe=r=>Kd(e,r),e.readonly=()=>HS(e),e.describe=r=>{const n=e.clone();return fi.add(n,{description:r}),n},Object.defineProperty(e,"description",{get(){var r;return(r=fi.get(e))==null?void 0:r.description},configurable:!0}),e.meta=(...r)=>{if(r.length===0)return fi.get(e);const n=e.clone();return fi.add(n,r[0]),n},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),Zp=_("_ZodString",(e,t)=>{var n,a,i;kc.init(e,t),Ae.init(e,t);const r=e._zod.bag;e.format=(n=r.format)!=null?n:null,e.minLength=(a=r.minimum)!=null?a:null,e.maxLength=(i=r.maximum)!=null?i:null,e.regex=(...o)=>e.check(Oj(...o)),e.includes=(...o)=>e.check(Mj(...o)),e.startsWith=(...o)=>e.check(Dj(...o)),e.endsWith=(...o)=>e.check($j(...o)),e.min=(...o)=>e.check(Bi(...o)),e.max=(...o)=>e.check(Wp(...o)),e.length=(...o)=>e.check(Hp(...o)),e.nonempty=(...o)=>e.check(Bi(1,...o)),e.lowercase=o=>e.check(Tj(o)),e.uppercase=o=>e.check(Ij(o)),e.trim=()=>e.check(Rj()),e.normalize=(...o)=>e.check(zj(...o)),e.toLowerCase=()=>e.check(Lj()),e.toUpperCase=()=>e.check(Fj())}),rS=_("ZodString",(e,t)=>{kc.init(e,t),Zp.init(e,t),e.email=r=>e.check(J1(nS,r)),e.url=r=>e.check(aj(aS,r)),e.jwt=r=>e.check(xj(xS,r)),e.emoji=r=>e.check(ij(iS,r)),e.guid=r=>e.check(Rd(Ud,r)),e.uuid=r=>e.check(ej(mi,r)),e.uuidv4=r=>e.check(tj(mi,r)),e.uuidv6=r=>e.check(rj(mi,r)),e.uuidv7=r=>e.check(nj(mi,r)),e.nanoid=r=>e.check(oj(oS,r)),e.guid=r=>e.check(Rd(Ud,r)),e.cuid=r=>e.check(sj(sS,r)),e.cuid2=r=>e.check(lj(lS,r)),e.ulid=r=>e.check(cj(cS,r)),e.base64=r=>e.check(gj(gS,r)),e.base64url=r=>e.check(vj(vS,r)),e.xid=r=>e.check(uj(uS,r)),e.ksuid=r=>e.check(dj(dS,r)),e.ipv4=r=>e.check(fj(fS,r)),e.ipv6=r=>e.check(mj(mS,r)),e.cidrv4=r=>e.check(hj(hS,r)),e.cidrv6=r=>e.check(pj(pS,r)),e.e164=r=>e.check(yj(yS,r)),e.datetime=r=>e.check(Hj(r)),e.date=r=>e.check(Zj(r)),e.time=r=>e.check(Gj(r)),e.duration=r=>e.check(Yj(r))});function $(e){return Q1(rS,e)}const Ne=_("ZodStringFormat",(e,t)=>{je.init(e,t),Zp.init(e,t)}),nS=_("ZodEmail",(e,t)=>{s1.init(e,t),Ne.init(e,t)}),Ud=_("ZodGUID",(e,t)=>{i1.init(e,t),Ne.init(e,t)}),mi=_("ZodUUID",(e,t)=>{o1.init(e,t),Ne.init(e,t)}),aS=_("ZodURL",(e,t)=>{l1.init(e,t),Ne.init(e,t)}),iS=_("ZodEmoji",(e,t)=>{c1.init(e,t),Ne.init(e,t)}),oS=_("ZodNanoID",(e,t)=>{u1.init(e,t),Ne.init(e,t)}),sS=_("ZodCUID",(e,t)=>{d1.init(e,t),Ne.init(e,t)}),lS=_("ZodCUID2",(e,t)=>{f1.init(e,t),Ne.init(e,t)}),cS=_("ZodULID",(e,t)=>{m1.init(e,t),Ne.init(e,t)}),uS=_("ZodXID",(e,t)=>{h1.init(e,t),Ne.init(e,t)}),dS=_("ZodKSUID",(e,t)=>{p1.init(e,t),Ne.init(e,t)}),fS=_("ZodIPv4",(e,t)=>{b1.init(e,t),Ne.init(e,t)}),mS=_("ZodIPv6",(e,t)=>{w1.init(e,t),Ne.init(e,t)}),hS=_("ZodCIDRv4",(e,t)=>{j1.init(e,t),Ne.init(e,t)}),pS=_("ZodCIDRv6",(e,t)=>{S1.init(e,t),Ne.init(e,t)}),gS=_("ZodBase64",(e,t)=>{N1.init(e,t),Ne.init(e,t)}),vS=_("ZodBase64URL",(e,t)=>{P1.init(e,t),Ne.init(e,t)}),yS=_("ZodE164",(e,t)=>{E1.init(e,t),Ne.init(e,t)}),xS=_("ZodJWT",(e,t)=>{A1.init(e,t),Ne.init(e,t)}),Pc=_("ZodNumber",(e,t)=>{var n,a,i,o,s,c,u,d,f;Up.init(e,t),Ae.init(e,t),e.gt=(m,h)=>e.check(Fd(m,h)),e.gte=(m,h)=>e.check(Di(m,h)),e.min=(m,h)=>e.check(Di(m,h)),e.lt=(m,h)=>e.check(Ld(m,h)),e.lte=(m,h)=>e.check(Mi(m,h)),e.max=(m,h)=>e.check(Mi(m,h)),e.int=m=>e.check(Wd(m)),e.safe=m=>e.check(Wd(m)),e.positive=m=>e.check(Fd(0,m)),e.nonnegative=m=>e.check(Di(0,m)),e.negative=m=>e.check(Ld(0,m)),e.nonpositive=m=>e.check(Mi(0,m)),e.multipleOf=(m,h)=>e.check(Bd(m,h)),e.step=(m,h)=>e.check(Bd(m,h)),e.finite=()=>e;const r=e._zod.bag;e.minValue=(i=Math.max((n=r.minimum)!=null?n:Number.NEGATIVE_INFINITY,(a=r.exclusiveMinimum)!=null?a:Number.NEGATIVE_INFINITY))!=null?i:null,e.maxValue=(c=Math.min((o=r.maximum)!=null?o:Number.POSITIVE_INFINITY,(s=r.exclusiveMaximum)!=null?s:Number.POSITIVE_INFINITY))!=null?c:null,e.isInt=((u=r.format)!=null?u:"").includes("int")||Number.isSafeInteger((d=r.multipleOf)!=null?d:.5),e.isFinite=!0,e.format=(f=r.format)!=null?f:null});function yn(e){return Nj(Pc,e)}const bS=_("ZodNumberFormat",(e,t)=>{C1.init(e,t),Pc.init(e,t)});function Wd(e){return Pj(bS,e)}const wS=_("ZodBoolean",(e,t)=>{O1.init(e,t),Ae.init(e,t)});function Kp(e){return Ej(wS,e)}const jS=_("ZodUnknown",(e,t)=>{T1.init(e,t),Ae.init(e,t)});function Hd(){return _j(jS)}const SS=_("ZodNever",(e,t)=>{I1.init(e,t),Ae.init(e,t)});function NS(e){return Aj(SS,e)}const kS=_("ZodDate",(e,t)=>{M1.init(e,t),Ae.init(e,t),e.min=(n,a)=>e.check(Di(n,a)),e.max=(n,a)=>e.check(Mi(n,a));const r=e._zod.bag;e.minDate=r.minimum?new Date(r.minimum):null,e.maxDate=r.maximum?new Date(r.maximum):null});function rr(e){return Cj(kS,e)}const PS=_("ZodArray",(e,t)=>{D1.init(e,t),Ae.init(e,t),e.element=t.element,e.min=(r,n)=>e.check(Bi(r,n)),e.nonempty=r=>e.check(Bi(1,r)),e.max=(r,n)=>e.check(Wp(r,n)),e.length=(r,n)=>e.check(Hp(r,n)),e.unwrap=()=>e.element});function ne(e,t){return Bj(PS,e,t)}const ES=_("ZodObject",(e,t)=>{$1.init(e,t),Ae.init(e,t),xe(e,"shape",()=>t.shape),e.keyof=()=>de(Object.keys(e._zod.def.shape)),e.catchall=r=>e.clone({...e._zod.def,catchall:r}),e.passthrough=()=>e.clone({...e._zod.def,catchall:Hd()}),e.loose=()=>e.clone({...e._zod.def,catchall:Hd()}),e.strict=()=>e.clone({...e._zod.def,catchall:NS()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=r=>lw(e,r),e.merge=r=>cw(e,r),e.pick=r=>ow(e,r),e.omit=r=>sw(e,r),e.partial=(...r)=>uw(Gp,e,r[0]),e.required=(...r)=>dw(Vp,e,r[0])});function oe(e,t){const r={type:"object",get shape(){return jc(this,"shape",{...e}),this.shape},...H(t)};return new ES(r)}const _S=_("ZodUnion",(e,t)=>{z1.init(e,t),Ae.init(e,t),e.options=t.options});function AS(e,t){return new _S({type:"union",options:e,...H(t)})}const CS=_("ZodIntersection",(e,t)=>{R1.init(e,t),Ae.init(e,t)});function OS(e,t){return new CS({type:"intersection",left:e,right:t})}const ml=_("ZodEnum",(e,t)=>{L1.init(e,t),Ae.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const r=new Set(Object.keys(t.entries));e.extract=(n,a)=>{const i={};for(const o of n)if(r.has(o))i[o]=t.entries[o];else throw new Error("Key ".concat(o," not found in enum"));return new ml({...t,checks:[],...H(a),entries:i})},e.exclude=(n,a)=>{const i={...t.entries};for(const o of n)if(r.has(o))delete i[o];else throw new Error("Key ".concat(o," not found in enum"));return new ml({...t,checks:[],...H(a),entries:i})}});function de(e,t){const r=Array.isArray(e)?Object.fromEntries(e.map(n=>[n,n])):e;return new ml({type:"enum",entries:r,...H(t)})}const TS=_("ZodTransform",(e,t)=>{F1.init(e,t),Ae.init(e,t),e._zod.parse=(r,n)=>{r.addIssue=i=>{var o,s,c,u;if(typeof i=="string")r.issues.push(Ta(i,r.value,t));else{const d=i;d.fatal&&(d.continue=!1),(o=d.code)!=null||(d.code="custom"),(s=d.input)!=null||(d.input=r.value),(c=d.inst)!=null||(d.inst=e),(u=d.continue)!=null||(d.continue=!0),r.issues.push(Ta(d))}};const a=t.transform(r.value,r);return a instanceof Promise?a.then(i=>(r.value=i,r)):(r.value=a,r)}});function IS(e){return new TS({type:"transform",transform:e})}const Gp=_("ZodOptional",(e,t)=>{B1.init(e,t),Ae.init(e,t),e.unwrap=()=>e._zod.def.innerType});function qd(e){return new Gp({type:"optional",innerType:e})}const MS=_("ZodNullable",(e,t)=>{U1.init(e,t),Ae.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Zd(e){return new MS({type:"nullable",innerType:e})}const DS=_("ZodDefault",(e,t)=>{W1.init(e,t),Ae.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function $S(e,t){return new DS({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const zS=_("ZodPrefault",(e,t)=>{H1.init(e,t),Ae.init(e,t),e.unwrap=()=>e._zod.def.innerType});function RS(e,t){return new zS({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const Vp=_("ZodNonOptional",(e,t)=>{q1.init(e,t),Ae.init(e,t),e.unwrap=()=>e._zod.def.innerType});function LS(e,t){return new Vp({type:"nonoptional",innerType:e,...H(t)})}const FS=_("ZodCatch",(e,t)=>{Z1.init(e,t),Ae.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function BS(e,t){return new FS({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const US=_("ZodPipe",(e,t)=>{K1.init(e,t),Ae.init(e,t),e.in=t.in,e.out=t.out});function Kd(e,t){return new US({type:"pipe",in:e,out:t})}const WS=_("ZodReadonly",(e,t)=>{G1.init(e,t),Ae.init(e,t)});function HS(e){return new WS({type:"readonly",innerType:e})}const qS=_("ZodCustom",(e,t)=>{V1.init(e,t),Ae.init(e,t)});function ZS(e){const t=new dt({check:"custom"});return t._zod.check=e,t}function KS(e,t={}){return Uj(qS,e,t)}function GS(e){const t=ZS(r=>(r.addIssue=n=>{var a,i,o,s;if(typeof n=="string")r.issues.push(Ta(n,r.value,t._zod.def));else{const c=n;c.fatal&&(c.continue=!1),(a=c.code)!=null||(c.code="custom"),(i=c.input)!=null||(c.input=r.value),(o=c.inst)!=null||(c.inst=t),(s=c.continue)!=null||(c.continue=!t._zod.def.abort),r.issues.push(Ta(c))}},e(r.value,r)));return t}function er(e){return kj(Pc,e)}const Yp=oe({type:de(["overwatering","underwatering","pest","disease","nutrient","light","other"]),severity:de(["low","medium","high"]),description:$().min(1),treatment:$().min(1)}),Xp=oe({overallHealth:de(["excellent","good","fair","poor"]),issues:ne(Yp),recommendations:ne($()),moistureLevel:er().min(0).max(100),growthStage:de(["seedling","juvenile","mature","flowering","dormant"]),confidence:er().min(0).max(100)}),Qp=oe({wateringFrequency:er().positive(),sunlightRequirement:de(["low","medium","high"]),humidityPreference:de(["low","medium","high"]),temperatureRange:oe({min:er(),max:er()}),fertilizingFrequency:er().positive(),soilType:$().min(1),specialCare:ne($()).optional()}),Jp=oe({traits:ne($()).min(1),communicationStyle:de(["cheerful","wise","dramatic","calm","playful"]),catchphrases:ne($()),moodFactors:oe({health:er().min(0).max(1),care:er().min(0).max(1),attention:er().min(0).max(1)})}),VS=oe({species:$(),commonName:$(),variety:$().nullable().optional(),confidence:er().min(0).max(100),generalDescription:$().min(20),funFacts:ne($()),plantEnvironment:de(["interior","exterior","ambos"]),lightRequirements:de(["poca_luz","luz_indirecta","luz_directa_parcial","pleno_sol"]),health:Xp,careProfile:Qp,personality:Jp}),eg=oe({type:de(["info","warning","tip","alert"]),title:$(),message:$()}),YS=ne(eg),XS=Object.freeze(Object.defineProperty({__proto__:null,AIAnalysisResponseSchema:VS,CareProfileSchema:Qp,HealthAnalysisSchema:Xp,HealthIssueSchema:Yp,InsightResponseSchema:YS,InsightSchema:eg,PlantPersonalitySchema:Jp},Symbol.toStringTag,{value:"Module"})),{HealthAnalysisSchema:QS,CareProfileSchema:JS,PlantPersonalitySchema:eN,InsightResponseSchema:tN}=XS,rN=oe({id:$().min(1,"Image ID is required"),url:$().url("Must be a valid URL"),timestamp:rr(),healthAnalysis:QS.optional(),isProfileImage:Kp()}),nN=oe({id:$().min(1,"Message ID is required"),sender:de(["user","plant","system"]),content:$().min(1,"Message content cannot be empty"),timestamp:rr(),emotion:de(["alegre","triste","enojado","neutral","juguetón","agradecido","happy","sad","excited","worried","grateful"]).optional(),context:oe({insights:ne(oe({type:de(["tip","warning","observation","recommendation"]),title:$(),description:$(),affectedPlants:ne($()).optional()})).optional(),suggestedActions:ne(oe({action:$(),priority:de(["low","medium","high"]),plantIds:ne($()).optional()})).optional()}).optional()}),aN=oe({id:$().min(1,"Notification ID is required"),type:de(["watering","fertilizing","health_check","general"]),title:$().min(1,"Title is required"),message:$().min(1,"Message is required"),priority:de(["low","medium","high"]),scheduledFor:rr(),completed:Kp()}),iN=oe({id:$().uuid(),name:$(),species:$(),variety:$().optional(),nickname:$().optional(),description:$().optional(),funFacts:ne($()).optional(),location:$(),plantEnvironment:de(["interior","exterior","ambos"]).optional(),lightRequirements:de(["poca_luz","luz_indirecta","luz_directa_parcial","pleno_sol"]).optional(),dateAdded:rr(),lastWatered:rr().optional(),lastFertilized:rr().optional(),images:ne(rN),healthScore:yn().min(0).max(100),careProfile:JS,personality:eN,chatHistory:ne(nN),notifications:ne(aN)}),oN=oe({id:$().min(1,"Plant ID is required"),name:$().min(1,"Plant name is required"),nickname:$().optional(),species:$().min(1,"Species is required"),location:$().min(1,"Location is required"),plantEnvironment:de(["interior","exterior","ambos"]).optional(),lightRequirements:de(["poca_luz","luz_indirecta","luz_directa_parcial","pleno_sol"]).optional(),healthScore:yn().min(0).max(100),profileImageUrl:$().url().optional(),lastWatered:rr().optional(),wateringFrequency:yn().positive().optional()});oe({content:$(),emotion:de(["alegre","triste","enojado","neutral","juguetón","agradecido","happy","sad","excited","worried","grateful"]),mood:$().optional()});oe({changes:ne($()),healthImprovement:yn(),recommendations:ne($()),newHealthScore:yn().min(0).max(100)});iN.omit({id:!0,dateAdded:!0,chatHistory:!0,notifications:!0}).partial({images:!0,healthScore:!0,careProfile:!0,personality:!0});const sN=oe({fullName:$().min(3,"El nombre debe tener al menos 3 caracteres"),email:$().email("Email inválido"),password:$().min(6,"La contraseña debe tener al menos 6 caracteres"),confirmPassword:$().min(6)}).refine(e=>e.password===e.confirmPassword,{message:"Las contraseñas no coinciden",path:["confirmPassword"]}),lN=oe({email:$().email(),password:$().min(1,"Password is required")}),cN=oe({id:$().min(1,"Message ID is required"),sender:de(["user","ai"]),content:$().min(1,"Message content cannot be empty"),timestamp:rr(),context:oe({plantsAnalyzed:ne($()).optional(),queryType:de(["general","health_analysis","care_comparison","disease_prevention","growth_tracking"]).optional(),insights:ne(oe({type:de(["tip","warning","observation","recommendation"]),title:$(),description:$(),affectedPlants:ne($()).optional()})).optional(),suggestedActions:ne(oe({action:$(),priority:de(["low","medium","high"]),plantIds:ne($()).optional()})).optional()}).optional()}),uN=oe({totalPlants:yn(),plantsData:ne(oN),averageHealthScore:yn(),commonIssues:ne($()),careScheduleSummary:oe({needsWatering:ne($()),needsFertilizing:ne($()),healthConcerns:ne($())}),environmentalFactors:oe({locations:ne($()),lightConditions:ne($()),humidityNeeds:ne($())})});oe({id:$().uuid(),userId:$().uuid(),messages:ne(cN),createdAt:rr(),updatedAt:rr(),context:uN.optional()});oe({content:$().min(1),insights:ne(oe({type:de(["tip","warning","observation","recommendation"]),title:$(),description:$(),affectedPlants:ne($()).optional()})).optional(),suggestedActions:ne(oe({action:$(),priority:de(["low","medium","high"]),plantIds:ne($()).optional()})).optional()});let ca=null;const or=xc((e,t)=>({user:null,profile:null,session:null,isLoading:!1,error:null,isInitialized:!1,initialize:async()=>{var n;ca!=null&&ca.subscription&&ca.subscription.unsubscribe();try{const a=pe.auth.getSession(),i=new Promise((c,u)=>setTimeout(()=>u(new Error("Session timeout after 8 seconds")),8e3)),{data:{session:o},error:s}=await Promise.race([a,i]);if(s&&console.warn("Session error:",s.message),e({session:o,user:(n=o==null?void 0:o.user)!=null?n:null}),o!=null&&o.user)try{const c=pe.from("profiles").select("*").eq("id",o.user.id).single(),u=new Promise((m,h)=>setTimeout(()=>h(new Error("Profile timeout")),5e3)),{data:d,error:f}=await Promise.race([c,u]);f?console.warn("Profile fetch error:",f.message):e({profile:d})}catch(c){console.warn("Profile fetch failed:",c.message)}else e({profile:null})}catch(a){console.warn("Auth initialization failed, continuing without session:",a.message),e({session:null,user:null,profile:null,error:null})}finally{e({isInitialized:!0})}const{data:r}=pe.auth.onAuthStateChange(async(a,i)=>{var o;if(e({session:i,user:(o=i==null?void 0:i.user)!=null?o:null,isLoading:!1}),a==="SIGNED_OUT"){e({profile:null});return}if(i!=null&&i.user)try{const{data:s,error:c}=await pe.from("profiles").select("*").eq("id",i.user.id).single();if(c)throw c;e({profile:s})}catch(s){console.error("Error fetching profile on auth change:",s)}});ca=r},signIn:async r=>{e({isLoading:!0,error:null});try{const{email:n,password:a}=lN.parse(r),{error:i}=await pe.auth.signInWithPassword({email:n,password:a});if(i)throw i}catch(n){const a=n.message.includes("Invalid login credentials")?"Credenciales inválidas.":"Error al iniciar sesión.";throw e({error:a}),console.error(n),n}finally{e({isLoading:!1})}},signUp:async r=>{e({isLoading:!0,error:null});try{const{email:n,password:a,fullName:i}=sN.parse(r),{error:o}=await pe.auth.signUp({email:n,password:a,options:{data:{full_name:i}}});if(o)throw o}catch(n){const a=n.message.includes("already registered")?"El usuario ya está registrado.":"Error al registrarse.";throw e({error:a}),console.error(n),n}finally{e({isLoading:!1})}},signOut:async()=>{e({isLoading:!0}),Rn.clearAll();const{error:r}=await pe.auth.signOut();r&&(console.error("Error signing out:",r),e({error:"Error al cerrar sesión.",isLoading:!1})),e({session:null,user:null,profile:null,isLoading:!1})},clearError:()=>e({error:null})}));function dN(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}const fN=e=>{switch(e){case"success":return pN;case"info":return vN;case"warning":return gN;case"error":return yN;default:return null}},mN=Array(12).fill(0),hN=({visible:e,className:t})=>I.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},I.createElement("div",{className:"sonner-spinner"},mN.map((r,n)=>I.createElement("div",{className:"sonner-loading-bar",key:"spinner-bar-".concat(n)})))),pN=I.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},I.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),gN=I.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},I.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),vN=I.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},I.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),yN=I.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},I.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),xN=I.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},I.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),I.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),bN=()=>{const[e,t]=I.useState(document.hidden);return I.useEffect(()=>{const r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e};let hl=1;class wN{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const r=this.subscribers.indexOf(t);this.subscribers.splice(r,1)}),this.publish=t=>{this.subscribers.forEach(r=>r(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var r;const{message:n,...a}=t,i=typeof(t==null?void 0:t.id)=="number"||((r=t.id)==null?void 0:r.length)>0?t.id:hl++,o=this.toasts.find(c=>c.id===i),s=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(c=>c.id===i?(this.publish({...c,...t,id:i,title:n}),{...c,...t,id:i,dismissible:s,title:n}):c):this.addToast({title:n,...a,dismissible:s,id:i}),i},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(r=>r({id:t,dismiss:!0})))):this.toasts.forEach(r=>{this.subscribers.forEach(n=>n({id:r.id,dismiss:!0}))}),t),this.message=(t,r)=>this.create({...r,message:t}),this.error=(t,r)=>this.create({...r,message:t,type:"error"}),this.success=(t,r)=>this.create({...r,type:"success",message:t}),this.info=(t,r)=>this.create({...r,type:"info",message:t}),this.warning=(t,r)=>this.create({...r,type:"warning",message:t}),this.loading=(t,r)=>this.create({...r,type:"loading",message:t}),this.promise=(t,r)=>{if(!r)return;let n;r.loading!==void 0&&(n=this.create({...r,promise:t,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));const a=Promise.resolve(t instanceof Function?t():t);let i=n!==void 0,o;const s=a.then(async u=>{if(o=["resolve",u],I.isValidElement(u))i=!1,this.create({id:n,type:"default",message:u});else if(SN(u)&&!u.ok){i=!1;const f=typeof r.error=="function"?await r.error("HTTP error! status: ".concat(u.status)):r.error,m=typeof r.description=="function"?await r.description("HTTP error! status: ".concat(u.status)):r.description,g=typeof f=="object"&&!I.isValidElement(f)?f:{message:f};this.create({id:n,type:"error",description:m,...g})}else if(u instanceof Error){i=!1;const f=typeof r.error=="function"?await r.error(u):r.error,m=typeof r.description=="function"?await r.description(u):r.description,g=typeof f=="object"&&!I.isValidElement(f)?f:{message:f};this.create({id:n,type:"error",description:m,...g})}else if(r.success!==void 0){i=!1;const f=typeof r.success=="function"?await r.success(u):r.success,m=typeof r.description=="function"?await r.description(u):r.description,g=typeof f=="object"&&!I.isValidElement(f)?f:{message:f};this.create({id:n,type:"success",description:m,...g})}}).catch(async u=>{if(o=["reject",u],r.error!==void 0){i=!1;const d=typeof r.error=="function"?await r.error(u):r.error,f=typeof r.description=="function"?await r.description(u):r.description,h=typeof d=="object"&&!I.isValidElement(d)?d:{message:d};this.create({id:n,type:"error",description:f,...h})}}).finally(()=>{i&&(this.dismiss(n),n=void 0),r.finally==null||r.finally.call(r)}),c=()=>new Promise((u,d)=>s.then(()=>o[0]==="reject"?d(o[1]):u(o[1])).catch(d));return typeof n!="string"&&typeof n!="number"?{unwrap:c}:Object.assign(n,{unwrap:c})},this.custom=(t,r)=>{const n=(r==null?void 0:r.id)||hl++;return this.create({jsx:t(n),id:n,...r}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const lt=new wN,jN=(e,t)=>{const r=(t==null?void 0:t.id)||hl++;return lt.addToast({title:e,...t,id:r}),r},SN=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",NN=jN,kN=()=>lt.toasts,PN=()=>lt.getActiveToasts(),tg=Object.assign(NN,{success:lt.success,info:lt.info,warning:lt.warning,error:lt.error,custom:lt.custom,message:lt.message,promise:lt.promise,dismiss:lt.dismiss,loading:lt.loading},{getHistory:kN,getToasts:PN});dN("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function hi(e){return e.label!==void 0}const EN=3,_N="24px",AN="16px",Gd=4e3,CN=356,ON=14,TN=45,IN=200;function Yt(...e){return e.filter(Boolean).join(" ")}function MN(e){const[t,r]=e.split("-"),n=[];return t&&n.push(t),r&&n.push(r),n}const DN=e=>{var t,r,n,a,i,o,s,c,u;const{invert:d,toast:f,unstyled:m,interacting:h,setHeights:g,visibleToasts:v,heights:p,index:x,toasts:b,expanded:w,removeToast:j,defaultRichColors:S,closeButton:N,style:k,cancelButtonStyle:A,actionButtonStyle:C,className:D="",descriptionClassName:T="",duration:O,position:B,gap:Z,expandByDefault:z,classNames:U,icons:q,closeButtonAriaLabel:Q="Close toast"}=e,[V,Pe]=I.useState(null),[G,R]=I.useState(null),[J,Ce]=I.useState(!1),[Oe,be]=I.useState(!1),[Yr,Ar]=I.useState(!1),[L,ee]=I.useState(!1),[ae,M]=I.useState(!1),[Qe,le]=I.useState(0),[nt,Je]=I.useState(0),pt=I.useRef(f.duration||O||Gd),sa=I.useRef(null),sr=I.useRef(null),ub=x===0,db=x+1<=v,gt=f.type,Cn=f.dismissible!==!1,fb=f.className||"",mb=f.descriptionClassName||"",si=I.useMemo(()=>p.findIndex(te=>te.toastId===f.id)||0,[p,f.id]),hb=I.useMemo(()=>{var te;return(te=f.closeButton)!=null?te:N},[f.closeButton,N]),fd=I.useMemo(()=>f.duration||O||Gd,[f.duration,O]),As=I.useRef(0),On=I.useRef(0),md=I.useRef(0),Tn=I.useRef(null),[pb,gb]=B.split("-"),hd=I.useMemo(()=>p.reduce((te,Le,et)=>et>=si?te:te+Le.height,0),[p,si]),pd=bN(),vb=f.invert||d,Cs=gt==="loading";On.current=I.useMemo(()=>si*Z+hd,[si,hd]),I.useEffect(()=>{pt.current=fd},[fd]),I.useEffect(()=>{Ce(!0)},[]),I.useEffect(()=>{const te=sr.current;if(te){const Le=te.getBoundingClientRect().height;return Je(Le),g(et=>[{toastId:f.id,height:Le,position:f.position},...et]),()=>g(et=>et.filter(vt=>vt.toastId!==f.id))}},[g,f.id]),I.useLayoutEffect(()=>{if(!J)return;const te=sr.current,Le=te.style.height;te.style.height="auto";const et=te.getBoundingClientRect().height;te.style.height=Le,Je(et),g(vt=>vt.find(He=>He.toastId===f.id)?vt.map(He=>He.toastId===f.id?{...He,height:et}:He):[{toastId:f.id,height:et,position:f.position},...vt])},[J,f.title,f.description,g,f.id,f.jsx,f.action,f.cancel]);const Cr=I.useCallback(()=>{be(!0),le(On.current),g(te=>te.filter(Le=>Le.toastId!==f.id)),setTimeout(()=>{j(f)},IN)},[f,j,g,On]);I.useEffect(()=>{if(f.promise&&gt==="loading"||f.duration===1/0||f.type==="loading")return;let te;return w||h||pd?(()=>{if(md.current<As.current){const vt=new Date().getTime()-As.current;pt.current=pt.current-vt}md.current=new Date().getTime()})():(()=>{pt.current!==1/0&&(As.current=new Date().getTime(),te=setTimeout(()=>{f.onAutoClose==null||f.onAutoClose.call(f,f),Cr()},pt.current))})(),()=>clearTimeout(te)},[w,h,f,gt,pd,Cr]),I.useEffect(()=>{f.delete&&(Cr(),f.onDismiss==null||f.onDismiss.call(f,f))},[Cr,f.delete]);function yb(){var te;if(q!=null&&q.loading){var Le;return I.createElement("div",{className:Yt(U==null?void 0:U.loader,f==null||(Le=f.classNames)==null?void 0:Le.loader,"sonner-loader"),"data-visible":gt==="loading"},q.loading)}return I.createElement(hN,{className:Yt(U==null?void 0:U.loader,f==null||(te=f.classNames)==null?void 0:te.loader),visible:gt==="loading"})}const xb=f.icon||(q==null?void 0:q[gt])||fN(gt);var gd,vd;return I.createElement("li",{tabIndex:0,ref:sr,className:Yt(D,fb,U==null?void 0:U.toast,f==null||(t=f.classNames)==null?void 0:t.toast,U==null?void 0:U.default,U==null?void 0:U[gt],f==null||(r=f.classNames)==null?void 0:r[gt]),"data-sonner-toast":"","data-rich-colors":(gd=f.richColors)!=null?gd:S,"data-styled":!(f.jsx||f.unstyled||m),"data-mounted":J,"data-promise":!!f.promise,"data-swiped":ae,"data-removed":Oe,"data-visible":db,"data-y-position":pb,"data-x-position":gb,"data-index":x,"data-front":ub,"data-swiping":Yr,"data-dismissible":Cn,"data-type":gt,"data-invert":vb,"data-swipe-out":L,"data-swipe-direction":G,"data-expanded":!!(w||z&&J),style:{"--index":x,"--toasts-before":x,"--z-index":b.length-x,"--offset":"".concat(Oe?Qe:On.current,"px"),"--initial-height":z?"auto":"".concat(nt,"px"),...k,...f.style},onDragEnd:()=>{Ar(!1),Pe(null),Tn.current=null},onPointerDown:te=>{te.button!==2&&(Cs||!Cn||(sa.current=new Date,le(On.current),te.target.setPointerCapture(te.pointerId),te.target.tagName!=="BUTTON"&&(Ar(!0),Tn.current={x:te.clientX,y:te.clientY})))},onPointerUp:()=>{var te,Le,et;if(L||!Cn)return;Tn.current=null;const vt=Number(((te=sr.current)==null?void 0:te.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),li=Number(((Le=sr.current)==null?void 0:Le.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),He=new Date().getTime()-((et=sa.current)==null?void 0:et.getTime()),_t=V==="x"?vt:li,ci=Math.abs(_t)/He;if(Math.abs(_t)>=TN||ci>.11){le(On.current),f.onDismiss==null||f.onDismiss.call(f,f),R(V==="x"?vt>0?"right":"left":li>0?"down":"up"),Cr(),ee(!0);return}else{var Ft,Bt;(Ft=sr.current)==null||Ft.style.setProperty("--swipe-amount-x","0px"),(Bt=sr.current)==null||Bt.style.setProperty("--swipe-amount-y","0px")}M(!1),Ar(!1),Pe(null)},onPointerMove:te=>{var Le,et,vt;if(!Tn.current||!Cn||((Le=window.getSelection())==null?void 0:Le.toString().length)>0)return;const He=te.clientY-Tn.current.y,_t=te.clientX-Tn.current.x;var ci;const Ft=(ci=e.swipeDirections)!=null?ci:MN(B);!V&&(Math.abs(_t)>1||Math.abs(He)>1)&&Pe(Math.abs(_t)>Math.abs(He)?"x":"y");let Bt={x:0,y:0};const yd=Xr=>1/(1.5+Math.abs(Xr)/20);if(V==="y"){if(Ft.includes("top")||Ft.includes("bottom"))if(Ft.includes("top")&&He<0||Ft.includes("bottom")&&He>0)Bt.y=He;else{const Xr=He*yd(He);Bt.y=Math.abs(Xr)<Math.abs(He)?Xr:He}}else if(V==="x"&&(Ft.includes("left")||Ft.includes("right")))if(Ft.includes("left")&&_t<0||Ft.includes("right")&&_t>0)Bt.x=_t;else{const Xr=_t*yd(_t);Bt.x=Math.abs(Xr)<Math.abs(_t)?Xr:_t}(Math.abs(Bt.x)>0||Math.abs(Bt.y)>0)&&M(!0),(et=sr.current)==null||et.style.setProperty("--swipe-amount-x","".concat(Bt.x,"px")),(vt=sr.current)==null||vt.style.setProperty("--swipe-amount-y","".concat(Bt.y,"px"))}},hb&&!f.jsx&&gt!=="loading"?I.createElement("button",{"aria-label":Q,"data-disabled":Cs,"data-close-button":!0,onClick:Cs||!Cn?()=>{}:()=>{Cr(),f.onDismiss==null||f.onDismiss.call(f,f)},className:Yt(U==null?void 0:U.closeButton,f==null||(n=f.classNames)==null?void 0:n.closeButton)},(vd=q==null?void 0:q.close)!=null?vd:xN):null,(gt||f.icon||f.promise)&&f.icon!==null&&((q==null?void 0:q[gt])!==null||f.icon)?I.createElement("div",{"data-icon":"",className:Yt(U==null?void 0:U.icon,f==null||(a=f.classNames)==null?void 0:a.icon)},f.promise||f.type==="loading"&&!f.icon?f.icon||yb():null,f.type!=="loading"?xb:null):null,I.createElement("div",{"data-content":"",className:Yt(U==null?void 0:U.content,f==null||(i=f.classNames)==null?void 0:i.content)},I.createElement("div",{"data-title":"",className:Yt(U==null?void 0:U.title,f==null||(o=f.classNames)==null?void 0:o.title)},f.jsx?f.jsx:typeof f.title=="function"?f.title():f.title),f.description?I.createElement("div",{"data-description":"",className:Yt(T,mb,U==null?void 0:U.description,f==null||(s=f.classNames)==null?void 0:s.description)},typeof f.description=="function"?f.description():f.description):null),I.isValidElement(f.cancel)?f.cancel:f.cancel&&hi(f.cancel)?I.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||A,onClick:te=>{hi(f.cancel)&&Cn&&(f.cancel.onClick==null||f.cancel.onClick.call(f.cancel,te),Cr())},className:Yt(U==null?void 0:U.cancelButton,f==null||(c=f.classNames)==null?void 0:c.cancelButton)},f.cancel.label):null,I.isValidElement(f.action)?f.action:f.action&&hi(f.action)?I.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||C,onClick:te=>{hi(f.action)&&(f.action.onClick==null||f.action.onClick.call(f.action,te),!te.defaultPrevented&&Cr())},className:Yt(U==null?void 0:U.actionButton,f==null||(u=f.classNames)==null?void 0:u.actionButton)},f.action.label):null)};function Vd(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function $N(e,t){const r={};return[e,t].forEach((n,a)=>{const i=a===1,o=i?"--mobile-offset":"--offset",s=i?AN:_N;function c(u){["top","right","bottom","left"].forEach(d=>{r["".concat(o,"-").concat(d)]=typeof u=="number"?"".concat(u,"px"):u})}typeof n=="number"||typeof n=="string"?c(n):typeof n=="object"?["top","right","bottom","left"].forEach(u=>{n[u]===void 0?r["".concat(o,"-").concat(u)]=s:r["".concat(o,"-").concat(u)]=typeof n[u]=="number"?"".concat(n[u],"px"):n[u]}):c(s)}),r}const zN=I.forwardRef(function(t,r){const{invert:n,position:a="bottom-right",hotkey:i=["altKey","KeyT"],expand:o,closeButton:s,className:c,offset:u,mobileOffset:d,theme:f="light",richColors:m,duration:h,style:g,visibleToasts:v=EN,toastOptions:p,dir:x=Vd(),gap:b=ON,icons:w,containerAriaLabel:j="Notifications"}=t,[S,N]=I.useState([]),k=I.useMemo(()=>Array.from(new Set([a].concat(S.filter(G=>G.position).map(G=>G.position)))),[S,a]),[A,C]=I.useState([]),[D,T]=I.useState(!1),[O,B]=I.useState(!1),[Z,z]=I.useState(f!=="system"?f:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),U=I.useRef(null),q=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),Q=I.useRef(null),V=I.useRef(!1),Pe=I.useCallback(G=>{N(R=>{var J;return(J=R.find(Ce=>Ce.id===G.id))!=null&&J.delete||lt.dismiss(G.id),R.filter(({id:Ce})=>Ce!==G.id)})},[]);return I.useEffect(()=>lt.subscribe(G=>{if(G.dismiss){requestAnimationFrame(()=>{N(R=>R.map(J=>J.id===G.id?{...J,delete:!0}:J))});return}setTimeout(()=>{wb.flushSync(()=>{N(R=>{const J=R.findIndex(Ce=>Ce.id===G.id);return J!==-1?[...R.slice(0,J),{...R[J],...G},...R.slice(J+1)]:[G,...R]})})})}),[S]),I.useEffect(()=>{if(f!=="system"){z(f);return}if(f==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?z("dark"):z("light")),typeof window>"u")return;const G=window.matchMedia("(prefers-color-scheme: dark)");try{G.addEventListener("change",({matches:R})=>{z(R?"dark":"light")})}catch(R){G.addListener(({matches:J})=>{try{z(J?"dark":"light")}catch(Ce){console.error(Ce)}})}},[f]),I.useEffect(()=>{S.length<=1&&T(!1)},[S]),I.useEffect(()=>{const G=R=>{var J;if(i.every(be=>R[be]||R.code===be)){var Oe;T(!0),(Oe=U.current)==null||Oe.focus()}R.code==="Escape"&&(document.activeElement===U.current||(J=U.current)!=null&&J.contains(document.activeElement))&&T(!1)};return document.addEventListener("keydown",G),()=>document.removeEventListener("keydown",G)},[i]),I.useEffect(()=>{if(U.current)return()=>{Q.current&&(Q.current.focus({preventScroll:!0}),Q.current=null,V.current=!1)}},[U.current]),I.createElement("section",{ref:r,"aria-label":"".concat(j," ").concat(q),tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},k.map((G,R)=>{var J;const[Ce,Oe]=G.split("-");return S.length?I.createElement("ol",{key:G,dir:x==="auto"?Vd():x,tabIndex:-1,ref:U,className:c,"data-sonner-toaster":!0,"data-sonner-theme":Z,"data-y-position":Ce,"data-x-position":Oe,style:{"--front-toast-height":"".concat(((J=A[0])==null?void 0:J.height)||0,"px"),"--width":"".concat(CN,"px"),"--gap":"".concat(b,"px"),...g,...$N(u,d)},onBlur:be=>{V.current&&!be.currentTarget.contains(be.relatedTarget)&&(V.current=!1,Q.current&&(Q.current.focus({preventScroll:!0}),Q.current=null))},onFocus:be=>{be.target instanceof HTMLElement&&be.target.dataset.dismissible==="false"||V.current||(V.current=!0,Q.current=be.relatedTarget)},onMouseEnter:()=>T(!0),onMouseMove:()=>T(!0),onMouseLeave:()=>{O||T(!1)},onDragEnd:()=>T(!1),onPointerDown:be=>{be.target instanceof HTMLElement&&be.target.dataset.dismissible==="false"||B(!0)},onPointerUp:()=>B(!1)},S.filter(be=>!be.position&&R===0||be.position===G).map((be,Yr)=>{var Ar,L;return I.createElement(DN,{key:be.id,icons:w,index:Yr,toast:be,defaultRichColors:m,duration:(Ar=p==null?void 0:p.duration)!=null?Ar:h,className:p==null?void 0:p.className,descriptionClassName:p==null?void 0:p.descriptionClassName,invert:n,visibleToasts:v,closeButton:(L=p==null?void 0:p.closeButton)!=null?L:s,interacting:O,position:G,style:p==null?void 0:p.style,unstyled:p==null?void 0:p.unstyled,classNames:p==null?void 0:p.classNames,cancelButtonStyle:p==null?void 0:p.cancelButtonStyle,actionButtonStyle:p==null?void 0:p.actionButtonStyle,closeButtonAriaLabel:p==null?void 0:p.closeButtonAriaLabel,removeToast:Pe,toasts:S.filter(ee=>ee.position==be.position),heights:A.filter(ee=>ee.position==be.position),setHeights:C,expandByDefault:o,gap:b,expanded:D,swipeDirections:t.swipeDirections})})):null}))}),Ec=y.createContext(void 0),RN={success:hr,error:Pb,warning:It,info:hc,ai:mc,camera:Zt,plant:Za,sync:dp},LN={success:{bg:"bg-green-50 dark:bg-green-900/20",border:"border-green-200 dark:border-green-800",icon:"text-green-500",title:"text-green-800 dark:text-green-200",message:"text-green-700 dark:text-green-300"},error:{bg:"bg-red-50 dark:bg-red-900/20",border:"border-red-200 dark:border-red-800",icon:"text-red-500",title:"text-red-800 dark:text-red-200",message:"text-red-700 dark:text-red-300"},warning:{bg:"bg-amber-50 dark:bg-amber-900/20",border:"border-amber-200 dark:border-amber-800",icon:"text-amber-500",title:"text-amber-800 dark:text-amber-200",message:"text-amber-700 dark:text-amber-300"},info:{bg:"bg-blue-50 dark:bg-blue-900/20",border:"border-blue-200 dark:border-blue-800",icon:"text-blue-500",title:"text-blue-800 dark:text-blue-200",message:"text-blue-700 dark:text-blue-300"},ai:{bg:"bg-purple-50 dark:bg-purple-900/20",border:"border-purple-200 dark:border-purple-800",icon:"text-purple-500",title:"text-purple-800 dark:text-purple-200",message:"text-purple-700 dark:text-purple-300"},camera:{bg:"bg-indigo-50 dark:bg-indigo-900/20",border:"border-indigo-200 dark:border-indigo-800",icon:"text-indigo-500",title:"text-indigo-800 dark:text-indigo-200",message:"text-indigo-700 dark:text-indigo-300"},plant:{bg:"bg-green-50 dark:bg-green-900/20",border:"border-green-200 dark:border-green-800",icon:"text-green-500",title:"text-green-800 dark:text-green-200",message:"text-green-700 dark:text-green-300"},sync:{bg:"bg-gray-50 dark:bg-gray-900/20",border:"border-gray-200 dark:border-gray-800",icon:"text-gray-500",title:"text-gray-800 dark:text-gray-200",message:"text-gray-700 dark:text-gray-300"}},FN=({children:e})=>{const[t,r]=y.useState([]),n=()=>Math.random().toString(36).substring(2,9),a=y.useCallback(h=>{const g=n(),v={id:g,duration:5e3,...h};return r(p=>[...p,v]),!v.persistent&&v.duration&&v.duration>0&&setTimeout(()=>{i(g)},v.duration),g},[]),i=y.useCallback(h=>{r(g=>g.filter(v=>v.id!==h))},[]),o=y.useCallback(()=>{r([])},[]),s=y.useCallback((h,g,v)=>a({type:"success",title:h,message:g,...v}),[a]),c=y.useCallback((h,g,v)=>a({type:"error",title:h,message:g,duration:8e3,...v}),[a]),u=y.useCallback((h,g,v)=>a({type:"warning",title:h,message:g,duration:6e3,...v}),[a]),d=y.useCallback((h,g,v)=>a({type:"info",title:h,message:g,...v}),[a]),f=y.useCallback((h,g,v)=>a({type:"ai",title:h,message:g,...v}),[a]),m={toasts:t,addToast:a,removeToast:i,clearAll:o,showSuccess:s,showError:c,showWarning:u,showInfo:d,showAI:f};return l.jsxs(Ec.Provider,{value:m,children:[e,l.jsx(BN,{})]})},BN=()=>{const e=y.useContext(Ec);if(!e)return null;const{toasts:t,removeToast:r}=e;return l.jsx("div",{className:"fixed top-4 right-4 z-[9999] space-y-2 max-w-sm w-full",children:l.jsx(se,{children:t.map(n=>l.jsx(UN,{toast:n,onRemove:r},n.id))})})},UN=({toast:e,onRemove:t})=>{const r=e.icon||RN[e.type],n=LN[e.type];return l.jsx(P.div,{initial:{opacity:0,x:300,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:300,scale:.95},transition:{duration:.2,ease:"easeOut"},className:"\n        ".concat(n.bg," ").concat(n.border,"\n        border rounded-lg p-4 shadow-lg backdrop-blur-sm\n        max-w-sm w-full\n      "),children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"".concat(n.icon," flex-shrink-0 mt-0.5"),children:l.jsx(r,{className:"w-5 h-5"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h4",{className:"".concat(n.title," text-sm font-medium mb-1"),children:e.title}),e.message&&l.jsx("p",{className:"".concat(n.message," text-sm leading-relaxed"),children:e.message}),e.actions&&e.actions.length>0&&l.jsx("div",{className:"flex gap-2 mt-3",children:e.actions.map((a,i)=>l.jsx("button",{onClick:()=>{a.onClick(),t(e.id)},className:"\n                    text-xs font-medium px-2 py-1 rounded transition-colors\n                    ".concat(a.variant==="primary"?"".concat(n.icon," bg-white/20 hover:bg-white/30"):"".concat(n.message," hover:").concat(n.title),"\n                  "),children:a.label},i))})]}),l.jsx("button",{onClick:()=>t(e.id),className:"".concat(n.icon," hover:opacity-70 transition-opacity flex-shrink-0"),"aria-label":"Cerrar notificación",children:l.jsx(Sr,{className:"w-4 h-4"})})]})})},_L=()=>{const e=y.useContext(Ec);if(!e)throw new Error("useToast must be used within a ToastProvider");return e};class WN{constructor(){Ut(this,"listeners",new Set)}subscribe(t){return this.listeners.add(t),()=>{this.listeners.delete(t)}}emit(t){this.listeners.forEach(r=>r(t))}success(t,r,n){this.emit({type:"success",title:t,message:r,duration:n})}error(t,r,n){this.emit({type:"error",title:t,message:r,duration:n})}warning(t,r,n){this.emit({type:"warning",title:t,message:r,duration:n})}info(t,r,n){this.emit({type:"info",title:t,message:r,duration:n})}}const Co=new WN,rg=y.createContext(void 0),Qn=()=>{const e=y.useContext(rg);if(!e)throw new Error("useToast must be used within a ToastProvider");return e},HN=e=>{switch(e){case"success":return l.jsx(hr,{size:20,className:"text-green-500"});case"error":return l.jsx(It,{size:20,className:"text-red-500"});case"warning":return l.jsx(Kt,{size:20,className:"text-yellow-500"});case"info":return l.jsx(hc,{size:20,className:"text-blue-500"})}},qN=e=>{switch(e){case"success":return"border-green-200 bg-green-50 dark:bg-green-900/20 dark:border-green-800";case"error":return"border-red-200 bg-red-50 dark:bg-red-900/20 dark:border-red-800";case"warning":return"border-yellow-200 bg-yellow-50 dark:bg-yellow-900/20 dark:border-yellow-800";case"info":return"border-blue-200 bg-blue-50 dark:bg-blue-900/20 dark:border-blue-800"}},ZN=({children:e})=>{const[t,r]=y.useState([]),n=y.useCallback(o=>{const s="toast-".concat(Date.now(),"-").concat(Math.random()),c={id:s,duration:5e3,...o};r(u=>[...u,c]),c.duration!==0&&setTimeout(()=>{a(s)},c.duration)},[]);y.useEffect(()=>Co.subscribe(s=>{n(s)}),[n]);const a=y.useCallback(o=>{r(s=>s.filter(c=>c.id!==o))},[]),i=y.useCallback(()=>{r([])},[]);return l.jsxs(rg.Provider,{value:{toasts:t,addToast:n,removeToast:a,clearToasts:i},children:[e,l.jsx(KN,{})]})},KN=()=>{const{toasts:e,removeToast:t}=Qn();return l.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:l.jsx(se,{children:e.map(r=>l.jsx(P.div,{initial:{opacity:0,x:300,scale:.8},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:300,scale:.8},transition:{type:"spring",damping:25,stiffness:300},className:"max-w-sm w-full rounded-lg border p-4 shadow-lg ".concat(qN(r.type)),role:"alert","aria-live":"assertive",tabIndex:0,children:l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsx("div",{className:"flex-shrink-0 mt-0.5",children:HN(r.type)}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:r.title}),r.message&&l.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:r.message})]}),l.jsx("button",{onClick:()=>t(r.id),className:"flex-shrink-0 ml-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors","aria-label":"Cerrar notificación",children:l.jsx(Sr,{size:16})})]})},r.id))})})},Dr={QUERY:{STALE_TIME:{MEDIUM:1e3*60*15},GC_TIME:{MEDIUM:1e3*60*30,LONG:1e3*60*60},RETRY:{COUNT:1,DELAY:1e3}}},ua={measureTime:async(e,t)=>typeof t=="function"?await t():t,markStart:e=>{},markEnd:e=>{},debounce:(e,t)=>{let r;return(...n)=>{clearTimeout(r),r=setTimeout(()=>e.apply(void 0,n),t)}},throttle:(e,t)=>{let r;return(...n)=>{r||(e.apply(void 0,n),r=!0,setTimeout(()=>r=!1,t))}}},GN=()=>(y.useEffect(()=>{},[]),{measureTime:ua.measureTime,markStart:ua.markStart,markEnd:ua.markEnd,debounce:ua.debounce,throttle:ua.throttle}),VN=()=>{var t;const e=()=>{const r=window.innerHeight*.01;document.documentElement.style.setProperty("--vh","".concat(r,"px")),typeof CSS<"u"&&CSS.supports&&CSS.supports("padding","env(safe-area-inset-top)")?(document.documentElement.style.setProperty("--safe-area-top","env(safe-area-inset-top)"),document.documentElement.style.setProperty("--safe-area-bottom","env(safe-area-inset-bottom)"),document.documentElement.style.setProperty("--safe-area-left","env(safe-area-inset-left)"),document.documentElement.style.setProperty("--safe-area-right","env(safe-area-inset-right)")):(document.documentElement.style.setProperty("--safe-area-top","0px"),document.documentElement.style.setProperty("--safe-area-bottom","0px"),document.documentElement.style.setProperty("--safe-area-left","0px"),document.documentElement.style.setProperty("--safe-area-right","0px"))};return e(),window.addEventListener("resize",e),window.addEventListener("orientationchange",()=>{setTimeout(e,100)}),"visualViewport"in window&&((t=window.visualViewport)==null||t.addEventListener("resize",e)),()=>{var r;window.removeEventListener("resize",e),window.removeEventListener("orientationchange",e),"visualViewport"in window&&((r=window.visualViewport)==null||r.removeEventListener("resize",e))}};const YN=()=>{const[e,t]=y.useState({isOnline:navigator.onLine});return y.useEffect(()=>{const r=()=>{const s=navigator.connection||navigator.mozConnection||navigator.webkitConnection;t({isOnline:navigator.onLine,connectionType:s==null?void 0:s.type,effectiveType:s==null?void 0:s.effectiveType,downlink:s==null?void 0:s.downlink,rtt:s==null?void 0:s.rtt})},n=()=>{console.log("[Network] Connection restored"),r()},a=()=>{console.log("[Network] Connection lost"),r()},i=()=>{console.log("[Network] Connection changed"),r()};r(),window.addEventListener("online",n),window.addEventListener("offline",a);const o=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return o&&o.addEventListener("change",i),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",a),o&&o.removeEventListener("change",i)}},[]),e},XN=()=>{const e=YN();return{...e,quality:(()=>{if(!e.isOnline)return"offline";if(e.effectiveType)switch(e.effectiveType){case"4g":return"fast";case"3g":return"slow";case"2g":return"slow";case"slow-2g":return"slow";default:return"fast"}return e.downlink!==void 0?e.downlink>1.5?"fast":"slow":"fast"})()}},QN=()=>{const[e,t]=y.useState(!1);XN();const{session:r,isInitialized:n}=or();return null},JN=()=>{},Oo=(e,t)=>{console.error("[CRITICAL][".concat(e,"]"),t),console.warn("Production error detected:",{context:e,error:t})},ek=()=>{console.log("[COMPAT] Running compatibility tests..."),console.log("[COMPAT] ES Modules support:","noModule"in HTMLScriptElement.prototype?"✅":"❌");try{(async()=>{})(),console.log("[COMPAT] Async/await support: ✅")}catch(e){console.log("[COMPAT] Async/await support: ❌")}console.log("[COMPAT] Fetch API:",typeof fetch<"u"?"✅":"❌"),console.log("[COMPAT] CSS custom properties:",CSS&&CSS.supports&&CSS.supports("--test","value")?"✅":"❌"),console.log("[COMPAT] IntersectionObserver:",typeof IntersectionObserver<"u"?"✅":"❌"),console.log("[COMPAT] Compatibility tests completed")};function ng(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=ng(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function fe(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=ng(e))&&(n&&(n+=" "),n+=t);return n}const _c="-",tk=e=>{const t=nk(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{const s=o.split(_c);return s[0]===""&&s.length!==1&&s.shift(),ag(s,t)||rk(o)},getConflictingClassGroupIds:(o,s)=>{const c=r[o]||[];return s&&n[o]?[...c,...n[o]]:c}}},ag=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),a=n?ag(e.slice(1),n):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(_c);return(o=t.validators.find(({validator:s})=>s(i)))==null?void 0:o.classGroupId},Yd=/^\[(.+)\]$/,rk=e=>{if(Yd.test(e)){const t=Yd.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},nk=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return ik(Object.entries(e.classGroups),r).forEach(([i,o])=>{pl(o,n,i,t)}),n},pl=(e,t,r,n)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:Xd(t,a);i.classGroupId=r;return}if(typeof a=="function"){if(ak(a)){pl(a(n),t,r,n);return}t.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([i,o])=>{pl(o,Xd(t,i),r,n)})})},Xd=(e,t)=>{let r=e;return t.split(_c).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},ak=e=>e.isThemeGetter,ik=(e,t)=>t?e.map(([r,n])=>{const a=n.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,s])=>[t+o,s])):i);return[r,a]}):e,ok=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const a=(i,o)=>{r.set(i,o),t++,t>e&&(t=0,n=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return a(i,o),o},set(i,o){r.has(i)?r.set(i,o):a(i,o)}}},ig="!",sk=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,a=t[0],i=t.length,o=s=>{const c=[];let u=0,d=0,f;for(let p=0;p<s.length;p++){let x=s[p];if(u===0){if(x===a&&(n||s.slice(p,p+i)===t)){c.push(s.slice(d,p)),d=p+i;continue}if(x==="/"){f=p;continue}}x==="["?u++:x==="]"&&u--}const m=c.length===0?s:s.substring(d),h=m.startsWith(ig),g=h?m.substring(1):m,v=f&&f>d?f-d:void 0;return{modifiers:c,hasImportantModifier:h,baseClassName:g,maybePostfixModifierPosition:v}};return r?s=>r({className:s,parseClassName:o}):o},lk=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},ck=e=>({cache:ok(e.cacheSize),parseClassName:sk(e),...tk(e)}),uk=/\s+/,dk=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a}=t,i=[],o=e.trim().split(uk);let s="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:h}=r(u);let g=!!h,v=n(g?m.substring(0,h):m);if(!v){if(!g){s=u+(s.length>0?" "+s:s);continue}if(v=n(m),!v){s=u+(s.length>0?" "+s:s);continue}g=!1}const p=lk(d).join(":"),x=f?p+ig:p,b=x+v;if(i.includes(b))continue;i.push(b);const w=a(v,g);for(let j=0;j<w.length;++j){const S=w[j];i.push(x+S)}s=u+(s.length>0?" "+s:s)}return s};function fk(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=og(t))&&(n&&(n+=" "),n+=r);return n}const og=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=og(e[n]))&&(r&&(r+=" "),r+=t);return r};function mk(e,...t){let r,n,a,i=o;function o(c){const u=t.reduce((d,f)=>f(d),e());return r=ck(u),n=r.cache.get,a=r.cache.set,i=s,s(c)}function s(c){const u=n(c);if(u)return u;const d=dk(c,r);return a(c,d),d}return function(){return i(fk.apply(null,arguments))}}const ge=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},sg=/^\[(?:([a-z-]+):)?(.+)\]$/i,hk=/^\d+\/\d+$/,pk=new Set(["px","full","screen"]),gk=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,vk=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,yk=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,xk=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,bk=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,lr=e=>Ln(e)||pk.has(e)||hk.test(e),Or=e=>Jn(e,"length",_k),Ln=e=>!!e&&!Number.isNaN(Number(e)),Ts=e=>Jn(e,"number",Ln),da=e=>!!e&&Number.isInteger(Number(e)),wk=e=>e.endsWith("%")&&Ln(e.slice(0,-1)),re=e=>sg.test(e),Tr=e=>gk.test(e),jk=new Set(["length","size","percentage"]),Sk=e=>Jn(e,jk,lg),Nk=e=>Jn(e,"position",lg),kk=new Set(["image","url"]),Pk=e=>Jn(e,kk,Ck),Ek=e=>Jn(e,"",Ak),fa=()=>!0,Jn=(e,t,r)=>{const n=sg.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},_k=e=>vk.test(e)&&!yk.test(e),lg=()=>!1,Ak=e=>xk.test(e),Ck=e=>bk.test(e),Ok=()=>{const e=ge("colors"),t=ge("spacing"),r=ge("blur"),n=ge("brightness"),a=ge("borderColor"),i=ge("borderRadius"),o=ge("borderSpacing"),s=ge("borderWidth"),c=ge("contrast"),u=ge("grayscale"),d=ge("hueRotate"),f=ge("invert"),m=ge("gap"),h=ge("gradientColorStops"),g=ge("gradientColorStopPositions"),v=ge("inset"),p=ge("margin"),x=ge("opacity"),b=ge("padding"),w=ge("saturate"),j=ge("scale"),S=ge("sepia"),N=ge("skew"),k=ge("space"),A=ge("translate"),C=()=>["auto","contain","none"],D=()=>["auto","hidden","clip","visible","scroll"],T=()=>["auto",re,t],O=()=>[re,t],B=()=>["",lr,Or],Z=()=>["auto",Ln,re],z=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],U=()=>["solid","dashed","dotted","double","none"],q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Q=()=>["start","end","center","between","around","evenly","stretch"],V=()=>["","0",re],Pe=()=>["auto","avoid","all","avoid-page","page","left","right","column"],G=()=>[Ln,re];return{cacheSize:500,separator:":",theme:{colors:[fa],spacing:[lr,Or],blur:["none","",Tr,re],brightness:G(),borderColor:[e],borderRadius:["none","","full",Tr,re],borderSpacing:O(),borderWidth:B(),contrast:G(),grayscale:V(),hueRotate:G(),invert:V(),gap:O(),gradientColorStops:[e],gradientColorStopPositions:[wk,Or],inset:T(),margin:T(),opacity:G(),padding:O(),saturate:G(),scale:G(),sepia:V(),skew:G(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",re]}],container:["container"],columns:[{columns:[Tr]}],"break-after":[{"break-after":Pe()}],"break-before":[{"break-before":Pe()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...z(),re]}],overflow:[{overflow:D()}],"overflow-x":[{"overflow-x":D()}],"overflow-y":[{"overflow-y":D()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",da,re]}],basis:[{basis:T()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",re]}],grow:[{grow:V()}],shrink:[{shrink:V()}],order:[{order:["first","last","none",da,re]}],"grid-cols":[{"grid-cols":[fa]}],"col-start-end":[{col:["auto",{span:["full",da,re]},re]}],"col-start":[{"col-start":Z()}],"col-end":[{"col-end":Z()}],"grid-rows":[{"grid-rows":[fa]}],"row-start-end":[{row:["auto",{span:[da,re]},re]}],"row-start":[{"row-start":Z()}],"row-end":[{"row-end":Z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",re]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",re]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...Q()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Q(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Q(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[p]}],mx:[{mx:[p]}],my:[{my:[p]}],ms:[{ms:[p]}],me:[{me:[p]}],mt:[{mt:[p]}],mr:[{mr:[p]}],mb:[{mb:[p]}],ml:[{ml:[p]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",re,t]}],"min-w":[{"min-w":[re,t,"min","max","fit"]}],"max-w":[{"max-w":[re,t,"none","full","min","max","fit","prose",{screen:[Tr]},Tr]}],h:[{h:[re,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[re,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[re,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[re,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Tr,Or]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ts]}],"font-family":[{font:[fa]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",re]}],"line-clamp":[{"line-clamp":["none",Ln,Ts]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",lr,re]}],"list-image":[{"list-image":["none",re]}],"list-style-type":[{list:["none","disc","decimal",re]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...U(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",lr,Or]}],"underline-offset":[{"underline-offset":["auto",lr,re]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",re]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",re]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...z(),Nk]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Sk]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Pk]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[h]}],"gradient-via":[{via:[h]}],"gradient-to":[{to:[h]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[s]}],"border-w-x":[{"border-x":[s]}],"border-w-y":[{"border-y":[s]}],"border-w-s":[{"border-s":[s]}],"border-w-e":[{"border-e":[s]}],"border-w-t":[{"border-t":[s]}],"border-w-r":[{"border-r":[s]}],"border-w-b":[{"border-b":[s]}],"border-w-l":[{"border-l":[s]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...U(),"hidden"]}],"divide-x":[{"divide-x":[s]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[s]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:U()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...U()]}],"outline-offset":[{"outline-offset":[lr,re]}],"outline-w":[{outline:[lr,Or]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:B()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[lr,Or]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Tr,Ek]}],"shadow-color":[{shadow:[fa]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...q(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":q()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Tr,re]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[w]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",re]}],duration:[{duration:G()}],ease:[{ease:["linear","in","out","in-out",re]}],delay:[{delay:G()}],animate:[{animate:["none","spin","ping","pulse","bounce",re]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[da,re]}],"translate-x":[{"translate-x":[A]}],"translate-y":[{"translate-y":[A]}],"skew-x":[{"skew-x":[N]}],"skew-y":[{"skew-y":[N]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",re]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",re]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",re]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[lr,Or,Ts]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Tk=mk(Ok);function ue(...e){return Tk(fe(e))}const De={auth:"/auth",dashboard:"/",camera:"/camera",settings:"/settings",gardenChat:"/garden-chat",plantDetail:e=>"/plant/".concat(e),plantChat:e=>"/plant/".concat(e,"/chat")},ze={toDashboard:()=>De.dashboard,toCamera:()=>De.camera,toSettings:()=>De.settings,toGardenChat:()=>De.gardenChat,toPlantDetail:e=>De.plantDetail(e),toPlantChat:e=>De.plantChat(e),toAuth:()=>De.auth},Ik=(e,t)=>e===t?!0:t===De.dashboard?e==="/"||e.startsWith("/plant/"):t===De.gardenChat?e===De.gardenChat||e.includes("/chat")||e.includes("/garden-chat"):t===De.settings?e.startsWith("/settings"):!1;var cg=Symbol.for("immer-nothing"),Qd=Symbol.for("immer-draftable"),kt=Symbol.for("immer-state");function Ht(e,...t){throw new Error("[Immer] minified error nr: ".concat(e,". Full error at: https://bit.ly/3cXEKWf"))}var Hn=Object.getPrototypeOf;function xn(e){return!!e&&!!e[kt]}function yr(e){var t;return e?ug(e)||Array.isArray(e)||!!e[Qd]||!!((t=e.constructor)!=null&&t[Qd])||Io(e)||Mo(e):!1}var Mk=Object.prototype.constructor.toString();function ug(e){if(!e||typeof e!="object")return!1;const t=Hn(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===Mk}function Ui(e,t){To(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function To(e){const t=e[kt];return t?t.type_:Array.isArray(e)?1:Io(e)?2:Mo(e)?3:0}function gl(e,t){return To(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function dg(e,t,r){const n=To(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function Dk(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Io(e){return e instanceof Map}function Mo(e){return e instanceof Set}function Qr(e){return e.copy_||e.base_}function vl(e,t){if(Io(e))return new Map(e);if(Mo(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=ug(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[kt];let a=Reflect.ownKeys(n);for(let i=0;i<a.length;i++){const o=a[i],s=n[o];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(n[o]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[o]})}return Object.create(Hn(e),n)}else{const n=Hn(e);if(n!==null&&r)return{...e};const a=Object.create(n);return Object.assign(a,e)}}function Ac(e,t=!1){return Do(e)||xn(e)||!yr(e)||(To(e)>1&&(e.set=e.add=e.clear=e.delete=$k),Object.freeze(e),t&&Object.entries(e).forEach(([r,n])=>Ac(n,!0))),e}function $k(){Ht(2)}function Do(e){return Object.isFrozen(e)}var zk={};function bn(e){const t=zk[e];return t||Ht(0,e),t}var Ia;function fg(){return Ia}function Rk(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Jd(e,t){t&&(bn("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function yl(e){xl(e),e.drafts_.forEach(Lk),e.drafts_=null}function xl(e){e===Ia&&(Ia=e.parent_)}function ef(e){return Ia=Rk(Ia,e)}function Lk(e){const t=e[kt];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function tf(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[kt].modified_&&(yl(t),Ht(4)),yr(e)&&(e=Wi(t,e),t.parent_||Hi(t,e)),t.patches_&&bn("Patches").generateReplacementPatches_(r[kt].base_,e,t.patches_,t.inversePatches_)):e=Wi(t,r,[]),yl(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==cg?e:void 0}function Wi(e,t,r){if(Do(t))return t;const n=t[kt];if(!n)return Ui(t,(a,i)=>rf(e,n,t,a,i,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return Hi(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const a=n.copy_;let i=a,o=!1;n.type_===3&&(i=new Set(a),a.clear(),o=!0),Ui(i,(s,c)=>rf(e,n,a,s,c,r,o)),Hi(e,a,!1),r&&e.patches_&&bn("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function rf(e,t,r,n,a,i,o){if(xn(a)){const s=i&&t&&t.type_!==3&&!gl(t.assigned_,n)?i.concat(n):void 0,c=Wi(e,a,s);if(dg(r,n,c),xn(c))e.canAutoFreeze_=!1;else return}else o&&r.add(a);if(yr(a)&&!Do(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Wi(e,a),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&Hi(e,a)}}function Hi(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Ac(t,r)}function Fk(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:fg(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,i=Cc;r&&(a=[n],i=Ma);const{revoke:o,proxy:s}=Proxy.revocable(a,i);return n.draft_=s,n.revoke_=o,s}var Cc={get(e,t){if(t===kt)return e;const r=Qr(e);if(!gl(r,t))return Bk(e,r,t);const n=r[t];return e.finalized_||!yr(n)?n:n===Is(e.base_,t)?(Ms(e),e.copy_[t]=wl(n,e)):n},has(e,t){return t in Qr(e)},ownKeys(e){return Reflect.ownKeys(Qr(e))},set(e,t,r){const n=mg(Qr(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const a=Is(Qr(e),t),i=a==null?void 0:a[kt];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(Dk(r,a)&&(r!==void 0||gl(e.base_,t)))return!0;Ms(e),bl(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Is(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Ms(e),bl(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Qr(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Ht(11)},getPrototypeOf(e){return Hn(e.base_)},setPrototypeOf(){Ht(12)}},Ma={};Ui(Cc,(e,t)=>{Ma[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Ma.deleteProperty=function(e,t){return Ma.set.call(this,e,t,void 0)};Ma.set=function(e,t,r){return Cc.set.call(this,e[0],t,r,e[0])};function Is(e,t){const r=e[kt];return(r?Qr(r):e)[t]}function Bk(e,t,r){var a;const n=mg(t,r);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(e.draft_):void 0}function mg(e,t){if(!(t in e))return;let r=Hn(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Hn(r)}}function bl(e){e.modified_||(e.modified_=!0,e.parent_&&bl(e.parent_))}function Ms(e){e.copy_||(e.copy_=vl(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Uk=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const o=this;return function(c=i,...u){return o.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&Ht(6),n!==void 0&&typeof n!="function"&&Ht(7);let a;if(yr(t)){const i=ef(this),o=wl(t,void 0);let s=!0;try{a=r(o),s=!1}finally{s?yl(i):xl(i)}return Jd(i,n),tf(a,i)}else if(!t||typeof t!="object"){if(a=r(t),a===void 0&&(a=t),a===cg&&(a=void 0),this.autoFreeze_&&Ac(a,!0),n){const i=[],o=[];bn("Patches").generateReplacementPatches_(t,a,i,o),n(i,o)}return a}else Ht(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(o,...s)=>this.produceWithPatches(o,c=>t(c,...s));let n,a;return[this.produce(t,r,(o,s)=>{n=o,a=s}),n,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){yr(e)||Ht(8),xn(e)&&(e=pr(e));const t=ef(this),r=wl(e,void 0);return r[kt].isManual_=!0,xl(t),r}finishDraft(e,t){const r=e&&e[kt];(!r||!r.isManual_)&&Ht(9);const{scope_:n}=r;return Jd(n,t),tf(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const a=t[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(t=t.slice(r+1));const n=bn("Patches").applyPatches_;return xn(e)?n(e,t):this.produce(e,a=>n(a,t))}};function wl(e,t){const r=Io(e)?bn("MapSet").proxyMap_(e,t):Mo(e)?bn("MapSet").proxySet_(e,t):Fk(e,t);return(t?t.scope_:fg()).drafts_.push(r),r}function pr(e){return xn(e)||Ht(10,e),hg(e)}function hg(e){if(!yr(e)||Do(e))return e;const t=e[kt];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=vl(e,t.scope_.immer_.useStrictShallowCopy_)}else r=vl(e,!0);return Ui(r,(n,a)=>{dg(r,n,hg(a))}),t&&(t.finalized_=!1),r}var Pt=new Uk,cr=Pt.produce;Pt.produceWithPatches.bind(Pt);Pt.setAutoFreeze.bind(Pt);Pt.setUseStrictShallowCopy.bind(Pt);Pt.applyPatches.bind(Pt);Pt.createDraft.bind(Pt);Pt.finishDraft.bind(Pt);let pi;const Wk=new Uint8Array(16);function Hk(){if(!pi&&(pi=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!pi))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return pi(Wk)}const qe=[];for(let e=0;e<256;++e)qe.push((e+256).toString(16).slice(1));function qk(e,t=0){return qe[e[t+0]]+qe[e[t+1]]+qe[e[t+2]]+qe[e[t+3]]+"-"+qe[e[t+4]]+qe[e[t+5]]+"-"+qe[e[t+6]]+qe[e[t+7]]+"-"+qe[e[t+8]]+qe[e[t+9]]+"-"+qe[e[t+10]]+qe[e[t+11]]+qe[e[t+12]]+qe[e[t+13]]+qe[e[t+14]]+qe[e[t+15]]}const Zk=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),nf={randomUUID:Zk};function Kk(e,t,r){if(nf.randomUUID&&!e)return nf.randomUUID();e=e||{};const n=e.random||(e.rng||Hk)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,qk(n)}const pg=5,Gk=pg*1024*1024,gg=e=>{if(!e||typeof e!="string")throw new Error("URL de imagen inválida");const t=e.split(",")[1];if(!t)throw new Error("Formato de imagen inválido");const r=t.length*3/4;if(r>Gk){const n=(r/1048576).toFixed(1);throw new Error("La imagen es demasiado grande (".concat(n,"MB). El límite máximo es ").concat(pg,"MB. Por favor, usa una imagen más pequeña."))}console.log("[imageService] Image size validation passed: ".concat((r/(1024*1024)).toFixed(2),"MB"))},Vk=e=>{if(!e||typeof e!="string")throw new Error("Invalid data URL: input is not a string");if(!e.startsWith("data:"))throw new Error('Invalid data URL: does not start with "data:"');const t=e.split(",");if(t.length!==2)throw new Error("Invalid data URL: incorrect format");const r=t[0].match(/:(.*?);/);if(!r)throw new Error("Invalid data URL: could not extract MIME type");const n=r[1];if(!n.startsWith("image/"))throw new Error("Invalid data URL: not an image MIME type (".concat(n,")"));try{const a=atob(t[1]);let i=a.length;const o=new Uint8Array(i);for(;i--;)o[i]=a.charCodeAt(i);return new Blob([o],{type:n})}catch(a){throw new Error("Invalid data URL: failed to decode base64 data - ".concat(a instanceof Error?a.message:"Unknown error"))}},vg=async(e,t,r)=>{try{gg(e);const n=Vk(e),a=n.type.split("/")[1],i="".concat(r,"/").concat(Kk(),".").concat(a),{error:o}=await pe.storage.from(t).upload(i,n,{cacheControl:"3600",upsert:!1});if(o)throw console.error("Error uploading image to Supabase Storage:",o),new Error("Storage error: ".concat(o.message));const{data:s}=pe.storage.from(t).getPublicUrl(i);if(!s||!s.publicUrl)throw new Error("Could not get public URL for uploaded image.");return s.publicUrl}catch(n){throw console.error("Failed to upload image:",n),n instanceof Error?new Error("Image upload failed: ".concat(n.message)):new Error("An unknown error occurred during image upload.")}},Yk=async e=>{try{const{data:{session:t},error:r}=await pe.auth.getSession();if(r||!(t!=null&&t.access_token))throw console.error("User session not available:",r),new Error("Usuario no autenticado. Por favor inicia sesión nuevamente.");const{data:n,error:a}=await pe.functions.invoke("generate-plant-insights",{body:{plant:e},headers:{Authorization:"Bearer ".concat(t.access_token)}});if(a)throw new Error("Failed to generate insights: ".concat(a.message));return tN.parse(n)}catch(t){throw console.error("[insightService] Error generating insights:",t),t instanceof Xj?new Error("Invalid data structure for insights: ".concat(t.message)):t}},yg=async e=>{var i,o,s;gg(e);const{data:{session:t},error:r}=await pe.auth.getSession();if(r||!t)throw new Error("User must be authenticated to analyze images");const{data:n,error:a}=await pe.functions.invoke("analyze-image",{body:{imageDataUrl:e},headers:{Authorization:"Bearer ".concat(t.access_token)}});if(a){if(console.error("Error invoking analyze-image function:",a),(i=a.message)!=null&&i.includes("unsupported image"))throw new Error("La imagen no es válida. Por favor, asegúrate de que sea una foto clara de una planta.");if((o=a.message)!=null&&o.includes("OpenAI API key"))throw new Error("Servicio de análisis temporalmente no disponible. Intenta de nuevo más tarde.");const c=(s=a.context)!=null&&s.msg?JSON.parse(a.context.msg).error:a.message;throw new Error("Failed to analyze image: ".concat(c))}if(n&&n.error)throw console.error("Image analysis failed with a specific error:",n.error),new Error(n.error);return n},af=async(e,t)=>{const r="cálido, simpático, motivador, y con un toque de humor ligero",n=(e.images||[]).map(m=>({url:m.url,timestamp:m.timestamp instanceof Date?m.timestamp.toISOString():m.timestamp,...m.healthAnalysis?{healthAnalysis:m.healthAnalysis}:{}})).sort((m,h)=>new Date(m.timestamp).getTime()-new Date(h.timestamp).getTime());let a=[];try{a=await Yk(e)}catch(m){console.warn("[generatePlantResponse] No se pudieron generar insights para la planta:",m),a=[]}const i={...e,images:n},{data:{session:o},error:s}=await pe.auth.getSession();if(s||!(o!=null&&o.access_token))throw console.error("User session not available:",s),new Error("Usuario no autenticado. Por favor inicia sesión nuevamente.");const{data:c,error:u}=await pe.functions.invoke("generate-plant-response",{body:{plant:i,userMessage:t,tonePersona:r,insights:a},headers:{Authorization:"Bearer ".concat(o.access_token)}});if(u)throw console.error("Error calling generate-plant-response function:",u),new Error("Failed to generate plant response: "+u.message);const d=((c==null?void 0:c.content)||"").toLowerCase();return(!(c!=null&&c.content)||d.includes("no sé")||d.includes("no tengo información")||d.includes("no puedo ayudarte")||d.length<20)&&Co.warning("Respuesta genérica","La respuesta de la planta fue muy genérica o poco útil. Intenta preguntar de otra forma o proporciona más detalles."),{...c,insights:(c==null?void 0:c.insights)||a||[],suggestedActions:(c==null?void 0:c.suggestedActions)||[]}},Xk=async(e,t)=>{const{data:{session:r},error:n}=await pe.auth.getSession();if(n||!(r!=null&&r.access_token))throw console.error("User session not available:",n),new Error("Usuario no autenticado. Por favor inicia sesión nuevamente.");const{data:a,error:i}=await pe.functions.invoke("complete-plant-info",{body:{species:e,commonName:t},headers:{Authorization:"Bearer ".concat(r.access_token)}});if(i)throw console.error("💥 [API] Error en complete-plant-info function:",i),new Error("Failed to complete plant info: "+i.message);const o=["interior","exterior","ambos"],s=["poca_luz","luz_indirecta","luz_directa_parcial","pleno_sol"];return{plantEnvironment:o.includes(a.plantEnvironment)?a.plantEnvironment:"interior",lightRequirements:s.includes(a.lightRequirements)?a.lightRequirements:"luz_indirecta",description:a.description||void 0,funFacts:Array.isArray(a.funFacts)?a.funFacts:void 0}},ma=(e,t,r,n)=>({id:e.id,name:e.name,species:e.species,variety:e.variety||void 0,nickname:e.nickname||void 0,description:e.description||void 0,funFacts:e.fun_facts||[],location:e.location,plantEnvironment:e.plant_environment,lightRequirements:e.light_requirements,dateAdded:new Date(e.date_added),lastWatered:e.last_watered?new Date(e.last_watered):void 0,lastFertilized:e.last_fertilized?new Date(e.last_fertilized):void 0,images:t,healthScore:e.health_score||85,careProfile:e.care_profile,personality:e.personality,chatHistory:r,notifications:n});class Oc{constructor(t=pe){Ut(this,"supabase");this.supabase=t}async getUserPlantSummaries(t){try{const{data:r,error:n}=await this.supabase.from("plants").select("\n          id,\n          name,\n          nickname,\n          species,\n          location,\n          plant_environment,\n          light_requirements,\n          health_score,\n          last_watered,\n          care_profile\n        ").eq("user_id",t).order("created_at",{ascending:!1});if(n)throw n;let a=new Map;if(r.length>0){const o=r.map(u=>u.id),{data:s,error:c}=await this.supabase.from("plant_images").select("plant_id, url").in("plant_id",o).eq("is_profile_image",!0);c?console.warn("[plantService] Error fetching profile images:",c):a=new Map((s||[]).map(u=>[u.plant_id,u.url]))}return r.map(o=>{var s;return{id:o.id,name:o.name,nickname:o.nickname||void 0,species:o.species,location:o.location,plantEnvironment:o.plant_environment,lightRequirements:o.light_requirements,healthScore:o.health_score||85,profileImageUrl:a.get(o.id),lastWatered:o.last_watered?new Date(o.last_watered):void 0,wateringFrequency:(s=o.care_profile)==null?void 0:s.wateringFrequency}})}catch(r){throw console.error("Error fetching plant summaries:",r),r}}async getUserPlants(t){try{const{data:r,error:n}=await this.supabase.from("plants").select("\n          *,\n          plant_images ( * ),\n          chat_messages ( * ),\n          plant_notifications ( * )\n        ").eq("user_id",t).order("created_at",{ascending:!1});if(n)throw n;return r.map(i=>{const o=(i.plant_images||[]).map(u=>({id:u.id,url:u.url,timestamp:new Date(u.created_at),healthAnalysis:u.health_analysis,isProfileImage:u.is_profile_image||!1})),s=(i.chat_messages||[]).map(u=>({id:u.id,sender:u.sender,content:u.content,timestamp:new Date(u.created_at),emotion:u.emotion})),c=(i.plant_notifications||[]).map(u=>({id:u.id,type:u.type,title:u.title,message:u.message,priority:u.priority||"medium",scheduledFor:new Date(u.scheduled_for),completed:u.completed||!1}));return ma(i,o,s,c)})}catch(r){throw console.error("Error fetching plants:",r),r}}async getPlantById(t,r){try{const{data:n,error:a}=await this.supabase.from("plants").select("\n          *,\n          plant_images ( * ),\n          chat_messages ( * ),\n          plant_notifications ( * )\n        ").eq("id",t).eq("user_id",r).single();if(a){if(a.code==="PGRST116")return null;throw a}if(!n)return null;const i=(n.plant_images||[]).map(c=>({id:c.id,url:c.url,timestamp:new Date(c.created_at),healthAnalysis:c.health_analysis,isProfileImage:c.is_profile_image||!1})),o=(n.chat_messages||[]).map(c=>({id:c.id,sender:c.sender,content:c.content,timestamp:new Date(c.created_at),emotion:c.emotion})),s=(n.plant_notifications||[]).map(c=>({id:c.id,type:c.type,title:c.title,message:c.message,priority:c.priority||"medium",scheduledFor:new Date(c.scheduled_for),completed:c.completed||!1}));return ma(n,i,o,s)}catch(n){throw console.error("Error fetching plant by ID:",n),n}}async addPlantFromAnalysis(t,r,n){var a;try{console.log("[PlantService] Iniciando análisis IA...");const i=await yg(r);console.log("[PlantService] Resultado IA:",i);const o={name:i.commonName,species:i.species,description:i.generalDescription,funFacts:i.funFacts,variety:(a=i.variety)!=null?a:void 0,nickname:i.commonName,location:n,plantEnvironment:i.plantEnvironment,lightRequirements:i.lightRequirements,dateAdded:new Date,healthScore:i.health.confidence,careProfile:i.careProfile,personality:i.personality};console.log("[PlantService] Payload a createPlant:",o);const s=await this.createPlant(o,t);return console.log("[PlantService] Planta creada:",s),(async()=>{let c=!1,u=!1;try{console.log("[PlantService] Starting image upload for plant ".concat(s.id));const d=await vg(r,"plant-images","".concat(t,"/").concat(s.id));console.log("[PlantService] Imagen subida:",d),await this.addPlantImage(s.id,{url:d,timestamp:new Date,isProfileImage:!0,healthAnalysis:i.health},t),c=!0,console.log("[PlantService] Image upload completed for plant ".concat(s.id))}catch(d){console.error("[PlantService] Image upload failed for plant ".concat(s.id,":"),d),alert("Error subiendo imagen: "+(d instanceof Error?d.message:JSON.stringify(d)))}try{console.log("[PlantService] Starting chat initialization for plant ".concat(s.id));const d=await af(s,"¡Hola! Acabo de llegar. ¿Cómo te llamas?");console.log("[PlantService] Respuesta IA chat:",d),await this.addChatMessage(s.id,{sender:"plant",content:d.content,timestamp:new Date,emotion:d.emotion},t),u=!0,console.log("[PlantService] Chat initialization completed for plant ".concat(s.id))}catch(d){console.error("[PlantService] Chat initialization failed for plant ".concat(s.id,":"),d),alert("Error inicializando chat: "+(d instanceof Error?d.message:JSON.stringify(d)))}c&&u?console.log("[PlantService] All background tasks for plant ".concat(s.id," completed successfully.")):(c||u)&&console.log("[PlantService] Background tasks for plant ".concat(s.id," partially completed."))})().catch(c=>{console.error("[PlantService] Error during background tasks for plant ".concat(s.id,":"),c),alert("Error en tareas de fondo: "+(c instanceof Error?c.message:JSON.stringify(c)))}),s}catch(i){throw console.error("Error adding plant from analysis:",i),alert("Error creando planta: "+(i instanceof Error?i.message:JSON.stringify(i))),i}}async createPlant(t,r){try{const n={user_id:r,name:t.name,species:t.species,variety:t.variety||null,nickname:t.nickname||null,description:t.description||null,fun_facts:t.funFacts||null,location:t.location,plant_environment:t.plantEnvironment||null,light_requirements:t.lightRequirements||null,date_added:t.dateAdded.toISOString(),last_watered:null,last_fertilized:null,health_score:t.healthScore,care_profile:t.careProfile,personality:t.personality,updated_at:null};console.log("[PlantService] Payload a Supabase:",n);const{data:a,error:i}=await this.supabase.from("plants").insert(n).select("*").single();if(console.log("[PlantService] Respuesta Supabase:",a,i),i)throw console.error("Supabase error:",{message:i.message,details:i.details,code:i.code}),alert("Error Supabase: "+i.message),new Error("Supabase error creating plant: ".concat(i.message));if(!a)throw alert("No se pudo crear la planta en la base de datos, no se devolvieron datos."),new Error("Failed to create plant in the database, no data returned.");return ma(a,[],[],[])}catch(n){throw console.error("Error creating plant:",n),alert("Error creando planta: "+(n instanceof Error?n.message:JSON.stringify(n))),n}}async updatePlantInfo(t,r,n){try{const a={};n.plantEnvironment!==void 0&&(a.plant_environment=n.plantEnvironment),n.lightRequirements!==void 0&&(a.light_requirements=n.lightRequirements),n.description!==void 0&&(a.description=n.description),n.funFacts!==void 0&&(a.fun_facts=n.funFacts);const{data:i,error:o}=await this.supabase.from("plants").update(a).eq("id",t).eq("user_id",r).select("*").single();if(o)throw console.error("Supabase error updating plant:",o),new Error("Error updating plant: ".concat(o.message));if(!i)throw new Error("Plant not found or not updated.");return ma(i,[],[],[])}catch(a){throw console.error("Error updating plant info:",a),a}}async updatePlantHealthScore(t,r,n,a,i){try{console.log("🏥 [DB] Actualizando health score en BD:",{plantId:t,healthScore:n,hasAnalysis:!!a});const{error:o}=await this.supabase.from("plants").update({health_score:n}).eq("id",t).eq("user_id",r);if(o)throw console.error("💥 [DB] Error actualizando health score:",o),new Error("Error updating plant health score: ".concat(o.message));if(a&&i){console.log("📸 [DB] Actualizando análisis de salud en imagen:",i);const{error:s}=await this.supabase.from("plant_images").update({health_analysis:a}).eq("id",i).eq("user_id",r);s&&console.warn("⚠️ [DB] Error actualizando análisis en imagen:",s)}console.log("✅ [DB] Health score actualizado exitosamente")}catch(o){throw console.error("💥 [DB] Error en updatePlantHealthScore:",o),o}}async updatePlant(t,r){var n,a;try{const i={name:t.name,species:t.species,variety:t.variety,nickname:t.nickname,description:t.description,fun_facts:t.funFacts,location:t.location,health_score:t.healthScore,care_profile:t.careProfile,personality:t.personality,last_watered:(n=t.lastWatered)==null?void 0:n.toISOString(),last_fertilized:(a=t.lastFertilized)==null?void 0:a.toISOString()},{data:o,error:s}=await this.supabase.from("plants").update(i).eq("id",t.id).eq("user_id",r).select().single();if(s)throw s;return ma(o,t.images,t.chatHistory,t.notifications)}catch(i){throw console.error("Error updating plant:",i),i}}async deletePlant(t,r){try{const{error:n}=await this.supabase.from("plants").delete().eq("id",t).eq("user_id",r);if(n)throw n}catch(n){throw console.error("Error deleting plant:",n),n}}async sendChatMessageAndGetResponse(t,r,n){const a=await this.addChatMessage(t.id,r,n),i=await af(t,r.content),o={};i.insights&&(o.insights=i.insights),i.suggestedActions&&(o.suggestedActions=i.suggestedActions);const s={sender:"plant",content:i.content,emotion:i.emotion,timestamp:new Date,...Object.keys(o).length>0?{context:o}:{}},c=await this.addChatMessage(t.id,s,n);return[a,c]}async addChatMessage(t,r,n){try{const a={plant_id:t,user_id:n,sender:r.sender,content:r.content,emotion:r.emotion||null};r.context&&(a.context=r.context);const{data:i,error:o}=await this.supabase.from("chat_messages").insert(a).select().single();if(o)throw console.error("❌ Supabase error:",o),o;return{id:i.id,sender:i.sender,content:i.content,timestamp:new Date(i.created_at),emotion:i.emotion,context:i.context||void 0}}catch(a){throw console.error("Error adding chat message:",a),a}}async addPlantImage(t,r,n){try{const a=r.url;let i="";try{const u=new URL(a).pathname.split("/"),d=u.findIndex(f=>f==="object");d!==-1&&d+2<u.length&&(i=u.slice(d+2).join("/"))}catch(c){console.warn("Could not extract storage path from URL:",a),i="".concat(n,"/").concat(t,"/").concat(Date.now(),".jpg")}const{data:o,error:s}=await this.supabase.from("plant_images").insert({plant_id:t,user_id:n,url:a,storage_path:i,is_profile_image:r.isProfileImage,health_analysis:r.healthAnalysis}).select().single();if(s)throw s;if(!o.url)throw new Error("Image URL not returned from database.");return{id:o.id,url:o.url,timestamp:new Date(o.created_at),isProfileImage:o.is_profile_image||!1,healthAnalysis:o.health_analysis}}catch(a){throw console.error("Error adding plant image:",a),new Error("Image upload failed: ".concat(a instanceof Error?a.message:"Unknown error"))}}async setProfileImage(t,r,n){try{await this.supabase.from("plant_images").update({is_profile_image:!1}).eq("plant_id",t).eq("user_id",n);const{error:a}=await this.supabase.from("plant_images").update({is_profile_image:!0}).eq("id",r).eq("user_id",n);if(a)throw a}catch(a){throw console.error("Error setting profile image:",a),a}}async deleteImage(t,r){try{const{data:n,error:a}=await this.supabase.from("plant_images").select("storage_path").eq("id",t).eq("user_id",r).single();if(a)throw a;n!=null&&n.storage_path&&await this.supabase.storage.from("plant-images").remove([n.storage_path]);const{error:i}=await this.supabase.from("plant_images").delete().eq("id",t).eq("user_id",r);if(i)throw i}catch(n){throw console.error("Error deleting image:",n),n}}}const Dn=new Oc(pe),ha=new Oc,gr=xc((e,t)=>({plants:[],isLoading:!1,error:null,selectedPlantId:null,getPlantById:r=>t().plants.find(n=>n.id===r),setPlant:r=>{e(cr(n=>{const a=n.plants.findIndex(i=>i.id===r.id);a!==-1?n.plants[a]=r:n.plants.push(r)}))},addPlant:async(r,n,a)=>{try{const i=await ha.addPlantFromAnalysis(a,r,n);return e(cr(o=>{o.plants.unshift(i)})),Rn.invalidateOnPlantChange(a),i}catch(i){throw console.error(i),i}},updatePlant:async(r,n)=>{try{const a=await ha.updatePlant(r,n);e(cr(i=>{const o=i.plants.findIndex(s=>s.id===a.id);o!==-1&&(i.plants[o]=a)})),Rn.invalidateOnPlantChange(n)}catch(a){throw console.error(a),a}},deletePlant:async(r,n)=>{try{await ha.deletePlant(r,n),e(cr(a=>{a.plants=a.plants.filter(i=>i.id!==r)})),Rn.invalidateOnPlantChange(n)}catch(a){throw console.error(a),a}},addChatMessage:async(r,n,a)=>{e({isLoading:!0,error:null});const i=t().getPlantById(r);if(!i){e({isLoading:!1,error:"Plant not found to add message"});return}const o={id:"temp-user-".concat(Date.now()),sender:"user",content:n,timestamp:new Date};e(cr(s=>{var c;(c=s.plants.find(u=>u.id===r))==null||c.chatHistory.push(o)}));try{const[s,c]=await ha.sendChatMessageAndGetResponse(i,{sender:"user",content:n,timestamp:o.timestamp},a);e(cr(u=>{const d=u.plants.find(f=>f.id===r);d&&(d.chatHistory=[...d.chatHistory.filter(f=>f.id!==o.id),s,c]),u.isLoading=!1}))}catch(s){const c=s instanceof Error?s.message:"Failed to send message";console.error(c),e({isLoading:!1,error:c})}},addPlantImage:async(r,n,a)=>{try{const i=await ha.addPlantImage(r,{url:n,timestamp:new Date,isProfileImage:!1},a);e(cr(o=>{const s=o.plants.find(c=>c.id===r);s&&s.images.push(i)}))}catch(i){throw console.error(i),i}},selectPlant:r=>e({selectedPlantId:r}),clearError:()=>{},clearPlants:()=>e({plants:[],selectedPlantId:null})}));class Qk{async updatePlantHealthDiagnosis(t){var i,o;if(!t.images||t.images.length===0)throw new Error("Esta planta no tiene imágenes para analizar. Toma una foto primero.");const r=[...t.images].sort((s,c)=>c.timestamp.getTime()-s.timestamp.getTime())[0],{data:{session:n},error:a}=await pe.auth.getSession();if(a||!(n!=null&&n.access_token))throw console.error("💥 [Health] User session not available:",a),new Error("Usuario no autenticado. Por favor inicia sesión nuevamente.");try{const s=await fetch(r.url,{method:"HEAD"});if(!s.ok)throw new Error("Imagen no accesible: ".concat(s.status))}catch(s){throw console.error("💥 [Health] Error verificando acceso a imagen:",s),new Error("La imagen de la planta no está disponible. Intenta tomar una nueva foto.")}console.log("🔬 [Health] Llamando a update-health-diagnosis...");try{const{data:s,error:c}=await pe.functions.invoke("update-health-diagnosis",{body:{imageUrl:r.url,plantName:t.name,species:t.species},headers:{Authorization:"Bearer ".concat(n.access_token)}});if(c)throw console.error("💥 [Health] Error en función update-health-diagnosis:",c),new Error("Error en análisis: ".concat(c.message));if(!s||!s.overallHealth)throw console.error("💥 [Health] Datos incompletos del análisis:",s),new Error("El análisis no devolvió información de salud válida.");console.log("🎯 [Health] Análisis de salud completado exitosamente:",{overallHealth:s.overallHealth,confidence:s.confidence,issuesCount:((i=s.issues)==null?void 0:i.length)||0,recommendationsCount:((o=s.recommendations)==null?void 0:o.length)||0});const d={excellent:95,good:80,fair:60,poor:30}[s.overallHealth]||s.confidence||60;return console.log("📊 [Health] Nuevo score de salud calculado:",{overallHealth:s.overallHealth,numericScore:d,confidence:s.confidence}),{healthScore:d,healthAnalysis:s,updatedImage:{...r,healthAnalysis:s}}}catch(s){console.error("💥 [Health] Error en diagnóstico primario:",s),console.log("🔄 [Health] Intentando análisis de fallback...");try{if(r.healthAnalysis&&r.healthAnalysis.overallHealth){console.log("🎯 [Health] Usando análisis existente de la imagen");const c=r.healthAnalysis;return{healthScore:{excellent:95,good:80,fair:60,poor:30}[c.overallHealth]||60,healthAnalysis:c,updatedImage:r}}}catch(c){console.error("💥 [Health] Error en fallback:",c)}throw new Error("No se pudo actualizar el diagnóstico de salud. Verifica tu conexión a internet e intenta nuevamente.")}}async updatePlantHealthScore(t,r,n,a,i){try{console.log("🏥 [DB] Actualizando health score en BD:",{plantId:t,healthScore:n,hasAnalysis:!!a});const{error:o}=await pe.from("plants").update({health_score:n}).eq("id",t).eq("user_id",r);if(o)throw console.error("💥 [DB] Error actualizando health score:",o),new Error("Error updating plant health score: ".concat(o.message));if(a&&i){console.log("📸 [DB] Actualizando análisis de salud en imagen:",i);const{error:s}=await pe.from("plant_images").update({health_analysis:a}).eq("id",i).eq("user_id",r);s&&console.warn("⚠️ [DB] Error actualizando análisis en imagen:",s)}console.log("✅ [DB] Health score actualizado exitosamente")}catch(o){throw console.error("💥 [DB] Error en updatePlantHealthScore:",o),o}}}const of=new Qk,$o=()=>{const e=ko(),{addPlant:t,updatePlant:r,deletePlant:n}=gr.getState(),a=or(f=>f.user),i=a==null?void 0:a.id,{addToast:o}=Qn(),s=Rr({mutationFn:f=>{if(!i)throw new Error("User not authenticated");const{imageDataUrl:m,location:h}=f;return t(m,h,i)},onSuccess:f=>{e.invalidateQueries({queryKey:["plants",i]})},onError:f=>{console.error("Failed to create plant:",f)}}),c=Rr({mutationFn:f=>{if(!i)throw new Error("User not authenticated");return r(f,i)},onMutate:async f=>{await e.cancelQueries({queryKey:["plants",i]});const m=e.getQueryData(["plants",i]);return m&&e.setQueryData(["plants",i],m.map(h=>h.id===f.id?f:h)),{previousPlants:m}},onError:(f,m,h)=>{h!=null&&h.previousPlants&&e.setQueryData(["plants",i],h.previousPlants)},onSettled:f=>{e.invalidateQueries({queryKey:["plants",i]})}}),u=Rr({mutationFn:async({plant:f,userId:m})=>{console.log("🩺 [Mutation] Iniciando actualización de diagnóstico...");const h=await of.updatePlantHealthDiagnosis(f);return await of.updatePlantHealthScore(f.id,m,h.healthScore,h.healthAnalysis,h.updatedImage.id),console.log("✅ [Mutation] Diagnóstico actualizado exitosamente"),h},onSuccess:(f,{plant:m})=>{e.invalidateQueries({queryKey:["plants"]}),e.invalidateQueries({queryKey:["plant",m.id]}),o({type:"success",title:"Diagnóstico Actualizado",message:"Nuevo estado de salud: ".concat(f.healthScore,"%")})},onError:f=>{console.error("💥 [Mutation] Error actualizando diagnóstico:",f),o({type:"error",title:"Error en Diagnóstico",message:f.message})}}),d=Rr({mutationFn:f=>{if(!i)throw new Error("User not authenticated");return n(f,i)},onMutate:async f=>{await e.cancelQueries({queryKey:["plants",i]});const m=e.getQueryData(["plants",i]);return m&&e.setQueryData(["plants",i],m.filter(h=>h.id!==f)),{previousPlants:m}},onError:(f,m,h)=>{h!=null&&h.previousPlants&&e.setQueryData(["plants",i],h.previousPlants)},onSettled:()=>{e.invalidateQueries({queryKey:["plants",i]})}});return{createPlant:s.mutate,isCreatingPlant:s.isPending,updatePlant:c.mutate,isUpdatingPlant:c.isPending,updatePlantHealthMutation:u.mutate,isUpdatingPlantHealth:u.isPending,deletePlant:d.mutate,isDeletingPlant:d.isPending}},Jk=()=>{const[e,t]=y.useState(!1),r=ot(),{createPlant:n,isCreatingPlant:a}=$o();y.useEffect(()=>{const s=c=>{c.key==="Escape"&&t(!1)};return e&&document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s)}},[e]);const i=[{id:"camera",icon:Zt,label:"Tomar Foto",color:"bg-blue-500",action:()=>{t(!1),r(ze.toCamera())}},{id:"gallery",icon:gc,label:"Galería",color:"bg-purple-500",action:()=>o()}],o=y.useCallback(()=>{const s=document.createElement("input");s.type="file",s.accept="image/*",s.onchange=async c=>{var d;const u=(d=c.target.files)==null?void 0:d[0];if(u){const f=new FileReader;f.onload=async m=>{var g;const h=(g=m.target)==null?void 0:g.result;if(h){t(!1);const v=new Promise((p,x)=>{n({imageDataUrl:h,location:"Interior"},{onSuccess:b=>{b!=null&&b.id&&r(ze.toPlantDetail(b.id)),p(b)},onError:b=>{console.error("Failed to create plant:",b),x(b)}})});tg.promise(v,{loading:"Analizando imagen... La IA está trabajando.",success:p=>'¡Planta "'.concat(p.name,'" creada con éxito!'),error:p=>"Error: ".concat(p.message)})}},f.readAsDataURL(u)}},s.click()},[n,r]);return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"relative flex items-center",children:[l.jsx(P.button,{onClick:()=>t(!e),className:"w-12 h-12 bg-primary-500 hover:bg-primary-600 disabled:bg-primary-300 text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-200 flex items-center justify-center disabled:cursor-not-allowed",whileHover:{scale:a?1:1.05},whileTap:{scale:a?1:.95},disabled:a,"aria-label":e?"Cerrar menú":"Agregar planta","aria-expanded":e,children:l.jsx(se,{mode:"wait",children:a?l.jsx(P.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},children:l.jsx(ln,{className:"w-6 h-6 animate-spin"})},"loading"):l.jsx(P.div,{initial:{opacity:0,rotate:-180},animate:{opacity:1,rotate:e?45:0},exit:{opacity:0,rotate:180},transition:{duration:.2},children:l.jsx(pc,{className:"w-6 h-6"})},"plus")})}),e&&l.jsx(P.span,{initial:{opacity:0,x:10},animate:{opacity:1,x:16},exit:{opacity:0,x:10},transition:{duration:.2},className:"ml-3 px-3 py-1 rounded-full bg-primary-100 text-primary-700 text-xs font-medium shadow-md whitespace-nowrap z-50",children:"Agregar planta"})]}),l.jsx(se,{children:e&&l.jsx(P.div,{className:"absolute bottom-16 right-0 flex flex-col gap-3",initial:"closed",animate:"open",exit:"closed",variants:{open:{transition:{staggerChildren:.1,delayChildren:.1}},closed:{transition:{staggerChildren:.05,staggerDirection:-1}}},children:i.map((s,c)=>l.jsxs(P.button,{onClick:s.action,className:"w-12 h-12 ".concat(s.color," hover:scale-105 text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-200 flex items-center justify-center group relative"),variants:{open:{opacity:1,scale:1,y:0,transition:{delay:c*.1}},closed:{opacity:0,scale:.3,y:20,transition:{delay:(i.length-c)*.05}}},whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":s.label,children:[l.jsx(s.icon,{className:"w-5 h-5"}),l.jsx("div",{className:"absolute right-full mr-3 opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none",children:l.jsxs("div",{className:"bg-gray-900 text-white text-xs px-2 py-1 rounded-lg whitespace-nowrap",children:[s.label,l.jsx("div",{className:"absolute left-full top-1/2 -translate-y-1/2 w-0 h-0 border-l-4 border-r-0 border-t-2 border-b-2 border-transparent border-l-gray-900"})]})})]},s.id))})}),l.jsx(se,{children:e&&l.jsx(P.div,{className:"fixed inset-0 z-[-1]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>t(!1)})})]})},eP=[{icon:Li,path:De.dashboard,label:"Inicio",description:"Tu jardín personal"},{icon:Ca,path:De.gardenChat,label:"Chat IA",description:"Asistente de plantas"},{icon:Eb,path:De.settings,label:"Ajustes",description:"Configuración"}],tP=()=>{const e=up(),t=e.pathname.startsWith("/plant/");return l.jsxs(l.Fragment,{children:[l.jsx("nav",{className:"safe-bottom fixed bottom-0 left-0 right-0 z-50 glass-enhanced border-t border-contrast","data-tour":"bottom-navigation",children:l.jsx("div",{className:"flex justify-around items-center h-20 max-w-lg mx-auto px-2",children:eP.map(r=>{const n=Ik(e.pathname,r.path);return l.jsx(P.div,{className:"relative flex-1 h-full",whileTap:{scale:.92},whileHover:{scale:1.02},children:l.jsxs(Sb,{to:r.path,className:ue("touch-target relative flex flex-col items-center justify-center w-full h-full rounded-2xl transition-all duration-200","focus-contrast",n?"text-primary-700 dark:text-primary-400":"text-neutral-700 dark:text-neutral-300 hover:text-primary-600 dark:hover:text-primary-400"),"aria-label":"".concat(r.label," - ").concat(r.description),...n?{"aria-current":"page"}:{},...r.path===De.gardenChat?{"data-tour":"chat-tab"}:{},children:[l.jsx(se,{children:n&&l.jsx(P.div,{layoutId:"nav-background",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{type:"spring",stiffness:400,damping:30},className:"absolute inset-1 bg-primary-500/10 dark:bg-primary-400/10 rounded-xl"})}),l.jsx(P.div,{animate:{scale:n?1.1:1,y:n?-2:0},transition:{duration:.2},className:ue("relative z-10",n?"text-[#2A7F3E]":"text-[#888]"),children:l.jsx(r.icon,{size:24,strokeWidth:n?2.5:2,className:"drop-shadow-sm"})}),l.jsx(P.span,{animate:{scale:n?1.05:1,fontWeight:n?600:500},transition:{duration:.2},className:"text-xs mt-1 relative z-10",children:r.label}),l.jsx(se,{children:n&&l.jsx(P.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},transition:{delay:.1},className:"absolute left-1/2 -translate-x-1/2 w-1 h-1 bg-primary-500 dark:bg-primary-400 rounded-full mt-1.5"})})]})},r.path)})})}),!t&&l.jsx("div",{className:"fixed bottom-20 sm:bottom-24 right-4 sm:right-6 z-40","data-tour":"add-plant-fab",children:l.jsx(Jk,{})})]})},rP=()=>{const[e,t]=y.useState(navigator.onLine);return y.useEffect(()=>{const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r),window.addEventListener("offline",n),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}},[]),e},nP=()=>{const e=rP();return l.jsxs(se,{children:[!e&&l.jsx(P.div,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},exit:{y:-100,opacity:0},className:"fixed top-0 left-0 right-0 z-50 safe-area-top",children:l.jsx("div",{className:"bg-red-500 text-white px-4 py-2 text-center text-sm font-medium",children:l.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[l.jsx(_b,{size:16}),l.jsx("span",{children:"Sin conexión - Modo offline"})]})})}),e&&l.jsx(P.div,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},exit:{y:-100,opacity:0},className:"fixed top-0 left-0 right-0 z-50 safe-area-top",onAnimationComplete:()=>{setTimeout(()=>{const t=document.querySelector("[data-online-indicator]");t&&t.remove()},2e3)},children:l.jsx("div",{className:"bg-green-500 text-white px-4 py-2 text-center text-sm font-medium","data-online-indicator":!0,children:l.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[l.jsx(fp,{size:16}),l.jsx("span",{children:"Conexión restaurada"})]})})})]})};function aP(e,t){let r;try{r=e()}catch(a){return}return{getItem:a=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),s=(i=r.getItem(a))!=null?i:null;return s instanceof Promise?s.then(o):o(s)},setItem:(a,i)=>r.setItem(a,JSON.stringify(i,void 0)),removeItem:a=>r.removeItem(a)}}const jl=e=>t=>{try{const r=e(t);return r instanceof Promise?r:{then(n){return jl(n)(r)},catch(n){return this}}}catch(r){return{then(n){return this},catch(n){return jl(n)(r)}}}},iP=(e,t)=>(r,n,a)=>{let i={storage:aP(()=>localStorage),partialize:v=>v,version:0,merge:(v,p)=>({...p,...v}),...t},o=!1;const s=new Set,c=new Set;let u=i.storage;if(!u)return e((...v)=>{console.warn("[zustand persist middleware] Unable to update item '".concat(i.name,"', the given storage is currently unavailable.")),r(...v)},n,a);const d=()=>{const v=i.partialize({...n()});return u.setItem(i.name,{state:v,version:i.version})},f=a.setState;a.setState=(v,p)=>{f(v,p),d()};const m=e((...v)=>{r(...v),d()},n,a);a.getInitialState=()=>m;let h;const g=()=>{var v,p;if(!u)return;o=!1,s.forEach(b=>{var w;return b((w=n())!=null?w:m)});const x=((p=i.onRehydrateStorage)==null?void 0:p.call(i,(v=n())!=null?v:m))||void 0;return jl(u.getItem.bind(u))(i.name).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==i.version){if(i.migrate){const w=i.migrate(b.state,b.version);return w instanceof Promise?w.then(j=>[!0,j]):[!0,w]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,b.state];return[!1,void 0]}).then(b=>{var w;const[j,S]=b;if(h=i.merge(S,(w=n())!=null?w:m),r(h,!0),j)return d()}).then(()=>{x==null||x(h,void 0),h=n(),o=!0,c.forEach(b=>b(h))}).catch(b=>{x==null||x(void 0,b)})};return a.persist={setOptions:v=>{i={...i,...v},v.storage&&(u=v.storage)},clearStorage:()=>{u==null||u.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>g(),hasHydrated:()=>o,onHydrate:v=>(s.add(v),()=>{s.delete(v)}),onFinishHydration:v=>(c.add(v),()=>{c.delete(v)})},i.skipHydration||g(),h||m},oP=iP,sP=xc()(oP((e,t)=>({isDark:typeof window<"u"?window.matchMedia("(prefers-color-scheme: dark)").matches:!1,toggleTheme:()=>{const{isDark:r}=t(),n=!r;e({isDark:n}),Ds(n),"vibrate"in navigator&&navigator.vibrate(50)},setTheme:r=>{e({isDark:r}),Ds(r)}}),{name:"theme-storage",onRehydrateStorage:()=>e=>{e&&Ds(e.isDark)}})),Ds=e=>{if(typeof window>"u")return;const t=e?"dark":"light";document.documentElement.setAttribute("data-theme",t),e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},lP=()=>{const e=up(),{isDark:t}=sP(),r=e.pathname==="/camera",n=()=>{const i={"/":"Página de inicio - Tu jardín personal","/camera":"Cámara - Agregar nueva planta","/chat":"Chat con IA - Asistente de plantas","/garden-chat":"Chat del jardín - Consultas generales","/settings":"Configuración - Ajustes de la aplicación"},o=e.pathname.includes("/plant/")?"/plant":e.pathname,s=i[o]||i[e.pathname]||"Página",c=document.createElement("div");c.setAttribute("aria-live","polite"),c.setAttribute("aria-atomic","true"),c.setAttribute("class","sr-only"),c.textContent="Navegando a ".concat(s),document.body.appendChild(c),setTimeout(()=>{document.body.removeChild(c)},1e3)};y.useEffect(()=>{n()},[e.pathname]),y.useEffect(()=>{const i=t?"dark":"light";document.documentElement.setAttribute("data-theme",i)},[t]);const a=()=>l.jsx("a",{href:"#main-content",className:"sr-only focus:not-sr-only fixed top-4 left-4 z-50 bg-primary-600 text-white px-4 py-2 rounded-md font-medium transition-all duration-200 focus:shadow-lg",onFocus:i=>{i.currentTarget.scrollIntoView({behavior:"smooth"})},children:"Saltar al contenido principal"});return l.jsxs("div",{className:"min-h-screen bg-background text-text-primary",children:[l.jsx(a,{}),l.jsx("h1",{className:"sr-only",children:"Plantitas - Aplicación de cuidado de plantas"}),l.jsx("main",{id:"main-content",role:"main","aria-label":"Contenido principal",className:"pb-28 min-h-screen focus:outline-none",tabIndex:-1,children:l.jsx(se,{mode:"wait",children:l.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15,ease:"easeOut"},className:"w-full h-full",children:l.jsx(Nb,{})},e.pathname)})}),l.jsx("aside",{role:"complementary","aria-label":"Información de estado",children:l.jsx(nP,{})}),!r&&l.jsx("nav",{role:"navigation","aria-label":"Navegación inferior",children:l.jsx(tP,{})}),l.jsx("style",{children:"\n        @media (prefers-contrast: high) {\n          :root {\n            --color-background: #000000;\n            --color-surface: #111111;\n            --color-text-primary: #ffffff;\n            --color-text-secondary: #ffffff;\n            --color-border: #ffffff;\n            --color-accent: #00ff00;\n          }\n        }\n\n        @media (prefers-reduced-motion: reduce) {\n          * {\n            animation-duration: 0.01ms !important;\n            animation-iteration-count: 1 !important;\n            transition-duration: 0.01ms !important;\n          }\n        }\n\n        /* Screen reader only utility */\n        .sr-only {\n          position: absolute;\n          width: 1px;\n          height: 1px;\n          padding: 0;\n          margin: -1px;\n          overflow: hidden;\n          clip: rect(0, 0, 0, 0);\n          white-space: nowrap;\n          border: 0;\n        }\n\n        .sr-only.focus\\:not-sr-only:focus {\n          position: static;\n          width: auto;\n          height: auto;\n          padding: inherit;\n          margin: inherit;\n          overflow: visible;\n          clip: auto;\n          white-space: normal;\n        }\n\n        /* Enhanced focus indicators */\n        *:focus-visible {\n          outline: 3px solid var(--color-accent) !important;\n          outline-offset: 2px !important;\n          border-radius: 4px;\n        }\n\n        /* High contrast focus ring */\n        @media (prefers-contrast: high) {\n          *:focus-visible {\n            outline: 4px solid #00ff00 !important;\n            outline-offset: 3px !important;\n          }\n        }\n      "})]})};class cP extends y.Component{constructor(r){super(r);Ut(this,"handleReload",()=>{window.location.reload()});Ut(this,"handleGoHome",()=>{window.location.href="/plantitas-app/"});this.state={hasError:!1}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,n){this.setState({error:r,errorInfo:n});const a={userAgent:navigator.userAgent,platform:navigator.platform,isOnline:navigator.onLine,viewport:{width:window.innerWidth,height:window.innerHeight},url:window.location.href,timestamp:new Date().toISOString()};console.error("[ErrorBoundary] Error caught:",{error:r.message,stack:r.stack,errorInfo:n,mobileInfo:a}),console.warn("[ErrorBoundary] Production error detected:",{message:r.message,mobile:a})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:l.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-4",children:l.jsx("div",{className:"max-w-md w-full",children:l.jsxs("div",{className:"glass-effect rounded-2xl p-8 text-center",children:[l.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center",children:l.jsx(Kt,{size:32,className:"text-red-500"})}),l.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"¡Oops! Algo salió mal"}),l.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Ha ocurrido un error inesperado. No te preocupes, tus plantas están seguras."}),!1,l.jsxs("div",{className:"space-y-3",children:[l.jsxs("button",{onClick:this.handleReload,className:"w-full px-4 py-3 bg-primary-500 text-white rounded-xl font-medium ios-button flex items-center justify-center space-x-2",children:[l.jsx(Br,{size:18}),l.jsx("span",{children:"Recargar Página"})]}),l.jsxs("button",{onClick:this.handleGoHome,className:"w-full px-4 py-3 bg-gray-600 text-white rounded-xl font-medium ios-button flex items-center justify-center space-x-2",children:[l.jsx(Li,{size:18}),l.jsx("span",{children:"Ir al Inicio"})]})]}),l.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-4",children:"Si el problema persiste, intenta limpiar el caché del navegador."})]})})}):this.props.children}}const uP=()=>{const e=or(t=>t.user);return sp({queryKey:["plants",e==null?void 0:e.id],queryFn:async()=>e?Dn.getUserPlantSummaries(e.id):Promise.resolve([]),enabled:!!e,staleTime:Dr.QUERY.STALE_TIME.MEDIUM,gcTime:Dr.QUERY.GC_TIME.LONG,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!0,placeholderData:[]})},sf=e=>typeof e=="boolean"?"".concat(e):e===0?"0":e,lf=fe,Tc=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return lf(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(u=>{const d=r==null?void 0:r[u],f=i==null?void 0:i[u];if(d===null)return null;const m=sf(d)||sf(f);return a[u][m]}),s=r&&Object.entries(r).reduce((u,d)=>{let[f,m]=d;return m===void 0||(u[f]=m),u},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((u,d)=>{let{class:f,className:m,...h}=d;return Object.entries(h).every(g=>{let[v,p]=g;return Array.isArray(p)?p.includes({...i,...s}[v]):{...i,...s}[v]===p})?[...u,f,m]:u},[]);return lf(e,o,c,r==null?void 0:r.class,r==null?void 0:r.className)},dP=Tc("overflow-hidden transition-all duration-300",{variants:{variant:{default:["bg-white/90 border border-neutral-200","dark:bg-neutral-900/90 dark:border-neutral-700","shadow-md hover:shadow-lg"],glass:["glass","hover:shadow-glass-lg","border-neutral-200/50 dark:border-neutral-700/50"],elevated:["bg-white border border-neutral-100","dark:bg-neutral-800 dark:border-neutral-700","shadow-lg hover:shadow-xl"],outline:["bg-transparent border-2 border-neutral-200","dark:border-neutral-700","hover:border-primary-300 dark:hover:border-primary-600"],ghost:["bg-transparent border-none","hover:bg-neutral-50 dark:hover:bg-neutral-900/50"]},size:{sm:"p-4",default:"p-6",lg:"p-8",xl:"p-10"},radius:{none:"rounded-none",sm:"rounded-lg",default:"rounded-xl",lg:"rounded-2xl",full:"rounded-3xl"},interactive:{true:"cursor-pointer",false:""}},defaultVariants:{variant:"default",size:"default",radius:"default",interactive:!1}}),Et=I.forwardRef(({className:e,variant:t,size:r,radius:n,interactive:a,hover:i=!1,loading:o=!1,children:s,ariaLabel:c,...u},d)=>l.jsx(P.div,{whileHover:a&&!o?{scale:i?1.02:1.01,y:i?-4:-2}:void 0,whileTap:a&&!o?{scale:.98}:void 0,transition:{duration:.2,ease:[.4,0,.2,1]},className:ue(dP({variant:t,size:r,radius:n,interactive:a}),o&&"animate-pulse",e),ref:d,...u,children:o?l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"h-4 bg-neutral-200 dark:bg-neutral-700 rounded animate-shimmer"}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("div",{className:"h-3 bg-neutral-200 dark:bg-neutral-700 rounded animate-shimmer"}),l.jsx("div",{className:"h-3 bg-neutral-200 dark:bg-neutral-700 rounded w-4/5 animate-shimmer"})]})]}):s}));Et.displayName="Card";const zo=I.forwardRef(({className:e,...t},r)=>l.jsx("div",{ref:r,className:ue("flex flex-col space-y-1.5 pb-4",e),...t}));zo.displayName="CardHeader";const Ic=I.forwardRef(({className:e,...t},r)=>l.jsx("h3",{ref:r,className:ue("text-xl font-semibold leading-tight text-neutral-900 dark:text-neutral-100",e),...t}));Ic.displayName="CardTitle";const fP=I.forwardRef(({className:e,...t},r)=>l.jsx("p",{ref:r,className:ue("text-sm text-neutral-600 dark:text-neutral-400 leading-relaxed",e),...t}));fP.displayName="CardDescription";const xr=I.forwardRef(({className:e,...t},r)=>l.jsx("div",{ref:r,className:ue("",e),...t}));xr.displayName="CardContent";const xg=I.forwardRef(({className:e,...t},r)=>l.jsx("div",{ref:r,className:ue("flex items-center pt-4 mt-4 border-t border-neutral-200 dark:border-neutral-700",e),...t}));xg.displayName="CardFooter";const pa=new Set,gi=new Map,Mc=({src:e,alt:t,className:r="",fallback:n,onLoad:a,onError:i,priority:o=!1,sizes:s="(max-width: 768px) 100vw, 50vw"})=>{const[c,u]=y.useState(()=>pa.has(e)),[d,f]=y.useState(!1),m=y.useRef(null);y.useEffect(()=>{if(o&&!pa.has(e)&&!gi.has(e)){const v=new Image;v.src=e,v.onload=()=>{pa.add(e),gi.set(e,v)},v.onerror=()=>{gi.delete(e)},gi.set(e,v)}},[e,o]);const h=y.useCallback(()=>{pa.add(e),u(!0),a==null||a()},[a,e]),g=y.useCallback(()=>{pa.delete(e),f(!0),i==null||i()},[i,e]);return d&&n?l.jsx(l.Fragment,{children:n}):d?l.jsx("div",{className:"bg-gray-200 dark:bg-gray-700 flex items-center justify-center ".concat(r),children:l.jsx("span",{className:"text-gray-400 text-sm",children:"No image"})}):l.jsxs("div",{className:"relative overflow-hidden ".concat(r),children:[l.jsx(se,{children:!c&&l.jsx(P.div,{initial:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"absolute inset-0 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 dark:from-gray-700 dark:via-gray-600 dark:to-gray-700 animate-pulse"})}),l.jsx(P.img,{ref:m,src:e,alt:t,className:"w-full h-full object-cover ".concat(c?"opacity-100":"opacity-0"),loading:o?"eager":"lazy",decoding:"async",fetchPriority:o?"high":"low",sizes:s,onLoad:h,onError:g,initial:{opacity:0},animate:{opacity:c?1:0},transition:{duration:.15}})]})},mP=y.memo(({score:e})=>{const t=y.useMemo(()=>e>=80?{color:"bg-green-400",textColor:"text-green-600 dark:text-green-400",icon:l.jsx(Ve,{className:"w-4 h-4 mr-1 text-green-400"}),status:"Excelente"}:e>=60?{color:"bg-yellow-300",textColor:"text-yellow-600 dark:text-yellow-400",icon:l.jsx(Lr,{className:"w-4 h-4 mr-1 text-yellow-400"}),status:"Buena"}:{color:"bg-red-300",textColor:"text-red-600 dark:text-red-400",icon:l.jsx(Kt,{className:"w-4 h-4 mr-1 text-red-400"}),status:"Atención"},[e]);return l.jsxs("div",{className:"flex items-center gap-3 w-full",children:[l.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[l.jsx("div",{className:"relative w-24 h-2 bg-neutral-100 dark:bg-neutral-800 rounded-full overflow-hidden",children:l.jsx(P.div,{className:"absolute top-0 left-0 h-full rounded-full ".concat(t.color),initial:{width:0},animate:{width:"".concat(e,"%")},transition:{duration:.5,ease:"easeOut"}})}),l.jsxs("span",{className:"text-xs font-semibold text-neutral-500 dark:text-neutral-400",children:[e,"%"]})]}),l.jsxs("div",{className:"flex items-center gap-1 text-xs px-2 py-0.5 rounded-full bg-neutral-50 dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-700",children:[t.icon,l.jsx("span",{className:t.textColor,children:t.status})]})]})});mP.displayName="PlantHealthIndicator";const bg=y.memo(({plant:e,index:t})=>{const r=ot(),n=ko(),{needsWatering:a,isFavorite:i}=y.useMemo(()=>{const d=e.lastWatered&&e.wateringFrequency?new Date().getTime()-new Date(e.lastWatered).getTime()>e.wateringFrequency*24*60*60*1e3:!e.lastWatered,f=e.healthScore>=80;return{needsWatering:d,isFavorite:f}},[e.lastWatered,e.wateringFrequency,e.healthScore]),o=()=>{n.prefetchQuery({queryKey:["plant",e.id],queryFn:async()=>{var g,v,p,x,b;const{supabase:d}=await dc(async()=>{const{supabase:w}=await Promise.resolve().then(()=>Xb);return{supabase:w}},[]),{data:f,error:m}=await d.from("plants").select("\n            *,\n            plant_images(*)\n          ").eq("id",e.id).single();if(m)throw m.code==="PGRST116"?new Error("Planta no encontrada."):new Error("Error al cargar la información de la planta.");const h=f;return{id:h.id,name:h.name,species:h.species,description:(g=h.description)!=null?g:void 0,funFacts:(v=h.fun_facts)!=null?v:void 0,variety:(p=h.variety)!=null?p:void 0,nickname:(x=h.nickname)!=null?x:void 0,location:h.location,plantEnvironment:h.plant_environment,lightRequirements:h.light_requirements,dateAdded:new Date(h.date_added),lastWatered:h.last_watered?new Date(h.last_watered):void 0,lastFertilized:h.last_fertilized?new Date(h.last_fertilized):void 0,healthScore:(b=h.health_score)!=null?b:0,careProfile:h.care_profile,personality:h.personality,images:h.plant_images.map(w=>{var j,S;return{id:w.id,url:(j=w.url)!=null?j:"",timestamp:new Date(w.created_at),isProfileImage:(S=w.is_profile_image)!=null?S:!1,healthAnalysis:w.health_analysis}}),chatHistory:[],notifications:[]}},staleTime:1e3*60*5})},s=()=>r(ze.toPlantDetail(e.id)),c=Math.min(t,4),u=t<8;return l.jsx(P.div,{initial:u?{opacity:0,y:10}:{opacity:1,y:0},animate:{opacity:1,y:0},transition:u?{delay:c*.02,duration:.2,ease:"easeOut"}:{duration:0},whileHover:{y:-1},className:"group",children:l.jsxs(Et,{variant:"glass",size:"sm",radius:"lg",interactive:!0,hover:!0,onClick:s,onMouseEnter:o,className:"overflow-hidden border-2 hover:border-primary-300 dark:hover:border-primary-600 transition-all duration-200 p-4 mb-4",children:[l.jsx(zo,{className:"pb-2 flex-shrink-0 space-y-0",children:l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsxs("div",{className:"relative w-20 h-20 rounded-[8px] overflow-hidden bg-gradient-to-br from-primary-50 to-primary-100 dark:from-primary-950 dark:to-primary-900 flex-shrink-0 border border-primary-200 dark:border-primary-800",children:[e.profileImageUrl?l.jsx(Mc,{src:e.profileImageUrl,alt:e.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200",priority:t<4,sizes:"(max-width: 768px) 20vw, 10vw"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center text-primary-400 dark:text-primary-600",children:l.jsx(Lr,{size:24})}),l.jsx(se,{children:i&&l.jsx(P.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},transition:{duration:.2},className:"absolute -top-1 -right-1 w-6 h-6 bg-error-500 rounded-full flex items-center justify-center shadow-lg",children:l.jsx(mp,{size:12,className:"text-white fill-current"})})}),l.jsx(se,{children:a&&l.jsx(P.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},transition:{duration:.2},className:"absolute -bottom-1 -right-1 w-6 h-6 bg-warning-500 rounded-full flex items-center justify-center shadow-lg",children:l.jsx(P.div,{animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},children:l.jsx(Po,{size:12,className:"text-white"})})})})]}),l.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:[l.jsx(Ic,{className:"text-2xl font-bold text-neutral-900 dark:text-neutral-100 truncate mb-0 group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors",title:e.nickname||e.name,children:e.nickname||e.name}),l.jsx("p",{className:"text-xs text-[#555] truncate mb-[6px]",title:e.species,children:e.species}),l.jsx("div",{className:"flex items-center text-xs text-neutral-500 dark:text-neutral-500",children:l.jsxs("span",{className:"px-2 py-1 bg-neutral-100 dark:bg-neutral-800 rounded-md",children:["📍 ",e.location]})})]})]})}),l.jsxs(xr,{className:"pt-2 pb-0",children:[l.jsxs("div",{className:"flex items-center gap-2 w-full",children:[l.jsx("div",{className:"relative w-24 h-[6px] bg-[#EEE] rounded-full overflow-hidden flex-shrink-0",children:l.jsx(P.div,{className:"absolute top-0 left-0 h-full rounded-full ".concat(e.healthScore>=80?"bg-green-400":e.healthScore>=60?"bg-yellow-300":"bg-red-300"),initial:{width:0},animate:{width:"".concat(e.healthScore,"%")},transition:{duration:.5,ease:"easeOut"}})}),l.jsxs("span",{className:"text-xs font-semibold text-neutral-500 dark:text-neutral-400 ml-1 min-w-[32px] text-right",children:[e.healthScore,"%"]}),l.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-semibold ml-auto ".concat(e.healthScore>=80?"bg-green-500/10 text-green-700":e.healthScore>=60?"bg-yellow-400/10 text-yellow-700":"bg-red-400/10 text-red-700"),style:{padding:"4px 8px"},children:[e.healthScore>=80?l.jsx(Ve,{className:"w-4 h-4 mr-1 text-green-400"}):e.healthScore>=60?l.jsx(Lr,{className:"w-4 h-4 mr-1 text-yellow-400"}):l.jsx(Kt,{className:"w-4 h-4 mr-1 text-red-400"}),l.jsx("span",{children:e.healthScore>=80?"Excelente":e.healthScore>=60?"Buena":"Atención"})]})]}),e.healthScore<40&&l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 bg-error-100 text-error-700 dark:bg-error-900/30 dark:text-error-300 rounded-full text-xs font-semibold",children:[l.jsx(Kt,{className:"w-3 h-3 mr-1","aria-label":"Atención"}),"¡Atención!"]}),l.jsx("span",{className:"text-xs text-error-600 dark:text-error-300",children:"Salud muy baja"})]})]}),l.jsx(P.div,{className:"absolute inset-0 bg-gradient-to-t from-primary-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none",initial:!1})]})})});bg.displayName="PlantCard";function X({className:e,...t}){return l.jsx("div",{className:ue("animate-shimmer rounded-md","bg-[linear-gradient(110deg,var(--color-neutral-200)_8%,var(--color-neutral-300)_18%,var(--color-neutral-200)_33%)]","dark:bg-[linear-gradient(110deg,var(--color-neutral-800)_8%,var(--color-neutral-700)_18%,var(--color-neutral-800)_33%)]","bg-[length:200%_100%]",e),...t})}const hP=()=>l.jsxs(Et,{variant:"elevated",size:"default",className:"overflow-hidden",children:[l.jsxs("div",{className:"flex items-start p-4 space-x-4",children:[l.jsx(X,{className:"w-20 h-20 rounded-lg flex-shrink-0"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs(zo,{className:"p-0",children:[l.jsx(X,{className:"h-6 w-3/4"}),l.jsx(X,{className:"h-4 w-1/2 mt-2"})]}),l.jsx(xr,{className:"p-0 mt-3",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(X,{className:"w-16 h-1.5"}),l.jsx(X,{className:"w-8 h-3"})]})})]})]}),l.jsx(xg,{className:"bg-neutral-50 dark:bg-neutral-800/50 p-2 border-t border-subtle",children:l.jsxs("div",{className:"flex justify-between items-center w-full",children:[l.jsx(X,{className:"h-4 w-1/3"}),l.jsx(X,{className:"w-8 h-8 rounded"})]})})]}),pP=Tc("touch-target inline-flex items-center justify-center font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{primary:["bg-primary-600 text-white","hover:bg-primary-700","active:bg-primary-800","focus-visible:ring-primary-500/30","shadow-md hover:shadow-lg","disabled:bg-neutral-300 disabled:text-neutral-500","dark:bg-primary-500 dark:hover:bg-primary-400"],secondary:["bg-neutral-100 text-neutral-800 border border-neutral-300","hover:bg-neutral-200 hover:border-neutral-400","active:bg-neutral-300","focus-visible:ring-neutral-500/30","dark:bg-neutral-800 dark:text-neutral-100 dark:border-neutral-600","dark:hover:bg-neutral-700 dark:hover:border-neutral-500","shadow-sm hover:shadow-md"],outline:["bg-white text-neutral-800 border-2 border-neutral-800","hover:bg-neutral-50 hover:text-neutral-900","active:bg-neutral-100","focus-visible:ring-primary-500/30","dark:bg-neutral-950 dark:text-neutral-100 dark:border-neutral-200","dark:hover:bg-neutral-900 dark:hover:text-neutral-50"],ghost:["bg-transparent text-neutral-700 border border-transparent","hover:bg-neutral-100 hover:text-neutral-800","active:bg-neutral-200","focus-visible:ring-neutral-500/30","dark:text-neutral-300 dark:hover:bg-neutral-800 dark:hover:text-neutral-200","dark:active:bg-neutral-700"],destructive:["bg-error-600 text-white","hover:bg-error-700","active:bg-error-800","focus-visible:ring-error-500/30","shadow-md hover:shadow-lg","dark:bg-error-500 dark:text-black"],success:["bg-success-600 text-white","hover:bg-success-700","active:bg-success-800","focus-visible:ring-success-500/30","shadow-md hover:shadow-lg","dark:bg-success-500 dark:text-black"],warning:["bg-warning-600 text-white","hover:bg-warning-700","active:bg-warning-800","focus-visible:ring-warning-500/30","shadow-md hover:shadow-lg","dark:bg-warning-500 dark:text-black"],glass:["glass-enhanced text-neutral-800 border border-contrast","hover:backdrop-blur-xl hover:bg-contrast-surface","active:scale-[0.98]","focus-visible:ring-primary-500/30","dark:text-neutral-100"]},size:{xs:"h-8 px-3 text-xs rounded-md",sm:"h-10 px-4 text-sm rounded-lg",default:"h-11 px-6 text-base rounded-xl",lg:"h-12 px-8 text-lg rounded-xl",xl:"h-14 px-10 text-xl rounded-2xl",icon:"h-11 w-11 rounded-xl","icon-sm":"h-10 w-10 rounded-lg","icon-lg":"h-12 w-12 rounded-xl"},fullWidth:{true:"w-full",false:"w-auto"}},defaultVariants:{variant:"primary",size:"default",fullWidth:!1}}),Y=I.forwardRef(({className:e,variant:t,size:r,fullWidth:n,loading:a=!1,leftIcon:i,rightIcon:o,children:s,disabled:c,...u},d)=>{const f=c||a;return l.jsxs(P.button,{whileTap:f?void 0:{scale:.96},whileHover:f?void 0:{scale:1.02},transition:{duration:.15,ease:[.4,0,.2,1]},className:ue(pP({variant:t,size:r,fullWidth:n,className:e})),disabled:f,ref:d,...u,children:[a&&l.jsx(P.div,{className:"mr-2",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:l.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeDasharray:"32",strokeDashoffset:"32",opacity:"0.3"}),l.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeDasharray:"8",strokeDashoffset:"8"})]})}),i&&!a&&l.jsx("span",{className:"mr-2 -ml-1",children:i}),l.jsx("span",{className:ue("flex items-center justify-center",a&&"opacity-70"),"aria-hidden":a?"true":void 0,children:Array.isArray(s)?s.filter(m=>typeof m=="string"||typeof m=="number"||I.isValidElement(m)):typeof s=="string"||typeof s=="number"||I.isValidElement(s)?s:null}),o&&l.jsx("span",{className:"ml-2 -mr-1",children:o})]})});Y.displayName="Button";const gP=Tc("w-full transition-all duration-200 outline-none disabled:cursor-not-allowed disabled:opacity-50",{variants:{variant:{default:["bg-white border border-neutral-300","dark:bg-neutral-900 dark:border-neutral-600","focus:border-primary-500 dark:focus:border-primary-400","focus:ring-2 focus:ring-primary-500/20"],filled:["bg-neutral-100 border border-transparent","dark:bg-neutral-800 dark:border-transparent","focus:bg-white focus:border-primary-500","dark:focus:bg-neutral-900 dark:focus:border-primary-400","focus:ring-2 focus:ring-primary-500/20"],glass:["glass border-neutral-200/50","dark:border-neutral-700/50","focus:border-primary-500/70 dark:focus:border-primary-400/70","focus:ring-2 focus:ring-primary-500/20"]},size:{sm:"h-10 px-3 text-sm rounded-lg",default:"h-12 px-4 text-base rounded-xl",lg:"h-14 px-5 text-lg rounded-xl"},state:{default:"",error:"border-error-500 focus:border-error-500 focus:ring-error-500/20",success:"border-success-500 focus:border-success-500 focus:ring-success-500/20",warning:"border-warning-500 focus:border-warning-500 focus:ring-warning-500/20"}},defaultVariants:{variant:"default",size:"default",state:"default"}}),Ro=I.forwardRef(({className:e,variant:t,size:r,state:n,label:a,helperText:i,errorMessage:o,successMessage:s,leftIcon:c,rightIcon:u,loading:d=!1,showPasswordToggle:f=!1,floatingLabel:m=!1,type:h,disabled:g,value:v,defaultValue:p,...x},b)=>{const[w,j]=y.useState(!1),[S,N]=y.useState(!1),[k,A]=y.useState(v||p||""),C=y.useRef(null),D=y.useCallback(Q=>{C.current=Q,typeof b=="function"?b(Q):b&&(b.current=Q)},[b]),T=o?"error":s?"success":n,O=!!k||w,B=f?S?"text":"password":h;y.useEffect(()=>{v!==void 0&&A(v)},[v]);const Z=Q=>{var V;j(!0),(V=x.onFocus)==null||V.call(x,Q)},z=Q=>{var V;j(!1),(V=x.onBlur)==null||V.call(x,Q)},U=Q=>{var V;A(Q.target.value),(V=x.onChange)==null||V.call(x,Q)},q=()=>{var Q;(Q=C.current)==null||Q.focus()};return l.jsxs("div",{className:"w-full",children:[l.jsxs("div",{className:"relative",children:[a&&!m&&l.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-2",children:a}),l.jsxs("div",{className:"relative",children:[c&&l.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-neutral-500 dark:text-neutral-400 pointer-events-none z-10",children:c}),a&&m&&l.jsx(P.label,{onClick:q,animate:{scale:O?.85:1,y:O?-24:0,x:O?4:c?36:16},transition:{duration:.2,ease:[.4,0,.2,1]},className:ue("absolute left-0 top-1/2 -translate-y-1/2 text-neutral-500 dark:text-neutral-400 pointer-events-none z-10 origin-left",O&&"text-primary-600 dark:text-primary-400","cursor-text"),children:a}),l.jsx("input",{ref:D,type:B,value:k,disabled:g||d,className:ue(gP({variant:t,size:r,state:T}),c&&"pl-10",(u||f||d)&&"pr-10",m&&O&&"pt-6 pb-2",(!r||r==="default")&&"py-[12px]","placeholder-[#777]",e),style:{...x.style},onFocus:Z,onBlur:z,onChange:U,...x}),l.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex items-center space-x-1",children:[d&&l.jsx(P.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-4 h-4 text-neutral-500",children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"none",className:"w-full h-full",children:l.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeDasharray:"8",strokeDashoffset:"8"})})}),!d&&T==="error"&&l.jsx(It,{className:"w-4 h-4 text-error-500"}),!d&&T==="success"&&l.jsx(hr,{className:"w-4 h-4 text-success-500"}),f&&!d&&l.jsx("button",{type:"button",onClick:()=>N(!S),className:"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-200 transition-colors",tabIndex:-1,children:S?l.jsx(Ab,{className:"w-4 h-4"}):l.jsx(sl,{className:"w-4 h-4"})}),u&&!d&&l.jsx("div",{className:"text-neutral-500 dark:text-neutral-400",children:u})]})]}),l.jsx(se,{children:w&&l.jsx(P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.15},className:ue("absolute inset-0 rounded-xl pointer-events-none",T==="error"&&"ring-2 ring-error-500/20",T==="success"&&"ring-2 ring-success-500/20",T==="default"&&"ring-2 ring-primary-500/20")})})]}),l.jsx(se,{mode:"wait",children:(i||o||s)&&l.jsxs(P.div,{initial:{opacity:0,y:-8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.2},className:"mt-2 text-sm flex items-center space-x-1",children:[o&&l.jsxs(l.Fragment,{children:[l.jsx(It,{className:"w-4 h-4 text-error-500 flex-shrink-0"}),l.jsx("span",{className:"text-error-600 dark:text-error-400",children:o})]}),s&&!o&&l.jsxs(l.Fragment,{children:[l.jsx(hr,{className:"w-4 h-4 text-success-500 flex-shrink-0"}),l.jsx("span",{className:"text-success-600 dark:text-success-400",children:s})]}),i&&!o&&!s&&l.jsx("span",{className:"text-neutral-600 dark:text-neutral-400",children:i})]})})]})});Ro.displayName="Input";const vP={default:ln,ai:mc,camera:Zt,upload:ll,download:Tb,sync:dp,search:Ob,save:Cb,delete:hp,chat:Ka},yP={sm:{icon:"w-4 h-4",text:"text-sm",gap:"gap-2"},md:{icon:"w-5 h-5",text:"text-base",gap:"gap-3"},lg:{icon:"w-6 h-6",text:"text-lg",gap:"gap-4"}},xP=({message:e,type:t="default",size:r="md",className:n=""})=>{const a=vP[t],i=yP[r];return l.jsxs("div",{className:"flex items-center justify-center ".concat(i.gap," ").concat(n),children:[l.jsx(P.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"flex-shrink-0",children:l.jsx(a,{className:"".concat(i.icon," text-primary-500")})}),l.jsx("span",{className:"".concat(i.text," text-gray-600 dark:text-gray-400 font-medium"),children:e})]})},bP={LoadingPlants:e=>l.jsx(xP,{message:"Cargando tu jardín...",type:"default",...e})},Sl=({children:e,content:t,position:r="top",delay:n=300,disabled:a=!1,className:i=""})=>{const[o,s]=y.useState(!1),[c,u]=y.useState({x:0,y:0}),d=y.useRef(null),f=y.useRef(),m=()=>{a||(f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{if(d.current){const p=d.current.getBoundingClientRect(),x=window.pageYOffset||document.documentElement.scrollTop,b=window.pageXOffset||document.documentElement.scrollLeft;let w,j;switch(r){case"top":w=p.left+b+p.width/2,j=p.top+x-8;break;case"bottom":w=p.left+b+p.width/2,j=p.bottom+x+8;break;case"left":w=p.left+b-8,j=p.top+x+p.height/2;break;case"right":w=p.right+b+8,j=p.top+x+p.height/2;break;default:w=p.left+b+p.width/2,j=p.top+x-8}u({x:w,y:j}),s(!0)}},n))},h=()=>{f.current&&clearTimeout(f.current),s(!1)};y.useEffect(()=>()=>{f.current&&clearTimeout(f.current)},[]);const g=()=>{const p="absolute z-[9999] px-2 py-1 text-xs font-medium text-white bg-gray-900 dark:bg-gray-700 rounded-md shadow-lg pointer-events-none max-w-xs";switch(r){case"top":return"".concat(p," -translate-x-1/2 -translate-y-full");case"bottom":return"".concat(p," -translate-x-1/2");case"left":return"".concat(p," -translate-x-full -translate-y-1/2");case"right":return"".concat(p," -translate-y-1/2");default:return"".concat(p," -translate-x-1/2 -translate-y-full")}},v=()=>{const p="absolute w-2 h-2 bg-gray-900 dark:bg-gray-700 transform rotate-45";switch(r){case"top":return"".concat(p," left-1/2 -translate-x-1/2 top-full -translate-y-1/2");case"bottom":return"".concat(p," left-1/2 -translate-x-1/2 -top-1");case"left":return"".concat(p," top-1/2 -translate-y-1/2 left-full -translate-x-1/2");case"right":return"".concat(p," top-1/2 -translate-y-1/2 -left-1");default:return"".concat(p," left-1/2 -translate-x-1/2 top-full -translate-y-1/2")}};return l.jsxs(l.Fragment,{children:[l.jsx("div",{ref:d,onMouseEnter:m,onMouseLeave:h,onFocus:m,onBlur:h,className:"inline-block ".concat(i),children:e}),typeof document<"u"&&uc.createPortal(l.jsx(se,{children:o&&l.jsxs(P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.15},className:g(),style:{left:c.x,top:c.y},children:[t,l.jsx("div",{className:v()})]})}),document.body)]})},wP={network:{icon:fp,color:"text-orange-500",bgColor:"bg-orange-50 dark:bg-orange-900/20",borderColor:"border-orange-200 dark:border-orange-800",defaultActions:[{label:"Reintentar",action:"retry"},{label:"Verificar conexión",action:"help"}]},validation:{icon:Kt,color:"text-amber-500",bgColor:"bg-amber-50 dark:bg-amber-900/20",borderColor:"border-amber-200 dark:border-amber-800",defaultActions:[{label:"Corregir",action:"retry"}]},server:{icon:Kt,color:"text-red-500",bgColor:"bg-red-50 dark:bg-red-900/20",borderColor:"border-red-200 dark:border-red-800",defaultActions:[{label:"Reintentar",action:"retry"},{label:"Reportar problema",action:"help"}]},unknown:{icon:Ib,color:"text-gray-500",bgColor:"bg-gray-50 dark:bg-gray-900/20",borderColor:"border-gray-200 dark:border-gray-800",defaultActions:[{label:"Reintentar",action:"retry"}]}},jP=({title:e,message:t,type:r="unknown",onRetry:n,onDismiss:a,actions:i,className:o=""})=>{const s=wP[r],c=s.icon,u=f=>{switch(f){case"retry":n==null||n();break;case"help":console.log("Help requested for error type:",r);break}},d=()=>i?i.map((f,m)=>l.jsx(Y,{variant:f.variant||"outline",size:"sm",onClick:f.onClick,children:f.label},m)):s.defaultActions.map((f,m)=>l.jsxs(Y,{variant:m===0?"primary":"outline",size:"sm",onClick:()=>u(f.action),disabled:f.action==="retry"&&!n,children:[f.action==="retry"&&l.jsx(Br,{className:"w-4 h-4 mr-1"}),f.action==="help"&&l.jsx(Mb,{className:"w-4 h-4 mr-1"}),f.label]},m));return l.jsx(P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"\n        ".concat(s.bgColor," \n        ").concat(s.borderColor," \n        border rounded-lg p-4 \n        ").concat(o,"\n      "),children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"".concat(s.color," flex-shrink-0 mt-0.5"),children:l.jsx(c,{className:"w-5 h-5"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-1",children:e}),l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:t}),l.jsx("div",{className:"flex flex-wrap gap-2",children:d()})]}),a&&l.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors p-1 flex-shrink-0","aria-label":"Cerrar error",children:l.jsx(Sr,{className:"w-4 h-4"})})]})})},SP={LoadingPlantsError:e=>l.jsx(jP,{type:"server",title:"Error al Cargar Plantas",message:"No se pudieron cargar tus plantas. Intenta refrescar la página.",...e})},NP=({isOpen:e,onComplete:t,onSkip:r,steps:n})=>{const[a,i]=y.useState(0),[o,s]=y.useState(null),[c,u]=y.useState({x:0,y:0}),d=n[a],f=a===n.length-1,m=a===0;y.useEffect(()=>{if(!e||!(d!=null&&d.target))return;const p=document.querySelector(d.target);if(p){s(p);const x=p.getBoundingClientRect(),b=window.pageYOffset||document.documentElement.scrollTop,w=window.pageXOffset||document.documentElement.scrollLeft;let j,S;switch(d.position){case"top":j=x.left+w+x.width/2,S=x.top+b-20;break;case"bottom":j=x.left+w+x.width/2,S=x.bottom+b+20;break;case"left":j=x.left+w-20,S=x.top+b+x.height/2;break;case"right":j=x.right+w+20,S=x.top+b+x.height/2;break;default:j=window.innerWidth/2,S=window.innerHeight/2}u({x:j,y:S}),p.scrollIntoView({behavior:"smooth",block:"center"})}else s(null),u({x:window.innerWidth/2,y:window.innerHeight/2})},[e,d,a]);const h=()=>{f?t():i(p=>p+1)},g=()=>{m||i(p=>p-1)},v=()=>{if(!(d!=null&&d.position)||d.position==="center")return"-translate-x-1/2 -translate-y-1/2";switch(d.position){case"top":return"-translate-x-1/2 -translate-y-full";case"bottom":return"-translate-x-1/2";case"left":return"-translate-x-full -translate-y-1/2";case"right":return"-translate-y-1/2";default:return"-translate-x-1/2 -translate-y-1/2"}};return e?l.jsx(se,{children:l.jsxs("div",{className:"fixed inset-0 z-[9999]",children:[l.jsx("div",{className:"absolute inset-0 bg-black/60"}),o&&l.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute pointer-events-none",style:{left:o.getBoundingClientRect().left+window.pageXOffset,top:o.getBoundingClientRect().top+window.pageYOffset,width:o.getBoundingClientRect().width,height:o.getBoundingClientRect().height,boxShadow:"0 0 0 9999px rgba(0, 0, 0, 0.6), 0 0 20px rgba(34, 197, 94, 0.5)",borderRadius:"8px"}}),l.jsxs(P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"absolute bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 max-w-sm ".concat(v()),style:{left:c.x,top:c.y},children:[l.jsxs("div",{className:"flex items-start justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Ve,{className:"w-5 h-5 text-green-500"}),l.jsxs("span",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:["Paso ",a+1," de ",n.length]})]}),l.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors","aria-label":"Omitir tour",children:l.jsx(Sr,{className:"w-4 h-4"})})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:d.title}),l.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm leading-relaxed",children:d.description})]}),d.action&&l.jsx("div",{className:"mb-4",children:l.jsx(Y,{variant:"outline",size:"sm",onClick:d.action.onClick,className:"w-full",children:d.action.label})}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs(Y,{variant:"ghost",size:"sm",onClick:g,disabled:m,className:"flex items-center gap-1",children:[l.jsx(pp,{className:"w-4 h-4"}),"Anterior"]}),l.jsx("div",{className:"flex gap-1",children:n.map((p,x)=>l.jsx("div",{className:"w-2 h-2 rounded-full transition-colors ".concat(x===a?"bg-green-500":x<a?"bg-green-300":"bg-gray-300")},x))}),l.jsxs(Y,{size:"sm",onClick:h,className:"flex items-center gap-1",children:[f?"Finalizar":"Siguiente",!f&&l.jsx(gp,{className:"w-4 h-4"})]})]}),l.jsx("div",{className:"mt-4 text-center",children:l.jsx("button",{onClick:r,className:"text-xs text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 transition-colors",children:"Omitir tour"})})]})]})}):null},vi="1.0.0",cf="plantitas-onboarding-state",kP=()=>{const e=ot(),[t,r]=y.useState(()=>{try{const d=localStorage.getItem(cf);if(d){const f=JSON.parse(d);return f.currentVersion!==vi?{hasCompletedTour:!1,hasAddedFirstPlant:!1,hasUsedChat:!1,currentVersion:vi}:f}}catch(d){console.warn("Error loading onboarding state:",d)}return{hasCompletedTour:!1,hasAddedFirstPlant:!1,hasUsedChat:!1,currentVersion:vi}});y.useEffect(()=>{try{localStorage.setItem(cf,JSON.stringify(t))}catch(d){console.warn("Error saving onboarding state:",d)}},[t]);const n=d=>{r(f=>({...f,...d}))};return{state:t,shouldShowTour:()=>!t.hasCompletedTour,completeTour:()=>{n({hasCompletedTour:!0})},markFirstPlantAdded:()=>{n({hasAddedFirstPlant:!0})},markChatUsed:()=>{n({hasUsedChat:!0})},resetOnboarding:()=>{r({hasCompletedTour:!1,hasAddedFirstPlant:!1,hasUsedChat:!1,currentVersion:vi})},getTourSteps:()=>[{id:"welcome",title:"¡Bienvenido a Plantitas! 🌱",description:"Tu asistente personal para el cuidado de plantas. Te ayudaremos a mantener tus plantas saludables y felices.",position:"center"},{id:"add-plant",title:"Agrega tu primera planta",description:"Usa el botón flotante para tomar una foto de tu planta. Nuestra IA la identificará automáticamente.",target:'[data-tour="add-plant-fab"]',position:"left",action:{label:"Ir a cámara",onClick:()=>e(ze.toCamera())}},{id:"navigation",title:"Navegación principal",description:"Usa la navegación inferior para moverte entre el jardín, chat IA y configuraciones.",target:'[data-tour="bottom-navigation"]',position:"top"},{id:"chat-ai",title:"Chat con IA experta",description:"Haz preguntas sobre cuidado de plantas, identificación o cualquier duda que tengas.",target:'[data-tour="chat-tab"]',position:"top",action:{label:"Probar chat",onClick:()=>e(ze.toGardenChat())}},{id:"search-filter",title:"Busca y organiza",description:"Usa la búsqueda y filtros para encontrar rápidamente tus plantas cuando tengas muchas.",target:'[data-tour="search-input"]',position:"bottom"},{id:"complete",title:"¡Listo para empezar! 🎉",description:"Ya conoces lo básico. ¡Comienza agregando tu primera planta y explorando todas las funciones!",position:"center"}]}},uf=({type:e,title:t,message:r,onDismiss:n,autoHide:a=!1,duration:i=8e3,actions:o})=>{const[s,c]=y.useState(!0),u=ot();y.useEffect(()=>{if(a&&i>0){const g=setTimeout(()=>{c(!1),n==null||n()},i);return()=>clearTimeout(g)}},[a,i,n]);const d=()=>{c(!1),n==null||n()};if(!s)return null;const m={suggestion:{bg:"bg-purple-50 dark:bg-purple-900/20",border:"border-purple-200 dark:border-purple-800",accent:"text-purple-600 dark:text-purple-400",icon:mc},tip:{bg:"bg-blue-50 dark:bg-blue-900/20",border:"border-blue-200 dark:border-blue-800",accent:"text-blue-600 dark:text-blue-400",icon:Ve},welcome:{bg:"bg-green-50 dark:bg-green-900/20",border:"border-green-200 dark:border-green-800",accent:"text-green-600 dark:text-green-400",icon:Ka}}[e],h=m.icon;return l.jsx(se,{children:l.jsxs(P.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},transition:{duration:.3,ease:"easeOut"},className:"\n          ".concat(m.bg," ").concat(m.border,"\n          border rounded-lg p-4 shadow-md backdrop-blur-sm\n          relative overflow-hidden\n        "),children:[l.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 opacity-10",children:l.jsx(h,{className:"w-full h-full"})}),l.jsxs("div",{className:"relative flex items-start gap-3",children:[l.jsx("div",{className:"".concat(m.accent," flex-shrink-0 mt-0.5"),children:l.jsx(h,{className:"w-5 h-5"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h3",{className:"".concat(m.accent," text-sm font-semibold mb-1"),children:t}),l.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm leading-relaxed mb-3",children:r}),l.jsx("div",{className:"flex flex-wrap gap-2",children:o?o.map((g,v)=>l.jsx(Y,{size:"sm",variant:g.variant||"outline",onClick:g.onClick,className:"text-xs",children:g.label},v)):l.jsxs(Y,{size:"sm",variant:"outline",onClick:()=>u(ze.toGardenChat()),className:"text-xs flex items-center gap-1",children:["Probar Chat IA",l.jsx(Db,{className:"w-3 h-3"})]})})]}),n&&l.jsx("button",{onClick:d,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors p-1 flex-shrink-0","aria-label":"Cerrar sugerencia",children:l.jsx(Sr,{className:"w-4 h-4"})})]}),a&&i>0&&l.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-black/10 dark:bg-white/10",children:l.jsx(P.div,{initial:{width:"100%"},animate:{width:"0%"},transition:{duration:i/1e3,ease:"linear"},className:"h-full ".concat(m.accent.replace("text-","bg-"))})})]})})},PP=()=>{const[e,t]=y.useState(()=>{try{const i=localStorage.getItem("dismissed-ai-highlights");return i?JSON.parse(i):[]}catch(i){return[]}});return{dismissHighlight:i=>{const o=[...e,i];t(o);try{localStorage.setItem("dismissed-ai-highlights",JSON.stringify(o))}catch(s){console.warn("Error saving dismissed highlights:",s)}},shouldShowHighlight:i=>!e.includes(i),resetHighlights:()=>{t([]);try{localStorage.removeItem("dismissed-ai-highlights")}catch(i){console.warn("Error resetting highlights:",i)}}}},EP=()=>{const e=ot();return l.jsxs(P.div,{className:"flex flex-col items-center justify-center text-center py-16 px-6 max-w-lg mx-auto",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5,ease:"easeOut"},children:[l.jsxs(P.div,{className:"relative w-32 h-32 mb-8",initial:{rotate:-15},animate:{rotate:[15,-10,10,-5,5,0]},transition:{duration:1,ease:"easeInOut"},children:[l.jsx(vp,{className:"absolute top-2 left-2 w-10 h-10 text-sky-400 opacity-60"}),l.jsx(Za,{className:"w-32 h-32 text-green-500"}),l.jsx(Po,{className:"absolute bottom-2 right-2 w-12 h-12 text-blue-400 opacity-70"})]}),l.jsx("h2",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100 mb-3",children:"¡Comienza tu jardín digital!"}),l.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6 text-lg leading-relaxed",children:"Añade tu primera planta tomando una foto y deja que nuestra IA la identifique y te ayude a cuidarla."}),l.jsxs("div",{className:"mb-8 space-y-3 text-left",children:[l.jsxs("div",{className:"flex items-center gap-3 text-gray-600 dark:text-gray-400",children:[l.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full flex-shrink-0"}),l.jsx("span",{children:"Identificación automática con IA"})]}),l.jsxs("div",{className:"flex items-center gap-3 text-gray-600 dark:text-gray-400",children:[l.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full flex-shrink-0"}),l.jsx("span",{children:"Recordatorios de riego personalizados"})]}),l.jsxs("div",{className:"flex items-center gap-3 text-gray-600 dark:text-gray-400",children:[l.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full flex-shrink-0"}),l.jsx("span",{children:"Chat con asistente experto en plantas"})]})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full",children:[l.jsxs(Y,{size:"lg",onClick:()=>e(ze.toCamera()),className:"flex-1",children:[l.jsx(pc,{className:"mr-2"}),"Tomar Foto"]}),l.jsx(Sl,{content:"Explora las funciones de chat IA para aprender sobre plantas",children:l.jsxs(Y,{size:"lg",variant:"outline",onClick:()=>e(ze.toGardenChat()),className:"flex-1",children:[l.jsx(Ka,{className:"mr-2"}),"Explorar Chat IA"]})})]}),l.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-6",children:"💡 Tip: Toma fotos con buena iluminación para mejores resultados"})]})},_P=()=>{const{data:e=[],isLoading:t,error:r}=uP(),[n,a]=y.useState(""),[i,o]=y.useState("name"),{shouldShowTour:s,completeTour:c,getTourSteps:u}=kP(),{shouldShowHighlight:d,dismissHighlight:f}=PP(),m=y.useMemo(()=>[...e].filter(h=>h.name.toLowerCase().includes(n.toLowerCase())||h.species.toLowerCase().includes(n.toLowerCase())).sort((h,g)=>{var v,p;switch(i){case"health":return(g.healthScore||0)-(h.healthScore||0);case"lastWatered":return(((v=g.lastWatered)==null?void 0:v.getTime())||0)-(((p=h.lastWatered)==null?void 0:p.getTime())||0);default:return h.name.localeCompare(g.name)}}),[e,n,i]);return t?l.jsxs("div",{className:"p-4 sm:p-6 space-y-6",children:[l.jsxs("header",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:"Mi Jardín"}),l.jsx(bP.LoadingPlants,{size:"sm"})]}),l.jsx(X,{className:"h-10 w-10 rounded-full"})]}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:Array.from({length:8}).map((h,g)=>l.jsx(hP,{},g))})]}):r?l.jsx("div",{className:"flex justify-center items-center min-h-[50vh] p-4",children:l.jsx(SP.LoadingPlantsError,{onRetry:()=>window.location.reload(),className:"max-w-md"})}):l.jsxs("div",{className:"container-spacing element-spacing bg-white",style:{paddingBottom:"calc(88px + env(safe-area-inset-bottom))"},children:[l.jsx("header",{className:"flex items-center justify-between border-b-2 border-[#E0F2E9] bg-white pb-2 mb-4",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(Sl,{content:"Tu jardín personal de plantas",children:l.jsx(Za,{size:20,strokeWidth:2,className:"text-[#2A7F3E] flex-shrink-0"})}),l.jsx("h1",{className:"font-semibold text-[28px] leading-[1.2] text-[#222]",children:"Mi Jardín"}),l.jsx(Sl,{content:"Tienes ".concat(e.length," ").concat(e.length===1?"planta registrada":"plantas registradas"," en tu jardín"),children:l.jsxs("span",{className:"ml-2 bg-[#E0F2E9]/50 text-[#2A7F3E] text-sm font-medium rounded-full px-[6px] py-[2px] cursor-help",children:[e.length," ",e.length===1?"planta":"plantas"]})})]})}),e.length>0&&d("dashboard-ai-welcome")&&l.jsx("div",{className:"mb-4",children:l.jsx(uf,{type:"welcome",title:"¡Tu asistente IA está disponible!",message:"Haz preguntas sobre el cuidado de tus plantas, identifica problemas o descubre nuevos consejos.",onDismiss:()=>f("dashboard-ai-welcome"),autoHide:!0,duration:1e4})}),e.length>=3&&d("dashboard-ai-tips")&&l.jsx("div",{className:"mb-4",children:l.jsx(uf,{type:"tip",title:"Consejo del jardinero experto",message:"Con varias plantas, puedes preguntarme sobre rutinas de cuidado personalizadas para optimizar tu tiempo.",onDismiss:()=>f("dashboard-ai-tips"),autoHide:!0,duration:12e3})}),l.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-3 mt-6 mb-6",children:[l.jsx(Ro,{type:"text",placeholder:"Buscar por nombre o especie...",value:n,onChange:h=>a(h.target.value),className:"max-w-md w-full mx-auto","data-tour":"search-input"}),l.jsxs("div",{className:"relative w-full max-w-xs",children:[l.jsxs("select",{value:i,onChange:h=>o(h.target.value),className:"appearance-none bg-white border border-green-300 rounded-[8px] px-4 py-2 h-10 text-green-700 font-medium shadow-sm focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-colors duration-150 w-full pr-8",style:{borderWidth:"1px"},children:[l.jsx("option",{value:"name",children:"Ordenar por Nombre"}),l.jsx("option",{value:"health",children:"Ordenar por Salud"}),l.jsx("option",{value:"lastWatered",children:"Ordenar por Riego"})]}),l.jsx("span",{className:"pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 text-green-400 text-base",children:"▼"})]})]}),l.jsx(se,{children:m.length>0?l.jsx(P.div,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 element-spacing",initial:"hidden",animate:"visible",variants:{visible:{transition:{staggerChildren:.01,delayChildren:0}}},children:m.map((h,g)=>l.jsx(bg,{plant:h,index:Math.min(g,8)},h.id))}):l.jsx(EP,{})}),l.jsx(NP,{isOpen:s()&&e.length===0,onComplete:c,onSkip:c,steps:u()})]})};function Nl(e){"@babel/helpers - typeof";return Nl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nl(e)}function ft(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function $e(e){ft(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||Nl(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}var AP={};function CP(){return AP}function qi(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function df(e){ft(1,arguments);var t=$e(e);return t.setHours(0,0,0,0),t}var OP=864e5;function TP(e,t){ft(2,arguments);var r=df(e),n=df(t),a=r.getTime()-qi(r),i=n.getTime()-qi(n);return Math.round((a-i)/OP)}function $i(e,t){ft(2,arguments);var r=$e(e),n=$e(t),a=r.getTime()-n.getTime();return a<0?-1:a>0?1:a}function IP(e,t){ft(2,arguments);var r=$e(e),n=$e(t),a=r.getFullYear()-n.getFullYear(),i=r.getMonth()-n.getMonth();return a*12+i}function ff(e,t){var r=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return r<0?-1:r>0?1:r}function MP(e,t){ft(2,arguments);var r=$e(e),n=$e(t),a=ff(r,n),i=Math.abs(TP(r,n));r.setDate(r.getDate()-a*i);var o=+(ff(r,n)===-a),s=a*(i-o);return s===0?0:s}function DP(e,t){return ft(2,arguments),$e(e).getTime()-$e(t).getTime()}var $P={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(t){return t<0?Math.ceil(t):Math.floor(t)}},zP="trunc";function RP(e){return $P[zP]}function LP(e){ft(1,arguments);var t=$e(e);return t.setHours(23,59,59,999),t}function FP(e){ft(1,arguments);var t=$e(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function BP(e){ft(1,arguments);var t=$e(e);return LP(t).getTime()===FP(t).getTime()}function UP(e,t){ft(2,arguments);var r=$e(e),n=$e(t),a=$i(r,n),i=Math.abs(IP(r,n)),o;if(i<1)o=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-a*i);var s=$i(r,n)===-a;BP($e(e))&&i===1&&$i(e,n)===1&&(s=!1),o=a*(i-Number(s))}return o===0?0:o}function WP(e,t,r){ft(2,arguments);var n=DP(e,t)/1e3;return RP()(n)}var HP={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},qP=function(t,r,n){var a,i=HP[t];return typeof i=="string"?a=i:r===1?a=i.one:a=i.other.replace("{{count}}",r.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+a:a+" ago":a};function Fn(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.width?String(t.width):e.defaultWidth,n=e.formats[r]||e.formats[e.defaultWidth];return n}}var ZP={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},KP={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},GP={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},VP={date:Fn({formats:ZP,defaultWidth:"full"}),time:Fn({formats:KP,defaultWidth:"full"}),dateTime:Fn({formats:GP,defaultWidth:"full"})},YP={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},XP=function(t,r,n,a){return YP[t]};function Qt(e){return function(t,r){var n=r!=null&&r.context?String(r.context):"standalone",a;if(n==="formatting"&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,o=r!=null&&r.width?String(r.width):i;a=e.formattingValues[o]||e.formattingValues[i]}else{var s=e.defaultWidth,c=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[c]||e.values[s]}var u=e.argumentCallback?e.argumentCallback(t):t;return a[u]}}var QP={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},JP={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},eE={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},tE={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},rE={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},nE={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},aE=function(t,r){var n=Number(t),a=n%100;if(a>20||a<10)switch(a%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},iE={ordinalNumber:aE,era:Qt({values:QP,defaultWidth:"wide"}),quarter:Qt({values:JP,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:Qt({values:eE,defaultWidth:"wide"}),day:Qt({values:tE,defaultWidth:"wide"}),dayPeriod:Qt({values:rE,defaultWidth:"wide",formattingValues:nE,defaultFormattingWidth:"wide"})};function Jt(e){return function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=r.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;var o=i[0],s=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(s)?sE(s,function(f){return f.test(o)}):oE(s,function(f){return f.test(o)}),u;u=e.valueCallback?e.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;var d=t.slice(o.length);return{value:u,rest:d}}}function oE(e,t){for(var r in e)if(e.hasOwnProperty(r)&&t(e[r]))return r}function sE(e,t){for(var r=0;r<e.length;r++)if(t(e[r]))return r}function wg(e){return function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.match(e.matchPattern);if(!n)return null;var a=n[0],i=t.match(e.parsePattern);if(!i)return null;var o=e.valueCallback?e.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;var s=t.slice(a.length);return{value:o,rest:s}}}var lE=/^(\d+)(th|st|nd|rd)?/i,cE=/\d+/i,uE={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},dE={any:[/^b/i,/^(a|c)/i]},fE={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},mE={any:[/1/i,/2/i,/3/i,/4/i]},hE={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},pE={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},gE={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},vE={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},yE={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},xE={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},bE={ordinalNumber:wg({matchPattern:lE,parsePattern:cE,valueCallback:function(t){return parseInt(t,10)}}),era:Jt({matchPatterns:uE,defaultMatchWidth:"wide",parsePatterns:dE,defaultParseWidth:"any"}),quarter:Jt({matchPatterns:fE,defaultMatchWidth:"wide",parsePatterns:mE,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:Jt({matchPatterns:hE,defaultMatchWidth:"wide",parsePatterns:pE,defaultParseWidth:"any"}),day:Jt({matchPatterns:gE,defaultMatchWidth:"wide",parsePatterns:vE,defaultParseWidth:"any"}),dayPeriod:Jt({matchPatterns:yE,defaultMatchWidth:"any",parsePatterns:xE,defaultParseWidth:"any"})},wE={code:"en-US",formatDistance:qP,formatLong:VP,formatRelative:XP,localize:iE,match:bE,options:{weekStartsOn:0,firstWeekContainsDate:1}};function jg(e,t){if(e==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}function jE(e){return jg({},e)}var mf=1440,SE=2520,$s=43200,NE=86400;function kE(e,t,r){var n,a;ft(2,arguments);var i=CP(),o=(n=(a=r==null?void 0:r.locale)!==null&&a!==void 0?a:i.locale)!==null&&n!==void 0?n:wE;if(!o.formatDistance)throw new RangeError("locale must contain formatDistance property");var s=$i(e,t);if(isNaN(s))throw new RangeError("Invalid time value");var c=jg(jE(r),{addSuffix:!!(r!=null&&r.addSuffix),comparison:s}),u,d;s>0?(u=$e(t),d=$e(e)):(u=$e(e),d=$e(t));var f=WP(d,u),m=(qi(d)-qi(u))/1e3,h=Math.round((f-m)/60),g;if(h<2)return r!=null&&r.includeSeconds?f<5?o.formatDistance("lessThanXSeconds",5,c):f<10?o.formatDistance("lessThanXSeconds",10,c):f<20?o.formatDistance("lessThanXSeconds",20,c):f<40?o.formatDistance("halfAMinute",0,c):f<60?o.formatDistance("lessThanXMinutes",1,c):o.formatDistance("xMinutes",1,c):h===0?o.formatDistance("lessThanXMinutes",1,c):o.formatDistance("xMinutes",h,c);if(h<45)return o.formatDistance("xMinutes",h,c);if(h<90)return o.formatDistance("aboutXHours",1,c);if(h<mf){var v=Math.round(h/60);return o.formatDistance("aboutXHours",v,c)}else{if(h<SE)return o.formatDistance("xDays",1,c);if(h<$s){var p=Math.round(h/mf);return o.formatDistance("xDays",p,c)}else if(h<NE)return g=Math.round(h/$s),o.formatDistance("aboutXMonths",g,c)}if(g=UP(d,u),g<12){var x=Math.round(h/$s);return o.formatDistance("xMonths",x,c)}else{var b=g%12,w=Math.floor(g/12);return b<3?o.formatDistance("aboutXYears",w,c):b<9?o.formatDistance("overXYears",w,c):o.formatDistance("almostXYears",w+1,c)}}function Sg(e,t){return ft(1,arguments),kE(e,Date.now(),t)}const PE=async e=>{var a,i,o,s,c;const{data:t,error:r}=await pe.from("plants").select("\n      *,\n      plant_images(*)\n    ").eq("id",e).single();if(r)throw console.error("Error fetching plant ".concat(e,":"),r),r.code==="PGRST116"?new Error("Planta no encontrada."):new Error("Error al cargar la información de la planta.");const n=t;return{id:n.id,name:n.name,species:n.species,description:(a=n.description)!=null?a:void 0,funFacts:(i=n.fun_facts)!=null?i:void 0,variety:(o=n.variety)!=null?o:void 0,nickname:(s=n.nickname)!=null?s:void 0,location:n.location,plantEnvironment:n.plant_environment,lightRequirements:n.light_requirements,dateAdded:new Date(n.date_added),lastWatered:n.last_watered?new Date(n.last_watered):void 0,lastFertilized:n.last_fertilized?new Date(n.last_fertilized):void 0,healthScore:(c=n.health_score)!=null?c:0,careProfile:n.care_profile,personality:n.personality,images:n.plant_images.map(u=>{var d,f;return{id:u.id,url:(d=u.url)!=null?d:"",timestamp:new Date(u.created_at),isProfileImage:(f=u.is_profile_image)!=null?f:!1,healthAnalysis:u.health_analysis}}),chatHistory:[],notifications:[]}},Dc=e=>{const{data:t,isLoading:r,error:n}=sp({queryKey:["plant",e],queryFn:async()=>PE(e),enabled:!!e,staleTime:6e5,gcTime:18e5,refetchOnWindowFocus:!1,refetchOnMount:!1,retry:1}),a=gr(s=>s.setPlant),i=gr(s=>s.selectPlant);y.useEffect(()=>(t&&(a(t),i(t.id)),()=>{i(null)}),[t,a,i]);const o=y.useMemo(()=>{if(!t)return[];const s=[];if(!t.images||t.images.length===0)return s;const c=t.images.map(u=>{var d;return((d=u.healthAnalysis)==null?void 0:d.confidence)||null}).filter(u=>u!==null);if(c.length>=3){const u=c.slice(-3);if(u[0]>u[1]&&u[1]>u[2]){const d=u[0]-u[2];s.push({type:"warning",title:"Tendencia de Salud a la Baja",message:"La salud de tu planta ha disminuido un ".concat(d.toFixed(0),"% en las últimas revisiones.")})}}if(t.lastWatered&&t.careProfile){const u=MP(new Date,new Date(t.lastWatered)),d=t.careProfile.wateringFrequency;u>d&&s.push({type:"tip",title:"Consejo de Riego",message:"Han pasado ".concat(u," días desde el último riego. El intervalo recomendado es de ").concat(d," días.")})}return s},[t]);return{plant:t,insights:o,loading:r,error:(n==null?void 0:n.message)||null}},EE=()=>{const e=ko(),t=or(s=>s.user),r=t==null?void 0:t.id,{addToast:n}=Qn(),a=Rr({mutationFn:async({plantId:s,imageDataUrl:c,note:u})=>{var h;if(!r)throw new Error("User not authenticated");console.log("🖼️ [Image] Iniciando proceso de subida de imagen..."),console.log("🔬 [Image] Analizando imagen con IA...");const d=await yg(c);console.log("☁️ [Image] Subiendo imagen a Storage...");const f=await vg(c,"plant-images","".concat(r,"/").concat(s));console.log("💾 [Image] Guardando registro en base de datos...");const m=await Dn.addPlantImage(s,{url:f,timestamp:new Date,isProfileImage:!1,healthAnalysis:d.health},r);return(h=d.health)!=null&&h.confidence&&(console.log("🏥 [Image] Actualizando health score de la planta..."),await Dn.updatePlantHealthScore(s,r,d.health.confidence,d.health,m.id)),console.log("✅ [Image] Proceso completado exitosamente"),{image:m,analysis:d,note:u}},onSuccess:(s,c)=>{var f,m,h;e.invalidateQueries({queryKey:["plants"]}),e.invalidateQueries({queryKey:["plant",c.plantId]});const{setPlant:u}=gr.getState(),d=gr.getState().getPlantById(c.plantId);if(d){const g={...d,images:[...d.images,s.image],healthScore:((f=s.analysis.health)==null?void 0:f.confidence)||d.healthScore};u(g)}n({type:"success",title:"Nueva imagen añadida",message:"Análisis completado. Salud actual: ".concat(((h=(m=s.analysis.health)==null?void 0:m.confidence)==null?void 0:h.toFixed(0))||"N/A","%")})},onError:s=>{console.error("💥 [Image] Error en proceso de subida:",s),n({type:"error",title:"Error al agregar imagen",message:s.message})}}),i=Rr({mutationFn:async({plantId:s,imageId:c})=>{if(!r)throw new Error("User not authenticated");return console.log("🖼️ [Profile] Cambiando imagen de perfil..."),await Dn.setProfileImage(s,c,r),{plantId:s,imageId:c}},onSuccess:s=>{e.invalidateQueries({queryKey:["plants"]}),e.invalidateQueries({queryKey:["plant",s.plantId]}),n({type:"success",title:"Imagen de perfil actualizada",message:"La imagen principal de la planta ha sido cambiada"})},onError:s=>{n({type:"error",title:"Error al cambiar imagen de perfil",message:s.message})}}),o=Rr({mutationFn:async({plantId:s,imageId:c})=>{if(!r)throw new Error("User not authenticated");return console.log("🗑️ [Image] Eliminando imagen..."),await Dn.deleteImage(c,r),{plantId:s,imageId:c}},onSuccess:s=>{e.invalidateQueries({queryKey:["plants"]}),e.invalidateQueries({queryKey:["plant",s.plantId]}),n({type:"success",title:"Imagen eliminada",message:"La imagen ha sido eliminada de tu planta"})},onError:s=>{n({type:"error",title:"Error al eliminar imagen",message:s.message})}});return{addPlantImage:a.mutate,isAddingImage:a.isPending,setProfileImage:i.mutate,isSettingProfileImage:i.isPending,deleteImage:o.mutate,isDeletingImage:o.isPending}};function _E({images:e}){const[t,r]=y.useState(null);if(!e||e.length===0)return l.jsx(Et,{className:"mt-4",children:l.jsx(xr,{className:"pt-6",children:l.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[l.jsx(Zt,{className:"w-12 h-12 text-muted-foreground mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"No hay imágenes para esta planta todavía."}),l.jsx("p",{className:"text-sm text-muted-foreground/70 mt-2",children:"¡Agrega algunas fotos para seguir su progreso!"})]})})});const n=[...e].sort((c,u)=>new Date(u.timestamp).getTime()-new Date(c.timestamp).getTime()),a=c=>{r(c)},i=()=>{r(null)},o=c=>{if(t===null)return;const u=c==="prev"?(t-1+n.length)%n.length:(t+1)%n.length;r(u)},s=c=>(c instanceof Date?c:new Date(c)).toLocaleDateString("es-ES",{day:"numeric",month:"short",year:"numeric"});return l.jsxs("div",{className:"mt-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h2",{className:"text-xl font-bold tracking-tight flex items-center",children:[l.jsx(Zt,{className:"w-5 h-5 mr-2 text-primary"}),"Galería de Imágenes"]}),l.jsxs("span",{className:"text-sm text-muted-foreground",children:[n.length," foto",n.length!==1?"s":""]})]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:n.map((c,u)=>l.jsxs(P.div,{className:"aspect-square relative rounded-[8px] overflow-hidden cursor-pointer group w-[80px] h-[80px]",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>a(u),children:[l.jsx(Mc,{src:c.url,alt:"Imagen de planta del ".concat(s(c.timestamp)),className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110 rounded-[8px]"}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:l.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-3",children:l.jsx("div",{className:"flex items-center text-white text-xs gap-2",children:l.jsxs("span",{className:"flex items-center",children:[l.jsx(Fi,{className:"w-3 h-3 mr-1"}),s(c.timestamp)]})})})}),c.isProfileImage&&l.jsx("div",{className:"absolute top-2 right-2 bg-primary text-primary-foreground text-xs px-2 py-1 rounded-full font-medium",children:"Principal"})]},c.id))}),l.jsx(se,{children:t!==null&&l.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-4",onClick:i,children:l.jsxs(P.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:"relative max-w-4xl max-h-full",onClick:c=>c.stopPropagation(),children:[l.jsx("button",{onClick:i,className:"absolute top-4 right-4 z-10 bg-black/50 text-white p-2 rounded-full hover:bg-black/70 transition-colors",children:l.jsx(Sr,{className:"w-6 h-6"})}),n.length>1&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>o("prev"),className:"absolute left-4 top-1/2 -translate-y-1/2 z-10 bg-black/50 text-white p-2 rounded-full hover:bg-black/70 transition-colors",children:l.jsx(pp,{className:"w-6 h-6"})}),l.jsx("button",{onClick:()=>o("next"),className:"absolute right-4 top-1/2 -translate-y-1/2 z-10 bg-black/50 text-white p-2 rounded-full hover:bg-black/70 transition-colors",children:l.jsx(gp,{className:"w-6 h-6"})})]}),l.jsx("img",{src:n[t].url,alt:"Imagen de planta del ".concat(s(n[t].timestamp)),className:"max-w-full max-h-full object-contain rounded-lg"}),l.jsxs("div",{className:"absolute bottom-4 left-4 right-4 bg-black/50 text-white p-4 rounded-lg backdrop-blur-sm",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(Fi,{className:"w-4 h-4 mr-2"}),l.jsx("span",{className:"text-sm",children:s(n[t].timestamp)})]}),l.jsxs("span",{className:"text-sm text-white/70",children:[t+1," de ",n.length]})]}),l.jsx("div",{className:"mt-2 text-sm flex items-center gap-2",children:(()=>{const c=n[t].healthAnalysis;if(!c)return l.jsx("span",{className:"italic text-white/60",children:"Sin análisis"});let u="🌱",d="Excelente";switch(c.overallHealth){case"excellent":u="🌱",d="Excelente";break;case"good":u="🌿",d="Buena";break;case"fair":u="🍃",d="Regular";break;case"poor":u="🥀",d="Baja";break;default:u="🌱",d=c.overallHealth}let f;const m={excellent:95,good:80,fair:60,poor:30};return c.overallHealth&&m[c.overallHealth]?f=m[c.overallHealth]:typeof c.confidence=="number"&&(f=c.confidence<=1?c.confidence*100:c.confidence),l.jsxs("span",{children:["Salud: ",l.jsx("span",{className:"font-semibold",children:d})," ",l.jsx("span",{children:u}),f!==void 0&&l.jsxs("span",{className:"ml-2",children:["(",Math.round(f),"%)"]})]})})()}),n[t].isProfileImage&&l.jsx("div",{className:"mt-2",children:l.jsx("span",{className:"bg-primary text-primary-foreground text-xs px-2 py-1 rounded-full",children:"Imagen Principal"})})]})]})})})]})}const AE=new Oc,CE=()=>{const[e,t]=y.useState(!1),r=ko(),n=or(s=>s.user),{addToast:a}=Qn(),i=Rr({mutationFn:async({plantId:s,species:c,commonName:u})=>{if(!n)throw new Error("User not authenticated");t(!0),a({type:"info",title:"🤖 Completando información",message:"Consultando IA para ".concat(u||c,"..."),duration:3e3});try{const d=await Xk(c,u);return await AE.updatePlantInfo(s,n.id,{plantEnvironment:d.plantEnvironment,lightRequirements:d.lightRequirements,description:d.description,funFacts:d.funFacts})}catch(d){throw console.error("❌ [COMPLETAR IA] Error durante el proceso:",d),d}finally{t(!1)}},onSuccess:s=>{console.log("🔄 [COMPLETAR IA] Refrescando datos en cache..."),a({type:"success",title:"✅ ¡Información completada!",message:"Se agregaron datos de ambiente y luz para ".concat(s.name),duration:5e3}),r.invalidateQueries({queryKey:["plant",s.id]}),r.invalidateQueries({queryKey:["plants"]}),console.log("✅ [COMPLETAR IA] Cache actualizado correctamente")},onError:s=>{console.error("💥 [COMPLETAR IA] Error final en la operación:",s),a({type:"error",title:"❌ Error al completar información",message:"No se pudo obtener los datos de IA. Intenta de nuevo.",duration:7e3}),t(!1)}});return{completeInfo:(s,c,u)=>i.mutate({plantId:s,species:c,commonName:u}),isCompleting:e||i.isPending,error:i.error,isSuccess:i.isSuccess}},OE=({isOpen:e,onClose:t,onConfirm:r,title:n,description:a,confirmText:i="Confirmar",cancelText:o="Cancelar",variant:s="warning",isLoading:c=!1,preview:u})=>{const f={danger:{iconColor:"text-red-500",bgColor:"bg-red-50 dark:bg-red-900/20",confirmColor:"destructive"},warning:{iconColor:"text-amber-500",bgColor:"bg-amber-50 dark:bg-amber-900/20",confirmColor:"warning"},info:{iconColor:"text-blue-500",bgColor:"bg-blue-50 dark:bg-blue-900/20",confirmColor:"primary"}}[s];return l.jsx(se,{children:e&&l.jsx(l.Fragment,{children:l.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:l.jsxs(P.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},onClick:m=>m.stopPropagation(),className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl max-w-md w-full max-h-[90vh] overflow-hidden",children:[l.jsx("div",{className:"p-6 pb-4",children:l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"".concat(f.bgColor," p-3 rounded-full flex-shrink-0"),children:l.jsx(Kt,{className:"w-6 h-6 ".concat(f.iconColor)})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:n}),l.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm leading-relaxed",children:a})]}),l.jsx("button",{onClick:t,disabled:c,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors p-1","aria-label":"Cerrar diálogo",children:l.jsx(Sr,{className:"w-5 h-5"})})]})}),u&&l.jsx("div",{className:"px-6 pb-4",children:l.jsx("div",{className:"border dark:border-gray-700 rounded-lg p-3 bg-gray-50 dark:bg-gray-900/50",children:u})}),l.jsxs("div",{className:"px-6 pb-6 flex gap-3 justify-end",children:[l.jsx(Y,{variant:"outline",onClick:t,disabled:c,className:"min-w-[80px]",children:o}),l.jsx(Y,{variant:f.confirmColor,onClick:r,disabled:c,loading:c,className:"min-w-[80px]",children:i})]})]})})})})},TE=({plant:e,variant:t="primary",size:r="sm",showLabel:n=!0,className:a=""})=>{const{updatePlantHealthMutation:i,isUpdatingPlantHealth:o}=$o(),s=or(h=>h.user),{addToast:c}=Qn(),{plant:u}=Dc(e.id),d=async()=>{if(!(s!=null&&s.id)){c({type:"error",title:"Error",message:"Debes estar logueado para actualizar el diagnóstico"});return}if(!u){c({type:"error",title:"Error",message:"No se pudieron cargar los datos de la planta"});return}console.log("🩺 [Button] Actualizando diagnóstico para:",e.name),i({plant:u,userId:s.id})},f=l.jsxs(l.Fragment,{children:[o?l.jsx(P.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:l.jsx(Br,{size:r.includes("icon")?16:14})}):l.jsx(yp,{size:r.includes("icon")?16:14}),n&&!r.includes("icon")&&l.jsx("span",{className:"ml-2 text-xs",children:o?"Analizando...":"Analizar"})]}),m=r.includes("icon");return l.jsx(Y,{onClick:d,disabled:o||!u,size:r,variant:t,className:a,"aria-label":m?"Actualizar diagnóstico de salud para ".concat(e.name):void 0,title:m?"Actualizar diagnóstico de salud para ".concat(e.name):void 0,children:f})},IE=({plant:e})=>{var O,B,Z;const t=ot(),[r,n]=y.useState(!1),[a,i]=y.useState(!1),{deletePlant:o,isDeletingPlant:s}=$o(),{completeInfo:c,isCompleting:u}=CE(),{scrollY:d}=$b(),f=jd(d,[0,300],[0,150]),m=jd(d,[0,200],[1,.3]),h=((O=e.images)==null?void 0:O.find(z=>z.isProfileImage))||((B=e.images)==null?void 0:B[0]),g=!e.plantEnvironment||!e.lightRequirements,v=()=>{i(!0),n(!1)},p=()=>{o(e.id,{onSuccess:()=>{t("/")}})},x=()=>{console.log("🎯 [UI] Usuario solicitó completar información con IA"),console.log("🌱 [UI] Datos de la planta:",{id:e.id,nombre:e.name,especie:e.species,ambienteActual:e.plantEnvironment||"No especificado",luzActual:e.lightRequirements||"No especificado"}),n(!1),i(!0)},b=()=>{console.log("✅ [UI] Usuario confirmó el completado automático"),i(!1),c(e.id,e.species,e.name)},w=()=>{console.log("❌ [UI] Usuario canceló el completado automático"),i(!1)},j=z=>(z instanceof Date?z:new Date(z)).toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"}),S=z=>{switch(z){case"interior":return l.jsx(Li,{className:"w-4 h-4 mr-2"});case"exterior":return l.jsx(Sd,{className:"w-4 h-4 mr-2"});case"ambos":return l.jsxs(l.Fragment,{children:[l.jsx(Li,{className:"w-3 h-3 mr-1"}),l.jsx(Sd,{className:"w-3 h-3 mr-1"})]});default:return null}},N=z=>{switch(z){case"interior":return"Interior";case"exterior":return"Exterior";case"ambos":return"Interior/Exterior";default:return null}},k=z=>{switch(z){case"poca_luz":return l.jsx(zb,{className:"w-4 h-4 mr-2"});case"luz_indirecta":return l.jsx(Lr,{className:"w-4 h-4 mr-2 opacity-60"});case"luz_directa_parcial":return l.jsx(Lr,{className:"w-4 h-4 mr-2 opacity-80"});case"pleno_sol":return l.jsx(Lr,{className:"w-4 h-4 mr-2"});default:return null}},A=z=>{switch(z){case"poca_luz":return"Poca luz";case"luz_indirecta":return"Luz indirecta";case"luz_directa_parcial":return"Sol parcial";case"pleno_sol":return"Pleno sol";default:return null}},C={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.2,delayChildren:.1}}},D={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",damping:25,stiffness:120}}},T={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.6}}};return y.useEffect(()=>{const z=()=>n(!1);if(r)return document.addEventListener("click",z),()=>document.removeEventListener("click",z)},[r]),l.jsxs(P.div,{className:"relative h-96 w-full overflow-hidden",variants:C,initial:"hidden",animate:"visible",children:[l.jsx(P.div,{className:"absolute inset-0 scale-110",style:{y:f,opacity:m},children:h?l.jsx(Mc,{src:h.url,alt:e.name,className:"h-full w-full object-cover"}):l.jsx("div",{className:"h-full w-full bg-gradient-to-br from-green-400 via-green-500 to-green-600",children:l.jsx("div",{className:"absolute inset-0 opacity-30",style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Ccircle cx='7' cy='7' r='2'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\")"}})})}),l.jsxs(P.div,{className:"absolute inset-0",variants:T,children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[rgba(0,0,0,0.6)] to-transparent"}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-transparent via-transparent to-black/30"}),l.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-background/60 to-transparent"})]}),l.jsx("div",{className:"absolute top-0 left-0 right-0 p-4 pt-safe-top z-20",children:l.jsxs(P.div,{className:"flex items-center justify-between",variants:D,children:[l.jsx(Y,{"aria-label":"Volver atrás",variant:"ghost",size:"icon",onClick:()=>t("/"),className:"bg-black/30 text-white backdrop-blur-lg rounded-full border border-white/20 hover:bg-black/50 transition-all duration-300",children:l.jsx(vc,{size:20})}),l.jsx("div",{className:"flex items-center space-x-2",children:l.jsxs("div",{className:"relative",children:[l.jsx(Y,{"aria-label":"Más opciones",variant:"ghost",size:"icon",onClick:z=>{z.stopPropagation(),n(U=>!U)},className:"bg-neutral-800/90 text-white backdrop-blur-lg rounded-full border border-neutral-600 hover:bg-neutral-700 transition-all duration-300 dark:bg-neutral-200/90 dark:text-neutral-900 dark:border-neutral-400 dark:hover:bg-neutral-300",children:l.jsx(xp,{size:20})}),l.jsx(se,{children:r&&l.jsx(P.div,{initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},transition:{duration:.15},className:"absolute right-0 mt-2 w-48 origin-top-right rounded-xl bg-background/95 backdrop-blur-lg shadow-xl ring-1 ring-black/10 focus:outline-none z-30 border border-border/50",onClick:z=>z.stopPropagation(),children:l.jsxs("div",{className:"py-2",children:[g&&l.jsxs("button",{onClick:x,disabled:u,className:"flex w-full items-center px-4 py-3 text-sm text-contrast-high hover:bg-contrast-surface transition-colors rounded-lg mx-2",children:[u?l.jsx(ln,{className:"mr-3 h-4 w-4 animate-spin"}):l.jsx(Ve,{className:"mr-3 h-4 w-4"}),l.jsx("span",{children:u?"Completando...":"Completar con IA"})]}),l.jsx("div",{className:"flex w-full items-center px-2 py-1",children:l.jsx(TE,{plant:e,variant:"outline",size:"sm",showLabel:!0,className:"w-full"})}),l.jsxs("button",{onClick:v,disabled:s,className:"flex w-full items-center px-4 py-3 text-sm text-error-600 dark:text-error-500 hover:bg-error-50 dark:hover:bg-error-900/20 transition-colors rounded-lg mx-2 font-medium",children:[s?l.jsx(ln,{className:"mr-3 h-4 w-4 animate-spin"}):l.jsx(hp,{className:"mr-3 h-4 w-4"}),l.jsx("span",{children:s?"Eliminando...":"Eliminar planta"})]})]})})})]})})]})}),l.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-6 pb-safe-bottom z-10",children:l.jsxs(P.div,{className:"space-y-4",variants:D,children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(P.h1,{className:"text-[24px] font-bold text-white drop-shadow-lg",variants:D,children:e.nickname||e.name}),l.jsx(P.p,{className:"text-[16px] text-white/90 font-medium",variants:D,children:e.species})]}),l.jsxs(P.div,{className:"flex flex-wrap gap-2 pt-2 max-h-32 overflow-y-auto",variants:D,children:[e.location&&l.jsxs("div",{className:"flex items-center text-white/80 bg-black/30 backdrop-blur-sm px-3 py-2 rounded-full border border-white/20",children:[l.jsx(bp,{className:"w-4 h-4 mr-2"}),l.jsx("span",{className:"text-sm font-medium",children:e.location})]}),e.dateAdded&&l.jsxs("div",{className:"flex items-center text-white/80 bg-black/30 backdrop-blur-sm px-3 py-2 rounded-full border border-white/20",children:[l.jsx(Fi,{className:"w-4 h-4 mr-2"}),l.jsxs("span",{className:"text-sm font-medium",children:["Desde ",j(e.dateAdded)]})]}),e.plantEnvironment&&N(e.plantEnvironment)&&l.jsxs("div",{className:"flex items-center text-white/80 bg-black/30 backdrop-blur-sm px-3 py-2 rounded-full border border-white/20",children:[S(e.plantEnvironment),l.jsx("span",{className:"text-sm font-medium",children:N(e.plantEnvironment)})]}),e.lightRequirements&&A(e.lightRequirements)&&l.jsxs("div",{className:"flex items-center text-white/80 bg-black/30 backdrop-blur-sm px-3 py-2 rounded-full border border-white/20",children:[k(e.lightRequirements),l.jsx("span",{className:"text-sm font-medium",children:A(e.lightRequirements)})]}),e.images&&e.images.length>0&&l.jsx("div",{className:"flex items-center text-white/80 bg-black/30 backdrop-blur-sm px-3 py-2 rounded-full border border-white/20",children:l.jsxs("span",{className:"text-sm font-medium",children:[e.images.length," foto",e.images.length!==1?"s":""]})})]})]})}),l.jsx(se,{children:a&&l.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:w,children:l.jsxs(P.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},onClick:z=>z.stopPropagation(),className:"bg-white dark:bg-gray-900 rounded-2xl p-6 max-w-md w-full mx-4 shadow-xl",children:[l.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[l.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center",children:l.jsx(Ve,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Completar con IA"}),l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Información automática"})]})]}),l.jsxs("div",{className:"space-y-3 mb-6",children:[l.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"¿Quieres que la IA complete la información faltante de esta planta?"}),l.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-3 space-y-2",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"text-2xl",children:"🌱"}),l.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:e.name})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"text-2xl",children:"🔬"}),l.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:e.species})]})]}),l.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[l.jsx("p",{className:"font-medium mb-1",children:"La IA agregará:"}),l.jsxs("ul",{className:"space-y-1",children:[l.jsx("li",{children:"• Ambiente recomendado (interior/exterior)"}),l.jsx("li",{children:"• Necesidades de luz específicas"})]})]})]}),l.jsxs("div",{className:"flex space-x-3",children:[l.jsx(Y,{variant:"outline",onClick:w,className:"flex-1",disabled:u,children:"Cancelar"}),l.jsx(Y,{onClick:b,className:"flex-1 bg-green-600 hover:bg-green-700 text-white",disabled:u,children:u?l.jsxs(l.Fragment,{children:[l.jsx(ln,{className:"w-4 h-4 mr-2 animate-spin"}),"Completando..."]}):l.jsxs(l.Fragment,{children:[l.jsx(Ve,{className:"w-4 h-4 mr-2"}),"Completar"]})})]})]})})}),l.jsx(OE,{isOpen:a,onClose:()=>i(!1),onConfirm:p,title:"Eliminar Planta",description:'¿Estás seguro de que quieres eliminar "'.concat(e.nickname||e.name,'"? Esta acción es irreversible y se perderán todos los datos, fotos y mensajes de chat asociados.'),confirmText:"Eliminar Definitivamente",cancelText:"Cancelar",variant:"danger",isLoading:s,preview:l.jsxs("div",{className:"flex items-center gap-3",children:[h&&l.jsx("img",{src:h.url,alt:e.name,className:"w-12 h-12 rounded-lg object-cover"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"font-medium text-sm text-gray-900 dark:text-gray-100 truncate",children:e.nickname||e.name}),l.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:[e.species," • ",((Z=e.images)==null?void 0:Z.length)||0," fotos"]})]})]})})]})},ME=({plant:e})=>{const{careProfile:t,personality:r}=e;if(!t)return l.jsx("div",{className:"bg-background p-6 rounded-lg shadow-lg w-full text-center",children:l.jsx("p",{className:"text-muted-foreground",children:"No hay perfil de cuidados disponible para esta planta."})});const n=[{icon:l.jsx(Po,{size:20,strokeWidth:2,color:"#555"}),label:"RIEGO",value:"Cada ".concat(t.wateringFrequency," días")},{icon:l.jsx(Lr,{size:20,strokeWidth:2,color:"#555"}),label:"LUZ SOLAR",value:t.sunlightRequirement},{icon:l.jsx(vp,{size:20,strokeWidth:2,color:"#555"}),label:"HUMEDAD",value:t.humidityPreference},{icon:l.jsx(wp,{size:20,strokeWidth:2,color:"#555"}),label:"TEMPERATURA IDEAL",value:"".concat(t.temperatureRange.min,"°C - ").concat(t.temperatureRange.max,"°C")},{icon:l.jsx(Ve,{size:20,strokeWidth:2,color:"#555"}),label:"FERTILIZACIÓN",value:"Cada ".concat(t.fertilizingFrequency," días")},{icon:l.jsx(yc,{size:20,strokeWidth:2,color:"#555"}),label:"TIPO DE SUELO",value:t.soilType}];return l.jsxs("div",{className:"w-full",style:{lineHeight:"1.4"},children:[l.jsx("div",{className:"grid grid-cols-2 gap-x-4 gap-y-6 mb-4",style:{gap:"24px 16px"},children:n.map((a,i)=>l.jsxs("div",{className:"flex flex-col items-start",children:[l.jsxs("div",{className:"flex items-center mb-1",children:[a.icon,l.jsx("span",{className:"ml-2 text-[12px] uppercase tracking-[0.4px] text-[#777] font-medium",children:a.label})]}),l.jsx("span",{className:"text-[15px] font-semibold text-[#333] mt-1",children:a.value})]},i))}),t.specialCare&&t.specialCare.length>0&&l.jsxs("div",{className:"mb-4",children:[l.jsx("h4",{className:"font-semibold text-[14px] text-[#333] mt-4 mb-2",children:"Cuidados Especiales"}),l.jsx("ul",{className:"list-none pl-0 ml-4",style:{lineHeight:"1.5"},children:t.specialCare.map((a,i)=>l.jsxs("li",{className:"flex items-start mb-1",children:[l.jsx("span",{className:"mr-2 text-[#2A7F3E] font-bold",style:{fontSize:18,lineHeight:"1"},children:"•"}),l.jsx("span",{className:"text-[14px] text-[#444]",children:a})]},i))})]}),l.jsx("hr",{className:"my-6",style:{border:"none",borderTop:"1px solid #EEE",margin:"24px 0"}}),r&&l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex items-center mb-3",children:[l.jsx(Ca,{size:20,strokeWidth:2,color:"#555",className:"mr-2"}),l.jsx("span",{className:"text-[18px] font-semibold text-[#333]",children:"Personalidad de la Planta"})]}),r.communicationStyle&&l.jsx("div",{className:Array.isArray(r.communicationStyle)&&r.communicationStyle.length>1?"grid grid-cols-2 gap-x-4 mb-3":"flex justify-center mb-3",children:(Array.isArray(r.communicationStyle)?r.communicationStyle:[r.communicationStyle]).map((a,i)=>l.jsxs("div",{className:"flex flex-col items-start mb-2",children:[l.jsx("span",{className:"text-[12px] uppercase tracking-[0.4px] text-[#777] font-medium",children:"ESTILO"}),l.jsx("span",{className:"text-[15px] font-semibold text-[#333] mt-1",children:a})]},i))}),r.catchphrases&&r.catchphrases.length>0&&l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-[14px] text-[#333] mb-2",children:"Frases Típicas"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:r.catchphrases.map((a,i)=>l.jsx("span",{className:"inline-block bg-[#F0FDF6] text-[#046A38] text-[14px] px-2 py-1 rounded-[4px] font-medium",style:{padding:"4px 8px",marginRight:8,marginBottom:8},children:a},i))})]})]})]})},DE=({funFacts:e})=>{const t={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{staggerChildren:.1}}},r={hidden:{opacity:0,y:10},visible:{opacity:1,y:0}};return l.jsxs(P.div,{className:"bg-white/0 dark:bg-transparent p-3 sm:p-4 w-full",variants:t,initial:"hidden",animate:"visible",children:[e&&e.length>0&&l.jsxs(P.div,{variants:r,children:[l.jsxs("div",{className:"flex items-center mb-6",children:[l.jsx("div",{className:"p-3 bg-yellow-500/10 rounded-full mr-4",children:l.jsx(Ve,{className:"w-6 h-6 text-yellow-500"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-2xl font-bold text-foreground",children:"Datos Curiosos"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Descubre cosas increíbles sobre esta planta"})]})]}),l.jsx("div",{className:"grid gap-4",children:e.map((n,a)=>l.jsxs(P.div,{className:"group flex items-start bg-yellow-500/5 hover:bg-yellow-500/10 border border-yellow-500/20 rounded-xl p-4 transition-all duration-300 hover:shadow-md",variants:r,whileHover:{scale:1.02},whileTap:{scale:.98},children:[l.jsx("div",{className:"flex-shrink-0 mr-4 mt-1",children:l.jsxs("div",{className:"relative",children:[l.jsx(jp,{className:"w-5 h-5 text-yellow-500 group-hover:text-yellow-600 transition-colors"}),l.jsx("div",{className:"absolute -inset-2 bg-yellow-500/20 rounded-full opacity-0 group-hover:opacity-100 transition-opacity pulse"})]})}),l.jsx("p",{className:"text-foreground/90 leading-relaxed font-medium group-hover:text-foreground transition-colors",children:n})]},a))})]}),(!e||e.length===0)&&l.jsx(P.div,{className:"mt-8 flex items-center justify-center p-6 bg-muted/30 rounded-xl border border-dashed border-muted-foreground/20",variants:r,children:l.jsxs("div",{className:"text-center",children:[l.jsx(Ve,{className:"w-6 h-6 text-yellow-400 mx-auto mb-2"}),l.jsx("p",{className:"text-muted-foreground font-medium",children:"No hay datos curiosos disponibles"}),l.jsx("p",{className:"text-xs text-muted-foreground/70 mt-1",children:"¡Pronto agregaremos información interesante!"})]})})]})},$E=()=>l.jsx(Za,{className:"w-5 h-5 text-[#EF9A9A]","aria-label":"Problema de hoja seca"}),zE=({analysis:e})=>{if(!e)return null;const t=e.issues&&e.issues.length>0;return l.jsxs("div",{className:"w-full",role:"region","aria-label":"Análisis de salud de la planta",style:{lineHeight:"1.4"},children:[t?l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-[16px] text-[#333] mt-3",children:"Problemas Detectados"}),l.jsxs("p",{className:"mb-2 text-[14px] text-[#D32F2F] font-medium",style:{marginTop:12,marginBottom:8},children:[e.issues.length," problema",e.issues.length!==1?"s":""," detectado",e.issues.length!==1?"s":""]}),l.jsx("ul",{className:"",children:e.issues.map((r,n)=>l.jsxs("li",{className:"flex items-start",style:{marginBottom:n<e.issues.length-1?16:0,paddingBottom:n<e.issues.length-1?16:0,borderBottom:n<e.issues.length-1?"1px solid #EEE":"none"},children:[l.jsx("div",{className:"flex-shrink-0 w-5 h-5 flex items-center justify-center mt-1",children:$E()}),l.jsxs("div",{className:"ml-4",children:[l.jsx("p",{className:"font-semibold text-[15px] text-[#333]",children:r.type}),l.jsx("p",{className:"text-[14px] text-[#555] mt-1",children:r.description})]})]},n))}),l.jsxs("div",{className:"mt-4",children:[l.jsx("h4",{className:"font-semibold text-[14px] text-[#333] mt-4 mb-2",children:"Tratamientos Sugeridos"}),l.jsx("ul",{className:"list-none pl-0 ml-3",style:{lineHeight:"1.5"},children:e.issues.map((r,n)=>l.jsxs("li",{className:"flex items-start mb-1",children:[l.jsx("span",{className:"mr-2 text-[#2A7F3E] font-bold",style:{fontSize:18,lineHeight:"1"},children:"•"}),l.jsx("span",{className:"text-[14px] text-[#444]",children:r.treatment})]},n))})]})]}):l.jsxs("div",{className:"flex flex-col items-center justify-center text-center p-6 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[l.jsx("span",{className:"text-4xl mb-2",role:"img","aria-label":"Planta saludable",children:"🌱"}),l.jsx(Rb,{className:"w-12 h-12 text-green-500 mb-3","aria-label":"Todo en orden"}),l.jsxs("h4",{className:"font-semibold text-lg text-green-700 dark:text-green-300 flex items-center gap-2",children:["¡Todo en orden!",l.jsx("span",{className:"text-base","aria-hidden":"true",children:"🌱"})]}),l.jsx("p",{className:"text-muted-foreground",children:"El análisis inicial no detectó problemas de salud significativos."})]}),e.recommendations&&e.recommendations.length>0&&l.jsxs("div",{className:"mt-4",children:[l.jsx("h4",{className:"font-semibold text-[14px] text-[#333] mt-4 mb-2",children:"Recomendaciones Adicionales"}),l.jsx("ul",{className:"list-none pl-0 ml-3",style:{lineHeight:"1.5"},children:e.recommendations.map((r,n)=>l.jsxs("li",{className:"flex items-start mb-1",children:[l.jsx("span",{className:"mr-2 text-[#2A7F3E] font-bold",style:{fontSize:18,lineHeight:"1"},children:"•"}),l.jsx("span",{className:"text-[14px] text-[#444]",children:r})]},n))})]})]})};var Lo={},Ng={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(Ng);var $c={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})($c);var zc={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(zc);var Fo={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){const n=[],a=r.length;if(a===0)return n;let i=0,o="",s="",c=!1;for(r.charCodeAt(0)===46&&(n.push(""),i++);i<a;){const u=r[i];s?u==="\\"&&i+1<a?(i++,o+=r[i]):u===s?s="":o+=u:c?u==='"'||u==="'"?s=u:u==="]"?(c=!1,n.push(o),o=""):o+=u:u==="["?(c=!0,o&&(n.push(o),o="")):u==="."?o&&(n.push(o),o=""):o+=u,i++}return o&&n.push(o),n}e.toPath=t})(Fo);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ng,r=$c,n=zc,a=Fo;function i(s,c,u){if(s==null)return u;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return u;const d=s[c];return d===void 0?r.isDeepKey(c)?i(s,a.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const d=s[c];return d===void 0?u:d}default:{if(Array.isArray(c))return o(s,c,u);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return u;const d=s[c];return d===void 0?u:d}}}function o(s,c,u){if(c.length===0)return u;let d=s;for(let f=0;f<c.length;f++){if(d==null||t.isUnsafeProperty(c[f]))return u;d=d[c[f]]}return d===void 0?u:d}e.get=i})(Lo);var RE=Lo.get;const wn=Hr(RE);var kg={exports:{}},he={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rc=Symbol.for("react.transitional.element"),Lc=Symbol.for("react.portal"),Bo=Symbol.for("react.fragment"),Uo=Symbol.for("react.strict_mode"),Wo=Symbol.for("react.profiler"),Ho=Symbol.for("react.consumer"),qo=Symbol.for("react.context"),Zo=Symbol.for("react.forward_ref"),Ko=Symbol.for("react.suspense"),Go=Symbol.for("react.suspense_list"),Vo=Symbol.for("react.memo"),Yo=Symbol.for("react.lazy"),LE=Symbol.for("react.view_transition"),FE=Symbol.for("react.client.reference");function zt(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Rc:switch(e=e.type,e){case Bo:case Wo:case Uo:case Ko:case Go:case LE:return e;default:switch(e=e&&e.$$typeof,e){case qo:case Zo:case Yo:case Vo:return e;case Ho:return e;default:return t}}case Lc:return t}}}he.ContextConsumer=Ho;he.ContextProvider=qo;he.Element=Rc;he.ForwardRef=Zo;he.Fragment=Bo;he.Lazy=Yo;he.Memo=Vo;he.Portal=Lc;he.Profiler=Wo;he.StrictMode=Uo;he.Suspense=Ko;he.SuspenseList=Go;he.isContextConsumer=function(e){return zt(e)===Ho};he.isContextProvider=function(e){return zt(e)===qo};he.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Rc};he.isForwardRef=function(e){return zt(e)===Zo};he.isFragment=function(e){return zt(e)===Bo};he.isLazy=function(e){return zt(e)===Yo};he.isMemo=function(e){return zt(e)===Vo};he.isPortal=function(e){return zt(e)===Lc};he.isProfiler=function(e){return zt(e)===Wo};he.isStrictMode=function(e){return zt(e)===Uo};he.isSuspense=function(e){return zt(e)===Ko};he.isSuspenseList=function(e){return zt(e)===Go};he.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Bo||e===Wo||e===Uo||e===Ko||e===Go||typeof e=="object"&&e!==null&&(e.$$typeof===Yo||e.$$typeof===Vo||e.$$typeof===qo||e.$$typeof===Ho||e.$$typeof===Zo||e.$$typeof===FE||e.getModuleId!==void 0)};he.typeOf=zt;kg.exports=he;var BE=kg.exports,Ot=e=>e===0?0:e>0?1:-1,Mt=e=>typeof e=="number"&&e!=+e,rn=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,W=e=>(typeof e=="number"||e instanceof Number)&&!Mt(e),ar=e=>W(e)||typeof e=="string",UE=0,Da=e=>{var t=++UE;return"".concat(e||"").concat(t)},Ur=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!W(t)&&typeof t!="string")return n;var i;if(rn(t)){if(r==null)return n;var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return Mt(i)&&(i=n),a&&r!=null&&i>r&&(i=r),i},Pg=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1},ga=(e,t)=>W(e)&&W(t)?r=>e+r*(t-e):()=>t;function Eg(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):wn(n,t))===r)}var _e=e=>e===null||typeof e>"u",Fc=e=>_e(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),WE=["viewBox","children"],HE=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],hf=["points","pathLength"],zs={svg:WE,polygon:hf,polyline:hf},Bc=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Uc=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(y.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(a=>{Bc.includes(a)&&(n[a]=i=>r[a](r,i))}),n},qE=(e,t,r)=>n=>(e(t,r,n),null),ZE=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(a=>{var i=e[a];Bc.includes(a)&&typeof i=="function"&&(n||(n={}),n[a]=qE(i,t,r))}),n},pf=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",gf=null,Rs=null,_g=e=>{if(e===gf&&Array.isArray(Rs))return Rs;var t=[];return y.Children.forEach(e,r=>{_e(r)||(BE.isFragment(r)?t=t.concat(_g(r.props.children)):t.push(r))}),Rs=t,gf=e,t};function Ag(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(a=>pf(a)):n=[pf(t)],_g(e).forEach(a=>{var i=wn(a,"type.displayName")||wn(a,"type.name");n.indexOf(i)!==-1&&r.push(a)}),r}var Cg=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,KE=(e,t,r,n)=>{var a,i=(a=n&&(zs==null?void 0:zs[n]))!==null&&a!==void 0?a:[];return t.startsWith("data-")||typeof e!="function"&&(n&&i.includes(t)||HE.includes(t))||r&&Bc.includes(t)},ye=(e,t,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(y.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var a={};return Object.keys(n).forEach(i=>{var o;KE((o=n)===null||o===void 0?void 0:o[i],i,t,r)&&(a[i]=n[i])}),a},GE=["children","width","height","viewBox","className","style","title","desc"];function kl(){return kl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kl.apply(null,arguments)}function VE(e,t){if(e==null)return{};var r,n,a=YE(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function YE(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Og=y.forwardRef((e,t)=>{var{children:r,width:n,height:a,viewBox:i,className:o,style:s,title:c,desc:u}=e,d=VE(e,GE),f=i||{width:n,height:a,x:0,y:0},m=fe("recharts-surface",o);return y.createElement("svg",kl({},ye(d,!0,"svg"),{className:m,width:n,height:a,style:s,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),y.createElement("title",null,c),y.createElement("desc",null,u),r)}),XE=["children","className"];function Pl(){return Pl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pl.apply(null,arguments)}function QE(e,t){if(e==null)return{};var r,n,a=JE(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function JE(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Wr=y.forwardRef((e,t)=>{var{children:r,className:n}=e,a=QE(e,XE),i=fe("recharts-layer",n);return y.createElement("g",Pl({className:i},ye(a,!0),{ref:t}),r)}),e_=y.createContext(null);function Ee(e){return function(){return e}}const El=Math.PI,_l=2*El,Jr=1e-6,t_=_l-Jr;function Tg(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function r_(e){let t=Math.floor(e);if(!(t>=0))throw new Error("invalid digits: ".concat(e));if(t>15)return Tg;const r=10**t;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}var Kh,Gh,Vh,Yh,Xh,Qh,Jh,ep,tp,rp,np,ap,ip,op;class n_{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Tg:r_(t)}moveTo(t,r){this._append(Kh||(Kh=at(["M",",",""])),this._x0=this._x1=+t,this._y0=this._y1=+r)}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append(Gh||(Gh=at(["Z"]))))}lineTo(t,r){this._append(Vh||(Vh=at(["L",",",""])),this._x1=+t,this._y1=+r)}quadraticCurveTo(t,r,n,a){this._append(Yh||(Yh=at(["Q",",",",",",",""])),+t,+r,this._x1=+n,this._y1=+a)}bezierCurveTo(t,r,n,a,i,o){this._append(Xh||(Xh=at(["C",",",",",",",",",",",""])),+t,+r,+n,+a,this._x1=+i,this._y1=+o)}arcTo(t,r,n,a,i){if(t=+t,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error("negative radius: ".concat(i));let o=this._x1,s=this._y1,c=n-t,u=a-r,d=o-t,f=s-r,m=d*d+f*f;if(this._x1===null)this._append(Qh||(Qh=at(["M",",",""])),this._x1=t,this._y1=r);else if(m>Jr)if(!(Math.abs(f*c-u*d)>Jr)||!i)this._append(Jh||(Jh=at(["L",",",""])),this._x1=t,this._y1=r);else{let h=n-o,g=a-s,v=c*c+u*u,p=h*h+g*g,x=Math.sqrt(v),b=Math.sqrt(m),w=i*Math.tan((El-Math.acos((v+m-p)/(2*x*b)))/2),j=w/b,S=w/x;Math.abs(j-1)>Jr&&this._append(ep||(ep=at(["L",",",""])),t+j*d,r+j*f),this._append(tp||(tp=at(["A",",",",0,0,",",",",",""])),i,i,+(f*h>d*g),this._x1=t+S*c,this._y1=r+S*u)}}arc(t,r,n,a,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error("negative radius: ".concat(n));let s=n*Math.cos(a),c=n*Math.sin(a),u=t+s,d=r+c,f=1^o,m=o?a-i:i-a;this._x1===null?this._append(rp||(rp=at(["M",",",""])),u,d):(Math.abs(this._x1-u)>Jr||Math.abs(this._y1-d)>Jr)&&this._append(np||(np=at(["L",",",""])),u,d),n&&(m<0&&(m=m%_l+_l),m>t_?this._append(ap||(ap=at(["A",",",",0,1,",",",",","A",",",",0,1,",",",",",""])),n,n,f,t-s,r-c,n,n,f,this._x1=u,this._y1=d):m>Jr&&this._append(ip||(ip=at(["A",",",",0,",",",",",",",""])),n,n,+(m>=El),f,this._x1=t+n*Math.cos(i),this._y1=r+n*Math.sin(i)))}rect(t,r,n,a){this._append(op||(op=at(["M",",","h","v","h","Z"])),this._x0=this._x1=+t,this._y0=this._y1=+r,n=+n,+a,-n)}toString(){return this._}}function Ig(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError("invalid digits: ".concat(r));t=n}return e},()=>new n_(t)}function Wc(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Mg(e){this._context=e}Mg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Xo(e){return new Mg(e)}function Dg(e){return e[0]}function $g(e){return e[1]}function zg(e,t){var r=Ee(!0),n=null,a=Xo,i=null,o=Ig(s);e=typeof e=="function"?e:e===void 0?Dg:Ee(e),t=typeof t=="function"?t:t===void 0?$g:Ee(t);function s(c){var u,d=(c=Wc(c)).length,f,m=!1,h;for(n==null&&(i=a(h=o())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===m&&((m=!m)?i.lineStart():i.lineEnd()),m&&i.point(+e(f,u,c),+t(f,u,c));if(h)return i=null,h+""||null}return s.x=function(c){return arguments.length?(e=typeof c=="function"?c:Ee(+c),s):e},s.y=function(c){return arguments.length?(t=typeof c=="function"?c:Ee(+c),s):t},s.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Ee(!!c),s):r},s.curve=function(c){return arguments.length?(a=c,n!=null&&(i=a(n)),s):a},s.context=function(c){return arguments.length?(c==null?n=i=null:i=a(n=c),s):n},s}function yi(e,t,r){var n=null,a=Ee(!0),i=null,o=Xo,s=null,c=Ig(u);e=typeof e=="function"?e:e===void 0?Dg:Ee(+e),t=typeof t=="function"?t:Ee(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?$g:Ee(+r);function u(f){var m,h,g,v=(f=Wc(f)).length,p,x=!1,b,w=new Array(v),j=new Array(v);for(i==null&&(s=o(b=c())),m=0;m<=v;++m){if(!(m<v&&a(p=f[m],m,f))===x)if(x=!x)h=m,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),g=m-1;g>=h;--g)s.point(w[g],j[g]);s.lineEnd(),s.areaEnd()}x&&(w[m]=+e(p,m,f),j[m]=+t(p,m,f),s.point(n?+n(p,m,f):w[m],r?+r(p,m,f):j[m]))}if(b)return s=null,b+""||null}function d(){return zg().defined(a).curve(o).context(i)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:Ee(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Ee(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Ee(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:Ee(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Ee(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Ee(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:Ee(!!f),u):a},u.curve=function(f){return arguments.length?(o=f,i!=null&&(s=o(i)),u):o},u.context=function(f){return arguments.length?(f==null?i=s=null:s=o(i=f),u):i},u}class Rg{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function a_(e){return new Rg(e,!0)}function i_(e){return new Rg(e,!1)}function Zi(){}function Ki(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function Lg(e){this._context=e}Lg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ki(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ki(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function o_(e){return new Lg(e)}function Fg(e){this._context=e}Fg.prototype={areaStart:Zi,areaEnd:Zi,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Ki(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function s_(e){return new Fg(e)}function Bg(e){this._context=e}Bg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Ki(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function l_(e){return new Bg(e)}function Ug(e){this._context=e}Ug.prototype={areaStart:Zi,areaEnd:Zi,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function c_(e){return new Ug(e)}function vf(e){return e<0?-1:1}function yf(e,t,r){var n=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(n||a<0&&-0),o=(r-e._y1)/(a||n<0&&-0),s=(i*a+o*n)/(n+a);return(vf(i)+vf(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(s))||0}function xf(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Ls(e,t,r){var n=e._x0,a=e._y0,i=e._x1,o=e._y1,s=(i-n)/3;e._context.bezierCurveTo(n+s,a+s*t,i-s,o-s*r,i,o)}function Gi(e){this._context=e}Gi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ls(this,this._t0,xf(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Ls(this,xf(this,r=yf(this,e,t)),r);break;default:Ls(this,this._t0,r=yf(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function Wg(e){this._context=new Hg(e)}(Wg.prototype=Object.create(Gi.prototype)).point=function(e,t){Gi.prototype.point.call(this,t,e)};function Hg(e){this._context=e}Hg.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,i){this._context.bezierCurveTo(t,e,n,r,i,a)}};function u_(e){return new Gi(e)}function d_(e){return new Wg(e)}function qg(e){this._context=e}qg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=bf(e),a=bf(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function bf(e){var t,r=e.length-1,n,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(a[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function f_(e){return new qg(e)}function Qo(e,t){this._context=e,this._t=t}Qo.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function m_(e){return new Qo(e,.5)}function h_(e){return new Qo(e,0)}function p_(e){return new Qo(e,1)}function qn(e,t){if((o=e.length)>1)for(var r=1,n,a,i=e[t[0]],o,s=i.length;r<o;++r)for(a=i,i=e[t[r]],n=0;n<s;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function Al(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function g_(e,t){return e[t]}function v_(e){const t=[];return t.key=e,t}function y_(){var e=Ee([]),t=Al,r=qn,n=g_;function a(i){var o=Array.from(e.apply(this,arguments),v_),s,c=o.length,u=-1,d;for(const f of i)for(s=0,++u;s<c;++s)(o[s][u]=[0,+n(f,o[s].key,u,i)]).data=f;for(s=0,d=Wc(t(o));s<c;++s)o[d[s]].index=s;return r(o,d),o}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Ee(Array.from(i)),a):e},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:Ee(+i),a):n},a.order=function(i){return arguments.length?(t=i==null?Al:typeof i=="function"?i:Ee(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(r=i==null?qn:i,a):r},a}function x_(e,t){if((n=e.length)>0){for(var r,n,a=0,i=e[0].length,o;a<i;++a){for(o=r=0;r<n;++r)o+=e[r][a][1]||0;if(o)for(r=0;r<n;++r)e[r][a][1]/=o}qn(e,t)}}function b_(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,i=n.length;r<i;++r){for(var o=0,s=0;o<a;++o)s+=e[o][r][1]||0;n[r][1]+=n[r][0]=-s/2}qn(e,t)}}function w_(e,t){if(!(!((o=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,i,o;n<i;++n){for(var s=0,c=0,u=0;s<o;++s){for(var d=e[t[s]],f=d[n][1]||0,m=d[n-1][1]||0,h=(f-m)/2,g=0;g<s;++g){var v=e[t[g]],p=v[n][1]||0,x=v[n-1][1]||0;h+=p-x}c+=f,u+=h*f}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,qn(e,t)}}var Zg={},Kg={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const a=new Map;for(let i=0;i<r.length;i++){const o=r[i],s=n(o);a.has(s)||a.set(s,o)}return Array.from(a.values())}e.uniqBy=t})(Kg);var Hc={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(Hc);var Gg={},Jo={},Vg={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(Vg);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Vg;function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(Jo);var Yg={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(Yg);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Jo,r=Yg;function n(a){return r.isObjectLike(a)&&t.isArrayLike(a)}e.isArrayLikeObject=n})(Gg);var Xg={},Qg={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Lo;function r(n){return function(a){return t.get(a,n)}}e.property=r})(Qg);var Jg={},Fs={},Bs={},qc={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(qc);var Zc={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(Zc);var es={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(es);var wf;function j_(){return wf||(wf=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Kc(),r=qc,n=Zc,a=es;function i(f,m,h){return typeof h!="function"?t.isMatch(f,m):o(f,m,function g(v,p,x,b,w,j){const S=h(v,p,x,b,w,j);return S!==void 0?!!S:o(v,p,g,j)},new Map)}function o(f,m,h,g){if(m===f)return!0;switch(typeof m){case"object":return s(f,m,h,g);case"function":return Object.keys(m).length>0?o(f,{...m},h,g):a.eq(f,m);default:return r.isObject(f)?typeof m=="string"?m==="":!0:a.eq(f,m)}}function s(f,m,h,g){if(m==null)return!0;if(Array.isArray(m))return u(f,m,h,g);if(m instanceof Map)return c(f,m,h,g);if(m instanceof Set)return d(f,m,h,g);const v=Object.keys(m);if(f==null)return v.length===0;if(v.length===0)return!0;if(g&&g.has(m))return g.get(m)===f;g&&g.set(m,f);try{for(let p=0;p<v.length;p++){const x=v[p];if(!n.isPrimitive(f)&&!(x in f)||m[x]===void 0&&f[x]!==void 0||m[x]===null&&f[x]!==null||!h(f[x],m[x],x,f,m,g))return!1}return!0}finally{g&&g.delete(m)}}function c(f,m,h,g){if(m.size===0)return!0;if(!(f instanceof Map))return!1;for(const[v,p]of m.entries()){const x=f.get(v);if(h(x,p,v,f,m,g)===!1)return!1}return!0}function u(f,m,h,g){if(m.length===0)return!0;if(!Array.isArray(f))return!1;const v=new Set;for(let p=0;p<m.length;p++){const x=m[p];let b=!1;for(let w=0;w<f.length;w++){if(v.has(w))continue;const j=f[w];let S=!1;if(h(j,x,p,f,m,g)&&(S=!0),S){v.add(w),b=!0;break}}if(!b)return!1}return!0}function d(f,m,h,g){return m.size===0?!0:f instanceof Set?u([...f],[...m],h,g):!1}e.isMatchWith=i,e.isSetMatch=d}(Bs)),Bs}var jf;function Kc(){return jf||(jf=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=j_();function r(n,a){return t.isMatchWith(n,a,()=>{})}e.isMatch=r}(Fs)),Fs}var ev={},Gc={},Vc={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(Vc);var ts={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(ts);var rs={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",a="[object Boolean]",i="[object Arguments]",o="[object Symbol]",s="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",f="[object Function]",m="[object ArrayBuffer]",h="[object Object]",g="[object Error]",v="[object DataView]",p="[object Uint8Array]",x="[object Uint8ClampedArray]",b="[object Uint16Array]",w="[object Uint32Array]",j="[object BigUint64Array]",S="[object Int8Array]",N="[object Int16Array]",k="[object Int32Array]",A="[object BigInt64Array]",C="[object Float32Array]",D="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=m,e.arrayTag=d,e.bigInt64ArrayTag=A,e.bigUint64ArrayTag=j,e.booleanTag=a,e.dataViewTag=v,e.dateTag=s,e.errorTag=g,e.float32ArrayTag=C,e.float64ArrayTag=D,e.functionTag=f,e.int16ArrayTag=N,e.int32ArrayTag=k,e.int8ArrayTag=S,e.mapTag=c,e.numberTag=n,e.objectTag=h,e.regexpTag=t,e.setTag=u,e.stringTag=r,e.symbolTag=o,e.uint16ArrayTag=b,e.uint32ArrayTag=w,e.uint8ArrayTag=p,e.uint8ClampedArrayTag=x})(rs);var tv={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(tv);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Vc,r=ts,n=rs,a=Zc,i=tv;function o(d,f){return s(d,void 0,d,new Map,f)}function s(d,f,m,h=new Map,g=void 0){const v=g==null?void 0:g(d,f,m,h);if(v!=null)return v;if(a.isPrimitive(d))return d;if(h.has(d))return h.get(d);if(Array.isArray(d)){const p=new Array(d.length);h.set(d,p);for(let x=0;x<d.length;x++)p[x]=s(d[x],x,m,h,g);return Object.hasOwn(d,"index")&&(p.index=d.index),Object.hasOwn(d,"input")&&(p.input=d.input),p}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const p=new RegExp(d.source,d.flags);return p.lastIndex=d.lastIndex,p}if(d instanceof Map){const p=new Map;h.set(d,p);for(const[x,b]of d)p.set(x,s(b,x,m,h,g));return p}if(d instanceof Set){const p=new Set;h.set(d,p);for(const x of d)p.add(s(x,void 0,m,h,g));return p}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(i.isTypedArray(d)){const p=new(Object.getPrototypeOf(d)).constructor(d.length);h.set(d,p);for(let x=0;x<d.length;x++)p[x]=s(d[x],x,m,h,g);return p}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const p=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return h.set(d,p),c(p,d,m,h,g),p}if(typeof File<"u"&&d instanceof File){const p=new File([d],d.name,{type:d.type});return h.set(d,p),c(p,d,m,h,g),p}if(d instanceof Blob){const p=new Blob([d],{type:d.type});return h.set(d,p),c(p,d,m,h,g),p}if(d instanceof Error){const p=new d.constructor;return h.set(d,p),p.message=d.message,p.name=d.name,p.stack=d.stack,p.cause=d.cause,c(p,d,m,h,g),p}if(typeof d=="object"&&u(d)){const p=Object.create(Object.getPrototypeOf(d));return h.set(d,p),c(p,d,m,h,g),p}return d}function c(d,f,m=d,h,g){const v=[...Object.keys(f),...t.getSymbols(f)];for(let p=0;p<v.length;p++){const x=v[p],b=Object.getOwnPropertyDescriptor(d,x);(b==null||b.writable)&&(d[x]=s(f[x],x,m,h,g))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=s,e.copyProperties=c})(Gc);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Gc;function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(ev);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Kc(),r=ev;function n(a){return a=r.cloneDeep(a),i=>t.isMatch(i,a)}e.matches=n})(Jg);var rv={},nv={},av={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Gc,r=rs;function n(a,i){return t.cloneDeepWith(a,(o,s,c,u)=>{const d=i==null?void 0:i(o,s,c,u);if(d!=null)return d;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new a.constructor(a==null?void 0:a.valueOf());return t.copyProperties(f,a),f}case r.argumentsTag:{const f={};return t.copyProperties(f,a),f.length=a.length,f[Symbol.iterator]=a[Symbol.iterator],f}default:return}})}e.cloneDeepWith=n})(av);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=av;function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(nv);var iv={},Yc={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,a=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<a;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(Yc);var ov={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ts;function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(ov);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$c,r=Yc,n=ov,a=Fo;function i(o,s){let c;if(Array.isArray(s)?c=s:typeof s=="string"&&t.isDeepKey(s)&&(o==null?void 0:o[s])==null?c=a.toPath(s):c=[s],c.length===0)return!1;let u=o;for(let d=0;d<c.length;d++){const f=c[d];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}e.has=i})(iv);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Kc(),r=zc,n=nv,a=Lo,i=iv;function o(s,c){switch(typeof s){case"object":{Object.is(s==null?void 0:s.valueOf(),-0)&&(s="-0");break}case"number":{s=r.toKey(s);break}}return c=n.cloneDeep(c),function(u){const d=a.get(u,s);return d===void 0?i.has(u,s):c===void 0?d===void 0:t.isMatch(d,c)}}e.matchesProperty=o})(rv);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Hc,r=Qg,n=Jg,a=rv;function i(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?a.matchesProperty(o[0],o[1]):n.matches(o);case"string":case"symbol":case"number":return r.property(o)}}e.iteratee=i})(Xg);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Kg,r=Hc,n=Gg,a=Xg;function i(o,s=r.identity){return n.isArrayLikeObject(o)?t.uniqBy(Array.from(o),a.iteratee(s)):[]}e.uniqBy=i})(Zg);var S_=Zg.uniqBy;const Sf=Hr(S_);function N_(e,t,r){return t===!0?Sf(e,r):typeof t=="function"?Sf(e,t):e}var sv={exports:{}},lv={},cv={exports:{}},uv={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zn=y;function k_(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var P_=typeof Object.is=="function"?Object.is:k_,E_=Zn.useState,__=Zn.useEffect,A_=Zn.useLayoutEffect,C_=Zn.useDebugValue;function O_(e,t){var r=t(),n=E_({inst:{value:r,getSnapshot:t}}),a=n[0].inst,i=n[1];return A_(function(){a.value=r,a.getSnapshot=t,Us(a)&&i({inst:a})},[e,r,t]),__(function(){return Us(a)&&i({inst:a}),e(function(){Us(a)&&i({inst:a})})},[e]),C_(r),r}function Us(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!P_(e,r)}catch(n){return!0}}function T_(e,t){return t()}var I_=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?T_:O_;uv.useSyncExternalStore=Zn.useSyncExternalStore!==void 0?Zn.useSyncExternalStore:I_;cv.exports=uv;var M_=cv.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ns=y,D_=M_;function $_(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var z_=typeof Object.is=="function"?Object.is:$_,R_=D_.useSyncExternalStore,L_=ns.useRef,F_=ns.useEffect,B_=ns.useMemo,U_=ns.useDebugValue;lv.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var i=L_(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=B_(function(){function c(h){if(!u){if(u=!0,d=h,h=n(h),a!==void 0&&o.hasValue){var g=o.value;if(a(g,h))return f=g}return f=h}if(g=f,z_(d,h))return g;var v=n(h);return a!==void 0&&a(g,v)?(d=h,g):(d=h,f=v)}var u=!1,d,f,m=r===void 0?null:r;return[function(){return c(t())},m===null?void 0:function(){return c(m())}]},[t,r,n,a]);var s=R_(e,i[0],i[1]);return F_(function(){o.hasValue=!0,o.value=s},[s]),U_(s),s};sv.exports=lv;var W_=sv.exports,Xc=y.createContext(null),H_=e=>e,st=()=>{var e=y.useContext(Xc);return e?e.store.dispatch:H_},zi=()=>{},q_=()=>zi,Z_=(e,t)=>e===t;function K(e){var t=y.useContext(Xc);return W_.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:q_,t?t.store.getState:zi,t?t.store.getState:zi,t?e:zi,Z_)}function K_(e,t="expected a function, instead received ".concat(typeof e)){if(typeof e!="function")throw new TypeError(t)}function G_(e,t="expected an object, instead received ".concat(typeof e)){if(typeof e!="object")throw new TypeError(t)}function V_(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?"function ".concat(n.name||"unnamed","()"):typeof n).join(", ");throw new TypeError("".concat(t,"[").concat(r,"]"))}}var Nf=e=>Array.isArray(e)?e:[e];function Y_(e){const t=Array.isArray(e[0])?e[0]:e;return V_(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function X_(e,t){const r=[],{length:n}=e;for(let a=0;a<n;a++)r.push(e[a].apply(null,t));return r}var Q_=class{constructor(e){this.value=e}deref(){return this.value}},J_=typeof WeakRef<"u"?WeakRef:Q_,eA=0,kf=1;function xi(){return{s:eA,v:void 0,o:null,p:null}}function dv(e,t={}){let r=xi();const{resultEqualityCheck:n}=t;let a,i=0;function o(){var f,m;let s=r;const{length:c}=arguments;for(let h=0,g=c;h<g;h++){const v=arguments[h];if(typeof v=="function"||typeof v=="object"&&v!==null){let p=s.o;p===null&&(s.o=p=new WeakMap);const x=p.get(v);x===void 0?(s=xi(),p.set(v,s)):s=x}else{let p=s.p;p===null&&(s.p=p=new Map);const x=p.get(v);x===void 0?(s=xi(),p.set(v,s)):s=x}}const u=s;let d;if(s.s===kf)d=s.v;else if(d=e.apply(null,arguments),i++,n){const h=(m=(f=a==null?void 0:a.deref)==null?void 0:f.call(a))!=null?m:a;h!=null&&n(h,d)&&(d=h,i!==0&&i--),a=typeof d=="object"&&d!==null||typeof d=="function"?new J_(d):d}return u.s=kf,u.v=d,d}return o.clearCache=()=>{r=xi(),o.resetResultsCount()},o.resultsCount=()=>i,o.resetResultsCount=()=>{i=0},o}function tA(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...a)=>{let i=0,o=0,s,c={},u=a.pop();typeof u=="object"&&(c=u,u=a.pop()),K_(u,"createSelector expects an output function after the inputs, but received: [".concat(typeof u,"]"));const d={...r,...c},{memoize:f,memoizeOptions:m=[],argsMemoize:h=dv,argsMemoizeOptions:g=[]}=d,v=Nf(m),p=Nf(g),x=Y_(a),b=f(function(){return i++,u.apply(null,arguments)},...v),w=h(function(){o++;const S=X_(x,arguments);return s=b.apply(null,S),s},...p);return Object.assign(w,{resultFunc:u,memoizedResultFunc:b,dependencies:x,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>s,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:f,argsMemoize:h})};return Object.assign(n,{withTypes:()=>n}),n}var E=tA(dv),rA=Object.assign((e,t=E)=>{G_(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ".concat(typeof e));const r=Object.keys(e),n=r.map(i=>e[i]);return t(n,(...i)=>i.reduce((o,s,c)=>(o[r[c]]=s,o),{}))},{withTypes:()=>rA}),fv={},mv={},hv={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,a,i)=>{if(n!==a){const o=t(n),s=t(a);if(o===s&&o===0){if(n<a)return i==="desc"?1:-1;if(n>a)return i==="desc"?-1:1}return i==="desc"?s-o:o-s}return 0};e.compareValues=r})(hv);var pv={},Qc={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(Qc);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Qc,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(i,o){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(n.test(i)||!r.test(i))||o!=null&&Object.hasOwn(o,i)}e.isKey=a})(pv);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hv,r=pv,n=Fo;function a(i,o,s,c){if(i==null)return[];s=c?void 0:s,Array.isArray(i)||(i=Object.values(i)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(s)||(s=s==null?[]:[s]),s=s.map(h=>String(h));const u=(h,g)=>{let v=h;for(let p=0;p<g.length&&v!=null;++p)v=v[g[p]];return v},d=(h,g)=>g==null||h==null?g:typeof h=="object"&&"key"in h?Object.hasOwn(g,h.key)?g[h.key]:u(g,h.path):typeof h=="function"?h(g):Array.isArray(h)?u(g,h):typeof g=="object"?g[h]:g,f=o.map(h=>(Array.isArray(h)&&h.length===1&&(h=h[0]),h==null||typeof h=="function"||Array.isArray(h)||r.isKey(h)?h:{key:h,path:n.toPath(h)}));return i.map(h=>({original:h,criteria:f.map(g=>d(g,h))})).slice().sort((h,g)=>{for(let v=0;v<f.length;v++){const p=t.compareValues(h.criteria[v],g.criteria[v],s[v]);if(p!==0)return p}return 0}).map(h=>h.original)}e.orderBy=a})(mv);var gv={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const a=[],i=Math.floor(n),o=(s,c)=>{for(let u=0;u<s.length;u++){const d=s[u];Array.isArray(d)&&c<i?o(d,c+1):a.push(d)}};return o(r,0),a}e.flatten=t})(gv);var Jc={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Yc,r=Jo,n=qc,a=es;function i(o,s,c){return n.isObject(c)&&(typeof s=="number"&&r.isArrayLike(c)&&t.isIndex(s)&&s<c.length||typeof s=="string"&&s in c)?a.eq(c[s],o):!1}e.isIterateeCall=i})(Jc);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mv,r=gv,n=Jc;function a(i,...o){const s=o.length;return s>1&&n.isIterateeCall(i,o[0],o[1])?o=[]:s>2&&n.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(i,r.flatten(o),["asc"])}e.sortBy=a})(fv);var nA=fv.sortBy;const as=Hr(nA);var vv=e=>e.legend.settings,aA=e=>e.legend.size,iA=e=>e.legend.payload;E([iA,vv],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?as(n,r):n});var bi=1;function oA(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=y.useState({height:0,left:0,top:0,width:0}),n=y.useCallback(a=>{if(a!=null){var i=a.getBoundingClientRect(),o={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(o.height-t.height)>bi||Math.abs(o.left-t.left)>bi||Math.abs(o.top-t.top)>bi||Math.abs(o.width-t.width)>bi)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function Ze(e){return"Minified Redux error #".concat(e,"; visit https://redux.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}var sA=typeof Symbol=="function"&&Symbol.observable||"@@observable",Pf=sA,Ws=()=>Math.random().toString(36).substring(7).split("").join("."),lA={INIT:"@@redux/INIT".concat(Ws()),REPLACE:"@@redux/REPLACE".concat(Ws()),PROBE_UNKNOWN_ACTION:()=>"@@redux/PROBE_UNKNOWN_ACTION".concat(Ws())},Vi=lA;function eu(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function yv(e,t,r){if(typeof e!="function")throw new Error(Ze(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Ze(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Ze(1));return r(yv)(e,t)}let n=e,a=t,i=new Map,o=i,s=0,c=!1;function u(){o===i&&(o=new Map,i.forEach((p,x)=>{o.set(x,p)}))}function d(){if(c)throw new Error(Ze(3));return a}function f(p){if(typeof p!="function")throw new Error(Ze(4));if(c)throw new Error(Ze(5));let x=!0;u();const b=s++;return o.set(b,p),function(){if(x){if(c)throw new Error(Ze(6));x=!1,u(),o.delete(b),i=null}}}function m(p){if(!eu(p))throw new Error(Ze(7));if(typeof p.type>"u")throw new Error(Ze(8));if(typeof p.type!="string")throw new Error(Ze(17));if(c)throw new Error(Ze(9));try{c=!0,a=n(a,p)}finally{c=!1}return(i=o).forEach(b=>{b()}),p}function h(p){if(typeof p!="function")throw new Error(Ze(10));n=p,m({type:Vi.REPLACE})}function g(){const p=f;return{subscribe(x){if(typeof x!="object"||x===null)throw new Error(Ze(11));function b(){const j=x;j.next&&j.next(d())}return b(),{unsubscribe:p(b)}},[Pf](){return this}}}return m({type:Vi.INIT}),{dispatch:m,subscribe:f,getState:d,replaceReducer:h,[Pf]:g}}function cA(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:Vi.INIT})>"u")throw new Error(Ze(12));if(typeof r(void 0,{type:Vi.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ze(13))})}function xv(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const o=t[i];typeof e[o]=="function"&&(r[o]=e[o])}const n=Object.keys(r);let a;try{cA(r)}catch(i){a=i}return function(o={},s){if(a)throw a;let c=!1;const u={};for(let d=0;d<n.length;d++){const f=n[d],m=r[f],h=o[f],g=m(h,s);if(typeof g>"u")throw s&&s.type,new Error(Ze(14));u[f]=g,c=c||g!==h}return c=c||n.length!==Object.keys(o).length,c?u:o}}function Yi(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function uA(...e){return t=>(r,n)=>{const a=t(r,n);let i=()=>{throw new Error(Ze(15))};const o={getState:a.getState,dispatch:(c,...u)=>i(c,...u)},s=e.map(c=>c(o));return i=Yi(...s)(a.dispatch),{...a,dispatch:i}}}function bv(e){return eu(e)&&"type"in e&&typeof e.type=="string"}function wv(e){return({dispatch:r,getState:n})=>a=>i=>typeof i=="function"?i(r,n,e):a(i)}var dA=wv(),fA=wv,mA=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Yi:Yi.apply(null,arguments)};function Dt(e,t){function r(...n){if(t){let a=t(...n);if(!a)throw new Error(St(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:n[0]}}return r.toString=()=>"".concat(e),r.type=e,r.match=n=>bv(n)&&n.type===e,r}var jv=class Na extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Na.prototype)}static get[Symbol.species](){return Na}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Na(...t[0].concat(this)):new Na(...t.concat(this))}};function Ef(e){return yr(e)?cr(e,()=>{}):e}function wi(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function hA(e){return typeof e=="boolean"}var pA=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:i=!0}=t!=null?t:{};let o=new jv;return r&&(hA(r)?o.push(dA):o.push(fA(r.extraArgument))),o},gA="RTK_autoBatch",_f=e=>t=>{setTimeout(t,e)},vA=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let a=!0,i=!1,o=!1;const s=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:_f(10):e.type==="callback"?e.queueNotification:_f(e.timeout),u=()=>{o=!1,i&&(i=!1,s.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const f=()=>a&&d(),m=n.subscribe(f);return s.add(d),()=>{m(),s.delete(d)}},dispatch(d){var f;try{return a=!((f=d==null?void 0:d.meta)!=null&&f[gA]),i=!a,i&&(o||(o=!0,c(u))),n.dispatch(d)}finally{a=!0}}})},yA=e=>function(r){const{autoBatch:n=!0}=r!=null?r:{};let a=new jv(e);return n&&a.push(vA(typeof n=="object"?n:void 0)),a};function xA(e){const t=pA(),{reducer:r=void 0,middleware:n,devTools:a=!0,preloadedState:i=void 0,enhancers:o=void 0}=e||{};let s;if(typeof r=="function")s=r;else if(eu(r))s=xv(r);else throw new Error(St(1));let c;typeof n=="function"?c=n(t):c=t();let u=Yi;a&&(u=mA({trace:!1,...typeof a=="object"&&a}));const d=uA(...c),f=yA(d);let m=typeof o=="function"?o(f):f();const h=u(...m);return yv(s,i,h)}function Sv(e){const t={},r=[];let n;const a={addCase(i,o){const s=typeof i=="string"?i:i.type;if(!s)throw new Error(St(28));if(s in t)throw new Error(St(29));return t[s]=o,a},addMatcher(i,o){return r.push({matcher:i,reducer:o}),a},addDefaultCase(i){return n=i,a}};return e(a),[t,r,n]}function bA(e){return typeof e=="function"}function wA(e,t){let[r,n,a]=Sv(t),i;if(bA(e))i=()=>Ef(e());else{const s=Ef(e);i=()=>s}function o(s=i(),c){let u=[r[c.type],...n.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[a]),u.reduce((d,f)=>{if(f)if(xn(d)){const h=f(d,c);return h===void 0?d:h}else{if(yr(d))return cr(d,m=>f(m,c));{const m=f(d,c);if(m===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return m}}return d},s)}return o.getInitialState=i,o}var jA="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",SA=(e=21)=>{let t="",r=e;for(;r--;)t+=jA[Math.random()*64|0];return t},NA=Symbol.for("rtk-slice-createasyncthunk");function kA(e,t){return"".concat(e,"/").concat(t)}function PA({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[NA];return function(a){const{name:i,reducerPath:o=i}=a;if(!i)throw new Error(St(11));const s=(typeof a.reducers=="function"?a.reducers(_A()):a.reducers)||{},c=Object.keys(s),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(j,S){const N=typeof j=="string"?j:j.type;if(!N)throw new Error(St(12));if(N in u.sliceCaseReducersByType)throw new Error(St(13));return u.sliceCaseReducersByType[N]=S,d},addMatcher(j,S){return u.sliceMatchers.push({matcher:j,reducer:S}),d},exposeAction(j,S){return u.actionCreators[j]=S,d},exposeCaseReducer(j,S){return u.sliceCaseReducersByName[j]=S,d}};c.forEach(j=>{const S=s[j],N={reducerName:j,type:kA(i,j),createNotation:typeof a.reducers=="function"};CA(S)?TA(N,S,d,t):AA(N,S,d)});function f(){const[j={},S=[],N=void 0]=typeof a.extraReducers=="function"?Sv(a.extraReducers):[a.extraReducers],k={...j,...u.sliceCaseReducersByType};return wA(a.initialState,A=>{for(let C in k)A.addCase(C,k[C]);for(let C of u.sliceMatchers)A.addMatcher(C.matcher,C.reducer);for(let C of S)A.addMatcher(C.matcher,C.reducer);N&&A.addDefaultCase(N)})}const m=j=>j,h=new Map,g=new WeakMap;let v;function p(j,S){return v||(v=f()),v(j,S)}function x(){return v||(v=f()),v.getInitialState()}function b(j,S=!1){function N(A){let C=A[j];return typeof C>"u"&&S&&(C=wi(g,N,x)),C}function k(A=m){const C=wi(h,S,()=>new WeakMap);return wi(C,A,()=>{var T;const D={};for(const[O,B]of Object.entries((T=a.selectors)!=null?T:{}))D[O]=EA(B,A,()=>wi(g,A,x),S);return D})}return{reducerPath:j,getSelectors:k,get selectors(){return k(N)},selectSlice:N}}const w={name:i,reducer:p,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:x,...b(o),injectInto(j,{reducerPath:S,...N}={}){const k=S!=null?S:o;return j.inject({reducerPath:k,reducer:p},N),{...w,...b(k,!0)}}};return w}}function EA(e,t,r,n){function a(i,...o){let s=t(i);return typeof s>"u"&&n&&(s=r()),e(s,...o)}return a.unwrapped=e,a}var Rt=PA();function _A(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function AA({type:e,reducerName:t,createNotation:r},n,a){let i,o;if("reducer"in n){if(r&&!OA(n))throw new Error(St(17));i=n.reducer,o=n.prepare}else i=n;a.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,o?Dt(e,o):Dt(e))}function CA(e){return e._reducerDefinitionType==="asyncThunk"}function OA(e){return e._reducerDefinitionType==="reducerWithPrepare"}function TA({type:e,reducerName:t},r,n,a){if(!a)throw new Error(St(18));const{payloadCreator:i,fulfilled:o,pending:s,rejected:c,settled:u,options:d}=r,f=a(e,i,d);n.exposeAction(t,f),o&&n.addCase(f.fulfilled,o),s&&n.addCase(f.pending,s),c&&n.addCase(f.rejected,c),u&&n.addMatcher(f.settled,u),n.exposeCaseReducer(t,{fulfilled:o||ji,pending:s||ji,rejected:c||ji,settled:u||ji})}function ji(){}var IA="task",Nv="listener",kv="completed",tu="cancelled",MA="task-".concat(tu),DA="task-".concat(kv),Cl="".concat(Nv,"-").concat(tu),$A="".concat(Nv,"-").concat(kv),is=class{constructor(e){Ut(this,"name","TaskAbortError");Ut(this,"message");this.code=e,this.message="".concat(IA," ").concat(tu," (reason: ").concat(e,")")}},ru=(e,t)=>{if(typeof e!="function")throw new TypeError(St(32))},Xi=()=>{},Pv=(e,t=Xi)=>(e.catch(t),e),Ev=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),cn=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},un=e=>{if(e.aborted){const{reason:t}=e;throw new is(t)}};function _v(e,t){let r=Xi;return new Promise((n,a)=>{const i=()=>a(new is(e.reason));if(e.aborted){i();return}r=Ev(e,i),t.finally(()=>r()).then(n,a)}).finally(()=>{r=Xi})}var zA=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof is?"cancelled":"rejected",error:r}}finally{t==null||t()}},Qi=e=>t=>Pv(_v(e,t).then(r=>(un(e),r))),Av=e=>{const t=Qi(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:Bn}=Object,Af={},os="listenerMiddleware",RA=(e,t)=>{const r=n=>Ev(e,()=>cn(n,e.reason));return(n,a)=>{ru(n);const i=new AbortController;r(i);const o=zA(async()=>{un(e),un(i.signal);const s=await n({pause:Qi(i.signal),delay:Av(i.signal),signal:i.signal});return un(i.signal),s},()=>cn(i,DA));return a!=null&&a.autoJoin&&t.push(o.catch(Xi)),{result:Qi(e)(o),cancel(){cn(i,MA)}}}},LA=(e,t)=>{const r=async(n,a)=>{un(t);let i=()=>{};const s=[new Promise((c,u)=>{let d=e({predicate:n,effect:(f,m)=>{m.unsubscribe(),c([f,m.getState(),m.getOriginalState()])}});i=()=>{d(),u()}})];a!=null&&s.push(new Promise(c=>setTimeout(c,a,null)));try{const c=await _v(t,Promise.race(s));return un(t),c}finally{i()}};return(n,a)=>Pv(r(n,a))},Cv=e=>{let{type:t,actionCreator:r,matcher:n,predicate:a,effect:i}=e;if(t)a=Dt(t).match;else if(r)t=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(St(21));return ru(i),{predicate:a,type:t,effect:i}},Ov=Bn(e=>{const{type:t,predicate:r,effect:n}=Cv(e);return{id:SA(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(St(22))}}},{withTypes:()=>Ov}),Cf=(e,t)=>{const{type:r,effect:n,predicate:a}=Cv(t);return Array.from(e.values()).find(i=>(typeof r=="string"?i.type===r:i.predicate===a)&&i.effect===n)},Ol=e=>{e.pending.forEach(t=>{cn(t,Cl)})},FA=e=>()=>{e.forEach(Ol),e.clear()},Of=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},Tv=Bn(Dt("".concat(os,"/add")),{withTypes:()=>Tv}),BA=Dt("".concat(os,"/removeAll")),Iv=Bn(Dt("".concat(os,"/remove")),{withTypes:()=>Iv}),UA=(...e)=>{console.error("".concat(os,"/error"),...e)},Va=(e={})=>{const t=new Map,{extra:r,onError:n=UA}=e;ru(n);const a=d=>(d.unsubscribe=()=>t.delete(d.id),t.set(d.id,d),f=>{d.unsubscribe(),f!=null&&f.cancelActive&&Ol(d)}),i=d=>{var m;const f=(m=Cf(t,d))!=null?m:Ov(d);return a(f)};Bn(i,{withTypes:()=>i});const o=d=>{const f=Cf(t,d);return f&&(f.unsubscribe(),d.cancelActive&&Ol(f)),!!f};Bn(o,{withTypes:()=>o});const s=async(d,f,m,h)=>{const g=new AbortController,v=LA(i,g.signal),p=[];try{d.pending.add(g),await Promise.resolve(d.effect(f,Bn({},m,{getOriginalState:h,condition:(x,b)=>v(x,b).then(Boolean),take:v,delay:Av(g.signal),pause:Qi(g.signal),extra:r,signal:g.signal,fork:RA(g.signal,p),unsubscribe:d.unsubscribe,subscribe:()=>{t.set(d.id,d)},cancelActiveListeners:()=>{d.pending.forEach((x,b,w)=>{x!==g&&(cn(x,Cl),w.delete(x))})},cancel:()=>{cn(g,Cl),d.pending.delete(g)},throwIfCancelled:()=>{un(g.signal)}})))}catch(x){x instanceof is||Of(n,x,{raisedBy:"effect"})}finally{await Promise.all(p),cn(g,$A),d.pending.delete(g)}},c=FA(t);return{middleware:d=>f=>m=>{if(!bv(m))return f(m);if(Tv.match(m))return i(m.payload);if(BA.match(m)){c();return}if(Iv.match(m))return o(m.payload);let h=d.getState();const g=()=>{if(h===Af)throw new Error(St(23));return h};let v;try{if(v=f(m),t.size>0){const p=d.getState(),x=Array.from(t.values());for(const b of x){let w=!1;try{w=b.predicate(m,p,h)}catch(j){w=!1,Of(n,j,{raisedBy:"predicate"})}w&&s(b,m,d,g)}}}finally{h=Af}return v},startListening:i,stopListening:o,clearListeners:c}};function St(e){return"Minified Redux Toolkit error #".concat(e,"; visit https://redux-toolkit.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}var WA={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Mv=Rt({name:"chartLayout",initialState:WA,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:HA,setLayout:qA,setChartSize:ZA,setScale:KA}=Mv.actions,GA=Mv.reducer;function Tf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function If(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Tf(Object(r),!0).forEach(function(n){VA(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tf(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VA(e,t,r){return(t=YA(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YA(e){var t=XA(e,"string");return typeof t=="symbol"?t:t+""}function XA(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ji=Math.PI/180,QA=e=>e*180/Math.PI,Ge=(e,t,r,n)=>({x:e+Math.cos(-Ji*n)*r,y:t+Math.sin(-Ji*n)*r}),JA=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},eC=(e,t)=>{var{x:r,y:n}=e,{x:a,y:i}=t;return Math.sqrt((r-a)**2+(n-i)**2)},tC=(e,t)=>{var{x:r,y:n}=e,{cx:a,cy:i}=t,o=eC({x:r,y:n},{x:a,y:i});if(o<=0)return{radius:o,angle:0};var s=(r-a)/o,c=Math.acos(s);return n>i&&(c=2*Math.PI-c),{radius:o,angle:QA(c),angleInRadian:c}},rC=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),a=Math.floor(r/360),i=Math.min(n,a);return{startAngle:t-i*360,endAngle:r-i*360}},nC=(e,t)=>{var{startAngle:r,endAngle:n}=t,a=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(a,i);return e+o*360},aC=(e,t)=>{var{x:r,y:n}=e,{radius:a,angle:i}=tC({x:r,y:n},t),{innerRadius:o,outerRadius:s}=t;if(a<o||a>s||a===0)return null;var{startAngle:c,endAngle:u}=rC(t),d=i,f;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;f=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=c}return f?If(If({},t),{},{radius:a,angle:nC(d,t)}):null};function Mf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ct(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Mf(Object(r),!0).forEach(function(n){iC(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mf(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iC(e,t,r){return(t=oC(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oC(e){var t=sC(e,"string");return typeof t=="symbol"?t:t+""}function sC(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nt(e,t,r){return _e(e)||_e(t)?r:ar(t)?wn(e,t,r):typeof t=="function"?t(e):r}var lC=(e,t,r,n,a)=>{var i,o=-1,s=(i=t==null?void 0:t.length)!==null&&i!==void 0?i:0;if(s<=1||e==null)return 0;if(n==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var c=0;c<s;c++){var u=c>0?r[c-1].coordinate:r[s-1].coordinate,d=r[c].coordinate,f=c>=s-1?r[0].coordinate:r[c+1].coordinate,m=void 0;if(Ot(d-u)!==Ot(f-d)){var h=[];if(Ot(f-d)===Ot(a[1]-a[0])){m=f;var g=d+a[1]-a[0];h[0]=Math.min(g,(g+u)/2),h[1]=Math.max(g,(g+u)/2)}else{m=u;var v=f+a[1]-a[0];h[0]=Math.min(d,(v+d)/2),h[1]=Math.max(d,(v+d)/2)}var p=[Math.min(d,(m+d)/2),Math.max(d,(m+d)/2)];if(e>p[0]&&e<=p[1]||e>=h[0]&&e<=h[1]){({index:o}=r[c]);break}}else{var x=Math.min(u,f),b=Math.max(u,f);if(e>(x+d)/2&&e<=(b+d)/2){({index:o}=r[c]);break}}}else if(t){for(var w=0;w<s;w++)if(w===0&&e<=(t[w].coordinate+t[w+1].coordinate)/2||w>0&&w<s-1&&e>(t[w].coordinate+t[w-1].coordinate)/2&&e<=(t[w].coordinate+t[w+1].coordinate)/2||w===s-1&&e>(t[w].coordinate+t[w-1].coordinate)/2){({index:o}=t[w]);break}}return o},cC=(e,t,r)=>{if(t&&r){var{width:n,height:a}=r,{align:i,verticalAlign:o,layout:s}=t;if((s==="vertical"||s==="horizontal"&&o==="middle")&&i!=="center"&&W(e[i]))return Ct(Ct({},e),{},{[i]:e[i]+(n||0)});if((s==="horizontal"||s==="vertical"&&i==="center")&&o!=="middle"&&W(e[o]))return Ct(Ct({},e),{},{[o]:e[o]+(a||0)})}return e},qr=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",Dv=(e,t,r,n)=>{if(n)return e.map(s=>s.coordinate);var a,i,o=e.map(s=>(s.coordinate===t&&(a=!0),s.coordinate===r&&(i=!0),s.coordinate));return a||o.push(t),i||o.push(r),o},$v=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:a,range:i,scale:o,realScaleType:s,isCategorical:c,categoricalDomain:u,tickCount:d,ticks:f,niceTicks:m,axisType:h}=e;if(!o)return null;var g=s==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,v=a==="category"&&o.bandwidth?o.bandwidth()/g:0;if(v=h==="angleAxis"&&i&&i.length>=2?Ot(i[0]-i[1])*2*v:v,f||m){var p=(f||m||[]).map((x,b)=>{var w=n?n.indexOf(x):x;return{coordinate:o(w)+v,value:x,offset:v,index:b}});return p.filter(x=>!Mt(x.coordinate))}return c&&u?u.map((x,b)=>({coordinate:o(x)+v,value:x,index:b,offset:v})):o.ticks&&d!=null?o.ticks(d).map((x,b)=>({coordinate:o(x)+v,value:x,offset:v,index:b})):o.domain().map((x,b)=>({coordinate:o(x)+v,value:n?n[x]:x,index:b,offset:v}))},Df=1e-4,uC=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),a=Math.min(n[0],n[1])-Df,i=Math.max(n[0],n[1])+Df,o=e(t[0]),s=e(t[r-1]);(o<a||o>i||s<a||s>i)&&e.domain([t[0],t[r-1]])}},dC=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,i=0,o=0;o<t;++o){var s=Mt(e[o][r][1])?e[o][r][0]:e[o][r][1];s>=0?(e[o][r][0]=a,e[o][r][1]=a+s,a=e[o][r][1]):(e[o][r][0]=i,e[o][r][1]=i+s,i=e[o][r][1])}},fC=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,i=0;i<t;++i){var o=Mt(e[i][r][1])?e[i][r][0]:e[i][r][1];o>=0?(e[i][r][0]=a,e[i][r][1]=a+o,a=e[i][r][1]):(e[i][r][0]=0,e[i][r][1]=0)}},mC={sign:dC,expand:x_,none:qn,silhouette:b_,wiggle:w_,positive:fC},hC=(e,t,r)=>{var n=mC[r],a=y_().keys(t).value((i,o)=>+Nt(i,o,0)).order(Al).offset(n);return a(e)};function pC(e){return e==null?void 0:String(e)}function $f(e){var{axis:t,ticks:r,bandSize:n,entry:a,index:i,dataKey:o}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!_e(a[t.dataKey])){var s=Eg(r,"value",a[t.dataKey]);if(s)return s.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var c=Nt(a,_e(o)?t.dataKey:o);return _e(c)?null:t.scale(c)}var gC=e=>{var t=e.flat(2).filter(W);return[Math.min(...t),Math.max(...t)]},vC=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],yC=(e,t,r)=>{if(e!=null)return vC(Object.keys(e).reduce((n,a)=>{var i=e[a],{stackedData:o}=i,s=o.reduce((c,u)=>{var d=gC(u.slice(t,r+1));return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);return[Math.min(s[0],n[0]),Math.max(s[1],n[1])]},[1/0,-1/0]))},zf=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Rf=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Tl=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var a=as(t,d=>d.coordinate),i=1/0,o=1,s=a.length;o<s;o++){var c=a[o],u=a[o-1];i=Math.min((c.coordinate||0)-(u.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0};function Lf(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:a,name:i}=e;return Ct(Ct({},t),{},{dataKey:r,payload:n,value:a,name:i})}function zv(e,t){if(e)return String(e);if(typeof t=="string")return t}function xC(e,t,r,n,a){if(r==="horizontal"||r==="vertical"){var i=e>=a.left&&e<=a.left+a.width&&t>=a.top&&t<=a.top+a.height;return i?{x:e,y:t}:null}return n?aC({x:e,y:t},n):null}var bC=(e,t,r,n)=>{var a=t.find(u=>u&&u.index===r);if(a){if(e==="horizontal")return{x:a.coordinate,y:n.y};if(e==="vertical")return{x:n.x,y:a.coordinate};if(e==="centric"){var i=a.coordinate,{radius:o}=n;return Ct(Ct(Ct({},n),Ge(n.cx,n.cy,o,i)),{},{angle:i,radius:o})}var s=a.coordinate,{angle:c}=n;return Ct(Ct(Ct({},n),Ge(n.cx,n.cy,s,c)),{},{angle:c,radius:s})}return{x:0,y:0}},wC=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,Nr=e=>e.layout.width,kr=e=>e.layout.height,jC=e=>e.layout.scale,Rv=e=>e.layout.margin,nu=E(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),au=E(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),SC="data-recharts-item-index",NC="data-recharts-item-data-key",ss=60;function Ff(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ir(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ff(Object(r),!0).forEach(function(n){kC(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ff(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kC(e,t,r){return(t=PC(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PC(e){var t=EC(e,"string");return typeof t=="symbol"?t:t+""}function EC(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _C=e=>e.brush.height,Ye=E([Nr,kr,Rv,_C,nu,au,vv,aA],(e,t,r,n,a,i,o,s)=>{var c=i.reduce((g,v)=>{var{orientation:p}=v;if(!v.mirror&&!v.hide){var x=typeof v.width=="number"?v.width:ss;return Ir(Ir({},g),{},{[p]:g[p]+x})}return g},{left:r.left||0,right:r.right||0}),u=a.reduce((g,v)=>{var{orientation:p}=v;return!v.mirror&&!v.hide?Ir(Ir({},g),{},{[p]:wn(g,"".concat(p))+v.height}):g},{top:r.top||0,bottom:r.bottom||0}),d=Ir(Ir({},u),c),f=d.bottom;d.bottom+=n,d=cC(d,o,s);var m=e-d.left-d.right,h=t-d.top-d.bottom;return Ir(Ir({brushBottom:f},d),{},{width:Math.max(m,0),height:Math.max(h,0)})}),AC=E(Ye,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Lv=E(Nr,kr,(e,t)=>({x:0,y:0,width:e,height:t})),CC=y.createContext(null),mt=()=>y.useContext(CC)!=null,ls=e=>e.brush,cs=E([ls,Ye,Rv],(e,t,r)=>({height:e.height,x:W(e.x)?e.x:t.left,y:W(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:W(e.width)?e.width:t.width})),iu=()=>{var e,t=mt(),r=K(AC),n=K(cs),a=(e=K(ls))===null||e===void 0?void 0:e.padding;return!t||!n||!a?r:{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}},OC={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},Fv=()=>{var e;return(e=K(Ye))!==null&&e!==void 0?e:OC},Bv=()=>K(Nr),Uv=()=>K(kr),ke=e=>e.layout.layoutType,ou=()=>K(ke),TC={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},Wv=Rt({name:"legend",initialState:TC,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=pr(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:AL,setLegendSettings:CL,addLegendPayload:IC,removeLegendPayload:MC}=Wv.actions,DC=Wv.reducer;function Il(){return Il=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Il.apply(null,arguments)}function Bf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Hs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Bf(Object(r),!0).forEach(function(n){$C(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bf(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $C(e,t,r){return(t=zC(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zC(e){var t=RC(e,"string");return typeof t=="symbol"?t:t+""}function RC(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function LC(e){return Array.isArray(e)&&ar(e[0])&&ar(e[1])?e.join(" ~ "):e}var FC=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:a={},payload:i,formatter:o,itemSorter:s,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:f,accessibilityLayer:m=!1}=e,h=()=>{if(i&&i.length){var S={padding:0,margin:0},N=(s?as(i,s):i).map((k,A)=>{if(k.type==="none")return null;var C=k.formatter||o||LC,{value:D,name:T}=k,O=D,B=T;if(C){var Z=C(D,T,k,A,i);if(Array.isArray(Z))[O,B]=Z;else if(Z!=null)O=Z;else return null}var z=Hs({display:"block",paddingTop:4,paddingBottom:4,color:k.color||"#000"},n);return y.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(A),style:z},ar(B)?y.createElement("span",{className:"recharts-tooltip-item-name"},B):null,ar(B)?y.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,y.createElement("span",{className:"recharts-tooltip-item-value"},O),y.createElement("span",{className:"recharts-tooltip-item-unit"},k.unit||""))});return y.createElement("ul",{className:"recharts-tooltip-item-list",style:S},N)}return null},g=Hs({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),v=Hs({margin:0},a),p=!_e(d),x=p?d:"",b=fe("recharts-default-tooltip",c),w=fe("recharts-tooltip-label",u);p&&f&&i!==void 0&&i!==null&&(x=f(d,i));var j=m?{role:"status","aria-live":"assertive"}:{};return y.createElement("div",Il({className:b,style:g},j),y.createElement("p",{className:w,style:v},y.isValidElement(x)?x:"".concat(x)),h())},va="recharts-tooltip-wrapper",BC={visibility:"hidden"};function UC(e){var{coordinate:t,translateX:r,translateY:n}=e;return fe(va,{["".concat(va,"-right")]:W(r)&&t&&W(t.x)&&r>=t.x,["".concat(va,"-left")]:W(r)&&t&&W(t.x)&&r<t.x,["".concat(va,"-bottom")]:W(n)&&t&&W(t.y)&&n>=t.y,["".concat(va,"-top")]:W(n)&&t&&W(t.y)&&n<t.y})}function Uf(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:a,position:i,reverseDirection:o,tooltipDimension:s,viewBox:c,viewBoxDimension:u}=e;if(i&&W(i[n]))return i[n];var d=r[n]-s-(a>0?a:0),f=r[n]+a;if(t[n])return o[n]?d:f;var m=c[n];if(m==null)return 0;if(o[n]){var h=d,g=m;return h<g?Math.max(f,m):Math.max(d,m)}if(u==null)return 0;var v=f+s,p=m+u;return v>p?Math.max(d,m):Math.max(f,m)}function WC(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function HC(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:a,reverseDirection:i,tooltipBox:o,useTranslate3d:s,viewBox:c}=e,u,d,f;return o.height>0&&o.width>0&&r?(d=Uf({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=Uf({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=WC({translateX:d,translateY:f,useTranslate3d:s})):u=BC,{cssProperties:u,cssClasses:UC({translateX:d,translateY:f,coordinate:r})}}function Wf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Si(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Wf(Object(r),!0).forEach(function(n){Ml(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wf(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ml(e,t,r){return(t=qC(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qC(e){var t=ZC(e,"string");return typeof t=="symbol"?t:t+""}function ZC(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class KC extends y.PureComponent{constructor(){super(...arguments),Ml(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Ml(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,a,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(a=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:a,children:i,coordinate:o,hasPayload:s,isAnimationActive:c,offset:u,position:d,reverseDirection:f,useTranslate3d:m,viewBox:h,wrapperStyle:g,lastBoundingBox:v,innerRef:p,hasPortalFromProps:x}=this.props,{cssClasses:b,cssProperties:w}=HC({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:u,position:d,reverseDirection:f,tooltipBox:{height:v.height,width:v.width},useTranslate3d:m,viewBox:h}),j=x?{}:Si(Si({transition:c&&t?"transform ".concat(n,"ms ").concat(a):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&s?"visible":"hidden",position:"absolute",top:0,left:0}),S=Si(Si({},j),{},{visibility:!this.state.dismissed&&t&&s?"visible":"hidden"},g);return y.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:b,style:S,ref:p},i)}}var GC=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Ya={isSsr:GC()},Hv=()=>K(e=>e.rootProps.accessibilityLayer);function Gt(e){return Number.isFinite(e)}function eo(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function Dl(){return Dl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dl.apply(null,arguments)}function Hf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function qf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Hf(Object(r),!0).forEach(function(n){VC(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hf(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VC(e,t,r){return(t=YC(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YC(e){var t=XC(e,"string");return typeof t=="symbol"?t:t+""}function XC(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Zf={curveBasisClosed:s_,curveBasisOpen:l_,curveBasis:o_,curveBumpX:a_,curveBumpY:i_,curveLinearClosed:c_,curveLinear:Xo,curveMonotoneX:u_,curveMonotoneY:d_,curveNatural:f_,curveStep:m_,curveStepAfter:p_,curveStepBefore:h_},Ni=e=>Gt(e.x)&&Gt(e.y),ya=e=>e.x,xa=e=>e.y,QC=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(Fc(e));return(r==="curveMonotone"||r==="curveBump")&&t?Zf["".concat(r).concat(t==="vertical"?"Y":"X")]:Zf[r]||Xo},JC=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:a,connectNulls:i=!1}=e,o=QC(t,a),s=i?r.filter(Ni):r,c;if(Array.isArray(n)){var u=i?n.filter(f=>Ni(f)):n,d=s.map((f,m)=>qf(qf({},f),{},{base:u[m]}));return a==="vertical"?c=yi().y(xa).x1(ya).x0(f=>f.base.x):c=yi().x(ya).y1(xa).y0(f=>f.base.y),c.defined(Ni).curve(o),c(d)}return a==="vertical"&&W(n)?c=yi().y(xa).x1(ya).x0(n):W(n)?c=yi().x(ya).y1(xa).y0(n):c=zg().x(ya).y(xa),c.defined(Ni).curve(o),c(s)},qv=e=>{var{className:t,points:r,path:n,pathRef:a}=e;if((!r||!r.length)&&!n)return null;var i=r&&r.length?JC(e):n;return y.createElement("path",Dl({},ye(e,!1),Uc(e),{className:fe("recharts-curve",t),d:i===null?void 0:i,ref:a}))},e2=["x","y","top","left","width","height","className"];function $l(){return $l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$l.apply(null,arguments)}function Kf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function t2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Kf(Object(r),!0).forEach(function(n){r2(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Kf(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function r2(e,t,r){return(t=n2(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n2(e){var t=a2(e,"string");return typeof t=="symbol"?t:t+""}function a2(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function i2(e,t){if(e==null)return{};var r,n,a=o2(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function o2(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var s2=(e,t,r,n,a,i)=>"M".concat(e,",").concat(a,"v").concat(n,"M").concat(i,",").concat(t,"h").concat(r),l2=e=>{var{x:t=0,y:r=0,top:n=0,left:a=0,width:i=0,height:o=0,className:s}=e,c=i2(e,e2),u=t2({x:t,y:r,top:n,left:a,width:i,height:o},c);return!W(t)||!W(r)||!W(i)||!W(o)||!W(n)||!W(a)?null:y.createElement("path",$l({},ye(u,!0),{className:fe("recharts-cross",s),d:s2(t,r,i,o,n,a)}))};function c2(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function Gf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function u2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Gf(Object(r),!0).forEach(function(n){d2(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gf(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function d2(e,t,r){return(t=f2(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f2(e){var t=m2(e,"string");return typeof t=="symbol"?t:t+""}function m2(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nn(e,t){var r=u2({},e),n=t,a=Object.keys(t),i=a.reduce((o,s)=>(o[s]===void 0&&n[s]!==void 0&&(o[s]=n[s]),o),r);return i}var Zv={},Kv={},Gv={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(!r||typeof r!="object")return!1;const n=Object.getPrototypeOf(r);return n===null||n===Object.prototype||Object.getPrototypeOf(n)===null?Object.prototype.toString.call(r)==="[object Object]":!1}e.isPlainObject=t})(Gv);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Gv,r=Vc,n=ts,a=rs,i=es;function o(u,d,f){return s(u,d,void 0,void 0,void 0,void 0,f)}function s(u,d,f,m,h,g,v){const p=v(u,d,f,m,h,g);if(p!==void 0)return p;if(typeof u==typeof d)switch(typeof u){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return u===d;case"number":return u===d||Object.is(u,d);case"function":return u===d;case"object":return c(u,d,g,v)}return c(u,d,g,v)}function c(u,d,f,m){if(Object.is(u,d))return!0;let h=n.getTag(u),g=n.getTag(d);if(h===a.argumentsTag&&(h=a.objectTag),g===a.argumentsTag&&(g=a.objectTag),h!==g)return!1;switch(h){case a.stringTag:return u.toString()===d.toString();case a.numberTag:{const x=u.valueOf(),b=d.valueOf();return i.eq(x,b)}case a.booleanTag:case a.dateTag:case a.symbolTag:return Object.is(u.valueOf(),d.valueOf());case a.regexpTag:return u.source===d.source&&u.flags===d.flags;case a.functionTag:return u===d}f=f!=null?f:new Map;const v=f.get(u),p=f.get(d);if(v!=null&&p!=null)return v===d;f.set(u,d),f.set(d,u);try{switch(h){case a.mapTag:{if(u.size!==d.size)return!1;for(const[x,b]of u.entries())if(!d.has(x)||!s(b,d.get(x),x,u,d,f,m))return!1;return!0}case a.setTag:{if(u.size!==d.size)return!1;const x=Array.from(u.values()),b=Array.from(d.values());for(let w=0;w<x.length;w++){const j=x[w],S=b.findIndex(N=>s(j,N,void 0,u,d,f,m));if(S===-1)return!1;b.splice(S,1)}return!0}case a.arrayTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:case a.bigUint64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.bigInt64ArrayTag:case a.float32ArrayTag:case a.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(u)!==Buffer.isBuffer(d)||u.length!==d.length)return!1;for(let x=0;x<u.length;x++)if(!s(u[x],d[x],x,u,d,f,m))return!1;return!0}case a.arrayBufferTag:return u.byteLength!==d.byteLength?!1:c(new Uint8Array(u),new Uint8Array(d),f,m);case a.dataViewTag:return u.byteLength!==d.byteLength||u.byteOffset!==d.byteOffset?!1:c(new Uint8Array(u),new Uint8Array(d),f,m);case a.errorTag:return u.name===d.name&&u.message===d.message;case a.objectTag:{if(!(c(u.constructor,d.constructor,f,m)||t.isPlainObject(u)&&t.isPlainObject(d)))return!1;const b=[...Object.keys(u),...r.getSymbols(u)],w=[...Object.keys(d),...r.getSymbols(d)];if(b.length!==w.length)return!1;for(let j=0;j<b.length;j++){const S=b[j],N=u[S];if(!Object.hasOwn(d,S))return!1;const k=d[S];if(!s(N,k,S,u,d,f,m))return!1}return!0}default:return!1}}finally{f.delete(u),f.delete(d)}}e.isEqualWith=o})(Kv);var Vv={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(){}e.noop=t})(Vv);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Kv,r=Vv;function n(a,i){return t.isEqualWith(a,i,r.noop)}e.isEqual=n})(Zv);var h2=Zv.isEqual;const p2=Hr(h2);function g2(e){var t={},r=()=>null,n=!1,a=null,i=o=>{if(!n){if(Array.isArray(o)){if(!o.length)return;var s=o,[c,...u]=s;if(typeof c=="number"){a=e.setTimeout(i.bind(null,u),c);return}i(c),a=e.setTimeout(i.bind(null,u));return}typeof o=="object"&&(t=o,r(t)),typeof o=="function"&&o()}};return{stop:()=>{n=!0},start:o=>{n=!1,a&&(a(),a=null),i(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>e}}var to=1e-4,Yv=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],Xv=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),Vf=(e,t)=>r=>{var n=Yv(e,t);return Xv(n,r)},v2=(e,t)=>r=>{var n=Yv(e,t),a=[...n.map((i,o)=>i*o).slice(1),0];return Xv(a,r)},Yf=function(){for(var t,r,n,a,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];if(o.length===1)switch(o[0]){case"linear":[t,n,r,a]=[0,0,1,1];break;case"ease":[t,n,r,a]=[.25,.1,.25,1];break;case"ease-in":[t,n,r,a]=[.42,0,1,1];break;case"ease-out":[t,n,r,a]=[.42,0,.58,1];break;case"ease-in-out":[t,n,r,a]=[0,0,.58,1];break;default:{var c=o[0].split("(");c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4&&([t,n,r,a]=c[1].split(")")[0].split(",").map(g=>parseFloat(g)))}}else o.length===4&&([t,n,r,a]=o);var u=Vf(t,r),d=Vf(n,a),f=v2(t,r),m=g=>g>1?1:g<0?0:g,h=g=>{for(var v=g>1?1:g,p=v,x=0;x<8;++x){var b=u(p)-v,w=f(p);if(Math.abs(b-v)<to||w<to)return d(p);p=m(p-b/w)}return d(p)};return h.isStepper=!1,h},y2=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:a=17}=t,i=(o,s,c)=>{var u=-(o-s)*r,d=c*n,f=c+(u-d)*a/1e3,m=c*a/1e3+o;return Math.abs(m-s)<to&&Math.abs(f)<to?[s,0]:[m,f]};return i.isStepper=!0,i.dt=a,i},x2=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Yf(e);case"spring":return y2();default:if(e.split("(")[0]==="cubic-bezier")return Yf(e)}return typeof e=="function"?e:null};function Xf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Qf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Xf(Object(r),!0).forEach(function(n){b2(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xf(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function b2(e,t,r){return(t=w2(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w2(e){var t=j2(e,"string");return typeof t=="symbol"?t:t+""}function j2(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var S2=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),N2=(e,t,r)=>e.map(n=>"".concat(S2(n)," ").concat(t,"ms ").concat(r)).join(","),k2=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(a=>n.includes(a))),$a=(e,t)=>Object.keys(t).reduce((r,n)=>Qf(Qf({},r),{},{[n]:e(n,t[n])}),{});function Jf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ke(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Jf(Object(r),!0).forEach(function(n){P2(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jf(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function P2(e,t,r){return(t=E2(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E2(e){var t=_2(e,"string");return typeof t=="symbol"?t:t+""}function _2(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ro=(e,t,r)=>e+(t-e)*r,zl=e=>{var{from:t,to:r}=e;return t!==r},Qv=(e,t,r)=>{var n=$a((a,i)=>{if(zl(i)){var[o,s]=e(i.from,i.to,i.velocity);return Ke(Ke({},i),{},{from:o,velocity:s})}return i},t);return r<1?$a((a,i)=>zl(i)?Ke(Ke({},i),{},{velocity:ro(i.velocity,n[a].velocity,r),from:ro(i.from,n[a].from,r)}):i,t):Qv(e,n,r-1)};function A2(e,t,r,n,a,i){var o,s=n.reduce((m,h)=>Ke(Ke({},m),{},{[h]:{from:e[h],velocity:0,to:t[h]}}),{}),c=()=>$a((m,h)=>h.from,s),u=()=>!Object.values(s).filter(zl).length,d=null,f=m=>{o||(o=m);var h=m-o,g=h/r.dt;s=Qv(r,s,g),a(Ke(Ke(Ke({},e),t),c())),o=m,u()||(d=i.setTimeout(f))};return()=>(d=i.setTimeout(f),()=>{d()})}function C2(e,t,r,n,a,i,o){var s=null,c=a.reduce((f,m)=>Ke(Ke({},f),{},{[m]:[e[m],t[m]]}),{}),u,d=f=>{u||(u=f);var m=(f-u)/n,h=$a((v,p)=>ro(...p,r(m)),c);if(i(Ke(Ke(Ke({},e),t),h)),m<1)s=o.setTimeout(d);else{var g=$a((v,p)=>ro(...p,r(1)),c);i(Ke(Ke(Ke({},e),t),g))}};return()=>(s=o.setTimeout(d),()=>{s()})}const O2=(e,t,r,n,a,i)=>{var o=k2(e,t);return r.isStepper===!0?A2(e,t,r,o,a,i):C2(e,t,r,n,o,a,i)};class T2{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),a=null,i=o=>{o-n>=r?t(o):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(i))};return a=requestAnimationFrame(i),()=>{cancelAnimationFrame(a)}}}var I2=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function Rl(){return Rl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rl.apply(null,arguments)}function M2(e,t){if(e==null)return{};var r,n,a=D2(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function D2(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function em(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Mr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?em(Object(r),!0).forEach(function(n){nn(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):em(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nn(e,t,r){return(t=$2(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $2(e){var t=z2(e,"string");return typeof t=="symbol"?t:t+""}function z2(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function R2(){return g2(new T2)}class su extends y.PureComponent{constructor(t,r){super(t,r),nn(this,"mounted",!1),nn(this,"manager",null),nn(this,"stopJSAnimation",null),nn(this,"unSubscribe",null);var{isActive:n,attributeName:a,from:i,to:o,children:s,duration:c,animationManager:u}=this.props;if(this.manager=u,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!n||c<=0){this.state={style:{}},typeof s=="function"&&(this.state={style:o});return}if(i){if(typeof s=="function"){this.state={style:i};return}this.state={style:a?{[a]:i}:i}}else this.state={style:{}}}componentDidMount(){var{isActive:t,canBegin:r}=this.props;this.mounted=!0,!(!t||!r)&&this.runAnimation(this.props)}componentDidUpdate(t){var{isActive:r,canBegin:n,attributeName:a,shouldReAnimate:i,to:o,from:s}=this.props,{style:c}=this.state;if(n){if(!r){var u={style:a?{[a]:o}:o};this.state&&c&&(a&&c[a]!==o||!a&&c!==o)&&this.setState(u);return}if(!(p2(t.to,o)&&t.canBegin&&t.isActive)){var d=!t.canBegin||!t.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var f=d||i?s:t.to;if(this.state&&c){var m={style:a?{[a]:f}:f};(a&&c[a]!==f||!a&&c!==f)&&this.setState(m)}this.runAnimation(Mr(Mr({},this.props),{},{from:f,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:t}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}handleStyleChange(t){this.changeStyle(t)}changeStyle(t){this.mounted&&this.setState({style:t})}runJSAnimation(t){var{from:r,to:n,duration:a,easing:i,begin:o,onAnimationEnd:s,onAnimationStart:c}=t,u=O2(r,n,x2(i),a,this.changeStyle,this.manager.getTimeoutController()),d=()=>{this.stopJSAnimation=u()};this.manager.start([c,o,d,a,s])}runAnimation(t){var{begin:r,duration:n,attributeName:a,to:i,easing:o,onAnimationStart:s,onAnimationEnd:c,children:u}=t;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof o=="function"||typeof u=="function"||o==="spring"){this.runJSAnimation(t);return}var d=a?{[a]:i}:i,f=N2(Object.keys(d),n,o);this.manager.start([s,r,Mr(Mr({},d),{},{transition:f}),n,c])}render(){var t=this.props,{children:r,begin:n,duration:a,attributeName:i,easing:o,isActive:s,from:c,to:u,canBegin:d,onAnimationEnd:f,shouldReAnimate:m,onAnimationReStart:h,animationManager:g}=t,v=M2(t,I2),p=y.Children.count(r),x=this.state.style;if(typeof r=="function")return r(x);if(!s||p===0||a<=0)return r;var b=w=>{var{style:j={},className:S}=w.props,N=y.cloneElement(w,Mr(Mr({},v),{},{style:Mr(Mr({},j),x),className:S}));return N};return p===1?b(y.Children.only(r)):y.createElement("div",null,y.Children.map(r,w=>b(w)))}}nn(su,"displayName","Animate");nn(su,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});var L2=y.createContext(null);function no(e){var t,r,n=y.useContext(L2);return y.createElement(su,Rl({},e,{animationManager:(t=(r=e.animationManager)!==null&&r!==void 0?r:n)!==null&&t!==void 0?t:R2()}))}function ao(){return ao=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ao.apply(null,arguments)}var tm=(e,t,r,n,a)=>{var i=Math.min(Math.abs(r)/2,Math.abs(n)/2),o=n>=0?1:-1,s=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0,u;if(i>0&&a instanceof Array){for(var d=[0,0,0,0],f=0,m=4;f<m;f++)d[f]=a[f]>i?i:a[f];u="M".concat(e,",").concat(t+o*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+s*d[0],",").concat(t)),u+="L ".concat(e+r-s*d[1],",").concat(t),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,",\n        ").concat(e+r,",").concat(t+o*d[1])),u+="L ".concat(e+r,",").concat(t+n-o*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,",\n        ").concat(e+r-s*d[2],",").concat(t+n)),u+="L ".concat(e+s*d[3],",").concat(t+n),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,",\n        ").concat(e,",").concat(t+n-o*d[3])),u+="Z"}else if(i>0&&a===+a&&a>0){var h=Math.min(i,a);u="M ".concat(e,",").concat(t+o*h,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+s*h,",").concat(t,"\n            L ").concat(e+r-s*h,",").concat(t,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+r,",").concat(t+o*h,"\n            L ").concat(e+r,",").concat(t+n-o*h,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+r-s*h,",").concat(t+n,"\n            L ").concat(e+s*h,",").concat(t+n,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e,",").concat(t+n-o*h," Z")}else u="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return u},F2={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},B2=e=>{var t=Nn(e,F2),r=y.useRef(null),[n,a]=y.useState(-1);y.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var x=r.current.getTotalLength();x&&a(x)}catch(b){}},[]);var{x:i,y:o,width:s,height:c,radius:u,className:d}=t,{animationEasing:f,animationDuration:m,animationBegin:h,isAnimationActive:g,isUpdateAnimationActive:v}=t;if(i!==+i||o!==+o||s!==+s||c!==+c||s===0||c===0)return null;var p=fe("recharts-rectangle",d);return v?y.createElement(no,{canBegin:n>0,from:{width:s,height:c,x:i,y:o},to:{width:s,height:c,x:i,y:o},duration:m,animationEasing:f,isActive:v},x=>{var{width:b,height:w,x:j,y:S}=x;return y.createElement(no,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:h,duration:m,isActive:g,easing:f},y.createElement("path",ao({},ye(t,!0),{className:p,d:tm(j,S,b,w,u),ref:r})))}):y.createElement("path",ao({},ye(t,!0),{className:p,d:tm(i,o,s,c,u)}))};function Jv(e){var{cx:t,cy:r,radius:n,startAngle:a,endAngle:i}=e,o=Ge(t,r,n,a),s=Ge(t,r,n,i);return{points:[o,s],cx:t,cy:r,radius:n,startAngle:a,endAngle:i}}function Ll(){return Ll=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ll.apply(null,arguments)}var U2=(e,t)=>{var r=Ot(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},ki=e=>{var{cx:t,cy:r,radius:n,angle:a,sign:i,isExternal:o,cornerRadius:s,cornerIsExternal:c}=e,u=s*(o?1:-1)+n,d=Math.asin(s/u)/Ji,f=c?a:a+i*d,m=Ge(t,r,u,f),h=Ge(t,r,n,f),g=c?a-i*d:a,v=Ge(t,r,u*Math.cos(d*Ji),g);return{center:m,circleTangency:h,lineTangency:v,theta:d}},e0=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:i,endAngle:o}=e,s=U2(i,o),c=i+s,u=Ge(t,r,a,i),d=Ge(t,r,a,c),f="M ".concat(u.x,",").concat(u.y,"\n    A ").concat(a,",").concat(a,",0,\n    ").concat(+(Math.abs(s)>180),",").concat(+(i>c),",\n    ").concat(d.x,",").concat(d.y,"\n  ");if(n>0){var m=Ge(t,r,n,i),h=Ge(t,r,n,c);f+="L ".concat(h.x,",").concat(h.y,"\n            A ").concat(n,",").concat(n,",0,\n            ").concat(+(Math.abs(s)>180),",").concat(+(i<=c),",\n            ").concat(m.x,",").concat(m.y," Z")}else f+="L ".concat(t,",").concat(r," Z");return f},W2=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:s,startAngle:c,endAngle:u}=e,d=Ot(u-c),{circleTangency:f,lineTangency:m,theta:h}=ki({cx:t,cy:r,radius:a,angle:c,sign:d,cornerRadius:i,cornerIsExternal:s}),{circleTangency:g,lineTangency:v,theta:p}=ki({cx:t,cy:r,radius:a,angle:u,sign:-d,cornerRadius:i,cornerIsExternal:s}),x=s?Math.abs(c-u):Math.abs(c-u)-h-p;if(x<0)return o?"M ".concat(m.x,",").concat(m.y,"\n        a").concat(i,",").concat(i,",0,0,1,").concat(i*2,",0\n        a").concat(i,",").concat(i,",0,0,1,").concat(-i*2,",0\n      "):e0({cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:c,endAngle:u});var b="M ".concat(m.x,",").concat(m.y,"\n    A").concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(f.x,",").concat(f.y,"\n    A").concat(a,",").concat(a,",0,").concat(+(x>180),",").concat(+(d<0),",").concat(g.x,",").concat(g.y,"\n    A").concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(v.x,",").concat(v.y,"\n  ");if(n>0){var{circleTangency:w,lineTangency:j,theta:S}=ki({cx:t,cy:r,radius:n,angle:c,sign:d,isExternal:!0,cornerRadius:i,cornerIsExternal:s}),{circleTangency:N,lineTangency:k,theta:A}=ki({cx:t,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:i,cornerIsExternal:s}),C=s?Math.abs(c-u):Math.abs(c-u)-S-A;if(C<0&&i===0)return"".concat(b,"L").concat(t,",").concat(r,"Z");b+="L".concat(k.x,",").concat(k.y,"\n      A").concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(N.x,",").concat(N.y,"\n      A").concat(n,",").concat(n,",0,").concat(+(C>180),",").concat(+(d>0),",").concat(w.x,",").concat(w.y,"\n      A").concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(j.x,",").concat(j.y,"Z")}else b+="L".concat(t,",").concat(r,"Z");return b},H2={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},q2=e=>{var t=Nn(e,H2),{cx:r,cy:n,innerRadius:a,outerRadius:i,cornerRadius:o,forceCornerRadius:s,cornerIsExternal:c,startAngle:u,endAngle:d,className:f}=t;if(i<a||u===d)return null;var m=fe("recharts-sector",f),h=i-a,g=Ur(o,h,0,!0),v;return g>0&&Math.abs(u-d)<360?v=W2({cx:r,cy:n,innerRadius:a,outerRadius:i,cornerRadius:Math.min(g,h/2),forceCornerRadius:s,cornerIsExternal:c,startAngle:u,endAngle:d}):v=e0({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:u,endAngle:d}),y.createElement("path",Ll({},ye(t,!0),{className:m,d:v}))};function Z2(e,t,r){var n,a,i,o;if(e==="horizontal")n=t.x,i=n,a=r.top,o=r.top+r.height;else if(e==="vertical")a=t.y,o=a,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:s,cy:c,innerRadius:u,outerRadius:d,angle:f}=t,m=Ge(s,c,u,f),h=Ge(s,c,d,f);n=m.x,a=m.y,i=h.x,o=h.y}else return Jv(t);return[{x:n,y:a},{x:i,y:o}]}var t0={},r0={},n0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Qc;function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(n0);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=n0;function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(r0);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Jc,r=r0;function n(a,i,o){o&&typeof o!="number"&&t.isIterateeCall(a,i,o)&&(i=o=void 0),a=r.toFinite(a),i===void 0?(i=a,a=0):i=r.toFinite(i),o=o===void 0?a<i?1:-1:r.toFinite(o);const s=Math.max(Math.ceil((i-a)/(o||1)),0),c=new Array(s);for(let u=0;u<s;u++)c[u]=a,a+=o;return c}e.range=n})(t0);var K2=t0.range;const a0=Hr(K2);function Fr(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function G2(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function lu(e){let t,r,n;e.length!==2?(t=Fr,r=(s,c)=>Fr(e(s),c),n=(s,c)=>e(s)-c):(t=e===Fr||e===G2?e:V2,r=e,n=e);function a(s,c,u=0,d=s.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(s[f],c)<0?u=f+1:d=f}while(u<d)}return u}function i(s,c,u=0,d=s.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(s[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function o(s,c,u=0,d=s.length){const f=a(s,c,u,d-1);return f>u&&n(s[f-1],c)>-n(s[f],c)?f-1:f}return{left:a,center:o,right:i}}function V2(){return 0}function i0(e){return e===null?NaN:+e}function*Y2(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const X2=lu(Fr),Xa=X2.right;lu(i0).center;class rm extends Map{constructor(t,r=eO){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(nm(this,t))}has(t){return super.has(nm(this,t))}set(t,r){return super.set(Q2(this,t),r)}delete(t){return super.delete(J2(this,t))}}function nm({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function Q2({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function J2({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function eO(e){return e!==null&&typeof e=="object"?e.valueOf():e}function tO(e=Fr){if(e===Fr)return o0;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function o0(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const rO=Math.sqrt(50),nO=Math.sqrt(10),aO=Math.sqrt(2);function io(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),o=i>=rO?10:i>=nO?5:i>=aO?2:1;let s,c,u;return a<0?(u=Math.pow(10,-a)/o,s=Math.round(e*u),c=Math.round(t*u),s/u<e&&++s,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*o,s=Math.round(e/u),c=Math.round(t/u),s*u<e&&++s,c*u>t&&--c),c<s&&.5<=r&&r<2?io(e,t,r*2):[s,c,u]}function Fl(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,i,o]=n?io(t,e,r):io(e,t,r);if(!(i>=a))return[];const s=i-a+1,c=new Array(s);if(n)if(o<0)for(let u=0;u<s;++u)c[u]=(i-u)/-o;else for(let u=0;u<s;++u)c[u]=(i-u)*o;else if(o<0)for(let u=0;u<s;++u)c[u]=(a+u)/-o;else for(let u=0;u<s;++u)c[u]=(a+u)*o;return c}function Bl(e,t,r){return t=+t,e=+e,r=+r,io(e,t,r)[2]}function Ul(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?Bl(t,e,r):Bl(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function am(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function im(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function s0(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?o0:tO(a);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),m=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),h=Math.max(r,Math.floor(t-u*f/c+m)),g=Math.min(n,Math.floor(t+(c-u)*f/c+m));s0(e,t,h,g,a)}const i=e[t];let o=r,s=n;for(ba(e,r,t),a(e[n],i)>0&&ba(e,r,n);o<s;){for(ba(e,o,s),++o,--s;a(e[o],i)<0;)++o;for(;a(e[s],i)>0;)--s}a(e[r],i)===0?ba(e,r,s):(++s,ba(e,s,n)),s<=t&&(r=s+1),t<=s&&(n=s-1)}return e}function ba(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function iO(e,t,r){if(e=Float64Array.from(Y2(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return im(e);if(t>=1)return am(e);var n,a=(n-1)*t,i=Math.floor(a),o=am(s0(e,i).subarray(0,i+1)),s=im(e.subarray(i+1));return o+(s-o)*(a-i)}}function oO(e,t,r=i0){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,i=Math.floor(a),o=+r(e[i],i,e),s=+r(e[i+1],i+1,e);return o+(s-o)*(a-i)}}function sO(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(a);++n<a;)i[n]=e+n*r;return i}function Lt(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Pr(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Wl=Symbol("implicit");function cu(){var e=new rm,t=[],r=[],n=Wl;function a(i){let o=e.get(i);if(o===void 0){if(n!==Wl)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new rm;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return cu(t,r).unknown(n)},Lt.apply(a,arguments),a}function uu(){var e=cu().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,i,o,s=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var m=t().length,h=a<n,g=h?a:n,v=h?n:a;i=(v-g)/Math.max(1,m-c+u*2),s&&(i=Math.floor(i)),g+=(v-g-i*(m-c))*d,o=i*(1-c),s&&(g=Math.round(g),o=Math.round(o));var p=sO(m).map(function(x){return g+i*x});return r(h?p.reverse():p)}return e.domain=function(m){return arguments.length?(t(m),f()):t()},e.range=function(m){return arguments.length?([n,a]=m,n=+n,a=+a,f()):[n,a]},e.rangeRound=function(m){return[n,a]=m,n=+n,a=+a,s=!0,f()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(m){return arguments.length?(s=!!m,f()):s},e.padding=function(m){return arguments.length?(c=Math.min(1,u=+m),f()):c},e.paddingInner=function(m){return arguments.length?(c=Math.min(1,m),f()):c},e.paddingOuter=function(m){return arguments.length?(u=+m,f()):u},e.align=function(m){return arguments.length?(d=Math.max(0,Math.min(1,m)),f()):d},e.copy=function(){return uu(t(),[n,a]).round(s).paddingInner(c).paddingOuter(u).align(d)},Lt.apply(f(),arguments)}function l0(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return l0(t())},e}function lO(){return l0(uu.apply(null,arguments).paddingInner(1))}function du(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function c0(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Qa(){}var za=.7,oo=1/za,Un="\\s*([+-]?\\d+)\\s*",Ra="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",nr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",cO=/^#([0-9a-f]{3,8})$/,uO=new RegExp("^rgb\\(".concat(Un,",").concat(Un,",").concat(Un,"\\)$")),dO=new RegExp("^rgb\\(".concat(nr,",").concat(nr,",").concat(nr,"\\)$")),fO=new RegExp("^rgba\\(".concat(Un,",").concat(Un,",").concat(Un,",").concat(Ra,"\\)$")),mO=new RegExp("^rgba\\(".concat(nr,",").concat(nr,",").concat(nr,",").concat(Ra,"\\)$")),hO=new RegExp("^hsl\\(".concat(Ra,",").concat(nr,",").concat(nr,"\\)$")),pO=new RegExp("^hsla\\(".concat(Ra,",").concat(nr,",").concat(nr,",").concat(Ra,"\\)$")),om={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};du(Qa,La,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:sm,formatHex:sm,formatHex8:gO,formatHsl:vO,formatRgb:lm,toString:lm});function sm(){return this.rgb().formatHex()}function gO(){return this.rgb().formatHex8()}function vO(){return u0(this).formatHsl()}function lm(){return this.rgb().formatRgb()}function La(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=cO.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?cm(t):r===3?new ut(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Pi(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Pi(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=uO.exec(e))?new ut(t[1],t[2],t[3],1):(t=dO.exec(e))?new ut(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=fO.exec(e))?Pi(t[1],t[2],t[3],t[4]):(t=mO.exec(e))?Pi(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=hO.exec(e))?fm(t[1],t[2]/100,t[3]/100,1):(t=pO.exec(e))?fm(t[1],t[2]/100,t[3]/100,t[4]):om.hasOwnProperty(e)?cm(om[e]):e==="transparent"?new ut(NaN,NaN,NaN,0):null}function cm(e){return new ut(e>>16&255,e>>8&255,e&255,1)}function Pi(e,t,r,n){return n<=0&&(e=t=r=NaN),new ut(e,t,r,n)}function yO(e){return e instanceof Qa||(e=La(e)),e?(e=e.rgb(),new ut(e.r,e.g,e.b,e.opacity)):new ut}function Hl(e,t,r,n){return arguments.length===1?yO(e):new ut(e,t,r,n==null?1:n)}function ut(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}du(ut,Hl,c0(Qa,{brighter(e){return e=e==null?oo:Math.pow(oo,e),new ut(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?za:Math.pow(za,e),new ut(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ut(dn(this.r),dn(this.g),dn(this.b),so(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:um,formatHex:um,formatHex8:xO,formatRgb:dm,toString:dm}));function um(){return"#".concat(an(this.r)).concat(an(this.g)).concat(an(this.b))}function xO(){return"#".concat(an(this.r)).concat(an(this.g)).concat(an(this.b)).concat(an((isNaN(this.opacity)?1:this.opacity)*255))}function dm(){const e=so(this.opacity);return"".concat(e===1?"rgb(":"rgba(").concat(dn(this.r),", ").concat(dn(this.g),", ").concat(dn(this.b)).concat(e===1?")":", ".concat(e,")"))}function so(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function dn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function an(e){return e=dn(e),(e<16?"0":"")+e.toString(16)}function fm(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new qt(e,t,r,n)}function u0(e){if(e instanceof qt)return new qt(e.h,e.s,e.l,e.opacity);if(e instanceof Qa||(e=La(e)),!e)return new qt;if(e instanceof qt)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,s=i-a,c=(i+a)/2;return s?(t===i?o=(r-n)/s+(r<n)*6:r===i?o=(n-t)/s+2:o=(t-r)/s+4,s/=c<.5?i+a:2-i-a,o*=60):s=c>0&&c<1?0:o,new qt(o,s,c,e.opacity)}function bO(e,t,r,n){return arguments.length===1?u0(e):new qt(e,t,r,n==null?1:n)}function qt(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}du(qt,bO,c0(Qa,{brighter(e){return e=e==null?oo:Math.pow(oo,e),new qt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?za:Math.pow(za,e),new qt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new ut(qs(e>=240?e-240:e+120,a,n),qs(e,a,n),qs(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new qt(mm(this.h),Ei(this.s),Ei(this.l),so(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=so(this.opacity);return"".concat(e===1?"hsl(":"hsla(").concat(mm(this.h),", ").concat(Ei(this.s)*100,"%, ").concat(Ei(this.l)*100,"%").concat(e===1?")":", ".concat(e,")"))}}));function mm(e){return e=(e||0)%360,e<0?e+360:e}function Ei(e){return Math.max(0,Math.min(1,e||0))}function qs(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const fu=e=>()=>e;function wO(e,t){return function(r){return e+r*t}}function jO(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function SO(e){return(e=+e)==1?d0:function(t,r){return r-t?jO(t,r,e):fu(isNaN(t)?r:t)}}function d0(e,t){var r=t-e;return r?wO(e,r):fu(isNaN(e)?t:e)}const hm=function e(t){var r=SO(t);function n(a,i){var o=r((a=Hl(a)).r,(i=Hl(i)).r),s=r(a.g,i.g),c=r(a.b,i.b),u=d0(a.opacity,i.opacity);return function(d){return a.r=o(d),a.g=s(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=e,n}(1);function NO(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=e[a]*(1-i)+t[a]*i;return n}}function kO(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function PO(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)a[o]=ea(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(s){for(o=0;o<n;++o)i[o]=a[o](s);return i}}function EO(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function lo(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function _O(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=ea(e[a],t[a]):n[a]=t[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var ql=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Zs=new RegExp(ql.source,"g");function AO(e){return function(){return e}}function CO(e){return function(t){return e(t)+""}}function OO(e,t){var r=ql.lastIndex=Zs.lastIndex=0,n,a,i,o=-1,s=[],c=[];for(e=e+"",t=t+"";(n=ql.exec(e))&&(a=Zs.exec(t));)(i=a.index)>r&&(i=t.slice(r,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(a=a[0])?s[o]?s[o]+=a:s[++o]=a:(s[++o]=null,c.push({i:o,x:lo(n,a)})),r=Zs.lastIndex;return r<t.length&&(i=t.slice(r),s[o]?s[o]+=i:s[++o]=i),s.length<2?c[0]?CO(c[0].x):AO(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)s[(f=c[d]).i]=f.x(u);return s.join("")})}function ea(e,t){var r=typeof t,n;return t==null||r==="boolean"?fu(t):(r==="number"?lo:r==="string"?(n=La(t))?(t=n,hm):OO:t instanceof La?hm:t instanceof Date?EO:kO(t)?NO:Array.isArray(t)?PO:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?_O:lo)(e,t)}function mu(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function TO(e,t){t===void 0&&(t=e,e=ea);for(var r=0,n=t.length-1,a=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(a,a=t[++r]);return function(o){var s=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[s](o-s)}}function IO(e){return function(){return e}}function co(e){return+e}var pm=[0,1];function it(e){return e}function Zl(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:IO(isNaN(t)?NaN:.5)}function MO(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function DO(e,t,r){var n=e[0],a=e[1],i=t[0],o=t[1];return a<n?(n=Zl(a,n),i=r(o,i)):(n=Zl(n,a),i=r(i,o)),function(s){return i(n(s))}}function $O(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)a[o]=Zl(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(s){var c=Xa(e,s,1,n)-1;return i[c](a[c](s))}}function Ja(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function us(){var e=pm,t=pm,r=ea,n,a,i,o=it,s,c,u;function d(){var m=Math.min(e.length,t.length);return o!==it&&(o=MO(e[0],e[m-1])),s=m>2?$O:DO,c=u=null,f}function f(m){return m==null||isNaN(m=+m)?i:(c||(c=s(e.map(n),t,r)))(n(o(m)))}return f.invert=function(m){return o(a((u||(u=s(t,e.map(n),lo)))(m)))},f.domain=function(m){return arguments.length?(e=Array.from(m,co),d()):e.slice()},f.range=function(m){return arguments.length?(t=Array.from(m),d()):t.slice()},f.rangeRound=function(m){return t=Array.from(m),r=mu,d()},f.clamp=function(m){return arguments.length?(o=m?!0:it,d()):o!==it},f.interpolate=function(m){return arguments.length?(r=m,d()):r},f.unknown=function(m){return arguments.length?(i=m,f):i},function(m,h){return n=m,a=h,d()}}function hu(){return us()(it,it)}function zO(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function uo(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Kn(e){return e=uo(Math.abs(e)),e?e[1]:NaN}function RO(e,t){return function(r,n){for(var a=r.length,i=[],o=0,s=e[0],c=0;a>0&&s>0&&(c+s+1>n&&(s=Math.max(1,n-c)),i.push(r.substring(a-=s,a+s)),!((c+=s+1)>n));)s=e[o=(o+1)%e.length];return i.reverse().join(t)}}function LO(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var FO=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Fa(e){if(!(t=FO.exec(e)))throw new Error("invalid format: "+e);var t;return new pu({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Fa.prototype=pu.prototype;function pu(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}pu.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function BO(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var f0;function UO(e,t){var r=uo(e,t);if(!r)return e+"";var n=r[0],a=r[1],i=a-(f0=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+uo(e,Math.max(0,t+i-1))[0]}function gm(e,t){var r=uo(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const vm={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:zO,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>gm(e*100,t),r:gm,s:UO,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function ym(e){return e}var xm=Array.prototype.map,bm=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function WO(e){var t=e.grouping===void 0||e.thousands===void 0?ym:RO(xm.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?ym:LO(xm.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"−":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=Fa(f);var m=f.fill,h=f.align,g=f.sign,v=f.symbol,p=f.zero,x=f.width,b=f.comma,w=f.precision,j=f.trim,S=f.type;S==="n"?(b=!0,S="g"):vm[S]||(w===void 0&&(w=12),j=!0,S="g"),(p||m==="0"&&h==="=")&&(p=!0,m="0",h="=");var N=v==="$"?r:v==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",k=v==="$"?n:/[%p]/.test(S)?o:"",A=vm[S],C=/[defgprs%]/.test(S);w=w===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function D(T){var O=N,B=k,Z,z,U;if(S==="c")B=A(T)+B,T="";else{T=+T;var q=T<0||1/T<0;if(T=isNaN(T)?c:A(Math.abs(T),w),j&&(T=BO(T)),q&&+T==0&&g!=="+"&&(q=!1),O=(q?g==="("?g:s:g==="-"||g==="("?"":g)+O,B=(S==="s"?bm[8+f0/3]:"")+B+(q&&g==="("?")":""),C){for(Z=-1,z=T.length;++Z<z;)if(U=T.charCodeAt(Z),48>U||U>57){B=(U===46?a+T.slice(Z+1):T.slice(Z))+B,T=T.slice(0,Z);break}}}b&&!p&&(T=t(T,1/0));var Q=O.length+T.length+B.length,V=Q<x?new Array(x-Q+1).join(m):"";switch(b&&p&&(T=t(V+T,V.length?x-B.length:1/0),V=""),h){case"<":T=O+T+B+V;break;case"=":T=O+V+T+B;break;case"^":T=V.slice(0,Q=V.length>>1)+O+T+B+V.slice(Q);break;default:T=V+O+T+B;break}return i(T)}return D.toString=function(){return f+""},D}function d(f,m){var h=u((f=Fa(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(Kn(m)/3)))*3,v=Math.pow(10,-g),p=bm[8+g/3];return function(x){return h(v*x)+p}}return{format:u,formatPrefix:d}}var _i,gu,m0;HO({thousands:",",grouping:[3],currency:["$",""]});function HO(e){return _i=WO(e),gu=_i.format,m0=_i.formatPrefix,_i}function qO(e){return Math.max(0,-Kn(Math.abs(e)))}function ZO(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Kn(t)/3)))*3-Kn(Math.abs(e)))}function KO(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Kn(t)-Kn(e))+1}function h0(e,t,r,n){var a=Ul(e,t,r),i;switch(n=Fa(n==null?",f":n),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=ZO(a,o))&&(n.precision=i),m0(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=KO(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=qO(a))&&(n.precision=i-(n.type==="%")*2);break}}return gu(n)}function Zr(e){var t=e.domain;return e.ticks=function(r){var n=t();return Fl(n[0],n[n.length-1],r==null?10:r)},e.tickFormat=function(r,n){var a=t();return h0(a[0],a[a.length-1],r==null?10:r,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,i=n.length-1,o=n[a],s=n[i],c,u,d=10;for(s<o&&(u=o,o=s,s=u,u=a,a=i,i=u);d-- >0;){if(u=Bl(o,s,r),u===c)return n[a]=o,n[i]=s,t(n);if(u>0)o=Math.floor(o/u)*u,s=Math.ceil(s/u)*u;else if(u<0)o=Math.ceil(o*u)/u,s=Math.floor(s*u)/u;else break;c=u}return e},e}function p0(){var e=hu();return e.copy=function(){return Ja(e,p0())},Lt.apply(e,arguments),Zr(e)}function g0(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,co),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return g0(e).unknown(t)},e=arguments.length?Array.from(e,co):[0,1],Zr(r)}function v0(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],i=e[n],o;return i<a&&(o=r,r=n,n=o,o=a,a=i,i=o),e[r]=t.floor(a),e[n]=t.ceil(i),e}function wm(e){return Math.log(e)}function jm(e){return Math.exp(e)}function GO(e){return-Math.log(-e)}function VO(e){return-Math.exp(-e)}function YO(e){return isFinite(e)?+("1e"+e):e<0?0:e}function XO(e){return e===10?YO:e===Math.E?Math.exp:t=>Math.pow(e,t)}function QO(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Sm(e){return(t,r)=>-e(-t,r)}function vu(e){const t=e(wm,jm),r=t.domain;let n=10,a,i;function o(){return a=QO(n),i=XO(n),r()[0]<0?(a=Sm(a),i=Sm(i),e(GO,VO)):e(wm,jm),t}return t.base=function(s){return arguments.length?(n=+s,o()):n},t.domain=function(s){return arguments.length?(r(s),o()):r()},t.ticks=s=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let m=a(u),h=a(d),g,v;const p=s==null?10:+s;let x=[];if(!(n%1)&&h-m<p){if(m=Math.floor(m),h=Math.ceil(h),u>0){for(;m<=h;++m)for(g=1;g<n;++g)if(v=m<0?g/i(-m):g*i(m),!(v<u)){if(v>d)break;x.push(v)}}else for(;m<=h;++m)for(g=n-1;g>=1;--g)if(v=m>0?g/i(-m):g*i(m),!(v<u)){if(v>d)break;x.push(v)}x.length*2<p&&(x=Fl(u,d,p))}else x=Fl(m,h,Math.min(h-m,p)).map(i);return f?x.reverse():x},t.tickFormat=(s,c)=>{if(s==null&&(s=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=Fa(c)).precision==null&&(c.trim=!0),c=gu(c)),s===1/0)return c;const u=Math.max(1,n*s/t.ticks().length);return d=>{let f=d/i(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},t.nice=()=>r(v0(r(),{floor:s=>i(Math.floor(a(s))),ceil:s=>i(Math.ceil(a(s)))})),t}function y0(){const e=vu(us()).domain([1,10]);return e.copy=()=>Ja(e,y0()).base(e.base()),Lt.apply(e,arguments),e}function Nm(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function km(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function yu(e){var t=1,r=e(Nm(t),km(t));return r.constant=function(n){return arguments.length?e(Nm(t=+n),km(t)):t},Zr(r)}function x0(){var e=yu(us());return e.copy=function(){return Ja(e,x0()).constant(e.constant())},Lt.apply(e,arguments)}function Pm(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function JO(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function eT(e){return e<0?-e*e:e*e}function xu(e){var t=e(it,it),r=1;function n(){return r===1?e(it,it):r===.5?e(JO,eT):e(Pm(r),Pm(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},Zr(t)}function bu(){var e=xu(us());return e.copy=function(){return Ja(e,bu()).exponent(e.exponent())},Lt.apply(e,arguments),e}function tT(){return bu.apply(null,arguments).exponent(.5)}function Em(e){return Math.sign(e)*e*e}function rT(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function b0(){var e=hu(),t=[0,1],r=!1,n;function a(i){var o=rT(e(i));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(i){return e.invert(Em(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,co)).map(Em)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return b0(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Lt.apply(a,arguments),Zr(a)}function w0(){var e=[],t=[],r=[],n;function a(){var o=0,s=Math.max(1,t.length);for(r=new Array(s-1);++o<s;)r[o-1]=oO(e,o/s);return i}function i(o){return o==null||isNaN(o=+o)?n:t[Xa(r,o)]}return i.invertExtent=function(o){var s=t.indexOf(o);return s<0?[NaN,NaN]:[s>0?r[s-1]:e[0],s<r.length?r[s]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let s of o)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(Fr),a()},i.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return w0().domain(e).range(t).unknown(n)},Lt.apply(i,arguments)}function j0(){var e=0,t=1,r=1,n=[.5],a=[0,1],i;function o(c){return c!=null&&c<=c?a[Xa(n,c,0,r)]:i}function s(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,s()):[e,t]},o.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,s()):a.slice()},o.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return j0().domain([e,t]).range(a).unknown(i)},Lt.apply(Zr(o),arguments)}function S0(){var e=[.5],t=[0,1],r,n=1;function a(i){return i!=null&&i<=i?t[Xa(e,i,0,n)]:r}return a.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return S0().domain(e).range(t).unknown(r)},Lt.apply(a,arguments)}const Ks=new Date,Gs=new Date;function Re(e,t,r,n){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const o=a(i),s=a.ceil(i);return i-o<s-i?o:s},a.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,s)=>{const c=[];if(i=a.ceil(i),s=s==null?1:Math.floor(s),!(i<o)||!(s>0))return c;let u;do c.push(u=new Date(+i)),t(i,s),e(i);while(u<i&&i<o);return c},a.filter=i=>Re(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,s)=>{if(o>=o)if(s<0)for(;++s<=0;)for(;t(o,-1),!i(o););else for(;--s>=0;)for(;t(o,1),!i(o););}),r&&(a.count=(i,o)=>(Ks.setTime(+i),Gs.setTime(+o),e(Ks),e(Gs),Math.floor(r(Ks,Gs))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?o=>n(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const fo=Re(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);fo.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Re(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):fo);fo.range;const fr=1e3,Tt=fr*60,mr=Tt*60,br=mr*24,wu=br*7,_m=br*30,Vs=br*365,on=Re(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*fr)},(e,t)=>(t-e)/fr,e=>e.getUTCSeconds());on.range;const ju=Re(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*fr)},(e,t)=>{e.setTime(+e+t*Tt)},(e,t)=>(t-e)/Tt,e=>e.getMinutes());ju.range;const Su=Re(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Tt)},(e,t)=>(t-e)/Tt,e=>e.getUTCMinutes());Su.range;const Nu=Re(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*fr-e.getMinutes()*Tt)},(e,t)=>{e.setTime(+e+t*mr)},(e,t)=>(t-e)/mr,e=>e.getHours());Nu.range;const ku=Re(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*mr)},(e,t)=>(t-e)/mr,e=>e.getUTCHours());ku.range;const ei=Re(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Tt)/br,e=>e.getDate()-1);ei.range;const ds=Re(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/br,e=>e.getUTCDate()-1);ds.range;const N0=Re(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/br,e=>Math.floor(e/br));N0.range;function kn(e){return Re(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Tt)/wu)}const fs=kn(0),mo=kn(1),nT=kn(2),aT=kn(3),Gn=kn(4),iT=kn(5),oT=kn(6);fs.range;mo.range;nT.range;aT.range;Gn.range;iT.range;oT.range;function Pn(e){return Re(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/wu)}const ms=Pn(0),ho=Pn(1),sT=Pn(2),lT=Pn(3),Vn=Pn(4),cT=Pn(5),uT=Pn(6);ms.range;ho.range;sT.range;lT.range;Vn.range;cT.range;uT.range;const Pu=Re(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Pu.range;const Eu=Re(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Eu.range;const wr=Re(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());wr.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Re(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});wr.range;const jr=Re(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());jr.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Re(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});jr.range;function k0(e,t,r,n,a,i){const o=[[on,1,fr],[on,5,5*fr],[on,15,15*fr],[on,30,30*fr],[i,1,Tt],[i,5,5*Tt],[i,15,15*Tt],[i,30,30*Tt],[a,1,mr],[a,3,3*mr],[a,6,6*mr],[a,12,12*mr],[n,1,br],[n,2,2*br],[r,1,wu],[t,1,_m],[t,3,3*_m],[e,1,Vs]];function s(u,d,f){const m=d<u;m&&([u,d]=[d,u]);const h=f&&typeof f.range=="function"?f:c(u,d,f),g=h?h.range(u,+d+1):[];return m?g.reverse():g}function c(u,d,f){const m=Math.abs(d-u)/f,h=lu(([,,p])=>p).right(o,m);if(h===o.length)return e.every(Ul(u/Vs,d/Vs,f));if(h===0)return fo.every(Math.max(Ul(u,d,f),1));const[g,v]=o[m/o[h-1][2]<o[h][2]/m?h-1:h];return g.every(v)}return[s,c]}const[dT,fT]=k0(jr,Eu,ms,N0,ku,Su),[mT,hT]=k0(wr,Pu,fs,ei,Nu,ju);function Ys(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Xs(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function wa(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function pT(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,i=e.days,o=e.shortDays,s=e.months,c=e.shortMonths,u=ja(a),d=Sa(a),f=ja(i),m=Sa(i),h=ja(o),g=Sa(o),v=ja(s),p=Sa(s),x=ja(c),b=Sa(c),w={a:q,A:Q,b:V,B:Pe,c:null,d:Mm,e:Mm,f:RT,g:GT,G:YT,H:DT,I:$T,j:zT,L:P0,m:LT,M:FT,p:G,q:R,Q:zm,s:Rm,S:BT,u:UT,U:WT,V:HT,w:qT,W:ZT,x:null,X:null,y:KT,Y:VT,Z:XT,"%":$m},j={a:J,A:Ce,b:Oe,B:be,c:null,d:Dm,e:Dm,f:tI,g:dI,G:mI,H:QT,I:JT,j:eI,L:_0,m:rI,M:nI,p:Yr,q:Ar,Q:zm,s:Rm,S:aI,u:iI,U:oI,V:sI,w:lI,W:cI,x:null,X:null,y:uI,Y:fI,Z:hI,"%":$m},S={a:D,A:T,b:O,B,c:Z,d:Tm,e:Tm,f:OT,g:Om,G:Cm,H:Im,I:Im,j:ET,L:CT,m:PT,M:_T,p:C,q:kT,Q:IT,s:MT,S:AT,u:bT,U:wT,V:jT,w:xT,W:ST,x:z,X:U,y:Om,Y:Cm,Z:NT,"%":TT};w.x=N(r,w),w.X=N(n,w),w.c=N(t,w),j.x=N(r,j),j.X=N(n,j),j.c=N(t,j);function N(L,ee){return function(ae){var M=[],Qe=-1,le=0,nt=L.length,Je,pt,sa;for(ae instanceof Date||(ae=new Date(+ae));++Qe<nt;)L.charCodeAt(Qe)===37&&(M.push(L.slice(le,Qe)),(pt=Am[Je=L.charAt(++Qe)])!=null?Je=L.charAt(++Qe):pt=Je==="e"?" ":"0",(sa=ee[Je])&&(Je=sa(ae,pt)),M.push(Je),le=Qe+1);return M.push(L.slice(le,Qe)),M.join("")}}function k(L,ee){return function(ae){var M=wa(1900,void 0,1),Qe=A(M,L,ae+="",0),le,nt;if(Qe!=ae.length)return null;if("Q"in M)return new Date(M.Q);if("s"in M)return new Date(M.s*1e3+("L"in M?M.L:0));if(ee&&!("Z"in M)&&(M.Z=0),"p"in M&&(M.H=M.H%12+M.p*12),M.m===void 0&&(M.m="q"in M?M.q:0),"V"in M){if(M.V<1||M.V>53)return null;"w"in M||(M.w=1),"Z"in M?(le=Xs(wa(M.y,0,1)),nt=le.getUTCDay(),le=nt>4||nt===0?ho.ceil(le):ho(le),le=ds.offset(le,(M.V-1)*7),M.y=le.getUTCFullYear(),M.m=le.getUTCMonth(),M.d=le.getUTCDate()+(M.w+6)%7):(le=Ys(wa(M.y,0,1)),nt=le.getDay(),le=nt>4||nt===0?mo.ceil(le):mo(le),le=ei.offset(le,(M.V-1)*7),M.y=le.getFullYear(),M.m=le.getMonth(),M.d=le.getDate()+(M.w+6)%7)}else("W"in M||"U"in M)&&("w"in M||(M.w="u"in M?M.u%7:"W"in M?1:0),nt="Z"in M?Xs(wa(M.y,0,1)).getUTCDay():Ys(wa(M.y,0,1)).getDay(),M.m=0,M.d="W"in M?(M.w+6)%7+M.W*7-(nt+5)%7:M.w+M.U*7-(nt+6)%7);return"Z"in M?(M.H+=M.Z/100|0,M.M+=M.Z%100,Xs(M)):Ys(M)}}function A(L,ee,ae,M){for(var Qe=0,le=ee.length,nt=ae.length,Je,pt;Qe<le;){if(M>=nt)return-1;if(Je=ee.charCodeAt(Qe++),Je===37){if(Je=ee.charAt(Qe++),pt=S[Je in Am?ee.charAt(Qe++):Je],!pt||(M=pt(L,ae,M))<0)return-1}else if(Je!=ae.charCodeAt(M++))return-1}return M}function C(L,ee,ae){var M=u.exec(ee.slice(ae));return M?(L.p=d.get(M[0].toLowerCase()),ae+M[0].length):-1}function D(L,ee,ae){var M=h.exec(ee.slice(ae));return M?(L.w=g.get(M[0].toLowerCase()),ae+M[0].length):-1}function T(L,ee,ae){var M=f.exec(ee.slice(ae));return M?(L.w=m.get(M[0].toLowerCase()),ae+M[0].length):-1}function O(L,ee,ae){var M=x.exec(ee.slice(ae));return M?(L.m=b.get(M[0].toLowerCase()),ae+M[0].length):-1}function B(L,ee,ae){var M=v.exec(ee.slice(ae));return M?(L.m=p.get(M[0].toLowerCase()),ae+M[0].length):-1}function Z(L,ee,ae){return A(L,t,ee,ae)}function z(L,ee,ae){return A(L,r,ee,ae)}function U(L,ee,ae){return A(L,n,ee,ae)}function q(L){return o[L.getDay()]}function Q(L){return i[L.getDay()]}function V(L){return c[L.getMonth()]}function Pe(L){return s[L.getMonth()]}function G(L){return a[+(L.getHours()>=12)]}function R(L){return 1+~~(L.getMonth()/3)}function J(L){return o[L.getUTCDay()]}function Ce(L){return i[L.getUTCDay()]}function Oe(L){return c[L.getUTCMonth()]}function be(L){return s[L.getUTCMonth()]}function Yr(L){return a[+(L.getUTCHours()>=12)]}function Ar(L){return 1+~~(L.getUTCMonth()/3)}return{format:function(L){var ee=N(L+="",w);return ee.toString=function(){return L},ee},parse:function(L){var ee=k(L+="",!1);return ee.toString=function(){return L},ee},utcFormat:function(L){var ee=N(L+="",j);return ee.toString=function(){return L},ee},utcParse:function(L){var ee=k(L+="",!0);return ee.toString=function(){return L},ee}}}var Am={"-":"",_:" ",0:"0"},Be=/^\s*\d+/,gT=/^%/,vT=/[\\^$*+?|[\]().{}]/g;function ie(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(t)+a:a)}function yT(e){return e.replace(vT,"\\$&")}function ja(e){return new RegExp("^(?:"+e.map(yT).join("|")+")","i")}function Sa(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function xT(e,t,r){var n=Be.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function bT(e,t,r){var n=Be.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function wT(e,t,r){var n=Be.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function jT(e,t,r){var n=Be.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function ST(e,t,r){var n=Be.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function Cm(e,t,r){var n=Be.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function Om(e,t,r){var n=Be.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function NT(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function kT(e,t,r){var n=Be.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function PT(e,t,r){var n=Be.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function Tm(e,t,r){var n=Be.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function ET(e,t,r){var n=Be.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function Im(e,t,r){var n=Be.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function _T(e,t,r){var n=Be.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function AT(e,t,r){var n=Be.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function CT(e,t,r){var n=Be.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function OT(e,t,r){var n=Be.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function TT(e,t,r){var n=gT.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function IT(e,t,r){var n=Be.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function MT(e,t,r){var n=Be.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function Mm(e,t){return ie(e.getDate(),t,2)}function DT(e,t){return ie(e.getHours(),t,2)}function $T(e,t){return ie(e.getHours()%12||12,t,2)}function zT(e,t){return ie(1+ei.count(wr(e),e),t,3)}function P0(e,t){return ie(e.getMilliseconds(),t,3)}function RT(e,t){return P0(e,t)+"000"}function LT(e,t){return ie(e.getMonth()+1,t,2)}function FT(e,t){return ie(e.getMinutes(),t,2)}function BT(e,t){return ie(e.getSeconds(),t,2)}function UT(e){var t=e.getDay();return t===0?7:t}function WT(e,t){return ie(fs.count(wr(e)-1,e),t,2)}function E0(e){var t=e.getDay();return t>=4||t===0?Gn(e):Gn.ceil(e)}function HT(e,t){return e=E0(e),ie(Gn.count(wr(e),e)+(wr(e).getDay()===4),t,2)}function qT(e){return e.getDay()}function ZT(e,t){return ie(mo.count(wr(e)-1,e),t,2)}function KT(e,t){return ie(e.getFullYear()%100,t,2)}function GT(e,t){return e=E0(e),ie(e.getFullYear()%100,t,2)}function VT(e,t){return ie(e.getFullYear()%1e4,t,4)}function YT(e,t){var r=e.getDay();return e=r>=4||r===0?Gn(e):Gn.ceil(e),ie(e.getFullYear()%1e4,t,4)}function XT(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ie(t/60|0,"0",2)+ie(t%60,"0",2)}function Dm(e,t){return ie(e.getUTCDate(),t,2)}function QT(e,t){return ie(e.getUTCHours(),t,2)}function JT(e,t){return ie(e.getUTCHours()%12||12,t,2)}function eI(e,t){return ie(1+ds.count(jr(e),e),t,3)}function _0(e,t){return ie(e.getUTCMilliseconds(),t,3)}function tI(e,t){return _0(e,t)+"000"}function rI(e,t){return ie(e.getUTCMonth()+1,t,2)}function nI(e,t){return ie(e.getUTCMinutes(),t,2)}function aI(e,t){return ie(e.getUTCSeconds(),t,2)}function iI(e){var t=e.getUTCDay();return t===0?7:t}function oI(e,t){return ie(ms.count(jr(e)-1,e),t,2)}function A0(e){var t=e.getUTCDay();return t>=4||t===0?Vn(e):Vn.ceil(e)}function sI(e,t){return e=A0(e),ie(Vn.count(jr(e),e)+(jr(e).getUTCDay()===4),t,2)}function lI(e){return e.getUTCDay()}function cI(e,t){return ie(ho.count(jr(e)-1,e),t,2)}function uI(e,t){return ie(e.getUTCFullYear()%100,t,2)}function dI(e,t){return e=A0(e),ie(e.getUTCFullYear()%100,t,2)}function fI(e,t){return ie(e.getUTCFullYear()%1e4,t,4)}function mI(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Vn(e):Vn.ceil(e),ie(e.getUTCFullYear()%1e4,t,4)}function hI(){return"+0000"}function $m(){return"%"}function zm(e){return+e}function Rm(e){return Math.floor(+e/1e3)}var In,C0,O0;pI({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function pI(e){return In=pT(e),C0=In.format,In.parse,O0=In.utcFormat,In.utcParse,In}function gI(e){return new Date(e)}function vI(e){return e instanceof Date?+e:+new Date(+e)}function _u(e,t,r,n,a,i,o,s,c,u){var d=hu(),f=d.invert,m=d.domain,h=u(".%L"),g=u(":%S"),v=u("%I:%M"),p=u("%I %p"),x=u("%a %d"),b=u("%b %d"),w=u("%B"),j=u("%Y");function S(N){return(c(N)<N?h:s(N)<N?g:o(N)<N?v:i(N)<N?p:n(N)<N?a(N)<N?x:b:r(N)<N?w:j)(N)}return d.invert=function(N){return new Date(f(N))},d.domain=function(N){return arguments.length?m(Array.from(N,vI)):m().map(gI)},d.ticks=function(N){var k=m();return e(k[0],k[k.length-1],N==null?10:N)},d.tickFormat=function(N,k){return k==null?S:u(k)},d.nice=function(N){var k=m();return(!N||typeof N.range!="function")&&(N=t(k[0],k[k.length-1],N==null?10:N)),N?m(v0(k,N)):d},d.copy=function(){return Ja(d,_u(e,t,r,n,a,i,o,s,c,u))},d}function yI(){return Lt.apply(_u(mT,hT,wr,Pu,fs,ei,Nu,ju,on,C0).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function xI(){return Lt.apply(_u(dT,fT,jr,Eu,ms,ds,ku,Su,on,O0).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function hs(){var e=0,t=1,r,n,a,i,o=it,s=!1,c;function u(f){return f==null||isNaN(f=+f)?c:o(a===0?.5:(f=(i(f)-r)*a,s?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=i(e=+e),n=i(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(s=!!f,u):s},u.interpolator=function(f){return arguments.length?(o=f,u):o};function d(f){return function(m){var h,g;return arguments.length?([h,g]=m,o=f(h,g),u):[o(0),o(1)]}}return u.range=d(ea),u.rangeRound=d(mu),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return i=f,r=f(e),n=f(t),a=r===n?0:1/(n-r),u}}function Kr(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function T0(){var e=Zr(hs()(it));return e.copy=function(){return Kr(e,T0())},Pr.apply(e,arguments)}function I0(){var e=vu(hs()).domain([1,10]);return e.copy=function(){return Kr(e,I0()).base(e.base())},Pr.apply(e,arguments)}function M0(){var e=yu(hs());return e.copy=function(){return Kr(e,M0()).constant(e.constant())},Pr.apply(e,arguments)}function Au(){var e=xu(hs());return e.copy=function(){return Kr(e,Au()).exponent(e.exponent())},Pr.apply(e,arguments)}function bI(){return Au.apply(null,arguments).exponent(.5)}function D0(){var e=[],t=it;function r(n){if(n!=null&&!isNaN(n=+n))return t((Xa(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Fr),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>iO(e,i/n))},r.copy=function(){return D0(t).domain(e)},Pr.apply(r,arguments)}function ps(){var e=0,t=.5,r=1,n=1,a,i,o,s,c,u=it,d,f=!1,m;function h(v){return isNaN(v=+v)?m:(v=.5+((v=+d(v))-i)*(n*v<n*i?s:c),u(f?Math.max(0,Math.min(1,v)):v))}h.domain=function(v){return arguments.length?([e,t,r]=v,a=d(e=+e),i=d(t=+t),o=d(r=+r),s=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),n=i<a?-1:1,h):[e,t,r]},h.clamp=function(v){return arguments.length?(f=!!v,h):f},h.interpolator=function(v){return arguments.length?(u=v,h):u};function g(v){return function(p){var x,b,w;return arguments.length?([x,b,w]=p,u=TO(v,[x,b,w]),h):[u(0),u(.5),u(1)]}}return h.range=g(ea),h.rangeRound=g(mu),h.unknown=function(v){return arguments.length?(m=v,h):m},function(v){return d=v,a=v(e),i=v(t),o=v(r),s=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),n=i<a?-1:1,h}}function $0(){var e=Zr(ps()(it));return e.copy=function(){return Kr(e,$0())},Pr.apply(e,arguments)}function z0(){var e=vu(ps()).domain([.1,1,10]);return e.copy=function(){return Kr(e,z0()).base(e.base())},Pr.apply(e,arguments)}function R0(){var e=yu(ps());return e.copy=function(){return Kr(e,R0()).constant(e.constant())},Pr.apply(e,arguments)}function Cu(){var e=xu(ps());return e.copy=function(){return Kr(e,Cu()).exponent(e.exponent())},Pr.apply(e,arguments)}function wI(){return Cu.apply(null,arguments).exponent(.5)}const ka=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:uu,scaleDiverging:$0,scaleDivergingLog:z0,scaleDivergingPow:Cu,scaleDivergingSqrt:wI,scaleDivergingSymlog:R0,scaleIdentity:g0,scaleImplicit:Wl,scaleLinear:p0,scaleLog:y0,scaleOrdinal:cu,scalePoint:lO,scalePow:bu,scaleQuantile:w0,scaleQuantize:j0,scaleRadial:b0,scaleSequential:T0,scaleSequentialLog:I0,scaleSequentialPow:Au,scaleSequentialQuantile:D0,scaleSequentialSqrt:bI,scaleSequentialSymlog:M0,scaleSqrt:tT,scaleSymlog:x0,scaleThreshold:S0,scaleTime:yI,scaleUtc:xI,tickFormat:h0},Symbol.toStringTag,{value:"Module"}));var En=e=>e.chartData,jI=E([En],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),L0=(e,t,r,n)=>n?jI(e):En(e);function Yn(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(Gt(t)&&Gt(r))return!0}return!1}function Lm(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function SI(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,a,i;if(Gt(r))a=r;else if(typeof r=="function")return;if(Gt(n))i=n;else if(typeof n=="function")return;var o=[a,i];if(Yn(o))return o}}function NI(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(Yn(n))return Lm(n,t,r)}catch(h){}if(Array.isArray(e)&&e.length===2){var[a,i]=e,o,s;if(a==="auto")t!=null&&(o=Math.min(...t));else if(W(a))o=a;else if(typeof a=="function")try{t!=null&&(o=a(t==null?void 0:t[0]))}catch(h){}else if(typeof a=="string"&&zf.test(a)){var c=zf.exec(a);if(c==null||t==null)o=void 0;else{var u=+c[1];o=t[0]-u}}else o=t==null?void 0:t[0];if(i==="auto")t!=null&&(s=Math.max(...t));else if(W(i))s=i;else if(typeof i=="function")try{t!=null&&(s=i(t==null?void 0:t[1]))}catch(h){}else if(typeof i=="string"&&Rf.test(i)){var d=Rf.exec(i);if(d==null||t==null)s=void 0;else{var f=+d[1];s=t[1]+f}}else s=t==null?void 0:t[1];var m=[o,s];if(Yn(m))return t==null?m:Lm(m,t,r)}}}var ta=1e9,kI={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Tu,we=!0,$t="[DecimalError] ",fn=$t+"Invalid argument: ",Ou=$t+"Exponent out of range: ",ra=Math.floor,en=Math.pow,PI=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,jt,Fe=1e7,ve=7,F0=9007199254740991,po=ra(F0/ve),F={};F.absoluteValue=F.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};F.comparedTo=F.cmp=function(e){var t,r,n,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};F.decimalPlaces=F.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*ve;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};F.dividedBy=F.div=function(e){return vr(this,new this.constructor(e))};F.dividedToIntegerBy=F.idiv=function(e){var t=this,r=t.constructor;return me(vr(t,new r(e),0,1),r.precision)};F.equals=F.eq=function(e){return!this.cmp(e)};F.exponent=function(){return Ie(this)};F.greaterThan=F.gt=function(e){return this.cmp(e)>0};F.greaterThanOrEqualTo=F.gte=function(e){return this.cmp(e)>=0};F.isInteger=F.isint=function(){return this.e>this.d.length-2};F.isNegative=F.isneg=function(){return this.s<0};F.isPositive=F.ispos=function(){return this.s>0};F.isZero=function(){return this.s===0};F.lessThan=F.lt=function(e){return this.cmp(e)<0};F.lessThanOrEqualTo=F.lte=function(e){return this.cmp(e)<1};F.logarithm=F.log=function(e){var t,r=this,n=r.constructor,a=n.precision,i=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(jt))throw Error($t+"NaN");if(r.s<1)throw Error($t+(r.s?"NaN":"-Infinity"));return r.eq(jt)?new n(0):(we=!1,t=vr(Ba(r,i),Ba(e,i),i),we=!0,me(t,a))};F.minus=F.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?W0(t,e):B0(t,(e.s=-e.s,e))};F.modulo=F.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error($t+"NaN");return r.s?(we=!1,t=vr(r,e,0,1).times(e),we=!0,r.minus(t)):me(new n(r),a)};F.naturalExponential=F.exp=function(){return U0(this)};F.naturalLogarithm=F.ln=function(){return Ba(this)};F.negated=F.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};F.plus=F.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?B0(t,e):W0(t,(e.s=-e.s,e))};F.precision=F.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(fn+e);if(t=Ie(a)+1,n=a.d.length-1,r=n*ve+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};F.squareRoot=F.sqrt=function(){var e,t,r,n,a,i,o,s=this,c=s.constructor;if(s.s<1){if(!s.s)return new c(0);throw Error($t+"NaN")}for(e=Ie(s),we=!1,a=Math.sqrt(+s),a==0||a==1/0?(t=tr(s.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=ra((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(a.toString()),r=c.precision,a=o=r+3;;)if(i=n,n=i.plus(vr(s,i,o+2)).times(.5),tr(i.d).slice(0,o)===(t=tr(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(me(i,r+1,0),i.times(i).eq(s)){n=i;break}}else if(t!="9999")break;o+=4}return we=!0,me(n,r)};F.times=F.mul=function(e){var t,r,n,a,i,o,s,c,u,d=this,f=d.constructor,m=d.d,h=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=m.length,u=h.length,c<u&&(i=m,m=h,h=i,o=c,c=u,u=o),i=[],o=c+u,n=o;n--;)i.push(0);for(n=u;--n>=0;){for(t=0,a=c+n;a>n;)s=i[a]+h[n]*m[a-n-1]+t,i[a--]=s%Fe|0,t=s/Fe|0;i[a]=(i[a]+t)%Fe|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,we?me(e,f.precision):e};F.toDecimalPlaces=F.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(ir(e,0,ta),t===void 0?t=n.rounding:ir(t,0,8),me(r,e+Ie(r)+1,t))};F.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=jn(n,!0):(ir(e,0,ta),t===void 0?t=a.rounding:ir(t,0,8),n=me(new a(n),e+1,t),r=jn(n,!0,e+1)),r};F.toFixed=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?jn(a):(ir(e,0,ta),t===void 0?t=i.rounding:ir(t,0,8),n=me(new i(a),e+Ie(a)+1,t),r=jn(n.abs(),!1,e+Ie(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};F.toInteger=F.toint=function(){var e=this,t=e.constructor;return me(new t(e),Ie(e)+1,t.rounding)};F.toNumber=function(){return+this};F.toPower=F.pow=function(e){var t,r,n,a,i,o,s=this,c=s.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(jt);if(s=new c(s),!s.s){if(e.s<1)throw Error($t+"Infinity");return s}if(s.eq(jt))return s;if(n=c.precision,e.eq(jt))return me(s,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=s.s,o){if((r=d<0?-d:d)<=F0){for(a=new c(jt),t=Math.ceil(n/ve+4),we=!1;r%2&&(a=a.times(s),Bm(a.d,t)),r=ra(r/2),r!==0;)s=s.times(s),Bm(s.d,t);return we=!0,e.s<0?new c(jt).div(a):me(a,n)}}else if(i<0)throw Error($t+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,s.s=1,we=!1,a=e.times(Ba(s,n+u)),we=!0,a=U0(a),a.s=i,a};F.toPrecision=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?(r=Ie(a),n=jn(a,r<=i.toExpNeg||r>=i.toExpPos)):(ir(e,1,ta),t===void 0?t=i.rounding:ir(t,0,8),a=me(new i(a),e,t),r=Ie(a),n=jn(a,e<=r||r<=i.toExpNeg,e)),n};F.toSignificantDigits=F.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(ir(e,1,ta),t===void 0?t=n.rounding:ir(t,0,8)),me(new n(r),e,t)};F.toString=F.valueOf=F.val=F.toJSON=F[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Ie(e),r=e.constructor;return jn(e,t<=r.toExpNeg||t>=r.toExpPos)};function B0(e,t){var r,n,a,i,o,s,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),we?me(t,f):t;if(c=e.d,u=t.d,o=e.e,a=t.e,c=c.slice(),i=o-a,i){for(i<0?(n=c,i=-i,s=u.length):(n=u,a=o,s=c.length),o=Math.ceil(f/ve),s=o>s?o+1:s+1,i>s&&(i=s,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(s=c.length,i=u.length,s-i<0&&(i=s,n=u,u=c,c=n),r=0;i;)r=(c[--i]=c[i]+u[i]+r)/Fe|0,c[i]%=Fe;for(r&&(c.unshift(r),++a),s=c.length;c[--s]==0;)c.pop();return t.d=c,t.e=a,we?me(t,f):t}function ir(e,t,r){if(e!==~~e||e<t||e>r)throw Error(fn+e)}function tr(e){var t,r,n,a=e.length-1,i="",o=e[0];if(a>0){for(i+=o,t=1;t<a;t++)n=e[t]+"",r=ve-n.length,r&&(i+=$r(r)),i+=n;o=e[t],n=o+"",r=ve-n.length,r&&(i+=$r(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var vr=function(){function e(n,a){var i,o=0,s=n.length;for(n=n.slice();s--;)i=n[s]*a+o,n[s]=i%Fe|0,o=i/Fe|0;return o&&n.unshift(o),n}function t(n,a,i,o){var s,c;if(i!=o)c=i>o?1:-1;else for(s=c=0;s<i;s++)if(n[s]!=a[s]){c=n[s]>a[s]?1:-1;break}return c}function r(n,a,i){for(var o=0;i--;)n[i]-=o,o=n[i]<a[i]?1:0,n[i]=o*Fe+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,o){var s,c,u,d,f,m,h,g,v,p,x,b,w,j,S,N,k,A,C=n.constructor,D=n.s==a.s?1:-1,T=n.d,O=a.d;if(!n.s)return new C(n);if(!a.s)throw Error($t+"Division by zero");for(c=n.e-a.e,k=O.length,S=T.length,h=new C(D),g=h.d=[],u=0;O[u]==(T[u]||0);)++u;if(O[u]>(T[u]||0)&&--c,i==null?b=i=C.precision:o?b=i+(Ie(n)-Ie(a))+1:b=i,b<0)return new C(0);if(b=b/ve+2|0,u=0,k==1)for(d=0,O=O[0],b++;(u<S||d)&&b--;u++)w=d*Fe+(T[u]||0),g[u]=w/O|0,d=w%O|0;else{for(d=Fe/(O[0]+1)|0,d>1&&(O=e(O,d),T=e(T,d),k=O.length,S=T.length),j=k,v=T.slice(0,k),p=v.length;p<k;)v[p++]=0;A=O.slice(),A.unshift(0),N=O[0],O[1]>=Fe/2&&++N;do d=0,s=t(O,v,k,p),s<0?(x=v[0],k!=p&&(x=x*Fe+(v[1]||0)),d=x/N|0,d>1?(d>=Fe&&(d=Fe-1),f=e(O,d),m=f.length,p=v.length,s=t(f,v,m,p),s==1&&(d--,r(f,k<m?A:O,m))):(d==0&&(s=d=1),f=O.slice()),m=f.length,m<p&&f.unshift(0),r(v,f,p),s==-1&&(p=v.length,s=t(O,v,k,p),s<1&&(d++,r(v,k<p?A:O,p))),p=v.length):s===0&&(d++,v=[0]),g[u++]=d,s&&v[0]?v[p++]=T[j]||0:(v=[T[j]],p=1);while((j++<S||v[0]!==void 0)&&b--)}return g[0]||g.shift(),h.e=c,me(h,o?i+Ie(h)+1:i)}}();function U0(e,t){var r,n,a,i,o,s,c=0,u=0,d=e.constructor,f=d.precision;if(Ie(e)>16)throw Error(Ou+Ie(e));if(!e.s)return new d(jt);for(we=!1,s=f,o=new d(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(n=Math.log(en(2,u))/Math.LN10*2+5|0,s+=n,r=a=i=new d(jt),d.precision=s;;){if(a=me(a.times(e),s),r=r.times(++c),o=i.plus(vr(a,r,s)),tr(o.d).slice(0,s)===tr(i.d).slice(0,s)){for(;u--;)i=me(i.times(i),s);return d.precision=f,t==null?(we=!0,me(i,f)):i}i=o}}function Ie(e){for(var t=e.e*ve,r=e.d[0];r>=10;r/=10)t++;return t}function Qs(e,t,r){if(t>e.LN10.sd())throw we=!0,r&&(e.precision=r),Error($t+"LN10 precision limit exceeded");return me(new e(e.LN10),t)}function $r(e){for(var t="";e--;)t+="0";return t}function Ba(e,t){var r,n,a,i,o,s,c,u,d,f=1,m=10,h=e,g=h.d,v=h.constructor,p=v.precision;if(h.s<1)throw Error($t+(h.s?"NaN":"-Infinity"));if(h.eq(jt))return new v(0);if(t==null?(we=!1,u=p):u=t,h.eq(10))return t==null&&(we=!0),Qs(v,u);if(u+=m,v.precision=u,r=tr(g),n=r.charAt(0),i=Ie(h),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)h=h.times(e),r=tr(h.d),n=r.charAt(0),f++;i=Ie(h),n>1?(h=new v("0."+r),i++):h=new v(n+"."+r.slice(1))}else return c=Qs(v,u+2,p).times(i+""),h=Ba(new v(n+"."+r.slice(1)),u-m).plus(c),v.precision=p,t==null?(we=!0,me(h,p)):h;for(s=o=h=vr(h.minus(jt),h.plus(jt),u),d=me(h.times(h),u),a=3;;){if(o=me(o.times(d),u),c=s.plus(vr(o,new v(a),u)),tr(c.d).slice(0,u)===tr(s.d).slice(0,u))return s=s.times(2),i!==0&&(s=s.plus(Qs(v,u+2,p).times(i+""))),s=vr(s,new v(f),u),v.precision=p,t==null?(we=!0,me(s,p)):s;s=c,a+=2}}function Fm(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=ra(r/ve),e.d=[],n=(r+1)%ve,r<0&&(n+=ve),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=ve;n<a;)e.d.push(+t.slice(n,n+=ve));t=t.slice(n),n=ve-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),we&&(e.e>po||e.e<-po))throw Error(Ou+r)}else e.s=0,e.e=0,e.d=[0];return e}function me(e,t,r){var n,a,i,o,s,c,u,d,f=e.d;for(o=1,i=f[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=ve,a=t,u=f[d=0];else{if(d=Math.ceil((n+1)/ve),i=f.length,d>=i)return e;for(u=i=f[d],o=1;i>=10;i/=10)o++;n%=ve,a=n-ve+o}if(r!==void 0&&(i=en(10,o-a-1),s=u/i%10|0,c=t<0||f[d+1]!==void 0||u%i,c=r<4?(s||c)&&(r==0||r==(e.s<0?3:2)):s>5||s==5&&(r==4||c||r==6&&(n>0?a>0?u/en(10,o-a):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(i=Ie(e),f.length=1,t=t-i-1,f[0]=en(10,(ve-t%ve)%ve),e.e=ra(-t/ve)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,i=1,d--):(f.length=d+1,i=en(10,ve-n),f[d]=a>0?(u/en(10,o-a)%en(10,a)|0)*i:0),c)for(;;)if(d==0){(f[0]+=i)==Fe&&(f[0]=1,++e.e);break}else{if(f[d]+=i,f[d]!=Fe)break;f[d--]=0,i=1}for(n=f.length;f[--n]===0;)f.pop();if(we&&(e.e>po||e.e<-po))throw Error(Ou+Ie(e));return e}function W0(e,t){var r,n,a,i,o,s,c,u,d,f,m=e.constructor,h=m.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new m(e),we?me(t,h):t;if(c=e.d,f=t.d,n=t.e,u=e.e,c=c.slice(),o=u-n,o){for(d=o<0,d?(r=c,o=-o,s=f.length):(r=f,n=u,s=c.length),a=Math.max(Math.ceil(h/ve),s)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=c.length,s=f.length,d=a<s,d&&(s=a),a=0;a<s;a++)if(c[a]!=f[a]){d=c[a]<f[a];break}o=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),s=c.length,a=f.length-s;a>0;--a)c[s++]=0;for(a=f.length;a>o;){if(c[--a]<f[a]){for(i=a;i&&c[--i]===0;)c[i]=Fe-1;--c[i],c[a]+=Fe}c[a]-=f[a]}for(;c[--s]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,we?me(t,h):t):new m(0)}function jn(e,t,r){var n,a=Ie(e),i=tr(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+$r(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+$r(-a-1)+i,r&&(n=r-o)>0&&(i+=$r(n))):a>=o?(i+=$r(a+1-o),r&&(n=r-a-1)>0&&(i=i+"."+$r(n))):((n=a+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(i+="."),i+=$r(n))),e.s<0?"-"+i:i}function Bm(e,t){if(e.length>t)return e.length=t,!0}function H0(e){var t,r,n;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(fn+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return Fm(o,i.toString())}else if(typeof i!="string")throw Error(fn+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,PI.test(i))Fm(o,i);else throw Error(fn+i)}if(a.prototype=F,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=H0,a.config=a.set=EI,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function EI(e){if(!e||typeof e!="object")throw Error($t+"Object expected");var t,r,n,a=["precision",1,ta,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(ra(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(fn+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(fn+r+": "+n);return this}var Tu=H0(kI);jt=new Tu(1);const ce=Tu;var _I=e=>e,q0={},Z0=e=>e===q0,Um=e=>function t(){return arguments.length===0||arguments.length===1&&Z0(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},K0=(e,t)=>e===1?t:Um(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var i=n.filter(o=>o!==q0).length;return i>=e?t(...n):K0(e-i,Um(function(){for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];var u=n.map(d=>Z0(d)?s.shift():d);return t(...u,...s)}))}),gs=e=>K0(e.length,e),Kl=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},AI=gs((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),CI=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return _I;var a=r.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce((s,c)=>c(s),i(...arguments))}},Gl=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),G0=e=>{var t=null,r=null;return function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return t&&a.every((o,s)=>{var c;return o===((c=t)===null||c===void 0?void 0:c[s])})||(t=a,r=e(...a)),r}};function V0(e){var t;return e===0?t=1:t=Math.floor(new ce(e).abs().log(10).toNumber())+1,t}function Y0(e,t,r){for(var n=new ce(e),a=0,i=[];n.lt(t)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}gs((e,t,r)=>{var n=+e,a=+t;return n+r*(a-n)});gs((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});gs((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var X0=e=>{var[t,r]=e,[n,a]=[t,r];return t>r&&([n,a]=[r,t]),[n,a]},Q0=(e,t,r)=>{if(e.lte(0))return new ce(0);var n=V0(e.toNumber()),a=new ce(10).pow(n),i=e.div(a),o=n!==1?.05:.1,s=new ce(Math.ceil(i.div(o).toNumber())).add(r).mul(o),c=s.mul(a);return t?new ce(c.toNumber()):new ce(Math.ceil(c.toNumber()))},OI=(e,t,r)=>{var n=new ce(1),a=new ce(e);if(!a.isint()&&r){var i=Math.abs(e);i<1?(n=new ce(10).pow(V0(e)-1),a=new ce(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new ce(Math.floor(e)))}else e===0?a=new ce(Math.floor((t-1)/2)):r||(a=new ce(Math.floor(e)));var o=Math.floor((t-1)/2),s=CI(AI(c=>a.add(new ce(c-o).mul(n)).toNumber()),Kl);return s(0,t)},J0=function(t,r,n,a){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new ce(0),tickMin:new ce(0),tickMax:new ce(0)};var o=Q0(new ce(r).sub(t).div(n-1),a,i),s;t<=0&&r>=0?s=new ce(0):(s=new ce(t).add(r).div(2),s=s.sub(new ce(s).mod(o)));var c=Math.ceil(s.sub(t).div(o).toNumber()),u=Math.ceil(new ce(r).sub(s).div(o).toNumber()),d=c+u+1;return d>n?J0(t,r,n,a,i+1):(d<n&&(u=r>0?u+(n-d):u,c=r>0?c:c+(n-d)),{step:o,tickMin:s.sub(new ce(c).mul(o)),tickMax:s.add(new ce(u).mul(o))})};function TI(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(n,2),[o,s]=X0([t,r]);if(o===-1/0||s===1/0){var c=s===1/0?[o,...Kl(0,n-1).map(()=>1/0)]:[...Kl(0,n-1).map(()=>-1/0),s];return t>r?Gl(c):c}if(o===s)return OI(o,n,a);var{step:u,tickMin:d,tickMax:f}=J0(o,s,i,a,0),m=Y0(d,f.add(new ce(.1).mul(u)),u);return t>r?Gl(m):m}function II(e,t){var[r,n]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,o]=X0([r,n]);if(i===-1/0||o===1/0)return[r,n];if(i===o)return[i];var s=Math.max(t,2),c=Q0(new ce(o).sub(i).div(s-1),a,0),u=[...Y0(new ce(i),new ce(o),c),o];return a===!1&&(u=u.map(d=>Math.round(d))),r>n?Gl(u):u}var MI=G0(TI),DI=G0(II),$I=e=>e.rootProps.barCategoryGap,vs=e=>e.rootProps.stackOffset,Iu=e=>e.options.chartName,Mu=e=>e.rootProps.syncId,ey=e=>e.rootProps.syncMethod,Du=e=>e.options.eventEmitter,ur={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},bt={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},ys=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},zI={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:ur.angleAxisId,includeHidden:!1,name:void 0,reversed:ur.reversed,scale:ur.scale,tick:ur.tick,tickCount:void 0,ticks:void 0,type:ur.type,unit:void 0},RI={allowDataOverflow:bt.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:bt.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:bt.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:bt.scale,tick:bt.tick,tickCount:bt.tickCount,ticks:void 0,type:bt.type,unit:void 0},LI={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:ur.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ur.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ur.scale,tick:ur.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},FI={allowDataOverflow:bt.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:bt.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:bt.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:bt.scale,tick:bt.tick,tickCount:bt.tickCount,ticks:void 0,type:"category",unit:void 0},$u=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?LI:zI,zu=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?FI:RI,xs=e=>e.polarOptions,Ru=E([Nr,kr,Ye],JA),ty=E([xs,Ru],(e,t)=>{if(e!=null)return Ur(e.innerRadius,t,0)}),ry=E([xs,Ru],(e,t)=>{if(e!=null)return Ur(e.outerRadius,t,t*.8)}),BI=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},ny=E([xs],BI);E([$u,ny],ys);var ay=E([Ru,ty,ry],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});E([zu,ay],ys);var UI=E([ke,xs,ty,ry,Nr,kr],(e,t,r,n,a,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:o,cy:s,startAngle:c,endAngle:u}=t;return{cx:Ur(o,a,a/2),cy:Ur(s,i,i/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:u,clockWise:!1}}}),Ue=(e,t)=>t,bs=(e,t,r)=>r;function Wm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function go(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Wm(Object(r),!0).forEach(function(n){WI(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WI(e,t,r){return(t=HI(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HI(e){var t=qI(e,"string");return typeof t=="symbol"?t:t+""}function qI(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Vl=[0,"auto"],yt={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},Er=(e,t)=>{var r=e.cartesianAxis.xAxis[t];return r==null?yt:r},xt={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:Vl,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:ss},Gr=(e,t)=>{var r=e.cartesianAxis.yAxis[t];return r==null?xt:r},ZI={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},Lu=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r==null?ZI:r},ht=(e,t,r)=>{switch(t){case"xAxis":return Er(e,r);case"yAxis":return Gr(e,r);case"zAxis":return Lu(e,r);case"angleAxis":return $u(e,r);case"radiusAxis":return zu(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},KI=(e,t,r)=>{switch(t){case"xAxis":return Er(e,r);case"yAxis":return Gr(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},ti=(e,t,r)=>{switch(t){case"xAxis":return Er(e,r);case"yAxis":return Gr(e,r);case"angleAxis":return $u(e,r);case"radiusAxis":return zu(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},iy=e=>e.graphicalItems.countOfBars>0;function oy(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var sy=e=>e.graphicalItems.cartesianItems,GI=E([Ue,bs],oy),ly=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),ri=E([sy,ht,GI],ly),cy=e=>e.filter(t=>t.stackId===void 0),VI=E([ri],cy),uy=e=>e.map(t=>t.data).filter(Boolean).flat(1),YI=E([ri],uy),dy=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=t;return e.length>0?e:r.slice(n,a+1)},ws=E([YI,L0],dy),fy=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Nt(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(a=>({value:Nt(a,n)}))):e.map(n=>({value:n})),js=E([ws,ht,ri],fy);function my(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function _n(e){return e.filter(t=>ar(t)||t instanceof Date).map(Number).filter(t=>Mt(t)===!1)}function XI(e,t,r){return!r||typeof t!="number"||Mt(t)?[]:r.length?_n(r.flatMap(n=>{var a=Nt(e,n.dataKey),i,o;if(Array.isArray(a)?[i,o]=a:i=o=a,!(!Gt(i)||!Gt(o)))return[t-i,t+o]})):[]}var hy=(e,t,r)=>{var n={},a=t.reduce((i,o)=>(o.stackId==null||(i[o.stackId]==null&&(i[o.stackId]=[]),i[o.stackId].push(o)),i),n);return Object.fromEntries(Object.entries(a).map(i=>{var[o,s]=i,c=s.map(u=>u.dataKey);return[o,{stackedData:hC(e,c,r),graphicalItems:s}]}))},QI=E([ws,ri,vs],hy),py=(e,t,r)=>{var{dataStartIndex:n,dataEndIndex:a}=t;if(r!=="zAxis"){var i=yC(e,n,a);if(!(i!=null&&i[0]===0&&i[1]===0))return i}},JI=E([QI,En,Ue],py),gy=(e,t,r,n)=>r.length>0?e.flatMap(a=>r.flatMap(i=>{var o,s,c=(o=i.errorBars)===null||o===void 0?void 0:o.filter(d=>my(n,d)),u=Nt(a,(s=t.dataKey)!==null&&s!==void 0?s:i.dataKey);return{value:u,errorDomain:XI(a,u,c)}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(a=>({value:Nt(a,t.dataKey),errorDomain:[]})):e.map(a=>({value:a,errorDomain:[]})),eM=E(ws,ht,VI,Ue,gy);function tM(e){var{value:t}=e;if(ar(t)||t instanceof Date)return t}var rM=e=>{var t=e.flatMap(n=>[n.value,n.errorDomain]).flat(1),r=_n(t);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},nM=(e,t,r)=>{var n=e.map(tM).filter(a=>a!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&Pg(n))?a0(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},Fu=e=>{var t;if(e==null||!("domain"in e))return Vl;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=_n(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:Vl},Bu=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r.filter(Boolean);if(a.length!==0){var i=a.flat(),o=Math.min(...i),s=Math.max(...i);return[o,s]}},vy=e=>e.referenceElements.dots,na=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),aM=E([vy,Ue,bs],na),yy=e=>e.referenceElements.areas,iM=E([yy,Ue,bs],na),xy=e=>e.referenceElements.lines,oM=E([xy,Ue,bs],na),by=(e,t)=>{var r=_n(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},sM=E(aM,Ue,by),wy=(e,t)=>{var r=_n(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},lM=E([iM,Ue],wy),jy=(e,t)=>{var r=_n(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},cM=E(oM,Ue,jy),uM=E(sM,cM,lM,(e,t,r)=>Bu(e,r,t)),dM=E([ht],Fu),Sy=(e,t,r,n,a)=>{var i=SI(t,e.allowDataOverflow);return i!=null?i:NI(t,Bu(r,a,rM(n)),e.allowDataOverflow)},fM=E([ht,dM,JI,eM,uM],Sy),mM=[0,1],Ny=(e,t,r,n,a,i,o)=>{if(!(e==null||r==null||r.length===0)){var{dataKey:s,type:c}=e,u=qr(t,i);return u&&s==null?a0(0,r.length):c==="category"?nM(n,e,u):a==="expand"?mM:o}},Uu=E([ht,ke,ws,js,vs,Ue,fM],Ny),ky=(e,t,r,n,a)=>{if(e!=null){var{scale:i,type:o}=e;if(i==="auto")return t==="radial"&&a==="radiusAxis"?"band":t==="radial"&&a==="angleAxis"?"linear":o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":o==="category"?"band":"linear";if(typeof i=="string"){var s="scale".concat(Fc(i));return s in ka?s:"point"}}},ni=E([ht,ke,iy,Iu,Ue],ky);function hM(e){if(e!=null){if(e in ka)return ka[e]();var t="scale".concat(Fc(e));if(t in ka)return ka[t]()}}function Wu(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var a=hM(t);if(a!=null){var i=a.domain(r).range(n);return uC(i),i}}}var Py=(e,t,r)=>{var n=Fu(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Yn(e))return MI(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Yn(e))return DI(e,t.tickCount,t.allowDecimals)}},Hu=E([Uu,ti,ni],Py),Ey=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&Yn(t)&&Array.isArray(r)&&r.length>0){var a=t[0],i=r[0],o=t[1],s=r[r.length-1];return[Math.min(a,i),Math.max(o,s)]}return t},pM=E([ht,Uu,Hu,Ue],Ey),gM=E(js,ht,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(_n(e.map(s=>s.value))).sort((s,c)=>s-c);if(n.length<2)return 1/0;var a=n[n.length-1]-n[0];if(a===0)return 1/0;for(var i=0;i<n.length-1;i++){var o=n[i+1]-n[i];r=Math.min(r,o)}return r/a}}),_y=E(gM,ke,$I,Ye,(e,t,r,n)=>n,(e,t,r,n,a)=>{if(!Gt(e))return 0;var i=t==="vertical"?n.height:n.width;if(a==="gap")return e*i/2;if(a==="no-gap"){var o=Ur(r,e*i),s=e*i/2;return s-o-(s-o)/i*o}return 0}),vM=(e,t)=>{var r=Er(e,t);return r==null||typeof r.padding!="string"?0:_y(e,"xAxis",t,r.padding)},yM=(e,t)=>{var r=Gr(e,t);return r==null||typeof r.padding!="string"?0:_y(e,"yAxis",t,r.padding)},xM=E(Er,vM,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:a}=e;return typeof a=="string"?{left:t,right:t}:{left:((r=a.left)!==null&&r!==void 0?r:0)+t,right:((n=a.right)!==null&&n!==void 0?n:0)+t}}),bM=E(Gr,yM,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:a}=e;return typeof a=="string"?{top:t,bottom:t}:{top:((r=a.top)!==null&&r!==void 0?r:0)+t,bottom:((n=a.bottom)!==null&&n!==void 0?n:0)+t}}),wM=E([Ye,xM,cs,ls,(e,t,r)=>r],(e,t,r,n,a)=>{var{padding:i}=n;return a?[i.left,r.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),jM=E([Ye,ke,bM,cs,ls,(e,t,r)=>r],(e,t,r,n,a,i)=>{var{padding:o}=a;return i?[n.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),ai=(e,t,r,n)=>{var a;switch(t){case"xAxis":return wM(e,r,n);case"yAxis":return jM(e,r,n);case"zAxis":return(a=Lu(e,r))===null||a===void 0?void 0:a.range;case"angleAxis":return ny(e);case"radiusAxis":return ay(e,r);default:return}},Ay=E([ht,ai],ys),aa=E([ht,ni,pM,Ay],Wu);E(ri,Ue,(e,t)=>e.flatMap(r=>{var n;return(n=r.errorBars)!==null&&n!==void 0?n:[]}).filter(r=>my(t,r)));function Cy(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Ss=(e,t)=>t,Ns=(e,t,r)=>r,SM=E(nu,Ss,Ns,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(Cy)),NM=E(au,Ss,Ns,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(Cy)),Oy=(e,t)=>({width:e.width,height:t.height}),kM=(e,t)=>{var r=typeof t.width=="number"?t.width:ss;return{width:r,height:e.height}},PM=E(Ye,Er,Oy),EM=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},_M=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},AM=E(kr,Ye,SM,Ss,Ns,(e,t,r,n,a)=>{var i={},o;return r.forEach(s=>{var c=Oy(t,s);o==null&&(o=EM(t,n,e));var u=n==="top"&&!a||n==="bottom"&&a;i[s.id]=o-Number(u)*c.height,o+=(u?-1:1)*c.height}),i}),CM=E(Nr,Ye,NM,Ss,Ns,(e,t,r,n,a)=>{var i={},o;return r.forEach(s=>{var c=kM(t,s);o==null&&(o=_M(t,n,e));var u=n==="left"&&!a||n==="right"&&a;i[s.id]=o-Number(u)*c.width,o+=(u?-1:1)*c.width}),i}),OM=(e,t)=>{var r=Ye(e),n=Er(e,t);if(n!=null){var a=AM(e,n.orientation,n.mirror),i=a[t];return i==null?{x:r.left,y:0}:{x:r.left,y:i}}},TM=(e,t)=>{var r=Ye(e),n=Gr(e,t);if(n!=null){var a=CM(e,n.orientation,n.mirror),i=a[t];return i==null?{x:0,y:r.top}:{x:i,y:r.top}}},IM=E(Ye,Gr,(e,t)=>{var r=typeof t.width=="number"?t.width:ss;return{width:r,height:e.height}}),Ty=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:a,type:i,dataKey:o}=r,s=qr(e,n),c=t.map(u=>u.value);if(o&&s&&i==="category"&&a&&Pg(c))return c}},qu=E([ke,js,ht,Ue],Ty),Iy=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:a,scale:i}=r,o=qr(e,n);if(o&&(a==="number"||i!=="auto"))return t.map(s=>s.value)}},Zu=E([ke,js,ti,Ue],Iy),Hm=E([ke,KI,ni,aa,qu,Zu,ai,Hu,Ue],(e,t,r,n,a,i,o,s,c)=>{if(t==null)return null;var u=qr(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:i,duplicateDomain:a,isCategorical:u,niceTicks:s,range:o,realScaleType:r,scale:n}}),MM=(e,t,r,n,a,i,o,s,c)=>{if(!(t==null||n==null)){var u=qr(e,c),{type:d,ticks:f,tickCount:m}=t,h=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,g=d==="category"&&n.bandwidth?n.bandwidth()/h:0;g=c==="angleAxis"&&i!=null&&i.length>=2?Ot(i[0]-i[1])*2*g:g;var v=f||a;if(v){var p=v.map((x,b)=>{var w=o?o.indexOf(x):x;return{index:b,coordinate:n(w)+g,value:x,offset:g}});return p.filter(x=>!Mt(x.coordinate))}return u&&s?s.map((x,b)=>({coordinate:n(x)+g,value:x,index:b,offset:g})):n.ticks?n.ticks(m).map(x=>({coordinate:n(x)+g,value:x,offset:g})):n.domain().map((x,b)=>({coordinate:n(x)+g,value:o?o[x]:x,index:b,offset:g}))}},My=E([ke,ti,ni,aa,Hu,ai,qu,Zu,Ue],MM),DM=(e,t,r,n,a,i,o)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var s=qr(e,o),{tickCount:c}=t,u=0;return u=o==="angleAxis"&&(n==null?void 0:n.length)>=2?Ot(n[0]-n[1])*2*u:u,s&&i?i.map((d,f)=>({coordinate:r(d)+u,value:d,index:f,offset:u})):r.ticks?r.ticks(c).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,f)=>({coordinate:r(d)+u,value:a?a[d]:d,index:f,offset:u}))}},Dy=E([ke,ti,aa,ai,qu,Zu,Ue],DM),ks=E(ht,aa,(e,t)=>{if(!(e==null||t==null))return go(go({},e),{},{scale:t})}),$M=E([ht,ni,Uu,Ay],Wu);E((e,t,r)=>Lu(e,r),$M,(e,t)=>{if(!(e==null||t==null))return go(go({},e),{},{scale:t})});var zM=E([ke,nu,au],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),$y=e=>e.options.defaultTooltipEventType,zy=e=>e.options.validateTooltipEventTypes;function Ry(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function Ku(e,t){var r=$y(e),n=zy(e);return Ry(t,r,n)}function RM(e){return K(t=>Ku(t,e))}var Ly=(e,t)=>{var r,n=Number(t);if(!(Mt(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},LM=e=>e.tooltip.settings,zr={active:!1,index:null,dataKey:void 0,coordinate:void 0},FM={itemInteraction:{click:zr,hover:zr},axisInteraction:{click:zr,hover:zr},keyboardInteraction:zr,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Fy=Rt({name:"tooltip",initialState:FM,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=pr(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:BM,removeTooltipEntrySettings:UM,setTooltipSettingsState:WM,setActiveMouseOverItemIndex:HM,mouseLeaveItem:OL,mouseLeaveChart:By,setActiveClickItemIndex:TL,setMouseOverAxisIndex:Uy,setMouseClickAxisIndex:qM,setSyncInteraction:Yl,setKeyboardInteraction:Xl}=Fy.actions,ZM=Fy.reducer;function qm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ai(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qm(Object(r),!0).forEach(function(n){KM(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function KM(e,t,r){return(t=GM(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GM(e){var t=VM(e,"string");return typeof t=="symbol"?t:t+""}function VM(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function YM(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function XM(e){return e.index!=null}var Wy=(e,t,r,n)=>{if(t==null)return zr;var a=YM(e,t,r);if(a==null)return zr;if(a.active)return a;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(XM(a)){if(i)return Ai(Ai({},a),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return Ai(Ai({},zr),{},{coordinate:a.coordinate})},Gu=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var n=Number(r);if(!Gt(n))return r;var a=0,i=1/0;return t.length>0&&(i=t.length-1),String(Math.max(a,Math.min(n,i)))},Hy=(e,t,r,n,a,i,o,s)=>{if(!(i==null||s==null)){var c=o[0],u=c==null?void 0:s(c.positions,i);if(u!=null)return u;var d=a==null?void 0:a[Number(i)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:d.coordinate}}}},qy=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var a;return r==="hover"?a=e.itemInteraction.hover.dataKey:a=e.itemInteraction.click.dataKey,a==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(i=>{var o;return((o=i.settings)===null||o===void 0?void 0:o.dataKey)===a})},ii=e=>e.options.tooltipPayloadSearcher,ia=e=>e.tooltip;function Zm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Km(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Zm(Object(r),!0).forEach(function(n){QM(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function QM(e,t,r){return(t=JM(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JM(e){var t=eD(e,"string");return typeof t=="symbol"?t:t+""}function eD(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tD(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function rD(e,t){return e!=null?e:t}var Zy=(e,t,r,n,a,i,o)=>{if(!(t==null||i==null)){var{chartData:s,computedData:c,dataStartIndex:u,dataEndIndex:d}=r,f=[];return e.reduce((m,h)=>{var g,{dataDefinedOnItem:v,settings:p}=h,x=rD(v,s),b=tD(x,u,d),w=(g=p==null?void 0:p.dataKey)!==null&&g!==void 0?g:n==null?void 0:n.dataKey,j=p==null?void 0:p.nameKey,S;if(n!=null&&n.dataKey&&Array.isArray(b)&&!Array.isArray(b[0])&&o==="axis"?S=Eg(b,n.dataKey,a):S=i(b,t,c,j),Array.isArray(S))S.forEach(k=>{var A=Km(Km({},p),{},{name:k.name,unit:k.unit,color:void 0,fill:void 0});m.push(Lf({tooltipEntrySettings:A,dataKey:k.dataKey,payload:k.payload,value:Nt(k.payload,k.dataKey),name:k.name}))});else{var N;m.push(Lf({tooltipEntrySettings:p,dataKey:w,payload:S,value:Nt(S,w),name:(N=Nt(S,j))!==null&&N!==void 0?N:p==null?void 0:p.name}))}return m},f)}},We=e=>{var t=ke(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},oa=e=>e.tooltip.settings.axisId,Xe=e=>{var t=We(e),r=oa(e);return ti(e,t,r)},Vu=E([Xe,ke,iy,Iu,We],ky),nD=E([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),aD=E([We,oa],oy),Ps=E([nD,Xe,aD],ly),iD=E([Ps],uy),An=E([iD,En],dy),Yu=E([An,Xe,Ps],fy),oD=E([Xe],Fu),sD=E([An,Ps,vs],hy),lD=E([sD,En,We],py),cD=E([Ps],cy),uD=E([An,Xe,cD,We],gy),dD=E([vy,We,oa],na),fD=E([dD,We],by),mD=E([yy,We,oa],na),hD=E([mD,We],wy),pD=E([xy,We,oa],na),gD=E([pD,We],jy),vD=E([fD,gD,hD],Bu),yD=E([Xe,oD,lD,uD,vD],Sy),Ky=E([Xe,ke,An,Yu,vs,We,yD],Ny),xD=E([Ky,Xe,Vu],Py),bD=E([Xe,Ky,xD,We],Ey),Gy=e=>{var t=We(e),r=oa(e),n=!1;return ai(e,t,r,n)},Vy=E([Xe,Gy],ys),Yy=E([Xe,Vu,bD,Vy],Wu),wD=E([ke,Yu,Xe,We],Ty),jD=E([ke,Yu,Xe,We],Iy),SD=(e,t,r,n,a,i,o,s)=>{if(t){var{type:c}=t,u=qr(e,s);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=c==="category"&&n.bandwidth?n.bandwidth()/d:0;return f=s==="angleAxis"&&a!=null&&(a==null?void 0:a.length)>=2?Ot(a[0]-a[1])*2*f:f,u&&o?o.map((m,h)=>({coordinate:n(m)+f,value:m,index:h,offset:f})):n.domain().map((m,h)=>({coordinate:n(m)+f,value:i?i[m]:m,index:h,offset:f}))}}},_r=E([ke,Xe,Vu,Yy,Gy,wD,jD,We],SD),Xu=E([$y,zy,LM],(e,t,r)=>Ry(r.shared,e,t)),Xy=e=>e.tooltip.settings.trigger,Qu=e=>e.tooltip.settings.defaultIndex,Es=E([ia,Xu,Xy,Qu],Wy),Ua=E([Es,An],Gu),Qy=E([_r,Ua],Ly),ND=E([Es],e=>{if(e)return e.dataKey}),Jy=E([ia,Xu,Xy,Qu],qy),kD=E([Nr,kr,ke,Ye,_r,Qu,Jy,ii],Hy),PD=E([Es,kD],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),ED=E([Es],e=>e.active),_D=E([Jy,Ua,En,Xe,Qy,ii,Xu],Zy),AD=E([_D],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function Gm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Vm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Gm(Object(r),!0).forEach(function(n){CD(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function CD(e,t,r){return(t=OD(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OD(e){var t=TD(e,"string");return typeof t=="symbol"?t:t+""}function TD(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ID=()=>K(Xe),MD=()=>{var e=ID(),t=K(_r),r=K(Yy);return Tl(Vm(Vm({},e),{},{scale:r}),t)},DD=()=>K(Iu),Ju=(e,t)=>t,ex=(e,t,r)=>r,ed=(e,t,r,n)=>n,$D=E(_r,e=>as(e,t=>t.coordinate)),td=E([ia,Ju,ex,ed],Wy),tx=E([td,An],Gu),zD=(e,t,r)=>{if(t!=null){var n=ia(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},rx=E([ia,Ju,ex,ed],qy),vo=E([Nr,kr,ke,Ye,_r,ed,rx,ii],Hy),RD=E([td,vo],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),nx=E(_r,tx,Ly),LD=E([rx,tx,En,Xe,nx,ii,Ju],Zy),FD=E([td],e=>({isActive:e.active,activeIndex:e.index})),BD=(e,t,r,n,a,i,o,s)=>{if(!(!e||!t||!n||!a||!i)){var c=xC(e.chartX,e.chartY,t,r,s);if(c){var u=wC(c,t),d=lC(u,o,i,n,a),f=bC(t,i,d,c);return{activeIndex:String(d),activeCoordinate:f}}}};function Ql(){return Ql=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ql.apply(null,arguments)}function Ym(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ci(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ym(Object(r),!0).forEach(function(n){UD(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ym(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function UD(e,t,r){return(t=WD(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WD(e){var t=HD(e,"string");return typeof t=="symbol"?t:t+""}function HD(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qD(e){var{coordinate:t,payload:r,index:n,offset:a,tooltipAxisBandSize:i,layout:o,cursor:s,tooltipEventType:c,chartName:u}=e,d=t,f=r,m=n;if(!s||!d||u!=="ScatterChart"&&c!=="axis")return null;var h,g;if(u==="ScatterChart")h=d,g=l2;else if(u==="BarChart")h=c2(o,d,a,i),g=B2;else if(o==="radial"){var{cx:v,cy:p,radius:x,startAngle:b,endAngle:w}=Jv(d);h={cx:v,cy:p,startAngle:b,endAngle:w,innerRadius:x,outerRadius:x},g=q2}else h={points:Z2(o,d,a)},g=qv;var j=typeof s=="object"&&"className"in s?s.className:void 0,S=Ci(Ci(Ci(Ci({stroke:"#ccc",pointerEvents:"none"},a),h),ye(s,!1)),{},{payload:f,payloadIndex:m,className:fe("recharts-tooltip-cursor",j)});return y.isValidElement(s)?y.cloneElement(s,S):y.createElement(g,S)}function ZD(e){var t=MD(),r=Fv(),n=ou(),a=DD();return y.createElement(qD,Ql({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:n,tooltipAxisBandSize:t,chartName:a}))}var ax=y.createContext(null),KD=()=>y.useContext(ax),ix={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function i(c,u,d,f,m){if(typeof d!="function")throw new TypeError("The listener must be a function");var h=new a(d,f||c,m),g=r?r+u:u;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],h]:c._events[g].push(h):(c._events[g]=h,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function s(){this._events=new n,this._eventsCount=0}s.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},s.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var m=0,h=f.length,g=new Array(h);m<h;m++)g[m]=f[m].fn;return g},s.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},s.prototype.emit=function(u,d,f,m,h,g){var v=r?r+u:u;if(!this._events[v])return!1;var p=this._events[v],x=arguments.length,b,w;if(p.fn){switch(p.once&&this.removeListener(u,p.fn,void 0,!0),x){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,d),!0;case 3:return p.fn.call(p.context,d,f),!0;case 4:return p.fn.call(p.context,d,f,m),!0;case 5:return p.fn.call(p.context,d,f,m,h),!0;case 6:return p.fn.call(p.context,d,f,m,h,g),!0}for(w=1,b=new Array(x-1);w<x;w++)b[w-1]=arguments[w];p.fn.apply(p.context,b)}else{var j=p.length,S;for(w=0;w<j;w++)switch(p[w].once&&this.removeListener(u,p[w].fn,void 0,!0),x){case 1:p[w].fn.call(p[w].context);break;case 2:p[w].fn.call(p[w].context,d);break;case 3:p[w].fn.call(p[w].context,d,f);break;case 4:p[w].fn.call(p[w].context,d,f,m);break;default:if(!b)for(S=1,b=new Array(x-1);S<x;S++)b[S-1]=arguments[S];p[w].fn.apply(p[w].context,b)}}return!0},s.prototype.on=function(u,d,f){return i(this,u,d,f,!1)},s.prototype.once=function(u,d,f){return i(this,u,d,f,!0)},s.prototype.removeListener=function(u,d,f,m){var h=r?r+u:u;if(!this._events[h])return this;if(!d)return o(this,h),this;var g=this._events[h];if(g.fn)g.fn===d&&(!m||g.once)&&(!f||g.context===f)&&o(this,h);else{for(var v=0,p=[],x=g.length;v<x;v++)(g[v].fn!==d||m&&!g[v].once||f&&g[v].context!==f)&&p.push(g[v]);p.length?this._events[h]=p.length===1?p[0]:p:o(this,h)}return this},s.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,e.exports=s})(ix);var GD=ix.exports;const VD=Hr(GD);var Wa=new VD,Jl="recharts.syncEvent.tooltip",Xm="recharts.syncEvent.brush";function YD(e,t){if(t){var r=Number.parseInt(t,10);if(!Mt(r))return e==null?void 0:e[r]}}var XD={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},ox=Rt({name:"options",initialState:XD,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),QD=ox.reducer,{createEventEmitter:JD}=ox.actions;function e$(e){return e.tooltip.syncInteraction}var t$={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},sx=Rt({name:"chartData",initialState:t$,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:Qm,setDataStartEndIndexes:r$,setComputedData:IL}=sx.actions,n$=sx.reducer,lx=()=>{};function a$(){var e=K(Mu),t=K(Du),r=st(),n=K(ey),a=K(_r),i=ou(),o=iu(),s=K(c=>c.rootProps.className);y.useEffect(()=>{if(e==null)return lx;var c=(u,d,f)=>{if(t!==f&&e===u){if(n==="index"){r(d);return}if(a!=null){var m;if(typeof n=="function"){var h={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},g=n(a,h);m=a[g]}else n==="value"&&(m=a.find(N=>String(N.value)===d.payload.label));var{coordinate:v}=d.payload;if(m==null||d.payload.active===!1||v==null||o==null){r(Yl({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:p,y:x}=v,b=Math.min(p,o.x+o.width),w=Math.min(x,o.y+o.height),j={x:i==="horizontal"?m.coordinate:b,y:i==="horizontal"?w:m.coordinate},S=Yl({active:d.payload.active,coordinate:j,dataKey:d.payload.dataKey,index:String(m.index),label:d.payload.label});r(S)}}};return Wa.on(Jl,c),()=>{Wa.off(Jl,c)}},[s,r,t,e,n,a,i,o])}function i$(){var e=K(Mu),t=K(Du),r=st();y.useEffect(()=>{if(e==null)return lx;var n=(a,i,o)=>{t!==o&&e===a&&r(r$(i))};return Wa.on(Xm,n),()=>{Wa.off(Xm,n)}},[r,t,e])}function o$(){var e=st();y.useEffect(()=>{e(JD())},[e]),a$(),i$()}function s$(e,t,r,n,a,i){var o=K(m=>zD(m,e,t)),s=K(Du),c=K(Mu),u=K(ey),d=K(e$),f=d==null?void 0:d.active;y.useEffect(()=>{if(!f&&c!=null&&s!=null){var m=Yl({active:i,coordinate:r,dataKey:o,index:a,label:typeof n=="number"?String(n):n});Wa.emit(Jl,c,m,s)}},[f,r,o,a,n,s,c,u,i])}function Jm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function eh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Jm(Object(r),!0).forEach(function(n){l$(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function l$(e,t,r){return(t=c$(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c$(e){var t=u$(e,"string");return typeof t=="symbol"?t:t+""}function u$(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function d$(e){return e.dataKey}function f$(e,t){return y.isValidElement(e)?y.cloneElement(e,t):typeof e=="function"?y.createElement(e,t):y.createElement(FC,t)}var th=[],m$={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Ya.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function rh(e){var t=Nn(e,m$),{active:r,allowEscapeViewBox:n,animationDuration:a,animationEasing:i,content:o,filterNull:s,isAnimationActive:c,offset:u,payloadUniqBy:d,position:f,reverseDirection:m,useTranslate3d:h,wrapperStyle:g,cursor:v,shared:p,trigger:x,defaultIndex:b,portal:w,axisId:j}=t,S=st(),N=typeof b=="number"?String(b):b;y.useEffect(()=>{S(WM({shared:p,trigger:x,axisId:j,active:r,defaultIndex:N}))},[S,p,x,j,r,N]);var k=iu(),A=Hv(),C=RM(p),{activeIndex:D,isActive:T}=K(Oe=>FD(Oe,C,x,N)),O=K(Oe=>LD(Oe,C,x,N)),B=K(Oe=>nx(Oe,C,x,N)),Z=K(Oe=>RD(Oe,C,x,N)),z=O,U=KD(),q=r!=null?r:T,[Q,V]=oA([z,q]),Pe=C==="axis"?B:void 0;s$(C,x,Z,Pe,D,q);var G=w!=null?w:U;if(G==null)return null;var R=z!=null?z:th;q||(R=th),s&&R.length&&(R=N_(z.filter(Oe=>Oe.value!=null&&(Oe.hide!==!0||t.includeHidden)),d,d$));var J=R.length>0,Ce=y.createElement(KC,{allowEscapeViewBox:n,animationDuration:a,animationEasing:i,isAnimationActive:c,active:q,coordinate:Z,hasPayload:J,offset:u,position:f,reverseDirection:m,useTranslate3d:h,viewBox:k,wrapperStyle:g,lastBoundingBox:Q,innerRef:V,hasPortalFromProps:!!w},f$(o,eh(eh({},t),{},{payload:R,label:Pe,active:q,coordinate:Z,accessibilityLayer:A})));return y.createElement(y.Fragment,null,uc.createPortal(Ce,G),q&&y.createElement(ZD,{cursor:v,tooltipEventType:C,coordinate:Z,payload:z,index:D}))}var cx={},ux={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=0,a={}){typeof a!="object"&&(a={});let i=null,o=null,s=null,c=0,u=null,d;const{leading:f=!1,trailing:m=!0,maxWait:h}=a,g="maxWait"in a,v=g?Math.max(Number(h)||0,n):0,p=k=>(i!==null&&(d=r.apply(o,i)),i=o=null,c=k,d),x=k=>(c=k,u=setTimeout(S,n),f&&i!==null?p(k):d),b=k=>(u=null,m&&i!==null?p(k):d),w=k=>{if(s===null)return!0;const A=k-s,C=A>=n||A<0,D=g&&k-c>=v;return C||D},j=k=>{const A=s===null?0:k-s,C=n-A,D=v-(k-c);return g?Math.min(C,D):C},S=()=>{const k=Date.now();if(w(k))return b(k);u=setTimeout(S,j(k))},N=function(...k){const A=Date.now(),C=w(A);if(i=k,o=this,s=A,C){if(u===null)return x(A);if(g)return clearTimeout(u),u=setTimeout(S,n),p(A)}return u===null&&(u=setTimeout(S,n)),d};return N.cancel=()=>{u!==null&&clearTimeout(u),c=0,s=i=o=u=null},N.flush=()=>u===null?d:b(Date.now()),N}e.debounce=t})(ux);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ux;function r(n,a=0,i={}){const{leading:o=!0,trailing:s=!0}=i;return t.debounce(n,a,{leading:o,maxWait:a,trailing:s})}e.throttle=r})(cx);var h$=cx.throttle;const p$=Hr(h$);var Ea=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]};function nh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Js(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nh(Object(r),!0).forEach(function(n){g$(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nh(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function g$(e,t,r){return(t=v$(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v$(e){var t=y$(e,"string");return typeof t=="symbol"?t:t+""}function y$(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ah=y.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:a="100%",height:i="100%",minWidth:o=0,minHeight:s,maxHeight:c,children:u,debounce:d=0,id:f,className:m,onResize:h,style:g={}}=e,v=y.useRef(null),p=y.useRef();p.current=h,y.useImperativeHandle(t,()=>v.current);var[x,b]=y.useState({containerWidth:n.width,containerHeight:n.height}),w=y.useCallback((S,N)=>{b(k=>{var A=Math.round(S),C=Math.round(N);return k.containerWidth===A&&k.containerHeight===C?k:{containerWidth:A,containerHeight:C}})},[]);y.useEffect(()=>{var S=C=>{var D,{width:T,height:O}=C[0].contentRect;w(T,O),(D=p.current)===null||D===void 0||D.call(p,T,O)};d>0&&(S=p$(S,d,{trailing:!0,leading:!1}));var N=new ResizeObserver(S),{width:k,height:A}=v.current.getBoundingClientRect();return w(k,A),N.observe(v.current),()=>{N.disconnect()}},[w,d]);var j=y.useMemo(()=>{var{containerWidth:S,containerHeight:N}=x;if(S<0||N<0)return null;Ea(rn(a)||rn(i),"The width(%s) and height(%s) are both fixed numbers,\n       maybe you don't need to use a ResponsiveContainer.",a,i),Ea(!r||r>0,"The aspect(%s) must be greater than zero.",r);var k=rn(a)?S:a,A=rn(i)?N:i;return r&&r>0&&(k?A=k/r:A&&(k=A*r),c&&A>c&&(A=c)),Ea(k>0||A>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",k,A,a,i,o,s,r),y.Children.map(u,C=>y.cloneElement(C,{width:k,height:A,style:Js({width:k,height:A},C.props.style)}))},[r,u,i,c,s,o,x,a]);return y.createElement("div",{id:f?"".concat(f):void 0,className:fe("recharts-responsive-container",m),style:Js(Js({},g),{},{width:a,height:i,minWidth:o,minHeight:s,maxHeight:c}),ref:v},y.createElement("div",{style:{width:0,height:0,overflow:"visible"}},j))});function ih(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ec(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ih(Object(r),!0).forEach(function(n){x$(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ih(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function x$(e,t,r){return(t=b$(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b$(e){var t=w$(e,"string");return typeof t=="symbol"?t:t+""}function w$(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Mn={widthCache:{},cacheCount:0},j$=2e3,S$={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},oh="recharts_measurement_span";function N$(e){var t=ec({},e);return Object.keys(t).forEach(r=>{t[r]||delete t[r]}),t}var _a=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Ya.isSsr)return{width:0,height:0};var n=N$(r),a=JSON.stringify({text:t,copyStyle:n});if(Mn.widthCache[a])return Mn.widthCache[a];try{var i=document.getElementById(oh);i||(i=document.createElement("span"),i.setAttribute("id",oh),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=ec(ec({},S$),n);Object.assign(i.style,o),i.textContent="".concat(t);var s=i.getBoundingClientRect(),c={width:s.width,height:s.height};return Mn.widthCache[a]=c,++Mn.cacheCount>j$&&(Mn.cacheCount=0,Mn.widthCache={}),c}catch(u){return{width:0,height:0}}},sh=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,lh=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,k$=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,P$=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,dx={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},E$=Object.keys(dx),$n="NaN";function _$(e,t){return e*dx[t]}class ct{static parse(t){var r,[,n,a]=(r=P$.exec(t))!==null&&r!==void 0?r:[];return new ct(parseFloat(n),a!=null?a:"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Mt(t)&&(this.unit=""),r!==""&&!k$.test(r)&&(this.num=NaN,this.unit=""),E$.includes(r)&&(this.num=_$(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new ct(NaN,""):new ct(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new ct(NaN,""):new ct(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ct(NaN,""):new ct(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ct(NaN,""):new ct(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Mt(this.num)}}function fx(e){if(e.includes($n))return $n;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,a,i]=(r=sh.exec(t))!==null&&r!==void 0?r:[],o=ct.parse(n!=null?n:""),s=ct.parse(i!=null?i:""),c=a==="*"?o.multiply(s):o.divide(s);if(c.isNaN())return $n;t=t.replace(sh,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,d,f,m]=(u=lh.exec(t))!==null&&u!==void 0?u:[],h=ct.parse(d!=null?d:""),g=ct.parse(m!=null?m:""),v=f==="+"?h.add(g):h.subtract(g);if(v.isNaN())return $n;t=t.replace(lh,v.toString())}return t}var ch=/\(([^()]*)\)/;function A$(e){for(var t=e,r;(r=ch.exec(t))!=null;){var[,n]=r;t=t.replace(ch,fx(n))}return t}function C$(e){var t=e.replace(/\s+/g,"");return t=A$(t),t=fx(t),t}function O$(e){try{return C$(e)}catch(t){return $n}}function el(e){var t=O$(e.slice(5,-1));return t===$n?"":t}var T$=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],I$=["dx","dy","angle","className","breakAll"];function tc(){return tc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tc.apply(null,arguments)}function uh(e,t){if(e==null)return{};var r,n,a=M$(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function M$(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var mx=/[ \f\n\r\t\v\u2028\u2029]+/,hx=e=>{var{children:t,breakAll:r,style:n}=e;try{var a=[];_e(t)||(r?a=t.toString().split(""):a=t.toString().split(mx));var i=a.map(s=>({word:s,width:_a(s,n).width})),o=r?0:_a(" ",n).width;return{wordsWithComputedWidth:i,spaceWidth:o}}catch(s){return null}},D$=(e,t,r,n,a)=>{var{maxLines:i,children:o,style:s,breakAll:c}=e,u=W(i),d=o,f=function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return T.reduce((O,B)=>{var{word:Z,width:z}=B,U=O[O.length-1];if(U&&(n==null||a||U.width+z+r<Number(n)))U.words.push(Z),U.width+=z+r;else{var q={words:[Z],width:z};O.push(q)}return O},[])},m=f(t),h=D=>D.reduce((T,O)=>T.width>O.width?T:O);if(!u||a)return m;var g=m.length>i||h(m).width>Number(n);if(!g)return m;for(var v="…",p=D=>{var T=d.slice(0,D),O=hx({breakAll:c,style:s,children:T+v}).wordsWithComputedWidth,B=f(O),Z=B.length>i||h(B).width>Number(n);return[Z,B]},x=0,b=d.length-1,w=0,j;x<=b&&w<=d.length-1;){var S=Math.floor((x+b)/2),N=S-1,[k,A]=p(N),[C]=p(S);if(!k&&!C&&(x=S+1),k&&C&&(b=S-1),!k&&C){j=A;break}w++}return j||m},dh=e=>{var t=_e(e)?[]:e.toString().split(mx);return[{words:t}]},$$=e=>{var{width:t,scaleToFit:r,children:n,style:a,breakAll:i,maxLines:o}=e;if((t||r)&&!Ya.isSsr){var s,c,u=hx({breakAll:i,children:n,style:a});if(u){var{wordsWithComputedWidth:d,spaceWidth:f}=u;s=d,c=f}else return dh(n);return D$({breakAll:i,children:n,maxLines:o,style:a},s,c,t,r)}return dh(n)},fh="#808080",rd=y.forwardRef((e,t)=>{var{x:r=0,y:n=0,lineHeight:a="1em",capHeight:i="0.71em",scaleToFit:o=!1,textAnchor:s="start",verticalAnchor:c="end",fill:u=fh}=e,d=uh(e,T$),f=y.useMemo(()=>$$({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:o,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,o,d.style,d.width]),{dx:m,dy:h,angle:g,className:v,breakAll:p}=d,x=uh(d,I$);if(!ar(r)||!ar(n))return null;var b=r+(W(m)?m:0),w=n+(W(h)?h:0),j;switch(c){case"start":j=el("calc(".concat(i,")"));break;case"middle":j=el("calc(".concat((f.length-1)/2," * -").concat(a," + (").concat(i," / 2))"));break;default:j=el("calc(".concat(f.length-1," * -").concat(a,")"));break}var S=[];if(o){var N=f[0].width,{width:k}=d;S.push("scale(".concat(W(k)?k/N:1,")"))}return g&&S.push("rotate(".concat(g,", ").concat(b,", ").concat(w,")")),S.length&&(x.transform=S.join(" ")),y.createElement("text",tc({},ye(x,!0),{ref:t,x:b,y:w,className:fe("recharts-text",v),textAnchor:s,fill:u.includes("url")?fh:u}),f.map((A,C)=>{var D=A.words.join(p?"":" ");return y.createElement("tspan",{x:b,dy:C===0?j:a,key:"".concat(D,"-").concat(C)},D)}))});rd.displayName="Text";var z$=["offset"],R$=["labelRef"];function mh(e,t){if(e==null)return{};var r,n,a=L$(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function L$(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function hh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Te(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hh(Object(r),!0).forEach(function(n){F$(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hh(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function F$(e,t,r){return(t=B$(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B$(e){var t=U$(e,"string");return typeof t=="symbol"?t:t+""}function U$(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dr(){return dr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dr.apply(null,arguments)}var W$=e=>{var{value:t,formatter:r}=e,n=_e(e.children)?t:e.children;return typeof r=="function"?r(n):n},nd=e=>e!=null&&typeof e=="function",H$=(e,t)=>{var r=Ot(t-e),n=Math.min(Math.abs(t-e),360);return r*n},q$=(e,t,r)=>{var{position:n,viewBox:a,offset:i,className:o}=e,{cx:s,cy:c,innerRadius:u,outerRadius:d,startAngle:f,endAngle:m,clockWise:h}=a,g=(u+d)/2,v=H$(f,m),p=v>=0?1:-1,x,b;n==="insideStart"?(x=f+p*i,b=h):n==="insideEnd"?(x=m-p*i,b=!h):n==="end"&&(x=m+p*i,b=h),b=v<=0?b:!b;var w=Ge(s,c,g,x),j=Ge(s,c,g,x+(b?1:-1)*359),S="M".concat(w.x,",").concat(w.y,"\n    A").concat(g,",").concat(g,",0,1,").concat(b?0:1,",\n    ").concat(j.x,",").concat(j.y),N=_e(e.id)?Da("recharts-radial-line-"):e.id;return y.createElement("text",dr({},r,{dominantBaseline:"central",className:fe("recharts-radial-bar-label",o)}),y.createElement("defs",null,y.createElement("path",{id:N,d:S})),y.createElement("textPath",{xlinkHref:"#".concat(N)},t))},Z$=e=>{var{viewBox:t,offset:r,position:n}=e,{cx:a,cy:i,innerRadius:o,outerRadius:s,startAngle:c,endAngle:u}=t,d=(c+u)/2;if(n==="outside"){var{x:f,y:m}=Ge(a,i,s+r,d);return{x:f,y:m,textAnchor:f>=a?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:a,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:a,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:a,y:i,textAnchor:"middle",verticalAnchor:"end"};var h=(o+s)/2,{x:g,y:v}=Ge(a,i,h,d);return{x:g,y:v,textAnchor:"middle",verticalAnchor:"middle"}},K$=(e,t)=>{var{parentViewBox:r,offset:n,position:a}=e,{x:i,y:o,width:s,height:c}=t,u=c>=0?1:-1,d=u*n,f=u>0?"end":"start",m=u>0?"start":"end",h=s>=0?1:-1,g=h*n,v=h>0?"end":"start",p=h>0?"start":"end";if(a==="top"){var x={x:i+s/2,y:o-u*n,textAnchor:"middle",verticalAnchor:f};return Te(Te({},x),r?{height:Math.max(o-r.y,0),width:s}:{})}if(a==="bottom"){var b={x:i+s/2,y:o+c+d,textAnchor:"middle",verticalAnchor:m};return Te(Te({},b),r?{height:Math.max(r.y+r.height-(o+c),0),width:s}:{})}if(a==="left"){var w={x:i-g,y:o+c/2,textAnchor:v,verticalAnchor:"middle"};return Te(Te({},w),r?{width:Math.max(w.x-r.x,0),height:c}:{})}if(a==="right"){var j={x:i+s+g,y:o+c/2,textAnchor:p,verticalAnchor:"middle"};return Te(Te({},j),r?{width:Math.max(r.x+r.width-j.x,0),height:c}:{})}var S=r?{width:s,height:c}:{};return a==="insideLeft"?Te({x:i+g,y:o+c/2,textAnchor:p,verticalAnchor:"middle"},S):a==="insideRight"?Te({x:i+s-g,y:o+c/2,textAnchor:v,verticalAnchor:"middle"},S):a==="insideTop"?Te({x:i+s/2,y:o+d,textAnchor:"middle",verticalAnchor:m},S):a==="insideBottom"?Te({x:i+s/2,y:o+c-d,textAnchor:"middle",verticalAnchor:f},S):a==="insideTopLeft"?Te({x:i+g,y:o+d,textAnchor:p,verticalAnchor:m},S):a==="insideTopRight"?Te({x:i+s-g,y:o+d,textAnchor:v,verticalAnchor:m},S):a==="insideBottomLeft"?Te({x:i+g,y:o+c-d,textAnchor:p,verticalAnchor:f},S):a==="insideBottomRight"?Te({x:i+s-g,y:o+c-d,textAnchor:v,verticalAnchor:f},S):a&&typeof a=="object"&&(W(a.x)||rn(a.x))&&(W(a.y)||rn(a.y))?Te({x:i+Ur(a.x,s),y:o+Ur(a.y,c),textAnchor:"end",verticalAnchor:"end"},S):Te({x:i+s/2,y:o+c/2,textAnchor:"middle",verticalAnchor:"middle"},S)},G$=e=>"cx"in e&&W(e.cx);function wt(e){var{offset:t=5}=e,r=mh(e,z$),n=Te({offset:t},r),{viewBox:a,position:i,value:o,children:s,content:c,className:u="",textBreakAll:d,labelRef:f}=n,m=iu(),h=a||m;if(!h||_e(o)&&_e(s)&&!y.isValidElement(c)&&typeof c!="function")return null;if(y.isValidElement(c)){var{labelRef:g}=n,v=mh(n,R$);return y.cloneElement(c,v)}var p;if(typeof c=="function"){if(p=y.createElement(c,n),y.isValidElement(p))return p}else p=W$(n);var x=G$(h),b=ye(n,!0);if(x&&(i==="insideStart"||i==="insideEnd"||i==="end"))return q$(n,p,b);var w=x?Z$(n):K$(n,h);return y.createElement(rd,dr({ref:f,className:fe("recharts-label",u)},b,w,{breakAll:d}),p)}wt.displayName="Label";var px=e=>{var{cx:t,cy:r,angle:n,startAngle:a,endAngle:i,r:o,radius:s,innerRadius:c,outerRadius:u,x:d,y:f,top:m,left:h,width:g,height:v,clockWise:p,labelViewBox:x}=e;if(x)return x;if(W(g)&&W(v)){if(W(d)&&W(f))return{x:d,y:f,width:g,height:v};if(W(m)&&W(h))return{x:m,y:h,width:g,height:v}}if(W(d)&&W(f))return{x:d,y:f,width:0,height:0};if(W(t)&&W(r))return{cx:t,cy:r,startAngle:a||n||0,endAngle:i||n||0,innerRadius:c||0,outerRadius:u||s||o||0,clockWise:p};if(e.viewBox)return e.viewBox},V$=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?y.createElement(wt,dr({key:"label-implicit"},n)):ar(e)?y.createElement(wt,dr({key:"label-implicit",value:e},n)):y.isValidElement(e)?e.type===wt?y.cloneElement(e,Te({key:"label-implicit"},n)):y.createElement(wt,dr({key:"label-implicit",content:e},n)):nd(e)?y.createElement(wt,dr({key:"label-implicit",content:e},n)):e&&typeof e=="object"?y.createElement(wt,dr({},e,{key:"label-implicit"},n)):null},Y$=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var{children:a,labelRef:i}=t,o=px(t),s=Ag(a,wt).map((u,d)=>y.cloneElement(u,{viewBox:r||o,key:"label-".concat(d)}));if(!n)return s;var c=V$(t.label,r||o,i);return[c,...s]};wt.parseViewBox=px;wt.renderCallByParent=Y$;var gx={},vx={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(vx);var yx={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(yx);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vx,r=yx,n=Jo;function a(i){if(n.isArrayLike(i))return t.last(r.toArray(i))}e.last=a})(gx);var X$=gx.last;const Q$=Hr(X$);var J$=["valueAccessor"],ez=["data","dataKey","clockWise","id","textBreakAll"];function yo(){return yo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yo.apply(null,arguments)}function ph(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function gh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ph(Object(r),!0).forEach(function(n){tz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ph(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tz(e,t,r){return(t=rz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rz(e){var t=nz(e,"string");return typeof t=="symbol"?t:t+""}function nz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vh(e,t){if(e==null)return{};var r,n,a=az(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function az(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var iz=e=>Array.isArray(e.value)?Q$(e.value):e.value;function mn(e){var{valueAccessor:t=iz}=e,r=vh(e,J$),{data:n,dataKey:a,clockWise:i,id:o,textBreakAll:s}=r,c=vh(r,ez);return!n||!n.length?null:y.createElement(Wr,{className:"recharts-label-list"},n.map((u,d)=>{var f=_e(a)?t(u,d):Nt(u&&u.payload,a),m=_e(o)?{}:{id:"".concat(o,"-").concat(d)};return y.createElement(wt,yo({},ye(u,!0),c,m,{parentViewBox:u.parentViewBox,value:f,textBreakAll:s,viewBox:wt.parseViewBox(_e(i)?u:gh(gh({},u),{},{clockWise:i})),key:"label-".concat(d),index:d}))}))}mn.displayName="LabelList";function oz(e,t){return e?e===!0?y.createElement(mn,{key:"labelList-implicit",data:t}):y.isValidElement(e)||nd(e)?y.createElement(mn,{key:"labelList-implicit",data:t,content:e}):typeof e=="object"?y.createElement(mn,yo({data:t},e,{key:"labelList-implicit"})):null:null}function sz(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var{children:n}=e,a=Ag(n,mn).map((o,s)=>y.cloneElement(o,{data:t,key:"labelList-".concat(s)}));if(!r)return a;var i=oz(e.label,t);return[i,...a]}mn.renderCallByParent=sz;function rc(){return rc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rc.apply(null,arguments)}var xx=e=>{var{cx:t,cy:r,r:n,className:a}=e,i=fe("recharts-dot",a);return t===+t&&r===+r&&n===+n?y.createElement("circle",rc({},ye(e,!1),Uc(e),{className:i,cx:t,cy:r,r:n})):null},lz={radiusAxis:{},angleAxis:{}},bx=Rt({name:"polarAxis",initialState:lz,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:ML,removeRadiusAxis:DL,addAngleAxis:$L,removeAngleAxis:zL}=bx.actions,cz=bx.reducer,uz={countOfBars:0,cartesianItems:[],polarItems:[]},wx=Rt({name:"graphicalItems",initialState:uz,reducers:{addBar(e){e.countOfBars+=1},removeBar(e){e.countOfBars-=1},addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:n}=t.payload,a=pr(e).cartesianItems.indexOf(r);a>-1&&(e.cartesianItems[a]=n)},removeCartesianGraphicalItem(e,t){var r=pr(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=pr(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addBar:RL,removeBar:LL,addCartesianGraphicalItem:dz,replaceCartesianGraphicalItem:fz,removeCartesianGraphicalItem:mz,addPolarGraphicalItem:FL,removePolarGraphicalItem:BL}=wx.actions,hz=wx.reducer;function yh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function xh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yh(Object(r),!0).forEach(function(n){pz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yh(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pz(e,t,r){return(t=gz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gz(e){var t=vz(e,"string");return typeof t=="symbol"?t:t+""}function vz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yz(e){var t=st(),r=y.useRef(null);return y.useEffect(()=>{var n=xh(xh({},e),{},{stackId:pC(e.stackId)});r.current===null?t(dz(n)):r.current!==n&&t(fz({prev:r.current,next:n})),r.current=n},[t,e]),y.useEffect(()=>()=>{r.current&&(t(mz(r.current)),r.current=null)},[t]),null}function xz(e){var{fn:t,args:r}=e,n=st(),a=mt();return y.useEffect(()=>{if(!a){var i=t(r);return n(BM(i)),()=>{n(UM(i))}}},[t,r,n,a]),null}var bz=()=>{};function wz(e){var{legendPayload:t}=e,r=st(),n=mt();return y.useEffect(()=>n?bz:(r(IC(t)),()=>{r(MC(t))}),[r,n,t]),null}function jz(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=y.useRef(Da(t)),n=y.useRef(e);return n.current!==e&&(r.current=Da(t),n.current=e),r.current}var Sz=E([Ye],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),Nz=E([Sz,Nr,kr],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),kz=e=>{var t=mt();return K(r=>ks(r,"xAxis",e,t))},Pz=e=>{var t=mt();return K(r=>ks(r,"yAxis",e,t))},ad=()=>K(Nz),Ez=()=>K(AD);function bh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function wh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bh(Object(r),!0).forEach(function(n){_z(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bh(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _z(e,t,r){return(t=Az(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Az(e){var t=Cz(e,"string");return typeof t=="symbol"?t:t+""}function Cz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Oz=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:a,dataKey:i}=e;if(a===!1||t.x==null||t.y==null)return null;var o=wh(wh({index:r,dataKey:i,cx:t.x,cy:t.y,r:4,fill:n!=null?n:"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},ye(a,!1)),Uc(a)),s;return y.isValidElement(a)?s=y.cloneElement(a,o):typeof a=="function"?s=a(o):s=y.createElement(xx,o),y.createElement(Wr,{className:"recharts-active-dot"},s)};function Tz(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:a}=e,i=K(Ua),o=Ez();if(t==null||o==null)return null;var s=t.find(c=>o.includes(c.payload));return _e(s)?null:Oz({point:s,childIndex:Number(i),mainColor:r,dataKey:a,activeDot:n})}var Iz=["children"];function Mz(e,t){if(e==null)return{};var r,n,a=Dz(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Dz(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var jh=()=>{},jx=y.createContext({addErrorBar:jh,removeErrorBar:jh}),$z={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Sx=y.createContext($z);function zz(e){var{children:t}=e,r=Mz(e,Iz);return y.createElement(Sx.Provider,{value:r},t)}var Rz=()=>y.useContext(Sx),Lz=e=>{var{children:t,xAxisId:r,yAxisId:n,zAxisId:a,dataKey:i,data:o,stackId:s,hide:c,type:u,barSize:d}=e,[f,m]=y.useState([]),h=y.useCallback(p=>{m(x=>[...x,p])},[m]),g=y.useCallback(p=>{m(x=>x.filter(b=>b!==p))},[m]),v=mt();return y.createElement(jx.Provider,{value:{addErrorBar:h,removeErrorBar:g}},y.createElement(yz,{type:u,data:o,xAxisId:r,yAxisId:n,zAxisId:a,dataKey:i,errorBars:f,stackId:s,hide:c,barSize:d,isPanorama:v}),t)};function Fz(e){var{addErrorBar:t,removeErrorBar:r}=y.useContext(jx);return y.useEffect(()=>(t(e),()=>{r(e)}),[t,r,e]),null}var Bz=["direction","width","dataKey","isAnimationActive","animationBegin","animationDuration","animationEasing"];function Nx(e,t,r){return(t=Uz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Uz(e){var t=Wz(e,"string");return typeof t=="symbol"?t:t+""}function Wz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ha(){return Ha=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ha.apply(null,arguments)}function Hz(e,t){if(e==null)return{};var r,n,a=qz(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function qz(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Zz(e){var{direction:t,width:r,dataKey:n,isAnimationActive:a,animationBegin:i,animationDuration:o,animationEasing:s}=e,c=Hz(e,Bz),u=ye(c,!1),{data:d,dataPointFormatter:f,xAxisId:m,yAxisId:h,errorBarOffset:g}=Rz(),v=kz(m),p=Pz(h);if((v==null?void 0:v.scale)==null||(p==null?void 0:p.scale)==null||d==null||t==="x"&&v.type!=="number")return null;var x=d.map(b=>{var{x:w,y:j,value:S,errorVal:N}=f(b,n,t);if(!N)return null;var k=[],A,C;if(Array.isArray(N)?[A,C]=N:A=C=N,t==="x"){var{scale:D}=v,T=j+g,O=T+r,B=T-r,Z=D(S-A),z=D(S+C);k.push({x1:z,y1:O,x2:z,y2:B}),k.push({x1:Z,y1:T,x2:z,y2:T}),k.push({x1:Z,y1:O,x2:Z,y2:B})}else if(t==="y"){var{scale:U}=p,q=w+g,Q=q-r,V=q+r,Pe=U(S-A),G=U(S+C);k.push({x1:Q,y1:G,x2:V,y2:G}),k.push({x1:q,y1:Pe,x2:q,y2:G}),k.push({x1:Q,y1:Pe,x2:V,y2:Pe})}var R="".concat(w+g,"px ").concat(j+g,"px");return y.createElement(Wr,Ha({className:"recharts-errorBar",key:"bar-".concat(k.map(J=>"".concat(J.x1,"-").concat(J.x2,"-").concat(J.y1,"-").concat(J.y2)))},u),k.map(J=>{var Ce=a?{transformOrigin:"".concat(J.x1-5,"px")}:void 0;return y.createElement(no,{from:{transform:"scaleY(0)",transformOrigin:R},to:{transform:"scaleY(1)",transformOrigin:R},begin:i,easing:s,isActive:a,duration:o,key:"line-".concat(J.x1,"-").concat(J.x2,"-").concat(J.y1,"-").concat(J.y2),style:{transformOrigin:R}},y.createElement("line",Ha({},J,{style:Ce})))}))});return y.createElement(Wr,{className:"recharts-errorBars"},x)}var kx=y.createContext(void 0);function Kz(e){var t=y.useContext(kx);return e!=null?e:t!=null?t:"x"}function Gz(e){var{direction:t,children:r}=e;return y.createElement(kx.Provider,{value:t},r)}var Px={stroke:"black",strokeWidth:1.5,width:5,offset:0,isAnimationActive:!0,animationBegin:0,animationDuration:400,animationEasing:"ease-in-out"};function Vz(e){var t=Kz(e.direction),{width:r,isAnimationActive:n,animationBegin:a,animationDuration:i,animationEasing:o}=Nn(e,Px);return y.createElement(y.Fragment,null,y.createElement(Fz,{dataKey:e.dataKey,direction:t}),y.createElement(Zz,Ha({},e,{direction:t,width:r,isAnimationActive:n,animationBegin:a,animationDuration:i,animationEasing:o})))}class Ex extends y.Component{render(){return y.createElement(Vz,this.props)}}Nx(Ex,"defaultProps",Px);Nx(Ex,"displayName","ErrorBar");function _x(e,t){var r,n,a=K(u=>Er(u,e)),i=K(u=>Gr(u,t)),o=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:yt.allowDataOverflow,s=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:xt.allowDataOverflow,c=o||s;return{needClip:c,needClipX:o,needClipY:s}}function Yz(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,a=ad(),{needClipX:i,needClipY:o,needClip:s}=_x(t,r);if(!s)return null;var{x:c,y:u,width:d,height:f}=a;return y.createElement("clipPath",{id:"clipPath-".concat(n)},y.createElement("rect",{x:i?c:c-d/2,y:o?u:u-f/2,width:i?d:d*2,height:o?f:f*2}))}var Xz=e=>{var{chartData:t}=e,r=st(),n=mt();return y.useEffect(()=>n?()=>{}:(r(Qm(t)),()=>{r(Qm(void 0))}),[t,r,n]),null},Sh={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},Ax=Rt({name:"brush",initialState:Sh,reducers:{setBrushSettings(e,t){return t.payload==null?Sh:t.payload}}}),{setBrushSettings:UL}=Ax.actions,Qz=Ax.reducer;function Jz(e,t,r){return(t=e5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function e5(e){var t=t5(e,"string");return typeof t=="symbol"?t:t+""}function t5(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class id{static create(t){return new id(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+a}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(r){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],a=r[r.length-1];return n<=a?t>=n&&t<=a:t>=a&&t<=n}}Jz(id,"EPS",1e-4);function r5(e){return(e%180+180)%180}var n5=function(t){var{width:r,height:n}=t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=r5(a),o=i*Math.PI/180,s=Math.atan(n/r),c=o>s&&o<Math.PI-s?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},a5={dots:[],areas:[],lines:[]},Cx=Rt({name:"referenceElements",initialState:a5,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=pr(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=pr(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=pr(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:WL,removeDot:HL,addArea:qL,removeArea:ZL,addLine:KL,removeLine:GL}=Cx.actions,i5=Cx.reducer,o5=y.createContext(void 0),s5=e=>{var{children:t}=e,[r]=y.useState("".concat(Da("recharts"),"-clip")),n=ad();if(n==null)return null;var{x:a,y:i,width:o,height:s}=n;return y.createElement(o5.Provider,{value:r},y.createElement("defs",null,y.createElement("clipPath",{id:r},y.createElement("rect",{x:a,y:i,height:s,width:o}))),t)};function tl(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function Ox(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function l5(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return n5(n,r)}function c5(e,t,r){var n=r==="width",{x:a,y:i,width:o,height:s}=e;return t===1?{start:n?a:i,end:n?a+o:i+s}:{start:n?a+o:i+s,end:n?a:i}}function xo(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-a)<=0}function u5(e,t){return Ox(e,t+1)}function d5(e,t,r,n,a){for(var i=(n||[]).slice(),{start:o,end:s}=t,c=0,u=1,d=o,f=function(){var g=n==null?void 0:n[c];if(g===void 0)return{v:Ox(n,u)};var v=c,p,x=()=>(p===void 0&&(p=r(g,v)),p),b=g.coordinate,w=c===0||xo(e,b,x,d,s);w||(c=0,d=o,u+=1),w&&(d=b+e*(x()/2+a),c+=u)},m;u<=i.length;)if(m=f(),m)return m.v;return[]}function Nh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function tt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Nh(Object(r),!0).forEach(function(n){f5(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nh(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function f5(e,t,r){return(t=m5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m5(e){var t=h5(e,"string");return typeof t=="symbol"?t:t+""}function h5(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function p5(e,t,r,n,a){for(var i=(n||[]).slice(),o=i.length,{start:s}=t,{end:c}=t,u=function(m){var h=i[m],g,v=()=>(g===void 0&&(g=r(h,m)),g);if(m===o-1){var p=e*(h.coordinate+e*v()/2-c);i[m]=h=tt(tt({},h),{},{tickCoord:p>0?h.coordinate-p*e:h.coordinate})}else i[m]=h=tt(tt({},h),{},{tickCoord:h.coordinate});var x=xo(e,h.tickCoord,v,s,c);x&&(c=h.tickCoord-e*(v()/2+a),i[m]=tt(tt({},h),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return i}function g5(e,t,r,n,a,i){var o=(n||[]).slice(),s=o.length,{start:c,end:u}=t;if(i){var d=n[s-1],f=r(d,s-1),m=e*(d.coordinate+e*f/2-u);o[s-1]=d=tt(tt({},d),{},{tickCoord:m>0?d.coordinate-m*e:d.coordinate});var h=xo(e,d.tickCoord,()=>f,c,u);h&&(u=d.tickCoord-e*(f/2+a),o[s-1]=tt(tt({},d),{},{isShow:!0}))}for(var g=i?s-1:s,v=function(b){var w=o[b],j,S=()=>(j===void 0&&(j=r(w,b)),j);if(b===0){var N=e*(w.coordinate-e*S()/2-c);o[b]=w=tt(tt({},w),{},{tickCoord:N<0?w.coordinate-N*e:w.coordinate})}else o[b]=w=tt(tt({},w),{},{tickCoord:w.coordinate});var k=xo(e,w.tickCoord,S,c,u);k&&(c=w.tickCoord+e*(S()/2+a),o[b]=tt(tt({},w),{},{isShow:!0}))},p=0;p<g;p++)v(p);return o}function od(e,t,r){var{tick:n,ticks:a,viewBox:i,minTickGap:o,orientation:s,interval:c,tickFormatter:u,unit:d,angle:f}=e;if(!a||!a.length||!n)return[];if(W(c)||Ya.isSsr){var m;return(m=u5(a,W(c)?c:0))!==null&&m!==void 0?m:[]}var h=[],g=s==="top"||s==="bottom"?"width":"height",v=d&&g==="width"?_a(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},p=(w,j)=>{var S=typeof u=="function"?u(w.value,j):w.value;return g==="width"?l5(_a(S,{fontSize:t,letterSpacing:r}),v,f):_a(S,{fontSize:t,letterSpacing:r})[g]},x=a.length>=2?Ot(a[1].coordinate-a[0].coordinate):1,b=c5(i,x,g);return c==="equidistantPreserveStart"?d5(x,b,p,a,o):(c==="preserveStart"||c==="preserveStartEnd"?h=g5(x,b,p,a,o,c==="preserveStartEnd"):h=p5(x,b,p,a,o),h.filter(w=>w.isShow))}var v5=["viewBox"],y5=["viewBox"];function zn(){return zn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zn.apply(null,arguments)}function kh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Me(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kh(Object(r),!0).forEach(function(n){sd(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kh(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ph(e,t){if(e==null)return{};var r,n,a=x5(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function x5(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function sd(e,t,r){return(t=b5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b5(e){var t=w5(e,"string");return typeof t=="symbol"?t:t+""}function w5(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Vr extends y.Component{constructor(t){super(t),this.tickRefs=y.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,r){var{viewBox:n}=t,a=Ph(t,v5),i=this.props,{viewBox:o}=i,s=Ph(i,y5);return!tl(n,o)||!tl(a,s)||!tl(r,this.state)}getTickLineCoord(t){var{x:r,y:n,width:a,height:i,orientation:o,tickSize:s,mirror:c,tickMargin:u}=this.props,d,f,m,h,g,v,p=c?-1:1,x=t.tickSize||s,b=W(t.tickCoord)?t.tickCoord:t.coordinate;switch(o){case"top":d=f=t.coordinate,h=n+ +!c*i,m=h-p*x,v=m-p*u,g=b;break;case"left":m=h=t.coordinate,f=r+ +!c*a,d=f-p*x,g=d-p*u,v=b;break;case"right":m=h=t.coordinate,f=r+ +c*a,d=f+p*x,g=d+p*u,v=b;break;default:d=f=t.coordinate,h=n+ +c*i,m=h+p*x,v=m+p*u,g=b;break}return{line:{x1:d,y1:m,x2:f,y2:h},tick:{x:g,y:v}}}getTickTextAnchor(){var{orientation:t,mirror:r}=this.props,n;switch(t){case"left":n=r?"start":"end";break;case"right":n=r?"end":"start";break;default:n="middle";break}return n}getTickVerticalAnchor(){var{orientation:t,mirror:r}=this.props;switch(t){case"left":case"right":return"middle";case"top":return r?"start":"end";default:return r?"end":"start"}}renderAxisLine(){var{x:t,y:r,width:n,height:a,orientation:i,mirror:o,axisLine:s}=this.props,c=Me(Me(Me({},ye(this.props,!1)),ye(s,!1)),{},{fill:"none"});if(i==="top"||i==="bottom"){var u=+(i==="top"&&!o||i==="bottom"&&o);c=Me(Me({},c),{},{x1:t,y1:r+u*a,x2:t+n,y2:r+u*a})}else{var d=+(i==="left"&&!o||i==="right"&&o);c=Me(Me({},c),{},{x1:t+d*n,y1:r,x2:t+d*n,y2:r+a})}return y.createElement("line",zn({},c,{className:fe("recharts-cartesian-axis-line",wn(s,"className"))}))}static renderTickItem(t,r,n){var a,i=fe(r.className,"recharts-cartesian-axis-tick-value");if(y.isValidElement(t))a=y.cloneElement(t,Me(Me({},r),{},{className:i}));else if(typeof t=="function")a=t(Me(Me({},r),{},{className:i}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=fe(o,t.className)),a=y.createElement(rd,zn({},r,{className:o}),n)}return a}renderTicks(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:a,stroke:i,tick:o,tickFormatter:s,unit:c}=this.props,u=od(Me(Me({},this.props),{},{ticks:n}),t,r),d=this.getTickTextAnchor(),f=this.getTickVerticalAnchor(),m=ye(this.props,!1),h=ye(o,!1),g=Me(Me({},m),{},{fill:"none"},ye(a,!1)),v=u.map((p,x)=>{var{line:b,tick:w}=this.getTickLineCoord(p),j=Me(Me(Me(Me({textAnchor:d,verticalAnchor:f},m),{},{stroke:"none",fill:i},h),w),{},{index:x,payload:p,visibleTicksCount:u.length,tickFormatter:s});return y.createElement(Wr,zn({className:"recharts-cartesian-axis-tick",key:"tick-".concat(p.value,"-").concat(p.coordinate,"-").concat(p.tickCoord)},ZE(this.props,p,x)),a&&y.createElement("line",zn({},g,b,{className:fe("recharts-cartesian-axis-tick-line",wn(a,"className"))})),o&&Vr.renderTickItem(o,j,"".concat(typeof s=="function"?s(p.value,x):p.value).concat(c||"")))});return v.length>0?y.createElement("g",{className:"recharts-cartesian-axis-ticks"},v):null}render(){var{axisLine:t,width:r,height:n,className:a,hide:i}=this.props;if(i)return null;var{ticks:o}=this.props;return r!=null&&r<=0||n!=null&&n<=0?null:y.createElement(Wr,{className:fe("recharts-cartesian-axis",a),ref:s=>{if(s){var c=s.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(c);var u=c[0];if(u){var d=window.getComputedStyle(u).fontSize,f=window.getComputedStyle(u).letterSpacing;(d!==this.state.fontSize||f!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(u).fontSize,letterSpacing:window.getComputedStyle(u).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,o),wt.renderCallByParent(this.props))}}sd(Vr,"displayName","CartesianAxis");sd(Vr,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var j5=["x1","y1","x2","y2","key"],S5=["offset"],N5=["xAxisId","yAxisId"],k5=["xAxisId","yAxisId"];function Eh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function rt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Eh(Object(r),!0).forEach(function(n){P5(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Eh(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function P5(e,t,r){return(t=E5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E5(e){var t=_5(e,"string");return typeof t=="symbol"?t:t+""}function _5(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sn(){return sn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sn.apply(null,arguments)}function bo(e,t){if(e==null)return{};var r,n,a=A5(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function A5(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var C5=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:a,width:i,height:o,ry:s}=e;return y.createElement("rect",{x:n,y:a,ry:s,width:i,height:o,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function Tx(e,t){var r;if(y.isValidElement(e))r=y.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:n,y1:a,x2:i,y2:o,key:s}=t,c=bo(t,j5),u=ye(c,!1),{offset:d}=u,f=bo(u,S5);r=y.createElement("line",sn({},f,{x1:n,y1:a,x2:i,y2:o,fill:"none",key:s}))}return r}function O5(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:i,yAxisId:o}=e,s=bo(e,N5),c=a.map((u,d)=>{var f=rt(rt({},s),{},{x1:t,y1:u,x2:t+r,y2:u,key:"line-".concat(d),index:d});return Tx(n,f)});return y.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function T5(e){var{y:t,height:r,vertical:n=!0,verticalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:i,yAxisId:o}=e,s=bo(e,k5),c=a.map((u,d)=>{var f=rt(rt({},s),{},{x1:u,y1:t,x2:u,y2:t+r,key:"line-".concat(d),index:d});return Tx(n,f)});return y.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function I5(e){var{horizontalFill:t,fillOpacity:r,x:n,y:a,width:i,height:o,horizontalPoints:s,horizontal:c=!0}=e;if(!c||!t||!t.length)return null;var u=s.map(f=>Math.round(f+a-a)).sort((f,m)=>f-m);a!==u[0]&&u.unshift(0);var d=u.map((f,m)=>{var h=!u[m+1],g=h?a+o-f:u[m+1]-f;if(g<=0)return null;var v=m%t.length;return y.createElement("rect",{key:"react-".concat(m),y:f,x:n,height:g,width:i,stroke:"none",fill:t[v],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return y.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function M5(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:a,y:i,width:o,height:s,verticalPoints:c}=e;if(!t||!r||!r.length)return null;var u=c.map(f=>Math.round(f+a-a)).sort((f,m)=>f-m);a!==u[0]&&u.unshift(0);var d=u.map((f,m)=>{var h=!u[m+1],g=h?a+o-f:u[m+1]-f;if(g<=0)return null;var v=m%r.length;return y.createElement("rect",{key:"react-".concat(m),x:f,y:i,width:g,height:s,stroke:"none",fill:r[v],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return y.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var D5=(e,t)=>{var{xAxis:r,width:n,height:a,offset:i}=e;return Dv(od(rt(rt(rt({},Vr.defaultProps),r),{},{ticks:$v(r),viewBox:{x:0,y:0,width:n,height:a}})),i.left,i.left+i.width,t)},$5=(e,t)=>{var{yAxis:r,width:n,height:a,offset:i}=e;return Dv(od(rt(rt(rt({},Vr.defaultProps),r),{},{ticks:$v(r),viewBox:{x:0,y:0,width:n,height:a}})),i.top,i.top+i.height,t)},z5={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function nc(e){var t=Bv(),r=Uv(),n=Fv(),a=rt(rt({},Nn(e,z5)),{},{x:W(e.x)?e.x:n.left,y:W(e.y)?e.y:n.top,width:W(e.width)?e.width:n.width,height:W(e.height)?e.height:n.height}),{xAxisId:i,yAxisId:o,x:s,y:c,width:u,height:d,syncWithTicks:f,horizontalValues:m,verticalValues:h}=a,g=mt(),v=K(C=>Hm(C,"xAxis",i,g)),p=K(C=>Hm(C,"yAxis",o,g));if(!W(u)||u<=0||!W(d)||d<=0||!W(s)||s!==+s||!W(c)||c!==+c)return null;var x=a.verticalCoordinatesGenerator||D5,b=a.horizontalCoordinatesGenerator||$5,{horizontalPoints:w,verticalPoints:j}=a;if((!w||!w.length)&&typeof b=="function"){var S=m&&m.length,N=b({yAxis:p?rt(rt({},p),{},{ticks:S?m:p.ticks}):void 0,width:t,height:r,offset:n},S?!0:f);Ea(Array.isArray(N),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof N,"]")),Array.isArray(N)&&(w=N)}if((!j||!j.length)&&typeof x=="function"){var k=h&&h.length,A=x({xAxis:v?rt(rt({},v),{},{ticks:k?h:v.ticks}):void 0,width:t,height:r,offset:n},k?!0:f);Ea(Array.isArray(A),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof A,"]")),Array.isArray(A)&&(j=A)}return y.createElement("g",{className:"recharts-cartesian-grid"},y.createElement(C5,{fill:a.fill,fillOpacity:a.fillOpacity,x:a.x,y:a.y,width:a.width,height:a.height,ry:a.ry}),y.createElement(I5,sn({},a,{horizontalPoints:w})),y.createElement(M5,sn({},a,{verticalPoints:j})),y.createElement(O5,sn({},a,{offset:n,horizontalPoints:w,xAxis:v,yAxis:p})),y.createElement(T5,sn({},a,{offset:n,verticalPoints:j,xAxis:v,yAxis:p})))}nc.displayName="CartesianGrid";var Ix=(e,t,r,n)=>ks(e,"xAxis",t,n),Mx=(e,t,r,n)=>Dy(e,"xAxis",t,n),Dx=(e,t,r,n)=>ks(e,"yAxis",r,n),$x=(e,t,r,n)=>Dy(e,"yAxis",r,n),R5=E([ke,Ix,Dx,Mx,$x],(e,t,r,n,a)=>qr(e,"xAxis")?Tl(t,n,!1):Tl(r,a,!1)),L5=(e,t,r,n,a)=>a,F5=E([sy,L5],(e,t)=>{if(e.some(r=>r.type==="line"&&t.dataKey===r.dataKey&&t.data===r.data))return t}),B5=E([ke,Ix,Dx,Mx,$x,F5,R5,L0],(e,t,r,n,a,i,o,s)=>{var{chartData:c,dataStartIndex:u,dataEndIndex:d}=s;if(!(i==null||t==null||r==null||n==null||a==null||n.length===0||a.length===0||o==null)){var{dataKey:f,data:m}=i,h;if(m!=null&&m.length>0?h=m:h=c==null?void 0:c.slice(u,d+1),h!=null)return o4({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:a,dataKey:f,bandSize:o,displayedData:h})}}),U5=["type","layout","connectNulls","needClip"],W5=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId"];function zx(e,t){if(e==null)return{};var r,n,a=H5(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function H5(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function _h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Wt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_h(Object(r),!0).forEach(function(n){_s(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_h(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _s(e,t,r){return(t=q5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q5(e){var t=Z5(e,"string");return typeof t=="symbol"?t:t+""}function Z5(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xn(){return Xn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xn.apply(null,arguments)}var K5=e=>{var{dataKey:t,name:r,stroke:n,legendType:a,hide:i}=e;return[{inactive:i,dataKey:t,type:a,color:n,value:zv(r,t),payload:e}]};function G5(e){var{dataKey:t,data:r,stroke:n,strokeWidth:a,fill:i,name:o,hide:s,unit:c}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:a,fill:i,dataKey:t,nameKey:void 0,name:zv(o,t),hide:s,type:e.tooltipType,color:e.stroke,unit:c}}}var Rx=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function V5(e,t){for(var r=e.length%2!==0?[...e,0]:e,n=[],a=0;a<t;++a)n=[...n,...r];return n}var Y5=(e,t,r)=>{var n=r.reduce((f,m)=>f+m);if(!n)return Rx(t,e);for(var a=Math.floor(e/n),i=e%n,o=t-e,s=[],c=0,u=0;c<r.length;u+=r[c],++c)if(u+r[c]>i){s=[...r.slice(0,c),i-u];break}var d=s.length%2===0?[0,o]:[o];return[...V5(r,a),...s,...d].map(f=>"".concat(f,"px")).join(", ")};function X5(e,t){var r;if(y.isValidElement(e))r=y.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var n=fe("recharts-line-dot",typeof e!="boolean"?e.className:"");r=y.createElement(xx,Xn({},t,{className:n}))}return r}function Q5(e,t){return e==null?!1:t?!0:e.length===1}function J5(e){var{clipPathId:t,points:r,props:n}=e,{dot:a,dataKey:i,needClip:o}=n;if(!Q5(r,a))return null;var s=Cg(a),c=ye(n,!1),u=ye(a,!0),d=r.map((m,h)=>{var g=Wt(Wt(Wt({key:"dot-".concat(h),r:3},c),u),{},{index:h,cx:m.x,cy:m.y,dataKey:i,value:m.value,payload:m.payload,points:r});return X5(a,g)}),f={clipPath:o?"url(#clipPath-".concat(s?"":"dots-").concat(t,")"):null};return y.createElement(Wr,Xn({className:"recharts-line-dots",key:"dots"},f),d)}function ac(e){var{clipPathId:t,pathRef:r,points:n,strokeDasharray:a,props:i,showLabels:o}=e,{type:s,layout:c,connectNulls:u,needClip:d}=i,f=zx(i,U5),m=Wt(Wt({},ye(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:d?"url(#clipPath-".concat(t,")"):null,points:n,type:s,layout:c,connectNulls:u,strokeDasharray:a!=null?a:i.strokeDasharray});return y.createElement(y.Fragment,null,(n==null?void 0:n.length)>1&&y.createElement(qv,Xn({},m,{pathRef:r})),y.createElement(J5,{points:n,clipPathId:t,props:i}),o&&mn.renderCallByParent(i,n))}function e4(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch(t){return 0}}function t4(e){var{clipPathId:t,props:r,pathRef:n,previousPointsRef:a,longestAnimatedLengthRef:i}=e,{points:o,strokeDasharray:s,isAnimationActive:c,animationBegin:u,animationDuration:d,animationEasing:f,animateNewValues:m,width:h,height:g,onAnimationEnd:v,onAnimationStart:p}=r,x=a.current,b=jz(r,"recharts-line-"),[w,j]=y.useState(!1),S=y.useCallback(()=>{typeof v=="function"&&v(),j(!1)},[v]),N=y.useCallback(()=>{typeof p=="function"&&p(),j(!0)},[p]),k=e4(n.current),A=i.current;return y.createElement(no,{begin:u,duration:d,isActive:c,easing:f,from:{t:0},to:{t:1},onAnimationEnd:S,onAnimationStart:N,key:b},C=>{var{t:D}=C,T=ga(A,k+A),O=Math.min(T(D),k),B;if(s){var Z="".concat(s).split(/[,\s]+/gim).map(q=>parseFloat(q));B=Y5(O,k,Z)}else B=Rx(k,O);if(x){var z=x.length/o.length,U=D===1?o:o.map((q,Q)=>{var V=Math.floor(Q*z);if(x[V]){var Pe=x[V],G=ga(Pe.x,q.x),R=ga(Pe.y,q.y);return Wt(Wt({},q),{},{x:G(D),y:R(D)})}if(m){var J=ga(h*2,q.x),Ce=ga(g/2,q.y);return Wt(Wt({},q),{},{x:J(D),y:Ce(D)})}return Wt(Wt({},q),{},{x:q.x,y:q.y})});return a.current=U,y.createElement(ac,{props:r,points:U,clipPathId:t,pathRef:n,showLabels:!w,strokeDasharray:B})}return D>0&&k>0&&(a.current=o,i.current=O),y.createElement(ac,{props:r,points:o,clipPathId:t,pathRef:n,showLabels:!w,strokeDasharray:B})})}function r4(e){var{clipPathId:t,props:r}=e,{points:n,isAnimationActive:a}=r,i=y.useRef(null),o=y.useRef(0),s=y.useRef(null),c=i.current;return a&&n&&n.length&&c!==n?y.createElement(t4,{props:r,clipPathId:t,previousPointsRef:i,longestAnimatedLengthRef:o,pathRef:s}):y.createElement(ac,{props:r,points:n,clipPathId:t,pathRef:s,showLabels:!0})}var n4=(e,t)=>({x:e.x,y:e.y,value:e.value,errorVal:Nt(e.payload,t)});class a4 extends y.Component{constructor(){super(...arguments),_s(this,"id",Da("recharts-line-"))}render(){var t,{hide:r,dot:n,points:a,className:i,xAxisId:o,yAxisId:s,top:c,left:u,width:d,height:f,id:m,needClip:h,layout:g}=this.props;if(r)return null;var v=fe("recharts-line",i),p=_e(m)?this.id:m,{r:x=3,strokeWidth:b=2}=(t=ye(n,!1))!==null&&t!==void 0?t:{r:3,strokeWidth:2},w=Cg(n),j=x*2+b;return y.createElement(y.Fragment,null,y.createElement(Wr,{className:v},h&&y.createElement("defs",null,y.createElement(Yz,{clipPathId:p,xAxisId:o,yAxisId:s}),!w&&y.createElement("clipPath",{id:"clipPath-dots-".concat(p)},y.createElement("rect",{x:u-j/2,y:c-j/2,width:d+j,height:f+j}))),y.createElement(r4,{props:this.props,clipPathId:p}),y.createElement(Gz,{direction:g==="horizontal"?"y":"x"},y.createElement(zz,{xAxisId:o,yAxisId:s,data:a,dataPointFormatter:n4,errorBarOffset:0},this.props.children))),y.createElement(Tz,{activeDot:this.props.activeDot,points:a,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var Lx={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!Ya.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function i4(e){var t=Nn(e,Lx),{activeDot:r,animateNewValues:n,animationBegin:a,animationDuration:i,animationEasing:o,connectNulls:s,dot:c,hide:u,isAnimationActive:d,label:f,legendType:m,xAxisId:h,yAxisId:g}=t,v=zx(t,W5),{needClip:p}=_x(h,g),{height:x,width:b,x:w,y:j}=ad(),S=ou(),N=mt(),k=y.useMemo(()=>({dataKey:e.dataKey,data:e.data}),[e.dataKey,e.data]),A=K(C=>B5(C,h,g,N,k));return S!=="horizontal"&&S!=="vertical"?null:y.createElement(a4,Xn({},v,{connectNulls:s,dot:c,activeDot:r,animateNewValues:n,animationBegin:a,animationDuration:i,animationEasing:o,isAnimationActive:d,hide:u,label:f,legendType:m,xAxisId:h,yAxisId:g,points:A,layout:S,height:x,width:b,left:w,top:j,needClip:p}))}function o4(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:a,yAxisTicks:i,dataKey:o,bandSize:s,displayedData:c}=e;return c.map((u,d)=>{var f=Nt(u,o);return t==="horizontal"?{x:$f({axis:r,ticks:a,bandSize:s,entry:u,index:d}),y:_e(f)?null:n.scale(f),value:f,payload:u}:{x:_e(f)?null:r.scale(f),y:$f({axis:n,ticks:i,bandSize:s,entry:u,index:d}),value:f,payload:u}})}class wo extends y.PureComponent{render(){return y.createElement(Lz,{type:"line",data:this.props.data,xAxisId:this.props.xAxisId,yAxisId:this.props.yAxisId,zAxisId:0,dataKey:this.props.dataKey,stackId:void 0,hide:this.props.hide,barSize:void 0},y.createElement(wz,{legendPayload:K5(this.props)}),y.createElement(xz,{fn:G5,args:this.props}),y.createElement(i4,this.props))}}_s(wo,"displayName","Line");_s(wo,"defaultProps",Lx);function Ah(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ch(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ah(Object(r),!0).forEach(function(n){s4(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ah(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function s4(e,t,r){return(t=l4(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l4(e){var t=c4(e,"string");return typeof t=="symbol"?t:t+""}function c4(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var u4={xAxis:{},yAxis:{},zAxis:{}},Fx=Rt({name:"cartesianAxis",initialState:u4,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload;e.yAxis[r]&&(e.yAxis[r]=Ch(Ch({},e.yAxis[r]),{},{width:n}))}}}),{addXAxis:d4,removeXAxis:f4,addYAxis:m4,removeYAxis:h4,addZAxis:VL,removeZAxis:YL,updateYAxisWidth:p4}=Fx.actions,g4=Fx.reducer,v4=["children"],y4=["dangerouslySetInnerHTML","ticks"];function Bx(e,t,r){return(t=x4(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x4(e){var t=b4(e,"string");return typeof t=="symbol"?t:t+""}function b4(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ic(){return ic=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ic.apply(null,arguments)}function Ux(e,t){if(e==null)return{};var r,n,a=w4(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function w4(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function j4(e){var t=st(),r=y.useMemo(()=>{var{children:i}=e,o=Ux(e,v4);return o},[e]),n=K(i=>Er(i,r.id)),a=r===n;return y.useEffect(()=>(t(d4(r)),()=>{t(f4(r))}),[r,t]),a?e.children:null}var S4=e=>{var{xAxisId:t,className:r}=e,n=K(Lv),a=mt(),i="xAxis",o=K(h=>aa(h,i,t,a)),s=K(h=>My(h,i,t,a)),c=K(h=>PM(h,t)),u=K(h=>OM(h,t));if(c==null||u==null)return null;var{dangerouslySetInnerHTML:d,ticks:f}=e,m=Ux(e,y4);return y.createElement(Vr,ic({},m,{scale:o,x:u.x,y:u.y,width:c.width,height:c.height,className:fe("recharts-".concat(i," ").concat(i),r),viewBox:n,ticks:s}))},N4=e=>{var t,r,n,a,i;return y.createElement(j4,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(a=e.minTickGap)!==null&&a!==void 0?a:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter},y.createElement(S4,e))};class jo extends y.Component{render(){return y.createElement(N4,this.props)}}Bx(jo,"displayName","XAxis");Bx(jo,"defaultProps",{allowDataOverflow:yt.allowDataOverflow,allowDecimals:yt.allowDecimals,allowDuplicatedCategory:yt.allowDuplicatedCategory,height:yt.height,hide:!1,mirror:yt.mirror,orientation:yt.orientation,padding:yt.padding,reversed:yt.reversed,scale:yt.scale,tickCount:yt.tickCount,type:yt.type,xAxisId:0});var k4=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:i=0}=e,o=0;if(t){t.forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>o&&(o=f.width)}});var s=r?r.getBoundingClientRect().width:0,c=a+i,u=o+c+s+(r?n:0);return Math.round(u)}return 0},P4=["dangerouslySetInnerHTML","ticks"];function Wx(e,t,r){return(t=E4(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E4(e){var t=_4(e,"string");return typeof t=="symbol"?t:t+""}function _4(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oc(){return oc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oc.apply(null,arguments)}function A4(e,t){if(e==null)return{};var r,n,a=C4(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function C4(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function O4(e){var t=st();return y.useEffect(()=>(t(m4(e)),()=>{t(h4(e))}),[e,t]),null}var T4=e=>{var t,{yAxisId:r,className:n,width:a,label:i}=e,o=y.useRef(null),s=y.useRef(null),c=K(Lv),u=mt(),d=st(),f="yAxis",m=K(w=>aa(w,f,r,u)),h=K(w=>IM(w,r)),g=K(w=>TM(w,r)),v=K(w=>My(w,f,r,u));if(y.useLayoutEffect(()=>{var w;if(!(a!=="auto"||!h||nd(i)||y.isValidElement(i))){var j=o.current,S=j==null||(w=j.tickRefs)===null||w===void 0?void 0:w.current,{tickSize:N,tickMargin:k}=j.props,A=k4({ticks:S,label:s.current,labelGapWithTick:5,tickSize:N,tickMargin:k});Math.round(h.width)!==Math.round(A)&&d(p4({id:r,width:A}))}},[o,o==null||(t=o.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,h==null?void 0:h.width,h,d,i,r,a]),h==null||g==null)return null;var{dangerouslySetInnerHTML:p,ticks:x}=e,b=A4(e,P4);return y.createElement(Vr,oc({},b,{ref:o,labelRef:s,scale:m,x:g.x,y:g.y,width:h.width,height:h.height,className:fe("recharts-".concat(f," ").concat(f),n),viewBox:c,ticks:v}))},I4=e=>{var t,r,n,a,i;return y.createElement(y.Fragment,null,y.createElement(O4,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(a=e.minTickGap)!==null&&a!==void 0?a:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter}),y.createElement(T4,e))},M4={allowDataOverflow:xt.allowDataOverflow,allowDecimals:xt.allowDecimals,allowDuplicatedCategory:xt.allowDuplicatedCategory,hide:!1,mirror:xt.mirror,orientation:xt.orientation,padding:xt.padding,reversed:xt.reversed,scale:xt.scale,tickCount:xt.tickCount,type:xt.type,width:xt.width,yAxisId:0};class So extends y.Component{render(){return y.createElement(I4,this.props)}}Wx(So,"displayName","YAxis");Wx(So,"defaultProps",M4);var D4={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oi=y;function $4(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var z4=typeof Object.is=="function"?Object.is:$4,R4=oi.useSyncExternalStore,L4=oi.useRef,F4=oi.useEffect,B4=oi.useMemo,U4=oi.useDebugValue;D4.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var i=L4(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=B4(function(){function c(h){if(!u){if(u=!0,d=h,h=n(h),a!==void 0&&o.hasValue){var g=o.value;if(a(g,h))return f=g}return f=h}if(g=f,z4(d,h))return g;var v=n(h);return a!==void 0&&a(g,v)?(d=h,g):(d=h,f=v)}var u=!1,d,f,m=r===void 0?null:r;return[function(){return c(t())},m===null?void 0:function(){return c(m())}]},[t,r,n,a]);var s=R4(e,i[0],i[1]);return F4(function(){o.hasValue=!0,o.value=s},[s]),U4(s),s};function W4(e){e()}function H4(){let e=null,t=null;return{clear(){e=null,t=null},notify(){W4(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!n||e===null||(n=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var Oh={notify(){},get:()=>[]};function q4(e,t){let r,n=Oh,a=0,i=!1;function o(v){d();const p=n.subscribe(v);let x=!1;return()=>{x||(x=!0,p(),f())}}function s(){n.notify()}function c(){g.onStateChange&&g.onStateChange()}function u(){return i}function d(){a++,r||(r=e.subscribe(c),n=H4())}function f(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=Oh)}function m(){i||(i=!0,d())}function h(){i&&(i=!1,f())}const g={addNestedSub:o,notifyNestedSubs:s,handleChangeWrapper:c,isSubscribed:u,trySubscribe:m,tryUnsubscribe:h,getListeners:()=>n};return g}var Z4=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",K4=Z4(),G4=()=>typeof navigator<"u"&&navigator.product==="ReactNative",V4=G4(),Y4=()=>K4||V4?y.useLayoutEffect:y.useEffect,X4=Y4(),rl=Symbol.for("react-redux-context"),nl=typeof globalThis<"u"?globalThis:{};function Q4(){var r;if(!y.createContext)return{};const e=(r=nl[rl])!=null?r:nl[rl]=new Map;let t=e.get(y.createContext);return t||(t=y.createContext(null),e.set(y.createContext,t)),t}var J4=Q4();function eR(e){const{children:t,context:r,serverState:n,store:a}=e,i=y.useMemo(()=>{const c=q4(a);return{store:a,subscription:c,getServerState:n?()=>n:void 0}},[a,n]),o=y.useMemo(()=>a.getState(),[a]);X4(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==a.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,o]);const s=r||J4;return y.createElement(s.Provider,{value:i},t)}var tR=eR,rR=(e,t)=>t,ld=E([rR,ke,UI,We,Vy,_r,$D,Ye],BD),cd=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},Hx=Dt("mouseClick"),qx=Va();qx.startListening({actionCreator:Hx,effect:(e,t)=>{var r=e.payload,n=ld(t.getState(),cd(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(qM({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var sc=Dt("mouseMove"),Zx=Va();Zx.startListening({actionCreator:sc,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=Ku(n,n.tooltip.settings.shared),i=ld(n,cd(r));a==="axis"&&((i==null?void 0:i.activeIndex)!=null?t.dispatch(Uy({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):t.dispatch(By()))}});function nR(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var Th={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},Kx=Rt({name:"rootProps",initialState:Th,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:Th.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),aR=Kx.reducer,{updateOptions:iR}=Kx.actions,Gx=Rt({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:XL}=Gx.actions,oR=Gx.reducer,Vx=Dt("keyDown"),Yx=Dt("focus"),ud=Va();ud.startListening({actionCreator:Vx,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var o=Number(Gu(a,An(r))),s=_r(r);if(i==="Enter"){var c=vo(r,"axis","hover",String(a.index));t.dispatch(Xl({active:!a.active,activeIndex:a.index,activeDataKey:a.dataKey,activeCoordinate:c}));return}var u=zM(r),d=u==="left-to-right"?1:-1,f=i==="ArrowRight"?1:-1,m=o+f*d;if(!(s==null||m>=s.length||m<0)){var h=vo(r,"axis","hover",String(m));t.dispatch(Xl({active:!0,activeIndex:m.toString(),activeDataKey:void 0,activeCoordinate:h}))}}}}});ud.startListening({actionCreator:Yx,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip;if(!a.active&&a.index==null){var i="0",o=vo(r,"axis","hover",String(i));t.dispatch(Xl({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:o}))}}}});var At=Dt("externalEvent"),Xx=Va();Xx.startListening({actionCreator:At,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:PD(r),activeDataKey:ND(r),activeIndex:Ua(r),activeLabel:Qy(r),activeTooltipIndex:Ua(r),isTooltipActive:ED(r)};e.payload.handler(n,e.payload.reactEvent)}}});var sR=E([ia],e=>e.tooltipItemPayloads),lR=E([sR,ii,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var a=e.find(s=>s.settings.dataKey===n);if(a!=null){var{positions:i}=a;if(i!=null){var o=t(i,r);return o}}}),Qx=Dt("touchMove"),Jx=Va();Jx.startListening({actionCreator:Qx,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=Ku(n,n.tooltip.settings.shared);if(a==="axis"){var i=ld(n,cd({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(i==null?void 0:i.activeIndex)!=null&&t.dispatch(Uy({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(a==="item"){var o,s=r.touches[0],c=document.elementFromPoint(s.clientX,s.clientY);if(!c||!c.getAttribute)return;var u=c.getAttribute(SC),d=(o=c.getAttribute(NC))!==null&&o!==void 0?o:void 0,f=lR(t.getState(),u,d);t.dispatch(HM({activeDataKey:d,activeIndex:u,activeCoordinate:f}))}}});var cR=xv({brush:Qz,cartesianAxis:g4,chartData:n$,graphicalItems:hz,layout:GA,legend:DC,options:QD,polarAxis:cz,polarOptions:oR,referenceElements:i5,rootProps:aR,tooltip:ZM}),uR=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return xA({reducer:cR,preloadedState:t,middleware:n=>n({serializableCheck:!1}).concat([qx.middleware,Zx.middleware,ud.middleware,Xx.middleware,Jx.middleware]),devTools:{serialize:{replacer:nR},name:"recharts-".concat(r)}})};function dR(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,a=mt(),i=y.useRef(null);if(a)return r;i.current==null&&(i.current=uR(t,n));var o=Xc;return y.createElement(tR,{context:o,store:i.current},r)}function fR(e){var{layout:t,width:r,height:n,margin:a}=e,i=st(),o=mt();return y.useEffect(()=>{o||(i(qA(t)),i(ZA({width:r,height:n})),i(HA(a)))},[i,o,t,r,n,a]),null}function mR(e){var t=st();return y.useEffect(()=>{t(iR(e))},[t,e]),null}var hR=["children"];function pR(e,t){if(e==null)return{};var r,n,a=gR(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function gR(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function No(){return No=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},No.apply(null,arguments)}var vR={width:"100%",height:"100%"},yR=y.forwardRef((e,t)=>{var r=Bv(),n=Uv(),a=Hv();if(!eo(r)||!eo(n))return null;var{children:i,otherAttributes:o,title:s,desc:c}=e,u,d;return typeof o.tabIndex=="number"?u=o.tabIndex:u=a?0:void 0,typeof o.role=="string"?d=o.role:d=a?"application":void 0,y.createElement(Og,No({},o,{title:s,desc:c,role:d,tabIndex:u,width:r,height:n,style:vR,ref:t}),i)}),xR=e=>{var{children:t}=e,r=K(cs);if(!r)return null;var{width:n,height:a,y:i,x:o}=r;return y.createElement(Og,{width:n,height:a,x:o,y:i},t)},Ih=y.forwardRef((e,t)=>{var{children:r}=e,n=pR(e,hR),a=mt();return a?y.createElement(xR,null,r):y.createElement(yR,No({ref:t},n),r)});function bR(){var e=st(),[t,r]=y.useState(null),n=K(jC);return y.useEffect(()=>{if(t!=null){var a=t.getBoundingClientRect(),i=a.width/t.offsetWidth;Gt(i)&&i!==n&&e(KA(i))}},[t,e,n]),r}function Mh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function wR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Mh(Object(r),!0).forEach(function(n){jR(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mh(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jR(e,t,r){return(t=SR(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SR(e){var t=NR(e,"string");return typeof t=="symbol"?t:t+""}function NR(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kR=y.forwardRef((e,t)=>{var{children:r,className:n,height:a,onClick:i,onContextMenu:o,onDoubleClick:s,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:f,onMouseUp:m,onTouchEnd:h,onTouchMove:g,onTouchStart:v,style:p,width:x}=e,b=st(),[w,j]=y.useState(null),[S,N]=y.useState(null);o$();var k=bR(),A=y.useCallback(R=>{k(R),typeof t=="function"&&t(R),j(R),N(R)},[k,t,j,N]),C=y.useCallback(R=>{b(Hx(R)),b(At({handler:i,reactEvent:R}))},[b,i]),D=y.useCallback(R=>{b(sc(R)),b(At({handler:u,reactEvent:R}))},[b,u]),T=y.useCallback(R=>{b(By()),b(At({handler:d,reactEvent:R}))},[b,d]),O=y.useCallback(R=>{b(sc(R)),b(At({handler:f,reactEvent:R}))},[b,f]),B=y.useCallback(()=>{b(Yx())},[b]),Z=y.useCallback(R=>{b(Vx(R.key))},[b]),z=y.useCallback(R=>{b(At({handler:o,reactEvent:R}))},[b,o]),U=y.useCallback(R=>{b(At({handler:s,reactEvent:R}))},[b,s]),q=y.useCallback(R=>{b(At({handler:c,reactEvent:R}))},[b,c]),Q=y.useCallback(R=>{b(At({handler:m,reactEvent:R}))},[b,m]),V=y.useCallback(R=>{b(At({handler:v,reactEvent:R}))},[b,v]),Pe=y.useCallback(R=>{b(Qx(R)),b(At({handler:g,reactEvent:R}))},[b,g]),G=y.useCallback(R=>{b(At({handler:h,reactEvent:R}))},[b,h]);return y.createElement(ax.Provider,{value:w},y.createElement(e_.Provider,{value:S},y.createElement("div",{className:fe("recharts-wrapper",n),style:wR({position:"relative",cursor:"default",width:x,height:a},p),onClick:C,onContextMenu:z,onDoubleClick:U,onFocus:B,onKeyDown:Z,onMouseDown:q,onMouseEnter:D,onMouseLeave:T,onMouseMove:O,onMouseUp:Q,onTouchEnd:G,onTouchMove:Pe,onTouchStart:V,ref:A},r)))}),PR=["children","className","width","height","style","compact","title","desc"];function ER(e,t){if(e==null)return{};var r,n,a=_R(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function _R(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var AR=y.forwardRef((e,t)=>{var{children:r,className:n,width:a,height:i,style:o,compact:s,title:c,desc:u}=e,d=ER(e,PR),f=ye(d,!1);return s?y.createElement(Ih,{otherAttributes:f,title:c,desc:u},r):y.createElement(kR,{className:n,style:o,width:a,height:i,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},y.createElement(Ih,{otherAttributes:f,title:c,desc:u,ref:t},y.createElement(s5,null,r)))}),CR=["width","height"];function lc(){return lc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lc.apply(null,arguments)}function OR(e,t){if(e==null)return{};var r,n,a=TR(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function TR(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var IR={top:5,right:5,bottom:5,left:5},MR={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:IR,reverseStackOrder:!1,syncMethod:"index"},DR=y.forwardRef(function(t,r){var n,a=Nn(t.categoricalChartProps,MR),{width:i,height:o}=a,s=OR(a,CR);if(!eo(i)||!eo(o))return null;var{chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,categoricalChartProps:m}=t,h={chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,eventEmitter:void 0};return y.createElement(dR,{preloadedState:{options:h},reduxStoreName:(n=m.id)!==null&&n!==void 0?n:c},y.createElement(Xz,{chartData:m.data}),y.createElement(fR,{width:i,height:o,layout:a.layout,margin:a.margin}),y.createElement(mR,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),y.createElement(AR,lc({},s,{width:i,height:o,ref:r})))}),$R=["axis"],Dh=y.forwardRef((e,t)=>y.createElement(DR,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:$R,tooltipPayloadSearcher:YD,categoricalChartProps:e,ref:t}));function zR(e){return(typeof e=="string"?new Date(e):e).toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"2-digit"})}function RR(e){const t=typeof e=="string"?new Date(e):e;return t.toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"2-digit"})+" "+t.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})}const LR=({images:e})=>{const[t,r]=y.useState(!1),n=e.map(o=>{var u,d;let s;const c={excellent:95,good:80,fair:60,poor:30};return(u=o.healthAnalysis)!=null&&u.overallHealth&&c[o.healthAnalysis.overallHealth]?s=c[o.healthAnalysis.overallHealth]:typeof((d=o.healthAnalysis)==null?void 0:d.confidence)=="number"&&(s=o.healthAnalysis.confidence<=1?o.healthAnalysis.confidence*100:o.healthAnalysis.confidence),{id:o.id,date:zR(o.timestamp),dateTime:RR(o.timestamp),rawDate:o.timestamp,score:typeof s=="number"?s:null,url:o.url}}).sort((o,s)=>new Date(o.rawDate).getTime()-new Date(s.rawDate).getTime()),a=n.map(o=>({dateTime:o.dateTime,score:o.score})),i=o=>{const{key:s,cx:c,cy:u}=o;return l.jsx("circle",{cx:c,cy:u,r:4,stroke:"#2A7F3E",strokeWidth:2,fill:"#fff"},s)};return l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("h3",{className:"text-base font-semibold text-[#2A7F3E]",children:"Evolución de Salud"}),l.jsx(Y,{size:"sm",variant:"outline",onClick:()=>r(!0),children:"Ampliar"})]}),l.jsx("div",{className:"w-full h-48",children:l.jsx(ah,{width:"100%",height:"100%",children:l.jsxs(Dh,{data:a,margin:{top:10,right:20,left:0,bottom:0},children:[l.jsx(nc,{strokeDasharray:"3 3",vertical:!1,stroke:"#F0F8F5"}),l.jsx(jo,{dataKey:"dateTime",tick:{fontSize:12,fill:"#888"}}),l.jsx(So,{domain:[0,100],tick:{fontSize:12,fill:"#888"},width:32}),l.jsx(rh,{contentStyle:{fontSize:13,borderRadius:8},labelFormatter:o=>"Fecha: ".concat(o),formatter:o=>"".concat(o,"%")}),l.jsx(wo,{type:"monotone",dataKey:"score",stroke:"#2A7F3E",strokeWidth:2,dot:i,activeDot:{r:6},connectNulls:!1})]})})}),l.jsx("div",{className:"mt-4 overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-sm border-separate border-spacing-y-1",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"text-[#666]",children:[l.jsx("th",{className:"text-left font-medium px-2 py-1",children:"Fecha"}),l.jsx("th",{className:"text-left font-medium px-2 py-1",children:"Imagen"}),l.jsx("th",{className:"text-left font-medium px-2 py-1",children:"Salud"})]})}),l.jsx("tbody",{children:n.map(o=>l.jsxs("tr",{className:"bg-[#F9F9F9] hover:bg-[#F0F8F5] transition-colors",children:[l.jsx("td",{className:"px-2 py-1 whitespace-nowrap",children:o.date}),l.jsx("td",{className:"px-2 py-1",children:l.jsx("img",{src:o.url,alt:"miniatura",className:"w-10 h-10 object-cover rounded-md border"})}),l.jsx("td",{className:"px-2 py-1 font-medium text-[#2A7F3E]",children:o.score!==null?"".concat(o.score.toFixed(0),"%"):l.jsx("span",{className:"text-[#bbb]",children:"N/A"})})]},o.id))})]})}),l.jsx(se,{children:t&&l.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 p-2",onClick:()=>r(!1),children:l.jsxs(P.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-2xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-auto p-6 relative",onClick:o=>o.stopPropagation(),children:[l.jsx(Y,{size:"icon-sm",variant:"ghost",className:"absolute top-2 right-2",onClick:()=>r(!1),children:"×"}),l.jsx("h3",{className:"text-lg font-semibold mb-4 text-[#2A7F3E]",children:"Evolución de Salud (Ampliado)"}),l.jsx("div",{className:"w-full h-72 mb-6",children:l.jsx(ah,{width:"100%",height:"100%",children:l.jsxs(Dh,{data:a,margin:{top:10,right:20,left:0,bottom:0},children:[l.jsx(nc,{strokeDasharray:"3 3",vertical:!1,stroke:"#F0F8F5"}),l.jsx(jo,{dataKey:"dateTime",tick:{fontSize:13,fill:"#888"}}),l.jsx(So,{domain:[0,100],tick:{fontSize:13,fill:"#888"},width:36}),l.jsx(rh,{contentStyle:{fontSize:14,borderRadius:8},labelFormatter:o=>"Fecha: ".concat(o),formatter:o=>"".concat(o,"%")}),l.jsx(wo,{type:"monotone",dataKey:"score",stroke:"#2A7F3E",strokeWidth:2,dot:i,activeDot:{r:7},connectNulls:!1})]})})}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-sm border-separate border-spacing-y-1",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"text-[#666]",children:[l.jsx("th",{className:"text-left font-medium px-2 py-1",children:"Fecha"}),l.jsx("th",{className:"text-left font-medium px-2 py-1",children:"Imagen"}),l.jsx("th",{className:"text-left font-medium px-2 py-1",children:"Salud"})]})}),l.jsx("tbody",{children:n.map(o=>l.jsxs("tr",{className:"bg-[#F9F9F9] hover:bg-[#F0F8F5] transition-colors",children:[l.jsx("td",{className:"px-2 py-1 whitespace-nowrap",children:o.date}),l.jsx("td",{className:"px-2 py-1",children:l.jsx("img",{src:o.url,alt:"miniatura",className:"w-12 h-12 object-cover rounded-md border"})}),l.jsx("td",{className:"px-2 py-1 font-medium text-[#2A7F3E]",children:o.score!==null?"".concat(o.score.toFixed(0),"%"):l.jsx("span",{className:"text-[#bbb]",children:"N/A"})})]},o.id))})]})})]})})})]})},FR=({plant:e,onAddPhoto:t})=>{const r=y.useMemo(()=>{if(!e.images||e.images.length===0)return[];const i=[...e.images].sort((d,f)=>new Date(d.timestamp).getTime()-new Date(f.timestamp).getTime()),o=[],s=30*24*60*60*1e3;let c=new Date(i[0].timestamp),u=[];return i.forEach((d,f)=>{const m=new Date(d.timestamp);if(m.getTime()-c.getTime()<=s)u.push(d);else{if(u.length>0){const h=u.map(v=>{const p=v.healthAnalysis;if(!p)return;const x={excellent:95,good:80,fair:60,poor:30};if(p.overallHealth&&x[p.overallHealth])return x[p.overallHealth];if(typeof p.confidence=="number")return p.confidence<=1?p.confidence*100:p.confidence}).filter(v=>v!==void 0),g=h.length>0?h.reduce((v,p)=>v+p,0)/h.length:0;o.push({id:"period-".concat(o.length),images:[...u],startDate:new Date(u[0].timestamp),endDate:new Date(u[u.length-1].timestamp),avgHealthScore:g,trend:o.length>0?g>o[o.length-1].avgHealthScore?"improving":"declining":"stable",photoCount:u.length})}c=m,u=[d]}if(f===i.length-1&&u.length>0){const h=u.map(v=>{const p=v.healthAnalysis;if(!p)return;const x={excellent:95,good:80,fair:60,poor:30};if(p.overallHealth&&x[p.overallHealth])return x[p.overallHealth];if(typeof p.confidence=="number")return p.confidence<=1?p.confidence*100:p.confidence}).filter(v=>v!==void 0),g=h.length>0?h.reduce((v,p)=>v+p,0)/h.length:0;o.push({id:"period-".concat(o.length),images:[...u],startDate:new Date(u[0].timestamp),endDate:new Date(u[u.length-1].timestamp),avgHealthScore:g,trend:o.length>0?g>o[o.length-1].avgHealthScore?"improving":"declining":"stable",photoCount:u.length})}}),o},[e.images]);function n(i){if(i.length<2)return null;const o=i[i.length-1]-i[0];return o>5?{icon:"⬆️",label:"Mejorando",color:"text-green-600 bg-green-50"}:o<-5?{icon:"⬇️",label:"Declive",color:"text-red-600 bg-red-50"}:{icon:"➡️",label:"Estable",color:"text-gray-600 bg-gray-50"}}if(r.length===0)return l.jsxs(Et,{className:"mt-6",children:[l.jsx(zo,{children:l.jsxs(Ic,{className:"flex items-center",children:[l.jsx(Lb,{className:"w-5 h-5 mr-2 text-primary"}),"Evolución de tu Planta"]})}),l.jsx(xr,{children:l.jsxs("div",{className:"text-center py-8",children:[l.jsx(Zt,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"¡Comienza a documentar la evolución!"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:"Agrega más fotos a lo largo del tiempo para ver cómo progresa tu planta."}),l.jsxs(Y,{onClick:t,className:"gap-2",children:[l.jsx(pc,{className:"w-4 h-4"}),"Agregar Primera Foto"]})]})})]});const a=r.map(i=>{var o;return(o=i.avgHealthScore)!=null?o:0});return n(a),l.jsx(Et,{className:"mt-6",children:l.jsx(xr,{className:"mt-4 space-y-6",children:l.jsx(LR,{images:e.images||[]})})})},BR=({isOpen:e,onClose:t,onPhotoAdded:r,plantName:n})=>{const[a,i]=y.useState("choose"),[o,s]=y.useState(null),[c,u]=y.useState(""),[d,f]=y.useState(null),[m,h]=y.useState(!1),g=y.useRef(null),{addToast:v}=Qn(),p=y.useCallback(()=>{i("choose"),s(null),u(""),f(null),h(!1)},[]),x=y.useCallback(()=>{p(),t()},[p,t]),b=y.useCallback(B=>{const Z=new FileReader;Z.onload=z=>{var q;const U=(q=z.target)==null?void 0:q.result;s(U),i("preview")},Z.readAsDataURL(B)},[]),w=y.useCallback(()=>{g.current&&g.current.click()},[]),j=y.useCallback(()=>{w()},[w]),S=y.useCallback(B=>{var z;const Z=(z=B.target.files)==null?void 0:z[0];if(Z){if(!Z.type.startsWith("image/")){f("Por favor selecciona un archivo de imagen válido.");return}if(Z.size>5*1024*1024){f("La imagen es demasiado grande. Máximo 5MB.");return}b(Z)}},[b]),N=y.useCallback(async()=>{if(o)try{i("uploading"),h(!0),await r(o,c.trim()||void 0),i("success"),h(!1),v({type:"success",title:"Foto agregada exitosamente",message:"Nueva imagen añadida a ".concat(n)}),setTimeout(()=>{x()},1500)}catch(B){f(B instanceof Error?B.message:"Error al subir la imagen"),i("error"),h(!1)}},[o,c,r,n,v,x]),k=()=>(console.log("[AddPhotoModal] Renderizando botón Tomar Foto:",l.jsx(Zt,{className:"w-6 h-6"}),"Tomar Foto"),console.log("[AddPhotoModal] Renderizando botón Elegir de Galería:",l.jsx(ll,{className:"w-6 h-6"}),"Elegir de Galería"),l.jsxs(P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"text-center space-y-6",children:[l.jsxs("div",{children:[l.jsx(Zt,{className:"w-16 h-16 text-primary mx-auto mb-4"}),l.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Agregar Nueva Foto"}),l.jsxs("p",{className:"text-muted-foreground",children:["Documenta el progreso de ",l.jsx("span",{className:"font-medium",children:n})]})]}),l.jsxs("div",{className:"grid gap-4",children:[l.jsxs(Y,{variant:"primary",size:"lg",onClick:j,className:"h-16 gap-3 text-primary-foreground",children:[l.jsx(Zt,{className:"w-6 h-6"}),"Tomar Foto"]}),l.jsxs(Y,{variant:"secondary",size:"lg",onClick:w,className:"h-16 gap-3 text-primary-foreground",children:[l.jsx(ll,{className:"w-6 h-6"}),"Elegir de Galería"]})]}),l.jsx("input",{ref:g,type:"file",accept:"image/*",onChange:S,className:"hidden","data-testid":"file-input"})]})),A=()=>l.jsxs(P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Vista Previa"}),l.jsxs("p",{className:"text-muted-foreground",children:["Revisa la imagen antes de agregar a ",n]})]}),o&&l.jsxs("div",{className:"space-y-4 pb-8 sm:pb-0",children:[l.jsx("div",{className:"aspect-video max-h-80 mx-auto rounded-lg overflow-hidden border",children:l.jsx("img",{src:o,alt:"Vista previa",className:"w-full h-full object-cover"})}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"block text-sm font-medium",children:"Nota (opcional)"}),l.jsx("textarea",{value:c,onChange:B=>u(B.target.value),placeholder:"Agrega una nota sobre esta foto...",className:"w-full p-3 border border-neutral-200 rounded-lg resize-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:3,maxLength:200}),l.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[c.length,"/200"]})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx(Y,{variant:"secondary",onClick:()=>i("choose"),className:"flex-1",children:"Cambiar Imagen"}),l.jsxs(Y,{variant:"primary",onClick:N,className:"flex-1 gap-2",children:[l.jsx(Ve,{className:"w-4 h-4"}),"Analizar y Guardar"]})]})]})]}),C=()=>l.jsxs(P.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center space-y-6 py-8",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsx(ln,{className:"w-16 h-16 text-primary mx-auto animate-spin"}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-semibold mb-2",children:m?"Analizando imagen...":"Subiendo foto..."}),l.jsx("p",{className:"text-muted-foreground",children:m?"La IA está evaluando la salud de tu planta":"Guardando la nueva imagen en tu jardín"})]})]}),l.jsx("div",{className:"w-full bg-neutral-200 rounded-full h-2",children:l.jsx("div",{className:"bg-primary h-2 rounded-full animate-pulse",style:{width:"70%"}})})]}),D=()=>l.jsxs(P.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"text-center space-y-6 py-8",children:[l.jsx(hr,{className:"w-16 h-16 text-success-500 mx-auto"}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-semibold mb-2",children:"¡Foto agregada!"}),l.jsxs("p",{className:"text-muted-foreground",children:["La nueva imagen ha sido añadida al progreso de ",n]})]})]}),T=()=>l.jsxs(P.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"text-center space-y-6 py-8",children:[l.jsx(It,{className:"w-16 h-16 text-error-500 mx-auto"}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Error al subir"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:d||"Hubo un problema al procesar la imagen"}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx(Y,{variant:"secondary",onClick:()=>i("choose"),children:"Intentar de Nuevo"}),l.jsx(Y,{variant:"primary",onClick:x,children:"Cerrar"})]})]})]}),O=()=>{switch(a){case"choose":return k();case"preview":return A();case"uploading":return C();case"success":return D();case"error":return T();default:return k()}};return l.jsx(se,{children:e&&l.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",onClick:B=>{B.target===B.currentTarget&&a!=="uploading"&&x()},children:l.jsx(P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"w-full max-w-md",children:l.jsx(Et,{children:l.jsxs(xr,{className:"p-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(gc,{className:"w-5 h-5 text-primary"}),l.jsx("span",{className:"font-medium text-sm text-muted-foreground",children:"NUEVA FOTO"})]}),a!=="uploading"&&l.jsx(Y,{variant:"ghost",size:"icon-sm",onClick:x,children:l.jsx(Sr,{className:"w-4 h-4"})})]}),O()]})})})})})},UR=({plant:e})=>{var g,v,p;const{careProfile:t,healthScore:r,lastWatered:n,dateAdded:a}=e,i=(v=(g=e.images)==null?void 0:g[0])==null?void 0:v.healthAnalysis,o=n?Math.floor((Date.now()-new Date(n).getTime())/(1e3*60*60*24)):null,s=Math.floor((Date.now()-new Date(a).getTime())/(1e3*60*60*24)),u=r>=85?{text:"Excelente",color:"text-green-500",icon:hr,emoji:"🌟"}:r>=70?{text:"Buena",color:"text-green-400",icon:hr,emoji:"✅"}:r>=50?{text:"Regular",color:"text-yellow-500",icon:hc,emoji:"⚠️"}:{text:"Necesita atención",color:"text-red-500",icon:Kt,emoji:"🆘"},f=(()=>{if(!o||!(t!=null&&t.wateringFrequency))return{text:"Sin datos",color:"text-gray-500",urgent:!1};const x=o>=t.wateringFrequency;return o>t.wateringFrequency+2?{text:"Riego urgente",color:"text-red-500",urgent:!0}:x?{text:"Necesita riego",color:"text-yellow-500",urgent:!0}:{text:"Bien hidratada",color:"text-green-500",urgent:!1}})(),m={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{staggerChildren:.1}}},h={hidden:{opacity:0,y:10},visible:{opacity:1,y:0}};return l.jsx(P.div,{variants:m,initial:"hidden",animate:"visible",children:l.jsxs(Et,{variant:"glass",className:"content-spacing-sm element-spacing",children:[e.description&&l.jsx("div",{className:"mb-4",children:l.jsx("p",{className:"text-base text-neutral-700 dark:text-neutral-200 leading-relaxed",children:e.description})}),l.jsx(P.div,{variants:h,className:"w-full mb-3",children:l.jsxs("div",{className:"w-full flex items-center justify-between bg-green-100 dark:bg-green-900/30 rounded-lg px-4 py-2 mb-2",children:[l.jsxs("span",{className:"flex items-center gap-2 text-green-700 text-base font-bold",children:[l.jsx(hr,{className:"w-5 h-5"}),r,"% ",u.text]}),l.jsxs("span",{className:"flex items-center gap-1 text-contrast-soft text-sm align-baseline",children:[l.jsx(Fi,{className:"w-4 h-4"}),"Día ",s]})]})}),l.jsxs(P.div,{variants:h,className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:ue("flex items-center space-x-3 p-3 rounded-lg",f.urgent?"bg-yellow-50 dark:bg-yellow-900/20":"bg-green-50 dark:bg-green-900/20"),children:[l.jsx(Po,{className:ue("w-5 h-5",f.color)}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-contrast-soft",children:"Riego"}),l.jsx("p",{className:ue("font-semibold text-sm",f.color),children:f.text}),o!==null&&l.jsxs("p",{className:"text-xs text-contrast-soft",children:["Hace ",o," día",o!==1?"s":""]})]})]}),l.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg bg-blue-50 dark:bg-blue-900/20",children:[l.jsx(Lr,{className:"w-5 h-5 text-blue-500"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-contrast-soft",children:"Luz"}),l.jsx("p",{className:"font-semibold text-sm text-blue-600 dark:text-blue-400",children:(t==null?void 0:t.sunlightRequirement)||"No especificado"}),e.lightRequirements&&l.jsx("p",{className:"text-xs text-contrast-soft capitalize",children:e.lightRequirements.replace("_"," ")})]})]}),e.plantEnvironment&&l.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg bg-purple-50 dark:bg-purple-900/20",children:[l.jsx(bp,{className:"w-5 h-5 text-purple-500"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-contrast-soft",children:"Ambiente"}),l.jsx("p",{className:"font-semibold text-sm text-purple-600 dark:text-purple-400 capitalize",children:e.plantEnvironment==="ambos"?"Interior/Exterior":e.plantEnvironment})]})]}),(t==null?void 0:t.temperatureRange)&&l.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg bg-orange-50 dark:bg-orange-900/20",children:[l.jsx(wp,{className:"w-5 h-5 text-orange-500"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-contrast-soft",children:"Temperatura"}),l.jsxs("p",{className:"font-semibold text-sm text-orange-600 dark:text-orange-400",children:[t.temperatureRange.min,"°-",t.temperatureRange.max,"°C"]})]})]})]}),(i==null?void 0:i.issues)&&i.issues.length>0&&l.jsx(P.div,{variants:h,className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsx(Kt,{className:"w-5 h-5 text-red-500 mt-0.5"}),l.jsxs("div",{children:[l.jsxs("p",{className:"font-semibold text-red-700 dark:text-red-300 text-sm mb-1",children:[i.issues.length," problema",i.issues.length!==1?"s":""," detectado",i.issues.length!==1?"s":""]}),l.jsxs("p",{className:"text-xs text-red-600 dark:text-red-400",children:[i.issues[0].description,i.issues.length>1&&" y ".concat(i.issues.length-1," más...")]})]})]})}),l.jsx("br",{}),((p=e.personality)==null?void 0:p.communicationStyle)&&l.jsx(P.div,{variants:h,className:"p-4 bg-gradient-to-r from-green-50 to-blue-50 dark:from-green-900/20 dark:to-blue-900/20 rounded-lg border border-green-200 dark:border-green-800",children:l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsx(Ca,{className:"w-5 h-5 text-green-500 mt-0.5"}),l.jsxs("div",{children:[l.jsxs("p",{className:"font-semibold text-green-700 dark:text-green-300 text-sm mb-1",children:["🤖 Personalidad: ",e.personality.communicationStyle]}),e.personality.catchphrases&&e.personality.catchphrases.length>0&&l.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400 italic",children:['"',e.personality.catchphrases[0],'"']})]})]})})]})})},WR=({plant:e,onAddPhoto:t})=>{var c,u,d;const[r,n]=y.useState("evolution"),a=(u=(c=e.images)==null?void 0:c[0])==null?void 0:u.healthAnalysis,i=(a==null?void 0:a.issues)&&a.issues.length>0,o=e.images&&e.images.length>1,s=[{id:"evolution",title:"Evolución y Progreso",icon:l.jsx(Fb,{className:"w-5 h-5"}),badge:o?"".concat(((d=e.images)==null?void 0:d.length)||0," fotos"):"Nueva",component:l.jsx(FR,{plant:e,onAddPhoto:t}),priority:1},{id:"health",title:"Análisis de Salud",icon:l.jsx(Bb,{className:"w-5 h-5"}),badge:i?"Atención":"Saludable",component:l.jsx(zE,{analysis:a}),priority:i?1:3},{id:"care",title:"Perfil de Cuidados",icon:l.jsx(Ub,{className:"w-5 h-5"}),badge:e.careProfile?"Completo":"Pendiente",component:l.jsx(ME,{plant:e}),priority:e.careProfile?2:1},...e.funFacts&&e.funFacts.length>0?[{id:"funfacts",title:"Datos Curiosos",icon:l.jsx(Ve,{className:"w-5 h-5"}),component:l.jsx(DE,{species:e.species,funFacts:e.funFacts}),priority:4}]:[]].filter(f=>f.id==="health"?!!a:!0).sort((f,m)=>f.priority-m.priority);return l.jsx("div",{className:"flex flex-col gap-y-1",children:s.map(f=>{const m=r===f.id,h=f.id==="health";return f.id==="care"?l.jsxs(Et,{variant:"default",radius:"default",className:ue("border border-[#E5E5E5] rounded-[8px] transition-all duration-200","bg-white","p-0 mb-4"),children:[l.jsxs(P.button,{onClick:()=>n(m?"":f.id),className:ue("w-full flex items-center justify-between px-4 py-3 min-h-12 text-left focus:outline-none","bg-white","rounded-t-[8px]"),style:{position:m?"sticky":"static",top:0,zIndex:2},whileTap:{scale:.98},children:[l.jsxs("div",{className:"flex items-center min-w-0 flex-1",children:[l.jsx("span",{className:"flex items-center justify-center mr-2",style:{width:20,height:20},children:f.icon}),l.jsx("span",{className:"font-semibold text-[16px] truncate text-neutral-900 dark:text-neutral-100",children:f.title})]}),l.jsx(P.div,{animate:{rotate:m?180:0},transition:{duration:.2},className:"flex-shrink-0 ml-2 align-middle",style:{display:"flex",alignItems:"center",marginRight:16,transition:"transform .2s"},children:l.jsx(Nd,{className:"w-6 h-6 text-neutral-600 dark:text-neutral-400"})})]}),l.jsx(se,{children:m&&l.jsx(P.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:l.jsxs("div",{className:"px-4 pb-3 pt-1 max-h-[60vh] overflow-y-auto",style:{lineHeight:"1.4"},children:[f.component,l.jsx("div",{style:{paddingBottom:8}})]})})})]},f.id):l.jsxs(Et,{variant:"default",radius:"default",className:ue("border border-[#E0E0E0] rounded-[8px] transition-all duration-200",m&&h?"bg-[#FAFAFA]":"bg-white","p-0 mb-4"),children:[l.jsxs(P.button,{onClick:()=>n(m?"":f.id),className:ue("w-full flex items-center justify-between px-4 py-3 min-h-12 text-left focus:outline-none",m&&h?"bg-[#FAFAFA]":"bg-white","rounded-t-[8px]"),style:{position:m?"sticky":"static",top:0,zIndex:2},whileTap:{scale:.98},children:[l.jsxs("div",{className:"flex items-center min-w-0 flex-1",children:[l.jsx("span",{className:"flex items-center justify-center mr-2",style:{width:20,height:20},children:f.icon}),l.jsx("span",{className:"font-semibold text-[16px] truncate text-neutral-900 dark:text-neutral-100",children:f.title})]}),h&&l.jsx("span",{className:"ml-2 px-[6px] py-[2px] text-xs font-medium rounded-[4px] bg-[#E0F2E9] text-[#2A7F3E] align-middle",style:{lineHeight:"1.2"},children:f.badge}),l.jsx(P.div,{animate:{rotate:m?180:0},transition:{duration:.2},className:"flex-shrink-0 ml-2 align-middle",style:{display:"flex",alignItems:"center",marginRight:16},children:l.jsx(Nd,{className:"w-6 h-6 text-neutral-600 dark:text-neutral-400"})})]}),l.jsx(se,{children:m&&l.jsx(P.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:l.jsxs("div",{className:"px-4 pb-3 pt-1 max-h-[60vh] overflow-y-auto",style:{lineHeight:"1.4"},children:[f.component,h&&l.jsx("div",{style:{paddingBottom:8}})]})})})]},f.id)})})},$h=()=>l.jsxs("div",{className:"relative",children:[l.jsxs("div",{className:"relative h-96 w-full overflow-hidden bg-gradient-to-br from-muted/50 to-muted",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background/80 via-background/20 to-transparent"}),l.jsx("div",{className:"absolute top-0 left-0 right-0 p-4 pt-safe-top",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx(X,{className:"h-10 w-10 rounded-full"}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(X,{className:"h-10 w-10 rounded-full"}),l.jsx(X,{className:"h-10 w-10 rounded-full"})]})]})}),l.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-6 pb-safe-bottom",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{className:"h-8 w-64"}),l.jsx(X,{className:"h-6 w-48"})]}),l.jsxs("div",{className:"flex flex-wrap gap-3",children:[l.jsx(X,{className:"h-8 w-24 rounded-full"}),l.jsx(X,{className:"h-8 w-32 rounded-full"}),l.jsx(X,{className:"h-8 w-20 rounded-full"})]})]})})]}),l.jsxs("div",{className:"p-4 space-y-6 pb-20",children:[l.jsxs("div",{className:"bg-background p-6 rounded-2xl shadow-lg border border-border/50",children:[l.jsxs("div",{className:"mb-6 flex items-center",children:[l.jsx(X,{className:"h-12 w-12 rounded-full mr-4"}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{className:"h-6 w-48"}),l.jsx(X,{className:"h-4 w-64"})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx(X,{className:"h-4 w-full"}),l.jsx(X,{className:"h-4 w-5/6"}),l.jsx(X,{className:"h-4 w-4/5"}),l.jsx(X,{className:"h-4 w-3/4"})]}),l.jsxs("div",{className:"mt-8 space-y-4",children:[l.jsxs("div",{className:"flex items-center mb-4",children:[l.jsx(X,{className:"h-12 w-12 rounded-full mr-4"}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(X,{className:"h-6 w-32"}),l.jsx(X,{className:"h-4 w-56"})]})]}),[1,2,3].map(e=>l.jsxs("div",{className:"flex items-start bg-muted/20 rounded-xl p-4",children:[l.jsx(X,{className:"h-5 w-5 rounded-full mr-4 mt-1"}),l.jsx(X,{className:"h-4 w-full"})]},e))]})]}),l.jsxs("div",{className:"bg-background p-6 rounded-2xl shadow-lg border border-border/50",children:[l.jsxs("div",{className:"mb-4 flex items-center",children:[l.jsx(X,{className:"h-6 w-6 mr-3"}),l.jsx(X,{className:"h-6 w-48"})]}),l.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-6",children:[l.jsx(X,{className:"h-12 w-12 mx-auto mb-3"}),l.jsx(X,{className:"h-6 w-32 mx-auto mb-2"}),l.jsx(X,{className:"h-4 w-48 mx-auto"})]})]}),l.jsxs("div",{className:"bg-background p-6 rounded-2xl shadow-lg border border-border/50",children:[l.jsxs("div",{className:"mb-4 flex items-center",children:[l.jsx(X,{className:"h-6 w-6 mr-3"}),l.jsx(X,{className:"h-6 w-40"})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3,4,5,6].map(e=>l.jsxs("div",{className:"bg-muted/50 rounded-lg p-4",children:[l.jsx(X,{className:"h-8 w-8 mb-2"}),l.jsx(X,{className:"h-4 w-16 mb-1"}),l.jsx(X,{className:"h-5 w-24"})]},e))})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(X,{className:"h-5 w-5 mr-2"}),l.jsx(X,{className:"h-6 w-32"})]}),l.jsx(X,{className:"h-4 w-16"})]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:[1,2,3,4,5,6].map(e=>l.jsx(X,{className:"aspect-square rounded-xl"},e))})]})]}),l.jsxs("div",{className:"fixed bottom-4 right-4 z-40 flex flex-col-reverse gap-3",children:[[1,2,3].map(e=>l.jsx(X,{className:"h-14 w-14 rounded-full"},e)),l.jsx(X,{className:"h-16 w-16 rounded-full"})]})]}),HR=()=>{const{plantId:e}=fc(),t=ot(),{plant:r,loading:n,error:a}=Dc(e),{addPlantImage:i}=EE(),[o,s]=y.useState(!1),c=async(u,d)=>{if(!e)throw new Error("Plant ID is required");return new Promise((f,m)=>{i({plantId:e,imageDataUrl:u,note:d},{onSuccess:()=>f(),onError:h=>m(h)})})};return n?l.jsx($h,{}):a?l.jsx("main",{className:"flex flex-1 flex-col items-center justify-center p-4 text-center h-screen",children:l.jsxs(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[l.jsx(It,{className:"w-16 h-16 text-destructive mx-auto"}),l.jsx("h1",{className:"text-2xl font-bold text-destructive",children:"Ocurrió un Error"}),l.jsx("p",{className:"text-muted-foreground max-w-md",children:a}),l.jsx(Y,{onClick:()=>window.location.reload(),className:"mt-4",children:"Intentar de nuevo"})]})}):r?l.jsx(y.Suspense,{fallback:l.jsx($h,{}),children:l.jsxs(P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[l.jsx(IE,{plant:r}),l.jsxs("main",{className:"p-3 sm:p-4 space-y-3 sm:space-y-4",style:{paddingBottom:"calc(88px + env(safe-area-inset-bottom))"},children:[l.jsx(P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1,duration:.2},children:l.jsx(UR,{plant:r})}),l.jsx(P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.15,duration:.2},children:l.jsx(WR,{plant:r,onAddPhoto:()=>s(!0)})}),l.jsx(P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2,duration:.2},children:l.jsx(_E,{images:r.images})})]}),l.jsxs(P.div,{className:"fixed bottom-24 right-4 z-40 flex flex-col-reverse gap-3",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.25,duration:.2},children:[l.jsxs(P.button,{onClick:()=>s(!0),className:"bg-primary hover:bg-primary/90 text-primary-foreground p-2.5 sm:p-3 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 group flex items-center",whileHover:{scale:1.1},whileTap:{scale:.95},title:"Agregar nueva foto",children:[l.jsx(Zt,{className:"w-4 h-4 sm:w-5 sm:h-5"}),l.jsx("span",{className:"ml-2 text-xs font-medium block sm:hidden",children:"Agregar foto"}),l.jsx("span",{className:"absolute right-full mr-3 top-1/2 -translate-y-1/2 tooltip-contrast text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap shadow-lg hidden sm:block",children:"Agregar foto"})]}),l.jsxs(P.button,{onClick:()=>t(ze.toPlantChat(r.id)),className:"bg-blue-500 hover:bg-blue-600 text-white p-2.5 sm:p-3 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 group flex items-center",whileHover:{scale:1.1},whileTap:{scale:.95},title:"Chat con la planta",children:[l.jsx(Ka,{className:"w-4 h-4 sm:w-5 sm:h-5"}),l.jsx("span",{className:"ml-2 text-xs font-medium block sm:hidden",children:"Chat"}),l.jsx("span",{className:"absolute right-full mr-3 top-1/2 -translate-y-1/2 tooltip-contrast text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap shadow-lg hidden sm:block",children:"Chat"})]})]}),l.jsx(BR,{isOpen:o,onClose:()=>s(!1),onPhotoAdded:c,plantName:r.nickname||r.name})]})}):l.jsx("main",{className:"flex flex-1 flex-col items-center justify-center p-4 text-center h-screen",children:l.jsxs(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[l.jsx(It,{className:"w-16 h-16 text-muted-foreground mx-auto"}),l.jsx("h1",{className:"text-2xl font-bold",children:"Planta no encontrada"}),l.jsx("p",{className:"text-muted-foreground max-w-md",children:"No se pudo encontrar la información de la planta solicitada."}),l.jsx(Y,{onClick:()=>t(ze.toDashboard()),className:"mt-4",children:"Volver al inicio"})]})})},qR=({videoRef:e,canvasRef:t})=>{const[r,n]=y.useState(!1),[a,i]=y.useState(null),[o,s]=y.useState("environment"),[c,u]=y.useState(null),d=y.useRef(null),f=y.useCallback(async()=>{try{d.current&&d.current.getTracks().forEach(x=>x.stop()),u(null);const p=await navigator.mediaDevices.getUserMedia({video:{facingMode:o,width:{ideal:1920},height:{ideal:1080},aspectRatio:16/9}});e.current&&(e.current.srcObject=p,d.current=p)}catch(p){console.error("Error accessing camera:",p),p instanceof Error?p.name==="NotAllowedError"||p.message.includes("Permission dismissed")?u("Permiso de cámara denegado. Por favor, actívalo en los ajustes de tu navegador."):u("No se pudo acceder a la cámara. Revisa los permisos y el dispositivo."):u("Ocurrió un error inesperado al acceder a la cámara.")}},[o,e]);y.useEffect(()=>(f(),()=>{d.current&&d.current.getTracks().forEach(p=>p.stop())}),[f]);const m=y.useCallback(()=>{if(!e.current||!t.current)return;const p=e.current,x=t.current,b=x.getContext("2d");if(!b)return;x.width=p.videoWidth,x.height=p.videoHeight,b.drawImage(p,0,0,p.videoWidth,p.videoHeight);const w=x.toDataURL("image/jpeg",.9);i(w),n(!0),d.current&&d.current.getTracks().forEach(j=>j.stop()),"vibrate"in navigator&&navigator.vibrate(50)},[e,t]),h=y.useCallback(()=>{i(null),n(!1),f()},[f]);return{isCapturing:r,capturedImage:a,cameraError:c,captureImage:m,retakePhoto:h,switchCamera:()=>{s(p=>p==="user"?"environment":"user")},startCamera:f,selectFromGallery:p=>{if(p&&p.type.startsWith("image/")){const x=new FileReader;x.onload=b=>{var j;const w=(j=b.target)==null?void 0:j.result;i(w),n(!0),d.current&&d.current.getTracks().forEach(S=>S.stop())},x.readAsDataURL(p)}}}},ZR=({error:e,onRetry:t})=>{const r=ot();return l.jsx("div",{className:"absolute inset-0 bg-black flex items-center justify-center p-6",children:l.jsx("div",{className:"bg-gray-900 rounded-2xl p-6 max-w-sm w-full mx-4",children:l.jsxs("div",{className:"flex flex-col items-center text-center",children:[l.jsx("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mb-4",children:l.jsx(It,{size:32,className:"text-red-400"})}),l.jsx("h3",{className:"text-white text-lg font-semibold mb-2",children:"Camera Access Required"}),l.jsx("p",{className:"text-gray-300 text-sm mb-6 leading-relaxed",children:e}),l.jsxs("div",{className:"space-y-3 w-full",children:[l.jsxs(Y,{onClick:t,children:[l.jsx(Br,{size:18,className:"mr-2"}),l.jsx("span",{children:"Try Again"})]}),l.jsx(Y,{onClick:()=>r(ze.toDashboard()),variant:"secondary",children:"Go Back"})]}),l.jsx("div",{className:"mt-4 p-3 bg-gray-800 rounded-lg",children:l.jsxs("p",{className:"text-gray-400 text-xs",children:[l.jsx("strong",{children:"How to enable camera:"}),l.jsx("br",{}),"1. Click the camera icon in your browser's address bar",l.jsx("br",{}),'2. Select "Allow" for camera access',l.jsx("br",{}),'3. Refresh the page or tap "Try Again"']})})]})})})},KR=({image:e,isAnalyzing:t,onRetake:r,onAnalyze:n})=>l.jsxs(l.Fragment,{children:[l.jsx(P.img,{src:e,alt:"Captured plant",className:"absolute inset-0 w-full h-full object-cover z-10",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}),l.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-8 safe-area-bottom z-20",children:[l.jsxs("div",{className:"flex items-center justify-center space-x-6",children:[l.jsx(Y,{onClick:r,variant:"secondary",disabled:t,children:"Retake"}),l.jsx(Y,{onClick:n,disabled:t,children:t?l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),l.jsx("span",{children:"Analyzing..."})]}):"Add Plant"})]}),t&&l.jsx("p",{className:"text-center text-white mt-4 text-sm",children:"AI is identifying your plant and creating a care profile..."})]})]}),GR=({videoRef:e,canvasRef:t,flashEnabled:r,onCapture:n,onSwitchCamera:a,onToggleFlash:i,onSelectFromGallery:o})=>{const s=ot();return l.jsxs(l.Fragment,{children:[l.jsx(P.video,{ref:e,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5}}),l.jsx("canvas",{ref:t,className:"hidden"}),l.jsx("div",{className:"absolute top-0 left-0 right-0 p-4 safe-area-top z-20",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx(Y,{onClick:()=>s(ze.toDashboard()),variant:"ghost",size:"icon",className:"rounded-full bg-black/50",children:l.jsx(Sr,{size:20})}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx(Y,{onClick:i,variant:"ghost",size:"icon",className:"rounded-full ".concat(r?"bg-yellow-500 text-black hover:bg-yellow-600":"bg-black/50"),children:r?l.jsx(Ve,{size:20}):l.jsx(Wb,{size:20})}),l.jsx(Y,{onClick:a,variant:"ghost",size:"icon",className:"rounded-full bg-black/50",children:l.jsx(Hb,{size:20})})]})]})}),l.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-8 safe-area-bottom z-20",children:[l.jsxs("div",{className:"flex items-center justify-center space-x-8",children:[l.jsx(Y,{onClick:o,size:"icon",variant:"ghost",className:"w-14 h-14 rounded-full bg-black/50",children:l.jsx(gc,{size:24})}),l.jsx(P.button,{onClick:n,className:"w-20 h-20 rounded-full bg-white border-4 border-gray-300 flex items-center justify-center ios-button",whileHover:{scale:1.05},whileTap:{scale:.95},children:l.jsx("div",{className:"w-16 h-16 rounded-full bg-white flex items-center justify-center",children:l.jsx(Zt,{size:24,className:"text-gray-600"})})}),l.jsx("div",{className:"w-14 h-14"})]}),l.jsx("p",{className:"text-center text-white mt-4 text-sm",children:"Position your plant in the frame and tap to capture, or select from gallery"})]}),l.jsx("div",{className:"absolute inset-0 pointer-events-none flex items-center justify-center",children:l.jsx("div",{className:"w-64 h-64 border-2 border-white/50 rounded-2xl"})})]})},VR=()=>{const e=ot(),{createPlant:t,isCreatingPlant:r}=$o(),n=y.useRef(null),a=y.useRef(null),{isCapturing:i,capturedImage:o,cameraError:s,captureImage:c,retakePhoto:u,switchCamera:d,startCamera:f,selectFromGallery:m}=qR({videoRef:n,canvasRef:a}),[h,g]=y.useState(!1),v=y.useRef(null),p=()=>{if(!o)return;const w="Interior",j=new Promise((S,N)=>{t({imageDataUrl:o,location:w},{onSuccess:k=>{k!=null&&k.id?e(ze.toPlantDetail(k.id)):e(ze.toDashboard()),S(k)},onError:k=>{N(k)}})});tg.promise(j,{loading:"Analizando imagen con IA...",success:S=>'¡Planta "'.concat(S.name,'" creada con éxito!'),error:S=>"Error: ".concat(S.message)})},x=()=>g(w=>!w),b=w=>{var S;const j=(S=w.target.files)==null?void 0:S[0];j&&m(j)};return l.jsxs("div",{className:"fixed inset-0 bg-black z-50",children:[l.jsx("input",{ref:v,type:"file",accept:"image/*",onChange:b,className:"hidden",id:"gallery-input"}),l.jsx(se,{mode:"wait",children:s?l.jsx(ZR,{error:s,onRetry:f},"error"):i?l.jsx(KR,{image:o,isAnalyzing:r,onRetake:u,onAnalyze:p},"preview"):l.jsx(GR,{videoRef:n,canvasRef:a,flashEnabled:h,onCapture:c,onSwitchCamera:d,onToggleFlash:x,onSelectFromGallery:()=>{var w;return(w=v.current)==null?void 0:w.click()}},"capture")})]})},YR=()=>{const{plantId:e}=fc(),t=ot(),{user:r}=or(),n=gr(u=>u.getPlantById(e||"")),a=gr(u=>u.addChatMessage),i=gr(u=>u.isLoading),o=y.useMemo(()=>{if(!n||!n.chatHistory||n.chatHistory.length===0)return!1;const u=n.chatHistory[n.chatHistory.length-1];return i&&u.sender==="user"},[n,i]);return{plant:n,isTyping:o,handleSendMessage:async u=>{if(!(!e||!r||!u.trim()))try{await a(e,u.trim(),r.id)}catch(d){console.error("Failed to send message:",d)}},handleGoBack:()=>{t("/plant/".concat(e))},currentUser:r}},XR=({plant:e})=>{const t=ot(),r=()=>{const n=e.healthScore/100,a=e.lastWatered?new Date(e.lastWatered).getTime():0,i=a?Math.max(0,1-(Date.now()-a)/(e.careProfile.wateringFrequency*24*60*60*1e3)):0,o=n*.6+i*.4;return o>.8?"radiante":o>.6?"feliz":o>.4?"estable":"necesitada de atención"};return l.jsx("header",{className:"sticky top-0 z-10 bg-background/80 backdrop-blur-sm border-b border-muted",children:l.jsxs("div",{className:"flex items-center gap-2 p-4 pt-safe-top",children:[l.jsx("button",{onClick:()=>t(ze.toPlantDetail(e.id)),className:"btn btn-ghost btn-circle",children:l.jsx(vc,{size:20})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h1",{className:"font-bold text-foreground truncate",children:e.nickname||e.name}),l.jsxs("p",{className:"text-xs text-neutral-600 dark:text-neutral-400 capitalize",children:["Se siente ",r()]})]}),l.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-green-600 dark:text-green-400",children:[l.jsx(mp,{className:"w-4 h-4"}),l.jsxs("span",{children:[e.healthScore,"%"]})]})]})})};var QR={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 día",other:"{{count}} días"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 año",other:"alrededor de {{count}} años"},xYears:{one:"1 año",other:"{{count}} años"},overXYears:{one:"más de 1 año",other:"más de {{count}} años"},almostXYears:{one:"casi 1 año",other:"casi {{count}} años"}},JR=function(t,r,n){var a,i=QR[t];return typeof i=="string"?a=i:r===1?a=i.one:a=i.other.replace("{{count}}",r.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"en "+a:"hace "+a:a},e3={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},t3={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},r3={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},n3={date:Fn({formats:e3,defaultWidth:"full"}),time:Fn({formats:t3,defaultWidth:"full"}),dateTime:Fn({formats:r3,defaultWidth:"full"})},a3={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'mañana a la' p",nextWeek:"eeee 'a la' p",other:"P"},i3={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'mañana a las' p",nextWeek:"eeee 'a las' p",other:"P"},o3=function(t,r,n,a){return r.getUTCHours()!==1?i3[t]:a3[t]},s3={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","después de cristo"]},l3={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},c3={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},u3={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","sá"],abbreviated:["dom","lun","mar","mié","jue","vie","sáb"],wide:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},d3={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"}},f3={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},m3=function(t,r){var n=Number(t);return n+"º"},h3={ordinalNumber:m3,era:Qt({values:s3,defaultWidth:"wide"}),quarter:Qt({values:l3,defaultWidth:"wide",argumentCallback:function(t){return Number(t)-1}}),month:Qt({values:c3,defaultWidth:"wide"}),day:Qt({values:u3,defaultWidth:"wide"}),dayPeriod:Qt({values:d3,defaultWidth:"wide",formattingValues:f3,defaultFormattingWidth:"wide"})},p3=/^(\d+)(º)?/i,g3=/\d+/i,v3={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[uú]n|despu[eé]s de cristo|era com[uú]n)/i},y3={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[uú]n)/i,/^(despu[eé]s de cristo|era com[uú]n)/i]},x3={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},b3={any:[/1/i,/2/i,/3/i,/4/i]},w3={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},j3={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},S3={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[áa])/i,abbreviated:/^(dom|lun|mar|mi[ée]|jue|vie|s[áa]b)/i,wide:/^(domingo|lunes|martes|mi[ée]rcoles|jueves|viernes|s[áa]bado)/i},N3={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},k3={narrow:/^(a|p|mn|md|(de la|a las) (mañana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (mañana|tarde|noche))/i},P3={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/mañana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},E3={ordinalNumber:wg({matchPattern:p3,parsePattern:g3,valueCallback:function(t){return parseInt(t,10)}}),era:Jt({matchPatterns:v3,defaultMatchWidth:"wide",parsePatterns:y3,defaultParseWidth:"any"}),quarter:Jt({matchPatterns:x3,defaultMatchWidth:"wide",parsePatterns:b3,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:Jt({matchPatterns:w3,defaultMatchWidth:"wide",parsePatterns:j3,defaultParseWidth:"any"}),day:Jt({matchPatterns:S3,defaultMatchWidth:"wide",parsePatterns:N3,defaultParseWidth:"any"}),dayPeriod:Jt({matchPatterns:k3,defaultMatchWidth:"any",parsePatterns:P3,defaultParseWidth:"any"})},eb={code:"es",formatDistance:JR,formatLong:n3,formatRelative:o3,localize:h3,match:E3,options:{weekStartsOn:1,firstWeekContainsDate:1}};const _3=e=>{switch(e){case"happy":case"excited":return"😊";case"grateful":return"🥰";case"worried":return"😟";case"sad":return"😢";default:return"🌱"}},A3=({message:e})=>{var n,a;const t=e.sender==="user",r=i=>{Co.success("¡Gracias por tu feedback!",i?"Nos alegra que la respuesta te haya sido útil.":"Trabajaremos para mejorar las respuestas.")};return l.jsxs(P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:ue("flex items-end gap-2",t?"justify-end":"justify-start"),children:[!t&&l.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-muted text-xl",children:_3(e.emotion)}),l.jsxs("div",{className:ue("max-w-xs rounded-2xl px-4 py-2 sm:max-w-sm md:max-w-md shadow-adaptive",t?"rounded-br-lg bg-primary-700 text-white drop-shadow-sm":"rounded-bl-lg bg-contrast-surface text-contrast-medium border border-contrast","rounded-[12px]"),children:[l.jsx("p",{className:"text-sm",children:e.content}),((n=e.context)==null?void 0:n.insights)&&e.context.insights.length>0&&l.jsxs("div",{className:"mt-3 space-y-2",children:[l.jsx("div",{className:"font-semibold text-xs text-green-700 dark:text-green-300",children:"Recomendaciones y observaciones:"}),l.jsx("ul",{className:"space-y-1",children:e.context.insights.map((i,o)=>l.jsxs("li",{className:"text-xs bg-green-50 dark:bg-green-900/20 rounded-lg p-2 border border-green-200 dark:border-green-800",children:[l.jsxs("div",{className:"font-medium",children:[i.type==="warning"&&"⚠️ ",i.type==="tip"&&"💡 ",i.type==="recommendation"&&"🌱 ",i.type==="observation"&&"🔎 ",i.title]}),l.jsx("div",{children:i.description}),i.affectedPlants&&i.affectedPlants.length>0&&l.jsxs("div",{className:"mt-1 text-[11px] text-green-800 dark:text-green-200",children:["Plantas: ",i.affectedPlants.join(", ")]})]},o))})]}),((a=e.context)==null?void 0:a.suggestedActions)&&e.context.suggestedActions.length>0&&l.jsxs("div",{className:"mt-3 space-y-2",children:[l.jsx("div",{className:"font-semibold text-xs text-blue-700 dark:text-blue-300",children:"Acciones sugeridas:"}),l.jsx("ul",{className:"space-y-1",children:e.context.suggestedActions.map((i,o)=>l.jsxs("li",{className:"text-xs bg-blue-50 dark:bg-blue-900/20 rounded-lg p-2 border border-blue-200 dark:border-blue-800",children:[l.jsx("div",{className:"font-medium",children:i.action}),i.priority&&l.jsxs("div",{className:"text-[11px] text-blue-800 dark:text-blue-200",children:["Prioridad: ",i.priority]}),i.plantIds&&i.plantIds.length>0&&l.jsxs("div",{className:"text-[11px] text-blue-800 dark:text-blue-200",children:["Plantas: ",i.plantIds.join(", ")]})]},o))})]}),l.jsx("p",{className:ue("mt-1 text-xs",t?"text-white/80":"text-contrast-soft","text-[#888] text-[12px]"),children:Sg(new Date(e.timestamp),{addSuffix:!0,locale:eb})}),!t&&l.jsxs("div",{className:"flex gap-2 mt-2",children:[l.jsx("button",{"aria-label":"Respuesta útil",className:"text-green-600 hover:text-green-800 text-lg focus:outline-none",onClick:()=>r(!0),children:"👍"}),l.jsx("button",{"aria-label":"Respuesta no útil",className:"text-red-500 hover:text-red-700 text-lg focus:outline-none",onClick:()=>r(!1),children:"👎"})]})]})]})},C3=({messages:e})=>l.jsx("div",{className:"space-y-4",children:e.map(t=>l.jsx(A3,{message:t},t.id))}),O3=["¿Cómo te sientes hoy?","¿Necesitas agua?","Cuéntame un dato curioso sobre ti"],T3=({onSendMessage:e,isTyping:t})=>{const[r,n]=y.useState(""),a=y.useRef(null),i=()=>{var c;const s=(c=a.current)==null?void 0:c.value.trim();s&&(e(s),a.current&&(a.current.value=""))},o=s=>{s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),i())};return l.jsx("footer",{className:"sticky bottom-0 z-10 bg-background/80 backdrop-blur-sm border-t border-border",children:l.jsxs("div",{className:"p-4 pb-safe-bottom space-y-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("div",{className:"relative flex-1",children:[l.jsx(Ro,{type:"text",ref:a,onKeyDown:o,placeholder:"Escribe un mensaje...",className:"pr-12",disabled:t}),l.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 text-muted-foreground",children:l.jsx(Sp,{size:16})})]}),l.jsx(Y,{"aria-label":"Enviar mensaje",onClick:i,disabled:!r.trim()||t,size:"icon",children:l.jsx(Np,{size:20})})]}),l.jsx("div",{className:"flex flex-wrap items-center gap-2 mb-3",children:O3.map(s=>l.jsx(Y,{onClick:()=>n(s),disabled:t,variant:"secondary",size:"sm",children:s},s))})]})})},tb=()=>{const e={initial:{y:0},animate:{y:[0,-4,0],transition:{duration:1,repeat:1/0,ease:"easeInOut"}}};return l.jsxs(P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0},className:"flex items-end gap-2",children:[l.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-muted text-xl",children:"🌱"}),l.jsxs("div",{className:"flex items-center gap-1 rounded-2xl rounded-bl-lg bg-muted px-4 py-3",children:[l.jsx(P.div,{variants:e,animate:"animate",style:{transitionDelay:"0s"},className:"h-2 w-2 rounded-full bg-muted-foreground/50"}),l.jsx(P.div,{variants:e,animate:"animate",style:{transitionDelay:"0.2s"},className:"h-2 w-2 rounded-full bg-muted-foreground/50"}),l.jsx(P.div,{variants:e,animate:"animate",style:{transitionDelay:"0.4s"},className:"h-2 w-2 rounded-full bg-muted-foreground/50"})]})]})},I3=({plantName:e})=>l.jsxs(P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5,ease:"easeOut"},className:"flex flex-1 flex-col items-center justify-center text-center p-8",children:[l.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-primary/10 mb-4",children:l.jsx(Ve,{className:"h-8 w-8 text-primary"})}),l.jsx("h3",{className:"text-xl font-bold text-foreground",children:"Inicia una conversación"}),l.jsxs("p",{className:"text-muted-foreground max-w-xs",children:[e," está esperando para charlar. ¡Pregúntale sobre sus cuidados o simplemente saluda!"]})]}),M3=()=>{const{plantId:e}=fc(),t=ot(),{loading:r,error:n}=Dc(e),{plant:a,isTyping:i,handleSendMessage:o}=YR(),s=y.useRef(null);return y.useEffect(()=>{var c;(c=s.current)==null||c.scrollIntoView({behavior:"smooth"})},[a==null?void 0:a.chatHistory,i]),r?l.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-background text-foreground",children:[l.jsx(ln,{className:"w-12 h-12 animate-spin text-green-500"}),l.jsx("p",{className:"mt-4 text-lg",children:"Cargando chat..."})]}):n?l.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-background text-red-500",children:[l.jsxs("p",{className:"mb-4",children:["Error: ",n]}),l.jsx("button",{onClick:()=>t(-1),className:"btn btn-primary",children:"Volver"})]}):a?l.jsxs("div",{className:"flex flex-col h-screen bg-background text-foreground",children:[l.jsx(XR,{plant:a}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",style:{paddingBottom:"calc(88px + env(safe-area-inset-bottom))"},children:[l.jsx(se,{children:a.chatHistory.length===0?l.jsx(I3,{plantName:a.nickname||a.name}):l.jsx(C3,{messages:a.chatHistory,plantNickname:a.nickname||a.name})}),i&&l.jsx(tb,{}),l.jsx("div",{ref:s})]}),l.jsx(T3,{onSendMessage:o,isTyping:i})]}):l.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-background text-foreground",children:[l.jsx("p",{className:"mb-4",children:"Planta no encontrada."}),l.jsx("button",{onClick:()=>t(-1),className:"btn btn-primary",children:"Volver"})]})};class D3{constructor(t,r){Ut(this,"supabase");Ut(this,"cache");this.supabase=t,this.cache=r}async sendMessage(t,r,n){try{const{data:{session:a},error:i}=await this.supabase.auth.getSession();if(i||!(a!=null&&a.access_token))throw console.error("User session not available:",i),new Error("Usuario no autenticado. Por favor inicia sesión nuevamente.");const{data:o,error:s}=await this.supabase.functions.invoke("garden-ai-chat",{body:{message:t,sessionId:r,userId:n},headers:{Authorization:"Bearer ".concat(a.access_token)}});if(s)throw new Error("Garden AI service error: ".concat(s.message));if(!o)throw new Error("No data received from garden AI service");return o}catch(a){throw console.error("Error in garden chat service:",a),a}}async sendMessageToGardenAI(t,r,n){try{const a=await this.buildGardenContext(r),i=n.map(g=>({role:g.sender==="user"?"user":"assistant",content:g.content})),o="amigable, motivador, experto, cálido, y con un toque de humor ligero",{data:{session:s},error:c}=await this.supabase.auth.getSession();if(c||!(s!=null&&s.access_token))throw console.error("User session not available:",c),new Error("Usuario no autenticado. Por favor inicia sesión nuevamente.");const{data:u,error:d}=await this.supabase.functions.invoke("garden-ai-chat",{body:{userMessage:t,gardenContext:a,conversationHistory:i,tonePersona:o},headers:{Authorization:"Bearer ".concat(s.access_token)}});if(d)throw new Error("Garden AI service error: ".concat(d.message));if(!u)throw new Error("No data received from garden AI service");const f=typeof u=="string"?JSON.parse(u):u,m=(f.content||"").toLowerCase();return(!f.content||m.includes("no sé")||m.includes("no tengo información")||m.includes("no puedo ayudarte")||m.length<30)&&Co.warning("Respuesta genérica","La respuesta de la IA fue muy genérica o poco útil. Intenta preguntar de otra forma o proporciona más detalles."),{content:f.content||"Lo siento, no pude procesar tu mensaje.",insights:f.insights||[],suggestedActions:f.suggestedActions||[]}}catch(a){throw a}}async verifyFunctionAvailability(){try{const t={userMessage:"ping",gardenContext:{totalPlants:0,plantsData:[],averageHealthScore:0,commonIssues:[],careScheduleSummary:{needsWatering:[],needsFertilizing:[],healthConcerns:[]},environmentalFactors:{locations:["test"]}},conversationHistory:[]},{data:{session:r},error:n}=await this.supabase.auth.getSession();if(n||!(r!=null&&r.access_token))throw console.error("User session not available:",n),new Error("Usuario no autenticado. Por favor inicia sesión nuevamente.");const{data:a,error:i}=await this.supabase.functions.invoke("garden-ai-chat",{body:t,headers:{Authorization:"Bearer ".concat(r.access_token)}});return i?i.message.includes("404")||i.message.includes("not found")?{available:!1,error:"La función de chat de jardín no está disponible en este momento"}:{available:!1,error:i.message}:a&&typeof a.content=="string"?{available:!0}:{available:!1,error:"Function returned unexpected response format"}}catch(t){return{available:!1,error:t instanceof Error?t.message:"Error desconocido"}}}async getGardenHealthSummary(t){try{const r=this.cache.getGardenSummary(t);if(r)return r;const n=await this.buildGardenContext(t),a=n.plantsData.filter(s=>s.healthScore>=80).length,i=n.careScheduleSummary.needsWatering.length+n.careScheduleSummary.healthConcerns.length,o={totalPlants:n.totalPlants,averageHealth:n.averageHealthScore,urgentActions:i,healthyPlants:a};return this.cache.setGardenSummary(t,o),o}catch(r){throw console.error("Error getting garden health summary:",r),r}}async getSuggestedQuestions(t){try{const r=await this.buildGardenContext(t),n=[];return r.totalPlants===0?(n.push("¿Cómo agrego mi primera planta?"),n.push("¿Qué tipo de planta me recomiendas para empezar?"),n):(n.push("¿Cuántas plantas tengo y cómo están?"),n.push("¿Cuál es la salud promedio de mi jardín?"),r.careScheduleSummary.healthConcerns.length>0&&(n.push("¿Qué plantas necesitan atención especial?"),n.push("¿Qué problemas de salud hay en mi jardín?")),r.plantsData.some(a=>a.healthScore>=80)&&n.push("¿Cuáles de mis plantas están más sanas?"),r.environmentalFactors.locations.length>1&&n.push("¿Cómo afecta la ubicación a mis plantas?"),r.totalPlants>5&&n.push("¿Cómo organizar mejor mi espacio de plantas?"),r.plantsData.some(a=>"lastFertilized"in a&&!!a.lastFertilized)&&n.push("¿Cuándo debo fertilizar mis plantas?"),new Set(r.plantsData.map(a=>a.species)).size>1&&n.push("¿Qué especie de planta es la más resistente en mi jardín?"),n.slice(0,6))}catch(r){return console.error("Error getting suggested questions:",r),["¿Cuántas plantas tengo y cómo están?","¿Cuál es la salud promedio de mi jardín?"]}}async refreshGardenData(t){try{this.invalidateCache(t),await this.buildGardenContext(t),console.log("[GardenChatService] Garden data refreshed for user:",t)}catch(r){throw console.error("Error refreshing garden data:",r),r}}async buildGardenContext(t){try{const r=this.cache.getGardenContext(t);if(r)return r;const{data:n,error:a}=await this.supabase.from("plants").select("\n          id,\n          name,\n          nickname,\n          species,\n          location,\n          plant_environment,\n          light_requirements,\n          health_score,\n          last_watered,\n          last_fertilized,\n          care_profile,\n          date_added\n        ").eq("user_id",t).order("created_at",{ascending:!1});if(a)throw a;const i=n.map(g=>{var v;return{id:g.id,name:g.name,nickname:g.nickname||void 0,species:g.species,location:g.location,plantEnvironment:g.plant_environment,lightRequirements:g.light_requirements,healthScore:g.health_score||85,lastWatered:g.last_watered?new Date(g.last_watered):void 0,wateringFrequency:(v=g.care_profile)==null?void 0:v.wateringFrequency}}),o=i.length,s=o>0?Math.round(i.reduce((g,v)=>g+v.healthScore,0)/o):0,c=new Date,u=[],d=[],f=[];i.forEach(g=>{if(g.lastWatered&&g.wateringFrequency){const v=new Date(g.lastWatered),p=new Date(v);p.setDate(v.getDate()+g.wateringFrequency),c>p&&u.push(g.id)}g.healthScore<70&&f.push(g.id)});const m=[...new Set(i.map(g=>g.location))],h={totalPlants:o,plantsData:i,averageHealthScore:s,commonIssues:[],careScheduleSummary:{needsWatering:u,needsFertilizing:d,healthConcerns:f},environmentalFactors:{locations:m,lightConditions:[],humidityNeeds:[]}};return this.cache.setGardenContext(t,h),h}catch(r){throw console.error("Error building garden context:",r),r}}invalidateCache(t){this.cache.invalidateCache(t),console.log("Cache invalidated for user:",t)}}const tn=new D3(pe,Rn),$3=()=>{const{user:e}=or(),[t,r]=y.useState([]),[n,a]=y.useState(!1),[i,o]=y.useState(!1),[s,c]=y.useState(null),[u,d]=y.useState(null),[f,m]=y.useState([]),[h,g]=y.useState("");y.useEffect(()=>{e!=null&&e.id&&v()},[e==null?void 0:e.id]);const v=async()=>{if(e!=null&&e.id){a(!0);try{const[N,k]=await Promise.all([tn.getGardenHealthSummary(e.id),tn.getSuggestedQuestions(e.id)]);if(d(N),m(k),t.length===0&&N.totalPlants>0){const A={id:"welcome-".concat(Date.now()),sender:"ai",content:"¡Hola! Soy tu asistente de jardín 🌱 \n\nVeo que tienes ".concat(N.totalPlants," plantas en tu jardín con una salud promedio de ").concat(N.averageHealth,"%. ").concat(N.urgentActions>0?"Hay ".concat(N.urgentActions," acciones que podrían necesitar tu atención."):"¡Todo parece estar en buen estado!","\n\n¿En qué puedo ayudarte hoy con tu jardín?"),timestamp:new Date,context:{queryType:"general"}};r([A])}}catch(N){console.error("Error loading initial garden data:",N),c("Error al cargar la información del jardín")}finally{a(!1)}}},p=y.useCallback(async N=>{if(!(e!=null&&e.id)||!N.trim()||i)return;const k=await tn.verifyFunctionAvailability();if(!k.available){c("🚧 El chat de jardín no está disponible: ".concat(k.error));return}const A={id:"user-".concat(Date.now()),sender:"user",content:N.trim(),timestamp:new Date};g(N.trim()),r(C=>[...C,A]),o(!0),c(null);try{const C=await tn.sendMessageToGardenAI(N.trim(),e.id,t),D={id:"ai-".concat(Date.now()),sender:"ai",content:C.content,timestamp:new Date,context:{plantsAnalyzed:z3(C),queryType:R3(N),insights:C.insights||[],suggestedActions:C.suggestedActions||[]}};if(r(T=>[...T,D]),C.suggestedActions&&C.suggestedActions.length>0){const T=await tn.getGardenHealthSummary(e.id);d(T)}}catch(C){console.error("Error sending message to garden AI:",C);let D="Error al enviar el mensaje. Por favor intenta de nuevo.";C instanceof Error&&(C.message.includes("función de chat de jardín no está disponible")?D="🚧 El chat de jardín está temporalmente no disponible. Estamos trabajando para solucionarlo.":C.message.includes("CORS")?D="🔧 Error de configuración. Por favor contacta al administrador.":C.message.includes("garden-ai-chat no existe")&&(D="⚠️ Servicio no configurado. El chat de jardín necesita configuración adicional.")),c(D),r(T=>T.slice(0,-1))}finally{o(!1)}},[e==null?void 0:e.id,t,i]),x=y.useCallback(async()=>{h&&await p(h)},[h,p]),b=y.useCallback(()=>{r([]),c(null),e!=null&&e.id&&v()},[e==null?void 0:e.id]),w=y.useCallback(async()=>{if(e!=null&&e.id){a(!0);try{await tn.refreshGardenData(e.id),await v(),console.log("[useGardenChat] Garden data refreshed successfully")}catch(N){console.error("Error refreshing garden data:",N),c("Error al actualizar los datos del jardín")}finally{a(!1)}}},[e==null?void 0:e.id]),j=y.useMemo(()=>n,[n]),S=y.useMemo(()=>{},[e==null?void 0:e.id,u]);return{messages:t,isLoading:j,isTyping:i,error:s,gardenSummary:u,suggestedQuestions:f,sendMessage:p,clearMessages:b,retryLastMessage:x,refreshGardenData:w,cacheStats:S}};function z3(e){const t=[];return e.insights&&e.insights.forEach(r=>{r.affectedPlants&&t.push(...r.affectedPlants)}),e.suggestedActions&&e.suggestedActions.forEach(r=>{r.plantIds&&t.push(...r.plantIds)}),[...new Set(t)]}function R3(e){const t=e.toLowerCase();return t.includes("salud")||t.includes("problema")||t.includes("enferm")?"health_analysis":t.includes("comparar")||t.includes("diferencia")||t.includes("mejor")?"care_comparison":t.includes("hongo")||t.includes("plaga")||t.includes("prevenir")?"disease_prevention":t.includes("crecimiento")||t.includes("progreso")||t.includes("tiempo")?"growth_tracking":"general"}const L3=({onClose:e})=>{const[t,r]=y.useState([{name:"garden-ai-chat",available:!1}]),[n,a]=y.useState(!1),i=async()=>{a(!0);const c=[],u=await tn.verifyFunctionAvailability();c.push({name:"garden-ai-chat",available:u.available,error:u.error,lastChecked:new Date}),r(c),a(!1)};y.useEffect(()=>{i()},[]);const o=c=>c.available?l.jsx(hr,{className:"w-5 h-5 text-green-500"}):l.jsx(It,{className:"w-5 h-5 text-red-500"}),s=c=>c.available?"Disponible":"No disponible";return l.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:e,children:l.jsx(P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:c=>c.stopPropagation(),className:"w-full max-w-md",children:l.jsxs(Et,{className:"p-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx(kp,{className:"w-6 h-6 text-blue-500"}),l.jsx("h3",{className:"text-lg font-semibold",children:"Diagnóstico del Sistema"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Estado de Funciones Edge"}),l.jsx("div",{className:"space-y-3",children:t.map(c=>l.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[o(c),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-sm",children:c.name}),l.jsx("p",{className:"text-xs text-muted-foreground",children:s(c)})]})]}),c.error&&l.jsxs("div",{className:"text-xs text-red-500 max-w-32 text-right",children:[c.error.substring(0,50),"..."]})]},c.name))})]}),t.some(c=>!c.available)&&l.jsx(P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx(It,{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400 mt-0.5 flex-shrink-0"}),l.jsxs("div",{className:"text-sm",children:[l.jsx("p",{className:"font-medium text-yellow-800 dark:text-yellow-200",children:"Servicios no disponibles"}),l.jsx("p",{className:"text-yellow-700 dark:text-yellow-300 mt-1",children:"Algunos servicios del chat de jardín no están funcionando. Verifica que las funciones Edge estén desplegadas en Supabase."})]})]})}),l.jsxs("div",{className:"flex gap-3 pt-3",children:[l.jsxs(Y,{onClick:i,disabled:n,variant:"outline",size:"sm",className:"flex-1 gap-2",children:[l.jsx(Br,{className:"w-4 h-4 ".concat(n?"animate-spin":"")}),"Verificar Nuevamente"]}),l.jsx(Y,{onClick:e,variant:"secondary",size:"sm",className:"flex-1",children:"Cerrar"})]})]})]})})})},al=({gardenSummary:e,onClearChat:t,onRefresh:r,isRefreshing:n=!1})=>{const a=ot(),[i,o]=y.useState(!1),s=u=>u>=80?"text-green-500":u>=60?"text-green-400":"text-red-500",c=u=>u>=80?"Excelente":u>=60?"Buena":"Necesita atención";return l.jsxs("header",{className:"sticky top-0 z-10 bg-background/80 backdrop-blur-sm border-b border-muted",children:[l.jsxs("div",{className:"flex items-center gap-3 p-4 pt-safe-top",children:[l.jsx("button",{onClick:()=>a(ze.toDashboard()),className:"p-2 -ml-2 rounded-full hover:bg-muted transition-colors","aria-label":"Volver al dashboard",children:l.jsx(vc,{size:20})}),l.jsx("div",{className:"flex-1",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-full",children:l.jsx(yc,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"font-bold text-foreground tracking-[0.2px]",children:"Asistente de Jardín"}),e&&l.jsxs("div",{className:"flex items-center gap-2 text-xs text-neutral-600 dark:text-neutral-400",children:[l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(yp,{size:12}),e.totalPlants," plantas"]}),l.jsx("span",{className:"font-medium ".concat(s(e.averageHealth)," text-xs px-2 py-0.5 rounded-full"),style:{fontSize:"11px",padding:"2px 8px"},children:c(e.averageHealth)}),e.urgentActions>0&&l.jsxs(P.span,{className:"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300 px-2 py-0.5 rounded-full text-xs font-medium",style:{fontSize:"11px",padding:"2px 8px"},initial:{scale:0},animate:{scale:1},transition:{delay:.2},children:[e.urgentActions," acciones"]})]})]})]})}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{onClick:()=>o(!0),className:"p-2 rounded-full hover:bg-muted transition-colors","aria-label":"Diagnóstico del sistema",children:l.jsx(kp,{size:18})}),r&&l.jsx("button",{onClick:r,disabled:n,className:"p-2 rounded-full hover:bg-muted transition-colors disabled:opacity-50","aria-label":"Actualizar datos del jardín",children:l.jsx(P.div,{animate:n?{rotate:360}:{},transition:n?{duration:1,repeat:1/0,ease:"linear"}:{},children:l.jsx(Br,{size:18})})}),l.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-muted transition-colors","aria-label":"Opciones del chat",children:l.jsx(xp,{size:20})})]})]}),l.jsx(se,{children:i&&l.jsx(L3,{onClose:()=>o(!1)})})]})},F3=({message:e})=>{var a,i,o;const t=e.sender==="user",r=()=>{var s;if(!((s=e.context)!=null&&s.queryType))return l.jsx(Ca,{size:16});switch(e.context.queryType){case"health_analysis":return l.jsx(Kt,{size:16});case"care_comparison":return l.jsx(sl,{size:16});case"disease_prevention":return l.jsx(Zb,{size:16});case"growth_tracking":return l.jsx(jp,{size:16});default:return l.jsx(Ca,{size:16})}},n=()=>{var s;if(t)return"text-primary-foreground/70";if(!((s=e.context)!=null&&s.queryType))return"text-green-500";switch(e.context.queryType){case"health_analysis":return"text-red-500";case"care_comparison":return"text-blue-500";case"disease_prevention":return"text-orange-500";case"growth_tracking":return"text-purple-500";default:return"text-green-500"}};return l.jsxs(P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:ue("flex items-end gap-2 max-w-[85%]",t?"justify-end ml-auto":"justify-start"),children:[!t&&l.jsx(P.div,{className:ue("flex h-8 w-8 items-center justify-center rounded-full","bg-gradient-to-br from-green-100 to-green-200 dark:from-green-900/30 dark:to-green-800/30"),initial:{scale:0},animate:{scale:1},transition:{delay:.1},children:l.jsx("div",{className:n(),children:r()})}),l.jsx("div",{className:"flex-1",children:l.jsxs("div",{className:ue("rounded-2xl px-4 py-3 break-words shadow-adaptive",t?"rounded-br-lg bg-primary-700 text-white drop-shadow-sm ml-8":"rounded-bl-lg bg-contrast-surface text-contrast-medium mr-8 border border-contrast","rounded-[12px]"),children:[l.jsx("div",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:e.content}),((a=e.context)==null?void 0:a.insights)&&e.context.insights.length>0&&l.jsxs("div",{className:"mt-3 space-y-2",children:[l.jsx("div",{className:"font-semibold text-xs text-green-700 dark:text-green-300",children:"Recomendaciones y observaciones:"}),l.jsx("ul",{className:"space-y-1",children:e.context.insights.map((s,c)=>l.jsxs("li",{className:"text-xs bg-green-50 dark:bg-green-900/20 rounded-lg p-2 border border-green-200 dark:border-green-800",children:[l.jsxs("div",{className:"font-medium",children:[s.type==="warning"&&"⚠️ ",s.type==="tip"&&"💡 ",s.type==="recommendation"&&"🌱 ",s.type==="observation"&&"🔎 ",s.title]}),l.jsx("div",{children:s.description}),s.affectedPlants&&s.affectedPlants.length>0&&l.jsxs("div",{className:"mt-1 text-[11px] text-green-800 dark:text-green-200",children:["Plantas: ",s.affectedPlants.join(", ")]})]},c))})]}),((i=e.context)==null?void 0:i.suggestedActions)&&e.context.suggestedActions.length>0&&l.jsxs("div",{className:"mt-3 space-y-2",children:[l.jsx("div",{className:"font-semibold text-xs text-blue-700 dark:text-blue-300",children:"Acciones sugeridas:"}),l.jsx("ul",{className:"space-y-1",children:e.context.suggestedActions.map((s,c)=>l.jsxs("li",{className:"text-xs bg-blue-50 dark:bg-blue-900/20 rounded-lg p-2 border border-blue-200 dark:border-blue-800",children:[l.jsx("div",{className:"font-medium",children:s.action}),s.priority&&l.jsxs("div",{className:"text-[11px] text-blue-800 dark:text-blue-200",children:["Prioridad: ",s.priority]}),s.plantIds&&s.plantIds.length>0&&l.jsxs("div",{className:"text-[11px] text-blue-800 dark:text-blue-200",children:["Plantas: ",s.plantIds.join(", ")]})]},c))})]}),!t&&((o=e.context)==null?void 0:o.plantsAnalyzed)&&e.context.plantsAnalyzed.length>0&&l.jsxs(P.div,{className:"mt-2 flex items-center gap-1 text-xs opacity-70",initial:{opacity:0},animate:{opacity:.7},transition:{delay:.5},children:[l.jsx(sl,{size:12}),l.jsxs("span",{children:["Analizó ",e.context.plantsAnalyzed.length," planta(s)"]})]}),l.jsx("div",{className:ue("mt-2 text-xs",t?"text-primary-foreground/70":"text-muted-foreground/70","text-[#888] text-[12px]"),children:Sg(new Date(e.timestamp),{addSuffix:!0,locale:eb})})]})}),t&&l.jsx(P.div,{className:"flex h-8 w-8 items-center justify-center rounded-full bg-primary/10",initial:{scale:0},animate:{scale:1},transition:{delay:.1},children:l.jsx(qb,{size:16,className:"text-primary"})})]})},B3=({onSendMessage:e,isTyping:t,suggestedQuestions:r,isLoading:n=!1})=>{const[a,i]=y.useState(""),[o,s]=y.useState(!0),c=y.useRef(null),u=async()=>{var g;if(t)return;const h=(g=c.current)==null?void 0:g.value.trim();h&&(s(!1),c.current&&(c.current.value=""),await e(h))},d=h=>{h.key==="Enter"&&!h.shiftKey&&(h.preventDefault(),u())},f=async h=>{i(""),s(!1),await e(h)},m=()=>{r.length>0&&!a&&s(!0)};return l.jsx("footer",{className:"sticky bottom-0 z-10 bg-background/80 backdrop-blur-sm border-t border-border",children:l.jsxs("div",{className:"p-4 pb-safe-bottom space-y-3",children:[l.jsx(se,{children:o&&r.length>0&&!n&&l.jsxs(P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},className:"space-y-2 mb-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[l.jsx(Ve,{size:12}),l.jsx("span",{children:"Preguntas sugeridas"})]}),l.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:r.slice(0,4).map((h,g)=>l.jsx(P.button,{onClick:()=>f(h),disabled:t,className:"px-3 py-1.5 text-xs bg-muted hover:bg-[#F0F0F0] active:bg-[#F0F0F0] rounded-full border border-border/50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-left",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:g*.1},whileHover:{scale:1.02},whileTap:{scale:.98},children:h},h))})]})}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("div",{className:"relative flex-1",children:[l.jsx(Ro,{type:"text",ref:c,onKeyDown:d,onFocus:m,placeholder:"Pregúntame sobre tu jardín...",className:"pr-12",disabled:t||n}),l.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 text-muted-foreground",children:l.jsx(Sp,{size:16})})]}),l.jsx(Y,{"aria-label":"Enviar mensaje",onClick:u,disabled:!a.trim()||t||n,size:"icon",className:"shrink-0",children:t?l.jsx(P.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:l.jsx(Ve,{size:20})}):l.jsx(Np,{size:20})})]}),n&&l.jsxs(P.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center justify-center gap-2 text-xs text-muted-foreground",children:[l.jsx(P.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:l.jsx(Ve,{size:12})}),l.jsx("span",{children:"Analizando tu jardín..."})]})]})})},U3={plants:l.jsx("svg",{viewBox:"0 0 200 150",className:"w-32 h-24 text-primary-300 dark:text-primary-600",children:l.jsxs(P.g,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},children:[l.jsx(P.path,{d:"M60 120 L140 120 L130 100 L70 100 Z",fill:"currentColor",initial:{scaleY:0},animate:{scaleY:1},transition:{delay:.2,duration:.5}}),l.jsx(P.g,{initial:{scale:0,rotate:-10},animate:{scale:1,rotate:0},transition:{delay:.5,duration:.8,type:"spring"},children:l.jsx("path",{d:"M80 100 Q85 80 90 85 Q95 75 85 70 Q75 75 80 100",fill:"currentColor",opacity:"0.8"})}),l.jsx(P.g,{initial:{scale:0,rotate:10},animate:{scale:1,rotate:0},transition:{delay:.7,duration:.8,type:"spring"},children:l.jsx("path",{d:"M100 100 Q105 85 110 90 Q115 80 105 75 Q95 80 100 100",fill:"currentColor",opacity:"0.7"})}),l.jsx(P.g,{initial:{scale:0,rotate:-5},animate:{scale:1,rotate:0},transition:{delay:.9,duration:.8,type:"spring"},children:l.jsx("path",{d:"M120 100 Q125 90 130 95 Q135 85 125 80 Q115 85 120 100",fill:"currentColor",opacity:"0.6"})})]})}),search:l.jsx("svg",{viewBox:"0 0 200 150",className:"w-32 h-24 text-primary-300 dark:text-primary-600",children:l.jsxs(P.g,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8},children:[l.jsx(P.circle,{cx:"80",cy:"70",r:"25",stroke:"currentColor",strokeWidth:"3",fill:"none",initial:{scale:0},animate:{scale:1},transition:{delay:.3,duration:.5,type:"spring"}}),l.jsx(P.line,{x1:"100",y1:"88",x2:"120",y2:"108",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",initial:{scaleX:0},animate:{scaleX:1},transition:{delay:.6,duration:.4}}),l.jsx(P.circle,{cx:"140",cy:"50",r:"2",fill:"currentColor",initial:{scale:0},animate:{scale:1},transition:{delay:1,duration:.3}}),l.jsx(P.circle,{cx:"150",cy:"40",r:"3",fill:"currentColor",initial:{scale:0},animate:{scale:1},transition:{delay:1.2,duration:.3}})]})}),chat:l.jsx("svg",{viewBox:"0 0 200 150",className:"w-32 h-24 text-primary-300 dark:text-primary-600",children:l.jsxs(P.g,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8},children:[l.jsx(P.rect,{x:"50",y:"40",width:"100",height:"60",rx:"20",fill:"currentColor",opacity:"0.8",initial:{scale:0,y:20},animate:{scale:1,y:0},transition:{delay:.2,duration:.6,type:"spring"}}),l.jsx(P.path,{d:"M80 100 L70 115 L95 105 Z",fill:"currentColor",opacity:"0.8",initial:{scale:0},animate:{scale:1},transition:{delay:.5,duration:.4}}),l.jsxs(P.g,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8,duration:.5},children:[l.jsx("circle",{cx:"75",cy:"70",r:"3",fill:"white"}),l.jsx("circle",{cx:"100",cy:"70",r:"3",fill:"white"}),l.jsx("circle",{cx:"125",cy:"70",r:"3",fill:"white"})]})]})}),camera:l.jsx("svg",{viewBox:"0 0 200 150",className:"w-32 h-24 text-primary-300 dark:text-primary-600",children:l.jsxs(P.g,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8},children:[l.jsx(P.rect,{x:"60",y:"60",width:"80",height:"50",rx:"8",fill:"currentColor",opacity:"0.8",initial:{scale:0},animate:{scale:1},transition:{delay:.2,duration:.5,type:"spring"}}),l.jsx(P.rect,{x:"85",y:"45",width:"30",height:"15",rx:"4",fill:"currentColor",opacity:"0.6",initial:{scaleY:0},animate:{scaleY:1},transition:{delay:.4,duration:.3}}),l.jsx(P.circle,{cx:"100",cy:"85",r:"15",stroke:"white",strokeWidth:"2",fill:"none",initial:{scale:0},animate:{scale:1},transition:{delay:.6,duration:.4,type:"spring"}}),l.jsx(P.circle,{cx:"120",cy:"70",r:"3",fill:"currentColor",opacity:"0.9",initial:{scale:0},animate:{scale:[0,1.2,1]},transition:{delay:.8,duration:.5}})]})}),settings:l.jsx("svg",{viewBox:"0 0 200 150",className:"w-32 h-24 text-primary-300 dark:text-primary-600",children:l.jsxs(P.g,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8},children:[l.jsxs(P.g,{animate:{rotate:360},transition:{duration:20,repeat:1/0,ease:"linear"},style:{originX:"100px",originY:"75px"},children:[l.jsx("path",{d:"M100 50 L110 60 L120 50 L120 60 L130 70 L120 80 L120 90 L110 90 L100 100 L90 90 L80 90 L80 80 L70 70 L80 60 L80 50 Z",fill:"currentColor",opacity:"0.7"}),l.jsx("circle",{cx:"100",cy:"75",r:"8",fill:"white"})]}),l.jsxs(P.g,{animate:{rotate:-360},transition:{duration:15,repeat:1/0,ease:"linear"},style:{originX:"140px",originY:"95px"},children:[l.jsx("path",{d:"M140 85 L145 90 L150 85 L150 90 L155 95 L150 100 L150 105 L145 105 L140 110 L135 105 L130 105 L130 100 L125 95 L130 90 L130 85 Z",fill:"currentColor",opacity:"0.5"}),l.jsx("circle",{cx:"140",cy:"95",r:"5",fill:"white"})]})]})})},W3=({icon:e,title:t,description:r,action:n,illustration:a="plants",className:i})=>l.jsxs(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},className:ue("flex flex-col items-center justify-center text-center py-12 px-6 max-w-md mx-auto",i),children:[l.jsx(P.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2,duration:.5,ease:"easeOut"},className:"mb-6",children:e||U3[a]}),l.jsx(P.h3,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4,duration:.5},className:"text-xl font-semibold text-neutral-900 dark:text-neutral-100 mb-3",children:t}),l.jsx(P.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5,duration:.5},className:"text-neutral-600 dark:text-neutral-400 mb-6 leading-relaxed",children:r}),n&&l.jsx(P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},children:l.jsx(Y,{onClick:n.onClick,variant:"primary",size:"lg",className:"animate-glow",children:n.label})})]}),H3=()=>{const e=ot(),t=gr(h=>h.plants),{messages:r,isLoading:n,isTyping:a,error:i,gardenSummary:o,suggestedQuestions:s,sendMessage:c,clearMessages:u,retryLastMessage:d,refreshGardenData:f}=$3(),m=y.useRef(null);return y.useEffect(()=>{var h;(h=m.current)==null||h.scrollIntoView({behavior:"smooth"})},[r,a]),i&&!o?l.jsxs("div",{className:"flex flex-col h-screen bg-background text-foreground",children:[l.jsx(al,{gardenSummary:o}),l.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:l.jsxs(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center max-w-md",children:[l.jsx(It,{className:"w-16 h-16 text-destructive mx-auto mb-4"}),l.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Error de conexión"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:i}),l.jsxs(Y,{onClick:f,variant:"primary",children:[l.jsx(Br,{className:"w-4 h-4 mr-2"}),"Reintentar"]})]})})]}):(o==null?void 0:o.totalPlants)===0?l.jsxs("div",{className:"flex flex-col h-screen bg-background text-foreground",children:[l.jsx(al,{gardenSummary:o}),l.jsx("div",{className:"flex-1 flex items-center justify-center",children:l.jsx(W3,{illustration:"plants",title:"Tu jardín está vacío",description:"Agrega algunas plantas a tu jardín para poder chatear conmigo sobre su cuidado y salud.",action:{label:"Agregar mi primera planta",onClick:()=>e(ze.toCamera())}})})]}):l.jsxs("div",{className:"flex flex-col h-screen bg-background text-foreground",children:[l.jsx(al,{gardenSummary:o,onClearChat:u,onRefresh:f,isRefreshing:n&&r.length>0}),r.length===0&&t.length>0&&l.jsxs("div",{className:"p-4 border-b border-neutral-200 dark:border-neutral-700",children:[l.jsx("h3",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-3",children:"Chats individuales con tus plantas:"}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.slice(0,4).map(h=>l.jsx(Et,{variant:"glass",size:"sm",interactive:!0,className:"cursor-pointer hover:border-primary-300 dark:hover:border-primary-600",onClick:()=>e(ze.toPlantChat(h.id)),children:l.jsx(xr,{className:"p-3",children:l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-8 h-8 rounded-lg bg-primary-100 dark:bg-primary-900 flex items-center justify-center",children:l.jsx(yc,{className:"w-4 h-4 text-primary-600 dark:text-primary-400"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"text-sm font-medium truncate",children:h.nickname||h.name}),l.jsx("p",{className:"text-xs text-neutral-500 truncate",children:h.species})]}),l.jsx(Ka,{className:"w-4 h-4 text-neutral-400"})]})})},h.id)),t.length>4&&l.jsx(Et,{variant:"outline",size:"sm",interactive:!0,className:"cursor-pointer",onClick:()=>e(ze.toDashboard()),children:l.jsx(xr,{className:"p-3 flex items-center justify-center",children:l.jsxs("span",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:["+",t.length-4," más"]})})})]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto",style:{paddingBottom:"calc(88px + env(safe-area-inset-bottom))"},children:[l.jsxs("div",{className:"p-4 space-y-4 max-w-4xl mx-auto",children:[l.jsx(se,{children:r.map(h=>l.jsx(F3,{message:h},h.id))}),a&&l.jsx(P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:l.jsx(tb,{})}),i&&r.length>0&&l.jsx(P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex items-center justify-center",children:l.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3 max-w-sm",children:[l.jsxs("div",{className:"flex items-center gap-2 text-red-700 dark:text-red-300 text-sm",children:[l.jsx(It,{size:16}),l.jsx("span",{children:i})]}),l.jsxs(Y,{onClick:d,size:"sm",variant:"outline",className:"mt-2 w-full",children:[l.jsx(Br,{size:14,className:"mr-1"}),"Reintentar"]})]})}),l.jsx("div",{ref:m})]}),!1]}),l.jsx(B3,{onSendMessage:c,isTyping:a,suggestedQuestions:s,isLoading:n})]})},q3=y.lazy(()=>dc(()=>import("./Settings-DM8_l4L5.js"),__vite__mapDeps([0,1,2,3,4,5]))),Z3=y.lazy(()=>dc(()=>import("./Auth-B-L06XWJ.js"),__vite__mapDeps([6,1,2,4,5,3]))),K3=new lp({defaultOptions:{queries:{staleTime:Dr.QUERY.STALE_TIME.MEDIUM,gcTime:Dr.QUERY.GC_TIME.MEDIUM,refetchOnWindowFocus:!1,refetchOnReconnect:!1,retry:Dr.QUERY.RETRY.COUNT,retryDelay:e=>Math.min(Dr.QUERY.RETRY.DELAY*2**e,3e4)},mutations:{retry:Dr.QUERY.RETRY.COUNT,retryDelay:Dr.QUERY.RETRY.DELAY}}}),zh=({message:e})=>l.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-background text-foreground",children:[l.jsx(Za,{className:"w-12 h-12 text-green-500 animate-bounce mb-4"}),l.jsx("p",{className:"text-lg text-muted-foreground",children:e})]}),G3=()=>(console.log("[ROUTER] Detecting basename..."),console.log("[ROUTER] Hostname:",window.location.hostname),console.log("[ROUTER] Pathname:",window.location.pathname),window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?(console.log('[ROUTER] Local development detected, using "/"'),"/"):window.location.pathname.startsWith("/plantitas-app")?(console.log('[ROUTER] GitHub Pages detected, using "/plantitas-app/"'),"/plantitas-app/"):(console.log('[ROUTER] Using fallback basename "/"'),"/")),V3=()=>{const{session:e,isInitialized:t,initialize:r}=or();if(console.log("[APP] App component mounting..."),console.log("[APP] Session:",!!e),console.log("[APP] Initialized:",t),GN(),y.useEffect(()=>{console.log("[APP] useEffect running...");try{const a=VN();return console.log("[APP] Calling initialize..."),r(),console.log("[APP] Initialize called"),()=>{console.log("[APP] Cleanup running..."),a()}}catch(a){throw Oo("APP_INITIALIZATION",a),a}},[r]),!t)return console.log("[APP] Not initialized, showing loader..."),l.jsx(zh,{message:"Inicializando..."});console.log("[APP] Initialized, rendering main app...");const n=()=>l.jsx(wd,{children:l.jsxs(Vt,{path:"/",element:l.jsx(lP,{}),children:[l.jsx(Vt,{index:!0,element:l.jsx(_P,{})}),l.jsx(Vt,{path:"camera",element:l.jsx(VR,{})}),l.jsx(Vt,{path:"settings",element:l.jsx(q3,{})}),l.jsx(Vt,{path:"garden-chat",element:l.jsx(H3,{})}),l.jsx(Vt,{path:"plant/:plantId",element:l.jsx(HR,{})}),l.jsx(Vt,{path:"plant/:plantId/chat",element:l.jsx(M3,{})}),l.jsx(Vt,{path:"*",element:l.jsx(Os,{to:De.dashboard,replace:!0})})]})});return l.jsx(cp,{client:K3,children:l.jsx(FN,{children:l.jsx(ZN,{children:l.jsx(cP,{children:l.jsxs(kb,{basename:G3(),future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:[l.jsx(zN,{position:"top-center",richColors:!0}),l.jsx(QN,{}),l.jsx(y.Suspense,{fallback:l.jsx(zh,{message:"Cargando..."}),children:l.jsxs(wd,{children:[l.jsx(Vt,{path:De.auth,element:e?l.jsx(Os,{to:De.dashboard,replace:!0}):l.jsx(Z3,{})}),l.jsx(Vt,{path:"/*",element:e?l.jsx(n,{}):l.jsx(Os,{to:De.auth,replace:!0})})]})})]})})})})})},Y3=y.createContext(void 0),X3=({children:e,defaultTheme:t="system",storageKey:r="vite-ui-theme"})=>{const[n,a]=y.useState(()=>localStorage.getItem(r)||t),i=y.useMemo(()=>n==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":n,[n]);y.useEffect(()=>{const s=window.document.documentElement;s.classList.remove("light","dark"),s.classList.add(i),localStorage.setItem(r,n)},[i,n,r]);const o={theme:n,setTheme:a,resolvedTheme:i};return l.jsx(Y3.Provider,{value:o,children:e})};var hn=[],Q3=function(){return hn.some(function(e){return e.activeTargets.length>0})},J3=function(){return hn.some(function(e){return e.skippedTargets.length>0})},Rh="ResizeObserver loop completed with undelivered notifications.",eL=function(){var e;typeof ErrorEvent=="function"?e=new ErrorEvent("error",{message:Rh}):(e=document.createEvent("Event"),e.initEvent("error",!1,!1),e.message=Rh),window.dispatchEvent(e)},qa;(function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(qa||(qa={}));var pn=function(e){return Object.freeze(e)},tL=function(){function e(t,r){this.inlineSize=t,this.blockSize=r,pn(this)}return e}(),rb=function(){function e(t,r,n,a){return this.x=t,this.y=r,this.width=n,this.height=a,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,pn(this)}return e.prototype.toJSON=function(){var t=this,r=t.x,n=t.y,a=t.top,i=t.right,o=t.bottom,s=t.left,c=t.width,u=t.height;return{x:r,y:n,top:a,right:i,bottom:o,left:s,width:c,height:u}},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}(),dd=function(e){return e instanceof SVGElement&&"getBBox"in e},nb=function(e){if(dd(e)){var t=e.getBBox(),r=t.width,n=t.height;return!r&&!n}var a=e,i=a.offsetWidth,o=a.offsetHeight;return!(i||o||e.getClientRects().length)},Lh=function(e){var t;if(e instanceof Element)return!0;var r=(t=e==null?void 0:e.ownerDocument)===null||t===void 0?void 0:t.defaultView;return!!(r&&e instanceof r.Element)},rL=function(e){switch(e.tagName){case"INPUT":if(e.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},Aa=typeof window<"u"?window:{},Oi=new WeakMap,Fh=/auto|scroll/,nL=/^tb|vertical/,aL=/msie|trident/i.test(Aa.navigator&&Aa.navigator.userAgent),Xt=function(e){return parseFloat(e||"0")},Wn=function(e,t,r){return e===void 0&&(e=0),t===void 0&&(t=0),r===void 0&&(r=!1),new tL((r?t:e)||0,(r?e:t)||0)},Bh=pn({devicePixelContentBoxSize:Wn(),borderBoxSize:Wn(),contentBoxSize:Wn(),contentRect:new rb(0,0,0,0)}),ab=function(e,t){if(t===void 0&&(t=!1),Oi.has(e)&&!t)return Oi.get(e);if(nb(e))return Oi.set(e,Bh),Bh;var r=getComputedStyle(e),n=dd(e)&&e.ownerSVGElement&&e.getBBox(),a=!aL&&r.boxSizing==="border-box",i=nL.test(r.writingMode||""),o=!n&&Fh.test(r.overflowY||""),s=!n&&Fh.test(r.overflowX||""),c=n?0:Xt(r.paddingTop),u=n?0:Xt(r.paddingRight),d=n?0:Xt(r.paddingBottom),f=n?0:Xt(r.paddingLeft),m=n?0:Xt(r.borderTopWidth),h=n?0:Xt(r.borderRightWidth),g=n?0:Xt(r.borderBottomWidth),v=n?0:Xt(r.borderLeftWidth),p=f+u,x=c+d,b=v+h,w=m+g,j=s?e.offsetHeight-w-e.clientHeight:0,S=o?e.offsetWidth-b-e.clientWidth:0,N=a?p+b:0,k=a?x+w:0,A=n?n.width:Xt(r.width)-N-S,C=n?n.height:Xt(r.height)-k-j,D=A+p+S+b,T=C+x+j+w,O=pn({devicePixelContentBoxSize:Wn(Math.round(A*devicePixelRatio),Math.round(C*devicePixelRatio),i),borderBoxSize:Wn(D,T,i),contentBoxSize:Wn(A,C,i),contentRect:new rb(f,c,A,C)});return Oi.set(e,O),O},ib=function(e,t,r){var n=ab(e,r),a=n.borderBoxSize,i=n.contentBoxSize,o=n.devicePixelContentBoxSize;switch(t){case qa.DEVICE_PIXEL_CONTENT_BOX:return o;case qa.BORDER_BOX:return a;default:return i}},iL=function(){function e(t){var r=ab(t);this.target=t,this.contentRect=r.contentRect,this.borderBoxSize=pn([r.borderBoxSize]),this.contentBoxSize=pn([r.contentBoxSize]),this.devicePixelContentBoxSize=pn([r.devicePixelContentBoxSize])}return e}(),ob=function(e){if(nb(e))return 1/0;for(var t=0,r=e.parentNode;r;)t+=1,r=r.parentNode;return t},oL=function(){var e=1/0,t=[];hn.forEach(function(o){if(o.activeTargets.length!==0){var s=[];o.activeTargets.forEach(function(u){var d=new iL(u.target),f=ob(u.target);s.push(d),u.lastReportedSize=ib(u.target,u.observedBox),f<e&&(e=f)}),t.push(function(){o.callback.call(o.observer,s,o.observer)}),o.activeTargets.splice(0,o.activeTargets.length)}});for(var r=0,n=t;r<n.length;r++){var a=n[r];a()}return e},Uh=function(e){hn.forEach(function(r){r.activeTargets.splice(0,r.activeTargets.length),r.skippedTargets.splice(0,r.skippedTargets.length),r.observationTargets.forEach(function(a){a.isActive()&&(ob(a.target)>e?r.activeTargets.push(a):r.skippedTargets.push(a))})})},sL=function(){var e=0;for(Uh(e);Q3();)e=oL(),Uh(e);return J3()&&eL(),e>0},il,sb=[],lL=function(){return sb.splice(0).forEach(function(e){return e()})},cL=function(e){if(!il){var t=0,r=document.createTextNode(""),n={characterData:!0};new MutationObserver(function(){return lL()}).observe(r,n),il=function(){r.textContent="".concat(t?t--:t++)}}sb.push(e),il()},uL=function(e){cL(function(){requestAnimationFrame(e)})},Ri=0,dL=function(){return!!Ri},fL=250,mL={attributes:!0,characterData:!0,childList:!0,subtree:!0},Wh=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],Hh=function(e){return e===void 0&&(e=0),Date.now()+e},ol=!1,hL=function(){function e(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return e.prototype.run=function(t){var r=this;if(t===void 0&&(t=fL),!ol){ol=!0;var n=Hh(t);uL(function(){var a=!1;try{a=sL()}finally{if(ol=!1,t=n-Hh(),!dL())return;a?r.run(1e3):t>0?r.run(t):r.start()}})}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var t=this,r=function(){return t.observer&&t.observer.observe(document.body,mL)};document.body?r():Aa.addEventListener("DOMContentLoaded",r)},e.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),Wh.forEach(function(r){return Aa.addEventListener(r,t.listener,!0)}))},e.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),Wh.forEach(function(r){return Aa.removeEventListener(r,t.listener,!0)}),this.stopped=!0)},e}(),cc=new hL,qh=function(e){!Ri&&e>0&&cc.start(),Ri+=e,!Ri&&cc.stop()},pL=function(e){return!dd(e)&&!rL(e)&&getComputedStyle(e).display==="inline"},gL=function(){function e(t,r){this.target=t,this.observedBox=r||qa.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var t=ib(this.target,this.observedBox,!0);return pL(this.target)&&(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},e}(),vL=function(){function e(t,r){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=r}return e}(),Ti=new WeakMap,Zh=function(e,t){for(var r=0;r<e.length;r+=1)if(e[r].target===t)return r;return-1},Ii=function(){function e(){}return e.connect=function(t,r){var n=new vL(t,r);Ti.set(t,n)},e.observe=function(t,r,n){var a=Ti.get(t),i=a.observationTargets.length===0;Zh(a.observationTargets,r)<0&&(i&&hn.push(a),a.observationTargets.push(new gL(r,n&&n.box)),qh(1),cc.schedule())},e.unobserve=function(t,r){var n=Ti.get(t),a=Zh(n.observationTargets,r),i=n.observationTargets.length===1;a>=0&&(i&&hn.splice(hn.indexOf(n),1),n.observationTargets.splice(a,1),qh(-1))},e.disconnect=function(t){var r=this,n=Ti.get(t);n.observationTargets.slice().forEach(function(a){return r.unobserve(t,a.target)}),n.activeTargets.splice(0,n.activeTargets.length)},e}(),yL=function(){function e(t){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof t!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");Ii.connect(this,t)}return e.prototype.observe=function(t,r){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Lh(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");Ii.observe(this,t,r)},e.prototype.unobserve=function(t){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Lh(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");Ii.unobserve(this,t)},e.prototype.disconnect=function(){Ii.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}();window.ResizeObserver||(window.ResizeObserver=yL);console.log("[MOBILE] 🚨 Main.tsx loading started");console.log("[MOBILE] Location:",window.location.href);console.log("[MOBILE] Pathname:",window.location.pathname);console.log("[MOBILE] User Agent:",navigator.userAgent);try{JN(),console.log("[MOBILE] Debug system initialized")}catch(e){console.error("[MOBILE] Debug system failed:",e)}try{ek()}catch(e){Oo("COMPATIBILITY_TESTS",e)}const lb=new lp;function xL(){const{user:e}=or();return I.useEffect(()=>{e!=null&&e.id&&lb.prefetchQuery({queryKey:["plants",e.id],queryFn:()=>Dn.getUserPlantSummaries(e.id),staleTime:1e3*60*5})},[e==null?void 0:e.id]),null}console.log("[MOBILE] Looking for root container...");const cb=document.getElementById("root");if(!cb)throw Oo("ROOT_CONTAINER","Root container not found"),new Error("Root container not found");console.log("[MOBILE] Root container found, creating React root...");try{const e=cl.createRoot(cb);console.log("[MOBILE] React root created, rendering App..."),e.render(l.jsx(I.StrictMode,{children:l.jsx(X3,{children:l.jsxs(cp,{client:lb,children:[l.jsx(xL,{}),l.jsx(V3,{})]})})})),console.log("[MOBILE] App render called successfully")}catch(e){throw Oo("REACT_RENDER",e),e}export{Y as B,jL as __vite_legacy_guard,or as a,uP as b,ue as c,_L as d,sP as u};
