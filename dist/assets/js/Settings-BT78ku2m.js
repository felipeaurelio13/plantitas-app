var ae=Object.defineProperty;var oe=(t,e,s)=>e in t?ae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var R=(t,e,s)=>oe(t,typeof e!="symbol"?e+"":e,s);import{j as a}from"./query-B3NoLO9S.js";import{r as u,R as ie,b as ce}from"./vendor-C9vVoIyg.js";import{u as le,a as de,c as S,b as ue,d as fe,B as M}from"./index-C4EvGAvm.js";import{u as me}from"./router-BTofFa1L.js";import{m as _,u as he,A as ge,q as E,X as pe,aa as xe,ab as be,e as ye,M as we,I as V,ac as ve,r as Se,n as je,ad as ke,O as Ce,j as Ne,ae as Ee,a8 as Ie}from"./ui-DujOv7i0.js";import"./supabase-B6w-t4oo.js";const I=(t,e)=>e.some(s=>t instanceof s);let A,T;function De(){return A||(A=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Pe(){return T||(T=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const D=new WeakMap,C=new WeakMap,j=new WeakMap;function Be(t){const e=new Promise((s,r)=>{const n=()=>{t.removeEventListener("success",o),t.removeEventListener("error",i)},o=()=>{s(w(t.result)),n()},i=()=>{r(t.error),n()};t.addEventListener("success",o),t.addEventListener("error",i)});return j.set(e,t),e}function Oe(t){if(D.has(t))return;const e=new Promise((s,r)=>{const n=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",i),t.removeEventListener("abort",i)},o=()=>{s(),n()},i=()=>{r(t.error||new DOMException("AbortError","AbortError")),n()};t.addEventListener("complete",o),t.addEventListener("error",i),t.addEventListener("abort",i)});D.set(t,e)}let P={get(t,e,s){if(t instanceof IDBTransaction){if(e==="done")return D.get(t);if(e==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return w(t[e])},set(t,e,s){return t[e]=s,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function U(t){P=t(P)}function Re(t){return Pe().includes(t)?function(...e){return t.apply(B(this),e),w(this.request)}:function(...e){return w(t.apply(B(this),e))}}function Me(t){return typeof t=="function"?Re(t):(t instanceof IDBTransaction&&Oe(t),I(t,De())?new Proxy(t,P):t)}function w(t){if(t instanceof IDBRequest)return Be(t);if(C.has(t))return C.get(t);const e=Me(t);return e!==t&&(C.set(t,e),j.set(e,t)),e}const B=t=>j.get(t);function Ae(t,e,{blocked:s,upgrade:r,blocking:n,terminated:o}={}){const i=indexedDB.open(t,e),c=w(i);return r&&i.addEventListener("upgradeneeded",d=>{r(w(i.result),d.oldVersion,d.newVersion,w(i.transaction),d)}),s&&i.addEventListener("blocked",d=>s(d.oldVersion,d.newVersion,d)),c.then(d=>{o&&d.addEventListener("close",()=>o()),n&&d.addEventListener("versionchange",f=>n(f.oldVersion,f.newVersion,f))}).catch(()=>{}),c}const Te=["get","getKey","getAll","getAllKeys","count"],Le=["put","add","delete","clear"],N=new Map;function L(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(N.get(e))return N.get(e);const s=e.replace(/FromIndex$/,""),r=e!==s,n=Le.includes(s);if(!(s in(r?IDBIndex:IDBObjectStore).prototype)||!(n||Te.includes(s)))return;const o=async function(i,...c){const d=this.transaction(i,n?"readwrite":"readonly");let f=d.store;return r&&(f=f.index(c.shift())),(await Promise.all([f[s](...c),n&&d.done]))[0]};return N.set(e,o),o}U(t=>({...t,get:(e,s,r)=>L(e,s)||t.get(e,s,r),has:(e,s)=>!!L(e,s)||t.has(e,s)}));const $e=["continue","continuePrimaryKey","advance"],$={},O=new WeakMap,q=new WeakMap,ze={get(t,e){if(!$e.includes(e))return t[e];let s=$[e];return s||(s=$[e]=function(...r){O.set(this,q.get(this)[e](...r))}),s}};async function*Fe(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;e=e;const s=new Proxy(e,ze);for(q.set(s,e),j.set(s,B(e));e;)yield s,e=await(O.get(s)||e.continue()),O.delete(s)}function z(t,e){return e===Symbol.asyncIterator&&I(t,[IDBIndex,IDBObjectStore,IDBCursor])||e==="iterate"&&I(t,[IDBIndex,IDBObjectStore])}U(t=>({...t,get(e,s,r){return z(e,s)?Fe:t.get(e,s,r)},has(e,s){return z(e,s)||t.has(e,s)}}));class We{constructor(){R(this,"db",null)}async init(){return this.db?this.db:(this.db=await Ae("PlantCareDB",1,{upgrade(e){const s=e.createObjectStore("plants",{keyPath:"id"});s.createIndex("by-health","healthScore"),s.createIndex("by-date","dateAdded"),e.createObjectStore("images",{keyPath:"id"}),e.createObjectStore("settings",{keyPath:"key"})}}),this.db)}async savePlant(e){await(await this.init()).put("plants",e);const r=await this.getAllPlants();localStorage.setItem("plants",JSON.stringify(r))}async getPlant(e){return await(await this.init()).get("plants",e)}async getAllPlants(){return(await(await this.init()).getAll("plants")).map(r=>({...r,dateAdded:new Date(r.dateAdded),lastWatered:r.lastWatered?new Date(r.lastWatered):void 0,lastFertilized:r.lastFertilized?new Date(r.lastFertilized):void 0,images:r.images.map(n=>({...n,timestamp:new Date(n.timestamp)})),chatHistory:r.chatHistory.map(n=>({...n,timestamp:new Date(n.timestamp)})),notifications:r.notifications.map(n=>({...n,scheduledFor:new Date(n.scheduledFor)}))}))}async deletePlant(e){await(await this.init()).delete("plants",e);const r=await this.getAllPlants();localStorage.setItem("plants",JSON.stringify(r))}async saveImageBlob(e,s,r){await(await this.init()).put("images",{id:e,plantId:s,blob:r,timestamp:new Date})}async getImageBlob(e){const r=await(await this.init()).get("images",e);return r==null?void 0:r.blob}async saveSetting(e,s){await(await this.init()).put("settings",{key:e,value:s})}async getSetting(e){const r=await(await this.init()).get("settings",e);return r==null?void 0:r.value}async exportData(){const e=await this.getAllPlants(),s={theme:await this.getSetting("theme"),notifications:await this.getSetting("notifications")};return JSON.stringify({plants:e,settings:s,exportDate:new Date().toISOString(),version:"1.0.0"},null,2)}async importData(e){try{const s=JSON.parse(e);if(s.plants)for(const r of s.plants)await this.savePlant(r);if(s.settings)for(const[r,n]of Object.entries(s.settings))n!==void 0&&await this.saveSetting(r,n)}catch(s){throw new Error("Invalid data format")}}async clearAllData(){const e=await this.init();await e.clear("plants"),await e.clear("images"),await e.clear("settings"),localStorage.removeItem("plants")}}const _e=new We,Ve=()=>{const{isDark:t,toggleTheme:e}=le(),{signOut:s,profile:r}=de(),n=me(),[o,i]=u.useState(!1),c=async()=>{if(window.confirm("¿Estás seguro de que quieres cerrar sesión?"))try{await s(),n("/auth")}catch(l){console.error("Error signing out:",l)}},d=()=>{i(!0)},f=async()=>{if(window.confirm("¿Estás seguro de que quieres eliminar todos tus datos? Esta acción es irreversible."))try{await _e.clearAllData(),await c()}catch(l){console.error("Error clearing data:",l)}};return{settingsSections:u.useMemo(()=>[{title:"Cuenta",items:[{id:"signout",icon:"LogOut",label:"Cerrar sesión",type:"button",onClick:c}]},{title:"Preferencias",items:[{id:"theme",icon:t?"Sun":"Moon",label:"Modo Oscuro",type:"toggle",toggleState:t,onToggleChange:e}]},{title:"Datos",items:[{id:"export",icon:"Download",label:"Exportar mis datos",type:"button",onClick:d,disabled:!r||!1},{id:"delete",icon:"Trash2",label:"Eliminar mis datos",type:"button",onClick:f,disabled:!r||!1}]},{title:"Soporte",items:[]}],[t,r,c,e]),isExportModalOpen:o,setIsExportModalOpen:i}},Ue=({title:t,children:e,delay:s=0})=>a.jsxs(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:s*.1},className:"space-y-3",children:[a.jsx("h2",{className:"text-lg font-bold text-foreground px-4",children:t}),a.jsx("div",{className:"bg-muted/50 rounded-2xl overflow-hidden",children:e})]});function qe(t,e,{checkForDefaultPrevented:s=!0}={}){return function(n){if(t==null||t(n),s===!1||!n.defaultPrevented)return e==null?void 0:e(n)}}function F(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function J(...t){return e=>{let s=!1;const r=t.map(n=>{const o=F(n,e);return!s&&typeof o=="function"&&(s=!0),o});if(s)return()=>{for(let n=0;n<r.length;n++){const o=r[n];typeof o=="function"?o():F(t[n],null)}}}}function H(...t){return u.useCallback(J(...t),t)}function Je(t,e=[]){let s=[];function r(o,i){const c=u.createContext(i),d=s.length;s=[...s,i];const f=l=>{var y;const{scope:m,children:x,...h}=l,b=((y=m==null?void 0:m[t])==null?void 0:y[d])||c,p=u.useMemo(()=>h,Object.values(h));return a.jsx(b.Provider,{value:p,children:x})};f.displayName=o+"Provider";function g(l,m){var b;const x=((b=m==null?void 0:m[t])==null?void 0:b[d])||c,h=u.useContext(x);if(h)return h;if(i!==void 0)return i;throw new Error(`\`${l}\` must be used within \`${o}\``)}return[f,g]}const n=()=>{const o=s.map(i=>u.createContext(i));return function(c){const d=(c==null?void 0:c[t])||o;return u.useMemo(()=>({[`__scope${t}`]:{...c,[t]:d}}),[c,d])}};return n.scopeName=t,[r,He(n,...e)]}function He(...t){const e=t[0];if(t.length===1)return e;const s=()=>{const r=t.map(n=>({useScope:n(),scopeName:n.scopeName}));return function(o){const i=r.reduce((c,{useScope:d,scopeName:f})=>{const l=d(o)[`__scope${f}`];return{...c,...l}},{});return u.useMemo(()=>({[`__scope${e.scopeName}`]:i}),[i])}};return s.scopeName=e.scopeName,s}var K=globalThis!=null&&globalThis.document?u.useLayoutEffect:()=>{},Ke=ie[" useInsertionEffect ".trim().toString()]||K;function Ge({prop:t,defaultProp:e,onChange:s=()=>{},caller:r}){const[n,o,i]=Xe({defaultProp:e,onChange:s}),c=t!==void 0,d=c?t:n;{const g=u.useRef(t!==void 0);u.useEffect(()=>{const l=g.current;l!==c&&console.warn(`${r} is changing from ${l?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),g.current=c},[c,r])}const f=u.useCallback(g=>{var l;if(c){const m=Qe(g)?g(t):g;m!==t&&((l=i.current)==null||l.call(i,m))}else o(g)},[c,t,o,i]);return[d,f]}function Xe({defaultProp:t,onChange:e}){const[s,r]=u.useState(t),n=u.useRef(s),o=u.useRef(e);return Ke(()=>{o.current=e},[e]),u.useEffect(()=>{var i;n.current!==s&&((i=o.current)==null||i.call(o,s),n.current=s)},[s,n]),[s,r,o]}function Qe(t){return typeof t=="function"}function Ze(t){const e=u.useRef({value:t,previous:t});return u.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}function Ye(t){const[e,s]=u.useState(void 0);return K(()=>{if(t){s({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(n=>{if(!Array.isArray(n)||!n.length)return;const o=n[0];let i,c;if("borderBoxSize"in o){const d=o.borderBoxSize,f=Array.isArray(d)?d[0]:d;i=f.inlineSize,c=f.blockSize}else i=t.offsetWidth,c=t.offsetHeight;s({width:i,height:c})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else s(void 0)},[t]),e}function et(t){const e=tt(t),s=u.forwardRef((r,n)=>{const{children:o,...i}=r,c=u.Children.toArray(o),d=c.find(rt);if(d){const f=d.props.children,g=c.map(l=>l===d?u.Children.count(f)>1?u.Children.only(null):u.isValidElement(f)?f.props.children:null:l);return a.jsx(e,{...i,ref:n,children:u.isValidElement(f)?u.cloneElement(f,void 0,g):null})}return a.jsx(e,{...i,ref:n,children:o})});return s.displayName=`${t}.Slot`,s}function tt(t){const e=u.forwardRef((s,r)=>{const{children:n,...o}=s;if(u.isValidElement(n)){const i=at(n),c=nt(o,n.props);return n.type!==u.Fragment&&(c.ref=r?J(r,i):i),u.cloneElement(n,c)}return u.Children.count(n)>1?u.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var st=Symbol("radix.slottable");function rt(t){return u.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===st}function nt(t,e){const s={...e};for(const r in e){const n=t[r],o=e[r];/^on[A-Z]/.test(r)?n&&o?s[r]=(...c)=>{const d=o(...c);return n(...c),d}:n&&(s[r]=n):r==="style"?s[r]={...n,...o}:r==="className"&&(s[r]=[n,o].filter(Boolean).join(" "))}return{...t,...s}}function at(t){var r,n;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,s=e&&"isReactWarning"in e&&e.isReactWarning;return s?t.ref:(e=(n=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:n.get,s=e&&"isReactWarning"in e&&e.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}var ot=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],G=ot.reduce((t,e)=>{const s=et(`Primitive.${e}`),r=u.forwardRef((n,o)=>{const{asChild:i,...c}=n,d=i?s:e;return typeof window!="undefined"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(d,{...c,ref:o})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),k="Switch",[it,St]=Je(k),[ct,lt]=it(k),X=u.forwardRef((t,e)=>{const{__scopeSwitch:s,name:r,checked:n,defaultChecked:o,required:i,disabled:c,value:d="on",onCheckedChange:f,form:g,...l}=t,[m,x]=u.useState(null),h=H(e,v=>x(v)),b=u.useRef(!1),p=m?g||!!m.closest("form"):!0,[y,re]=Ge({prop:n,defaultProp:o!=null?o:!1,onChange:f,caller:k});return a.jsxs(ct,{scope:s,checked:y,disabled:c,children:[a.jsx(G.button,{type:"button",role:"switch","aria-checked":y,"aria-required":i,"data-state":ee(y),"data-disabled":c?"":void 0,disabled:c,value:d,...l,ref:h,onClick:qe(t.onClick,v=>{re(ne=>!ne),p&&(b.current=v.isPropagationStopped(),b.current||v.stopPropagation())})}),p&&a.jsx(Y,{control:m,bubbles:!b.current,name:r,value:d,checked:y,required:i,disabled:c,form:g,style:{transform:"translateX(-100%)"}})]})});X.displayName=k;var Q="SwitchThumb",Z=u.forwardRef((t,e)=>{const{__scopeSwitch:s,...r}=t,n=lt(Q,s);return a.jsx(G.span,{"data-state":ee(n.checked),"data-disabled":n.disabled?"":void 0,...r,ref:e})});Z.displayName=Q;var dt="SwitchBubbleInput",Y=u.forwardRef(({__scopeSwitch:t,control:e,checked:s,bubbles:r=!0,...n},o)=>{const i=u.useRef(null),c=H(i,o),d=Ze(s),f=Ye(e);return u.useEffect(()=>{const g=i.current;if(!g)return;const l=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(l,"checked").set;if(d!==s&&x){const h=new Event("click",{bubbles:r});x.call(g,s),g.dispatchEvent(h)}},[d,s,r]),a.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...n,tabIndex:-1,ref:c,style:{...n.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Y.displayName=dt;function ee(t){return t?"checked":"unchecked"}var te=X,ut=Z;const se=u.forwardRef(({className:t,...e},s)=>a.jsx(te,{className:S("peer inline-flex h-7 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:s,children:a.jsx(ut,{className:S("pointer-events-none block h-6 w-6 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));se.displayName=te.displayName;const W=({icon:t,label:e,value:s,onClick:r,isLast:n=!1,type:o="button",disabled:i=!1,toggleState:c=!1,onToggleChange:d})=>{const f=ce.useId(),g=a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-background",children:a.jsx(t,{size:18,className:"text-muted-foreground"})}),a.jsx("span",{className:"font-medium text-foreground",children:e})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[o==="button"&&a.jsxs(a.Fragment,{children:[s&&a.jsx("span",{className:"text-sm text-muted-foreground",children:s}),a.jsx(he,{size:16,className:"text-muted-foreground/50"})]}),o==="toggle"&&a.jsx(se,{id:f,checked:c,onCheckedChange:d,"aria-label":e})]})]}),l=S("flex w-full items-center justify-between p-3 text-left",!n&&"border-b border-background",r&&"transition-colors hover:bg-background/50");return o==="button"?a.jsx("button",{onClick:r,className:l,disabled:i,children:g}):a.jsx("label",{htmlFor:f,className:S(l,"cursor-pointer"),children:g})},ft=()=>{const[t,e]=u.useState(!1),{data:s=[]}=ue(),r=l=>l.toISOString().split("T")[0],n=l=>{if(l==null)return"";const m=String(l);return m.includes(",")||m.includes('"')||m.includes(`
`)?`"${m.replace(/"/g,'""')}"`:m},o=async l=>{e(!0);try{const m={exportDate:new Date().toISOString(),plantCount:s.length,plants:s.map(h=>{var b;return{id:h.id,name:h.name,nickname:h.nickname,species:h.species,location:h.location,plantEnvironment:h.plantEnvironment,lightRequirements:h.lightRequirements,healthScore:h.healthScore,lastWatered:(b=h.lastWatered)==null?void 0:b.toISOString(),...l.includeImages&&{profileImageUrl:h.profileImageUrl},...l.includeChats&&{chatHistory:[]}}}),metadata:{version:"1.0.0",source:"Plant Care Companion"}},x=new Blob([JSON.stringify(m,null,2)],{type:"application/json"});c(x,`plantas-backup-${r(new Date)}.json`)}catch(m){throw console.error("Error exporting to JSON:",m),new Error("Failed to export data as JSON")}finally{e(!1)}},i=async l=>{e(!0);try{const m=["ID","Nombre","Apodo","Especie","Ubicación","Ambiente","Luz Requerida","Puntuación Salud","Último Riego"];l.includeImages&&m.push("Imagen Principal");const x=[m.join(",")];s.forEach(p=>{const y=[n(p.id),n(p.name),n(p.nickname||""),n(p.species),n(p.location),n(p.plantEnvironment||""),n(p.lightRequirements||""),n(p.healthScore||""),n(p.lastWatered?r(p.lastWatered):"")];l.includeImages&&y.push(n(p.profileImageUrl||"")),x.push(y.join(","))});const h=x.join(`
`),b=new Blob([h],{type:"text/csv;charset=utf-8;"});c(b,`plantas-${r(new Date)}.csv`)}catch(m){throw console.error("Error exporting to CSV:",m),new Error("Failed to export data as CSV")}finally{e(!1)}},c=(l,m)=>{const x=URL.createObjectURL(l),h=document.createElement("a");h.href=x,h.download=m,document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(x)};return{exportData:async l=>{if(s.length===0)throw new Error("No hay plantas para exportar");switch(l.format){case"json":return o(l);case"csv":return i(l);default:throw new Error("Formato de exportación no soportado")}},isExporting:t,getExportSize:()=>{const l=s.length*1024,m=l/(1024*1024);return{plantCount:s.length,estimatedSize:m>1?`${m.toFixed(1)} MB`:`${Math.round(l/1024)} KB`}},createAutoBackup:async()=>{try{const l=localStorage.getItem("last-auto-backup"),m=new Date().getTime(),x=7*24*60*60*1e3;(!l||m-parseInt(l)>x)&&(await o({format:"json",includeImages:!1,includeChats:!1}),localStorage.setItem("last-auto-backup",m.toString()))}catch(l){console.warn("Auto-backup failed:",l)}},availableFormats:["json","csv"]}},mt=({isOpen:t,onClose:e})=>{const[s,r]=u.useState("json"),[n,o]=u.useState(!0),[i,c]=u.useState(!1),{exportData:d,isExporting:f,getExportSize:g}=ft(),{showSuccess:l,showError:m}=fe(),{plantCount:x,estimatedSize:h}=g(),b=async()=>{try{await d({format:s,includeImages:n,includeChats:i}),l("Exportación completada",`Se descargaron los datos de ${x} plantas en formato ${s.toUpperCase()}.`),e()}catch(p){m("Error en la exportación",p instanceof Error?p.message:"No se pudo completar la exportación.")}};return t?a.jsx(ge,{children:a.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:a.jsxs(_.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},onClick:p=>p.stopPropagation(),className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl max-w-lg w-full max-h-[90vh] overflow-hidden",children:[a.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center",children:a.jsx(E,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Exportar Datos"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Descarga una copia de tus datos de plantas"})]})]}),a.jsx("button",{onClick:e,disabled:f,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors p-1","aria-label":"Cerrar modal",children:a.jsx(pe,{className:"w-5 h-5"})})]})}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Plantas a exportar:"}),a.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:x})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm mt-2",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Tamaño estimado:"}),a.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:h})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Formato de archivo"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsx("button",{onClick:()=>r("json"),disabled:f,className:`
                    p-4 rounded-lg border-2 transition-all text-left
                    ${s==="json"?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}
                  `,children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(xe,{className:`w-5 h-5 ${s==="json"?"text-blue-600":"text-gray-500"}`}),a.jsxs("div",{children:[a.jsx("div",{className:`font-medium ${s==="json"?"text-blue-900 dark:text-blue-100":"text-gray-900 dark:text-gray-100"}`,children:"JSON"}),a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Completo, reimportable"})]})]})}),a.jsx("button",{onClick:()=>r("csv"),disabled:f,className:`
                    p-4 rounded-lg border-2 transition-all text-left
                    ${s==="csv"?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}
                  `,children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(be,{className:`w-5 h-5 ${s==="csv"?"text-blue-600":"text-gray-500"}`}),a.jsxs("div",{children:[a.jsx("div",{className:`font-medium ${s==="csv"?"text-blue-900 dark:text-blue-100":"text-gray-900 dark:text-gray-100"}`,children:"CSV"}),a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Para Excel/Sheets"})]})]})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Incluir en la exportación"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:n,onChange:p=>o(p.target.checked),disabled:f,className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),a.jsx(ye,{className:"w-4 h-4 text-gray-500"}),a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Metadatos de imágenes"})]}),a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer opacity-50",children:[a.jsx("input",{type:"checkbox",checked:i,onChange:p=>c(p.target.checked),disabled:!0,className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),a.jsx(we,{className:"w-4 h-4 text-gray-500"}),a.jsx("span",{className:"text-sm text-gray-500",children:"Historial de chat (próximamente)"})]})]})]}),a.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:a.jsxs("div",{className:"flex gap-3",children:[a.jsx(V,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"text-sm",children:[a.jsx("p",{className:"text-blue-800 dark:text-blue-200 font-medium mb-1",children:"Sobre la exportación"}),a.jsx("p",{className:"text-blue-700 dark:text-blue-300 leading-relaxed",children:"Los datos exportados incluyen toda la información de tus plantas: nombres, especies, cuidados, fechas de riego y ubicaciones. Las imágenes se incluyen como referencias URL."})]})]})})]}),a.jsxs("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex gap-3 justify-end",children:[a.jsx(M,{variant:"outline",onClick:e,disabled:f,children:"Cancelar"}),a.jsxs(M,{onClick:b,disabled:f||x===0,loading:f,className:"flex items-center gap-2",children:[a.jsx(E,{className:"w-4 h-4"}),f?"Exportando...":"Exportar Datos"]})]})]})})}):null},ht={User:Ie,LogOut:Ee,Sun:Ne,Moon:Ce,Bell:ke,Download:E,Trash2:je,HelpCircle:Se,Shield:ve,Info:V},jt=()=>{const{settingsSections:t,isExportModalOpen:e,setIsExportModalOpen:s}=Ve();return a.jsxs("div",{className:"p-4 space-y-6",children:[a.jsxs("header",{children:[a.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Configuración"}),a.jsx("p",{className:"text-muted-foreground",children:"Gestiona tu cuenta y preferencias de la app."})]}),t.map((r,n)=>a.jsx(Ue,{title:r.title,delay:n,children:r.items.map((o,i)=>{const c=ht[o.icon],d=i===r.items.length-1;return o.type==="toggle"?a.jsx(W,{icon:c,label:o.label,isLast:d,type:"toggle",toggleState:"toggleState"in o?o.toggleState:!1,onToggleChange:"onToggleChange"in o?o.onToggleChange:void 0},o.id):a.jsx(W,{icon:c,label:o.label,value:"value"in o&&typeof o.value=="string"?o.value:void 0,onClick:"onClick"in o?o.onClick:void 0,isLast:d,type:"button",disabled:"disabled"in o?o.disabled:!1},o.id)})},r.title)),a.jsx(mt,{isOpen:e,onClose:()=>s(!1)})]})};export{jt as default};
