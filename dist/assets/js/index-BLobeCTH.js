const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/Settings-B7yPfWTz.js","assets/js/query-D9cK7eLy.js","assets/js/vendor-ohv-86MT.js","assets/js/router-Lz5I7iQY.js","assets/js/ui-BaGPRaSD.js","assets/js/supabase-ChG5PfJU.js","assets/js/Auth-BULfOu3q.js"])))=>i.map(i=>d[i]);
var Ix=Object.defineProperty;var Dx=(e,t,r)=>t in e?Ix(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Bt=(e,t,r)=>Dx(e,typeof t!="symbol"?t+"":t,r);import{j as l,u as ho,a as $r,b as kh,Q as Sh,c as Nh}from"./query-D9cK7eLy.js";import{a as Vl,b as I,d as Mx,r as y,e as Ur}from"./vendor-ohv-86MT.js";import{c as $x,_ as Yl}from"./supabase-ChG5PfJU.js";import{u as it,a as Ph,L as zx,O as Rx,b as Xl,B as Lx,R as id,c as Kt,N as xs}from"./router-Lz5I7iQY.js";import{A as se,R as Eh,L as La,C as tr,B as Ql,I as Jl,a as Tt,b as Fx,c as dr,m as P,X as br,T as qt,d as on,P as ec,e as tc,H as _i,f as Sa,S as Bx,W as _h,g as Ah,h as Lr,i as Ve,j as zr,k as Ch,D as po,E as Ux,l as Gs,M as Fa,n as Oh,o as Wx,p as Hx,q as qx,U as Th,r as Zx,s as Kx,t as Ih,u as Dh,v as Gx,w as Mh,x as Ai,y as $h,z as Vx,F as od,G as rc,J as zh,K as Rh,N as sd,O as Yx,Q as Lh,V as nc,Y as Fh,Z as Xx,_ as Qx,$ as Jx,a0 as eb,a1 as tb,a2 as ld,a3 as rb,a4 as nb,a5 as Bh,a6 as Uh,a7 as Wh,a8 as ab,a9 as ib}from"./ui-BaGPRaSD.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var Vs={},cd=Vl;Vs.createRoot=cd.createRoot,Vs.hydrateRoot=cd.hydrateRoot;const ud=e=>{let t;const r=new Set,n=(u,d)=>{const f=typeof u=="function"?u(t):u;if(!Object.is(f,t)){const m=t;t=d??(typeof f!="object"||f===null)?f:Object.assign({},t,f),r.forEach(h=>h(t,m))}},a=()=>t,s={setState:n,getState:a,getInitialState:()=>c,subscribe:u=>(r.add(u),()=>r.delete(u))},c=t=e(n,a,s);return s},ob=e=>e?ud(e):ud,sb=e=>e;function lb(e,t=sb){const r=I.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return I.useDebugValue(r),r}const dd=e=>{const t=ob(e),r=n=>lb(t,n);return Object.assign(r,t),r},ac=e=>e?dd(e):dd,ic="https://cvvvybrkxypfsfcbmbcq.supabase.co",Hh="PENDING_REAL_CREDENTIALS",cb=()=>ic.includes("supabase.co")&&Hh.length>50,ba=!cb();ba&&console.warn("🚨 [DEVELOPMENT] Using mock auth - configure real Supabase credentials in .env");const pe=$x(ic,Hh,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"},global:{headers:{"X-Client-Info":"plantitas-app"}},realtime:{timeout:1e4}}),ub=Object.freeze(Object.defineProperty({__proto__:null,shouldUseMockAuth:ba,supabase:pe,supabaseUrl:ic},Symbol.toStringTag,{value:"Module"}));class db{constructor(){Bt(this,"cache",new Map);Bt(this,"CACHE_DURATIONS",{GARDEN_CONTEXT:5*60*1e3,GARDEN_SUMMARY:3*60*1e3,SUGGESTED_QUESTIONS:10*60*1e3,PLANT_DATA:2*60*1e3})}getCacheKey(t,r){return`${t}:${r}`}isValidCache(t){return t?Date.now()<t.expiresAt:!1}getCachedData(t){const r=this.cache.get(t);return this.isValidCache(r)?r.data:(r&&this.cache.delete(t),null)}setCachedData(t,r,n){const a={data:r,timestamp:Date.now(),expiresAt:Date.now()+n};this.cache.set(t,a),console.log(`[GardenCache] Cache SET for key: ${t}, expires in ${n/1e3}s`)}getGardenContext(t){const r=this.getCacheKey(t,"garden_context");return this.getCachedData(r)}setGardenContext(t,r){const n=this.getCacheKey(t,"garden_context");this.setCachedData(n,r,this.CACHE_DURATIONS.GARDEN_CONTEXT)}getGardenSummary(t){const r=this.getCacheKey(t,"garden_summary");return this.getCachedData(r)}setGardenSummary(t,r){const n=this.getCacheKey(t,"garden_summary");this.setCachedData(n,r,this.CACHE_DURATIONS.GARDEN_SUMMARY)}getSuggestedQuestions(t){const r=this.getCacheKey(t,"suggested_questions");return this.getCachedData(r)}setSuggestedQuestions(t,r){const n=this.getCacheKey(t,"suggested_questions");this.setCachedData(n,r,this.CACHE_DURATIONS.SUGGESTED_QUESTIONS)}getPlantData(t){const r=this.getCacheKey(t,"plant_data");return this.getCachedData(r)}setPlantData(t,r){const n=this.getCacheKey(t,"plant_data");this.setCachedData(n,r,this.CACHE_DURATIONS.PLANT_DATA)}invalidateCache(t,r){r?r.forEach(n=>{const a=this.getCacheKey(t,n);this.cache.delete(a),console.log(`[GardenCache] Invalidated cache for key: ${a}`)}):Array.from(this.cache.keys()).filter(a=>a.startsWith(`${t}:`)).forEach(a=>{this.cache.delete(a),console.log(`[GardenCache] Invalidated cache for key: ${a}`)})}invalidateOnPlantChange(t){console.log("[GardenCache] Plant data changed, invalidating related caches"),this.invalidateCache(t,["garden_context","garden_summary","plant_data","suggested_questions"])}getCacheStats(t){const r=Array.from(this.cache.keys()),n=r.filter(o=>o.startsWith(`${t}:`));let a=0,i=0;return n.forEach(o=>{const s=this.cache.get(o);s&&(this.isValidCache(s)?a++:i++)}),{totalEntries:r.length,userEntries:n.length,validEntries:a,expiredEntries:i}}cleanup(){const t=Date.now(),r=[];this.cache.forEach((n,a)=>{t>=n.expiresAt&&r.push(a)}),r.forEach(n=>{this.cache.delete(n)}),r.length>0&&console.log(`[GardenCache] Cleaned up ${r.length} expired entries`)}clearAll(){this.cache.size,this.cache.clear()}}const Dn=new db;typeof window<"u"&&setInterval(()=>{Dn.cleanup()},5*60*1e3);function A(e,t,r){function n(s,c){var u;Object.defineProperty(s,"_zod",{value:s._zod??{},enumerable:!1}),(u=s._zod).traits??(u.traits=new Set),s._zod.traits.add(e),t(s,c);for(const d in o.prototype)d in s||Object.defineProperty(s,d,{value:o.prototype[d].bind(s)});s._zod.constr=o,s._zod.def=c}const a=r?.Parent??Object;class i extends a{}Object.defineProperty(i,"name",{value:e});function o(s){var c;const u=r?.Parent?new i:this;n(u,s),(c=u._zod).deferred??(c.deferred=[]);for(const d of u._zod.deferred)d();return u}return Object.defineProperty(o,"init",{value:n}),Object.defineProperty(o,Symbol.hasInstance,{value:s=>r?.Parent&&s instanceof r.Parent?!0:s?._zod?.traits?.has(e)}),Object.defineProperty(o,"name",{value:e}),o}class Na extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const qh={};function fn(e){return qh}function fb(e){const t=Object.values(e).filter(n=>typeof n=="number");return Object.entries(e).filter(([n,a])=>t.indexOf(+n)===-1).map(([n,a])=>a)}function mb(e,t){return typeof t=="bigint"?t.toString():t}function Zh(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function oc(e){return e==null}function sc(e){const t=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}function hb(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,a=r>n?r:n,i=Number.parseInt(e.toFixed(a).replace(".","")),o=Number.parseInt(t.toFixed(a).replace(".",""));return i%o/10**a}function xe(e,t,r){Object.defineProperty(e,t,{get(){{const n=r();return e[t]=n,n}},set(n){Object.defineProperty(e,t,{value:n})},configurable:!0})}function lc(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function na(e){return JSON.stringify(e)}const Kh=Error.captureStackTrace?Error.captureStackTrace:(...e)=>{};function Ys(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const pb=Zh(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function Xs(e){if(Ys(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(Ys(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}const gb=new Set(["string","number","symbol"]);function go(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function xn(e,t,r){const n=new e._zod.constr(t??e._zod.def);return(!t||r?.parent)&&(n._zod.parent=e),n}function W(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if(t?.message!==void 0){if(t?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function vb(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const yb={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function xb(e,t){const r={},n=e._zod.def;for(const a in t){if(!(a in n.shape))throw new Error(`Unrecognized key: "${a}"`);t[a]&&(r[a]=n.shape[a])}return xn(e,{...e._zod.def,shape:r,checks:[]})}function bb(e,t){const r={...e._zod.def.shape},n=e._zod.def;for(const a in t){if(!(a in n.shape))throw new Error(`Unrecognized key: "${a}"`);t[a]&&delete r[a]}return xn(e,{...e._zod.def,shape:r,checks:[]})}function wb(e,t){if(!Xs(t))throw new Error("Invalid input to extend: expected a plain object");const r={...e._zod.def,get shape(){const n={...e._zod.def.shape,...t};return lc(this,"shape",n),n},checks:[]};return xn(e,r)}function jb(e,t){return xn(e,{...e._zod.def,get shape(){const r={...e._zod.def.shape,...t._zod.def.shape};return lc(this,"shape",r),r},catchall:t._zod.def.catchall,checks:[]})}function kb(e,t,r){const n=t._zod.def.shape,a={...n};if(r)for(const i in r){if(!(i in n))throw new Error(`Unrecognized key: "${i}"`);r[i]&&(a[i]=e?new e({type:"optional",innerType:n[i]}):n[i])}else for(const i in n)a[i]=e?new e({type:"optional",innerType:n[i]}):n[i];return xn(t,{...t._zod.def,shape:a,checks:[]})}function Sb(e,t,r){const n=t._zod.def.shape,a={...n};if(r)for(const i in r){if(!(i in a))throw new Error(`Unrecognized key: "${i}"`);r[i]&&(a[i]=new e({type:"nonoptional",innerType:n[i]}))}else for(const i in n)a[i]=new e({type:"nonoptional",innerType:n[i]});return xn(t,{...t._zod.def,shape:a,checks:[]})}function wa(e,t=0){for(let r=t;r<e.issues.length;r++)if(e.issues[r]?.continue!==!0)return!0;return!1}function cc(e,t){return t.map(r=>{var n;return(n=r).path??(n.path=[]),r.path.unshift(e),r})}function ni(e){return typeof e=="string"?e:e?.message}function mn(e,t,r){const n={...e,path:e.path??[]};if(!e.message){const a=ni(e.inst?._zod.def?.error?.(e))??ni(t?.error?.(e))??ni(r.customError?.(e))??ni(r.localeError?.(e))??"Invalid input";n.message=a}return delete n.inst,delete n.continue,t?.reportInput||delete n.input,n}function uc(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function Pa(...e){const[t,r,n]=e;return typeof t=="string"?{message:t,code:"custom",input:r,inst:n}:{...t}}const Gh=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),Object.defineProperty(e,"message",{get(){return JSON.stringify(t,mb,2)},enumerable:!0}),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},Vh=A("$ZodError",Gh),Yh=A("$ZodError",Gh,{Parent:Error});function Nb(e,t=r=>r.message){const r={},n=[];for(const a of e.issues)a.path.length>0?(r[a.path[0]]=r[a.path[0]]||[],r[a.path[0]].push(t(a))):n.push(t(a));return{formErrors:n,fieldErrors:r}}function Pb(e,t){const r=t||function(i){return i.message},n={_errors:[]},a=i=>{for(const o of i.issues)if(o.code==="invalid_union"&&o.errors.length)o.errors.map(s=>a({issues:s}));else if(o.code==="invalid_key")a({issues:o.issues});else if(o.code==="invalid_element")a({issues:o.issues});else if(o.path.length===0)n._errors.push(r(o));else{let s=n,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(s[u]=s[u]||{_errors:[]},s[u]._errors.push(r(o))):s[u]=s[u]||{_errors:[]},s=s[u],c++}}};return a(e),n}const Eb=e=>(t,r,n,a)=>{const i=n?Object.assign(n,{async:!1}):{async:!1},o=t._zod.run({value:r,issues:[]},i);if(o instanceof Promise)throw new Na;if(o.issues.length){const s=new(a?.Err??e)(o.issues.map(c=>mn(c,i,fn())));throw Kh(s,a?.callee),s}return o.value},_b=e=>async(t,r,n,a)=>{const i=n?Object.assign(n,{async:!0}):{async:!0};let o=t._zod.run({value:r,issues:[]},i);if(o instanceof Promise&&(o=await o),o.issues.length){const s=new(a?.Err??e)(o.issues.map(c=>mn(c,i,fn())));throw Kh(s,a?.callee),s}return o.value},Xh=e=>(t,r,n)=>{const a=n?{...n,async:!1}:{async:!1},i=t._zod.run({value:r,issues:[]},a);if(i instanceof Promise)throw new Na;return i.issues.length?{success:!1,error:new(e??Vh)(i.issues.map(o=>mn(o,a,fn())))}:{success:!0,data:i.value}},Ab=Xh(Yh),Qh=e=>async(t,r,n)=>{const a=n?Object.assign(n,{async:!0}):{async:!0};let i=t._zod.run({value:r,issues:[]},a);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new e(i.issues.map(o=>mn(o,a,fn())))}:{success:!0,data:i.value}},Cb=Qh(Yh),Ob=/^[cC][^\s-]{8,}$/,Tb=/^[0-9a-z]+$/,Ib=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,Db=/^[0-9a-vA-V]{20}$/,Mb=/^[A-Za-z0-9]{27}$/,$b=/^[a-zA-Z0-9_-]{21}$/,zb=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,Rb=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,fd=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,Lb=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,Fb="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function Bb(){return new RegExp(Fb,"u")}const Ub=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Wb=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,Hb=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,qb=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Zb=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Jh=/^[A-Za-z0-9_-]*$/,Kb=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/,Gb=/^\+(?:[0-9]){6,14}[0-9]$/,ep="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",Vb=new RegExp(`^${ep}$`);function tp(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function Yb(e){return new RegExp(`^${tp(e)}$`)}function Xb(e){const t=tp({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-]\\d{2}:\\d{2})");const n=`${t}(?:${r.join("|")})`;return new RegExp(`^${ep}T(?:${n})$`)}const Qb=e=>{const t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},Jb=/^\d+$/,ew=/^-?\d+(?:\.\d+)?/i,tw=/true|false/i,rw=/^[^A-Z]*$/,nw=/^[^a-z]*$/,ut=A("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),rp={number:"number",bigint:"bigint",object:"date"},np=A("$ZodCheckLessThan",(e,t)=>{ut.init(e,t);const r=rp[typeof t.value];e._zod.onattach.push(n=>{const a=n._zod.bag,i=(t.inclusive?a.maximum:a.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<i&&(t.inclusive?a.maximum=t.value:a.exclusiveMaximum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value<=t.value:n.value<t.value)||n.issues.push({origin:r,code:"too_big",maximum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),ap=A("$ZodCheckGreaterThan",(e,t)=>{ut.init(e,t);const r=rp[typeof t.value];e._zod.onattach.push(n=>{const a=n._zod.bag,i=(t.inclusive?a.minimum:a.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>i&&(t.inclusive?a.minimum=t.value:a.exclusiveMinimum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value>=t.value:n.value>t.value)||n.issues.push({origin:r,code:"too_small",minimum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),aw=A("$ZodCheckMultipleOf",(e,t)=>{ut.init(e,t),e._zod.onattach.push(r=>{var n;(n=r._zod.bag).multipleOf??(n.multipleOf=t.value)}),e._zod.check=r=>{if(typeof r.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof r.value=="bigint"?r.value%t.value===BigInt(0):hb(r.value,t.value)===0)||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:t.value,input:r.value,inst:e,continue:!t.abort})}}),iw=A("$ZodCheckNumberFormat",(e,t)=>{ut.init(e,t),t.format=t.format||"float64";const r=t.format?.includes("int"),n=r?"int":"number",[a,i]=yb[t.format];e._zod.onattach.push(o=>{const s=o._zod.bag;s.format=t.format,s.minimum=a,s.maximum=i,r&&(s.pattern=Jb)}),e._zod.check=o=>{const s=o.value;if(r){if(!Number.isInteger(s)){o.issues.push({expected:n,format:t.format,code:"invalid_type",input:s,inst:e});return}if(!Number.isSafeInteger(s)){s>0?o.issues.push({input:s,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,continue:!t.abort}):o.issues.push({input:s,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,continue:!t.abort});return}}s<a&&o.issues.push({origin:"number",input:s,code:"too_small",minimum:a,inclusive:!0,inst:e,continue:!t.abort}),s>i&&o.issues.push({origin:"number",input:s,code:"too_big",maximum:i,inst:e})}}),ow=A("$ZodCheckMaxLength",(e,t)=>{var r;ut.init(e,t),(r=e._zod.def).when??(r.when=n=>{const a=n.value;return!oc(a)&&a.length!==void 0}),e._zod.onattach.push(n=>{const a=n._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<a&&(n._zod.bag.maximum=t.maximum)}),e._zod.check=n=>{const a=n.value;if(a.length<=t.maximum)return;const o=uc(a);n.issues.push({origin:o,code:"too_big",maximum:t.maximum,inclusive:!0,input:a,inst:e,continue:!t.abort})}}),sw=A("$ZodCheckMinLength",(e,t)=>{var r;ut.init(e,t),(r=e._zod.def).when??(r.when=n=>{const a=n.value;return!oc(a)&&a.length!==void 0}),e._zod.onattach.push(n=>{const a=n._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>a&&(n._zod.bag.minimum=t.minimum)}),e._zod.check=n=>{const a=n.value;if(a.length>=t.minimum)return;const o=uc(a);n.issues.push({origin:o,code:"too_small",minimum:t.minimum,inclusive:!0,input:a,inst:e,continue:!t.abort})}}),lw=A("$ZodCheckLengthEquals",(e,t)=>{var r;ut.init(e,t),(r=e._zod.def).when??(r.when=n=>{const a=n.value;return!oc(a)&&a.length!==void 0}),e._zod.onattach.push(n=>{const a=n._zod.bag;a.minimum=t.length,a.maximum=t.length,a.length=t.length}),e._zod.check=n=>{const a=n.value,i=a.length;if(i===t.length)return;const o=uc(a),s=i>t.length;n.issues.push({origin:o,...s?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}}),vo=A("$ZodCheckStringFormat",(e,t)=>{var r,n;ut.init(e,t),e._zod.onattach.push(a=>{const i=a._zod.bag;i.format=t.format,t.pattern&&(i.patterns??(i.patterns=new Set),i.patterns.add(t.pattern))}),t.pattern?(r=e._zod).check??(r.check=a=>{t.pattern.lastIndex=0,!t.pattern.test(a.value)&&a.issues.push({origin:"string",code:"invalid_format",format:t.format,input:a.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(n=e._zod).check??(n.check=()=>{})}),cw=A("$ZodCheckRegex",(e,t)=>{vo.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),uw=A("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=rw),vo.init(e,t)}),dw=A("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=nw),vo.init(e,t)}),fw=A("$ZodCheckIncludes",(e,t)=>{ut.init(e,t);const r=go(t.includes),n=new RegExp(typeof t.position=="number"?`^.{${t.position}}${r}`:r);t.pattern=n,e._zod.onattach.push(a=>{const i=a._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(n)}),e._zod.check=a=>{a.value.includes(t.includes,t.position)||a.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:a.value,inst:e,continue:!t.abort})}}),mw=A("$ZodCheckStartsWith",(e,t)=>{ut.init(e,t);const r=new RegExp(`^${go(t.prefix)}.*`);t.pattern??(t.pattern=r),e._zod.onattach.push(n=>{const a=n._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(r)}),e._zod.check=n=>{n.value.startsWith(t.prefix)||n.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:n.value,inst:e,continue:!t.abort})}}),hw=A("$ZodCheckEndsWith",(e,t)=>{ut.init(e,t);const r=new RegExp(`.*${go(t.suffix)}$`);t.pattern??(t.pattern=r),e._zod.onattach.push(n=>{const a=n._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(r)}),e._zod.check=n=>{n.value.endsWith(t.suffix)||n.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:n.value,inst:e,continue:!t.abort})}}),pw=A("$ZodCheckOverwrite",(e,t)=>{ut.init(e,t),e._zod.check=r=>{r.value=t.tx(r.value)}});class gw{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const n=t.split(`
`).filter(o=>o),a=Math.min(...n.map(o=>o.length-o.trimStart().length)),i=n.map(o=>o.slice(a)).map(o=>" ".repeat(this.indent*2)+o);for(const o of i)this.content.push(o)}compile(){const t=Function,r=this?.args,a=[...(this?.content??[""]).map(i=>`  ${i}`)];return new t(...r,a.join(`
`))}}const vw={major:4,minor:0,patch:5},ke=A("$ZodType",(e,t)=>{var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=vw;const n=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&n.unshift(e);for(const a of n)for(const i of a._zod.onattach)i(e);if(n.length===0)(r=e._zod).deferred??(r.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const a=(i,o,s)=>{let c=wa(i),u;for(const d of o){if(d._zod.def.when){if(!d._zod.def.when(i))continue}else if(c)continue;const f=i.issues.length,m=d._zod.check(i);if(m instanceof Promise&&s?.async===!1)throw new Na;if(u||m instanceof Promise)u=(u??Promise.resolve()).then(async()=>{await m,i.issues.length!==f&&(c||(c=wa(i,f)))});else{if(i.issues.length===f)continue;c||(c=wa(i,f))}}return u?u.then(()=>i):i};e._zod.run=(i,o)=>{const s=e._zod.parse(i,o);if(s instanceof Promise){if(o.async===!1)throw new Na;return s.then(c=>a(c,n,o))}return a(s,n,o)}}e["~standard"]={validate:a=>{try{const i=Ab(e,a);return i.success?{value:i.data}:{issues:i.error?.issues}}catch{return Cb(e,a).then(o=>o.success?{value:o.data}:{issues:o.error?.issues})}},vendor:"zod",version:1}}),dc=A("$ZodString",(e,t)=>{ke.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??Qb(e._zod.bag),e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:e}),r}}),je=A("$ZodStringFormat",(e,t)=>{vo.init(e,t),dc.init(e,t)}),yw=A("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=Rb),je.init(e,t)}),xw=A("$ZodUUID",(e,t)=>{if(t.version){const n={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(n===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=fd(n))}else t.pattern??(t.pattern=fd());je.init(e,t)}),bw=A("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=Lb),je.init(e,t)}),ww=A("$ZodURL",(e,t)=>{je.init(e,t),e._zod.check=r=>{try{const n=r.value,a=new URL(n),i=a.href;t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(a.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:Kb.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(a.protocol.endsWith(":")?a.protocol.slice(0,-1):a.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),!n.endsWith("/")&&i.endsWith("/")?r.value=i.slice(0,-1):r.value=i;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),jw=A("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=Bb()),je.init(e,t)}),kw=A("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=$b),je.init(e,t)}),Sw=A("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=Ob),je.init(e,t)}),Nw=A("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=Tb),je.init(e,t)}),Pw=A("$ZodULID",(e,t)=>{t.pattern??(t.pattern=Ib),je.init(e,t)}),Ew=A("$ZodXID",(e,t)=>{t.pattern??(t.pattern=Db),je.init(e,t)}),_w=A("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=Mb),je.init(e,t)}),Aw=A("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=Xb(t)),je.init(e,t)}),Cw=A("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=Vb),je.init(e,t)}),Ow=A("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=Yb(t)),je.init(e,t)}),Tw=A("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=zb),je.init(e,t)}),Iw=A("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=Ub),je.init(e,t),e._zod.onattach.push(r=>{const n=r._zod.bag;n.format="ipv4"})}),Dw=A("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=Wb),je.init(e,t),e._zod.onattach.push(r=>{const n=r._zod.bag;n.format="ipv6"}),e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),Mw=A("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=Hb),je.init(e,t)}),$w=A("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=qb),je.init(e,t),e._zod.check=r=>{const[n,a]=r.value.split("/");try{if(!a)throw new Error;const i=Number(a);if(`${i}`!==a)throw new Error;if(i<0||i>128)throw new Error;new URL(`http://[${n}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});function ip(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const zw=A("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=Zb),je.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64"}),e._zod.check=r=>{ip(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}});function Rw(e){if(!Jh.test(e))return!1;const t=e.replace(/[-_]/g,n=>n==="-"?"+":"/"),r=t.padEnd(Math.ceil(t.length/4)*4,"=");return ip(r)}const Lw=A("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=Jh),je.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64url"}),e._zod.check=r=>{Rw(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),Fw=A("$ZodE164",(e,t)=>{t.pattern??(t.pattern=Gb),je.init(e,t)});function Bw(e,t=null){try{const r=e.split(".");if(r.length!==3)return!1;const[n]=r;if(!n)return!1;const a=JSON.parse(atob(n));return!("typ"in a&&a?.typ!=="JWT"||!a.alg||t&&(!("alg"in a)||a.alg!==t))}catch{return!1}}const Uw=A("$ZodJWT",(e,t)=>{je.init(e,t),e._zod.check=r=>{Bw(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),op=A("$ZodNumber",(e,t)=>{ke.init(e,t),e._zod.pattern=e._zod.bag.pattern??ew,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=Number(r.value)}catch{}const a=r.value;if(typeof a=="number"&&!Number.isNaN(a)&&Number.isFinite(a))return r;const i=typeof a=="number"?Number.isNaN(a)?"NaN":Number.isFinite(a)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:a,inst:e,...i?{received:i}:{}}),r}}),Ww=A("$ZodNumber",(e,t)=>{iw.init(e,t),op.init(e,t)}),Hw=A("$ZodBoolean",(e,t)=>{ke.init(e,t),e._zod.pattern=tw,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=!!r.value}catch{}const a=r.value;return typeof a=="boolean"||r.issues.push({expected:"boolean",code:"invalid_type",input:a,inst:e}),r}}),qw=A("$ZodUnknown",(e,t)=>{ke.init(e,t),e._zod.parse=r=>r}),Zw=A("$ZodNever",(e,t)=>{ke.init(e,t),e._zod.parse=(r,n)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:e}),r)}),Kw=A("$ZodDate",(e,t)=>{ke.init(e,t),e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=new Date(r.value)}catch{}const a=r.value,i=a instanceof Date;return i&&!Number.isNaN(a.getTime())||r.issues.push({expected:"date",code:"invalid_type",input:a,...i?{received:"Invalid Date"}:{},inst:e}),r}});function md(e,t,r){e.issues.length&&t.issues.push(...cc(r,e.issues)),t.value[r]=e.value}const Gw=A("$ZodArray",(e,t)=>{ke.init(e,t),e._zod.parse=(r,n)=>{const a=r.value;if(!Array.isArray(a))return r.issues.push({expected:"array",code:"invalid_type",input:a,inst:e}),r;r.value=Array(a.length);const i=[];for(let o=0;o<a.length;o++){const s=a[o],c=t.element._zod.run({value:s,issues:[]},n);c instanceof Promise?i.push(c.then(u=>md(u,r,o))):md(c,r,o)}return i.length?Promise.all(i).then(()=>r):r}});function ai(e,t,r){e.issues.length&&t.issues.push(...cc(r,e.issues)),t.value[r]=e.value}function hd(e,t,r,n){e.issues.length?n[r]===void 0?r in n?t.value[r]=void 0:t.value[r]=e.value:t.issues.push(...cc(r,e.issues)):e.value===void 0?r in n&&(t.value[r]=void 0):t.value[r]=e.value}const Vw=A("$ZodObject",(e,t)=>{ke.init(e,t);const r=Zh(()=>{const f=Object.keys(t.shape);for(const h of f)if(!(t.shape[h]instanceof ke))throw new Error(`Invalid element at key "${h}": expected a Zod schema`);const m=vb(t.shape);return{shape:t.shape,keys:f,keySet:new Set(f),numKeys:f.length,optionalKeys:new Set(m)}});xe(e._zod,"propValues",()=>{const f=t.shape,m={};for(const h in f){const p=f[h]._zod;if(p.values){m[h]??(m[h]=new Set);for(const v of p.values)m[h].add(v)}}return m});const n=f=>{const m=new gw(["shape","payload","ctx"]),h=r.value,p=w=>{const b=na(w);return`shape[${b}]._zod.run({ value: input[${b}], issues: [] }, ctx)`};m.write("const input = payload.value;");const v=Object.create(null);let g=0;for(const w of h.keys)v[w]=`key_${g++}`;m.write("const newResult = {}");for(const w of h.keys)if(h.optionalKeys.has(w)){const b=v[w];m.write(`const ${b} = ${p(w)};`);const j=na(w);m.write(`
        if (${b}.issues.length) {
          if (input[${j}] === undefined) {
            if (${j} in input) {
              newResult[${j}] = undefined;
            }
          } else {
            payload.issues = payload.issues.concat(
              ${b}.issues.map((iss) => ({
                ...iss,
                path: iss.path ? [${j}, ...iss.path] : [${j}],
              }))
            );
          }
        } else if (${b}.value === undefined) {
          if (${j} in input) newResult[${j}] = undefined;
        } else {
          newResult[${j}] = ${b}.value;
        }
        `)}else{const b=v[w];m.write(`const ${b} = ${p(w)};`),m.write(`
          if (${b}.issues.length) payload.issues = payload.issues.concat(${b}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${na(w)}, ...iss.path] : [${na(w)}]
          })));`),m.write(`newResult[${na(w)}] = ${b}.value`)}m.write("payload.value = newResult;"),m.write("return payload;");const x=m.compile();return(w,b)=>x(f,w,b)};let a;const i=Ys,o=!qh.jitless,c=o&&pb.value,u=t.catchall;let d;e._zod.parse=(f,m)=>{d??(d=r.value);const h=f.value;if(!i(h))return f.issues.push({expected:"object",code:"invalid_type",input:h,inst:e}),f;const p=[];if(o&&c&&m?.async===!1&&m.jitless!==!0)a||(a=n(t.shape)),f=a(f,m);else{f.value={};const b=d.shape;for(const j of d.keys){const k=b[j],S=k._zod.run({value:h[j],issues:[]},m),N=k._zod.optin==="optional"&&k._zod.optout==="optional";S instanceof Promise?p.push(S.then(C=>N?hd(C,f,j,h):ai(C,f,j))):N?hd(S,f,j,h):ai(S,f,j)}}if(!u)return p.length?Promise.all(p).then(()=>f):f;const v=[],g=d.keySet,x=u._zod,w=x.def.type;for(const b of Object.keys(h)){if(g.has(b))continue;if(w==="never"){v.push(b);continue}const j=x.run({value:h[b],issues:[]},m);j instanceof Promise?p.push(j.then(k=>ai(k,f,b))):ai(j,f,b)}return v.length&&f.issues.push({code:"unrecognized_keys",keys:v,input:h,inst:e}),p.length?Promise.all(p).then(()=>f):f}});function pd(e,t,r,n){for(const a of e)if(a.issues.length===0)return t.value=a.value,t;return t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(a=>a.issues.map(i=>mn(i,n,fn())))}),t}const Yw=A("$ZodUnion",(e,t)=>{ke.init(e,t),xe(e._zod,"optin",()=>t.options.some(r=>r._zod.optin==="optional")?"optional":void 0),xe(e._zod,"optout",()=>t.options.some(r=>r._zod.optout==="optional")?"optional":void 0),xe(e._zod,"values",()=>{if(t.options.every(r=>r._zod.values))return new Set(t.options.flatMap(r=>Array.from(r._zod.values)))}),xe(e._zod,"pattern",()=>{if(t.options.every(r=>r._zod.pattern)){const r=t.options.map(n=>n._zod.pattern);return new RegExp(`^(${r.map(n=>sc(n.source)).join("|")})$`)}}),e._zod.parse=(r,n)=>{let a=!1;const i=[];for(const o of t.options){const s=o._zod.run({value:r.value,issues:[]},n);if(s instanceof Promise)i.push(s),a=!0;else{if(s.issues.length===0)return s;i.push(s)}}return a?Promise.all(i).then(o=>pd(o,r,e,n)):pd(i,r,e,n)}}),Xw=A("$ZodIntersection",(e,t)=>{ke.init(e,t),e._zod.parse=(r,n)=>{const a=r.value,i=t.left._zod.run({value:a,issues:[]},n),o=t.right._zod.run({value:a,issues:[]},n);return i instanceof Promise||o instanceof Promise?Promise.all([i,o]).then(([c,u])=>gd(r,c,u)):gd(r,i,o)}});function Qs(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(Xs(e)&&Xs(t)){const r=Object.keys(t),n=Object.keys(e).filter(i=>r.indexOf(i)!==-1),a={...e,...t};for(const i of n){const o=Qs(e[i],t[i]);if(!o.valid)return{valid:!1,mergeErrorPath:[i,...o.mergeErrorPath]};a[i]=o.data}return{valid:!0,data:a}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let n=0;n<e.length;n++){const a=e[n],i=t[n],o=Qs(a,i);if(!o.valid)return{valid:!1,mergeErrorPath:[n,...o.mergeErrorPath]};r.push(o.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function gd(e,t,r){if(t.issues.length&&e.issues.push(...t.issues),r.issues.length&&e.issues.push(...r.issues),wa(e))return e;const n=Qs(t.value,r.value);if(!n.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(n.mergeErrorPath)}`);return e.value=n.data,e}const Qw=A("$ZodEnum",(e,t)=>{ke.init(e,t);const r=fb(t.entries);e._zod.values=new Set(r),e._zod.pattern=new RegExp(`^(${r.filter(n=>gb.has(typeof n)).map(n=>typeof n=="string"?go(n):n.toString()).join("|")})$`),e._zod.parse=(n,a)=>{const i=n.value;return e._zod.values.has(i)||n.issues.push({code:"invalid_value",values:r,input:i,inst:e}),n}}),Jw=A("$ZodTransform",(e,t)=>{ke.init(e,t),e._zod.parse=(r,n)=>{const a=t.transform(r.value,r);if(n.async)return(a instanceof Promise?a:Promise.resolve(a)).then(o=>(r.value=o,r));if(a instanceof Promise)throw new Na;return r.value=a,r}}),e1=A("$ZodOptional",(e,t)=>{ke.init(e,t),e._zod.optin="optional",e._zod.optout="optional",xe(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),xe(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${sc(r.source)})?$`):void 0}),e._zod.parse=(r,n)=>t.innerType._zod.optin==="optional"?t.innerType._zod.run(r,n):r.value===void 0?r:t.innerType._zod.run(r,n)}),t1=A("$ZodNullable",(e,t)=>{ke.init(e,t),xe(e._zod,"optin",()=>t.innerType._zod.optin),xe(e._zod,"optout",()=>t.innerType._zod.optout),xe(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${sc(r.source)}|null)$`):void 0}),xe(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(r,n)=>r.value===null?r:t.innerType._zod.run(r,n)}),r1=A("$ZodDefault",(e,t)=>{ke.init(e,t),e._zod.optin="optional",xe(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{if(r.value===void 0)return r.value=t.defaultValue,r;const a=t.innerType._zod.run(r,n);return a instanceof Promise?a.then(i=>vd(i,t)):vd(a,t)}});function vd(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const n1=A("$ZodPrefault",(e,t)=>{ke.init(e,t),e._zod.optin="optional",xe(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>(r.value===void 0&&(r.value=t.defaultValue),t.innerType._zod.run(r,n))}),a1=A("$ZodNonOptional",(e,t)=>{ke.init(e,t),xe(e._zod,"values",()=>{const r=t.innerType._zod.values;return r?new Set([...r].filter(n=>n!==void 0)):void 0}),e._zod.parse=(r,n)=>{const a=t.innerType._zod.run(r,n);return a instanceof Promise?a.then(i=>yd(i,e)):yd(a,e)}});function yd(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const i1=A("$ZodCatch",(e,t)=>{ke.init(e,t),e._zod.optin="optional",xe(e._zod,"optout",()=>t.innerType._zod.optout),xe(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{const a=t.innerType._zod.run(r,n);return a instanceof Promise?a.then(i=>(r.value=i.value,i.issues.length&&(r.value=t.catchValue({...r,error:{issues:i.issues.map(o=>mn(o,n,fn()))},input:r.value}),r.issues=[]),r)):(r.value=a.value,a.issues.length&&(r.value=t.catchValue({...r,error:{issues:a.issues.map(i=>mn(i,n,fn()))},input:r.value}),r.issues=[]),r)}}),o1=A("$ZodPipe",(e,t)=>{ke.init(e,t),xe(e._zod,"values",()=>t.in._zod.values),xe(e._zod,"optin",()=>t.in._zod.optin),xe(e._zod,"optout",()=>t.out._zod.optout),xe(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(r,n)=>{const a=t.in._zod.run(r,n);return a instanceof Promise?a.then(i=>xd(i,t,n)):xd(a,t,n)}});function xd(e,t,r){return wa(e)?e:t.out._zod.run({value:e.value,issues:e.issues},r)}const s1=A("$ZodReadonly",(e,t)=>{ke.init(e,t),xe(e._zod,"propValues",()=>t.innerType._zod.propValues),xe(e._zod,"values",()=>t.innerType._zod.values),xe(e._zod,"optin",()=>t.innerType._zod.optin),xe(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(r,n)=>{const a=t.innerType._zod.run(r,n);return a instanceof Promise?a.then(bd):bd(a)}});function bd(e){return e.value=Object.freeze(e.value),e}const l1=A("$ZodCustom",(e,t)=>{ut.init(e,t),ke.init(e,t),e._zod.parse=(r,n)=>r,e._zod.check=r=>{const n=r.value,a=t.fn(n);if(a instanceof Promise)return a.then(i=>wd(i,r,n,e));wd(a,r,n,e)}});function wd(e,t,r,n){if(!e){const a={code:"custom",input:r,inst:n,path:[...n._zod.def.path??[]],continue:!n._zod.def.abort};n._zod.def.params&&(a.params=n._zod.def.params),t.issues.push(Pa(a))}}class c1{constructor(){this._map=new Map,this._idmap=new Map}add(t,...r){const n=r[0];if(this._map.set(t,n),n&&typeof n=="object"&&"id"in n){if(this._idmap.has(n.id))throw new Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,t)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(t){const r=this._map.get(t);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(t),this}get(t){const r=t._zod.parent;if(r){const n={...this.get(r)??{}};return delete n.id,{...n,...this._map.get(t)}}return this._map.get(t)}has(t){return this._map.has(t)}}function u1(){return new c1}const ii=u1();function d1(e,t){return new e({type:"string",...W(t)})}function f1(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...W(t)})}function jd(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...W(t)})}function m1(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...W(t)})}function h1(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...W(t)})}function p1(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...W(t)})}function g1(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...W(t)})}function v1(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...W(t)})}function y1(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...W(t)})}function x1(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...W(t)})}function b1(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...W(t)})}function w1(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...W(t)})}function j1(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...W(t)})}function k1(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...W(t)})}function S1(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...W(t)})}function N1(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...W(t)})}function P1(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...W(t)})}function E1(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...W(t)})}function _1(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...W(t)})}function A1(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...W(t)})}function C1(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...W(t)})}function O1(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...W(t)})}function T1(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...W(t)})}function I1(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...W(t)})}function D1(e,t){return new e({type:"string",format:"date",check:"string_format",...W(t)})}function M1(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...W(t)})}function $1(e,t){return new e({type:"string",format:"duration",check:"string_format",...W(t)})}function z1(e,t){return new e({type:"number",checks:[],...W(t)})}function R1(e,t){return new e({type:"number",coerce:!0,checks:[],...W(t)})}function L1(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...W(t)})}function F1(e,t){return new e({type:"boolean",...W(t)})}function B1(e){return new e({type:"unknown"})}function U1(e,t){return new e({type:"never",...W(t)})}function W1(e,t){return new e({type:"date",...W(t)})}function kd(e,t){return new np({check:"less_than",...W(t),value:e,inclusive:!1})}function Si(e,t){return new np({check:"less_than",...W(t),value:e,inclusive:!0})}function Sd(e,t){return new ap({check:"greater_than",...W(t),value:e,inclusive:!1})}function Ni(e,t){return new ap({check:"greater_than",...W(t),value:e,inclusive:!0})}function Nd(e,t){return new aw({check:"multiple_of",...W(t),value:e})}function sp(e,t){return new ow({check:"max_length",...W(t),maximum:e})}function Ci(e,t){return new sw({check:"min_length",...W(t),minimum:e})}function lp(e,t){return new lw({check:"length_equals",...W(t),length:e})}function H1(e,t){return new cw({check:"string_format",format:"regex",...W(t),pattern:e})}function q1(e){return new uw({check:"string_format",format:"lowercase",...W(e)})}function Z1(e){return new dw({check:"string_format",format:"uppercase",...W(e)})}function K1(e,t){return new fw({check:"string_format",format:"includes",...W(t),includes:e})}function G1(e,t){return new mw({check:"string_format",format:"starts_with",...W(t),prefix:e})}function V1(e,t){return new hw({check:"string_format",format:"ends_with",...W(t),suffix:e})}function Ba(e){return new pw({check:"overwrite",tx:e})}function Y1(e){return Ba(t=>t.normalize(e))}function X1(){return Ba(e=>e.trim())}function Q1(){return Ba(e=>e.toLowerCase())}function J1(){return Ba(e=>e.toUpperCase())}function ej(e,t,r){return new e({type:"array",element:t,...W(r)})}function tj(e,t,r){return new e({type:"custom",check:"custom",fn:t,...W(r)})}const rj=A("ZodISODateTime",(e,t)=>{Aw.init(e,t),Se.init(e,t)});function nj(e){return I1(rj,e)}const aj=A("ZodISODate",(e,t)=>{Cw.init(e,t),Se.init(e,t)});function ij(e){return D1(aj,e)}const oj=A("ZodISOTime",(e,t)=>{Ow.init(e,t),Se.init(e,t)});function sj(e){return M1(oj,e)}const lj=A("ZodISODuration",(e,t)=>{Tw.init(e,t),Se.init(e,t)});function cj(e){return $1(lj,e)}const cp=(e,t)=>{Vh.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:r=>Pb(e,r)},flatten:{value:r=>Nb(e,r)},addIssue:{value:r=>e.issues.push(r)},addIssues:{value:r=>e.issues.push(...r)},isEmpty:{get(){return e.issues.length===0}}})},uj=A("ZodError",cp),yo=A("ZodError",cp,{Parent:Error}),dj=Eb(yo),fj=_b(yo),mj=Xh(yo),hj=Qh(yo),Ae=A("ZodType",(e,t)=>(ke.init(e,t),e.def=t,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone({...t,checks:[...t.checks??[],...r.map(n=>typeof n=="function"?{_zod:{check:n,def:{check:"custom"},onattach:[]}}:n)]}),e.clone=(r,n)=>xn(e,r,n),e.brand=()=>e,e.register=(r,n)=>(r.add(e,n),e),e.parse=(r,n)=>dj(e,r,n,{callee:e.parse}),e.safeParse=(r,n)=>mj(e,r,n),e.parseAsync=async(r,n)=>fj(e,r,n,{callee:e.parseAsync}),e.safeParseAsync=async(r,n)=>hj(e,r,n),e.spa=e.safeParseAsync,e.refine=(r,n)=>e.check(ok(r,n)),e.superRefine=r=>e.check(sk(r)),e.overwrite=r=>e.check(Ba(r)),e.optional=()=>Ad(e),e.nullable=()=>Cd(e),e.nullish=()=>Ad(Cd(e)),e.nonoptional=r=>Qj(e,r),e.array=()=>ne(e),e.or=r=>Uj([e,r]),e.and=r=>Hj(e,r),e.transform=r=>Od(e,Zj(r)),e.default=r=>Vj(e,r),e.prefault=r=>Xj(e,r),e.catch=r=>ek(e,r),e.pipe=r=>Od(e,r),e.readonly=()=>nk(e),e.describe=r=>{const n=e.clone();return ii.add(n,{description:r}),n},Object.defineProperty(e,"description",{get(){return ii.get(e)?.description},configurable:!0}),e.meta=(...r)=>{if(r.length===0)return ii.get(e);const n=e.clone();return ii.add(n,r[0]),n},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),up=A("_ZodString",(e,t)=>{dc.init(e,t),Ae.init(e,t);const r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...n)=>e.check(H1(...n)),e.includes=(...n)=>e.check(K1(...n)),e.startsWith=(...n)=>e.check(G1(...n)),e.endsWith=(...n)=>e.check(V1(...n)),e.min=(...n)=>e.check(Ci(...n)),e.max=(...n)=>e.check(sp(...n)),e.length=(...n)=>e.check(lp(...n)),e.nonempty=(...n)=>e.check(Ci(1,...n)),e.lowercase=n=>e.check(q1(n)),e.uppercase=n=>e.check(Z1(n)),e.trim=()=>e.check(X1()),e.normalize=(...n)=>e.check(Y1(...n)),e.toLowerCase=()=>e.check(Q1()),e.toUpperCase=()=>e.check(J1())}),pj=A("ZodString",(e,t)=>{dc.init(e,t),up.init(e,t),e.email=r=>e.check(f1(gj,r)),e.url=r=>e.check(v1(vj,r)),e.jwt=r=>e.check(T1(Tj,r)),e.emoji=r=>e.check(y1(yj,r)),e.guid=r=>e.check(jd(Pd,r)),e.uuid=r=>e.check(m1(oi,r)),e.uuidv4=r=>e.check(h1(oi,r)),e.uuidv6=r=>e.check(p1(oi,r)),e.uuidv7=r=>e.check(g1(oi,r)),e.nanoid=r=>e.check(x1(xj,r)),e.guid=r=>e.check(jd(Pd,r)),e.cuid=r=>e.check(b1(bj,r)),e.cuid2=r=>e.check(w1(wj,r)),e.ulid=r=>e.check(j1(jj,r)),e.base64=r=>e.check(A1(Aj,r)),e.base64url=r=>e.check(C1(Cj,r)),e.xid=r=>e.check(k1(kj,r)),e.ksuid=r=>e.check(S1(Sj,r)),e.ipv4=r=>e.check(N1(Nj,r)),e.ipv6=r=>e.check(P1(Pj,r)),e.cidrv4=r=>e.check(E1(Ej,r)),e.cidrv6=r=>e.check(_1(_j,r)),e.e164=r=>e.check(O1(Oj,r)),e.datetime=r=>e.check(nj(r)),e.date=r=>e.check(ij(r)),e.time=r=>e.check(sj(r)),e.duration=r=>e.check(cj(r))});function M(e){return d1(pj,e)}const Se=A("ZodStringFormat",(e,t)=>{je.init(e,t),up.init(e,t)}),gj=A("ZodEmail",(e,t)=>{bw.init(e,t),Se.init(e,t)}),Pd=A("ZodGUID",(e,t)=>{yw.init(e,t),Se.init(e,t)}),oi=A("ZodUUID",(e,t)=>{xw.init(e,t),Se.init(e,t)}),vj=A("ZodURL",(e,t)=>{ww.init(e,t),Se.init(e,t)}),yj=A("ZodEmoji",(e,t)=>{jw.init(e,t),Se.init(e,t)}),xj=A("ZodNanoID",(e,t)=>{kw.init(e,t),Se.init(e,t)}),bj=A("ZodCUID",(e,t)=>{Sw.init(e,t),Se.init(e,t)}),wj=A("ZodCUID2",(e,t)=>{Nw.init(e,t),Se.init(e,t)}),jj=A("ZodULID",(e,t)=>{Pw.init(e,t),Se.init(e,t)}),kj=A("ZodXID",(e,t)=>{Ew.init(e,t),Se.init(e,t)}),Sj=A("ZodKSUID",(e,t)=>{_w.init(e,t),Se.init(e,t)}),Nj=A("ZodIPv4",(e,t)=>{Iw.init(e,t),Se.init(e,t)}),Pj=A("ZodIPv6",(e,t)=>{Dw.init(e,t),Se.init(e,t)}),Ej=A("ZodCIDRv4",(e,t)=>{Mw.init(e,t),Se.init(e,t)}),_j=A("ZodCIDRv6",(e,t)=>{$w.init(e,t),Se.init(e,t)}),Aj=A("ZodBase64",(e,t)=>{zw.init(e,t),Se.init(e,t)}),Cj=A("ZodBase64URL",(e,t)=>{Lw.init(e,t),Se.init(e,t)}),Oj=A("ZodE164",(e,t)=>{Fw.init(e,t),Se.init(e,t)}),Tj=A("ZodJWT",(e,t)=>{Uw.init(e,t),Se.init(e,t)}),fc=A("ZodNumber",(e,t)=>{op.init(e,t),Ae.init(e,t),e.gt=(n,a)=>e.check(Sd(n,a)),e.gte=(n,a)=>e.check(Ni(n,a)),e.min=(n,a)=>e.check(Ni(n,a)),e.lt=(n,a)=>e.check(kd(n,a)),e.lte=(n,a)=>e.check(Si(n,a)),e.max=(n,a)=>e.check(Si(n,a)),e.int=n=>e.check(Ed(n)),e.safe=n=>e.check(Ed(n)),e.positive=n=>e.check(Sd(0,n)),e.nonnegative=n=>e.check(Ni(0,n)),e.negative=n=>e.check(kd(0,n)),e.nonpositive=n=>e.check(Si(0,n)),e.multipleOf=(n,a)=>e.check(Nd(n,a)),e.step=(n,a)=>e.check(Nd(n,a)),e.finite=()=>e;const r=e._zod.bag;e.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),e.isFinite=!0,e.format=r.format??null});function hn(e){return z1(fc,e)}const Ij=A("ZodNumberFormat",(e,t)=>{Ww.init(e,t),fc.init(e,t)});function Ed(e){return L1(Ij,e)}const Dj=A("ZodBoolean",(e,t)=>{Hw.init(e,t),Ae.init(e,t)});function dp(e){return F1(Dj,e)}const Mj=A("ZodUnknown",(e,t)=>{qw.init(e,t),Ae.init(e,t)});function _d(){return B1(Mj)}const $j=A("ZodNever",(e,t)=>{Zw.init(e,t),Ae.init(e,t)});function zj(e){return U1($j,e)}const Rj=A("ZodDate",(e,t)=>{Kw.init(e,t),Ae.init(e,t),e.min=(n,a)=>e.check(Ni(n,a)),e.max=(n,a)=>e.check(Si(n,a));const r=e._zod.bag;e.minDate=r.minimum?new Date(r.minimum):null,e.maxDate=r.maximum?new Date(r.maximum):null});function Jt(e){return W1(Rj,e)}const Lj=A("ZodArray",(e,t)=>{Gw.init(e,t),Ae.init(e,t),e.element=t.element,e.min=(r,n)=>e.check(Ci(r,n)),e.nonempty=r=>e.check(Ci(1,r)),e.max=(r,n)=>e.check(sp(r,n)),e.length=(r,n)=>e.check(lp(r,n)),e.unwrap=()=>e.element});function ne(e,t){return ej(Lj,e,t)}const Fj=A("ZodObject",(e,t)=>{Vw.init(e,t),Ae.init(e,t),xe(e,"shape",()=>t.shape),e.keyof=()=>de(Object.keys(e._zod.def.shape)),e.catchall=r=>e.clone({...e._zod.def,catchall:r}),e.passthrough=()=>e.clone({...e._zod.def,catchall:_d()}),e.loose=()=>e.clone({...e._zod.def,catchall:_d()}),e.strict=()=>e.clone({...e._zod.def,catchall:zj()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=r=>wb(e,r),e.merge=r=>jb(e,r),e.pick=r=>xb(e,r),e.omit=r=>bb(e,r),e.partial=(...r)=>kb(fp,e,r[0]),e.required=(...r)=>Sb(mp,e,r[0])});function oe(e,t){const r={type:"object",get shape(){return lc(this,"shape",{...e}),this.shape},...W(t)};return new Fj(r)}const Bj=A("ZodUnion",(e,t)=>{Yw.init(e,t),Ae.init(e,t),e.options=t.options});function Uj(e,t){return new Bj({type:"union",options:e,...W(t)})}const Wj=A("ZodIntersection",(e,t)=>{Xw.init(e,t),Ae.init(e,t)});function Hj(e,t){return new Wj({type:"intersection",left:e,right:t})}const Js=A("ZodEnum",(e,t)=>{Qw.init(e,t),Ae.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const r=new Set(Object.keys(t.entries));e.extract=(n,a)=>{const i={};for(const o of n)if(r.has(o))i[o]=t.entries[o];else throw new Error(`Key ${o} not found in enum`);return new Js({...t,checks:[],...W(a),entries:i})},e.exclude=(n,a)=>{const i={...t.entries};for(const o of n)if(r.has(o))delete i[o];else throw new Error(`Key ${o} not found in enum`);return new Js({...t,checks:[],...W(a),entries:i})}});function de(e,t){const r=Array.isArray(e)?Object.fromEntries(e.map(n=>[n,n])):e;return new Js({type:"enum",entries:r,...W(t)})}const qj=A("ZodTransform",(e,t)=>{Jw.init(e,t),Ae.init(e,t),e._zod.parse=(r,n)=>{r.addIssue=i=>{if(typeof i=="string")r.issues.push(Pa(i,r.value,t));else{const o=i;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=r.value),o.inst??(o.inst=e),o.continue??(o.continue=!0),r.issues.push(Pa(o))}};const a=t.transform(r.value,r);return a instanceof Promise?a.then(i=>(r.value=i,r)):(r.value=a,r)}});function Zj(e){return new qj({type:"transform",transform:e})}const fp=A("ZodOptional",(e,t)=>{e1.init(e,t),Ae.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Ad(e){return new fp({type:"optional",innerType:e})}const Kj=A("ZodNullable",(e,t)=>{t1.init(e,t),Ae.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Cd(e){return new Kj({type:"nullable",innerType:e})}const Gj=A("ZodDefault",(e,t)=>{r1.init(e,t),Ae.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function Vj(e,t){return new Gj({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const Yj=A("ZodPrefault",(e,t)=>{n1.init(e,t),Ae.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Xj(e,t){return new Yj({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const mp=A("ZodNonOptional",(e,t)=>{a1.init(e,t),Ae.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Qj(e,t){return new mp({type:"nonoptional",innerType:e,...W(t)})}const Jj=A("ZodCatch",(e,t)=>{i1.init(e,t),Ae.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function ek(e,t){return new Jj({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const tk=A("ZodPipe",(e,t)=>{o1.init(e,t),Ae.init(e,t),e.in=t.in,e.out=t.out});function Od(e,t){return new tk({type:"pipe",in:e,out:t})}const rk=A("ZodReadonly",(e,t)=>{s1.init(e,t),Ae.init(e,t)});function nk(e){return new rk({type:"readonly",innerType:e})}const ak=A("ZodCustom",(e,t)=>{l1.init(e,t),Ae.init(e,t)});function ik(e){const t=new ut({check:"custom"});return t._zod.check=e,t}function ok(e,t={}){return tj(ak,e,t)}function sk(e){const t=ik(r=>(r.addIssue=n=>{if(typeof n=="string")r.issues.push(Pa(n,r.value,t._zod.def));else{const a=n;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=r.value),a.inst??(a.inst=t),a.continue??(a.continue=!t._zod.def.abort),r.issues.push(Pa(a))}},e(r.value,r)));return t}function Xt(e){return R1(fc,e)}const hp=oe({type:de(["overwatering","underwatering","pest","disease","nutrient","light","other"]),severity:de(["low","medium","high"]),description:M().min(1),treatment:M().min(1)}),pp=oe({overallHealth:de(["excellent","good","fair","poor"]),issues:ne(hp),recommendations:ne(M()),moistureLevel:Xt().min(0).max(100),growthStage:de(["seedling","juvenile","mature","flowering","dormant"]),confidence:Xt().min(0).max(100)}),gp=oe({wateringFrequency:Xt().positive(),sunlightRequirement:de(["low","medium","high"]),humidityPreference:de(["low","medium","high"]),temperatureRange:oe({min:Xt(),max:Xt()}),fertilizingFrequency:Xt().positive(),soilType:M().min(1),specialCare:ne(M()).optional()}),vp=oe({traits:ne(M()).min(1),communicationStyle:de(["cheerful","wise","dramatic","calm","playful"]),catchphrases:ne(M()),moodFactors:oe({health:Xt().min(0).max(1),care:Xt().min(0).max(1),attention:Xt().min(0).max(1)})}),lk=oe({species:M(),commonName:M(),variety:M().nullable().optional(),confidence:Xt().min(0).max(100),generalDescription:M().min(20),funFacts:ne(M()),plantEnvironment:de(["interior","exterior","ambos"]),lightRequirements:de(["poca_luz","luz_indirecta","luz_directa_parcial","pleno_sol"]),health:pp,careProfile:gp,personality:vp}),yp=oe({type:de(["info","warning","tip","alert"]),title:M(),message:M()}),ck=ne(yp),uk=Object.freeze(Object.defineProperty({__proto__:null,AIAnalysisResponseSchema:lk,CareProfileSchema:gp,HealthAnalysisSchema:pp,HealthIssueSchema:hp,InsightResponseSchema:ck,InsightSchema:yp,PlantPersonalitySchema:vp},Symbol.toStringTag,{value:"Module"})),{HealthAnalysisSchema:dk,CareProfileSchema:fk,PlantPersonalitySchema:mk,InsightResponseSchema:hk}=uk,pk=oe({id:M().min(1,"Image ID is required"),url:M().url("Must be a valid URL"),timestamp:Jt(),healthAnalysis:dk.optional(),isProfileImage:dp()}),gk=oe({id:M().min(1,"Message ID is required"),sender:de(["user","plant","system"]),content:M().min(1,"Message content cannot be empty"),timestamp:Jt(),emotion:de(["alegre","triste","enojado","neutral","juguetón","agradecido","happy","sad","excited","worried","grateful"]).optional(),context:oe({insights:ne(oe({type:de(["tip","warning","observation","recommendation"]),title:M(),description:M(),affectedPlants:ne(M()).optional()})).optional(),suggestedActions:ne(oe({action:M(),priority:de(["low","medium","high"]),plantIds:ne(M()).optional()})).optional()}).optional()}),vk=oe({id:M().min(1,"Notification ID is required"),type:de(["watering","fertilizing","health_check","general"]),title:M().min(1,"Title is required"),message:M().min(1,"Message is required"),priority:de(["low","medium","high"]),scheduledFor:Jt(),completed:dp()}),yk=oe({id:M().uuid(),name:M(),species:M(),variety:M().optional(),nickname:M().optional(),description:M().optional(),funFacts:ne(M()).optional(),location:M(),plantEnvironment:de(["interior","exterior","ambos"]).optional(),lightRequirements:de(["poca_luz","luz_indirecta","luz_directa_parcial","pleno_sol"]).optional(),dateAdded:Jt(),lastWatered:Jt().optional(),lastFertilized:Jt().optional(),images:ne(pk),healthScore:hn().min(0).max(100),careProfile:fk,personality:mk,chatHistory:ne(gk),notifications:ne(vk)}),xk=oe({id:M().min(1,"Plant ID is required"),name:M().min(1,"Plant name is required"),nickname:M().optional(),species:M().min(1,"Species is required"),location:M().min(1,"Location is required"),plantEnvironment:de(["interior","exterior","ambos"]).optional(),lightRequirements:de(["poca_luz","luz_indirecta","luz_directa_parcial","pleno_sol"]).optional(),healthScore:hn().min(0).max(100),profileImageUrl:M().url().optional(),lastWatered:Jt().optional(),wateringFrequency:hn().positive().optional()});oe({content:M(),emotion:de(["alegre","triste","enojado","neutral","juguetón","agradecido","happy","sad","excited","worried","grateful"]),mood:M().optional()});oe({changes:ne(M()),healthImprovement:hn(),recommendations:ne(M()),newHealthScore:hn().min(0).max(100)});yk.omit({id:!0,dateAdded:!0,chatHistory:!0,notifications:!0}).partial({images:!0,healthScore:!0,careProfile:!0,personality:!0});const bk=oe({fullName:M().min(3,"El nombre debe tener al menos 3 caracteres"),email:M().email("Email inválido"),password:M().min(6,"La contraseña debe tener al menos 6 caracteres"),confirmPassword:M().min(6)}).refine(e=>e.password===e.confirmPassword,{message:"Las contraseñas no coinciden",path:["confirmPassword"]}),wk=oe({email:M().email(),password:M().min(1,"Password is required")}),jk=oe({id:M().min(1,"Message ID is required"),sender:de(["user","ai"]),content:M().min(1,"Message content cannot be empty"),timestamp:Jt(),context:oe({plantsAnalyzed:ne(M()).optional(),queryType:de(["general","health_analysis","care_comparison","disease_prevention","growth_tracking"]).optional(),insights:ne(oe({type:de(["tip","warning","observation","recommendation"]),title:M(),description:M(),affectedPlants:ne(M()).optional()})).optional(),suggestedActions:ne(oe({action:M(),priority:de(["low","medium","high"]),plantIds:ne(M()).optional()})).optional()}).optional()}),kk=oe({totalPlants:hn(),plantsData:ne(xk),averageHealthScore:hn(),commonIssues:ne(M()),careScheduleSummary:oe({needsWatering:ne(M()),needsFertilizing:ne(M()),healthConcerns:ne(M())}),environmentalFactors:oe({locations:ne(M()),lightConditions:ne(M()),humidityNeeds:ne(M())})});oe({id:M().uuid(),userId:M().uuid(),messages:ne(jk),createdAt:Jt(),updatedAt:Jt(),context:kk.optional()});oe({content:M().min(1),insights:ne(oe({type:de(["tip","warning","observation","recommendation"]),title:M(),description:M(),affectedPlants:ne(M()).optional()})).optional(),suggestedActions:ne(oe({action:M(),priority:de(["low","medium","high"]),plantIds:ne(M()).optional()})).optional()});let bs=null;const Td=e=>({id:"dev-user-123",email:e,email_confirmed_at:new Date().toISOString(),created_at:new Date().toISOString(),updated_at:new Date().toISOString(),app_metadata:{},user_metadata:{full_name:"Usuario Demo"},aud:"authenticated",role:"authenticated"}),wr=ac((e,t)=>({user:null,profile:null,session:null,isLoading:!1,error:null,isInitialized:!1,isDevelopmentMode:ba,initialize:async()=>{if(console.log("[AUTH] 🚀 Initialize started"),console.log("[AUTH] Development mode:",ba),e({isLoading:!0}),ba){console.log("[AUTH] Using development mode - no real Supabase connection"),e({isInitialized:!0,isLoading:!1,user:null,session:null,profile:null,error:null});return}bs?.subscription&&(console.log("[AUTH] Unsubscribing existing listener"),bs.subscription.unsubscribe());try{console.log("[AUTH] Getting session with timeout...");const r=pe.auth.getSession(),n=new Promise((o,s)=>setTimeout(()=>s(new Error("Session timeout after 5 seconds")),5e3)),{data:{session:a},error:i}=await Promise.race([r,n]);if(console.log("[AUTH] Session result:",{hasSession:!!a,error:i?.message}),i&&console.warn("[AUTH] Session error:",i.message),console.log("[AUTH] Setting session state..."),e({session:a,user:a?.user??null}),a?.user)try{const o=pe.from("profiles").select("*").eq("id",a.user.id).single(),s=new Promise((d,f)=>setTimeout(()=>f(new Error("Profile timeout")),3e3)),{data:c,error:u}=await Promise.race([o,s]);u?console.warn("Profile fetch error:",u.message):e({profile:c})}catch(o){console.warn("Profile fetch failed:",o.message)}else e({profile:null})}catch(r){console.warn("Auth initialization failed, continuing without session:",r.message),e({session:null,user:null,profile:null,error:null})}finally{console.log("[AUTH] ✅ Marking as initialized"),e({isInitialized:!0,isLoading:!1})}try{const{data:r}=pe.auth.onAuthStateChange(async(n,a)=>{if(console.log("[AUTH] State change:",n,!!a),e({session:a,user:a?.user??null,isLoading:!1}),n==="SIGNED_OUT"){e({profile:null});return}if(a?.user)try{const{data:i,error:o}=await pe.from("profiles").select("*").eq("id",a.user.id).single();if(o)throw o;e({profile:i})}catch(i){console.error("Error fetching profile on auth change:",i)}});bs=r}catch(r){console.warn("[AUTH] Failed to set up auth listener:",r)}},signIn:async r=>{const{isDevelopmentMode:n}=t();e({isLoading:!0,error:null});try{const{email:a,password:i}=wk.parse(r);if(n)if(console.log("[AUTH] 🧪 Mock sign in for development mode"),console.log("[AUTH] 📧 Email:",a),console.log("[AUTH] 🔒 Password length:",i.length),await new Promise(s=>setTimeout(s,800)),a.includes("@")&&a.includes(".")&&i.length>=6){const s=Td(a),c={user:s,access_token:"mock-token-"+Date.now(),refresh_token:"mock-refresh-"+Date.now(),expires_in:3600,token_type:"bearer",expires_at:Date.now()+36e5};console.log("[AUTH] ✅ Mock user created:",s.email),e({user:s,session:c,profile:{id:s.id,full_name:a.split("@")[0].charAt(0).toUpperCase()+a.split("@")[0].slice(1),email:s.email,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},error:null}),console.log("[AUTH] 🚀 Mock login successful - session established"),console.log("[AUTH] 🔄 User should now be redirected to dashboard"),await new Promise(u=>setTimeout(u,100));return}else throw console.log("[AUTH] ❌ Mock login failed - invalid credentials"),new Error("Email debe incluir @ y ., contraseña mínimo 6 caracteres");const{error:o}=await pe.auth.signInWithPassword({email:a,password:i});if(o)throw o}catch(a){const i=a.message.includes("Invalid login credentials")?"Credenciales inválidas. Verifica tu email y contraseña.":"Error al iniciar sesión. Intenta de nuevo.";throw e({error:i}),console.error("[AUTH] Sign in error:",a),a}finally{e({isLoading:!1})}},signUp:async r=>{const{isDevelopmentMode:n}=t();e({isLoading:!0,error:null});try{const{email:a,password:i,fullName:o}=bk.parse(r);if(n){console.log("[AUTH] Mock sign up for development"),await new Promise(d=>setTimeout(d,1e3));const c=Td(a);e({user:c,session:{user:c,access_token:"mock-token",refresh_token:"mock-refresh",expires_in:3600,token_type:"bearer"},profile:{id:c.id,full_name:o||"Usuario Demo"}});return}const{error:s}=await pe.auth.signUp({email:a,password:i,options:{data:{full_name:o}}});if(s)throw s}catch(a){const i=a.message.includes("already registered")?"El usuario ya está registrado. Intenta iniciar sesión.":"Error al registrarse. Verifica los datos e intenta de nuevo.";throw e({error:i}),console.error("[AUTH] Sign up error:",a),a}finally{e({isLoading:!1})}},signOut:async()=>{const{isDevelopmentMode:r}=t();if(e({isLoading:!0}),Dn.clearAll(),r){console.log("[AUTH] Mock sign out for development"),e({session:null,user:null,profile:null,isLoading:!1});return}try{const{error:n}=await pe.auth.signOut();if(n){console.error("Error signing out:",n),e({error:"Error al cerrar sesión.",isLoading:!1});return}}catch(n){console.error("Error signing out:",n),e({error:"Error al cerrar sesión.",isLoading:!1});return}e({session:null,user:null,profile:null,isLoading:!1})},clearError:()=>e({error:null})}));function Sk(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}const Nk=e=>{switch(e){case"success":return _k;case"info":return Ck;case"warning":return Ak;case"error":return Ok;default:return null}},Pk=Array(12).fill(0),Ek=({visible:e,className:t})=>I.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},I.createElement("div",{className:"sonner-spinner"},Pk.map((r,n)=>I.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),_k=I.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},I.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Ak=I.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},I.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Ck=I.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},I.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Ok=I.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},I.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Tk=I.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},I.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),I.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Ik=()=>{const[e,t]=I.useState(document.hidden);return I.useEffect(()=>{const r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e};let el=1;class Dk{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const r=this.subscribers.indexOf(t);this.subscribers.splice(r,1)}),this.publish=t=>{this.subscribers.forEach(r=>r(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var r;const{message:n,...a}=t,i=typeof t?.id=="number"||((r=t.id)==null?void 0:r.length)>0?t.id:el++,o=this.toasts.find(c=>c.id===i),s=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(c=>c.id===i?(this.publish({...c,...t,id:i,title:n}),{...c,...t,id:i,dismissible:s,title:n}):c):this.addToast({title:n,...a,dismissible:s,id:i}),i},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(r=>r({id:t,dismiss:!0})))):this.toasts.forEach(r=>{this.subscribers.forEach(n=>n({id:r.id,dismiss:!0}))}),t),this.message=(t,r)=>this.create({...r,message:t}),this.error=(t,r)=>this.create({...r,message:t,type:"error"}),this.success=(t,r)=>this.create({...r,type:"success",message:t}),this.info=(t,r)=>this.create({...r,type:"info",message:t}),this.warning=(t,r)=>this.create({...r,type:"warning",message:t}),this.loading=(t,r)=>this.create({...r,type:"loading",message:t}),this.promise=(t,r)=>{if(!r)return;let n;r.loading!==void 0&&(n=this.create({...r,promise:t,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));const a=Promise.resolve(t instanceof Function?t():t);let i=n!==void 0,o;const s=a.then(async u=>{if(o=["resolve",u],I.isValidElement(u))i=!1,this.create({id:n,type:"default",message:u});else if($k(u)&&!u.ok){i=!1;const f=typeof r.error=="function"?await r.error(`HTTP error! status: ${u.status}`):r.error,m=typeof r.description=="function"?await r.description(`HTTP error! status: ${u.status}`):r.description,p=typeof f=="object"&&!I.isValidElement(f)?f:{message:f};this.create({id:n,type:"error",description:m,...p})}else if(u instanceof Error){i=!1;const f=typeof r.error=="function"?await r.error(u):r.error,m=typeof r.description=="function"?await r.description(u):r.description,p=typeof f=="object"&&!I.isValidElement(f)?f:{message:f};this.create({id:n,type:"error",description:m,...p})}else if(r.success!==void 0){i=!1;const f=typeof r.success=="function"?await r.success(u):r.success,m=typeof r.description=="function"?await r.description(u):r.description,p=typeof f=="object"&&!I.isValidElement(f)?f:{message:f};this.create({id:n,type:"success",description:m,...p})}}).catch(async u=>{if(o=["reject",u],r.error!==void 0){i=!1;const d=typeof r.error=="function"?await r.error(u):r.error,f=typeof r.description=="function"?await r.description(u):r.description,h=typeof d=="object"&&!I.isValidElement(d)?d:{message:d};this.create({id:n,type:"error",description:f,...h})}}).finally(()=>{i&&(this.dismiss(n),n=void 0),r.finally==null||r.finally.call(r)}),c=()=>new Promise((u,d)=>s.then(()=>o[0]==="reject"?d(o[1]):u(o[1])).catch(d));return typeof n!="string"&&typeof n!="number"?{unwrap:c}:Object.assign(n,{unwrap:c})},this.custom=(t,r)=>{const n=r?.id||el++;return this.create({jsx:t(n),id:n,...r}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const st=new Dk,Mk=(e,t)=>{const r=t?.id||el++;return st.addToast({title:e,...t,id:r}),r},$k=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",zk=Mk,Rk=()=>st.toasts,Lk=()=>st.getActiveToasts(),xp=Object.assign(zk,{success:st.success,info:st.info,warning:st.warning,error:st.error,custom:st.custom,message:st.message,promise:st.promise,dismiss:st.dismiss,loading:st.loading},{getHistory:Rk,getToasts:Lk});Sk("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function si(e){return e.label!==void 0}const Fk=3,Bk="24px",Uk="16px",Id=4e3,Wk=356,Hk=14,qk=45,Zk=200;function Gt(...e){return e.filter(Boolean).join(" ")}function Kk(e){const[t,r]=e.split("-"),n=[];return t&&n.push(t),r&&n.push(r),n}const Gk=e=>{var t,r,n,a,i,o,s,c,u;const{invert:d,toast:f,unstyled:m,interacting:h,setHeights:p,visibleToasts:v,heights:g,index:x,toasts:w,expanded:b,removeToast:j,defaultRichColors:k,closeButton:S,style:N,cancelButtonStyle:C,actionButtonStyle:T,className:$="",descriptionClassName:O="",duration:E,position:F,gap:Z,expandByDefault:Y,classNames:B,icons:q,closeButtonAriaLabel:te="Close toast"}=e,[re,Pe]=I.useState(null),[K,z]=I.useState(null),[X,Ce]=I.useState(!1),[Oe,be]=I.useState(!1),[Gr,Er]=I.useState(!1),[R,Q]=I.useState(!1),[ae,D]=I.useState(!1),[Qe,le]=I.useState(0),[nt,Je]=I.useState(0),ht=I.useRef(f.duration||E||Id),ra=I.useRef(null),ar=I.useRef(null),kx=x===0,Sx=x+1<=v,pt=f.type,Pn=f.dismissible!==!1,Nx=f.className||"",Px=f.descriptionClassName||"",ei=I.useMemo(()=>g.findIndex(J=>J.toastId===f.id)||0,[g,f.id]),Ex=I.useMemo(()=>{var J;return(J=f.closeButton)!=null?J:S},[f.closeButton,S]),Qu=I.useMemo(()=>f.duration||E||Id,[f.duration,E]),vs=I.useRef(0),En=I.useRef(0),Ju=I.useRef(0),_n=I.useRef(null),[_x,Ax]=F.split("-"),ed=I.useMemo(()=>g.reduce((J,Le,et)=>et>=ei?J:J+Le.height,0),[g,ei]),td=Ik(),Cx=f.invert||d,ys=pt==="loading";En.current=I.useMemo(()=>ei*Z+ed,[ei,ed]),I.useEffect(()=>{ht.current=Qu},[Qu]),I.useEffect(()=>{Ce(!0)},[]),I.useEffect(()=>{const J=ar.current;if(J){const Le=J.getBoundingClientRect().height;return Je(Le),p(et=>[{toastId:f.id,height:Le,position:f.position},...et]),()=>p(et=>et.filter(gt=>gt.toastId!==f.id))}},[p,f.id]),I.useLayoutEffect(()=>{if(!X)return;const J=ar.current,Le=J.style.height;J.style.height="auto";const et=J.getBoundingClientRect().height;J.style.height=Le,Je(et),p(gt=>gt.find(He=>He.toastId===f.id)?gt.map(He=>He.toastId===f.id?{...He,height:et}:He):[{toastId:f.id,height:et,position:f.position},...gt])},[X,f.title,f.description,p,f.id,f.jsx,f.action,f.cancel]);const _r=I.useCallback(()=>{be(!0),le(En.current),p(J=>J.filter(Le=>Le.toastId!==f.id)),setTimeout(()=>{j(f)},Zk)},[f,j,p,En]);I.useEffect(()=>{if(f.promise&&pt==="loading"||f.duration===1/0||f.type==="loading")return;let J;return b||h||td?(()=>{if(Ju.current<vs.current){const gt=new Date().getTime()-vs.current;ht.current=ht.current-gt}Ju.current=new Date().getTime()})():(()=>{ht.current!==1/0&&(vs.current=new Date().getTime(),J=setTimeout(()=>{f.onAutoClose==null||f.onAutoClose.call(f,f),_r()},ht.current))})(),()=>clearTimeout(J)},[b,h,f,pt,td,_r]),I.useEffect(()=>{f.delete&&(_r(),f.onDismiss==null||f.onDismiss.call(f,f))},[_r,f.delete]);function Ox(){var J;if(q?.loading){var Le;return I.createElement("div",{className:Gt(B?.loader,f==null||(Le=f.classNames)==null?void 0:Le.loader,"sonner-loader"),"data-visible":pt==="loading"},q.loading)}return I.createElement(Ek,{className:Gt(B?.loader,f==null||(J=f.classNames)==null?void 0:J.loader),visible:pt==="loading"})}const Tx=f.icon||q?.[pt]||Nk(pt);var rd,nd;return I.createElement("li",{tabIndex:0,ref:ar,className:Gt($,Nx,B?.toast,f==null||(t=f.classNames)==null?void 0:t.toast,B?.default,B?.[pt],f==null||(r=f.classNames)==null?void 0:r[pt]),"data-sonner-toast":"","data-rich-colors":(rd=f.richColors)!=null?rd:k,"data-styled":!(f.jsx||f.unstyled||m),"data-mounted":X,"data-promise":!!f.promise,"data-swiped":ae,"data-removed":Oe,"data-visible":Sx,"data-y-position":_x,"data-x-position":Ax,"data-index":x,"data-front":kx,"data-swiping":Gr,"data-dismissible":Pn,"data-type":pt,"data-invert":Cx,"data-swipe-out":R,"data-swipe-direction":K,"data-expanded":!!(b||Y&&X),style:{"--index":x,"--toasts-before":x,"--z-index":w.length-x,"--offset":`${Oe?Qe:En.current}px`,"--initial-height":Y?"auto":`${nt}px`,...N,...f.style},onDragEnd:()=>{Er(!1),Pe(null),_n.current=null},onPointerDown:J=>{J.button!==2&&(ys||!Pn||(ra.current=new Date,le(En.current),J.target.setPointerCapture(J.pointerId),J.target.tagName!=="BUTTON"&&(Er(!0),_n.current={x:J.clientX,y:J.clientY})))},onPointerUp:()=>{var J,Le,et;if(R||!Pn)return;_n.current=null;const gt=Number(((J=ar.current)==null?void 0:J.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),ti=Number(((Le=ar.current)==null?void 0:Le.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),He=new Date().getTime()-((et=ra.current)==null?void 0:et.getTime()),Et=re==="x"?gt:ti,ri=Math.abs(Et)/He;if(Math.abs(Et)>=qk||ri>.11){le(En.current),f.onDismiss==null||f.onDismiss.call(f,f),z(re==="x"?gt>0?"right":"left":ti>0?"down":"up"),_r(),Q(!0);return}else{var Lt,Ft;(Lt=ar.current)==null||Lt.style.setProperty("--swipe-amount-x","0px"),(Ft=ar.current)==null||Ft.style.setProperty("--swipe-amount-y","0px")}D(!1),Er(!1),Pe(null)},onPointerMove:J=>{var Le,et,gt;if(!_n.current||!Pn||((Le=window.getSelection())==null?void 0:Le.toString().length)>0)return;const He=J.clientY-_n.current.y,Et=J.clientX-_n.current.x;var ri;const Lt=(ri=e.swipeDirections)!=null?ri:Kk(F);!re&&(Math.abs(Et)>1||Math.abs(He)>1)&&Pe(Math.abs(Et)>Math.abs(He)?"x":"y");let Ft={x:0,y:0};const ad=Vr=>1/(1.5+Math.abs(Vr)/20);if(re==="y"){if(Lt.includes("top")||Lt.includes("bottom"))if(Lt.includes("top")&&He<0||Lt.includes("bottom")&&He>0)Ft.y=He;else{const Vr=He*ad(He);Ft.y=Math.abs(Vr)<Math.abs(He)?Vr:He}}else if(re==="x"&&(Lt.includes("left")||Lt.includes("right")))if(Lt.includes("left")&&Et<0||Lt.includes("right")&&Et>0)Ft.x=Et;else{const Vr=Et*ad(Et);Ft.x=Math.abs(Vr)<Math.abs(Et)?Vr:Et}(Math.abs(Ft.x)>0||Math.abs(Ft.y)>0)&&D(!0),(et=ar.current)==null||et.style.setProperty("--swipe-amount-x",`${Ft.x}px`),(gt=ar.current)==null||gt.style.setProperty("--swipe-amount-y",`${Ft.y}px`)}},Ex&&!f.jsx&&pt!=="loading"?I.createElement("button",{"aria-label":te,"data-disabled":ys,"data-close-button":!0,onClick:ys||!Pn?()=>{}:()=>{_r(),f.onDismiss==null||f.onDismiss.call(f,f)},className:Gt(B?.closeButton,f==null||(n=f.classNames)==null?void 0:n.closeButton)},(nd=q?.close)!=null?nd:Tk):null,(pt||f.icon||f.promise)&&f.icon!==null&&(q?.[pt]!==null||f.icon)?I.createElement("div",{"data-icon":"",className:Gt(B?.icon,f==null||(a=f.classNames)==null?void 0:a.icon)},f.promise||f.type==="loading"&&!f.icon?f.icon||Ox():null,f.type!=="loading"?Tx:null):null,I.createElement("div",{"data-content":"",className:Gt(B?.content,f==null||(i=f.classNames)==null?void 0:i.content)},I.createElement("div",{"data-title":"",className:Gt(B?.title,f==null||(o=f.classNames)==null?void 0:o.title)},f.jsx?f.jsx:typeof f.title=="function"?f.title():f.title),f.description?I.createElement("div",{"data-description":"",className:Gt(O,Px,B?.description,f==null||(s=f.classNames)==null?void 0:s.description)},typeof f.description=="function"?f.description():f.description):null),I.isValidElement(f.cancel)?f.cancel:f.cancel&&si(f.cancel)?I.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||C,onClick:J=>{si(f.cancel)&&Pn&&(f.cancel.onClick==null||f.cancel.onClick.call(f.cancel,J),_r())},className:Gt(B?.cancelButton,f==null||(c=f.classNames)==null?void 0:c.cancelButton)},f.cancel.label):null,I.isValidElement(f.action)?f.action:f.action&&si(f.action)?I.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||T,onClick:J=>{si(f.action)&&(f.action.onClick==null||f.action.onClick.call(f.action,J),!J.defaultPrevented&&_r())},className:Gt(B?.actionButton,f==null||(u=f.classNames)==null?void 0:u.actionButton)},f.action.label):null)};function Dd(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function Vk(e,t){const r={};return[e,t].forEach((n,a)=>{const i=a===1,o=i?"--mobile-offset":"--offset",s=i?Uk:Bk;function c(u){["top","right","bottom","left"].forEach(d=>{r[`${o}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof n=="number"||typeof n=="string"?c(n):typeof n=="object"?["top","right","bottom","left"].forEach(u=>{n[u]===void 0?r[`${o}-${u}`]=s:r[`${o}-${u}`]=typeof n[u]=="number"?`${n[u]}px`:n[u]}):c(s)}),r}const Yk=I.forwardRef(function(t,r){const{invert:n,position:a="bottom-right",hotkey:i=["altKey","KeyT"],expand:o,closeButton:s,className:c,offset:u,mobileOffset:d,theme:f="light",richColors:m,duration:h,style:p,visibleToasts:v=Fk,toastOptions:g,dir:x=Dd(),gap:w=Hk,icons:b,containerAriaLabel:j="Notifications"}=t,[k,S]=I.useState([]),N=I.useMemo(()=>Array.from(new Set([a].concat(k.filter(K=>K.position).map(K=>K.position)))),[k,a]),[C,T]=I.useState([]),[$,O]=I.useState(!1),[E,F]=I.useState(!1),[Z,Y]=I.useState(f!=="system"?f:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),B=I.useRef(null),q=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),te=I.useRef(null),re=I.useRef(!1),Pe=I.useCallback(K=>{S(z=>{var X;return(X=z.find(Ce=>Ce.id===K.id))!=null&&X.delete||st.dismiss(K.id),z.filter(({id:Ce})=>Ce!==K.id)})},[]);return I.useEffect(()=>st.subscribe(K=>{if(K.dismiss){requestAnimationFrame(()=>{S(z=>z.map(X=>X.id===K.id?{...X,delete:!0}:X))});return}setTimeout(()=>{Mx.flushSync(()=>{S(z=>{const X=z.findIndex(Ce=>Ce.id===K.id);return X!==-1?[...z.slice(0,X),{...z[X],...K},...z.slice(X+1)]:[K,...z]})})})}),[k]),I.useEffect(()=>{if(f!=="system"){Y(f);return}if(f==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Y("dark"):Y("light")),typeof window>"u")return;const K=window.matchMedia("(prefers-color-scheme: dark)");try{K.addEventListener("change",({matches:z})=>{Y(z?"dark":"light")})}catch{K.addListener(({matches:X})=>{try{Y(X?"dark":"light")}catch(Ce){console.error(Ce)}})}},[f]),I.useEffect(()=>{k.length<=1&&O(!1)},[k]),I.useEffect(()=>{const K=z=>{var X;if(i.every(be=>z[be]||z.code===be)){var Oe;O(!0),(Oe=B.current)==null||Oe.focus()}z.code==="Escape"&&(document.activeElement===B.current||(X=B.current)!=null&&X.contains(document.activeElement))&&O(!1)};return document.addEventListener("keydown",K),()=>document.removeEventListener("keydown",K)},[i]),I.useEffect(()=>{if(B.current)return()=>{te.current&&(te.current.focus({preventScroll:!0}),te.current=null,re.current=!1)}},[B.current]),I.createElement("section",{ref:r,"aria-label":`${j} ${q}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},N.map((K,z)=>{var X;const[Ce,Oe]=K.split("-");return k.length?I.createElement("ol",{key:K,dir:x==="auto"?Dd():x,tabIndex:-1,ref:B,className:c,"data-sonner-toaster":!0,"data-sonner-theme":Z,"data-y-position":Ce,"data-x-position":Oe,style:{"--front-toast-height":`${((X=C[0])==null?void 0:X.height)||0}px`,"--width":`${Wk}px`,"--gap":`${w}px`,...p,...Vk(u,d)},onBlur:be=>{re.current&&!be.currentTarget.contains(be.relatedTarget)&&(re.current=!1,te.current&&(te.current.focus({preventScroll:!0}),te.current=null))},onFocus:be=>{be.target instanceof HTMLElement&&be.target.dataset.dismissible==="false"||re.current||(re.current=!0,te.current=be.relatedTarget)},onMouseEnter:()=>O(!0),onMouseMove:()=>O(!0),onMouseLeave:()=>{E||O(!1)},onDragEnd:()=>O(!1),onPointerDown:be=>{be.target instanceof HTMLElement&&be.target.dataset.dismissible==="false"||F(!0)},onPointerUp:()=>F(!1)},k.filter(be=>!be.position&&z===0||be.position===K).map((be,Gr)=>{var Er,R;return I.createElement(Gk,{key:be.id,icons:b,index:Gr,toast:be,defaultRichColors:m,duration:(Er=g?.duration)!=null?Er:h,className:g?.className,descriptionClassName:g?.descriptionClassName,invert:n,visibleToasts:v,closeButton:(R=g?.closeButton)!=null?R:s,interacting:E,position:K,style:g?.style,unstyled:g?.unstyled,classNames:g?.classNames,cancelButtonStyle:g?.cancelButtonStyle,actionButtonStyle:g?.actionButtonStyle,closeButtonAriaLabel:g?.closeButtonAriaLabel,removeToast:Pe,toasts:k.filter(Q=>Q.position==be.position),heights:C.filter(Q=>Q.position==be.position),setHeights:T,expandByDefault:o,gap:w,expanded:$,swipeDirections:t.swipeDirections})})):null}))}),mc=y.createContext(void 0),Xk={success:dr,error:Fx,warning:Tt,info:Jl,ai:Ql,camera:tr,plant:La,sync:Eh},Qk={success:{bg:"bg-green-50 dark:bg-green-900/20",border:"border-green-200 dark:border-green-800",icon:"text-green-500",title:"text-green-800 dark:text-green-200",message:"text-green-700 dark:text-green-300"},error:{bg:"bg-red-50 dark:bg-red-900/20",border:"border-red-200 dark:border-red-800",icon:"text-red-500",title:"text-red-800 dark:text-red-200",message:"text-red-700 dark:text-red-300"},warning:{bg:"bg-amber-50 dark:bg-amber-900/20",border:"border-amber-200 dark:border-amber-800",icon:"text-amber-500",title:"text-amber-800 dark:text-amber-200",message:"text-amber-700 dark:text-amber-300"},info:{bg:"bg-blue-50 dark:bg-blue-900/20",border:"border-blue-200 dark:border-blue-800",icon:"text-blue-500",title:"text-blue-800 dark:text-blue-200",message:"text-blue-700 dark:text-blue-300"},ai:{bg:"bg-purple-50 dark:bg-purple-900/20",border:"border-purple-200 dark:border-purple-800",icon:"text-purple-500",title:"text-purple-800 dark:text-purple-200",message:"text-purple-700 dark:text-purple-300"},camera:{bg:"bg-indigo-50 dark:bg-indigo-900/20",border:"border-indigo-200 dark:border-indigo-800",icon:"text-indigo-500",title:"text-indigo-800 dark:text-indigo-200",message:"text-indigo-700 dark:text-indigo-300"},plant:{bg:"bg-green-50 dark:bg-green-900/20",border:"border-green-200 dark:border-green-800",icon:"text-green-500",title:"text-green-800 dark:text-green-200",message:"text-green-700 dark:text-green-300"},sync:{bg:"bg-gray-50 dark:bg-gray-900/20",border:"border-gray-200 dark:border-gray-800",icon:"text-gray-500",title:"text-gray-800 dark:text-gray-200",message:"text-gray-700 dark:text-gray-300"}},Jk=({children:e})=>{const[t,r]=y.useState([]),n=()=>Math.random().toString(36).substring(2,9),a=y.useCallback(h=>{const p=n(),v={id:p,duration:5e3,...h};return r(g=>[...g,v]),!v.persistent&&v.duration&&v.duration>0&&setTimeout(()=>{i(p)},v.duration),p},[]),i=y.useCallback(h=>{r(p=>p.filter(v=>v.id!==h))},[]),o=y.useCallback(()=>{r([])},[]),s=y.useCallback((h,p,v)=>a({type:"success",title:h,message:p,...v}),[a]),c=y.useCallback((h,p,v)=>a({type:"error",title:h,message:p,duration:8e3,...v}),[a]),u=y.useCallback((h,p,v)=>a({type:"warning",title:h,message:p,duration:6e3,...v}),[a]),d=y.useCallback((h,p,v)=>a({type:"info",title:h,message:p,...v}),[a]),f=y.useCallback((h,p,v)=>a({type:"ai",title:h,message:p,...v}),[a]),m={toasts:t,addToast:a,removeToast:i,clearAll:o,showSuccess:s,showError:c,showWarning:u,showInfo:d,showAI:f};return l.jsxs(mc.Provider,{value:m,children:[e,l.jsx(eS,{})]})},eS=()=>{const e=y.useContext(mc);if(!e)return null;const{toasts:t,removeToast:r}=e;return l.jsx("div",{className:"fixed top-4 right-4 z-[9999] space-y-2 max-w-sm w-full",children:l.jsx(se,{children:t.map(n=>l.jsx(tS,{toast:n,onRemove:r},n.id))})})},tS=({toast:e,onRemove:t})=>{const r=e.icon||Xk[e.type],n=Qk[e.type];return l.jsx(P.div,{initial:{opacity:0,x:300,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:300,scale:.95},transition:{duration:.2,ease:"easeOut"},className:`
        ${n.bg} ${n.border}
        border rounded-lg p-4 shadow-lg backdrop-blur-sm
        max-w-sm w-full
      `,children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:`${n.icon} flex-shrink-0 mt-0.5`,children:l.jsx(r,{className:"w-5 h-5"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h4",{className:`${n.title} text-sm font-medium mb-1`,children:e.title}),e.message&&l.jsx("p",{className:`${n.message} text-sm leading-relaxed`,children:e.message}),e.actions&&e.actions.length>0&&l.jsx("div",{className:"flex gap-2 mt-3",children:e.actions.map((a,i)=>l.jsx("button",{onClick:()=>{a.onClick(),t(e.id)},className:`
                    text-xs font-medium px-2 py-1 rounded transition-colors
                    ${a.variant==="primary"?`${n.icon} bg-white/20 hover:bg-white/30`:`${n.message} hover:${n.title}`}
                  `,children:a.label},i))})]}),l.jsx("button",{onClick:()=>t(e.id),className:`${n.icon} hover:opacity-70 transition-opacity flex-shrink-0`,"aria-label":"Cerrar notificación",children:l.jsx(br,{className:"w-4 h-4"})})]})})},hR=()=>{const e=y.useContext(mc);if(!e)throw new Error("useToast must be used within a ToastProvider");return e};class rS{constructor(){Bt(this,"listeners",new Set)}subscribe(t){return this.listeners.add(t),()=>{this.listeners.delete(t)}}emit(t){this.listeners.forEach(r=>r(t))}success(t,r,n){this.emit({type:"success",title:t,message:r,duration:n})}error(t,r,n){this.emit({type:"error",title:t,message:r,duration:n})}warning(t,r,n){this.emit({type:"warning",title:t,message:r,duration:n})}info(t,r,n){this.emit({type:"info",title:t,message:r,duration:n})}}const xo=new rS,bp=y.createContext(void 0),Kn=()=>{const e=y.useContext(bp);if(!e)throw new Error("useToast must be used within a ToastProvider");return e},nS=e=>{switch(e){case"success":return l.jsx(dr,{size:20,className:"text-green-500"});case"error":return l.jsx(Tt,{size:20,className:"text-red-500"});case"warning":return l.jsx(qt,{size:20,className:"text-yellow-500"});case"info":return l.jsx(Jl,{size:20,className:"text-blue-500"})}},aS=e=>{switch(e){case"success":return"border-green-200 bg-green-50 dark:bg-green-900/20 dark:border-green-800";case"error":return"border-red-200 bg-red-50 dark:bg-red-900/20 dark:border-red-800";case"warning":return"border-yellow-200 bg-yellow-50 dark:bg-yellow-900/20 dark:border-yellow-800";case"info":return"border-blue-200 bg-blue-50 dark:bg-blue-900/20 dark:border-blue-800"}},iS=({children:e})=>{const[t,r]=y.useState([]),n=y.useCallback(o=>{const s=`toast-${Date.now()}-${Math.random()}`,c={id:s,duration:5e3,...o};r(u=>[...u,c]),c.duration!==0&&setTimeout(()=>{a(s)},c.duration)},[]);y.useEffect(()=>xo.subscribe(s=>{n(s)}),[n]);const a=y.useCallback(o=>{r(s=>s.filter(c=>c.id!==o))},[]),i=y.useCallback(()=>{r([])},[]);return l.jsxs(bp.Provider,{value:{toasts:t,addToast:n,removeToast:a,clearToasts:i},children:[e,l.jsx(oS,{})]})},oS=()=>{const{toasts:e,removeToast:t}=Kn();return l.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:l.jsx(se,{children:e.map(r=>l.jsx(P.div,{initial:{opacity:0,x:300,scale:.8},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:300,scale:.8},transition:{type:"spring",damping:25,stiffness:300},className:`max-w-sm w-full rounded-lg border p-4 shadow-lg ${aS(r.type)}`,role:"alert","aria-live":"assertive",tabIndex:0,children:l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsx("div",{className:"flex-shrink-0 mt-0.5",children:nS(r.type)}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:r.title}),r.message&&l.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:r.message})]}),l.jsx("button",{onClick:()=>t(r.id),className:"flex-shrink-0 ml-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors","aria-label":"Cerrar notificación",children:l.jsx(br,{size:16})})]})},r.id))})})},Ir={QUERY:{STALE_TIME:{MEDIUM:1e3*60*15},GC_TIME:{MEDIUM:1e3*60*30,LONG:1e3*60*60},RETRY:{COUNT:1,DELAY:1e3}}},aa={measureTime:async(e,t)=>typeof t=="function"?await t():t,markStart:e=>{},markEnd:e=>{},debounce:(e,t)=>{let r;return(...n)=>{clearTimeout(r),r=setTimeout(()=>e.apply(void 0,n),t)}},throttle:(e,t)=>{let r;return(...n)=>{r||(e.apply(void 0,n),r=!0,setTimeout(()=>r=!1,t))}}},sS=()=>(y.useEffect(()=>{},[]),{measureTime:aa.measureTime,markStart:aa.markStart,markEnd:aa.markEnd,debounce:aa.debounce,throttle:aa.throttle}),lS=()=>{const e=()=>{const t=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${t}px`),typeof CSS<"u"&&CSS.supports&&CSS.supports("padding","env(safe-area-inset-top)")?(document.documentElement.style.setProperty("--safe-area-top","env(safe-area-inset-top)"),document.documentElement.style.setProperty("--safe-area-bottom","env(safe-area-inset-bottom)"),document.documentElement.style.setProperty("--safe-area-left","env(safe-area-inset-left)"),document.documentElement.style.setProperty("--safe-area-right","env(safe-area-inset-right)")):(document.documentElement.style.setProperty("--safe-area-top","0px"),document.documentElement.style.setProperty("--safe-area-bottom","0px"),document.documentElement.style.setProperty("--safe-area-left","0px"),document.documentElement.style.setProperty("--safe-area-right","0px"))};return e(),window.addEventListener("resize",e),window.addEventListener("orientationchange",()=>{setTimeout(e,100)}),"visualViewport"in window&&window.visualViewport?.addEventListener("resize",e),()=>{window.removeEventListener("resize",e),window.removeEventListener("orientationchange",e),"visualViewport"in window&&window.visualViewport?.removeEventListener("resize",e)}};const cS=()=>{},hc=(e,t)=>{console.error(`[CRITICAL][${e}]`,t),console.warn("Production error detected:",{context:e,error:t})};function wp(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=wp(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function fe(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=wp(e))&&(n&&(n+=" "),n+=t);return n}const pc="-",uS=e=>{const t=fS(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{const s=o.split(pc);return s[0]===""&&s.length!==1&&s.shift(),jp(s,t)||dS(o)},getConflictingClassGroupIds:(o,s)=>{const c=r[o]||[];return s&&n[o]?[...c,...n[o]]:c}}},jp=(e,t)=>{if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),a=n?jp(e.slice(1),n):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(pc);return t.validators.find(({validator:o})=>o(i))?.classGroupId},Md=/^\[(.+)\]$/,dS=e=>{if(Md.test(e)){const t=Md.exec(e)[1],r=t?.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},fS=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return hS(Object.entries(e.classGroups),r).forEach(([i,o])=>{tl(o,n,i,t)}),n},tl=(e,t,r,n)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:$d(t,a);i.classGroupId=r;return}if(typeof a=="function"){if(mS(a)){tl(a(n),t,r,n);return}t.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([i,o])=>{tl(o,$d(t,i),r,n)})})},$d=(e,t)=>{let r=e;return t.split(pc).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},mS=e=>e.isThemeGetter,hS=(e,t)=>t?e.map(([r,n])=>{const a=n.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,s])=>[t+o,s])):i);return[r,a]}):e,pS=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const a=(i,o)=>{r.set(i,o),t++,t>e&&(t=0,n=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return a(i,o),o},set(i,o){r.has(i)?r.set(i,o):a(i,o)}}},kp="!",gS=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,a=t[0],i=t.length,o=s=>{const c=[];let u=0,d=0,f;for(let g=0;g<s.length;g++){let x=s[g];if(u===0){if(x===a&&(n||s.slice(g,g+i)===t)){c.push(s.slice(d,g)),d=g+i;continue}if(x==="/"){f=g;continue}}x==="["?u++:x==="]"&&u--}const m=c.length===0?s:s.substring(d),h=m.startsWith(kp),p=h?m.substring(1):m,v=f&&f>d?f-d:void 0;return{modifiers:c,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:v}};return r?s=>r({className:s,parseClassName:o}):o},vS=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},yS=e=>({cache:pS(e.cacheSize),parseClassName:gS(e),...uS(e)}),xS=/\s+/,bS=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a}=t,i=[],o=e.trim().split(xS);let s="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:h}=r(u);let p=!!h,v=n(p?m.substring(0,h):m);if(!v){if(!p){s=u+(s.length>0?" "+s:s);continue}if(v=n(m),!v){s=u+(s.length>0?" "+s:s);continue}p=!1}const g=vS(d).join(":"),x=f?g+kp:g,w=x+v;if(i.includes(w))continue;i.push(w);const b=a(v,p);for(let j=0;j<b.length;++j){const k=b[j];i.push(x+k)}s=u+(s.length>0?" "+s:s)}return s};function wS(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=Sp(t))&&(n&&(n+=" "),n+=r);return n}const Sp=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=Sp(e[n]))&&(r&&(r+=" "),r+=t);return r};function jS(e,...t){let r,n,a,i=o;function o(c){const u=t.reduce((d,f)=>f(d),e());return r=yS(u),n=r.cache.get,a=r.cache.set,i=s,s(c)}function s(c){const u=n(c);if(u)return u;const d=bS(c,r);return a(c,d),d}return function(){return i(wS.apply(null,arguments))}}const ge=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},Np=/^\[(?:([a-z-]+):)?(.+)\]$/i,kS=/^\d+\/\d+$/,SS=new Set(["px","full","screen"]),NS=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,PS=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,ES=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,_S=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,AS=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ir=e=>Mn(e)||SS.has(e)||kS.test(e),Ar=e=>Gn(e,"length",zS),Mn=e=>!!e&&!Number.isNaN(Number(e)),ws=e=>Gn(e,"number",Mn),ia=e=>!!e&&Number.isInteger(Number(e)),CS=e=>e.endsWith("%")&&Mn(e.slice(0,-1)),ee=e=>Np.test(e),Cr=e=>NS.test(e),OS=new Set(["length","size","percentage"]),TS=e=>Gn(e,OS,Pp),IS=e=>Gn(e,"position",Pp),DS=new Set(["image","url"]),MS=e=>Gn(e,DS,LS),$S=e=>Gn(e,"",RS),oa=()=>!0,Gn=(e,t,r)=>{const n=Np.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},zS=e=>PS.test(e)&&!ES.test(e),Pp=()=>!1,RS=e=>_S.test(e),LS=e=>AS.test(e),FS=()=>{const e=ge("colors"),t=ge("spacing"),r=ge("blur"),n=ge("brightness"),a=ge("borderColor"),i=ge("borderRadius"),o=ge("borderSpacing"),s=ge("borderWidth"),c=ge("contrast"),u=ge("grayscale"),d=ge("hueRotate"),f=ge("invert"),m=ge("gap"),h=ge("gradientColorStops"),p=ge("gradientColorStopPositions"),v=ge("inset"),g=ge("margin"),x=ge("opacity"),w=ge("padding"),b=ge("saturate"),j=ge("scale"),k=ge("sepia"),S=ge("skew"),N=ge("space"),C=ge("translate"),T=()=>["auto","contain","none"],$=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto",ee,t],E=()=>[ee,t],F=()=>["",ir,Ar],Z=()=>["auto",Mn,ee],Y=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],B=()=>["solid","dashed","dotted","double","none"],q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],te=()=>["start","end","center","between","around","evenly","stretch"],re=()=>["","0",ee],Pe=()=>["auto","avoid","all","avoid-page","page","left","right","column"],K=()=>[Mn,ee];return{cacheSize:500,separator:":",theme:{colors:[oa],spacing:[ir,Ar],blur:["none","",Cr,ee],brightness:K(),borderColor:[e],borderRadius:["none","","full",Cr,ee],borderSpacing:E(),borderWidth:F(),contrast:K(),grayscale:re(),hueRotate:K(),invert:re(),gap:E(),gradientColorStops:[e],gradientColorStopPositions:[CS,Ar],inset:O(),margin:O(),opacity:K(),padding:E(),saturate:K(),scale:K(),sepia:re(),skew:K(),space:E(),translate:E()},classGroups:{aspect:[{aspect:["auto","square","video",ee]}],container:["container"],columns:[{columns:[Cr]}],"break-after":[{"break-after":Pe()}],"break-before":[{"break-before":Pe()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Y(),ee]}],overflow:[{overflow:$()}],"overflow-x":[{"overflow-x":$()}],"overflow-y":[{"overflow-y":$()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ia,ee]}],basis:[{basis:O()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ee]}],grow:[{grow:re()}],shrink:[{shrink:re()}],order:[{order:["first","last","none",ia,ee]}],"grid-cols":[{"grid-cols":[oa]}],"col-start-end":[{col:["auto",{span:["full",ia,ee]},ee]}],"col-start":[{"col-start":Z()}],"col-end":[{"col-end":Z()}],"grid-rows":[{"grid-rows":[oa]}],"row-start-end":[{row:["auto",{span:[ia,ee]},ee]}],"row-start":[{"row-start":Z()}],"row-end":[{"row-end":Z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ee]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ee]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...te()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...te(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...te(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ee,t]}],"min-w":[{"min-w":[ee,t,"min","max","fit"]}],"max-w":[{"max-w":[ee,t,"none","full","min","max","fit","prose",{screen:[Cr]},Cr]}],h:[{h:[ee,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ee,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ee,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ee,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Cr,Ar]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",ws]}],"font-family":[{font:[oa]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ee]}],"line-clamp":[{"line-clamp":["none",Mn,ws]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ir,ee]}],"list-image":[{"list-image":["none",ee]}],"list-style-type":[{list:["none","disc","decimal",ee]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...B(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ir,Ar]}],"underline-offset":[{"underline-offset":["auto",ir,ee]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:E()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ee]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ee]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Y(),IS]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",TS]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},MS]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[h]}],"gradient-via":[{via:[h]}],"gradient-to":[{to:[h]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[s]}],"border-w-x":[{"border-x":[s]}],"border-w-y":[{"border-y":[s]}],"border-w-s":[{"border-s":[s]}],"border-w-e":[{"border-e":[s]}],"border-w-t":[{"border-t":[s]}],"border-w-r":[{"border-r":[s]}],"border-w-b":[{"border-b":[s]}],"border-w-l":[{"border-l":[s]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...B(),"hidden"]}],"divide-x":[{"divide-x":[s]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[s]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:B()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...B()]}],"outline-offset":[{"outline-offset":[ir,ee]}],"outline-w":[{outline:[ir,Ar]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:F()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[ir,Ar]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Cr,$S]}],"shadow-color":[{shadow:[oa]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...q(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":q()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Cr,ee]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[b]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ee]}],duration:[{duration:K()}],ease:[{ease:["linear","in","out","in-out",ee]}],delay:[{delay:K()}],animate:[{animate:["none","spin","ping","pulse","bounce",ee]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[ia,ee]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ee]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ee]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":E()}],"scroll-mx":[{"scroll-mx":E()}],"scroll-my":[{"scroll-my":E()}],"scroll-ms":[{"scroll-ms":E()}],"scroll-me":[{"scroll-me":E()}],"scroll-mt":[{"scroll-mt":E()}],"scroll-mr":[{"scroll-mr":E()}],"scroll-mb":[{"scroll-mb":E()}],"scroll-ml":[{"scroll-ml":E()}],"scroll-p":[{"scroll-p":E()}],"scroll-px":[{"scroll-px":E()}],"scroll-py":[{"scroll-py":E()}],"scroll-ps":[{"scroll-ps":E()}],"scroll-pe":[{"scroll-pe":E()}],"scroll-pt":[{"scroll-pt":E()}],"scroll-pr":[{"scroll-pr":E()}],"scroll-pb":[{"scroll-pb":E()}],"scroll-pl":[{"scroll-pl":E()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ee]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[ir,Ar,ws]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},BS=jS(FS);function ce(...e){return BS(fe(e))}const Me={auth:"/auth",dashboard:"/",camera:"/camera",settings:"/settings",gardenChat:"/garden-chat",plantDetail:e=>`/plant/${e}`,plantChat:e=>`/plant/${e}/chat`},ze={toDashboard:()=>Me.dashboard,toCamera:()=>Me.camera,toSettings:()=>Me.settings,toGardenChat:()=>Me.gardenChat,toPlantDetail:e=>Me.plantDetail(e),toPlantChat:e=>Me.plantChat(e),toAuth:()=>Me.auth},US=(e,t)=>e===t?!0:t===Me.dashboard?e==="/"||e.startsWith("/plant/"):t===Me.gardenChat?e===Me.gardenChat||e.includes("/chat")||e.includes("/garden-chat"):t===Me.settings?e.startsWith("/settings"):!1;var Ep=Symbol.for("immer-nothing"),zd=Symbol.for("immer-draftable"),St=Symbol.for("immer-state");function Wt(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Ln=Object.getPrototypeOf;function pn(e){return!!e&&!!e[St]}function pr(e){return e?_p(e)||Array.isArray(e)||!!e[zd]||!!e.constructor?.[zd]||wo(e)||jo(e):!1}var WS=Object.prototype.constructor.toString();function _p(e){if(!e||typeof e!="object")return!1;const t=Ln(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===WS}function Oi(e,t){bo(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function bo(e){const t=e[St];return t?t.type_:Array.isArray(e)?1:wo(e)?2:jo(e)?3:0}function rl(e,t){return bo(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Ap(e,t,r){const n=bo(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function HS(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function wo(e){return e instanceof Map}function jo(e){return e instanceof Set}function Yr(e){return e.copy_||e.base_}function nl(e,t){if(wo(e))return new Map(e);if(jo(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=_p(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[St];let a=Reflect.ownKeys(n);for(let i=0;i<a.length;i++){const o=a[i],s=n[o];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(n[o]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[o]})}return Object.create(Ln(e),n)}else{const n=Ln(e);if(n!==null&&r)return{...e};const a=Object.create(n);return Object.assign(a,e)}}function gc(e,t=!1){return ko(e)||pn(e)||!pr(e)||(bo(e)>1&&(e.set=e.add=e.clear=e.delete=qS),Object.freeze(e),t&&Object.entries(e).forEach(([r,n])=>gc(n,!0))),e}function qS(){Wt(2)}function ko(e){return Object.isFrozen(e)}var ZS={};function gn(e){const t=ZS[e];return t||Wt(0,e),t}var Ea;function Cp(){return Ea}function KS(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Rd(e,t){t&&(gn("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function al(e){il(e),e.drafts_.forEach(GS),e.drafts_=null}function il(e){e===Ea&&(Ea=e.parent_)}function Ld(e){return Ea=KS(Ea,e)}function GS(e){const t=e[St];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Fd(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[St].modified_&&(al(t),Wt(4)),pr(e)&&(e=Ti(t,e),t.parent_||Ii(t,e)),t.patches_&&gn("Patches").generateReplacementPatches_(r[St].base_,e,t.patches_,t.inversePatches_)):e=Ti(t,r,[]),al(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Ep?e:void 0}function Ti(e,t,r){if(ko(t))return t;const n=t[St];if(!n)return Oi(t,(a,i)=>Bd(e,n,t,a,i,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return Ii(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const a=n.copy_;let i=a,o=!1;n.type_===3&&(i=new Set(a),a.clear(),o=!0),Oi(i,(s,c)=>Bd(e,n,a,s,c,r,o)),Ii(e,a,!1),r&&e.patches_&&gn("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function Bd(e,t,r,n,a,i,o){if(pn(a)){const s=i&&t&&t.type_!==3&&!rl(t.assigned_,n)?i.concat(n):void 0,c=Ti(e,a,s);if(Ap(r,n,c),pn(c))e.canAutoFreeze_=!1;else return}else o&&r.add(a);if(pr(a)&&!ko(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Ti(e,a),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&Ii(e,a)}}function Ii(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&gc(t,r)}function VS(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:Cp(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,i=vc;r&&(a=[n],i=_a);const{revoke:o,proxy:s}=Proxy.revocable(a,i);return n.draft_=s,n.revoke_=o,s}var vc={get(e,t){if(t===St)return e;const r=Yr(e);if(!rl(r,t))return YS(e,r,t);const n=r[t];return e.finalized_||!pr(n)?n:n===js(e.base_,t)?(ks(e),e.copy_[t]=sl(n,e)):n},has(e,t){return t in Yr(e)},ownKeys(e){return Reflect.ownKeys(Yr(e))},set(e,t,r){const n=Op(Yr(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const a=js(Yr(e),t),i=a?.[St];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(HS(r,a)&&(r!==void 0||rl(e.base_,t)))return!0;ks(e),ol(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return js(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,ks(e),ol(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Yr(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Wt(11)},getPrototypeOf(e){return Ln(e.base_)},setPrototypeOf(){Wt(12)}},_a={};Oi(vc,(e,t)=>{_a[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});_a.deleteProperty=function(e,t){return _a.set.call(this,e,t,void 0)};_a.set=function(e,t,r){return vc.set.call(this,e[0],t,r,e[0])};function js(e,t){const r=e[St];return(r?Yr(r):e)[t]}function YS(e,t,r){const n=Op(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function Op(e,t){if(!(t in e))return;let r=Ln(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Ln(r)}}function ol(e){e.modified_||(e.modified_=!0,e.parent_&&ol(e.parent_))}function ks(e){e.copy_||(e.copy_=nl(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var XS=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const o=this;return function(c=i,...u){return o.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&Wt(6),n!==void 0&&typeof n!="function"&&Wt(7);let a;if(pr(t)){const i=Ld(this),o=sl(t,void 0);let s=!0;try{a=r(o),s=!1}finally{s?al(i):il(i)}return Rd(i,n),Fd(a,i)}else if(!t||typeof t!="object"){if(a=r(t),a===void 0&&(a=t),a===Ep&&(a=void 0),this.autoFreeze_&&gc(a,!0),n){const i=[],o=[];gn("Patches").generateReplacementPatches_(t,a,i,o),n(i,o)}return a}else Wt(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(o,...s)=>this.produceWithPatches(o,c=>t(c,...s));let n,a;return[this.produce(t,r,(o,s)=>{n=o,a=s}),n,a]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){pr(e)||Wt(8),pn(e)&&(e=fr(e));const t=Ld(this),r=sl(e,void 0);return r[St].isManual_=!0,il(t),r}finishDraft(e,t){const r=e&&e[St];(!r||!r.isManual_)&&Wt(9);const{scope_:n}=r;return Rd(n,t),Fd(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const a=t[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(t=t.slice(r+1));const n=gn("Patches").applyPatches_;return pn(e)?n(e,t):this.produce(e,a=>n(a,t))}};function sl(e,t){const r=wo(e)?gn("MapSet").proxyMap_(e,t):jo(e)?gn("MapSet").proxySet_(e,t):VS(e,t);return(t?t.scope_:Cp()).drafts_.push(r),r}function fr(e){return pn(e)||Wt(10,e),Tp(e)}function Tp(e){if(!pr(e)||ko(e))return e;const t=e[St];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=nl(e,t.scope_.immer_.useStrictShallowCopy_)}else r=nl(e,!0);return Oi(r,(n,a)=>{Ap(r,n,Tp(a))}),t&&(t.finalized_=!1),r}var Nt=new XS,or=Nt.produce;Nt.produceWithPatches.bind(Nt);Nt.setAutoFreeze.bind(Nt);Nt.setUseStrictShallowCopy.bind(Nt);Nt.applyPatches.bind(Nt);Nt.createDraft.bind(Nt);Nt.finishDraft.bind(Nt);let li;const QS=new Uint8Array(16);function JS(){if(!li&&(li=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!li))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return li(QS)}const qe=[];for(let e=0;e<256;++e)qe.push((e+256).toString(16).slice(1));function eN(e,t=0){return qe[e[t+0]]+qe[e[t+1]]+qe[e[t+2]]+qe[e[t+3]]+"-"+qe[e[t+4]]+qe[e[t+5]]+"-"+qe[e[t+6]]+qe[e[t+7]]+"-"+qe[e[t+8]]+qe[e[t+9]]+"-"+qe[e[t+10]]+qe[e[t+11]]+qe[e[t+12]]+qe[e[t+13]]+qe[e[t+14]]+qe[e[t+15]]}const tN=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ud={randomUUID:tN};function rN(e,t,r){if(Ud.randomUUID&&!e)return Ud.randomUUID();e=e||{};const n=e.random||(e.rng||JS)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,eN(n)}const Ip=5,nN=Ip*1024*1024,Dp=e=>{if(!e||typeof e!="string")throw new Error("URL de imagen inválida");const t=e.split(",")[1];if(!t)throw new Error("Formato de imagen inválido");const r=t.length*3/4;if(r>nN){const n=(r/1048576).toFixed(1);throw new Error(`La imagen es demasiado grande (${n}MB). El límite máximo es ${Ip}MB. Por favor, usa una imagen más pequeña.`)}console.log(`[imageService] Image size validation passed: ${(r/(1024*1024)).toFixed(2)}MB`)},aN=e=>{if(!e||typeof e!="string")throw new Error("Invalid data URL: input is not a string");if(!e.startsWith("data:"))throw new Error('Invalid data URL: does not start with "data:"');const t=e.split(",");if(t.length!==2)throw new Error("Invalid data URL: incorrect format");const r=t[0].match(/:(.*?);/);if(!r)throw new Error("Invalid data URL: could not extract MIME type");const n=r[1];if(!n.startsWith("image/"))throw new Error(`Invalid data URL: not an image MIME type (${n})`);try{const a=atob(t[1]);let i=a.length;const o=new Uint8Array(i);for(;i--;)o[i]=a.charCodeAt(i);return new Blob([o],{type:n})}catch(a){throw new Error(`Invalid data URL: failed to decode base64 data - ${a instanceof Error?a.message:"Unknown error"}`)}},Mp=async(e,t,r)=>{try{Dp(e);const n=aN(e),a=n.type.split("/")[1],i=`${r}/${rN()}.${a}`,{error:o}=await pe.storage.from(t).upload(i,n,{cacheControl:"3600",upsert:!1});if(o)throw console.error("Error uploading image to Supabase Storage:",o),new Error(`Storage error: ${o.message}`);const{data:s}=pe.storage.from(t).getPublicUrl(i);if(!s||!s.publicUrl)throw new Error("Could not get public URL for uploaded image.");return s.publicUrl}catch(n){throw console.error("Failed to upload image:",n),n instanceof Error?new Error(`Image upload failed: ${n.message}`):new Error("An unknown error occurred during image upload.")}},iN=async e=>{try{const{data:{session:t},error:r}=await pe.auth.getSession();if(r||!t?.access_token)throw console.error("User session not available:",r),new Error("Usuario no autenticado. Por favor inicia sesión nuevamente.");const{data:n,error:a}=await pe.functions.invoke("generate-plant-insights",{body:{plant:e},headers:{Authorization:`Bearer ${t.access_token}`}});if(a)throw new Error(`Failed to generate insights: ${a.message}`);return hk.parse(n)}catch(t){throw console.error("[insightService] Error generating insights:",t),t instanceof uj?new Error(`Invalid data structure for insights: ${t.message}`):t}},$p=async e=>{Dp(e);const{data:{session:t},error:r}=await pe.auth.getSession();if(r||!t)throw new Error("User must be authenticated to analyze images");const{data:n,error:a}=await pe.functions.invoke("analyze-image",{body:{imageDataUrl:e},headers:{Authorization:`Bearer ${t.access_token}`}});if(a){if(console.error("Error invoking analyze-image function:",a),a.message?.includes("unsupported image"))throw new Error("La imagen no es válida. Por favor, asegúrate de que sea una foto clara de una planta.");if(a.message?.includes("OpenAI API key"))throw new Error("Servicio de análisis temporalmente no disponible. Intenta de nuevo más tarde.");const i=a.context?.msg?JSON.parse(a.context.msg).error:a.message;throw new Error(`Failed to analyze image: ${i}`)}if(n&&n.error)throw console.error("Image analysis failed with a specific error:",n.error),new Error(n.error);return n},Wd=async(e,t)=>{const r="cálido, simpático, motivador, y con un toque de humor ligero",n=(e.images||[]).map(m=>({url:m.url,timestamp:m.timestamp instanceof Date?m.timestamp.toISOString():m.timestamp,...m.healthAnalysis?{healthAnalysis:m.healthAnalysis}:{}})).sort((m,h)=>new Date(m.timestamp).getTime()-new Date(h.timestamp).getTime());let a=[];try{a=await iN(e)}catch(m){console.warn("[generatePlantResponse] No se pudieron generar insights para la planta:",m),a=[]}const i={...e,images:n},{data:{session:o},error:s}=await pe.auth.getSession();if(s||!o?.access_token)throw console.error("User session not available:",s),new Error("Usuario no autenticado. Por favor inicia sesión nuevamente.");const{data:c,error:u}=await pe.functions.invoke("generate-plant-response",{body:{plant:i,userMessage:t,tonePersona:r,insights:a},headers:{Authorization:`Bearer ${o.access_token}`}});if(u)throw console.error("Error calling generate-plant-response function:",u),new Error("Failed to generate plant response: "+u.message);const d=(c?.content||"").toLowerCase();return(!c?.content||d.includes("no sé")||d.includes("no tengo información")||d.includes("no puedo ayudarte")||d.length<20)&&xo.warning("Respuesta genérica","La respuesta de la planta fue muy genérica o poco útil. Intenta preguntar de otra forma o proporciona más detalles."),{...c,insights:c?.insights||a||[],suggestedActions:c?.suggestedActions||[]}},oN=async(e,t)=>{const{data:{session:r},error:n}=await pe.auth.getSession();if(n||!r?.access_token)throw console.error("User session not available:",n),new Error("Usuario no autenticado. Por favor inicia sesión nuevamente.");const{data:a,error:i}=await pe.functions.invoke("complete-plant-info",{body:{species:e,commonName:t},headers:{Authorization:`Bearer ${r.access_token}`}});if(i)throw console.error("💥 [API] Error en complete-plant-info function:",i),new Error("Failed to complete plant info: "+i.message);const o=["interior","exterior","ambos"],s=["poca_luz","luz_indirecta","luz_directa_parcial","pleno_sol"];return{plantEnvironment:o.includes(a.plantEnvironment)?a.plantEnvironment:"interior",lightRequirements:s.includes(a.lightRequirements)?a.lightRequirements:"luz_indirecta",description:a.description||void 0,funFacts:Array.isArray(a.funFacts)?a.funFacts:void 0}},sa=(e,t,r,n)=>({id:e.id,name:e.name,species:e.species,variety:e.variety||void 0,nickname:e.nickname||void 0,description:e.description||void 0,funFacts:e.fun_facts||[],location:e.location,plantEnvironment:e.plant_environment,lightRequirements:e.light_requirements,dateAdded:new Date(e.date_added),lastWatered:e.last_watered?new Date(e.last_watered):void 0,lastFertilized:e.last_fertilized?new Date(e.last_fertilized):void 0,images:t,healthScore:e.health_score||85,careProfile:e.care_profile,personality:e.personality,chatHistory:r,notifications:n});class yc{constructor(t=pe){Bt(this,"supabase");this.supabase=t}async getUserPlantSummaries(t){try{const{data:r,error:n}=await this.supabase.from("plants").select(`
          id,
          name,
          nickname,
          species,
          location,
          plant_environment,
          light_requirements,
          health_score,
          last_watered,
          care_profile
        `).eq("user_id",t).order("created_at",{ascending:!1});if(n)throw n;let a=new Map;if(r.length>0){const o=r.map(u=>u.id),{data:s,error:c}=await this.supabase.from("plant_images").select("plant_id, url").in("plant_id",o).eq("is_profile_image",!0);c?console.warn("[plantService] Error fetching profile images:",c):a=new Map((s||[]).map(u=>[u.plant_id,u.url]))}return r.map(o=>({id:o.id,name:o.name,nickname:o.nickname||void 0,species:o.species,location:o.location,plantEnvironment:o.plant_environment,lightRequirements:o.light_requirements,healthScore:o.health_score||85,profileImageUrl:a.get(o.id),lastWatered:o.last_watered?new Date(o.last_watered):void 0,wateringFrequency:o.care_profile?.wateringFrequency}))}catch(r){throw console.error("Error fetching plant summaries:",r),r}}async getUserPlants(t){try{const{data:r,error:n}=await this.supabase.from("plants").select(`
          *,
          plant_images ( * ),
          chat_messages ( * ),
          plant_notifications ( * )
        `).eq("user_id",t).order("created_at",{ascending:!1});if(n)throw n;return r.map(i=>{const o=(i.plant_images||[]).map(u=>({id:u.id,url:u.url,timestamp:new Date(u.created_at),healthAnalysis:u.health_analysis,isProfileImage:u.is_profile_image||!1})),s=(i.chat_messages||[]).map(u=>({id:u.id,sender:u.sender,content:u.content,timestamp:new Date(u.created_at),emotion:u.emotion})),c=(i.plant_notifications||[]).map(u=>({id:u.id,type:u.type,title:u.title,message:u.message,priority:u.priority||"medium",scheduledFor:new Date(u.scheduled_for),completed:u.completed||!1}));return sa(i,o,s,c)})}catch(r){throw console.error("Error fetching plants:",r),r}}async getPlantById(t,r){try{const{data:n,error:a}=await this.supabase.from("plants").select(`
          *,
          plant_images ( * ),
          chat_messages ( * ),
          plant_notifications ( * )
        `).eq("id",t).eq("user_id",r).single();if(a){if(a.code==="PGRST116")return null;throw a}if(!n)return null;const i=(n.plant_images||[]).map(c=>({id:c.id,url:c.url,timestamp:new Date(c.created_at),healthAnalysis:c.health_analysis,isProfileImage:c.is_profile_image||!1})),o=(n.chat_messages||[]).map(c=>({id:c.id,sender:c.sender,content:c.content,timestamp:new Date(c.created_at),emotion:c.emotion})),s=(n.plant_notifications||[]).map(c=>({id:c.id,type:c.type,title:c.title,message:c.message,priority:c.priority||"medium",scheduledFor:new Date(c.scheduled_for),completed:c.completed||!1}));return sa(n,i,o,s)}catch(n){throw console.error("Error fetching plant by ID:",n),n}}async addPlantFromAnalysis(t,r,n){try{console.log("[PlantService] Iniciando análisis IA...");const a=await $p(r);console.log("[PlantService] Resultado IA:",a);const i={name:a.commonName,species:a.species,description:a.generalDescription,funFacts:a.funFacts,variety:a.variety??void 0,nickname:a.commonName,location:n,plantEnvironment:a.plantEnvironment,lightRequirements:a.lightRequirements,dateAdded:new Date,healthScore:a.health.confidence,careProfile:a.careProfile,personality:a.personality};console.log("[PlantService] Payload a createPlant:",i);const o=await this.createPlant(i,t);return console.log("[PlantService] Planta creada:",o),(async()=>{let s=!1,c=!1;try{console.log(`[PlantService] Starting image upload for plant ${o.id}`);const u=await Mp(r,"plant-images",`${t}/${o.id}`);console.log("[PlantService] Imagen subida:",u),await this.addPlantImage(o.id,{url:u,timestamp:new Date,isProfileImage:!0,healthAnalysis:a.health},t),s=!0,console.log(`[PlantService] Image upload completed for plant ${o.id}`)}catch(u){console.error(`[PlantService] Image upload failed for plant ${o.id}:`,u),alert("Error subiendo imagen: "+(u instanceof Error?u.message:JSON.stringify(u)))}try{console.log(`[PlantService] Starting chat initialization for plant ${o.id}`);const u=await Wd(o,"¡Hola! Acabo de llegar. ¿Cómo te llamas?");console.log("[PlantService] Respuesta IA chat:",u),await this.addChatMessage(o.id,{sender:"plant",content:u.content,timestamp:new Date,emotion:u.emotion},t),c=!0,console.log(`[PlantService] Chat initialization completed for plant ${o.id}`)}catch(u){console.error(`[PlantService] Chat initialization failed for plant ${o.id}:`,u),alert("Error inicializando chat: "+(u instanceof Error?u.message:JSON.stringify(u)))}s&&c?console.log(`[PlantService] All background tasks for plant ${o.id} completed successfully.`):(s||c)&&console.log(`[PlantService] Background tasks for plant ${o.id} partially completed.`)})().catch(s=>{console.error(`[PlantService] Error during background tasks for plant ${o.id}:`,s),alert("Error en tareas de fondo: "+(s instanceof Error?s.message:JSON.stringify(s)))}),o}catch(a){throw console.error("Error adding plant from analysis:",a),alert("Error creando planta: "+(a instanceof Error?a.message:JSON.stringify(a))),a}}async createPlant(t,r){try{const n={user_id:r,name:t.name,species:t.species,variety:t.variety||null,nickname:t.nickname||null,description:t.description||null,fun_facts:t.funFacts||null,location:t.location,plant_environment:t.plantEnvironment||null,light_requirements:t.lightRequirements||null,date_added:t.dateAdded.toISOString(),last_watered:null,last_fertilized:null,health_score:t.healthScore,care_profile:t.careProfile,personality:t.personality,updated_at:null};console.log("[PlantService] Payload a Supabase:",n);const{data:a,error:i}=await this.supabase.from("plants").insert(n).select("*").single();if(console.log("[PlantService] Respuesta Supabase:",a,i),i)throw console.error("Supabase error:",{message:i.message,details:i.details,code:i.code}),alert("Error Supabase: "+i.message),new Error(`Supabase error creating plant: ${i.message}`);if(!a)throw alert("No se pudo crear la planta en la base de datos, no se devolvieron datos."),new Error("Failed to create plant in the database, no data returned.");return sa(a,[],[],[])}catch(n){throw console.error("Error creating plant:",n),alert("Error creando planta: "+(n instanceof Error?n.message:JSON.stringify(n))),n}}async updatePlantInfo(t,r,n){try{const a={};n.plantEnvironment!==void 0&&(a.plant_environment=n.plantEnvironment),n.lightRequirements!==void 0&&(a.light_requirements=n.lightRequirements),n.description!==void 0&&(a.description=n.description),n.funFacts!==void 0&&(a.fun_facts=n.funFacts);const{data:i,error:o}=await this.supabase.from("plants").update(a).eq("id",t).eq("user_id",r).select("*").single();if(o)throw console.error("Supabase error updating plant:",o),new Error(`Error updating plant: ${o.message}`);if(!i)throw new Error("Plant not found or not updated.");return sa(i,[],[],[])}catch(a){throw console.error("Error updating plant info:",a),a}}async updatePlantHealthScore(t,r,n,a,i){try{console.log("🏥 [DB] Actualizando health score en BD:",{plantId:t,healthScore:n,hasAnalysis:!!a});const{error:o}=await this.supabase.from("plants").update({health_score:n}).eq("id",t).eq("user_id",r);if(o)throw console.error("💥 [DB] Error actualizando health score:",o),new Error(`Error updating plant health score: ${o.message}`);if(a&&i){console.log("📸 [DB] Actualizando análisis de salud en imagen:",i);const{error:s}=await this.supabase.from("plant_images").update({health_analysis:a}).eq("id",i).eq("user_id",r);s&&console.warn("⚠️ [DB] Error actualizando análisis en imagen:",s)}console.log("✅ [DB] Health score actualizado exitosamente")}catch(o){throw console.error("💥 [DB] Error en updatePlantHealthScore:",o),o}}async updatePlant(t,r){try{const n={name:t.name,species:t.species,variety:t.variety,nickname:t.nickname,description:t.description,fun_facts:t.funFacts,location:t.location,health_score:t.healthScore,care_profile:t.careProfile,personality:t.personality,last_watered:t.lastWatered?.toISOString(),last_fertilized:t.lastFertilized?.toISOString()},{data:a,error:i}=await this.supabase.from("plants").update(n).eq("id",t.id).eq("user_id",r).select().single();if(i)throw i;return sa(a,t.images,t.chatHistory,t.notifications)}catch(n){throw console.error("Error updating plant:",n),n}}async deletePlant(t,r){try{const{error:n}=await this.supabase.from("plants").delete().eq("id",t).eq("user_id",r);if(n)throw n}catch(n){throw console.error("Error deleting plant:",n),n}}async sendChatMessageAndGetResponse(t,r,n){const a=await this.addChatMessage(t.id,r,n),i=await Wd(t,r.content),o={};i.insights&&(o.insights=i.insights),i.suggestedActions&&(o.suggestedActions=i.suggestedActions);const s={sender:"plant",content:i.content,emotion:i.emotion,timestamp:new Date,...Object.keys(o).length>0?{context:o}:{}},c=await this.addChatMessage(t.id,s,n);return[a,c]}async addChatMessage(t,r,n){try{const a={plant_id:t,user_id:n,sender:r.sender,content:r.content,emotion:r.emotion||null};r.context&&(a.context=r.context);const{data:i,error:o}=await this.supabase.from("chat_messages").insert(a).select().single();if(o)throw console.error("❌ Supabase error:",o),o;return{id:i.id,sender:i.sender,content:i.content,timestamp:new Date(i.created_at),emotion:i.emotion,context:i.context||void 0}}catch(a){throw console.error("Error adding chat message:",a),a}}async addPlantImage(t,r,n){try{const a=r.url;let i="";try{const u=new URL(a).pathname.split("/"),d=u.findIndex(f=>f==="object");d!==-1&&d+2<u.length&&(i=u.slice(d+2).join("/"))}catch{console.warn("Could not extract storage path from URL:",a),i=`${n}/${t}/${Date.now()}.jpg`}const{data:o,error:s}=await this.supabase.from("plant_images").insert({plant_id:t,user_id:n,url:a,storage_path:i,is_profile_image:r.isProfileImage,health_analysis:r.healthAnalysis}).select().single();if(s)throw s;if(!o.url)throw new Error("Image URL not returned from database.");return{id:o.id,url:o.url,timestamp:new Date(o.created_at),isProfileImage:o.is_profile_image||!1,healthAnalysis:o.health_analysis}}catch(a){throw console.error("Error adding plant image:",a),new Error(`Image upload failed: ${a instanceof Error?a.message:"Unknown error"}`)}}async setProfileImage(t,r,n){try{await this.supabase.from("plant_images").update({is_profile_image:!1}).eq("plant_id",t).eq("user_id",n);const{error:a}=await this.supabase.from("plant_images").update({is_profile_image:!0}).eq("id",r).eq("user_id",n);if(a)throw a}catch(a){throw console.error("Error setting profile image:",a),a}}async deleteImage(t,r){try{const{data:n,error:a}=await this.supabase.from("plant_images").select("storage_path").eq("id",t).eq("user_id",r).single();if(a)throw a;n?.storage_path&&await this.supabase.storage.from("plant-images").remove([n.storage_path]);const{error:i}=await this.supabase.from("plant_images").delete().eq("id",t).eq("user_id",r);if(i)throw i}catch(n){throw console.error("Error deleting image:",n),n}}}const On=new yc(pe),la=new yc,mr=ac((e,t)=>({plants:[],isLoading:!1,error:null,selectedPlantId:null,getPlantById:r=>t().plants.find(n=>n.id===r),setPlant:r=>{e(or(n=>{const a=n.plants.findIndex(i=>i.id===r.id);a!==-1?n.plants[a]=r:n.plants.push(r)}))},addPlant:async(r,n,a)=>{try{const i=await la.addPlantFromAnalysis(a,r,n);return e(or(o=>{o.plants.unshift(i)})),Dn.invalidateOnPlantChange(a),i}catch(i){throw console.error(i),i}},updatePlant:async(r,n)=>{try{const a=await la.updatePlant(r,n);e(or(i=>{const o=i.plants.findIndex(s=>s.id===a.id);o!==-1&&(i.plants[o]=a)})),Dn.invalidateOnPlantChange(n)}catch(a){throw console.error(a),a}},deletePlant:async(r,n)=>{try{await la.deletePlant(r,n),e(or(a=>{a.plants=a.plants.filter(i=>i.id!==r)})),Dn.invalidateOnPlantChange(n)}catch(a){throw console.error(a),a}},addChatMessage:async(r,n,a)=>{e({isLoading:!0,error:null});const i=t().getPlantById(r);if(!i){e({isLoading:!1,error:"Plant not found to add message"});return}const o={id:`temp-user-${Date.now()}`,sender:"user",content:n,timestamp:new Date};e(or(s=>{s.plants.find(c=>c.id===r)?.chatHistory.push(o)}));try{const[s,c]=await la.sendChatMessageAndGetResponse(i,{sender:"user",content:n,timestamp:o.timestamp},a);e(or(u=>{const d=u.plants.find(f=>f.id===r);d&&(d.chatHistory=[...d.chatHistory.filter(f=>f.id!==o.id),s,c]),u.isLoading=!1}))}catch(s){const c=s instanceof Error?s.message:"Failed to send message";console.error(c),e({isLoading:!1,error:c})}},addPlantImage:async(r,n,a)=>{try{const i=await la.addPlantImage(r,{url:n,timestamp:new Date,isProfileImage:!1},a);e(or(o=>{const s=o.plants.find(c=>c.id===r);s&&s.images.push(i)}))}catch(i){throw console.error(i),i}},selectPlant:r=>e({selectedPlantId:r}),clearError:()=>{},clearPlants:()=>e({plants:[],selectedPlantId:null})}));class sN{async updatePlantHealthDiagnosis(t){if(!t.images||t.images.length===0)throw new Error("Esta planta no tiene imágenes para analizar. Toma una foto primero.");const r=[...t.images].sort((i,o)=>o.timestamp.getTime()-i.timestamp.getTime())[0],{data:{session:n},error:a}=await pe.auth.getSession();if(a||!n?.access_token)throw console.error("💥 [Health] User session not available:",a),new Error("Usuario no autenticado. Por favor inicia sesión nuevamente.");try{const i=await fetch(r.url,{method:"HEAD"});if(!i.ok)throw new Error(`Imagen no accesible: ${i.status}`)}catch(i){throw console.error("💥 [Health] Error verificando acceso a imagen:",i),new Error("La imagen de la planta no está disponible. Intenta tomar una nueva foto.")}console.log("🔬 [Health] Llamando a update-health-diagnosis...");try{const{data:i,error:o}=await pe.functions.invoke("update-health-diagnosis",{body:{imageUrl:r.url,plantName:t.name,species:t.species},headers:{Authorization:`Bearer ${n.access_token}`}});if(o)throw console.error("💥 [Health] Error en función update-health-diagnosis:",o),new Error(`Error en análisis: ${o.message}`);if(!i||!i.overallHealth)throw console.error("💥 [Health] Datos incompletos del análisis:",i),new Error("El análisis no devolvió información de salud válida.");console.log("🎯 [Health] Análisis de salud completado exitosamente:",{overallHealth:i.overallHealth,confidence:i.confidence,issuesCount:i.issues?.length||0,recommendationsCount:i.recommendations?.length||0});const c={excellent:95,good:80,fair:60,poor:30}[i.overallHealth]||i.confidence||60;return console.log("📊 [Health] Nuevo score de salud calculado:",{overallHealth:i.overallHealth,numericScore:c,confidence:i.confidence}),{healthScore:c,healthAnalysis:i,updatedImage:{...r,healthAnalysis:i}}}catch(i){console.error("💥 [Health] Error en diagnóstico primario:",i),console.log("🔄 [Health] Intentando análisis de fallback...");try{if(r.healthAnalysis&&r.healthAnalysis.overallHealth){console.log("🎯 [Health] Usando análisis existente de la imagen");const o=r.healthAnalysis;return{healthScore:{excellent:95,good:80,fair:60,poor:30}[o.overallHealth]||60,healthAnalysis:o,updatedImage:r}}}catch(o){console.error("💥 [Health] Error en fallback:",o)}throw new Error("No se pudo actualizar el diagnóstico de salud. Verifica tu conexión a internet e intenta nuevamente.")}}async updatePlantHealthScore(t,r,n,a,i){try{console.log("🏥 [DB] Actualizando health score en BD:",{plantId:t,healthScore:n,hasAnalysis:!!a});const{error:o}=await pe.from("plants").update({health_score:n}).eq("id",t).eq("user_id",r);if(o)throw console.error("💥 [DB] Error actualizando health score:",o),new Error(`Error updating plant health score: ${o.message}`);if(a&&i){console.log("📸 [DB] Actualizando análisis de salud en imagen:",i);const{error:s}=await pe.from("plant_images").update({health_analysis:a}).eq("id",i).eq("user_id",r);s&&console.warn("⚠️ [DB] Error actualizando análisis en imagen:",s)}console.log("✅ [DB] Health score actualizado exitosamente")}catch(o){throw console.error("💥 [DB] Error en updatePlantHealthScore:",o),o}}}const Hd=new sN,So=()=>{const e=ho(),{addPlant:t,updatePlant:r,deletePlant:n}=mr.getState(),i=wr(f=>f.user)?.id,{addToast:o}=Kn(),s=$r({mutationFn:f=>{if(!i)throw new Error("User not authenticated");const{imageDataUrl:m,location:h}=f;return t(m,h,i)},onSuccess:f=>{e.invalidateQueries({queryKey:["plants",i]})},onError:f=>{console.error("Failed to create plant:",f)}}),c=$r({mutationFn:f=>{if(!i)throw new Error("User not authenticated");return r(f,i)},onMutate:async f=>{await e.cancelQueries({queryKey:["plants",i]});const m=e.getQueryData(["plants",i]);return m&&e.setQueryData(["plants",i],m.map(h=>h.id===f.id?f:h)),{previousPlants:m}},onError:(f,m,h)=>{h?.previousPlants&&e.setQueryData(["plants",i],h.previousPlants)},onSettled:f=>{e.invalidateQueries({queryKey:["plants",i]})}}),u=$r({mutationFn:async({plant:f,userId:m})=>{console.log("🩺 [Mutation] Iniciando actualización de diagnóstico...");const h=await Hd.updatePlantHealthDiagnosis(f);return await Hd.updatePlantHealthScore(f.id,m,h.healthScore,h.healthAnalysis,h.updatedImage.id),console.log("✅ [Mutation] Diagnóstico actualizado exitosamente"),h},onSuccess:(f,{plant:m})=>{e.invalidateQueries({queryKey:["plants"]}),e.invalidateQueries({queryKey:["plant",m.id]}),o({type:"success",title:"Diagnóstico Actualizado",message:`Nuevo estado de salud: ${f.healthScore}%`})},onError:f=>{console.error("💥 [Mutation] Error actualizando diagnóstico:",f),o({type:"error",title:"Error en Diagnóstico",message:f.message})}}),d=$r({mutationFn:f=>{if(!i)throw new Error("User not authenticated");return n(f,i)},onMutate:async f=>{await e.cancelQueries({queryKey:["plants",i]});const m=e.getQueryData(["plants",i]);return m&&e.setQueryData(["plants",i],m.filter(h=>h.id!==f)),{previousPlants:m}},onError:(f,m,h)=>{h?.previousPlants&&e.setQueryData(["plants",i],h.previousPlants)},onSettled:()=>{e.invalidateQueries({queryKey:["plants",i]})}});return{createPlant:s.mutate,isCreatingPlant:s.isPending,updatePlant:c.mutate,isUpdatingPlant:c.isPending,updatePlantHealthMutation:u.mutate,isUpdatingPlantHealth:u.isPending,deletePlant:d.mutate,isDeletingPlant:d.isPending}},lN=()=>{const[e,t]=y.useState(!1),r=it(),{createPlant:n,isCreatingPlant:a}=So();y.useEffect(()=>{const s=c=>{c.key==="Escape"&&t(!1)};return e&&document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s)}},[e]);const i=[{id:"camera",icon:tr,label:"Tomar Foto",color:"bg-blue-500",action:()=>{t(!1),r(ze.toCamera())}},{id:"gallery",icon:tc,label:"Galería",color:"bg-purple-500",action:()=>o()}],o=y.useCallback(()=>{const s=document.createElement("input");s.type="file",s.accept="image/*",s.onchange=async c=>{const u=c.target.files?.[0];if(u){const d=new FileReader;d.onload=async f=>{const m=f.target?.result;if(m){t(!1);const h=new Promise((p,v)=>{n({imageDataUrl:m,location:"Interior"},{onSuccess:g=>{g?.id&&r(ze.toPlantDetail(g.id)),p(g)},onError:g=>{console.error("Failed to create plant:",g),v(g)}})});xp.promise(h,{loading:"Analizando imagen... La IA está trabajando.",success:p=>`¡Planta "${p.name}" creada con éxito!`,error:p=>`Error: ${p.message}`})}},d.readAsDataURL(u)}},s.click()},[n,r]);return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"relative flex items-center",children:[l.jsx(P.button,{onClick:()=>t(!e),className:"w-12 h-12 bg-primary-500 hover:bg-primary-600 disabled:bg-primary-300 text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-200 flex items-center justify-center disabled:cursor-not-allowed",whileHover:{scale:a?1:1.05},whileTap:{scale:a?1:.95},disabled:a,"aria-label":e?"Cerrar menú":"Agregar planta","aria-expanded":e,children:l.jsx(se,{mode:"wait",children:a?l.jsx(P.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},children:l.jsx(on,{className:"w-6 h-6 animate-spin"})},"loading"):l.jsx(P.div,{initial:{opacity:0,rotate:-180},animate:{opacity:1,rotate:e?45:0},exit:{opacity:0,rotate:180},transition:{duration:.2},children:l.jsx(ec,{className:"w-6 h-6"})},"plus")})}),e&&l.jsx(P.span,{initial:{opacity:0,x:10},animate:{opacity:1,x:16},exit:{opacity:0,x:10},transition:{duration:.2},className:"ml-3 px-3 py-1 rounded-full bg-primary-100 text-primary-700 text-xs font-medium shadow-md whitespace-nowrap z-50",children:"Agregar planta"})]}),l.jsx(se,{children:e&&l.jsx(P.div,{className:"absolute bottom-16 right-0 flex flex-col gap-3",initial:"closed",animate:"open",exit:"closed",variants:{open:{transition:{staggerChildren:.1,delayChildren:.1}},closed:{transition:{staggerChildren:.05,staggerDirection:-1}}},children:i.map((s,c)=>l.jsxs(P.button,{onClick:s.action,className:`w-12 h-12 ${s.color} hover:scale-105 text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-200 flex items-center justify-center group relative`,variants:{open:{opacity:1,scale:1,y:0,transition:{delay:c*.1}},closed:{opacity:0,scale:.3,y:20,transition:{delay:(i.length-c)*.05}}},whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":s.label,children:[l.jsx(s.icon,{className:"w-5 h-5"}),l.jsx("div",{className:"absolute right-full mr-3 opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none",children:l.jsxs("div",{className:"bg-gray-900 text-white text-xs px-2 py-1 rounded-lg whitespace-nowrap",children:[s.label,l.jsx("div",{className:"absolute left-full top-1/2 -translate-y-1/2 w-0 h-0 border-l-4 border-r-0 border-t-2 border-b-2 border-transparent border-l-gray-900"})]})})]},s.id))})}),l.jsx(se,{children:e&&l.jsx(P.div,{className:"fixed inset-0 z-[-1]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>t(!1)})})]})},cN=[{icon:_i,path:Me.dashboard,label:"Inicio",description:"Tu jardín personal"},{icon:Sa,path:Me.gardenChat,label:"Chat IA",description:"Asistente de plantas"},{icon:Bx,path:Me.settings,label:"Ajustes",description:"Configuración"}],uN=()=>{const e=Ph(),t=e.pathname.startsWith("/plant/");return l.jsxs(l.Fragment,{children:[l.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-50 bg-white/95 dark:bg-stone-900/95 backdrop-blur-xl border-t border-stone-200 dark:border-stone-700 pb-safe","data-tour":"bottom-navigation",children:l.jsx("div",{className:"flex justify-around items-center h-20 max-w-lg mx-auto px-2",children:cN.map(r=>{const n=US(e.pathname,r.path);return l.jsx(P.div,{className:"relative flex-1 h-full",whileTap:{scale:.95},transition:{duration:.1},children:l.jsxs(zx,{to:r.path,className:ce("touch-target relative flex flex-col items-center justify-center w-full h-full rounded-2xl transition-all duration-200 focus-ring group",n?"text-nature-600 dark:text-nature-400":"text-stone-500 dark:text-stone-400 hover:text-nature-600 dark:hover:text-nature-400"),"aria-label":`${r.label} - ${r.description}`,...n?{"aria-current":"page"}:{},...r.path===Me.gardenChat?{"data-tour":"chat-tab"}:{},children:[l.jsx(se,{children:n&&l.jsx(P.div,{layoutId:"nav-background",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{type:"spring",stiffness:500,damping:30,duration:.2},className:"absolute inset-2 bg-nature-50 dark:bg-nature-900/30 rounded-xl"})}),l.jsx(P.div,{animate:{scale:n?1.1:1,y:n?-1:0},transition:{duration:.2,ease:[.16,1,.3,1]},className:"relative z-10 mb-1",children:l.jsx(r.icon,{size:22,strokeWidth:n?2.5:2,className:ce("transition-all duration-200",n?"drop-shadow-sm":"group-hover:scale-105")})}),l.jsx(P.span,{animate:{scale:n?1.02:1,fontWeight:n?600:500},transition:{duration:.2},className:ce("text-xs relative z-10 transition-all duration-200",n?"text-nature-700 dark:text-nature-300":""),children:r.label}),l.jsx(se,{children:n&&l.jsx(P.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},transition:{delay:.1,duration:.2},className:"absolute bottom-2 left-1/2 -translate-x-1/2 w-1 h-1 bg-nature-500 dark:bg-nature-400 rounded-full"})}),l.jsx(P.div,{className:"absolute inset-2 bg-stone-100 dark:bg-stone-800 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-200",style:{zIndex:n?-1:1}})]})},r.path)})})}),!t&&l.jsx(P.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2,duration:.3},className:"fixed bottom-24 right-4 sm:right-6 z-40","data-tour":"add-plant-fab",children:l.jsx(lN,{})})]})},dN=()=>{const[e,t]=y.useState(navigator.onLine);return y.useEffect(()=>{const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r),window.addEventListener("offline",n),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}},[]),e},fN=()=>{const e=dN();return l.jsxs(se,{children:[!e&&l.jsx(P.div,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},exit:{y:-100,opacity:0},className:"fixed top-0 left-0 right-0 z-50 safe-area-top",children:l.jsx("div",{className:"bg-red-500 text-white px-4 py-2 text-center text-sm font-medium",children:l.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[l.jsx(_h,{size:16}),l.jsx("span",{children:"Sin conexión - Modo offline"})]})})}),e&&l.jsx(P.div,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},exit:{y:-100,opacity:0},className:"fixed top-0 left-0 right-0 z-50 safe-area-top",onAnimationComplete:()=>{setTimeout(()=>{const t=document.querySelector("[data-online-indicator]");t&&t.remove()},2e3)},children:l.jsx("div",{className:"bg-green-500 text-white px-4 py-2 text-center text-sm font-medium","data-online-indicator":!0,children:l.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[l.jsx(Ah,{size:16}),l.jsx("span",{children:"Conexión restaurada"})]})})})]})},zp=y.createContext(void 0),mN=({children:e,defaultTheme:t="system",storageKey:r="plantitas-theme"})=>{const[n,a]=y.useState(()=>typeof window<"u"&&localStorage.getItem(r)||t),i=y.useMemo(()=>n==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":n,[n]),o=i==="dark";y.useEffect(()=>{const c=window.document.documentElement;c.classList.remove("light","dark"),c.setAttribute("data-theme",i),c.classList.add(i),localStorage.setItem(r,n);const u=document.querySelector('meta[name="theme-color"]');u&&u.setAttribute("content",o?"#1a202c":"#f7fafc")},[i,n,r,o]),y.useEffect(()=>{if(n!=="system")return;const c=window.matchMedia("(prefers-color-scheme: dark)"),u=()=>{a("system")};return c.addEventListener("change",u),()=>c.removeEventListener("change",u)},[n]);const s={theme:n,setTheme:a,resolvedTheme:i,isDark:o};return l.jsx(zp.Provider,{value:s,children:e})},hN=()=>{const e=y.useContext(zp);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e},pN=()=>{const e=Ph(),{isDark:t}=hN(),r=e.pathname==="/camera",n=()=>{const i={"/":"Página de inicio - Tu jardín personal","/camera":"Cámara - Agregar nueva planta","/chat":"Chat con IA - Asistente de plantas","/garden-chat":"Chat del jardín - Consultas generales","/settings":"Configuración - Ajustes de la aplicación"},o=e.pathname.includes("/plant/")?"/plant":e.pathname,s=i[o]||i[e.pathname]||"Página",c=document.createElement("div");c.setAttribute("aria-live","polite"),c.setAttribute("aria-atomic","true"),c.setAttribute("class","sr-only"),c.textContent=`Navegando a ${s}`,document.body.appendChild(c),setTimeout(()=>{document.body.removeChild(c)},1e3)};y.useEffect(()=>{n()},[e.pathname]);const a=()=>l.jsx("a",{href:"#main-content",className:"sr-only focus:not-sr-only fixed top-4 left-4 z-50 bg-nature-600 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 focus:shadow-lg focus-ring",onFocus:i=>{i.currentTarget.scrollIntoView({behavior:"smooth"})},children:"Saltar al contenido principal"});return l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-stone-50 via-nature-50/30 to-stone-100 dark:from-stone-950 dark:via-stone-900 dark:to-stone-950 text-stone-900 dark:text-stone-100",children:[l.jsx(a,{}),l.jsx("h1",{className:"sr-only",children:"Plantitas - Aplicación de cuidado de plantas"}),l.jsx("main",{id:"main-content",role:"main","aria-label":"Contenido principal",className:"pb-28 min-h-screen focus:outline-none container-adaptive",tabIndex:-1,children:l.jsx(se,{mode:"wait",children:l.jsx(P.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.2,ease:[.16,1,.3,1]},className:"w-full h-full",children:l.jsx(Rx,{})},e.pathname)})}),l.jsx("aside",{role:"complementary","aria-label":"Información de estado",children:l.jsx(fN,{})}),!r&&l.jsx("nav",{role:"navigation","aria-label":"Navegación inferior",children:l.jsx(uN,{})}),l.jsx("style",{children:`
        /* High contrast mode support */
        @media (prefers-contrast: high) {
          :root {
            --color-background: ${t?"#000000":"#ffffff"};
            --color-surface: ${t?"#111111":"#fafafa"};
            --color-text-primary: ${t?"#ffffff":"#000000"};
            --color-text-secondary: ${t?"#ffffff":"#000000"};
            --color-border: ${t?"#ffffff":"#000000"};
            --color-accent: ${t?"#00ff00":"#008000"};
          }
        }

        /* Reduce motion for accessibility */
        @media (prefers-reduced-motion: reduce) {
          * {
            animation-duration: 0.01ms !important;
            animation-iteration-count: 1 !important;
            transition-duration: 0.01ms !important;
          }
        }

        /* Enhanced focus indicators for keyboard navigation */
        *:focus-visible {
          outline: 2px solid var(--color-accent) !important;
          outline-offset: 2px !important;
          border-radius: 4px;
        }

        /* High contrast focus ring */
        @media (prefers-contrast: high) {
          *:focus-visible {
            outline: 3px solid ${t?"#00ff00":"#008000"} !important;
            outline-offset: 3px !important;
          }
        }

        /* Smooth scrolling for better UX */
        @media (prefers-reduced-motion: no-preference) {
          html {
            scroll-behavior: smooth;
          }
        }
      `})]})};class gN extends y.Component{constructor(r){super(r);Bt(this,"handleReload",()=>{window.location.reload()});Bt(this,"handleGoHome",()=>{window.location.href="/plantitas-app/"});this.state={hasError:!1}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,n){this.setState({error:r,errorInfo:n});const a={userAgent:navigator.userAgent,platform:navigator.platform,isOnline:navigator.onLine,viewport:{width:window.innerWidth,height:window.innerHeight},url:window.location.href,timestamp:new Date().toISOString()};console.error("[ErrorBoundary] Error caught:",{error:r.message,stack:r.stack,errorInfo:n,mobileInfo:a}),console.warn("[ErrorBoundary] Production error detected:",{message:r.message,mobile:a})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:l.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-4",children:l.jsx("div",{className:"max-w-md w-full",children:l.jsxs("div",{className:"glass-effect rounded-2xl p-8 text-center",children:[l.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center",children:l.jsx(qt,{size:32,className:"text-red-500"})}),l.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"¡Oops! Algo salió mal"}),l.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Ha ocurrido un error inesperado. No te preocupes, tus plantas están seguras."}),!1,l.jsxs("div",{className:"space-y-3",children:[l.jsxs("button",{onClick:this.handleReload,className:"w-full px-4 py-3 bg-primary-500 text-white rounded-xl font-medium ios-button flex items-center justify-center space-x-2",children:[l.jsx(Lr,{size:18}),l.jsx("span",{children:"Recargar Página"})]}),l.jsxs("button",{onClick:this.handleGoHome,className:"w-full px-4 py-3 bg-gray-600 text-white rounded-xl font-medium ios-button flex items-center justify-center space-x-2",children:[l.jsx(_i,{size:18}),l.jsx("span",{children:"Ir al Inicio"})]})]}),l.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-4",children:"Si el problema persiste, intenta limpiar el caché del navegador."})]})})}):this.props.children}}const vN=()=>{const e=wr(t=>t.user);return kh({queryKey:["plants",e?.id],queryFn:async()=>e?On.getUserPlantSummaries(e.id):Promise.resolve([]),enabled:!!e,staleTime:Ir.QUERY.STALE_TIME.MEDIUM,gcTime:Ir.QUERY.GC_TIME.LONG,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!0,placeholderData:[]})},qd=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Zd=fe,xc=(e,t)=>r=>{var n;if(t?.variants==null)return Zd(e,r?.class,r?.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(u=>{const d=r?.[u],f=i?.[u];if(d===null)return null;const m=qd(d)||qd(f);return a[u][m]}),s=r&&Object.entries(r).reduce((u,d)=>{let[f,m]=d;return m===void 0||(u[f]=m),u},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((u,d)=>{let{class:f,className:m,...h}=d;return Object.entries(h).every(p=>{let[v,g]=p;return Array.isArray(g)?g.includes({...i,...s}[v]):{...i,...s}[v]===g})?[...u,f,m]:u},[]);return Zd(e,o,c,r?.class,r?.className)},yN=xc("overflow-hidden transition-all duration-300",{variants:{variant:{default:["bg-white/90 border border-neutral-200","dark:bg-neutral-900/90 dark:border-neutral-700","shadow-md hover:shadow-lg"],glass:["glass","hover:shadow-glass-lg","border-neutral-200/50 dark:border-neutral-700/50"],elevated:["bg-white border border-neutral-100","dark:bg-neutral-800 dark:border-neutral-700","shadow-lg hover:shadow-xl"],outline:["bg-transparent border-2 border-neutral-200","dark:border-neutral-700","hover:border-primary-300 dark:hover:border-primary-600"],ghost:["bg-transparent border-none","hover:bg-neutral-50 dark:hover:bg-neutral-900/50"]},size:{sm:"p-4",default:"p-6",lg:"p-8",xl:"p-10"},radius:{none:"rounded-none",sm:"rounded-lg",default:"rounded-xl",lg:"rounded-2xl",full:"rounded-3xl"},interactive:{true:"cursor-pointer",false:""}},defaultVariants:{variant:"default",size:"default",radius:"default",interactive:!1}}),Pt=I.forwardRef(({className:e,variant:t,size:r,radius:n,interactive:a,hover:i=!1,loading:o=!1,children:s,ariaLabel:c,...u},d)=>l.jsx(P.div,{whileHover:a&&!o?{scale:i?1.02:1.01,y:i?-4:-2}:void 0,whileTap:a&&!o?{scale:.98}:void 0,transition:{duration:.2,ease:[.4,0,.2,1]},className:ce(yN({variant:t,size:r,radius:n,interactive:a}),o&&"animate-pulse",e),ref:d,...u,children:o?l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"h-4 bg-neutral-200 dark:bg-neutral-700 rounded animate-shimmer"}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("div",{className:"h-3 bg-neutral-200 dark:bg-neutral-700 rounded animate-shimmer"}),l.jsx("div",{className:"h-3 bg-neutral-200 dark:bg-neutral-700 rounded w-4/5 animate-shimmer"})]})]}):s}));Pt.displayName="Card";const No=I.forwardRef(({className:e,...t},r)=>l.jsx("div",{ref:r,className:ce("flex flex-col space-y-1.5 pb-4",e),...t}));No.displayName="CardHeader";const bc=I.forwardRef(({className:e,...t},r)=>l.jsx("h3",{ref:r,className:ce("text-xl font-semibold leading-tight text-neutral-900 dark:text-neutral-100",e),...t}));bc.displayName="CardTitle";const xN=I.forwardRef(({className:e,...t},r)=>l.jsx("p",{ref:r,className:ce("text-sm text-neutral-600 dark:text-neutral-400 leading-relaxed",e),...t}));xN.displayName="CardDescription";const gr=I.forwardRef(({className:e,...t},r)=>l.jsx("div",{ref:r,className:ce("",e),...t}));gr.displayName="CardContent";const Rp=I.forwardRef(({className:e,...t},r)=>l.jsx("div",{ref:r,className:ce("flex items-center pt-4 mt-4 border-t border-neutral-200 dark:border-neutral-700",e),...t}));Rp.displayName="CardFooter";const ca=new Set,ci=new Map,wc=({src:e,alt:t,className:r="",fallback:n,onLoad:a,onError:i,priority:o=!1,sizes:s="(max-width: 768px) 100vw, 50vw"})=>{const[c,u]=y.useState(()=>ca.has(e)),[d,f]=y.useState(!1),m=y.useRef(null);y.useEffect(()=>{if(o&&!ca.has(e)&&!ci.has(e)){const v=new Image;v.src=e,v.onload=()=>{ca.add(e),ci.set(e,v)},v.onerror=()=>{ci.delete(e)},ci.set(e,v)}},[e,o]);const h=y.useCallback(()=>{ca.add(e),u(!0),a?.()},[a,e]),p=y.useCallback(()=>{ca.delete(e),f(!0),i?.()},[i,e]);return d&&n?l.jsx(l.Fragment,{children:n}):d?l.jsx("div",{className:`bg-gray-200 dark:bg-gray-700 flex items-center justify-center ${r}`,children:l.jsx("span",{className:"text-gray-400 text-sm",children:"No image"})}):l.jsxs("div",{className:`relative overflow-hidden ${r}`,children:[l.jsx(se,{children:!c&&l.jsx(P.div,{initial:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"absolute inset-0 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 dark:from-gray-700 dark:via-gray-600 dark:to-gray-700 animate-pulse"})}),l.jsx(P.img,{ref:m,src:e,alt:t,className:`w-full h-full object-cover ${c?"opacity-100":"opacity-0"}`,loading:o?"eager":"lazy",decoding:"async",fetchPriority:o?"high":"low",sizes:s,onLoad:h,onError:p,initial:{opacity:0},animate:{opacity:c?1:0},transition:{duration:.15}})]})},bN=y.memo(({score:e})=>{const t=y.useMemo(()=>e>=80?{color:"bg-green-400",textColor:"text-green-600 dark:text-green-400",icon:l.jsx(Ve,{className:"w-4 h-4 mr-1 text-green-400"}),status:"Excelente"}:e>=60?{color:"bg-yellow-300",textColor:"text-yellow-600 dark:text-yellow-400",icon:l.jsx(zr,{className:"w-4 h-4 mr-1 text-yellow-400"}),status:"Buena"}:{color:"bg-red-300",textColor:"text-red-600 dark:text-red-400",icon:l.jsx(qt,{className:"w-4 h-4 mr-1 text-red-400"}),status:"Atención"},[e]);return l.jsxs("div",{className:"flex items-center gap-3 w-full",children:[l.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[l.jsx("div",{className:"relative w-24 h-2 bg-neutral-100 dark:bg-neutral-800 rounded-full overflow-hidden",children:l.jsx(P.div,{className:`absolute top-0 left-0 h-full rounded-full ${t.color}`,initial:{width:0},animate:{width:`${e}%`},transition:{duration:.5,ease:"easeOut"}})}),l.jsxs("span",{className:"text-xs font-semibold text-neutral-500 dark:text-neutral-400",children:[e,"%"]})]}),l.jsxs("div",{className:"flex items-center gap-1 text-xs px-2 py-0.5 rounded-full bg-neutral-50 dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-700",children:[t.icon,l.jsx("span",{className:t.textColor,children:t.status})]})]})});bN.displayName="PlantHealthIndicator";const Lp=y.memo(({plant:e,index:t})=>{const r=it(),n=ho(),{needsWatering:a,isFavorite:i}=y.useMemo(()=>{const d=e.lastWatered&&e.wateringFrequency?new Date().getTime()-new Date(e.lastWatered).getTime()>e.wateringFrequency*24*60*60*1e3:!e.lastWatered,f=e.healthScore>=80;return{needsWatering:d,isFavorite:f}},[e.lastWatered,e.wateringFrequency,e.healthScore]),o=()=>{n.prefetchQuery({queryKey:["plant",e.id],queryFn:async()=>{const{supabase:d}=await Yl(async()=>{const{supabase:p}=await Promise.resolve().then(()=>ub);return{supabase:p}},void 0),{data:f,error:m}=await d.from("plants").select(`
            *,
            plant_images(*)
          `).eq("id",e.id).single();if(m)throw m.code==="PGRST116"?new Error("Planta no encontrada."):new Error("Error al cargar la información de la planta.");const h=f;return{id:h.id,name:h.name,species:h.species,description:h.description??void 0,funFacts:h.fun_facts??void 0,variety:h.variety??void 0,nickname:h.nickname??void 0,location:h.location,plantEnvironment:h.plant_environment,lightRequirements:h.light_requirements,dateAdded:new Date(h.date_added),lastWatered:h.last_watered?new Date(h.last_watered):void 0,lastFertilized:h.last_fertilized?new Date(h.last_fertilized):void 0,healthScore:h.health_score??0,careProfile:h.care_profile,personality:h.personality,images:h.plant_images.map(p=>({id:p.id,url:p.url??"",timestamp:new Date(p.created_at),isProfileImage:p.is_profile_image??!1,healthAnalysis:p.health_analysis})),chatHistory:[],notifications:[]}},staleTime:1e3*60*5})},s=()=>r(ze.toPlantDetail(e.id)),c=Math.min(t,4),u=t<8;return l.jsx(P.div,{initial:u?{opacity:0,y:10}:{opacity:1,y:0},animate:{opacity:1,y:0},transition:u?{delay:c*.02,duration:.2,ease:"easeOut"}:{duration:0},whileHover:{y:-1},className:"group",children:l.jsxs(Pt,{variant:"glass",size:"sm",radius:"lg",interactive:!0,hover:!0,onClick:s,onMouseEnter:o,className:"overflow-hidden border border-green-200/60 hover:border-green-300/80 dark:hover:border-green-600 transition-all duration-300 p-4 mb-4 shadow-sm hover:shadow-lg hover:shadow-green-100/30 bg-white/80 backdrop-blur-sm",children:[l.jsx(No,{className:"pb-2 flex-shrink-0 space-y-0",children:l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsxs("div",{className:"relative w-20 h-20 rounded-[8px] overflow-hidden bg-gradient-to-br from-primary-50 to-primary-100 dark:from-primary-950 dark:to-primary-900 flex-shrink-0 border border-primary-200 dark:border-primary-800",children:[e.profileImageUrl?l.jsx(wc,{src:e.profileImageUrl,alt:e.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200",priority:t<4,sizes:"(max-width: 768px) 20vw, 10vw"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center text-primary-400 dark:text-primary-600",children:l.jsx(zr,{size:24})}),l.jsx(se,{children:i&&l.jsx(P.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},transition:{duration:.2},className:"absolute -top-1 -right-1 w-6 h-6 bg-error-500 rounded-full flex items-center justify-center shadow-lg",children:l.jsx(Ch,{size:12,className:"text-white fill-current"})})}),l.jsx(se,{children:a&&l.jsx(P.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},transition:{duration:.2},className:"absolute -bottom-1 -right-1 w-6 h-6 bg-warning-500 rounded-full flex items-center justify-center shadow-lg",children:l.jsx(P.div,{animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},children:l.jsx(po,{size:12,className:"text-white"})})})})]}),l.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:[l.jsx(bc,{className:"text-2xl font-bold text-neutral-900 dark:text-neutral-100 truncate mb-0 group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors",title:e.nickname||e.name,children:e.nickname||e.name}),l.jsx("p",{className:"text-xs text-[#555] truncate mb-[6px]",title:e.species,children:e.species}),l.jsx("div",{className:"flex items-center text-xs text-neutral-500 dark:text-neutral-500",children:l.jsxs("span",{className:"px-2 py-1 bg-neutral-100 dark:bg-neutral-800 rounded-md",children:["📍 ",e.location]})})]})]})}),l.jsxs(gr,{className:"pt-2 pb-0",children:[l.jsxs("div",{className:"flex items-center gap-2 w-full",children:[l.jsx("div",{className:"relative w-24 h-[6px] bg-[#EEE] rounded-full overflow-hidden flex-shrink-0",children:l.jsx(P.div,{className:`absolute top-0 left-0 h-full rounded-full ${e.healthScore>=80?"bg-green-400":e.healthScore>=60?"bg-yellow-300":"bg-red-300"}`,initial:{width:0},animate:{width:`${e.healthScore}%`},transition:{duration:.5,ease:"easeOut"}})}),l.jsxs("span",{className:"text-xs font-semibold text-neutral-500 dark:text-neutral-400 ml-1 min-w-[32px] text-right",children:[e.healthScore,"%"]}),l.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-semibold ml-auto ${e.healthScore>=80?"bg-green-500/10 text-green-700":e.healthScore>=60?"bg-yellow-400/10 text-yellow-700":"bg-red-400/10 text-red-700"}`,style:{padding:"4px 8px"},children:[e.healthScore>=80?l.jsx(Ve,{className:"w-4 h-4 mr-1 text-green-400"}):e.healthScore>=60?l.jsx(zr,{className:"w-4 h-4 mr-1 text-yellow-400"}):l.jsx(qt,{className:"w-4 h-4 mr-1 text-red-400"}),l.jsx("span",{children:e.healthScore>=80?"Excelente":e.healthScore>=60?"Buena":"Atención"})]})]}),e.healthScore<40&&l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 bg-error-100 text-error-700 dark:bg-error-900/30 dark:text-error-300 rounded-full text-xs font-semibold",children:[l.jsx(qt,{className:"w-3 h-3 mr-1","aria-label":"Atención"}),"¡Atención!"]}),l.jsx("span",{className:"text-xs text-error-600 dark:text-error-300",children:"Salud muy baja"})]})]}),l.jsx(P.div,{className:"absolute inset-0 bg-gradient-to-t from-primary-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none",initial:!1})]})})});Lp.displayName="PlantCard";function V({className:e,...t}){return l.jsx("div",{className:ce("animate-shimmer rounded-md","bg-[linear-gradient(110deg,var(--color-neutral-200)_8%,var(--color-neutral-300)_18%,var(--color-neutral-200)_33%)]","dark:bg-[linear-gradient(110deg,var(--color-neutral-800)_8%,var(--color-neutral-700)_18%,var(--color-neutral-800)_33%)]","bg-[length:200%_100%]",e),...t})}const wN=()=>l.jsxs(Pt,{variant:"elevated",size:"default",className:"overflow-hidden",children:[l.jsxs("div",{className:"flex items-start p-4 space-x-4",children:[l.jsx(V,{className:"w-20 h-20 rounded-lg flex-shrink-0"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs(No,{className:"p-0",children:[l.jsx(V,{className:"h-6 w-3/4"}),l.jsx(V,{className:"h-4 w-1/2 mt-2"})]}),l.jsx(gr,{className:"p-0 mt-3",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(V,{className:"w-16 h-1.5"}),l.jsx(V,{className:"w-8 h-3"})]})})]})]}),l.jsx(Rp,{className:"bg-neutral-50 dark:bg-neutral-800/50 p-2 border-t border-subtle",children:l.jsxs("div",{className:"flex justify-between items-center w-full",children:[l.jsx(V,{className:"h-4 w-1/3"}),l.jsx(V,{className:"w-8 h-8 rounded"})]})})]}),jN=xc("touch-target inline-flex items-center justify-center font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{primary:["bg-gradient-to-r from-green-600 to-emerald-600 text-white","hover:from-green-700 hover:to-emerald-700","active:from-green-800 active:to-emerald-800","focus-visible:ring-green-500/30","shadow-lg shadow-green-200/30 hover:shadow-xl hover:shadow-green-300/40","disabled:bg-neutral-300 disabled:text-neutral-500","dark:from-green-500 dark:to-emerald-500 dark:hover:from-green-400 dark:hover:to-emerald-400","transform hover:scale-[1.02] active:scale-[0.98] transition-all duration-200"],secondary:["bg-neutral-100 text-neutral-800 border border-neutral-300","hover:bg-neutral-200 hover:border-neutral-400","active:bg-neutral-300","focus-visible:ring-neutral-500/30","dark:bg-neutral-800 dark:text-neutral-100 dark:border-neutral-600","dark:hover:bg-neutral-700 dark:hover:border-neutral-500","shadow-sm hover:shadow-md"],outline:["bg-white text-neutral-800 border-2 border-neutral-800","hover:bg-neutral-50 hover:text-neutral-900","active:bg-neutral-100","focus-visible:ring-primary-500/30","dark:bg-neutral-950 dark:text-neutral-100 dark:border-neutral-200","dark:hover:bg-neutral-900 dark:hover:text-neutral-50"],ghost:["bg-transparent text-neutral-700 border border-transparent","hover:bg-neutral-100 hover:text-neutral-800","active:bg-neutral-200","focus-visible:ring-neutral-500/30","dark:text-neutral-300 dark:hover:bg-neutral-800 dark:hover:text-neutral-200","dark:active:bg-neutral-700"],destructive:["bg-error-600 text-white","hover:bg-error-700","active:bg-error-800","focus-visible:ring-error-500/30","shadow-md hover:shadow-lg","dark:bg-error-500 dark:text-black"],success:["bg-success-600 text-white","hover:bg-success-700","active:bg-success-800","focus-visible:ring-success-500/30","shadow-md hover:shadow-lg","dark:bg-success-500 dark:text-black"],warning:["bg-warning-600 text-white","hover:bg-warning-700","active:bg-warning-800","focus-visible:ring-warning-500/30","shadow-md hover:shadow-lg","dark:bg-warning-500 dark:text-black"],glass:["glass-enhanced text-neutral-800 border border-contrast","hover:backdrop-blur-xl hover:bg-contrast-surface","active:scale-[0.98]","focus-visible:ring-primary-500/30","dark:text-neutral-100"]},size:{xs:"h-8 px-3 text-xs rounded-md",sm:"h-10 px-4 text-sm rounded-lg",default:"h-11 px-6 text-base rounded-xl",lg:"h-12 px-8 text-lg rounded-xl",xl:"h-14 px-10 text-xl rounded-2xl",icon:"h-11 w-11 rounded-xl","icon-sm":"h-10 w-10 rounded-lg","icon-lg":"h-12 w-12 rounded-xl"},fullWidth:{true:"w-full",false:"w-auto"}},defaultVariants:{variant:"primary",size:"default",fullWidth:!1}}),G=I.forwardRef(({className:e,variant:t,size:r,fullWidth:n,loading:a=!1,leftIcon:i,rightIcon:o,children:s,disabled:c,...u},d)=>{const f=c||a;return l.jsxs(P.button,{whileTap:f?void 0:{scale:.96},whileHover:f?void 0:{scale:1.02},transition:{duration:.15,ease:[.4,0,.2,1]},className:ce(jN({variant:t,size:r,fullWidth:n,className:e})),disabled:f,ref:d,...u,children:[a&&l.jsx(P.div,{className:"mr-2",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:l.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeDasharray:"32",strokeDashoffset:"32",opacity:"0.3"}),l.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeDasharray:"8",strokeDashoffset:"8"})]})}),i&&!a&&l.jsx("span",{className:"mr-2 -ml-1",children:i}),l.jsx("span",{className:ce("flex items-center justify-center",a&&"opacity-70"),"aria-hidden":a?"true":void 0,children:Array.isArray(s)?s.filter(m=>typeof m=="string"||typeof m=="number"||I.isValidElement(m)):typeof s=="string"||typeof s=="number"||I.isValidElement(s)?s:null}),o&&l.jsx("span",{className:"ml-2 -mr-1",children:o})]})});G.displayName="Button";const kN=xc("w-full transition-all duration-200 outline-none disabled:cursor-not-allowed disabled:opacity-50",{variants:{variant:{default:["bg-white border border-neutral-300","dark:bg-neutral-900 dark:border-neutral-600","focus:border-primary-500 dark:focus:border-primary-400","focus:ring-2 focus:ring-primary-500/20"],filled:["bg-neutral-100 border border-transparent","dark:bg-neutral-800 dark:border-transparent","focus:bg-white focus:border-primary-500","dark:focus:bg-neutral-900 dark:focus:border-primary-400","focus:ring-2 focus:ring-primary-500/20"],glass:["glass border-neutral-200/50","dark:border-neutral-700/50","focus:border-primary-500/70 dark:focus:border-primary-400/70","focus:ring-2 focus:ring-primary-500/20"]},size:{sm:"h-10 px-3 text-sm rounded-lg",default:"h-12 px-4 text-base rounded-xl",lg:"h-14 px-5 text-lg rounded-xl"},state:{default:"",error:"border-error-500 focus:border-error-500 focus:ring-error-500/20",success:"border-success-500 focus:border-success-500 focus:ring-success-500/20",warning:"border-warning-500 focus:border-warning-500 focus:ring-warning-500/20"}},defaultVariants:{variant:"default",size:"default",state:"default"}}),Po=I.forwardRef(({className:e,variant:t,size:r,state:n,label:a,helperText:i,errorMessage:o,successMessage:s,leftIcon:c,rightIcon:u,loading:d=!1,showPasswordToggle:f=!1,floatingLabel:m=!1,type:h,disabled:p,value:v,defaultValue:g,...x},w)=>{const[b,j]=y.useState(!1),[k,S]=y.useState(!1),[N,C]=y.useState(v||g||""),T=y.useRef(null),$=y.useCallback(te=>{T.current=te,typeof w=="function"?w(te):w&&(w.current=te)},[w]),O=o?"error":s?"success":n,E=!!N||b,F=f?k?"text":"password":h;y.useEffect(()=>{v!==void 0&&C(v)},[v]);const Z=te=>{j(!0),x.onFocus?.(te)},Y=te=>{j(!1),x.onBlur?.(te)},B=te=>{C(te.target.value),x.onChange?.(te)},q=()=>{T.current?.focus()};return l.jsxs("div",{className:"w-full",children:[l.jsxs("div",{className:"relative",children:[a&&!m&&l.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-2",children:a}),l.jsxs("div",{className:"relative",children:[c&&l.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-neutral-500 dark:text-neutral-400 pointer-events-none z-10",children:c}),a&&m&&l.jsx(P.label,{onClick:q,animate:{scale:E?.85:1,y:E?-24:0,x:E?4:c?36:16},transition:{duration:.2,ease:[.4,0,.2,1]},className:ce("absolute left-0 top-1/2 -translate-y-1/2 text-neutral-500 dark:text-neutral-400 pointer-events-none z-10 origin-left",E&&"text-primary-600 dark:text-primary-400","cursor-text"),children:a}),l.jsx("input",{ref:$,type:F,value:N,disabled:p||d,className:ce(kN({variant:t,size:r,state:O}),c&&"pl-10",(u||f||d)&&"pr-10",m&&E&&"pt-6 pb-2",(!r||r==="default")&&"py-[12px]","placeholder-[#777]",e),style:{...x.style},onFocus:Z,onBlur:Y,onChange:B,...x}),l.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex items-center space-x-1",children:[d&&l.jsx(P.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-4 h-4 text-neutral-500",children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"none",className:"w-full h-full",children:l.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeDasharray:"8",strokeDashoffset:"8"})})}),!d&&O==="error"&&l.jsx(Tt,{className:"w-4 h-4 text-error-500"}),!d&&O==="success"&&l.jsx(dr,{className:"w-4 h-4 text-success-500"}),f&&!d&&l.jsx("button",{type:"button",onClick:()=>S(!k),className:"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-200 transition-colors",tabIndex:-1,children:k?l.jsx(Ux,{className:"w-4 h-4"}):l.jsx(Gs,{className:"w-4 h-4"})}),u&&!d&&l.jsx("div",{className:"text-neutral-500 dark:text-neutral-400",children:u})]})]}),l.jsx(se,{children:b&&l.jsx(P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.15},className:ce("absolute inset-0 rounded-xl pointer-events-none",O==="error"&&"ring-2 ring-error-500/20",O==="success"&&"ring-2 ring-success-500/20",O==="default"&&"ring-2 ring-primary-500/20")})})]}),l.jsx(se,{mode:"wait",children:(i||o||s)&&l.jsxs(P.div,{initial:{opacity:0,y:-8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.2},className:"mt-2 text-sm flex items-center space-x-1",children:[o&&l.jsxs(l.Fragment,{children:[l.jsx(Tt,{className:"w-4 h-4 text-error-500 flex-shrink-0"}),l.jsx("span",{className:"text-error-600 dark:text-error-400",children:o})]}),s&&!o&&l.jsxs(l.Fragment,{children:[l.jsx(dr,{className:"w-4 h-4 text-success-500 flex-shrink-0"}),l.jsx("span",{className:"text-success-600 dark:text-success-400",children:s})]}),i&&!o&&!s&&l.jsx("span",{className:"text-neutral-600 dark:text-neutral-400",children:i})]})})]})});Po.displayName="Input";const SN={default:on,ai:Ql,camera:tr,upload:Th,download:qx,sync:Eh,search:Hx,save:Wx,delete:Oh,chat:Fa},NN={sm:{icon:"w-4 h-4",text:"text-sm",gap:"gap-2"},md:{icon:"w-5 h-5",text:"text-base",gap:"gap-3"},lg:{icon:"w-6 h-6",text:"text-lg",gap:"gap-4"}},PN=({message:e,type:t="default",size:r="md",className:n=""})=>{const a=SN[t],i=NN[r];return l.jsxs("div",{className:`flex items-center justify-center ${i.gap} ${n}`,children:[l.jsx(P.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"flex-shrink-0",children:l.jsx(a,{className:`${i.icon} text-primary-500`})}),l.jsx("span",{className:`${i.text} text-gray-600 dark:text-gray-400 font-medium`,children:e})]})},EN={LoadingPlants:e=>l.jsx(PN,{message:"Cargando tu jardín...",type:"default",...e})},ll=({children:e,content:t,position:r="top",delay:n=300,disabled:a=!1,className:i=""})=>{const[o,s]=y.useState(!1),[c,u]=y.useState({x:0,y:0}),d=y.useRef(null),f=y.useRef(),m=()=>{a||(f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{if(d.current){const g=d.current.getBoundingClientRect(),x=window.pageYOffset||document.documentElement.scrollTop,w=window.pageXOffset||document.documentElement.scrollLeft;let b,j;switch(r){case"top":b=g.left+w+g.width/2,j=g.top+x-8;break;case"bottom":b=g.left+w+g.width/2,j=g.bottom+x+8;break;case"left":b=g.left+w-8,j=g.top+x+g.height/2;break;case"right":b=g.right+w+8,j=g.top+x+g.height/2;break;default:b=g.left+w+g.width/2,j=g.top+x-8}u({x:b,y:j}),s(!0)}},n))},h=()=>{f.current&&clearTimeout(f.current),s(!1)};y.useEffect(()=>()=>{f.current&&clearTimeout(f.current)},[]);const p=()=>{const g="absolute z-[9999] px-2 py-1 text-xs font-medium text-white bg-gray-900 dark:bg-gray-700 rounded-md shadow-lg pointer-events-none max-w-xs";switch(r){case"top":return`${g} -translate-x-1/2 -translate-y-full`;case"bottom":return`${g} -translate-x-1/2`;case"left":return`${g} -translate-x-full -translate-y-1/2`;case"right":return`${g} -translate-y-1/2`;default:return`${g} -translate-x-1/2 -translate-y-full`}},v=()=>{const g="absolute w-2 h-2 bg-gray-900 dark:bg-gray-700 transform rotate-45";switch(r){case"top":return`${g} left-1/2 -translate-x-1/2 top-full -translate-y-1/2`;case"bottom":return`${g} left-1/2 -translate-x-1/2 -top-1`;case"left":return`${g} top-1/2 -translate-y-1/2 left-full -translate-x-1/2`;case"right":return`${g} top-1/2 -translate-y-1/2 -left-1`;default:return`${g} left-1/2 -translate-x-1/2 top-full -translate-y-1/2`}};return l.jsxs(l.Fragment,{children:[l.jsx("div",{ref:d,onMouseEnter:m,onMouseLeave:h,onFocus:m,onBlur:h,className:`inline-block ${i}`,children:e}),typeof document<"u"&&Vl.createPortal(l.jsx(se,{children:o&&l.jsxs(P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.15},className:p(),style:{left:c.x,top:c.y},children:[t,l.jsx("div",{className:v()})]})}),document.body)]})},_N={network:{icon:Ah,color:"text-orange-500",bgColor:"bg-orange-50 dark:bg-orange-900/20",borderColor:"border-orange-200 dark:border-orange-800",defaultActions:[{label:"Reintentar",action:"retry"},{label:"Verificar conexión",action:"help"}]},validation:{icon:qt,color:"text-amber-500",bgColor:"bg-amber-50 dark:bg-amber-900/20",borderColor:"border-amber-200 dark:border-amber-800",defaultActions:[{label:"Corregir",action:"retry"}]},server:{icon:qt,color:"text-red-500",bgColor:"bg-red-50 dark:bg-red-900/20",borderColor:"border-red-200 dark:border-red-800",defaultActions:[{label:"Reintentar",action:"retry"},{label:"Reportar problema",action:"help"}]},unknown:{icon:Zx,color:"text-gray-500",bgColor:"bg-gray-50 dark:bg-gray-900/20",borderColor:"border-gray-200 dark:border-gray-800",defaultActions:[{label:"Reintentar",action:"retry"}]}},AN=({title:e,message:t,type:r="unknown",onRetry:n,onDismiss:a,actions:i,className:o=""})=>{const s=_N[r],c=s.icon,u=f=>{switch(f){case"retry":n?.();break;case"help":console.log("Help requested for error type:",r);break}},d=()=>i?i.map((f,m)=>l.jsx(G,{variant:f.variant||"outline",size:"sm",onClick:f.onClick,children:f.label},m)):s.defaultActions.map((f,m)=>l.jsxs(G,{variant:m===0?"primary":"outline",size:"sm",onClick:()=>u(f.action),disabled:f.action==="retry"&&!n,children:[f.action==="retry"&&l.jsx(Lr,{className:"w-4 h-4 mr-1"}),f.action==="help"&&l.jsx(Kx,{className:"w-4 h-4 mr-1"}),f.label]},m));return l.jsx(P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:`
        ${s.bgColor} 
        ${s.borderColor} 
        border rounded-lg p-4 
        ${o}
      `,children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:`${s.color} flex-shrink-0 mt-0.5`,children:l.jsx(c,{className:"w-5 h-5"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-1",children:e}),l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:t}),l.jsx("div",{className:"flex flex-wrap gap-2",children:d()})]}),a&&l.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors p-1 flex-shrink-0","aria-label":"Cerrar error",children:l.jsx(br,{className:"w-4 h-4"})})]})})},CN={LoadingPlantsError:e=>l.jsx(AN,{type:"server",title:"Error al Cargar Plantas",message:"No se pudieron cargar tus plantas. Intenta refrescar la página.",...e})},ON=({isOpen:e,onComplete:t,onSkip:r,steps:n})=>{const[a,i]=y.useState(0),[o,s]=y.useState(null),[c,u]=y.useState({x:0,y:0}),d=n[a],f=a===n.length-1,m=a===0;y.useEffect(()=>{if(!e||!d?.target)return;const g=document.querySelector(d.target);if(g){s(g);const x=g.getBoundingClientRect(),w=window.pageYOffset||document.documentElement.scrollTop,b=window.pageXOffset||document.documentElement.scrollLeft;let j,k;switch(d.position){case"top":j=x.left+b+x.width/2,k=x.top+w-20;break;case"bottom":j=x.left+b+x.width/2,k=x.bottom+w+20;break;case"left":j=x.left+b-20,k=x.top+w+x.height/2;break;case"right":j=x.right+b+20,k=x.top+w+x.height/2;break;default:j=window.innerWidth/2,k=window.innerHeight/2}u({x:j,y:k}),g.scrollIntoView({behavior:"smooth",block:"center"})}else s(null),u({x:window.innerWidth/2,y:window.innerHeight/2})},[e,d,a]);const h=()=>{f?t():i(g=>g+1)},p=()=>{m||i(g=>g-1)},v=()=>{if(!d?.position||d.position==="center")return"-translate-x-1/2 -translate-y-1/2";switch(d.position){case"top":return"-translate-x-1/2 -translate-y-full";case"bottom":return"-translate-x-1/2";case"left":return"-translate-x-full -translate-y-1/2";case"right":return"-translate-y-1/2";default:return"-translate-x-1/2 -translate-y-1/2"}};return e?l.jsx(se,{children:l.jsxs("div",{className:"fixed inset-0 z-[9999]",children:[l.jsx("div",{className:"absolute inset-0 bg-black/60"}),o&&l.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute pointer-events-none",style:{left:o.getBoundingClientRect().left+window.pageXOffset,top:o.getBoundingClientRect().top+window.pageYOffset,width:o.getBoundingClientRect().width,height:o.getBoundingClientRect().height,boxShadow:"0 0 0 9999px rgba(0, 0, 0, 0.6), 0 0 20px rgba(34, 197, 94, 0.5)",borderRadius:"8px"}}),l.jsxs(P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:`absolute bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 max-w-sm ${v()}`,style:{left:c.x,top:c.y},children:[l.jsxs("div",{className:"flex items-start justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Ve,{className:"w-5 h-5 text-green-500"}),l.jsxs("span",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:["Paso ",a+1," de ",n.length]})]}),l.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors","aria-label":"Omitir tour",children:l.jsx(br,{className:"w-4 h-4"})})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:d.title}),l.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm leading-relaxed",children:d.description})]}),d.action&&l.jsx("div",{className:"mb-4",children:l.jsx(G,{variant:"outline",size:"sm",onClick:d.action.onClick,className:"w-full",children:d.action.label})}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs(G,{variant:"ghost",size:"sm",onClick:p,disabled:m,className:"flex items-center gap-1",children:[l.jsx(Ih,{className:"w-4 h-4"}),"Anterior"]}),l.jsx("div",{className:"flex gap-1",children:n.map((g,x)=>l.jsx("div",{className:`w-2 h-2 rounded-full transition-colors ${x===a?"bg-green-500":x<a?"bg-green-300":"bg-gray-300"}`},x))}),l.jsxs(G,{size:"sm",onClick:h,className:"flex items-center gap-1",children:[f?"Finalizar":"Siguiente",!f&&l.jsx(Dh,{className:"w-4 h-4"})]})]}),l.jsx("div",{className:"mt-4 text-center",children:l.jsx("button",{onClick:r,className:"text-xs text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 transition-colors",children:"Omitir tour"})})]})]})}):null},ui="1.0.0",Kd="plantitas-onboarding-state",TN=()=>{const e=it(),[t,r]=y.useState(()=>{try{const d=localStorage.getItem(Kd);if(d){const f=JSON.parse(d);return f.currentVersion!==ui?{hasCompletedTour:!1,hasAddedFirstPlant:!1,hasUsedChat:!1,currentVersion:ui}:f}}catch(d){console.warn("Error loading onboarding state:",d)}return{hasCompletedTour:!1,hasAddedFirstPlant:!1,hasUsedChat:!1,currentVersion:ui}});y.useEffect(()=>{try{localStorage.setItem(Kd,JSON.stringify(t))}catch(d){console.warn("Error saving onboarding state:",d)}},[t]);const n=d=>{r(f=>({...f,...d}))};return{state:t,shouldShowTour:()=>!t.hasCompletedTour,completeTour:()=>{n({hasCompletedTour:!0})},markFirstPlantAdded:()=>{n({hasAddedFirstPlant:!0})},markChatUsed:()=>{n({hasUsedChat:!0})},resetOnboarding:()=>{r({hasCompletedTour:!1,hasAddedFirstPlant:!1,hasUsedChat:!1,currentVersion:ui})},getTourSteps:()=>[{id:"welcome",title:"¡Bienvenido a Plantitas! 🌱",description:"Tu asistente personal para el cuidado de plantas. Te ayudaremos a mantener tus plantas saludables y felices.",position:"center"},{id:"add-plant",title:"Agrega tu primera planta",description:"Usa el botón flotante para tomar una foto de tu planta. Nuestra IA la identificará automáticamente.",target:'[data-tour="add-plant-fab"]',position:"left",action:{label:"Ir a cámara",onClick:()=>e(ze.toCamera())}},{id:"navigation",title:"Navegación principal",description:"Usa la navegación inferior para moverte entre el jardín, chat IA y configuraciones.",target:'[data-tour="bottom-navigation"]',position:"top"},{id:"chat-ai",title:"Chat con IA experta",description:"Haz preguntas sobre cuidado de plantas, identificación o cualquier duda que tengas.",target:'[data-tour="chat-tab"]',position:"top",action:{label:"Probar chat",onClick:()=>e(ze.toGardenChat())}},{id:"search-filter",title:"Busca y organiza",description:"Usa la búsqueda y filtros para encontrar rápidamente tus plantas cuando tengas muchas.",target:'[data-tour="search-input"]',position:"bottom"},{id:"complete",title:"¡Listo para empezar! 🎉",description:"Ya conoces lo básico. ¡Comienza agregando tu primera planta y explorando todas las funciones!",position:"center"}]}},Gd=({type:e,title:t,message:r,onDismiss:n,autoHide:a=!1,duration:i=8e3,actions:o})=>{const[s,c]=y.useState(!0),u=it();y.useEffect(()=>{if(a&&i>0){const p=setTimeout(()=>{c(!1),n?.()},i);return()=>clearTimeout(p)}},[a,i,n]);const d=()=>{c(!1),n?.()};if(!s)return null;const m={suggestion:{bg:"bg-purple-50 dark:bg-purple-900/20",border:"border-purple-200 dark:border-purple-800",accent:"text-purple-600 dark:text-purple-400",icon:Ql},tip:{bg:"bg-blue-50 dark:bg-blue-900/20",border:"border-blue-200 dark:border-blue-800",accent:"text-blue-600 dark:text-blue-400",icon:Ve},welcome:{bg:"bg-green-50 dark:bg-green-900/20",border:"border-green-200 dark:border-green-800",accent:"text-green-600 dark:text-green-400",icon:Fa}}[e],h=m.icon;return l.jsx(se,{children:l.jsxs(P.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},transition:{duration:.3,ease:"easeOut"},className:`
          ${m.bg} ${m.border}
          border rounded-lg p-4 shadow-md backdrop-blur-sm
          relative overflow-hidden
        `,children:[l.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 opacity-10",children:l.jsx(h,{className:"w-full h-full"})}),l.jsxs("div",{className:"relative flex items-start gap-3",children:[l.jsx("div",{className:`${m.accent} flex-shrink-0 mt-0.5`,children:l.jsx(h,{className:"w-5 h-5"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h3",{className:`${m.accent} text-sm font-semibold mb-1`,children:t}),l.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm leading-relaxed mb-3",children:r}),l.jsx("div",{className:"flex flex-wrap gap-2",children:o?o.map((p,v)=>l.jsx(G,{size:"sm",variant:p.variant||"outline",onClick:p.onClick,className:"text-xs",children:p.label},v)):l.jsxs(G,{size:"sm",variant:"outline",onClick:()=>u(ze.toGardenChat()),className:"text-xs flex items-center gap-1",children:["Probar Chat IA",l.jsx(Gx,{className:"w-3 h-3"})]})})]}),n&&l.jsx("button",{onClick:d,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors p-1 flex-shrink-0","aria-label":"Cerrar sugerencia",children:l.jsx(br,{className:"w-4 h-4"})})]}),a&&i>0&&l.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-black/10 dark:bg-white/10",children:l.jsx(P.div,{initial:{width:"100%"},animate:{width:"0%"},transition:{duration:i/1e3,ease:"linear"},className:`h-full ${m.accent.replace("text-","bg-")}`})})]})})},IN=()=>{const[e,t]=y.useState(()=>{try{const i=localStorage.getItem("dismissed-ai-highlights");return i?JSON.parse(i):[]}catch{return[]}});return{dismissHighlight:i=>{const o=[...e,i];t(o);try{localStorage.setItem("dismissed-ai-highlights",JSON.stringify(o))}catch(s){console.warn("Error saving dismissed highlights:",s)}},shouldShowHighlight:i=>!e.includes(i),resetHighlights:()=>{t([]);try{localStorage.removeItem("dismissed-ai-highlights")}catch(i){console.warn("Error resetting highlights:",i)}}}},DN=()=>{const e=it();return l.jsxs(P.div,{className:"flex flex-col items-center justify-center text-center py-16 px-6 max-w-lg mx-auto",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5,ease:"easeOut"},children:[l.jsxs(P.div,{className:"relative w-32 h-32 mb-8",initial:{rotate:-15},animate:{rotate:[15,-10,10,-5,5,0]},transition:{duration:1,ease:"easeInOut"},children:[l.jsx(Mh,{className:"absolute top-2 left-2 w-10 h-10 text-sky-400 opacity-60"}),l.jsx(La,{className:"w-32 h-32 text-green-500"}),l.jsx(po,{className:"absolute bottom-2 right-2 w-12 h-12 text-blue-400 opacity-70"})]}),l.jsx("h2",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100 mb-3",children:"¡Comienza tu jardín digital!"}),l.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6 text-lg leading-relaxed",children:"Añade tu primera planta tomando una foto y deja que nuestra IA la identifique y te ayude a cuidarla."}),l.jsxs("div",{className:"mb-8 space-y-3 text-left",children:[l.jsxs("div",{className:"flex items-center gap-3 text-gray-600 dark:text-gray-400",children:[l.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full flex-shrink-0"}),l.jsx("span",{children:"Identificación automática con IA"})]}),l.jsxs("div",{className:"flex items-center gap-3 text-gray-600 dark:text-gray-400",children:[l.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full flex-shrink-0"}),l.jsx("span",{children:"Recordatorios de riego personalizados"})]}),l.jsxs("div",{className:"flex items-center gap-3 text-gray-600 dark:text-gray-400",children:[l.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full flex-shrink-0"}),l.jsx("span",{children:"Chat con asistente experto en plantas"})]})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full",children:[l.jsxs(G,{size:"lg",onClick:()=>e(ze.toCamera()),className:"flex-1",children:[l.jsx(ec,{className:"mr-2"}),"Tomar Foto"]}),l.jsx(ll,{content:"Explora las funciones de chat IA para aprender sobre plantas",children:l.jsxs(G,{size:"lg",variant:"outline",onClick:()=>e(ze.toGardenChat()),className:"flex-1",children:[l.jsx(Fa,{className:"mr-2"}),"Explorar Chat IA"]})})]}),l.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-6",children:"💡 Tip: Toma fotos con buena iluminación para mejores resultados"})]})},MN=()=>{const{data:e=[],isLoading:t,error:r}=vN(),[n,a]=y.useState(""),[i,o]=y.useState("name"),{shouldShowTour:s,completeTour:c,getTourSteps:u}=TN(),{shouldShowHighlight:d,dismissHighlight:f}=IN(),m=y.useMemo(()=>[...e].filter(h=>h.name.toLowerCase().includes(n.toLowerCase())||h.species.toLowerCase().includes(n.toLowerCase())).sort((h,p)=>{switch(i){case"health":return(p.healthScore||0)-(h.healthScore||0);case"lastWatered":return(p.lastWatered?.getTime()||0)-(h.lastWatered?.getTime()||0);default:return h.name.localeCompare(p.name)}}),[e,n,i]);return t?l.jsxs("div",{className:"p-4 sm:p-6 space-y-6",children:[l.jsxs("header",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:"Mi Jardín"}),l.jsx(EN.LoadingPlants,{size:"sm"})]}),l.jsx(V,{className:"h-10 w-10 rounded-full"})]}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:Array.from({length:8}).map((h,p)=>l.jsx(wN,{},p))})]}):r?l.jsx("div",{className:"flex justify-center items-center min-h-[50vh] p-4",children:l.jsx(CN.LoadingPlantsError,{onRetry:()=>window.location.reload(),className:"max-w-md"})}):l.jsxs("div",{className:"container-spacing element-spacing bg-gradient-to-br from-green-50/30 via-white to-emerald-50/20 min-h-screen",style:{paddingBottom:"calc(88px + env(safe-area-inset-bottom))"},children:[l.jsx("header",{className:"flex items-center justify-between border-b border-green-100/50 bg-white/70 backdrop-blur-sm pb-4 mb-6 rounded-xl px-4 py-3 shadow-sm shadow-green-100/20",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(ll,{content:"Tu jardín personal de plantas",children:l.jsx(La,{size:20,strokeWidth:2,className:"text-[#2A7F3E] flex-shrink-0"})}),l.jsx("h1",{className:"font-semibold text-[28px] leading-[1.2] text-[#222]",children:"Mi Jardín"}),l.jsx(ll,{content:`Tienes ${e.length} ${e.length===1?"planta registrada":"plantas registradas"} en tu jardín`,children:l.jsxs("span",{className:"ml-2 bg-[#E0F2E9]/50 text-[#2A7F3E] text-sm font-medium rounded-full px-[6px] py-[2px] cursor-help",children:[e.length," ",e.length===1?"planta":"plantas"]})})]})}),e.length>0&&d("dashboard-ai-welcome")&&l.jsx("div",{className:"mb-4",children:l.jsx(Gd,{type:"welcome",title:"¡Tu asistente IA está disponible!",message:"Haz preguntas sobre el cuidado de tus plantas, identifica problemas o descubre nuevos consejos.",onDismiss:()=>f("dashboard-ai-welcome"),autoHide:!0,duration:1e4})}),e.length>=3&&d("dashboard-ai-tips")&&l.jsx("div",{className:"mb-4",children:l.jsx(Gd,{type:"tip",title:"Consejo del jardinero experto",message:"Con varias plantas, puedes preguntarme sobre rutinas de cuidado personalizadas para optimizar tu tiempo.",onDismiss:()=>f("dashboard-ai-tips"),autoHide:!0,duration:12e3})}),l.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-3 mt-6 mb-6",children:[l.jsx(Po,{type:"text",placeholder:"Buscar por nombre o especie...",value:n,onChange:h=>a(h.target.value),className:"max-w-md w-full mx-auto","data-tour":"search-input"}),l.jsxs("div",{className:"relative w-full max-w-xs",children:[l.jsxs("select",{value:i,onChange:h=>o(h.target.value),className:"appearance-none bg-white border border-green-300 rounded-[8px] px-4 py-2 h-10 text-green-700 font-medium shadow-sm focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-colors duration-150 w-full pr-8",style:{borderWidth:"1px"},children:[l.jsx("option",{value:"name",children:"Ordenar por Nombre"}),l.jsx("option",{value:"health",children:"Ordenar por Salud"}),l.jsx("option",{value:"lastWatered",children:"Ordenar por Riego"})]}),l.jsx("span",{className:"pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 text-green-400 text-base",children:"▼"})]})]}),l.jsx(se,{children:m.length>0?l.jsx(P.div,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 element-spacing",initial:"hidden",animate:"visible",variants:{visible:{transition:{staggerChildren:.01,delayChildren:0}}},children:m.map((h,p)=>l.jsx(Lp,{plant:h,index:Math.min(p,8)},h.id))}):l.jsx(DN,{})}),l.jsx(ON,{isOpen:s()&&e.length===0,onComplete:c,onSkip:c,steps:u()})]})};function cl(e){"@babel/helpers - typeof";return cl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cl(e)}function dt(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function $e(e){dt(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||cl(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}var $N={};function zN(){return $N}function Di(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function Vd(e){dt(1,arguments);var t=$e(e);return t.setHours(0,0,0,0),t}var RN=864e5;function LN(e,t){dt(2,arguments);var r=Vd(e),n=Vd(t),a=r.getTime()-Di(r),i=n.getTime()-Di(n);return Math.round((a-i)/RN)}function Pi(e,t){dt(2,arguments);var r=$e(e),n=$e(t),a=r.getTime()-n.getTime();return a<0?-1:a>0?1:a}function FN(e,t){dt(2,arguments);var r=$e(e),n=$e(t),a=r.getFullYear()-n.getFullYear(),i=r.getMonth()-n.getMonth();return a*12+i}function Yd(e,t){var r=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return r<0?-1:r>0?1:r}function BN(e,t){dt(2,arguments);var r=$e(e),n=$e(t),a=Yd(r,n),i=Math.abs(LN(r,n));r.setDate(r.getDate()-a*i);var o=+(Yd(r,n)===-a),s=a*(i-o);return s===0?0:s}function UN(e,t){return dt(2,arguments),$e(e).getTime()-$e(t).getTime()}var WN={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(t){return t<0?Math.ceil(t):Math.floor(t)}},HN="trunc";function qN(e){return WN[HN]}function ZN(e){dt(1,arguments);var t=$e(e);return t.setHours(23,59,59,999),t}function KN(e){dt(1,arguments);var t=$e(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function GN(e){dt(1,arguments);var t=$e(e);return ZN(t).getTime()===KN(t).getTime()}function VN(e,t){dt(2,arguments);var r=$e(e),n=$e(t),a=Pi(r,n),i=Math.abs(FN(r,n)),o;if(i<1)o=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-a*i);var s=Pi(r,n)===-a;GN($e(e))&&i===1&&Pi(e,n)===1&&(s=!1),o=a*(i-Number(s))}return o===0?0:o}function YN(e,t,r){dt(2,arguments);var n=UN(e,t)/1e3;return qN()(n)}var XN={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},QN=function(t,r,n){var a,i=XN[t];return typeof i=="string"?a=i:r===1?a=i.one:a=i.other.replace("{{count}}",r.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+a:a+" ago":a};function $n(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.width?String(t.width):e.defaultWidth,n=e.formats[r]||e.formats[e.defaultWidth];return n}}var JN={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},eP={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},tP={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},rP={date:$n({formats:JN,defaultWidth:"full"}),time:$n({formats:eP,defaultWidth:"full"}),dateTime:$n({formats:tP,defaultWidth:"full"})},nP={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},aP=function(t,r,n,a){return nP[t]};function Vt(e){return function(t,r){var n=r!=null&&r.context?String(r.context):"standalone",a;if(n==="formatting"&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,o=r!=null&&r.width?String(r.width):i;a=e.formattingValues[o]||e.formattingValues[i]}else{var s=e.defaultWidth,c=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[c]||e.values[s]}var u=e.argumentCallback?e.argumentCallback(t):t;return a[u]}}var iP={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},oP={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},sP={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},lP={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},cP={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},uP={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},dP=function(t,r){var n=Number(t),a=n%100;if(a>20||a<10)switch(a%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},fP={ordinalNumber:dP,era:Vt({values:iP,defaultWidth:"wide"}),quarter:Vt({values:oP,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:Vt({values:sP,defaultWidth:"wide"}),day:Vt({values:lP,defaultWidth:"wide"}),dayPeriod:Vt({values:cP,defaultWidth:"wide",formattingValues:uP,defaultFormattingWidth:"wide"})};function Yt(e){return function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=r.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;var o=i[0],s=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(s)?hP(s,function(f){return f.test(o)}):mP(s,function(f){return f.test(o)}),u;u=e.valueCallback?e.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;var d=t.slice(o.length);return{value:u,rest:d}}}function mP(e,t){for(var r in e)if(e.hasOwnProperty(r)&&t(e[r]))return r}function hP(e,t){for(var r=0;r<e.length;r++)if(t(e[r]))return r}function Fp(e){return function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.match(e.matchPattern);if(!n)return null;var a=n[0],i=t.match(e.parsePattern);if(!i)return null;var o=e.valueCallback?e.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;var s=t.slice(a.length);return{value:o,rest:s}}}var pP=/^(\d+)(th|st|nd|rd)?/i,gP=/\d+/i,vP={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},yP={any:[/^b/i,/^(a|c)/i]},xP={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},bP={any:[/1/i,/2/i,/3/i,/4/i]},wP={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},jP={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},kP={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},SP={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},NP={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},PP={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},EP={ordinalNumber:Fp({matchPattern:pP,parsePattern:gP,valueCallback:function(t){return parseInt(t,10)}}),era:Yt({matchPatterns:vP,defaultMatchWidth:"wide",parsePatterns:yP,defaultParseWidth:"any"}),quarter:Yt({matchPatterns:xP,defaultMatchWidth:"wide",parsePatterns:bP,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:Yt({matchPatterns:wP,defaultMatchWidth:"wide",parsePatterns:jP,defaultParseWidth:"any"}),day:Yt({matchPatterns:kP,defaultMatchWidth:"wide",parsePatterns:SP,defaultParseWidth:"any"}),dayPeriod:Yt({matchPatterns:NP,defaultMatchWidth:"any",parsePatterns:PP,defaultParseWidth:"any"})},_P={code:"en-US",formatDistance:QN,formatLong:rP,formatRelative:aP,localize:fP,match:EP,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Bp(e,t){if(e==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}function AP(e){return Bp({},e)}var Xd=1440,CP=2520,Ss=43200,OP=86400;function TP(e,t,r){var n,a;dt(2,arguments);var i=zN(),o=(n=(a=r?.locale)!==null&&a!==void 0?a:i.locale)!==null&&n!==void 0?n:_P;if(!o.formatDistance)throw new RangeError("locale must contain formatDistance property");var s=Pi(e,t);if(isNaN(s))throw new RangeError("Invalid time value");var c=Bp(AP(r),{addSuffix:!!r?.addSuffix,comparison:s}),u,d;s>0?(u=$e(t),d=$e(e)):(u=$e(e),d=$e(t));var f=YN(d,u),m=(Di(d)-Di(u))/1e3,h=Math.round((f-m)/60),p;if(h<2)return r!=null&&r.includeSeconds?f<5?o.formatDistance("lessThanXSeconds",5,c):f<10?o.formatDistance("lessThanXSeconds",10,c):f<20?o.formatDistance("lessThanXSeconds",20,c):f<40?o.formatDistance("halfAMinute",0,c):f<60?o.formatDistance("lessThanXMinutes",1,c):o.formatDistance("xMinutes",1,c):h===0?o.formatDistance("lessThanXMinutes",1,c):o.formatDistance("xMinutes",h,c);if(h<45)return o.formatDistance("xMinutes",h,c);if(h<90)return o.formatDistance("aboutXHours",1,c);if(h<Xd){var v=Math.round(h/60);return o.formatDistance("aboutXHours",v,c)}else{if(h<CP)return o.formatDistance("xDays",1,c);if(h<Ss){var g=Math.round(h/Xd);return o.formatDistance("xDays",g,c)}else if(h<OP)return p=Math.round(h/Ss),o.formatDistance("aboutXMonths",p,c)}if(p=VN(d,u),p<12){var x=Math.round(h/Ss);return o.formatDistance("xMonths",x,c)}else{var w=p%12,b=Math.floor(p/12);return w<3?o.formatDistance("aboutXYears",b,c):w<9?o.formatDistance("overXYears",b,c):o.formatDistance("almostXYears",b+1,c)}}function Up(e,t){return dt(1,arguments),TP(e,Date.now(),t)}function IP(e,t){let r;try{r=e()}catch{return}return{getItem:a=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),s=(i=r.getItem(a))!=null?i:null;return s instanceof Promise?s.then(o):o(s)},setItem:(a,i)=>r.setItem(a,JSON.stringify(i,void 0)),removeItem:a=>r.removeItem(a)}}const ul=e=>t=>{try{const r=e(t);return r instanceof Promise?r:{then(n){return ul(n)(r)},catch(n){return this}}}catch(r){return{then(n){return this},catch(n){return ul(n)(r)}}}},DP=(e,t)=>(r,n,a)=>{let i={storage:IP(()=>localStorage),partialize:v=>v,version:0,merge:(v,g)=>({...g,...v}),...t},o=!1;const s=new Set,c=new Set;let u=i.storage;if(!u)return e((...v)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),r(...v)},n,a);const d=()=>{const v=i.partialize({...n()});return u.setItem(i.name,{state:v,version:i.version})},f=a.setState;a.setState=(v,g)=>{f(v,g),d()};const m=e((...v)=>{r(...v),d()},n,a);a.getInitialState=()=>m;let h;const p=()=>{var v,g;if(!u)return;o=!1,s.forEach(w=>{var b;return w((b=n())!=null?b:m)});const x=((g=i.onRehydrateStorage)==null?void 0:g.call(i,(v=n())!=null?v:m))||void 0;return ul(u.getItem.bind(u))(i.name).then(w=>{if(w)if(typeof w.version=="number"&&w.version!==i.version){if(i.migrate){const b=i.migrate(w.state,w.version);return b instanceof Promise?b.then(j=>[!0,j]):[!0,b]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,w.state];return[!1,void 0]}).then(w=>{var b;const[j,k]=w;if(h=i.merge(k,(b=n())!=null?b:m),r(h,!0),j)return d()}).then(()=>{x?.(h,void 0),h=n(),o=!0,c.forEach(w=>w(h))}).catch(w=>{x?.(void 0,w)})};return a.persist={setOptions:v=>{i={...i,...v},v.storage&&(u=v.storage)},clearStorage:()=>{u?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:v=>(s.add(v),()=>{s.delete(v)}),onFinishHydration:v=>(c.add(v),()=>{c.delete(v)})},i.skipHydration||p(),h||m},MP=DP,pR=ac()(MP((e,t)=>({isDark:typeof window<"u"?window.matchMedia("(prefers-color-scheme: dark)").matches:!1,toggleTheme:()=>{const{isDark:r}=t(),n=!r;e({isDark:n}),Ns(n),"vibrate"in navigator&&navigator.vibrate(50)},setTheme:r=>{e({isDark:r}),Ns(r)}}),{name:"theme-storage",onRehydrateStorage:()=>e=>{e&&Ns(e.isDark)}})),Ns=e=>{if(typeof window>"u")return;const t=e?"dark":"light";document.documentElement.setAttribute("data-theme",t),e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},$P=async e=>{const{data:t,error:r}=await pe.from("plants").select(`
      *,
      plant_images(*)
    `).eq("id",e).single();if(r)throw console.error(`Error fetching plant ${e}:`,r),r.code==="PGRST116"?new Error("Planta no encontrada."):new Error("Error al cargar la información de la planta.");const n=t;return{id:n.id,name:n.name,species:n.species,description:n.description??void 0,funFacts:n.fun_facts??void 0,variety:n.variety??void 0,nickname:n.nickname??void 0,location:n.location,plantEnvironment:n.plant_environment,lightRequirements:n.light_requirements,dateAdded:new Date(n.date_added),lastWatered:n.last_watered?new Date(n.last_watered):void 0,lastFertilized:n.last_fertilized?new Date(n.last_fertilized):void 0,healthScore:n.health_score??0,careProfile:n.care_profile,personality:n.personality,images:n.plant_images.map(a=>({id:a.id,url:a.url??"",timestamp:new Date(a.created_at),isProfileImage:a.is_profile_image??!1,healthAnalysis:a.health_analysis})),chatHistory:[],notifications:[]}},jc=e=>{const{data:t,isLoading:r,error:n}=kh({queryKey:["plant",e],queryFn:async()=>$P(e),enabled:!!e,staleTime:6e5,gcTime:18e5,refetchOnWindowFocus:!1,refetchOnMount:!1,retry:1}),a=mr(s=>s.setPlant),i=mr(s=>s.selectPlant);y.useEffect(()=>(t&&(a(t),i(t.id)),()=>{i(null)}),[t,a,i]);const o=y.useMemo(()=>{if(!t)return[];const s=[];if(!t.images||t.images.length===0)return s;const c=t.images.map(u=>u.healthAnalysis?.confidence||null).filter(u=>u!==null);if(c.length>=3){const u=c.slice(-3);if(u[0]>u[1]&&u[1]>u[2]){const d=u[0]-u[2];s.push({type:"warning",title:"Tendencia de Salud a la Baja",message:`La salud de tu planta ha disminuido un ${d.toFixed(0)}% en las últimas revisiones.`})}}if(t.lastWatered&&t.careProfile){const u=BN(new Date,new Date(t.lastWatered)),d=t.careProfile.wateringFrequency;u>d&&s.push({type:"tip",title:"Consejo de Riego",message:`Han pasado ${u} días desde el último riego. El intervalo recomendado es de ${d} días.`})}return s},[t]);return{plant:t,insights:o,loading:r,error:n?.message||null}},zP=()=>{const e=ho(),r=wr(s=>s.user)?.id,{addToast:n}=Kn(),a=$r({mutationFn:async({plantId:s,imageDataUrl:c,note:u})=>{if(!r)throw new Error("User not authenticated");console.log("🖼️ [Image] Iniciando proceso de subida de imagen..."),console.log("🔬 [Image] Analizando imagen con IA...");const d=await $p(c);console.log("☁️ [Image] Subiendo imagen a Storage...");const f=await Mp(c,"plant-images",`${r}/${s}`);console.log("💾 [Image] Guardando registro en base de datos...");const m=await On.addPlantImage(s,{url:f,timestamp:new Date,isProfileImage:!1,healthAnalysis:d.health},r);return d.health?.confidence&&(console.log("🏥 [Image] Actualizando health score de la planta..."),await On.updatePlantHealthScore(s,r,d.health.confidence,d.health,m.id)),console.log("✅ [Image] Proceso completado exitosamente"),{image:m,analysis:d,note:u}},onSuccess:(s,c)=>{e.invalidateQueries({queryKey:["plants"]}),e.invalidateQueries({queryKey:["plant",c.plantId]});const{setPlant:u}=mr.getState(),d=mr.getState().getPlantById(c.plantId);if(d){const f={...d,images:[...d.images,s.image],healthScore:s.analysis.health?.confidence||d.healthScore};u(f)}n({type:"success",title:"Nueva imagen añadida",message:`Análisis completado. Salud actual: ${s.analysis.health?.confidence?.toFixed(0)||"N/A"}%`})},onError:s=>{console.error("💥 [Image] Error en proceso de subida:",s),n({type:"error",title:"Error al agregar imagen",message:s.message})}}),i=$r({mutationFn:async({plantId:s,imageId:c})=>{if(!r)throw new Error("User not authenticated");return console.log("🖼️ [Profile] Cambiando imagen de perfil..."),await On.setProfileImage(s,c,r),{plantId:s,imageId:c}},onSuccess:s=>{e.invalidateQueries({queryKey:["plants"]}),e.invalidateQueries({queryKey:["plant",s.plantId]}),n({type:"success",title:"Imagen de perfil actualizada",message:"La imagen principal de la planta ha sido cambiada"})},onError:s=>{n({type:"error",title:"Error al cambiar imagen de perfil",message:s.message})}}),o=$r({mutationFn:async({plantId:s,imageId:c})=>{if(!r)throw new Error("User not authenticated");return console.log("🗑️ [Image] Eliminando imagen..."),await On.deleteImage(c,r),{plantId:s,imageId:c}},onSuccess:s=>{e.invalidateQueries({queryKey:["plants"]}),e.invalidateQueries({queryKey:["plant",s.plantId]}),n({type:"success",title:"Imagen eliminada",message:"La imagen ha sido eliminada de tu planta"})},onError:s=>{n({type:"error",title:"Error al eliminar imagen",message:s.message})}});return{addPlantImage:a.mutate,isAddingImage:a.isPending,setProfileImage:i.mutate,isSettingProfileImage:i.isPending,deleteImage:o.mutate,isDeletingImage:o.isPending}};function RP({images:e}){const[t,r]=y.useState(null);if(!e||e.length===0)return l.jsx(Pt,{className:"mt-4",children:l.jsx(gr,{className:"pt-6",children:l.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[l.jsx(tr,{className:"w-12 h-12 text-muted-foreground mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"No hay imágenes para esta planta todavía."}),l.jsx("p",{className:"text-sm text-muted-foreground/70 mt-2",children:"¡Agrega algunas fotos para seguir su progreso!"})]})})});const n=[...e].sort((c,u)=>new Date(u.timestamp).getTime()-new Date(c.timestamp).getTime()),a=c=>{r(c)},i=()=>{r(null)},o=c=>{if(t===null)return;const u=c==="prev"?(t-1+n.length)%n.length:(t+1)%n.length;r(u)},s=c=>(c instanceof Date?c:new Date(c)).toLocaleDateString("es-ES",{day:"numeric",month:"short",year:"numeric"});return l.jsxs("div",{className:"mt-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h2",{className:"text-xl font-bold tracking-tight flex items-center",children:[l.jsx(tr,{className:"w-5 h-5 mr-2 text-primary"}),"Galería de Imágenes"]}),l.jsxs("span",{className:"text-sm text-muted-foreground",children:[n.length," foto",n.length!==1?"s":""]})]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:n.map((c,u)=>l.jsxs(P.div,{className:"aspect-square relative rounded-[8px] overflow-hidden cursor-pointer group w-[80px] h-[80px]",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>a(u),children:[l.jsx(wc,{src:c.url,alt:`Imagen de planta del ${s(c.timestamp)}`,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110 rounded-[8px]"}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:l.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-3",children:l.jsx("div",{className:"flex items-center text-white text-xs gap-2",children:l.jsxs("span",{className:"flex items-center",children:[l.jsx(Ai,{className:"w-3 h-3 mr-1"}),s(c.timestamp)]})})})}),c.isProfileImage&&l.jsx("div",{className:"absolute top-2 right-2 bg-primary text-primary-foreground text-xs px-2 py-1 rounded-full font-medium",children:"Principal"})]},c.id))}),l.jsx(se,{children:t!==null&&l.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-4",onClick:i,children:l.jsxs(P.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:"relative max-w-4xl max-h-full",onClick:c=>c.stopPropagation(),children:[l.jsx("button",{onClick:i,className:"absolute top-4 right-4 z-10 bg-black/50 text-white p-2 rounded-full hover:bg-black/70 transition-colors",children:l.jsx(br,{className:"w-6 h-6"})}),n.length>1&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>o("prev"),className:"absolute left-4 top-1/2 -translate-y-1/2 z-10 bg-black/50 text-white p-2 rounded-full hover:bg-black/70 transition-colors",children:l.jsx(Ih,{className:"w-6 h-6"})}),l.jsx("button",{onClick:()=>o("next"),className:"absolute right-4 top-1/2 -translate-y-1/2 z-10 bg-black/50 text-white p-2 rounded-full hover:bg-black/70 transition-colors",children:l.jsx(Dh,{className:"w-6 h-6"})})]}),l.jsx("img",{src:n[t].url,alt:`Imagen de planta del ${s(n[t].timestamp)}`,className:"max-w-full max-h-full object-contain rounded-lg"}),l.jsxs("div",{className:"absolute bottom-4 left-4 right-4 bg-black/50 text-white p-4 rounded-lg backdrop-blur-sm",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(Ai,{className:"w-4 h-4 mr-2"}),l.jsx("span",{className:"text-sm",children:s(n[t].timestamp)})]}),l.jsxs("span",{className:"text-sm text-white/70",children:[t+1," de ",n.length]})]}),l.jsx("div",{className:"mt-2 text-sm flex items-center gap-2",children:(()=>{const c=n[t].healthAnalysis;if(!c)return l.jsx("span",{className:"italic text-white/60",children:"Sin análisis"});let u="🌱",d="Excelente";switch(c.overallHealth){case"excellent":u="🌱",d="Excelente";break;case"good":u="🌿",d="Buena";break;case"fair":u="🍃",d="Regular";break;case"poor":u="🥀",d="Baja";break;default:u="🌱",d=c.overallHealth}let f;const m={excellent:95,good:80,fair:60,poor:30};return c.overallHealth&&m[c.overallHealth]?f=m[c.overallHealth]:typeof c.confidence=="number"&&(f=c.confidence<=1?c.confidence*100:c.confidence),l.jsxs("span",{children:["Salud: ",l.jsx("span",{className:"font-semibold",children:d})," ",l.jsx("span",{children:u}),f!==void 0&&l.jsxs("span",{className:"ml-2",children:["(",Math.round(f),"%)"]})]})})()}),n[t].isProfileImage&&l.jsx("div",{className:"mt-2",children:l.jsx("span",{className:"bg-primary text-primary-foreground text-xs px-2 py-1 rounded-full",children:"Imagen Principal"})})]})]})})})]})}const LP=new yc,FP=()=>{const[e,t]=y.useState(!1),r=ho(),n=wr(s=>s.user),{addToast:a}=Kn(),i=$r({mutationFn:async({plantId:s,species:c,commonName:u})=>{if(!n)throw new Error("User not authenticated");t(!0),a({type:"info",title:"🤖 Completando información",message:`Consultando IA para ${u||c}...`,duration:3e3});try{const d=await oN(c,u);return await LP.updatePlantInfo(s,n.id,{plantEnvironment:d.plantEnvironment,lightRequirements:d.lightRequirements,description:d.description,funFacts:d.funFacts})}catch(d){throw console.error("❌ [COMPLETAR IA] Error durante el proceso:",d),d}finally{t(!1)}},onSuccess:s=>{console.log("🔄 [COMPLETAR IA] Refrescando datos en cache..."),a({type:"success",title:"✅ ¡Información completada!",message:`Se agregaron datos de ambiente y luz para ${s.name}`,duration:5e3}),r.invalidateQueries({queryKey:["plant",s.id]}),r.invalidateQueries({queryKey:["plants"]}),console.log("✅ [COMPLETAR IA] Cache actualizado correctamente")},onError:s=>{console.error("💥 [COMPLETAR IA] Error final en la operación:",s),a({type:"error",title:"❌ Error al completar información",message:"No se pudo obtener los datos de IA. Intenta de nuevo.",duration:7e3}),t(!1)}});return{completeInfo:(s,c,u)=>i.mutate({plantId:s,species:c,commonName:u}),isCompleting:e||i.isPending,error:i.error,isSuccess:i.isSuccess}},BP=({isOpen:e,onClose:t,onConfirm:r,title:n,description:a,confirmText:i="Confirmar",cancelText:o="Cancelar",variant:s="warning",isLoading:c=!1,preview:u})=>{const f={danger:{iconColor:"text-red-500",bgColor:"bg-red-50 dark:bg-red-900/20",confirmColor:"destructive"},warning:{iconColor:"text-amber-500",bgColor:"bg-amber-50 dark:bg-amber-900/20",confirmColor:"warning"},info:{iconColor:"text-blue-500",bgColor:"bg-blue-50 dark:bg-blue-900/20",confirmColor:"primary"}}[s];return l.jsx(se,{children:e&&l.jsx(l.Fragment,{children:l.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:l.jsxs(P.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},onClick:m=>m.stopPropagation(),className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl max-w-md w-full max-h-[90vh] overflow-hidden",children:[l.jsx("div",{className:"p-6 pb-4",children:l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:`${f.bgColor} p-3 rounded-full flex-shrink-0`,children:l.jsx(qt,{className:`w-6 h-6 ${f.iconColor}`})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:n}),l.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm leading-relaxed",children:a})]}),l.jsx("button",{onClick:t,disabled:c,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors p-1","aria-label":"Cerrar diálogo",children:l.jsx(br,{className:"w-5 h-5"})})]})}),u&&l.jsx("div",{className:"px-6 pb-4",children:l.jsx("div",{className:"border dark:border-gray-700 rounded-lg p-3 bg-gray-50 dark:bg-gray-900/50",children:u})}),l.jsxs("div",{className:"px-6 pb-6 flex gap-3 justify-end",children:[l.jsx(G,{variant:"outline",onClick:t,disabled:c,className:"min-w-[80px]",children:o}),l.jsx(G,{variant:f.confirmColor,onClick:r,disabled:c,loading:c,className:"min-w-[80px]",children:i})]})]})})})})},UP=({plant:e,variant:t="primary",size:r="sm",showLabel:n=!0,className:a=""})=>{const{updatePlantHealthMutation:i,isUpdatingPlantHealth:o}=So(),s=wr(h=>h.user),{addToast:c}=Kn(),{plant:u}=jc(e.id),d=async()=>{if(!s?.id){c({type:"error",title:"Error",message:"Debes estar logueado para actualizar el diagnóstico"});return}if(!u){c({type:"error",title:"Error",message:"No se pudieron cargar los datos de la planta"});return}console.log("🩺 [Button] Actualizando diagnóstico para:",e.name),i({plant:u,userId:s.id})},f=l.jsxs(l.Fragment,{children:[o?l.jsx(P.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:l.jsx(Lr,{size:r.includes("icon")?16:14})}):l.jsx($h,{size:r.includes("icon")?16:14}),n&&!r.includes("icon")&&l.jsx("span",{className:"ml-2 text-xs",children:o?"Analizando...":"Analizar"})]}),m=r.includes("icon");return l.jsx(G,{onClick:d,disabled:o||!u,size:r,variant:t,className:a,"aria-label":m?`Actualizar diagnóstico de salud para ${e.name}`:void 0,title:m?`Actualizar diagnóstico de salud para ${e.name}`:void 0,children:f})},WP=({plant:e})=>{const t=it(),[r,n]=y.useState(!1),[a,i]=y.useState(!1),{deletePlant:o,isDeletingPlant:s}=So(),{completeInfo:c,isCompleting:u}=FP(),{scrollY:d}=Vx(),f=od(d,[0,300],[0,150]),m=od(d,[0,200],[1,.3]),h=e.images?.find(E=>E.isProfileImage)||e.images?.[0],p=!e.plantEnvironment||!e.lightRequirements,v=()=>{i(!0),n(!1)},g=()=>{o(e.id,{onSuccess:()=>{t("/")}})},x=()=>{console.log("🎯 [UI] Usuario solicitó completar información con IA"),console.log("🌱 [UI] Datos de la planta:",{id:e.id,nombre:e.name,especie:e.species,ambienteActual:e.plantEnvironment||"No especificado",luzActual:e.lightRequirements||"No especificado"}),n(!1),i(!0)},w=()=>{console.log("✅ [UI] Usuario confirmó el completado automático"),i(!1),c(e.id,e.species,e.name)},b=()=>{console.log("❌ [UI] Usuario canceló el completado automático"),i(!1)},j=E=>(E instanceof Date?E:new Date(E)).toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"}),k=E=>{switch(E){case"interior":return l.jsx(_i,{className:"w-4 h-4 mr-2"});case"exterior":return l.jsx(sd,{className:"w-4 h-4 mr-2"});case"ambos":return l.jsxs(l.Fragment,{children:[l.jsx(_i,{className:"w-3 h-3 mr-1"}),l.jsx(sd,{className:"w-3 h-3 mr-1"})]});default:return null}},S=E=>{switch(E){case"interior":return"Interior";case"exterior":return"Exterior";case"ambos":return"Interior/Exterior";default:return null}},N=E=>{switch(E){case"poca_luz":return l.jsx(Yx,{className:"w-4 h-4 mr-2"});case"luz_indirecta":return l.jsx(zr,{className:"w-4 h-4 mr-2 opacity-60"});case"luz_directa_parcial":return l.jsx(zr,{className:"w-4 h-4 mr-2 opacity-80"});case"pleno_sol":return l.jsx(zr,{className:"w-4 h-4 mr-2"});default:return null}},C=E=>{switch(E){case"poca_luz":return"Poca luz";case"luz_indirecta":return"Luz indirecta";case"luz_directa_parcial":return"Sol parcial";case"pleno_sol":return"Pleno sol";default:return null}},T={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.2,delayChildren:.1}}},$={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",damping:25,stiffness:120}}},O={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.6}}};return y.useEffect(()=>{const E=()=>n(!1);if(r)return document.addEventListener("click",E),()=>document.removeEventListener("click",E)},[r]),l.jsxs(P.div,{className:"relative h-96 w-full overflow-hidden",variants:T,initial:"hidden",animate:"visible",children:[l.jsx(P.div,{className:"absolute inset-0 scale-110",style:{y:f,opacity:m},children:h?l.jsx(wc,{src:h.url,alt:e.name,className:"h-full w-full object-cover"}):l.jsx("div",{className:"h-full w-full bg-gradient-to-br from-green-400 via-green-500 to-green-600",children:l.jsx("div",{className:"absolute inset-0 opacity-30",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Ccircle cx='7' cy='7' r='2'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})})}),l.jsxs(P.div,{className:"absolute inset-0",variants:O,children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[rgba(0,0,0,0.6)] to-transparent"}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-transparent via-transparent to-black/30"}),l.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-background/60 to-transparent"})]}),l.jsx("div",{className:"absolute top-0 left-0 right-0 p-4 pt-safe-top z-20",children:l.jsxs(P.div,{className:"flex items-center justify-between",variants:$,children:[l.jsx(G,{"aria-label":"Volver atrás",variant:"ghost",size:"icon",onClick:()=>t("/"),className:"bg-black/30 text-white backdrop-blur-lg rounded-full border border-white/20 hover:bg-black/50 transition-all duration-300",children:l.jsx(rc,{size:20})}),l.jsx("div",{className:"flex items-center space-x-2",children:l.jsxs("div",{className:"relative",children:[l.jsx(G,{"aria-label":"Más opciones",variant:"ghost",size:"icon",onClick:E=>{E.stopPropagation(),n(F=>!F)},className:"bg-neutral-800/90 text-white backdrop-blur-lg rounded-full border border-neutral-600 hover:bg-neutral-700 transition-all duration-300 dark:bg-neutral-200/90 dark:text-neutral-900 dark:border-neutral-400 dark:hover:bg-neutral-300",children:l.jsx(zh,{size:20})}),l.jsx(se,{children:r&&l.jsx(P.div,{initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},transition:{duration:.15},className:"absolute right-0 mt-2 w-48 origin-top-right rounded-xl bg-background/95 backdrop-blur-lg shadow-xl ring-1 ring-black/10 focus:outline-none z-30 border border-border/50",onClick:E=>E.stopPropagation(),children:l.jsxs("div",{className:"py-2",children:[p&&l.jsxs("button",{onClick:x,disabled:u,className:"flex w-full items-center px-4 py-3 text-sm text-contrast-high hover:bg-contrast-surface transition-colors rounded-lg mx-2",children:[u?l.jsx(on,{className:"mr-3 h-4 w-4 animate-spin"}):l.jsx(Ve,{className:"mr-3 h-4 w-4"}),l.jsx("span",{children:u?"Completando...":"Completar con IA"})]}),l.jsx("div",{className:"flex w-full items-center px-2 py-1",children:l.jsx(UP,{plant:e,variant:"outline",size:"sm",showLabel:!0,className:"w-full"})}),l.jsxs("button",{onClick:v,disabled:s,className:"flex w-full items-center px-4 py-3 text-sm text-error-600 dark:text-error-500 hover:bg-error-50 dark:hover:bg-error-900/20 transition-colors rounded-lg mx-2 font-medium",children:[s?l.jsx(on,{className:"mr-3 h-4 w-4 animate-spin"}):l.jsx(Oh,{className:"mr-3 h-4 w-4"}),l.jsx("span",{children:s?"Eliminando...":"Eliminar planta"})]})]})})})]})})]})}),l.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-6 pb-safe-bottom z-10",children:l.jsxs(P.div,{className:"space-y-4",variants:$,children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(P.h1,{className:"text-[24px] font-bold text-white drop-shadow-lg",variants:$,children:e.nickname||e.name}),l.jsx(P.p,{className:"text-[16px] text-white/90 font-medium",variants:$,children:e.species})]}),l.jsxs(P.div,{className:"flex flex-wrap gap-2 pt-2 max-h-32 overflow-y-auto",variants:$,children:[e.location&&l.jsxs("div",{className:"flex items-center text-white/80 bg-black/30 backdrop-blur-sm px-3 py-2 rounded-full border border-white/20",children:[l.jsx(Rh,{className:"w-4 h-4 mr-2"}),l.jsx("span",{className:"text-sm font-medium",children:e.location})]}),e.dateAdded&&l.jsxs("div",{className:"flex items-center text-white/80 bg-black/30 backdrop-blur-sm px-3 py-2 rounded-full border border-white/20",children:[l.jsx(Ai,{className:"w-4 h-4 mr-2"}),l.jsxs("span",{className:"text-sm font-medium",children:["Desde ",j(e.dateAdded)]})]}),e.plantEnvironment&&S(e.plantEnvironment)&&l.jsxs("div",{className:"flex items-center text-white/80 bg-black/30 backdrop-blur-sm px-3 py-2 rounded-full border border-white/20",children:[k(e.plantEnvironment),l.jsx("span",{className:"text-sm font-medium",children:S(e.plantEnvironment)})]}),e.lightRequirements&&C(e.lightRequirements)&&l.jsxs("div",{className:"flex items-center text-white/80 bg-black/30 backdrop-blur-sm px-3 py-2 rounded-full border border-white/20",children:[N(e.lightRequirements),l.jsx("span",{className:"text-sm font-medium",children:C(e.lightRequirements)})]}),e.images&&e.images.length>0&&l.jsx("div",{className:"flex items-center text-white/80 bg-black/30 backdrop-blur-sm px-3 py-2 rounded-full border border-white/20",children:l.jsxs("span",{className:"text-sm font-medium",children:[e.images.length," foto",e.images.length!==1?"s":""]})})]})]})}),l.jsx(se,{children:a&&l.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:b,children:l.jsxs(P.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},onClick:E=>E.stopPropagation(),className:"bg-white dark:bg-gray-900 rounded-2xl p-6 max-w-md w-full mx-4 shadow-xl",children:[l.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[l.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center",children:l.jsx(Ve,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Completar con IA"}),l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Información automática"})]})]}),l.jsxs("div",{className:"space-y-3 mb-6",children:[l.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"¿Quieres que la IA complete la información faltante de esta planta?"}),l.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-3 space-y-2",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"text-2xl",children:"🌱"}),l.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:e.name})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"text-2xl",children:"🔬"}),l.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:e.species})]})]}),l.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[l.jsx("p",{className:"font-medium mb-1",children:"La IA agregará:"}),l.jsxs("ul",{className:"space-y-1",children:[l.jsx("li",{children:"• Ambiente recomendado (interior/exterior)"}),l.jsx("li",{children:"• Necesidades de luz específicas"})]})]})]}),l.jsxs("div",{className:"flex space-x-3",children:[l.jsx(G,{variant:"outline",onClick:b,className:"flex-1",disabled:u,children:"Cancelar"}),l.jsx(G,{onClick:w,className:"flex-1 bg-green-600 hover:bg-green-700 text-white",disabled:u,children:u?l.jsxs(l.Fragment,{children:[l.jsx(on,{className:"w-4 h-4 mr-2 animate-spin"}),"Completando..."]}):l.jsxs(l.Fragment,{children:[l.jsx(Ve,{className:"w-4 h-4 mr-2"}),"Completar"]})})]})]})})}),l.jsx(BP,{isOpen:a,onClose:()=>i(!1),onConfirm:g,title:"Eliminar Planta",description:`¿Estás seguro de que quieres eliminar "${e.nickname||e.name}"? Esta acción es irreversible y se perderán todos los datos, fotos y mensajes de chat asociados.`,confirmText:"Eliminar Definitivamente",cancelText:"Cancelar",variant:"danger",isLoading:s,preview:l.jsxs("div",{className:"flex items-center gap-3",children:[h&&l.jsx("img",{src:h.url,alt:e.name,className:"w-12 h-12 rounded-lg object-cover"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"font-medium text-sm text-gray-900 dark:text-gray-100 truncate",children:e.nickname||e.name}),l.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:[e.species," • ",e.images?.length||0," fotos"]})]})]})})]})},HP=({plant:e})=>{const{careProfile:t,personality:r}=e;if(!t)return l.jsx("div",{className:"bg-background p-6 rounded-lg shadow-lg w-full text-center",children:l.jsx("p",{className:"text-muted-foreground",children:"No hay perfil de cuidados disponible para esta planta."})});const n=[{icon:l.jsx(po,{size:20,strokeWidth:2,color:"#555"}),label:"RIEGO",value:`Cada ${t.wateringFrequency} días`},{icon:l.jsx(zr,{size:20,strokeWidth:2,color:"#555"}),label:"LUZ SOLAR",value:t.sunlightRequirement},{icon:l.jsx(Mh,{size:20,strokeWidth:2,color:"#555"}),label:"HUMEDAD",value:t.humidityPreference},{icon:l.jsx(Lh,{size:20,strokeWidth:2,color:"#555"}),label:"TEMPERATURA IDEAL",value:`${t.temperatureRange.min}°C - ${t.temperatureRange.max}°C`},{icon:l.jsx(Ve,{size:20,strokeWidth:2,color:"#555"}),label:"FERTILIZACIÓN",value:`Cada ${t.fertilizingFrequency} días`},{icon:l.jsx(nc,{size:20,strokeWidth:2,color:"#555"}),label:"TIPO DE SUELO",value:t.soilType}];return l.jsxs("div",{className:"w-full",style:{lineHeight:"1.4"},children:[l.jsx("div",{className:"grid grid-cols-2 gap-x-4 gap-y-6 mb-4",style:{gap:"24px 16px"},children:n.map((a,i)=>l.jsxs("div",{className:"flex flex-col items-start",children:[l.jsxs("div",{className:"flex items-center mb-1",children:[a.icon,l.jsx("span",{className:"ml-2 text-[12px] uppercase tracking-[0.4px] text-[#777] font-medium",children:a.label})]}),l.jsx("span",{className:"text-[15px] font-semibold text-[#333] mt-1",children:a.value})]},i))}),t.specialCare&&t.specialCare.length>0&&l.jsxs("div",{className:"mb-4",children:[l.jsx("h4",{className:"font-semibold text-[14px] text-[#333] mt-4 mb-2",children:"Cuidados Especiales"}),l.jsx("ul",{className:"list-none pl-0 ml-4",style:{lineHeight:"1.5"},children:t.specialCare.map((a,i)=>l.jsxs("li",{className:"flex items-start mb-1",children:[l.jsx("span",{className:"mr-2 text-[#2A7F3E] font-bold",style:{fontSize:18,lineHeight:"1"},children:"•"}),l.jsx("span",{className:"text-[14px] text-[#444]",children:a})]},i))})]}),l.jsx("hr",{className:"my-6",style:{border:"none",borderTop:"1px solid #EEE",margin:"24px 0"}}),r&&l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex items-center mb-3",children:[l.jsx(Sa,{size:20,strokeWidth:2,color:"#555",className:"mr-2"}),l.jsx("span",{className:"text-[18px] font-semibold text-[#333]",children:"Personalidad de la Planta"})]}),r.communicationStyle&&l.jsx("div",{className:Array.isArray(r.communicationStyle)&&r.communicationStyle.length>1?"grid grid-cols-2 gap-x-4 mb-3":"flex justify-center mb-3",children:(Array.isArray(r.communicationStyle)?r.communicationStyle:[r.communicationStyle]).map((a,i)=>l.jsxs("div",{className:"flex flex-col items-start mb-2",children:[l.jsx("span",{className:"text-[12px] uppercase tracking-[0.4px] text-[#777] font-medium",children:"ESTILO"}),l.jsx("span",{className:"text-[15px] font-semibold text-[#333] mt-1",children:a})]},i))}),r.catchphrases&&r.catchphrases.length>0&&l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-[14px] text-[#333] mb-2",children:"Frases Típicas"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:r.catchphrases.map((a,i)=>l.jsx("span",{className:"inline-block bg-[#F0FDF6] text-[#046A38] text-[14px] px-2 py-1 rounded-[4px] font-medium",style:{padding:"4px 8px",marginRight:8,marginBottom:8},children:a},i))})]})]})]})},qP=({funFacts:e})=>{const t={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{staggerChildren:.1}}},r={hidden:{opacity:0,y:10},visible:{opacity:1,y:0}};return l.jsxs(P.div,{className:"bg-white/0 dark:bg-transparent p-3 sm:p-4 w-full",variants:t,initial:"hidden",animate:"visible",children:[e&&e.length>0&&l.jsxs(P.div,{variants:r,children:[l.jsxs("div",{className:"flex items-center mb-6",children:[l.jsx("div",{className:"p-3 bg-yellow-500/10 rounded-full mr-4",children:l.jsx(Ve,{className:"w-6 h-6 text-yellow-500"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-2xl font-bold text-foreground",children:"Datos Curiosos"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Descubre cosas increíbles sobre esta planta"})]})]}),l.jsx("div",{className:"grid gap-4",children:e.map((n,a)=>l.jsxs(P.div,{className:"group flex items-start bg-yellow-500/5 hover:bg-yellow-500/10 border border-yellow-500/20 rounded-xl p-4 transition-all duration-300 hover:shadow-md",variants:r,whileHover:{scale:1.02},whileTap:{scale:.98},children:[l.jsx("div",{className:"flex-shrink-0 mr-4 mt-1",children:l.jsxs("div",{className:"relative",children:[l.jsx(Fh,{className:"w-5 h-5 text-yellow-500 group-hover:text-yellow-600 transition-colors"}),l.jsx("div",{className:"absolute -inset-2 bg-yellow-500/20 rounded-full opacity-0 group-hover:opacity-100 transition-opacity pulse"})]})}),l.jsx("p",{className:"text-foreground/90 leading-relaxed font-medium group-hover:text-foreground transition-colors",children:n})]},a))})]}),(!e||e.length===0)&&l.jsx(P.div,{className:"mt-8 flex items-center justify-center p-6 bg-muted/30 rounded-xl border border-dashed border-muted-foreground/20",variants:r,children:l.jsxs("div",{className:"text-center",children:[l.jsx(Ve,{className:"w-6 h-6 text-yellow-400 mx-auto mb-2"}),l.jsx("p",{className:"text-muted-foreground font-medium",children:"No hay datos curiosos disponibles"}),l.jsx("p",{className:"text-xs text-muted-foreground/70 mt-1",children:"¡Pronto agregaremos información interesante!"})]})})]})},ZP=()=>l.jsx(La,{className:"w-5 h-5 text-[#EF9A9A]","aria-label":"Problema de hoja seca"}),KP=({analysis:e})=>{if(!e)return null;const t=e.issues&&e.issues.length>0;return l.jsxs("div",{className:"w-full",role:"region","aria-label":"Análisis de salud de la planta",style:{lineHeight:"1.4"},children:[t?l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-[16px] text-[#333] mt-3",children:"Problemas Detectados"}),l.jsxs("p",{className:"mb-2 text-[14px] text-[#D32F2F] font-medium",style:{marginTop:12,marginBottom:8},children:[e.issues.length," problema",e.issues.length!==1?"s":""," detectado",e.issues.length!==1?"s":""]}),l.jsx("ul",{className:"",children:e.issues.map((r,n)=>l.jsxs("li",{className:"flex items-start",style:{marginBottom:n<e.issues.length-1?16:0,paddingBottom:n<e.issues.length-1?16:0,borderBottom:n<e.issues.length-1?"1px solid #EEE":"none"},children:[l.jsx("div",{className:"flex-shrink-0 w-5 h-5 flex items-center justify-center mt-1",children:ZP()}),l.jsxs("div",{className:"ml-4",children:[l.jsx("p",{className:"font-semibold text-[15px] text-[#333]",children:r.type}),l.jsx("p",{className:"text-[14px] text-[#555] mt-1",children:r.description})]})]},n))}),l.jsxs("div",{className:"mt-4",children:[l.jsx("h4",{className:"font-semibold text-[14px] text-[#333] mt-4 mb-2",children:"Tratamientos Sugeridos"}),l.jsx("ul",{className:"list-none pl-0 ml-3",style:{lineHeight:"1.5"},children:e.issues.map((r,n)=>l.jsxs("li",{className:"flex items-start mb-1",children:[l.jsx("span",{className:"mr-2 text-[#2A7F3E] font-bold",style:{fontSize:18,lineHeight:"1"},children:"•"}),l.jsx("span",{className:"text-[14px] text-[#444]",children:r.treatment})]},n))})]})]}):l.jsxs("div",{className:"flex flex-col items-center justify-center text-center p-6 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[l.jsx("span",{className:"text-4xl mb-2",role:"img","aria-label":"Planta saludable",children:"🌱"}),l.jsx(Xx,{className:"w-12 h-12 text-green-500 mb-3","aria-label":"Todo en orden"}),l.jsxs("h4",{className:"font-semibold text-lg text-green-700 dark:text-green-300 flex items-center gap-2",children:["¡Todo en orden!",l.jsx("span",{className:"text-base","aria-hidden":"true",children:"🌱"})]}),l.jsx("p",{className:"text-muted-foreground",children:"El análisis inicial no detectó problemas de salud significativos."})]}),e.recommendations&&e.recommendations.length>0&&l.jsxs("div",{className:"mt-4",children:[l.jsx("h4",{className:"font-semibold text-[14px] text-[#333] mt-4 mb-2",children:"Recomendaciones Adicionales"}),l.jsx("ul",{className:"list-none pl-0 ml-3",style:{lineHeight:"1.5"},children:e.recommendations.map((r,n)=>l.jsxs("li",{className:"flex items-start mb-1",children:[l.jsx("span",{className:"mr-2 text-[#2A7F3E] font-bold",style:{fontSize:18,lineHeight:"1"},children:"•"}),l.jsx("span",{className:"text-[14px] text-[#444]",children:r})]},n))})]})]})};var Eo={},Wp={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(Wp);var kc={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(kc);var Sc={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="string"||typeof r=="symbol"?r:Object.is(r?.valueOf?.(),-0)?"-0":String(r)}e.toKey=t})(Sc);var _o={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){const n=[],a=r.length;if(a===0)return n;let i=0,o="",s="",c=!1;for(r.charCodeAt(0)===46&&(n.push(""),i++);i<a;){const u=r[i];s?u==="\\"&&i+1<a?(i++,o+=r[i]):u===s?s="":o+=u:c?u==='"'||u==="'"?s=u:u==="]"?(c=!1,n.push(o),o=""):o+=u:u==="["?(c=!0,o&&(n.push(o),o="")):u==="."?o&&(n.push(o),o=""):o+=u,i++}return o&&n.push(o),n}e.toPath=t})(_o);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Wp,r=kc,n=Sc,a=_o;function i(s,c,u){if(s==null)return u;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return u;const d=s[c];return d===void 0?r.isDeepKey(c)?i(s,a.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const d=s[c];return d===void 0?u:d}default:{if(Array.isArray(c))return o(s,c,u);if(Object.is(c?.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return u;const d=s[c];return d===void 0?u:d}}}function o(s,c,u){if(c.length===0)return u;let d=s;for(let f=0;f<c.length;f++){if(d==null||t.isUnsafeProperty(c[f]))return u;d=d[c[f]]}return d===void 0?u:d}e.get=i})(Eo);var GP=Eo.get;const vn=Ur(GP);var Hp={exports:{}},he={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nc=Symbol.for("react.transitional.element"),Pc=Symbol.for("react.portal"),Ao=Symbol.for("react.fragment"),Co=Symbol.for("react.strict_mode"),Oo=Symbol.for("react.profiler"),To=Symbol.for("react.consumer"),Io=Symbol.for("react.context"),Do=Symbol.for("react.forward_ref"),Mo=Symbol.for("react.suspense"),$o=Symbol.for("react.suspense_list"),zo=Symbol.for("react.memo"),Ro=Symbol.for("react.lazy"),VP=Symbol.for("react.view_transition"),YP=Symbol.for("react.client.reference");function $t(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Nc:switch(e=e.type,e){case Ao:case Oo:case Co:case Mo:case $o:case VP:return e;default:switch(e=e&&e.$$typeof,e){case Io:case Do:case Ro:case zo:return e;case To:return e;default:return t}}case Pc:return t}}}he.ContextConsumer=To;he.ContextProvider=Io;he.Element=Nc;he.ForwardRef=Do;he.Fragment=Ao;he.Lazy=Ro;he.Memo=zo;he.Portal=Pc;he.Profiler=Oo;he.StrictMode=Co;he.Suspense=Mo;he.SuspenseList=$o;he.isContextConsumer=function(e){return $t(e)===To};he.isContextProvider=function(e){return $t(e)===Io};he.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Nc};he.isForwardRef=function(e){return $t(e)===Do};he.isFragment=function(e){return $t(e)===Ao};he.isLazy=function(e){return $t(e)===Ro};he.isMemo=function(e){return $t(e)===zo};he.isPortal=function(e){return $t(e)===Pc};he.isProfiler=function(e){return $t(e)===Oo};he.isStrictMode=function(e){return $t(e)===Co};he.isSuspense=function(e){return $t(e)===Mo};he.isSuspenseList=function(e){return $t(e)===$o};he.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Ao||e===Oo||e===Co||e===Mo||e===$o||typeof e=="object"&&e!==null&&(e.$$typeof===Ro||e.$$typeof===zo||e.$$typeof===Io||e.$$typeof===To||e.$$typeof===Do||e.$$typeof===YP||e.getModuleId!==void 0)};he.typeOf=$t;Hp.exports=he;var XP=Hp.exports,Ct=e=>e===0?0:e>0?1:-1,It=e=>typeof e=="number"&&e!=+e,en=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,U=e=>(typeof e=="number"||e instanceof Number)&&!It(e),rr=e=>U(e)||typeof e=="string",QP=0,Aa=e=>{var t=++QP;return"".concat(e||"").concat(t)},Fr=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!U(t)&&typeof t!="string")return n;var i;if(en(t)){if(r==null)return n;var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return It(i)&&(i=n),a&&r!=null&&i>r&&(i=r),i},qp=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1},ua=(e,t)=>U(e)&&U(t)?r=>e+r*(t-e):()=>t;function Zp(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):vn(n,t))===r)}var _e=e=>e===null||typeof e>"u",Ec=e=>_e(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),JP=["viewBox","children"],eE=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Qd=["points","pathLength"],Ps={svg:JP,polygon:Qd,polyline:Qd},_c=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Ac=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(y.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(a=>{_c.includes(a)&&(n[a]=i=>r[a](r,i))}),n},tE=(e,t,r)=>n=>(e(t,r,n),null),rE=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(a=>{var i=e[a];_c.includes(a)&&typeof i=="function"&&(n||(n={}),n[a]=tE(i,t,r))}),n},Jd=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",ef=null,Es=null,Kp=e=>{if(e===ef&&Array.isArray(Es))return Es;var t=[];return y.Children.forEach(e,r=>{_e(r)||(XP.isFragment(r)?t=t.concat(Kp(r.props.children)):t.push(r))}),Es=t,ef=e,t};function Gp(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(a=>Jd(a)):n=[Jd(t)],Kp(e).forEach(a=>{var i=vn(a,"type.displayName")||vn(a,"type.name");n.indexOf(i)!==-1&&r.push(a)}),r}var Vp=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,nE=(e,t,r,n)=>{var a,i=(a=n&&Ps?.[n])!==null&&a!==void 0?a:[];return t.startsWith("data-")||typeof e!="function"&&(n&&i.includes(t)||eE.includes(t))||r&&_c.includes(t)},ye=(e,t,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(y.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var a={};return Object.keys(n).forEach(i=>{var o;nE((o=n)===null||o===void 0?void 0:o[i],i,t,r)&&(a[i]=n[i])}),a},aE=["children","width","height","viewBox","className","style","title","desc"];function dl(){return dl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dl.apply(null,arguments)}function iE(e,t){if(e==null)return{};var r,n,a=oE(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function oE(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Yp=y.forwardRef((e,t)=>{var{children:r,width:n,height:a,viewBox:i,className:o,style:s,title:c,desc:u}=e,d=iE(e,aE),f=i||{width:n,height:a,x:0,y:0},m=fe("recharts-surface",o);return y.createElement("svg",dl({},ye(d,!0,"svg"),{className:m,width:n,height:a,style:s,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),y.createElement("title",null,c),y.createElement("desc",null,u),r)}),sE=["children","className"];function fl(){return fl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fl.apply(null,arguments)}function lE(e,t){if(e==null)return{};var r,n,a=cE(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function cE(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Br=y.forwardRef((e,t)=>{var{children:r,className:n}=e,a=lE(e,sE),i=fe("recharts-layer",n);return y.createElement("g",fl({className:i},ye(a,!0),{ref:t}),r)}),uE=y.createContext(null);function Ee(e){return function(){return e}}const ml=Math.PI,hl=2*ml,Xr=1e-6,dE=hl-Xr;function Xp(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function fE(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Xp;const r=10**t;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class mE{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Xp:fE(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,i,o){this._append`C${+t},${+r},${+n},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,a,i){if(t=+t,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,s=this._y1,c=n-t,u=a-r,d=o-t,f=s-r,m=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(m>Xr)if(!(Math.abs(f*c-u*d)>Xr)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let h=n-o,p=a-s,v=c*c+u*u,g=h*h+p*p,x=Math.sqrt(v),w=Math.sqrt(m),b=i*Math.tan((ml-Math.acos((v+m-g)/(2*x*w)))/2),j=b/w,k=b/x;Math.abs(j-1)>Xr&&this._append`L${t+j*d},${r+j*f}`,this._append`A${i},${i},0,0,${+(f*h>d*p)},${this._x1=t+k*c},${this._y1=r+k*u}`}}arc(t,r,n,a,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let s=n*Math.cos(a),c=n*Math.sin(a),u=t+s,d=r+c,f=1^o,m=o?a-i:i-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Xr||Math.abs(this._y1-d)>Xr)&&this._append`L${u},${d}`,n&&(m<0&&(m=m%hl+hl),m>dE?this._append`A${n},${n},0,1,${f},${t-s},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:m>Xr&&this._append`A${n},${n},0,${+(m>=ml)},${f},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function Qp(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new mE(t)}function Cc(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Jp(e){this._context=e}Jp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Lo(e){return new Jp(e)}function eg(e){return e[0]}function tg(e){return e[1]}function rg(e,t){var r=Ee(!0),n=null,a=Lo,i=null,o=Qp(s);e=typeof e=="function"?e:e===void 0?eg:Ee(e),t=typeof t=="function"?t:t===void 0?tg:Ee(t);function s(c){var u,d=(c=Cc(c)).length,f,m=!1,h;for(n==null&&(i=a(h=o())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===m&&((m=!m)?i.lineStart():i.lineEnd()),m&&i.point(+e(f,u,c),+t(f,u,c));if(h)return i=null,h+""||null}return s.x=function(c){return arguments.length?(e=typeof c=="function"?c:Ee(+c),s):e},s.y=function(c){return arguments.length?(t=typeof c=="function"?c:Ee(+c),s):t},s.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Ee(!!c),s):r},s.curve=function(c){return arguments.length?(a=c,n!=null&&(i=a(n)),s):a},s.context=function(c){return arguments.length?(c==null?n=i=null:i=a(n=c),s):n},s}function di(e,t,r){var n=null,a=Ee(!0),i=null,o=Lo,s=null,c=Qp(u);e=typeof e=="function"?e:e===void 0?eg:Ee(+e),t=typeof t=="function"?t:Ee(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?tg:Ee(+r);function u(f){var m,h,p,v=(f=Cc(f)).length,g,x=!1,w,b=new Array(v),j=new Array(v);for(i==null&&(s=o(w=c())),m=0;m<=v;++m){if(!(m<v&&a(g=f[m],m,f))===x)if(x=!x)h=m,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),p=m-1;p>=h;--p)s.point(b[p],j[p]);s.lineEnd(),s.areaEnd()}x&&(b[m]=+e(g,m,f),j[m]=+t(g,m,f),s.point(n?+n(g,m,f):b[m],r?+r(g,m,f):j[m]))}if(w)return s=null,w+""||null}function d(){return rg().defined(a).curve(o).context(i)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:Ee(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Ee(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Ee(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:Ee(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Ee(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Ee(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:Ee(!!f),u):a},u.curve=function(f){return arguments.length?(o=f,i!=null&&(s=o(i)),u):o},u.context=function(f){return arguments.length?(f==null?i=s=null:s=o(i=f),u):i},u}class ng{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function hE(e){return new ng(e,!0)}function pE(e){return new ng(e,!1)}function Mi(){}function $i(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function ag(e){this._context=e}ag.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:$i(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:$i(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function gE(e){return new ag(e)}function ig(e){this._context=e}ig.prototype={areaStart:Mi,areaEnd:Mi,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:$i(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function vE(e){return new ig(e)}function og(e){this._context=e}og.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:$i(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function yE(e){return new og(e)}function sg(e){this._context=e}sg.prototype={areaStart:Mi,areaEnd:Mi,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function xE(e){return new sg(e)}function tf(e){return e<0?-1:1}function rf(e,t,r){var n=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(n||a<0&&-0),o=(r-e._y1)/(a||n<0&&-0),s=(i*a+o*n)/(n+a);return(tf(i)+tf(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(s))||0}function nf(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function _s(e,t,r){var n=e._x0,a=e._y0,i=e._x1,o=e._y1,s=(i-n)/3;e._context.bezierCurveTo(n+s,a+s*t,i-s,o-s*r,i,o)}function zi(e){this._context=e}zi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:_s(this,this._t0,nf(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,_s(this,nf(this,r=rf(this,e,t)),r);break;default:_s(this,this._t0,r=rf(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function lg(e){this._context=new cg(e)}(lg.prototype=Object.create(zi.prototype)).point=function(e,t){zi.prototype.point.call(this,t,e)};function cg(e){this._context=e}cg.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,i){this._context.bezierCurveTo(t,e,n,r,i,a)}};function bE(e){return new zi(e)}function wE(e){return new lg(e)}function ug(e){this._context=e}ug.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=af(e),a=af(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function af(e){var t,r=e.length-1,n,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(a[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function jE(e){return new ug(e)}function Fo(e,t){this._context=e,this._t=t}Fo.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function kE(e){return new Fo(e,.5)}function SE(e){return new Fo(e,0)}function NE(e){return new Fo(e,1)}function Fn(e,t){if((o=e.length)>1)for(var r=1,n,a,i=e[t[0]],o,s=i.length;r<o;++r)for(a=i,i=e[t[r]],n=0;n<s;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function pl(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function PE(e,t){return e[t]}function EE(e){const t=[];return t.key=e,t}function _E(){var e=Ee([]),t=pl,r=Fn,n=PE;function a(i){var o=Array.from(e.apply(this,arguments),EE),s,c=o.length,u=-1,d;for(const f of i)for(s=0,++u;s<c;++s)(o[s][u]=[0,+n(f,o[s].key,u,i)]).data=f;for(s=0,d=Cc(t(o));s<c;++s)o[d[s]].index=s;return r(o,d),o}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Ee(Array.from(i)),a):e},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:Ee(+i),a):n},a.order=function(i){return arguments.length?(t=i==null?pl:typeof i=="function"?i:Ee(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(r=i??Fn,a):r},a}function AE(e,t){if((n=e.length)>0){for(var r,n,a=0,i=e[0].length,o;a<i;++a){for(o=r=0;r<n;++r)o+=e[r][a][1]||0;if(o)for(r=0;r<n;++r)e[r][a][1]/=o}Fn(e,t)}}function CE(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,i=n.length;r<i;++r){for(var o=0,s=0;o<a;++o)s+=e[o][r][1]||0;n[r][1]+=n[r][0]=-s/2}Fn(e,t)}}function OE(e,t){if(!(!((o=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,i,o;n<i;++n){for(var s=0,c=0,u=0;s<o;++s){for(var d=e[t[s]],f=d[n][1]||0,m=d[n-1][1]||0,h=(f-m)/2,p=0;p<s;++p){var v=e[t[p]],g=v[n][1]||0,x=v[n-1][1]||0;h+=g-x}c+=f,u+=h*f}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,Fn(e,t)}}var dg={},fg={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const a=new Map;for(let i=0;i<r.length;i++){const o=r[i],s=n(o);a.has(s)||a.set(s,o)}return Array.from(a.values())}e.uniqBy=t})(fg);var Oc={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(Oc);var mg={},Bo={},hg={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(hg);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hg;function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(Bo);var pg={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(pg);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Bo,r=pg;function n(a){return r.isObjectLike(a)&&t.isArrayLike(a)}e.isArrayLikeObject=n})(mg);var gg={},vg={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Eo;function r(n){return function(a){return t.get(a,n)}}e.property=r})(vg);var yg={},As={},Cs={},Tc={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(Tc);var Ic={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(Ic);var Uo={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(Uo);var of;function TE(){return of||(of=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Dc(),r=Tc,n=Ic,a=Uo;function i(f,m,h){return typeof h!="function"?t.isMatch(f,m):o(f,m,function p(v,g,x,w,b,j){const k=h(v,g,x,w,b,j);return k!==void 0?!!k:o(v,g,p,j)},new Map)}function o(f,m,h,p){if(m===f)return!0;switch(typeof m){case"object":return s(f,m,h,p);case"function":return Object.keys(m).length>0?o(f,{...m},h,p):a.eq(f,m);default:return r.isObject(f)?typeof m=="string"?m==="":!0:a.eq(f,m)}}function s(f,m,h,p){if(m==null)return!0;if(Array.isArray(m))return u(f,m,h,p);if(m instanceof Map)return c(f,m,h,p);if(m instanceof Set)return d(f,m,h,p);const v=Object.keys(m);if(f==null)return v.length===0;if(v.length===0)return!0;if(p&&p.has(m))return p.get(m)===f;p&&p.set(m,f);try{for(let g=0;g<v.length;g++){const x=v[g];if(!n.isPrimitive(f)&&!(x in f)||m[x]===void 0&&f[x]!==void 0||m[x]===null&&f[x]!==null||!h(f[x],m[x],x,f,m,p))return!1}return!0}finally{p&&p.delete(m)}}function c(f,m,h,p){if(m.size===0)return!0;if(!(f instanceof Map))return!1;for(const[v,g]of m.entries()){const x=f.get(v);if(h(x,g,v,f,m,p)===!1)return!1}return!0}function u(f,m,h,p){if(m.length===0)return!0;if(!Array.isArray(f))return!1;const v=new Set;for(let g=0;g<m.length;g++){const x=m[g];let w=!1;for(let b=0;b<f.length;b++){if(v.has(b))continue;const j=f[b];let k=!1;if(h(j,x,g,f,m,p)&&(k=!0),k){v.add(b),w=!0;break}}if(!w)return!1}return!0}function d(f,m,h,p){return m.size===0?!0:f instanceof Set?u([...f],[...m],h,p):!1}e.isMatchWith=i,e.isSetMatch=d}(Cs)),Cs}var sf;function Dc(){return sf||(sf=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=TE();function r(n,a){return t.isMatchWith(n,a,()=>{})}e.isMatch=r}(As)),As}var xg={},Mc={},$c={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})($c);var Wo={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(Wo);var Ho={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",a="[object Boolean]",i="[object Arguments]",o="[object Symbol]",s="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",f="[object Function]",m="[object ArrayBuffer]",h="[object Object]",p="[object Error]",v="[object DataView]",g="[object Uint8Array]",x="[object Uint8ClampedArray]",w="[object Uint16Array]",b="[object Uint32Array]",j="[object BigUint64Array]",k="[object Int8Array]",S="[object Int16Array]",N="[object Int32Array]",C="[object BigInt64Array]",T="[object Float32Array]",$="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=m,e.arrayTag=d,e.bigInt64ArrayTag=C,e.bigUint64ArrayTag=j,e.booleanTag=a,e.dataViewTag=v,e.dateTag=s,e.errorTag=p,e.float32ArrayTag=T,e.float64ArrayTag=$,e.functionTag=f,e.int16ArrayTag=S,e.int32ArrayTag=N,e.int8ArrayTag=k,e.mapTag=c,e.numberTag=n,e.objectTag=h,e.regexpTag=t,e.setTag=u,e.stringTag=r,e.symbolTag=o,e.uint16ArrayTag=w,e.uint32ArrayTag=b,e.uint8ArrayTag=g,e.uint8ClampedArrayTag=x})(Ho);var bg={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(bg);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$c,r=Wo,n=Ho,a=Ic,i=bg;function o(d,f){return s(d,void 0,d,new Map,f)}function s(d,f,m,h=new Map,p=void 0){const v=p?.(d,f,m,h);if(v!=null)return v;if(a.isPrimitive(d))return d;if(h.has(d))return h.get(d);if(Array.isArray(d)){const g=new Array(d.length);h.set(d,g);for(let x=0;x<d.length;x++)g[x]=s(d[x],x,m,h,p);return Object.hasOwn(d,"index")&&(g.index=d.index),Object.hasOwn(d,"input")&&(g.input=d.input),g}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const g=new RegExp(d.source,d.flags);return g.lastIndex=d.lastIndex,g}if(d instanceof Map){const g=new Map;h.set(d,g);for(const[x,w]of d)g.set(x,s(w,x,m,h,p));return g}if(d instanceof Set){const g=new Set;h.set(d,g);for(const x of d)g.add(s(x,void 0,m,h,p));return g}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(i.isTypedArray(d)){const g=new(Object.getPrototypeOf(d)).constructor(d.length);h.set(d,g);for(let x=0;x<d.length;x++)g[x]=s(d[x],x,m,h,p);return g}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const g=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return h.set(d,g),c(g,d,m,h,p),g}if(typeof File<"u"&&d instanceof File){const g=new File([d],d.name,{type:d.type});return h.set(d,g),c(g,d,m,h,p),g}if(d instanceof Blob){const g=new Blob([d],{type:d.type});return h.set(d,g),c(g,d,m,h,p),g}if(d instanceof Error){const g=new d.constructor;return h.set(d,g),g.message=d.message,g.name=d.name,g.stack=d.stack,g.cause=d.cause,c(g,d,m,h,p),g}if(typeof d=="object"&&u(d)){const g=Object.create(Object.getPrototypeOf(d));return h.set(d,g),c(g,d,m,h,p),g}return d}function c(d,f,m=d,h,p){const v=[...Object.keys(f),...t.getSymbols(f)];for(let g=0;g<v.length;g++){const x=v[g],w=Object.getOwnPropertyDescriptor(d,x);(w==null||w.writable)&&(d[x]=s(f[x],x,m,h,p))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=s,e.copyProperties=c})(Mc);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Mc;function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(xg);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Dc(),r=xg;function n(a){return a=r.cloneDeep(a),i=>t.isMatch(i,a)}e.matches=n})(yg);var wg={},jg={},kg={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Mc,r=Ho;function n(a,i){return t.cloneDeepWith(a,(o,s,c,u)=>{const d=i?.(o,s,c,u);if(d!=null)return d;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new a.constructor(a?.valueOf());return t.copyProperties(f,a),f}case r.argumentsTag:{const f={};return t.copyProperties(f,a),f.length=a.length,f[Symbol.iterator]=a[Symbol.iterator],f}default:return}})}e.cloneDeepWith=n})(kg);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kg;function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(jg);var Sg={},zc={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,a=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<a;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(zc);var Ng={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Wo;function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(Ng);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kc,r=zc,n=Ng,a=_o;function i(o,s){let c;if(Array.isArray(s)?c=s:typeof s=="string"&&t.isDeepKey(s)&&o?.[s]==null?c=a.toPath(s):c=[s],c.length===0)return!1;let u=o;for(let d=0;d<c.length;d++){const f=c[d];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}e.has=i})(Sg);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Dc(),r=Sc,n=jg,a=Eo,i=Sg;function o(s,c){switch(typeof s){case"object":{Object.is(s?.valueOf(),-0)&&(s="-0");break}case"number":{s=r.toKey(s);break}}return c=n.cloneDeep(c),function(u){const d=a.get(u,s);return d===void 0?i.has(u,s):c===void 0?d===void 0:t.isMatch(d,c)}}e.matchesProperty=o})(wg);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Oc,r=vg,n=yg,a=wg;function i(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?a.matchesProperty(o[0],o[1]):n.matches(o);case"string":case"symbol":case"number":return r.property(o)}}e.iteratee=i})(gg);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fg,r=Oc,n=mg,a=gg;function i(o,s=r.identity){return n.isArrayLikeObject(o)?t.uniqBy(Array.from(o),a.iteratee(s)):[]}e.uniqBy=i})(dg);var IE=dg.uniqBy;const lf=Ur(IE);function DE(e,t,r){return t===!0?lf(e,r):typeof t=="function"?lf(e,t):e}var Pg={exports:{}},Eg={},_g={exports:{}},Ag={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bn=y;function ME(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var $E=typeof Object.is=="function"?Object.is:ME,zE=Bn.useState,RE=Bn.useEffect,LE=Bn.useLayoutEffect,FE=Bn.useDebugValue;function BE(e,t){var r=t(),n=zE({inst:{value:r,getSnapshot:t}}),a=n[0].inst,i=n[1];return LE(function(){a.value=r,a.getSnapshot=t,Os(a)&&i({inst:a})},[e,r,t]),RE(function(){return Os(a)&&i({inst:a}),e(function(){Os(a)&&i({inst:a})})},[e]),FE(r),r}function Os(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!$E(e,r)}catch{return!0}}function UE(e,t){return t()}var WE=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?UE:BE;Ag.useSyncExternalStore=Bn.useSyncExternalStore!==void 0?Bn.useSyncExternalStore:WE;_g.exports=Ag;var HE=_g.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qo=y,qE=HE;function ZE(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var KE=typeof Object.is=="function"?Object.is:ZE,GE=qE.useSyncExternalStore,VE=qo.useRef,YE=qo.useEffect,XE=qo.useMemo,QE=qo.useDebugValue;Eg.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var i=VE(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=XE(function(){function c(h){if(!u){if(u=!0,d=h,h=n(h),a!==void 0&&o.hasValue){var p=o.value;if(a(p,h))return f=p}return f=h}if(p=f,KE(d,h))return p;var v=n(h);return a!==void 0&&a(p,v)?(d=h,p):(d=h,f=v)}var u=!1,d,f,m=r===void 0?null:r;return[function(){return c(t())},m===null?void 0:function(){return c(m())}]},[t,r,n,a]);var s=GE(e,i[0],i[1]);return YE(function(){o.hasValue=!0,o.value=s},[s]),QE(s),s};Pg.exports=Eg;var JE=Pg.exports,Rc=y.createContext(null),e_=e=>e,ot=()=>{var e=y.useContext(Rc);return e?e.store.dispatch:e_},Ei=()=>{},t_=()=>Ei,r_=(e,t)=>e===t;function H(e){var t=y.useContext(Rc);return JE.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:t_,t?t.store.getState:Ei,t?t.store.getState:Ei,t?e:Ei,r_)}function n_(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function a_(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function i_(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var cf=e=>Array.isArray(e)?e:[e];function o_(e){const t=Array.isArray(e[0])?e[0]:e;return i_(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function s_(e,t){const r=[],{length:n}=e;for(let a=0;a<n;a++)r.push(e[a].apply(null,t));return r}var l_=class{constructor(e){this.value=e}deref(){return this.value}},c_=typeof WeakRef<"u"?WeakRef:l_,u_=0,uf=1;function fi(){return{s:u_,v:void 0,o:null,p:null}}function Cg(e,t={}){let r=fi();const{resultEqualityCheck:n}=t;let a,i=0;function o(){let s=r;const{length:c}=arguments;for(let f=0,m=c;f<m;f++){const h=arguments[f];if(typeof h=="function"||typeof h=="object"&&h!==null){let p=s.o;p===null&&(s.o=p=new WeakMap);const v=p.get(h);v===void 0?(s=fi(),p.set(h,s)):s=v}else{let p=s.p;p===null&&(s.p=p=new Map);const v=p.get(h);v===void 0?(s=fi(),p.set(h,s)):s=v}}const u=s;let d;if(s.s===uf)d=s.v;else if(d=e.apply(null,arguments),i++,n){const f=a?.deref?.()??a;f!=null&&n(f,d)&&(d=f,i!==0&&i--),a=typeof d=="object"&&d!==null||typeof d=="function"?new c_(d):d}return u.s=uf,u.v=d,d}return o.clearCache=()=>{r=fi(),o.resetResultsCount()},o.resultsCount=()=>i,o.resetResultsCount=()=>{i=0},o}function d_(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...a)=>{let i=0,o=0,s,c={},u=a.pop();typeof u=="object"&&(c=u,u=a.pop()),n_(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...c},{memoize:f,memoizeOptions:m=[],argsMemoize:h=Cg,argsMemoizeOptions:p=[]}=d,v=cf(m),g=cf(p),x=o_(a),w=f(function(){return i++,u.apply(null,arguments)},...v),b=h(function(){o++;const k=s_(x,arguments);return s=w.apply(null,k),s},...g);return Object.assign(b,{resultFunc:u,memoizedResultFunc:w,dependencies:x,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>s,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:f,argsMemoize:h})};return Object.assign(n,{withTypes:()=>n}),n}var _=d_(Cg),f_=Object.assign((e,t=_)=>{a_(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(i=>e[i]);return t(n,(...i)=>i.reduce((o,s,c)=>(o[r[c]]=s,o),{}))},{withTypes:()=>f_}),Og={},Tg={},Ig={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,a,i)=>{if(n!==a){const o=t(n),s=t(a);if(o===s&&o===0){if(n<a)return i==="desc"?1:-1;if(n>a)return i==="desc"?-1:1}return i==="desc"?s-o:o-s}return 0};e.compareValues=r})(Ig);var Dg={},Lc={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(Lc);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Lc,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(i,o){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(n.test(i)||!r.test(i))||o!=null&&Object.hasOwn(o,i)}e.isKey=a})(Dg);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ig,r=Dg,n=_o;function a(i,o,s,c){if(i==null)return[];s=c?void 0:s,Array.isArray(i)||(i=Object.values(i)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(s)||(s=s==null?[]:[s]),s=s.map(h=>String(h));const u=(h,p)=>{let v=h;for(let g=0;g<p.length&&v!=null;++g)v=v[p[g]];return v},d=(h,p)=>p==null||h==null?p:typeof h=="object"&&"key"in h?Object.hasOwn(p,h.key)?p[h.key]:u(p,h.path):typeof h=="function"?h(p):Array.isArray(h)?u(p,h):typeof p=="object"?p[h]:p,f=o.map(h=>(Array.isArray(h)&&h.length===1&&(h=h[0]),h==null||typeof h=="function"||Array.isArray(h)||r.isKey(h)?h:{key:h,path:n.toPath(h)}));return i.map(h=>({original:h,criteria:f.map(p=>d(p,h))})).slice().sort((h,p)=>{for(let v=0;v<f.length;v++){const g=t.compareValues(h.criteria[v],p.criteria[v],s[v]);if(g!==0)return g}return 0}).map(h=>h.original)}e.orderBy=a})(Tg);var Mg={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const a=[],i=Math.floor(n),o=(s,c)=>{for(let u=0;u<s.length;u++){const d=s[u];Array.isArray(d)&&c<i?o(d,c+1):a.push(d)}};return o(r,0),a}e.flatten=t})(Mg);var Fc={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zc,r=Bo,n=Tc,a=Uo;function i(o,s,c){return n.isObject(c)&&(typeof s=="number"&&r.isArrayLike(c)&&t.isIndex(s)&&s<c.length||typeof s=="string"&&s in c)?a.eq(c[s],o):!1}e.isIterateeCall=i})(Fc);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Tg,r=Mg,n=Fc;function a(i,...o){const s=o.length;return s>1&&n.isIterateeCall(i,o[0],o[1])?o=[]:s>2&&n.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(i,r.flatten(o),["asc"])}e.sortBy=a})(Og);var m_=Og.sortBy;const Zo=Ur(m_);var $g=e=>e.legend.settings,h_=e=>e.legend.size,p_=e=>e.legend.payload;_([p_,$g],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?Zo(n,r):n});var mi=1;function g_(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=y.useState({height:0,left:0,top:0,width:0}),n=y.useCallback(a=>{if(a!=null){var i=a.getBoundingClientRect(),o={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(o.height-t.height)>mi||Math.abs(o.left-t.left)>mi||Math.abs(o.top-t.top)>mi||Math.abs(o.width-t.width)>mi)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function Ze(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var v_=typeof Symbol=="function"&&Symbol.observable||"@@observable",df=v_,Ts=()=>Math.random().toString(36).substring(7).split("").join("."),y_={INIT:`@@redux/INIT${Ts()}`,REPLACE:`@@redux/REPLACE${Ts()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Ts()}`},Ri=y_;function Bc(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function zg(e,t,r){if(typeof e!="function")throw new Error(Ze(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Ze(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Ze(1));return r(zg)(e,t)}let n=e,a=t,i=new Map,o=i,s=0,c=!1;function u(){o===i&&(o=new Map,i.forEach((g,x)=>{o.set(x,g)}))}function d(){if(c)throw new Error(Ze(3));return a}function f(g){if(typeof g!="function")throw new Error(Ze(4));if(c)throw new Error(Ze(5));let x=!0;u();const w=s++;return o.set(w,g),function(){if(x){if(c)throw new Error(Ze(6));x=!1,u(),o.delete(w),i=null}}}function m(g){if(!Bc(g))throw new Error(Ze(7));if(typeof g.type>"u")throw new Error(Ze(8));if(typeof g.type!="string")throw new Error(Ze(17));if(c)throw new Error(Ze(9));try{c=!0,a=n(a,g)}finally{c=!1}return(i=o).forEach(w=>{w()}),g}function h(g){if(typeof g!="function")throw new Error(Ze(10));n=g,m({type:Ri.REPLACE})}function p(){const g=f;return{subscribe(x){if(typeof x!="object"||x===null)throw new Error(Ze(11));function w(){const j=x;j.next&&j.next(d())}return w(),{unsubscribe:g(w)}},[df](){return this}}}return m({type:Ri.INIT}),{dispatch:m,subscribe:f,getState:d,replaceReducer:h,[df]:p}}function x_(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:Ri.INIT})>"u")throw new Error(Ze(12));if(typeof r(void 0,{type:Ri.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ze(13))})}function Rg(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const o=t[i];typeof e[o]=="function"&&(r[o]=e[o])}const n=Object.keys(r);let a;try{x_(r)}catch(i){a=i}return function(o={},s){if(a)throw a;let c=!1;const u={};for(let d=0;d<n.length;d++){const f=n[d],m=r[f],h=o[f],p=m(h,s);if(typeof p>"u")throw s&&s.type,new Error(Ze(14));u[f]=p,c=c||p!==h}return c=c||n.length!==Object.keys(o).length,c?u:o}}function Li(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function b_(...e){return t=>(r,n)=>{const a=t(r,n);let i=()=>{throw new Error(Ze(15))};const o={getState:a.getState,dispatch:(c,...u)=>i(c,...u)},s=e.map(c=>c(o));return i=Li(...s)(a.dispatch),{...a,dispatch:i}}}function Lg(e){return Bc(e)&&"type"in e&&typeof e.type=="string"}function Fg(e){return({dispatch:r,getState:n})=>a=>i=>typeof i=="function"?i(r,n,e):a(i)}var w_=Fg(),j_=Fg,k_=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Li:Li.apply(null,arguments)};function Dt(e,t){function r(...n){if(t){let a=t(...n);if(!a)throw new Error(jt(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>Lg(n)&&n.type===e,r}var Bg=class ya extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,ya.prototype)}static get[Symbol.species](){return ya}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new ya(...t[0].concat(this)):new ya(...t.concat(this))}};function ff(e){return pr(e)?or(e,()=>{}):e}function hi(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function S_(e){return typeof e=="boolean"}var N_=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:i=!0}=t??{};let o=new Bg;return r&&(S_(r)?o.push(w_):o.push(j_(r.extraArgument))),o},P_="RTK_autoBatch",mf=e=>t=>{setTimeout(t,e)},E_=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let a=!0,i=!1,o=!1;const s=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:mf(10):e.type==="callback"?e.queueNotification:mf(e.timeout),u=()=>{o=!1,i&&(i=!1,s.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const f=()=>a&&d(),m=n.subscribe(f);return s.add(d),()=>{m(),s.delete(d)}},dispatch(d){try{return a=!d?.meta?.[P_],i=!a,i&&(o||(o=!0,c(u))),n.dispatch(d)}finally{a=!0}}})},__=e=>function(r){const{autoBatch:n=!0}=r??{};let a=new Bg(e);return n&&a.push(E_(typeof n=="object"?n:void 0)),a};function A_(e){const t=N_(),{reducer:r=void 0,middleware:n,devTools:a=!0,preloadedState:i=void 0,enhancers:o=void 0}=e||{};let s;if(typeof r=="function")s=r;else if(Bc(r))s=Rg(r);else throw new Error(jt(1));let c;typeof n=="function"?c=n(t):c=t();let u=Li;a&&(u=k_({trace:!1,...typeof a=="object"&&a}));const d=b_(...c),f=__(d);let m=typeof o=="function"?o(f):f();const h=u(...m);return zg(s,i,h)}function Ug(e){const t={},r=[];let n;const a={addCase(i,o){const s=typeof i=="string"?i:i.type;if(!s)throw new Error(jt(28));if(s in t)throw new Error(jt(29));return t[s]=o,a},addMatcher(i,o){return r.push({matcher:i,reducer:o}),a},addDefaultCase(i){return n=i,a}};return e(a),[t,r,n]}function C_(e){return typeof e=="function"}function O_(e,t){let[r,n,a]=Ug(t),i;if(C_(e))i=()=>ff(e());else{const s=ff(e);i=()=>s}function o(s=i(),c){let u=[r[c.type],...n.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[a]),u.reduce((d,f)=>{if(f)if(pn(d)){const h=f(d,c);return h===void 0?d:h}else{if(pr(d))return or(d,m=>f(m,c));{const m=f(d,c);if(m===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return m}}return d},s)}return o.getInitialState=i,o}var T_="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",I_=(e=21)=>{let t="",r=e;for(;r--;)t+=T_[Math.random()*64|0];return t},D_=Symbol.for("rtk-slice-createasyncthunk");function M_(e,t){return`${e}/${t}`}function $_({creators:e}={}){const t=e?.asyncThunk?.[D_];return function(n){const{name:a,reducerPath:i=a}=n;if(!a)throw new Error(jt(11));const o=(typeof n.reducers=="function"?n.reducers(R_()):n.reducers)||{},s=Object.keys(o),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(b,j){const k=typeof b=="string"?b:b.type;if(!k)throw new Error(jt(12));if(k in c.sliceCaseReducersByType)throw new Error(jt(13));return c.sliceCaseReducersByType[k]=j,u},addMatcher(b,j){return c.sliceMatchers.push({matcher:b,reducer:j}),u},exposeAction(b,j){return c.actionCreators[b]=j,u},exposeCaseReducer(b,j){return c.sliceCaseReducersByName[b]=j,u}};s.forEach(b=>{const j=o[b],k={reducerName:b,type:M_(a,b),createNotation:typeof n.reducers=="function"};F_(j)?U_(k,j,u,t):L_(k,j,u)});function d(){const[b={},j=[],k=void 0]=typeof n.extraReducers=="function"?Ug(n.extraReducers):[n.extraReducers],S={...b,...c.sliceCaseReducersByType};return O_(n.initialState,N=>{for(let C in S)N.addCase(C,S[C]);for(let C of c.sliceMatchers)N.addMatcher(C.matcher,C.reducer);for(let C of j)N.addMatcher(C.matcher,C.reducer);k&&N.addDefaultCase(k)})}const f=b=>b,m=new Map,h=new WeakMap;let p;function v(b,j){return p||(p=d()),p(b,j)}function g(){return p||(p=d()),p.getInitialState()}function x(b,j=!1){function k(N){let C=N[b];return typeof C>"u"&&j&&(C=hi(h,k,g)),C}function S(N=f){const C=hi(m,j,()=>new WeakMap);return hi(C,N,()=>{const T={};for(const[$,O]of Object.entries(n.selectors??{}))T[$]=z_(O,N,()=>hi(h,N,g),j);return T})}return{reducerPath:b,getSelectors:S,get selectors(){return S(k)},selectSlice:k}}const w={name:a,reducer:v,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:g,...x(i),injectInto(b,{reducerPath:j,...k}={}){const S=j??i;return b.inject({reducerPath:S,reducer:v},k),{...w,...x(S,!0)}}};return w}}function z_(e,t,r,n){function a(i,...o){let s=t(i);return typeof s>"u"&&n&&(s=r()),e(s,...o)}return a.unwrapped=e,a}var zt=$_();function R_(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function L_({type:e,reducerName:t,createNotation:r},n,a){let i,o;if("reducer"in n){if(r&&!B_(n))throw new Error(jt(17));i=n.reducer,o=n.prepare}else i=n;a.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,o?Dt(e,o):Dt(e))}function F_(e){return e._reducerDefinitionType==="asyncThunk"}function B_(e){return e._reducerDefinitionType==="reducerWithPrepare"}function U_({type:e,reducerName:t},r,n,a){if(!a)throw new Error(jt(18));const{payloadCreator:i,fulfilled:o,pending:s,rejected:c,settled:u,options:d}=r,f=a(e,i,d);n.exposeAction(t,f),o&&n.addCase(f.fulfilled,o),s&&n.addCase(f.pending,s),c&&n.addCase(f.rejected,c),u&&n.addMatcher(f.settled,u),n.exposeCaseReducer(t,{fulfilled:o||pi,pending:s||pi,rejected:c||pi,settled:u||pi})}function pi(){}var W_="task",Wg="listener",Hg="completed",Uc="cancelled",H_=`task-${Uc}`,q_=`task-${Hg}`,gl=`${Wg}-${Uc}`,Z_=`${Wg}-${Hg}`,Ko=class{constructor(e){Bt(this,"name","TaskAbortError");Bt(this,"message");this.code=e,this.message=`${W_} ${Uc} (reason: ${e})`}},Wc=(e,t)=>{if(typeof e!="function")throw new TypeError(jt(32))},Fi=()=>{},qg=(e,t=Fi)=>(e.catch(t),e),Zg=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),sn=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},ln=e=>{if(e.aborted){const{reason:t}=e;throw new Ko(t)}};function Kg(e,t){let r=Fi;return new Promise((n,a)=>{const i=()=>a(new Ko(e.reason));if(e.aborted){i();return}r=Zg(e,i),t.finally(()=>r()).then(n,a)}).finally(()=>{r=Fi})}var K_=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof Ko?"cancelled":"rejected",error:r}}finally{t?.()}},Bi=e=>t=>qg(Kg(e,t).then(r=>(ln(e),r))),Gg=e=>{const t=Bi(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:zn}=Object,hf={},Go="listenerMiddleware",G_=(e,t)=>{const r=n=>Zg(e,()=>sn(n,e.reason));return(n,a)=>{Wc(n);const i=new AbortController;r(i);const o=K_(async()=>{ln(e),ln(i.signal);const s=await n({pause:Bi(i.signal),delay:Gg(i.signal),signal:i.signal});return ln(i.signal),s},()=>sn(i,q_));return a?.autoJoin&&t.push(o.catch(Fi)),{result:Bi(e)(o),cancel(){sn(i,H_)}}}},V_=(e,t)=>{const r=async(n,a)=>{ln(t);let i=()=>{};const s=[new Promise((c,u)=>{let d=e({predicate:n,effect:(f,m)=>{m.unsubscribe(),c([f,m.getState(),m.getOriginalState()])}});i=()=>{d(),u()}})];a!=null&&s.push(new Promise(c=>setTimeout(c,a,null)));try{const c=await Kg(t,Promise.race(s));return ln(t),c}finally{i()}};return(n,a)=>qg(r(n,a))},Vg=e=>{let{type:t,actionCreator:r,matcher:n,predicate:a,effect:i}=e;if(t)a=Dt(t).match;else if(r)t=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(jt(21));return Wc(i),{predicate:a,type:t,effect:i}},Yg=zn(e=>{const{type:t,predicate:r,effect:n}=Vg(e);return{id:I_(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(jt(22))}}},{withTypes:()=>Yg}),pf=(e,t)=>{const{type:r,effect:n,predicate:a}=Vg(t);return Array.from(e.values()).find(i=>(typeof r=="string"?i.type===r:i.predicate===a)&&i.effect===n)},vl=e=>{e.pending.forEach(t=>{sn(t,gl)})},Y_=e=>()=>{e.forEach(vl),e.clear()},gf=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},Xg=zn(Dt(`${Go}/add`),{withTypes:()=>Xg}),X_=Dt(`${Go}/removeAll`),Qg=zn(Dt(`${Go}/remove`),{withTypes:()=>Qg}),Q_=(...e)=>{console.error(`${Go}/error`,...e)},Ua=(e={})=>{const t=new Map,{extra:r,onError:n=Q_}=e;Wc(n);const a=d=>(d.unsubscribe=()=>t.delete(d.id),t.set(d.id,d),f=>{d.unsubscribe(),f?.cancelActive&&vl(d)}),i=d=>{const f=pf(t,d)??Yg(d);return a(f)};zn(i,{withTypes:()=>i});const o=d=>{const f=pf(t,d);return f&&(f.unsubscribe(),d.cancelActive&&vl(f)),!!f};zn(o,{withTypes:()=>o});const s=async(d,f,m,h)=>{const p=new AbortController,v=V_(i,p.signal),g=[];try{d.pending.add(p),await Promise.resolve(d.effect(f,zn({},m,{getOriginalState:h,condition:(x,w)=>v(x,w).then(Boolean),take:v,delay:Gg(p.signal),pause:Bi(p.signal),extra:r,signal:p.signal,fork:G_(p.signal,g),unsubscribe:d.unsubscribe,subscribe:()=>{t.set(d.id,d)},cancelActiveListeners:()=>{d.pending.forEach((x,w,b)=>{x!==p&&(sn(x,gl),b.delete(x))})},cancel:()=>{sn(p,gl),d.pending.delete(p)},throwIfCancelled:()=>{ln(p.signal)}})))}catch(x){x instanceof Ko||gf(n,x,{raisedBy:"effect"})}finally{await Promise.all(g),sn(p,Z_),d.pending.delete(p)}},c=Y_(t);return{middleware:d=>f=>m=>{if(!Lg(m))return f(m);if(Xg.match(m))return i(m.payload);if(X_.match(m)){c();return}if(Qg.match(m))return o(m.payload);let h=d.getState();const p=()=>{if(h===hf)throw new Error(jt(23));return h};let v;try{if(v=f(m),t.size>0){const g=d.getState(),x=Array.from(t.values());for(const w of x){let b=!1;try{b=w.predicate(m,g,h)}catch(j){b=!1,gf(n,j,{raisedBy:"predicate"})}b&&s(w,m,d,p)}}}finally{h=hf}return v},startListening:i,stopListening:o,clearListeners:c}};function jt(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var J_={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Jg=zt({name:"chartLayout",initialState:J_,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:eA,setLayout:tA,setChartSize:rA,setScale:nA}=Jg.actions,aA=Jg.reducer;function vf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function yf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vf(Object(r),!0).forEach(function(n){iA(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vf(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iA(e,t,r){return(t=oA(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oA(e){var t=sA(e,"string");return typeof t=="symbol"?t:t+""}function sA(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ui=Math.PI/180,lA=e=>e*180/Math.PI,Ge=(e,t,r,n)=>({x:e+Math.cos(-Ui*n)*r,y:t+Math.sin(-Ui*n)*r}),cA=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},uA=(e,t)=>{var{x:r,y:n}=e,{x:a,y:i}=t;return Math.sqrt((r-a)**2+(n-i)**2)},dA=(e,t)=>{var{x:r,y:n}=e,{cx:a,cy:i}=t,o=uA({x:r,y:n},{x:a,y:i});if(o<=0)return{radius:o,angle:0};var s=(r-a)/o,c=Math.acos(s);return n>i&&(c=2*Math.PI-c),{radius:o,angle:lA(c),angleInRadian:c}},fA=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),a=Math.floor(r/360),i=Math.min(n,a);return{startAngle:t-i*360,endAngle:r-i*360}},mA=(e,t)=>{var{startAngle:r,endAngle:n}=t,a=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(a,i);return e+o*360},hA=(e,t)=>{var{x:r,y:n}=e,{radius:a,angle:i}=dA({x:r,y:n},t),{innerRadius:o,outerRadius:s}=t;if(a<o||a>s||a===0)return null;var{startAngle:c,endAngle:u}=fA(t),d=i,f;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;f=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=c}return f?yf(yf({},t),{},{radius:a,angle:mA(d,t)}):null};function xf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function At(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xf(Object(r),!0).forEach(function(n){pA(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xf(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pA(e,t,r){return(t=gA(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gA(e){var t=vA(e,"string");return typeof t=="symbol"?t:t+""}function vA(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kt(e,t,r){return _e(e)||_e(t)?r:rr(t)?vn(e,t,r):typeof t=="function"?t(e):r}var yA=(e,t,r,n,a)=>{var i,o=-1,s=(i=t?.length)!==null&&i!==void 0?i:0;if(s<=1||e==null)return 0;if(n==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var c=0;c<s;c++){var u=c>0?r[c-1].coordinate:r[s-1].coordinate,d=r[c].coordinate,f=c>=s-1?r[0].coordinate:r[c+1].coordinate,m=void 0;if(Ct(d-u)!==Ct(f-d)){var h=[];if(Ct(f-d)===Ct(a[1]-a[0])){m=f;var p=d+a[1]-a[0];h[0]=Math.min(p,(p+u)/2),h[1]=Math.max(p,(p+u)/2)}else{m=u;var v=f+a[1]-a[0];h[0]=Math.min(d,(v+d)/2),h[1]=Math.max(d,(v+d)/2)}var g=[Math.min(d,(m+d)/2),Math.max(d,(m+d)/2)];if(e>g[0]&&e<=g[1]||e>=h[0]&&e<=h[1]){({index:o}=r[c]);break}}else{var x=Math.min(u,f),w=Math.max(u,f);if(e>(x+d)/2&&e<=(w+d)/2){({index:o}=r[c]);break}}}else if(t){for(var b=0;b<s;b++)if(b===0&&e<=(t[b].coordinate+t[b+1].coordinate)/2||b>0&&b<s-1&&e>(t[b].coordinate+t[b-1].coordinate)/2&&e<=(t[b].coordinate+t[b+1].coordinate)/2||b===s-1&&e>(t[b].coordinate+t[b-1].coordinate)/2){({index:o}=t[b]);break}}return o},xA=(e,t,r)=>{if(t&&r){var{width:n,height:a}=r,{align:i,verticalAlign:o,layout:s}=t;if((s==="vertical"||s==="horizontal"&&o==="middle")&&i!=="center"&&U(e[i]))return At(At({},e),{},{[i]:e[i]+(n||0)});if((s==="horizontal"||s==="vertical"&&i==="center")&&o!=="middle"&&U(e[o]))return At(At({},e),{},{[o]:e[o]+(a||0)})}return e},Wr=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",e0=(e,t,r,n)=>{if(n)return e.map(s=>s.coordinate);var a,i,o=e.map(s=>(s.coordinate===t&&(a=!0),s.coordinate===r&&(i=!0),s.coordinate));return a||o.push(t),i||o.push(r),o},t0=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:a,range:i,scale:o,realScaleType:s,isCategorical:c,categoricalDomain:u,tickCount:d,ticks:f,niceTicks:m,axisType:h}=e;if(!o)return null;var p=s==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,v=a==="category"&&o.bandwidth?o.bandwidth()/p:0;if(v=h==="angleAxis"&&i&&i.length>=2?Ct(i[0]-i[1])*2*v:v,f||m){var g=(f||m||[]).map((x,w)=>{var b=n?n.indexOf(x):x;return{coordinate:o(b)+v,value:x,offset:v,index:w}});return g.filter(x=>!It(x.coordinate))}return c&&u?u.map((x,w)=>({coordinate:o(x)+v,value:x,index:w,offset:v})):o.ticks&&d!=null?o.ticks(d).map((x,w)=>({coordinate:o(x)+v,value:x,offset:v,index:w})):o.domain().map((x,w)=>({coordinate:o(x)+v,value:n?n[x]:x,index:w,offset:v}))},bf=1e-4,bA=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),a=Math.min(n[0],n[1])-bf,i=Math.max(n[0],n[1])+bf,o=e(t[0]),s=e(t[r-1]);(o<a||o>i||s<a||s>i)&&e.domain([t[0],t[r-1]])}},wA=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,i=0,o=0;o<t;++o){var s=It(e[o][r][1])?e[o][r][0]:e[o][r][1];s>=0?(e[o][r][0]=a,e[o][r][1]=a+s,a=e[o][r][1]):(e[o][r][0]=i,e[o][r][1]=i+s,i=e[o][r][1])}},jA=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,i=0;i<t;++i){var o=It(e[i][r][1])?e[i][r][0]:e[i][r][1];o>=0?(e[i][r][0]=a,e[i][r][1]=a+o,a=e[i][r][1]):(e[i][r][0]=0,e[i][r][1]=0)}},kA={sign:wA,expand:AE,none:Fn,silhouette:CE,wiggle:OE,positive:jA},SA=(e,t,r)=>{var n=kA[r],a=_E().keys(t).value((i,o)=>+kt(i,o,0)).order(pl).offset(n);return a(e)};function NA(e){return e==null?void 0:String(e)}function wf(e){var{axis:t,ticks:r,bandSize:n,entry:a,index:i,dataKey:o}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!_e(a[t.dataKey])){var s=Zp(r,"value",a[t.dataKey]);if(s)return s.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var c=kt(a,_e(o)?t.dataKey:o);return _e(c)?null:t.scale(c)}var PA=e=>{var t=e.flat(2).filter(U);return[Math.min(...t),Math.max(...t)]},EA=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],_A=(e,t,r)=>{if(e!=null)return EA(Object.keys(e).reduce((n,a)=>{var i=e[a],{stackedData:o}=i,s=o.reduce((c,u)=>{var d=PA(u.slice(t,r+1));return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);return[Math.min(s[0],n[0]),Math.max(s[1],n[1])]},[1/0,-1/0]))},jf=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,kf=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,yl=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var a=Zo(t,d=>d.coordinate),i=1/0,o=1,s=a.length;o<s;o++){var c=a[o],u=a[o-1];i=Math.min((c.coordinate||0)-(u.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0};function Sf(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:a,name:i}=e;return At(At({},t),{},{dataKey:r,payload:n,value:a,name:i})}function r0(e,t){if(e)return String(e);if(typeof t=="string")return t}function AA(e,t,r,n,a){if(r==="horizontal"||r==="vertical"){var i=e>=a.left&&e<=a.left+a.width&&t>=a.top&&t<=a.top+a.height;return i?{x:e,y:t}:null}return n?hA({x:e,y:t},n):null}var CA=(e,t,r,n)=>{var a=t.find(u=>u&&u.index===r);if(a){if(e==="horizontal")return{x:a.coordinate,y:n.y};if(e==="vertical")return{x:n.x,y:a.coordinate};if(e==="centric"){var i=a.coordinate,{radius:o}=n;return At(At(At({},n),Ge(n.cx,n.cy,o,i)),{},{angle:i,radius:o})}var s=a.coordinate,{angle:c}=n;return At(At(At({},n),Ge(n.cx,n.cy,s,c)),{},{angle:c,radius:s})}return{x:0,y:0}},OA=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,jr=e=>e.layout.width,kr=e=>e.layout.height,TA=e=>e.layout.scale,n0=e=>e.layout.margin,Hc=_(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),qc=_(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),IA="data-recharts-item-index",DA="data-recharts-item-data-key",Vo=60;function Nf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Or(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Nf(Object(r),!0).forEach(function(n){MA(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nf(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MA(e,t,r){return(t=$A(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $A(e){var t=zA(e,"string");return typeof t=="symbol"?t:t+""}function zA(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var RA=e=>e.brush.height,Ye=_([jr,kr,n0,RA,Hc,qc,$g,h_],(e,t,r,n,a,i,o,s)=>{var c=i.reduce((p,v)=>{var{orientation:g}=v;if(!v.mirror&&!v.hide){var x=typeof v.width=="number"?v.width:Vo;return Or(Or({},p),{},{[g]:p[g]+x})}return p},{left:r.left||0,right:r.right||0}),u=a.reduce((p,v)=>{var{orientation:g}=v;return!v.mirror&&!v.hide?Or(Or({},p),{},{[g]:vn(p,"".concat(g))+v.height}):p},{top:r.top||0,bottom:r.bottom||0}),d=Or(Or({},u),c),f=d.bottom;d.bottom+=n,d=xA(d,o,s);var m=e-d.left-d.right,h=t-d.top-d.bottom;return Or(Or({brushBottom:f},d),{},{width:Math.max(m,0),height:Math.max(h,0)})}),LA=_(Ye,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),a0=_(jr,kr,(e,t)=>({x:0,y:0,width:e,height:t})),FA=y.createContext(null),ft=()=>y.useContext(FA)!=null,Yo=e=>e.brush,Xo=_([Yo,Ye,n0],(e,t,r)=>({height:e.height,x:U(e.x)?e.x:t.left,y:U(e.y)?e.y:t.top+t.height+t.brushBottom-(r?.bottom||0),width:U(e.width)?e.width:t.width})),Zc=()=>{var e,t=ft(),r=H(LA),n=H(Xo),a=(e=H(Yo))===null||e===void 0?void 0:e.padding;return!t||!n||!a?r:{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}},BA={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},i0=()=>{var e;return(e=H(Ye))!==null&&e!==void 0?e:BA},o0=()=>H(jr),s0=()=>H(kr),Ne=e=>e.layout.layoutType,Kc=()=>H(Ne),UA={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},l0=zt({name:"legend",initialState:UA,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=fr(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:gR,setLegendSettings:vR,addLegendPayload:WA,removeLegendPayload:HA}=l0.actions,qA=l0.reducer;function xl(){return xl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xl.apply(null,arguments)}function Pf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Is(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Pf(Object(r),!0).forEach(function(n){ZA(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pf(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ZA(e,t,r){return(t=KA(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KA(e){var t=GA(e,"string");return typeof t=="symbol"?t:t+""}function GA(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function VA(e){return Array.isArray(e)&&rr(e[0])&&rr(e[1])?e.join(" ~ "):e}var YA=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:a={},payload:i,formatter:o,itemSorter:s,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:f,accessibilityLayer:m=!1}=e,h=()=>{if(i&&i.length){var k={padding:0,margin:0},S=(s?Zo(i,s):i).map((N,C)=>{if(N.type==="none")return null;var T=N.formatter||o||VA,{value:$,name:O}=N,E=$,F=O;if(T){var Z=T($,O,N,C,i);if(Array.isArray(Z))[E,F]=Z;else if(Z!=null)E=Z;else return null}var Y=Is({display:"block",paddingTop:4,paddingBottom:4,color:N.color||"#000"},n);return y.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(C),style:Y},rr(F)?y.createElement("span",{className:"recharts-tooltip-item-name"},F):null,rr(F)?y.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,y.createElement("span",{className:"recharts-tooltip-item-value"},E),y.createElement("span",{className:"recharts-tooltip-item-unit"},N.unit||""))});return y.createElement("ul",{className:"recharts-tooltip-item-list",style:k},S)}return null},p=Is({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),v=Is({margin:0},a),g=!_e(d),x=g?d:"",w=fe("recharts-default-tooltip",c),b=fe("recharts-tooltip-label",u);g&&f&&i!==void 0&&i!==null&&(x=f(d,i));var j=m?{role:"status","aria-live":"assertive"}:{};return y.createElement("div",xl({className:w,style:p},j),y.createElement("p",{className:b,style:v},y.isValidElement(x)?x:"".concat(x)),h())},da="recharts-tooltip-wrapper",XA={visibility:"hidden"};function QA(e){var{coordinate:t,translateX:r,translateY:n}=e;return fe(da,{["".concat(da,"-right")]:U(r)&&t&&U(t.x)&&r>=t.x,["".concat(da,"-left")]:U(r)&&t&&U(t.x)&&r<t.x,["".concat(da,"-bottom")]:U(n)&&t&&U(t.y)&&n>=t.y,["".concat(da,"-top")]:U(n)&&t&&U(t.y)&&n<t.y})}function Ef(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:a,position:i,reverseDirection:o,tooltipDimension:s,viewBox:c,viewBoxDimension:u}=e;if(i&&U(i[n]))return i[n];var d=r[n]-s-(a>0?a:0),f=r[n]+a;if(t[n])return o[n]?d:f;var m=c[n];if(m==null)return 0;if(o[n]){var h=d,p=m;return h<p?Math.max(f,m):Math.max(d,m)}if(u==null)return 0;var v=f+s,g=m+u;return v>g?Math.max(d,m):Math.max(f,m)}function JA(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function e2(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:a,reverseDirection:i,tooltipBox:o,useTranslate3d:s,viewBox:c}=e,u,d,f;return o.height>0&&o.width>0&&r?(d=Ef({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=Ef({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=JA({translateX:d,translateY:f,useTranslate3d:s})):u=XA,{cssProperties:u,cssClasses:QA({translateX:d,translateY:f,coordinate:r})}}function _f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function gi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_f(Object(r),!0).forEach(function(n){bl(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_f(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bl(e,t,r){return(t=t2(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function t2(e){var t=r2(e,"string");return typeof t=="symbol"?t:t+""}function r2(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class n2 extends y.PureComponent{constructor(){super(...arguments),bl(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),bl(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,a,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(a=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:a,children:i,coordinate:o,hasPayload:s,isAnimationActive:c,offset:u,position:d,reverseDirection:f,useTranslate3d:m,viewBox:h,wrapperStyle:p,lastBoundingBox:v,innerRef:g,hasPortalFromProps:x}=this.props,{cssClasses:w,cssProperties:b}=e2({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:u,position:d,reverseDirection:f,tooltipBox:{height:v.height,width:v.width},useTranslate3d:m,viewBox:h}),j=x?{}:gi(gi({transition:c&&t?"transform ".concat(n,"ms ").concat(a):void 0},b),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&s?"visible":"hidden",position:"absolute",top:0,left:0}),k=gi(gi({},j),{},{visibility:!this.state.dismissed&&t&&s?"visible":"hidden"},p);return y.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:w,style:k,ref:g},i)}}var a2=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Wa={isSsr:a2()},c0=()=>H(e=>e.rootProps.accessibilityLayer);function Zt(e){return Number.isFinite(e)}function Wi(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function wl(){return wl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wl.apply(null,arguments)}function Af(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Cf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Af(Object(r),!0).forEach(function(n){i2(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Af(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function i2(e,t,r){return(t=o2(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o2(e){var t=s2(e,"string");return typeof t=="symbol"?t:t+""}function s2(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Of={curveBasisClosed:vE,curveBasisOpen:yE,curveBasis:gE,curveBumpX:hE,curveBumpY:pE,curveLinearClosed:xE,curveLinear:Lo,curveMonotoneX:bE,curveMonotoneY:wE,curveNatural:jE,curveStep:kE,curveStepAfter:NE,curveStepBefore:SE},vi=e=>Zt(e.x)&&Zt(e.y),fa=e=>e.x,ma=e=>e.y,l2=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(Ec(e));return(r==="curveMonotone"||r==="curveBump")&&t?Of["".concat(r).concat(t==="vertical"?"Y":"X")]:Of[r]||Lo},c2=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:a,connectNulls:i=!1}=e,o=l2(t,a),s=i?r.filter(vi):r,c;if(Array.isArray(n)){var u=i?n.filter(f=>vi(f)):n,d=s.map((f,m)=>Cf(Cf({},f),{},{base:u[m]}));return a==="vertical"?c=di().y(ma).x1(fa).x0(f=>f.base.x):c=di().x(fa).y1(ma).y0(f=>f.base.y),c.defined(vi).curve(o),c(d)}return a==="vertical"&&U(n)?c=di().y(ma).x1(fa).x0(n):U(n)?c=di().x(fa).y1(ma).y0(n):c=rg().x(fa).y(ma),c.defined(vi).curve(o),c(s)},u0=e=>{var{className:t,points:r,path:n,pathRef:a}=e;if((!r||!r.length)&&!n)return null;var i=r&&r.length?c2(e):n;return y.createElement("path",wl({},ye(e,!1),Ac(e),{className:fe("recharts-curve",t),d:i===null?void 0:i,ref:a}))},u2=["x","y","top","left","width","height","className"];function jl(){return jl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jl.apply(null,arguments)}function Tf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function d2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Tf(Object(r),!0).forEach(function(n){f2(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tf(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function f2(e,t,r){return(t=m2(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m2(e){var t=h2(e,"string");return typeof t=="symbol"?t:t+""}function h2(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function p2(e,t){if(e==null)return{};var r,n,a=g2(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function g2(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var v2=(e,t,r,n,a,i)=>"M".concat(e,",").concat(a,"v").concat(n,"M").concat(i,",").concat(t,"h").concat(r),y2=e=>{var{x:t=0,y:r=0,top:n=0,left:a=0,width:i=0,height:o=0,className:s}=e,c=p2(e,u2),u=d2({x:t,y:r,top:n,left:a,width:i,height:o},c);return!U(t)||!U(r)||!U(i)||!U(o)||!U(n)||!U(a)?null:y.createElement("path",jl({},ye(u,!0),{className:fe("recharts-cross",s),d:v2(t,r,i,o,n,a)}))};function x2(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function If(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function b2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?If(Object(r),!0).forEach(function(n){w2(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):If(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function w2(e,t,r){return(t=j2(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j2(e){var t=k2(e,"string");return typeof t=="symbol"?t:t+""}function k2(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bn(e,t){var r=b2({},e),n=t,a=Object.keys(t),i=a.reduce((o,s)=>(o[s]===void 0&&n[s]!==void 0&&(o[s]=n[s]),o),r);return i}var d0={},f0={},m0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(!r||typeof r!="object")return!1;const n=Object.getPrototypeOf(r);return n===null||n===Object.prototype||Object.getPrototypeOf(n)===null?Object.prototype.toString.call(r)==="[object Object]":!1}e.isPlainObject=t})(m0);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=m0,r=$c,n=Wo,a=Ho,i=Uo;function o(u,d,f){return s(u,d,void 0,void 0,void 0,void 0,f)}function s(u,d,f,m,h,p,v){const g=v(u,d,f,m,h,p);if(g!==void 0)return g;if(typeof u==typeof d)switch(typeof u){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return u===d;case"number":return u===d||Object.is(u,d);case"function":return u===d;case"object":return c(u,d,p,v)}return c(u,d,p,v)}function c(u,d,f,m){if(Object.is(u,d))return!0;let h=n.getTag(u),p=n.getTag(d);if(h===a.argumentsTag&&(h=a.objectTag),p===a.argumentsTag&&(p=a.objectTag),h!==p)return!1;switch(h){case a.stringTag:return u.toString()===d.toString();case a.numberTag:{const x=u.valueOf(),w=d.valueOf();return i.eq(x,w)}case a.booleanTag:case a.dateTag:case a.symbolTag:return Object.is(u.valueOf(),d.valueOf());case a.regexpTag:return u.source===d.source&&u.flags===d.flags;case a.functionTag:return u===d}f=f??new Map;const v=f.get(u),g=f.get(d);if(v!=null&&g!=null)return v===d;f.set(u,d),f.set(d,u);try{switch(h){case a.mapTag:{if(u.size!==d.size)return!1;for(const[x,w]of u.entries())if(!d.has(x)||!s(w,d.get(x),x,u,d,f,m))return!1;return!0}case a.setTag:{if(u.size!==d.size)return!1;const x=Array.from(u.values()),w=Array.from(d.values());for(let b=0;b<x.length;b++){const j=x[b],k=w.findIndex(S=>s(j,S,void 0,u,d,f,m));if(k===-1)return!1;w.splice(k,1)}return!0}case a.arrayTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:case a.bigUint64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.bigInt64ArrayTag:case a.float32ArrayTag:case a.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(u)!==Buffer.isBuffer(d)||u.length!==d.length)return!1;for(let x=0;x<u.length;x++)if(!s(u[x],d[x],x,u,d,f,m))return!1;return!0}case a.arrayBufferTag:return u.byteLength!==d.byteLength?!1:c(new Uint8Array(u),new Uint8Array(d),f,m);case a.dataViewTag:return u.byteLength!==d.byteLength||u.byteOffset!==d.byteOffset?!1:c(new Uint8Array(u),new Uint8Array(d),f,m);case a.errorTag:return u.name===d.name&&u.message===d.message;case a.objectTag:{if(!(c(u.constructor,d.constructor,f,m)||t.isPlainObject(u)&&t.isPlainObject(d)))return!1;const w=[...Object.keys(u),...r.getSymbols(u)],b=[...Object.keys(d),...r.getSymbols(d)];if(w.length!==b.length)return!1;for(let j=0;j<w.length;j++){const k=w[j],S=u[k];if(!Object.hasOwn(d,k))return!1;const N=d[k];if(!s(S,N,k,u,d,f,m))return!1}return!0}default:return!1}}finally{f.delete(u),f.delete(d)}}e.isEqualWith=o})(f0);var h0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(){}e.noop=t})(h0);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=f0,r=h0;function n(a,i){return t.isEqualWith(a,i,r.noop)}e.isEqual=n})(d0);var S2=d0.isEqual;const N2=Ur(S2);function P2(e){var t={},r=()=>null,n=!1,a=null,i=o=>{if(!n){if(Array.isArray(o)){if(!o.length)return;var s=o,[c,...u]=s;if(typeof c=="number"){a=e.setTimeout(i.bind(null,u),c);return}i(c),a=e.setTimeout(i.bind(null,u));return}typeof o=="object"&&(t=o,r(t)),typeof o=="function"&&o()}};return{stop:()=>{n=!0},start:o=>{n=!1,a&&(a(),a=null),i(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>e}}var Hi=1e-4,p0=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],g0=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),Df=(e,t)=>r=>{var n=p0(e,t);return g0(n,r)},E2=(e,t)=>r=>{var n=p0(e,t),a=[...n.map((i,o)=>i*o).slice(1),0];return g0(a,r)},Mf=function(){for(var t,r,n,a,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];if(o.length===1)switch(o[0]){case"linear":[t,n,r,a]=[0,0,1,1];break;case"ease":[t,n,r,a]=[.25,.1,.25,1];break;case"ease-in":[t,n,r,a]=[.42,0,1,1];break;case"ease-out":[t,n,r,a]=[.42,0,.58,1];break;case"ease-in-out":[t,n,r,a]=[0,0,.58,1];break;default:{var c=o[0].split("(");c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4&&([t,n,r,a]=c[1].split(")")[0].split(",").map(p=>parseFloat(p)))}}else o.length===4&&([t,n,r,a]=o);var u=Df(t,r),d=Df(n,a),f=E2(t,r),m=p=>p>1?1:p<0?0:p,h=p=>{for(var v=p>1?1:p,g=v,x=0;x<8;++x){var w=u(g)-v,b=f(g);if(Math.abs(w-v)<Hi||b<Hi)return d(g);g=m(g-w/b)}return d(g)};return h.isStepper=!1,h},_2=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:a=17}=t,i=(o,s,c)=>{var u=-(o-s)*r,d=c*n,f=c+(u-d)*a/1e3,m=c*a/1e3+o;return Math.abs(m-s)<Hi&&Math.abs(f)<Hi?[s,0]:[m,f]};return i.isStepper=!0,i.dt=a,i},A2=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Mf(e);case"spring":return _2();default:if(e.split("(")[0]==="cubic-bezier")return Mf(e)}return typeof e=="function"?e:null};function $f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function zf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$f(Object(r),!0).forEach(function(n){C2(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$f(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function C2(e,t,r){return(t=O2(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O2(e){var t=T2(e,"string");return typeof t=="symbol"?t:t+""}function T2(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var I2=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),D2=(e,t,r)=>e.map(n=>"".concat(I2(n)," ").concat(t,"ms ").concat(r)).join(","),M2=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(a=>n.includes(a))),Ca=(e,t)=>Object.keys(t).reduce((r,n)=>zf(zf({},r),{},{[n]:e(n,t[n])}),{});function Rf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ke(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Rf(Object(r),!0).forEach(function(n){$2(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rf(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $2(e,t,r){return(t=z2(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function z2(e){var t=R2(e,"string");return typeof t=="symbol"?t:t+""}function R2(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qi=(e,t,r)=>e+(t-e)*r,kl=e=>{var{from:t,to:r}=e;return t!==r},v0=(e,t,r)=>{var n=Ca((a,i)=>{if(kl(i)){var[o,s]=e(i.from,i.to,i.velocity);return Ke(Ke({},i),{},{from:o,velocity:s})}return i},t);return r<1?Ca((a,i)=>kl(i)?Ke(Ke({},i),{},{velocity:qi(i.velocity,n[a].velocity,r),from:qi(i.from,n[a].from,r)}):i,t):v0(e,n,r-1)};function L2(e,t,r,n,a,i){var o,s=n.reduce((m,h)=>Ke(Ke({},m),{},{[h]:{from:e[h],velocity:0,to:t[h]}}),{}),c=()=>Ca((m,h)=>h.from,s),u=()=>!Object.values(s).filter(kl).length,d=null,f=m=>{o||(o=m);var h=m-o,p=h/r.dt;s=v0(r,s,p),a(Ke(Ke(Ke({},e),t),c())),o=m,u()||(d=i.setTimeout(f))};return()=>(d=i.setTimeout(f),()=>{d()})}function F2(e,t,r,n,a,i,o){var s=null,c=a.reduce((f,m)=>Ke(Ke({},f),{},{[m]:[e[m],t[m]]}),{}),u,d=f=>{u||(u=f);var m=(f-u)/n,h=Ca((v,g)=>qi(...g,r(m)),c);if(i(Ke(Ke(Ke({},e),t),h)),m<1)s=o.setTimeout(d);else{var p=Ca((v,g)=>qi(...g,r(1)),c);i(Ke(Ke(Ke({},e),t),p))}};return()=>(s=o.setTimeout(d),()=>{s()})}const B2=(e,t,r,n,a,i)=>{var o=M2(e,t);return r.isStepper===!0?L2(e,t,r,o,a,i):F2(e,t,r,n,o,a,i)};class U2{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),a=null,i=o=>{o-n>=r?t(o):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(i))};return a=requestAnimationFrame(i),()=>{cancelAnimationFrame(a)}}}var W2=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function Sl(){return Sl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sl.apply(null,arguments)}function H2(e,t){if(e==null)return{};var r,n,a=q2(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function q2(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Lf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Tr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Lf(Object(r),!0).forEach(function(n){tn(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lf(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tn(e,t,r){return(t=Z2(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Z2(e){var t=K2(e,"string");return typeof t=="symbol"?t:t+""}function K2(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function G2(){return P2(new U2)}class Gc extends y.PureComponent{constructor(t,r){super(t,r),tn(this,"mounted",!1),tn(this,"manager",null),tn(this,"stopJSAnimation",null),tn(this,"unSubscribe",null);var{isActive:n,attributeName:a,from:i,to:o,children:s,duration:c,animationManager:u}=this.props;if(this.manager=u,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!n||c<=0){this.state={style:{}},typeof s=="function"&&(this.state={style:o});return}if(i){if(typeof s=="function"){this.state={style:i};return}this.state={style:a?{[a]:i}:i}}else this.state={style:{}}}componentDidMount(){var{isActive:t,canBegin:r}=this.props;this.mounted=!0,!(!t||!r)&&this.runAnimation(this.props)}componentDidUpdate(t){var{isActive:r,canBegin:n,attributeName:a,shouldReAnimate:i,to:o,from:s}=this.props,{style:c}=this.state;if(n){if(!r){var u={style:a?{[a]:o}:o};this.state&&c&&(a&&c[a]!==o||!a&&c!==o)&&this.setState(u);return}if(!(N2(t.to,o)&&t.canBegin&&t.isActive)){var d=!t.canBegin||!t.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var f=d||i?s:t.to;if(this.state&&c){var m={style:a?{[a]:f}:f};(a&&c[a]!==f||!a&&c!==f)&&this.setState(m)}this.runAnimation(Tr(Tr({},this.props),{},{from:f,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:t}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}handleStyleChange(t){this.changeStyle(t)}changeStyle(t){this.mounted&&this.setState({style:t})}runJSAnimation(t){var{from:r,to:n,duration:a,easing:i,begin:o,onAnimationEnd:s,onAnimationStart:c}=t,u=B2(r,n,A2(i),a,this.changeStyle,this.manager.getTimeoutController()),d=()=>{this.stopJSAnimation=u()};this.manager.start([c,o,d,a,s])}runAnimation(t){var{begin:r,duration:n,attributeName:a,to:i,easing:o,onAnimationStart:s,onAnimationEnd:c,children:u}=t;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof o=="function"||typeof u=="function"||o==="spring"){this.runJSAnimation(t);return}var d=a?{[a]:i}:i,f=D2(Object.keys(d),n,o);this.manager.start([s,r,Tr(Tr({},d),{},{transition:f}),n,c])}render(){var t=this.props,{children:r,begin:n,duration:a,attributeName:i,easing:o,isActive:s,from:c,to:u,canBegin:d,onAnimationEnd:f,shouldReAnimate:m,onAnimationReStart:h,animationManager:p}=t,v=H2(t,W2),g=y.Children.count(r),x=this.state.style;if(typeof r=="function")return r(x);if(!s||g===0||a<=0)return r;var w=b=>{var{style:j={},className:k}=b.props,S=y.cloneElement(b,Tr(Tr({},v),{},{style:Tr(Tr({},j),x),className:k}));return S};return g===1?w(y.Children.only(r)):y.createElement("div",null,y.Children.map(r,b=>w(b)))}}tn(Gc,"displayName","Animate");tn(Gc,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});var V2=y.createContext(null);function Zi(e){var t,r,n=y.useContext(V2);return y.createElement(Gc,Sl({},e,{animationManager:(t=(r=e.animationManager)!==null&&r!==void 0?r:n)!==null&&t!==void 0?t:G2()}))}function Ki(){return Ki=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ki.apply(null,arguments)}var Ff=(e,t,r,n,a)=>{var i=Math.min(Math.abs(r)/2,Math.abs(n)/2),o=n>=0?1:-1,s=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0,u;if(i>0&&a instanceof Array){for(var d=[0,0,0,0],f=0,m=4;f<m;f++)d[f]=a[f]>i?i:a[f];u="M".concat(e,",").concat(t+o*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+s*d[0],",").concat(t)),u+="L ".concat(e+r-s*d[1],",").concat(t),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(t+o*d[1])),u+="L ".concat(e+r,",").concat(t+n-o*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(e+r-s*d[2],",").concat(t+n)),u+="L ".concat(e+s*d[3],",").concat(t+n),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+n-o*d[3])),u+="Z"}else if(i>0&&a===+a&&a>0){var h=Math.min(i,a);u="M ".concat(e,",").concat(t+o*h,`
            A `).concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+s*h,",").concat(t,`
            L `).concat(e+r-s*h,",").concat(t,`
            A `).concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+r,",").concat(t+o*h,`
            L `).concat(e+r,",").concat(t+n-o*h,`
            A `).concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+r-s*h,",").concat(t+n,`
            L `).concat(e+s*h,",").concat(t+n,`
            A `).concat(h,",").concat(h,",0,0,").concat(c,",").concat(e,",").concat(t+n-o*h," Z")}else u="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return u},Y2={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},X2=e=>{var t=bn(e,Y2),r=y.useRef(null),[n,a]=y.useState(-1);y.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var x=r.current.getTotalLength();x&&a(x)}catch{}},[]);var{x:i,y:o,width:s,height:c,radius:u,className:d}=t,{animationEasing:f,animationDuration:m,animationBegin:h,isAnimationActive:p,isUpdateAnimationActive:v}=t;if(i!==+i||o!==+o||s!==+s||c!==+c||s===0||c===0)return null;var g=fe("recharts-rectangle",d);return v?y.createElement(Zi,{canBegin:n>0,from:{width:s,height:c,x:i,y:o},to:{width:s,height:c,x:i,y:o},duration:m,animationEasing:f,isActive:v},x=>{var{width:w,height:b,x:j,y:k}=x;return y.createElement(Zi,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:h,duration:m,isActive:p,easing:f},y.createElement("path",Ki({},ye(t,!0),{className:g,d:Ff(j,k,w,b,u),ref:r})))}):y.createElement("path",Ki({},ye(t,!0),{className:g,d:Ff(i,o,s,c,u)}))};function y0(e){var{cx:t,cy:r,radius:n,startAngle:a,endAngle:i}=e,o=Ge(t,r,n,a),s=Ge(t,r,n,i);return{points:[o,s],cx:t,cy:r,radius:n,startAngle:a,endAngle:i}}function Nl(){return Nl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Nl.apply(null,arguments)}var Q2=(e,t)=>{var r=Ct(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},yi=e=>{var{cx:t,cy:r,radius:n,angle:a,sign:i,isExternal:o,cornerRadius:s,cornerIsExternal:c}=e,u=s*(o?1:-1)+n,d=Math.asin(s/u)/Ui,f=c?a:a+i*d,m=Ge(t,r,u,f),h=Ge(t,r,n,f),p=c?a-i*d:a,v=Ge(t,r,u*Math.cos(d*Ui),p);return{center:m,circleTangency:h,lineTangency:v,theta:d}},x0=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:i,endAngle:o}=e,s=Q2(i,o),c=i+s,u=Ge(t,r,a,i),d=Ge(t,r,a,c),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(s)>180),",").concat(+(i>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(n>0){var m=Ge(t,r,n,i),h=Ge(t,r,n,c);f+="L ".concat(h.x,",").concat(h.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(s)>180),",").concat(+(i<=c),`,
            `).concat(m.x,",").concat(m.y," Z")}else f+="L ".concat(t,",").concat(r," Z");return f},J2=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:s,startAngle:c,endAngle:u}=e,d=Ct(u-c),{circleTangency:f,lineTangency:m,theta:h}=yi({cx:t,cy:r,radius:a,angle:c,sign:d,cornerRadius:i,cornerIsExternal:s}),{circleTangency:p,lineTangency:v,theta:g}=yi({cx:t,cy:r,radius:a,angle:u,sign:-d,cornerRadius:i,cornerIsExternal:s}),x=s?Math.abs(c-u):Math.abs(c-u)-h-g;if(x<0)return o?"M ".concat(m.x,",").concat(m.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):x0({cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:c,endAngle:u});var w="M ".concat(m.x,",").concat(m.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(x>180),",").concat(+(d<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(v.x,",").concat(v.y,`
  `);if(n>0){var{circleTangency:b,lineTangency:j,theta:k}=yi({cx:t,cy:r,radius:n,angle:c,sign:d,isExternal:!0,cornerRadius:i,cornerIsExternal:s}),{circleTangency:S,lineTangency:N,theta:C}=yi({cx:t,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:i,cornerIsExternal:s}),T=s?Math.abs(c-u):Math.abs(c-u)-k-C;if(T<0&&i===0)return"".concat(w,"L").concat(t,",").concat(r,"Z");w+="L".concat(N.x,",").concat(N.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(S.x,",").concat(S.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(T>180),",").concat(+(d>0),",").concat(b.x,",").concat(b.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(j.x,",").concat(j.y,"Z")}else w+="L".concat(t,",").concat(r,"Z");return w},eC={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},tC=e=>{var t=bn(e,eC),{cx:r,cy:n,innerRadius:a,outerRadius:i,cornerRadius:o,forceCornerRadius:s,cornerIsExternal:c,startAngle:u,endAngle:d,className:f}=t;if(i<a||u===d)return null;var m=fe("recharts-sector",f),h=i-a,p=Fr(o,h,0,!0),v;return p>0&&Math.abs(u-d)<360?v=J2({cx:r,cy:n,innerRadius:a,outerRadius:i,cornerRadius:Math.min(p,h/2),forceCornerRadius:s,cornerIsExternal:c,startAngle:u,endAngle:d}):v=x0({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:u,endAngle:d}),y.createElement("path",Nl({},ye(t,!0),{className:m,d:v}))};function rC(e,t,r){var n,a,i,o;if(e==="horizontal")n=t.x,i=n,a=r.top,o=r.top+r.height;else if(e==="vertical")a=t.y,o=a,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:s,cy:c,innerRadius:u,outerRadius:d,angle:f}=t,m=Ge(s,c,u,f),h=Ge(s,c,d,f);n=m.x,a=m.y,i=h.x,o=h.y}else return y0(t);return[{x:n,y:a},{x:i,y:o}]}var b0={},w0={},j0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Lc;function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(j0);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=j0;function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(w0);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Fc,r=w0;function n(a,i,o){o&&typeof o!="number"&&t.isIterateeCall(a,i,o)&&(i=o=void 0),a=r.toFinite(a),i===void 0?(i=a,a=0):i=r.toFinite(i),o=o===void 0?a<i?1:-1:r.toFinite(o);const s=Math.max(Math.ceil((i-a)/(o||1)),0),c=new Array(s);for(let u=0;u<s;u++)c[u]=a,a+=o;return c}e.range=n})(b0);var nC=b0.range;const k0=Ur(nC);function Rr(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function aC(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Vc(e){let t,r,n;e.length!==2?(t=Rr,r=(s,c)=>Rr(e(s),c),n=(s,c)=>e(s)-c):(t=e===Rr||e===aC?e:iC,r=e,n=e);function a(s,c,u=0,d=s.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(s[f],c)<0?u=f+1:d=f}while(u<d)}return u}function i(s,c,u=0,d=s.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(s[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function o(s,c,u=0,d=s.length){const f=a(s,c,u,d-1);return f>u&&n(s[f-1],c)>-n(s[f],c)?f-1:f}return{left:a,center:o,right:i}}function iC(){return 0}function S0(e){return e===null?NaN:+e}function*oC(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const sC=Vc(Rr),Ha=sC.right;Vc(S0).center;class Bf extends Map{constructor(t,r=uC){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(Uf(this,t))}has(t){return super.has(Uf(this,t))}set(t,r){return super.set(lC(this,t),r)}delete(t){return super.delete(cC(this,t))}}function Uf({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function lC({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function cC({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function uC(e){return e!==null&&typeof e=="object"?e.valueOf():e}function dC(e=Rr){if(e===Rr)return N0;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function N0(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const fC=Math.sqrt(50),mC=Math.sqrt(10),hC=Math.sqrt(2);function Gi(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),o=i>=fC?10:i>=mC?5:i>=hC?2:1;let s,c,u;return a<0?(u=Math.pow(10,-a)/o,s=Math.round(e*u),c=Math.round(t*u),s/u<e&&++s,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*o,s=Math.round(e/u),c=Math.round(t/u),s*u<e&&++s,c*u>t&&--c),c<s&&.5<=r&&r<2?Gi(e,t,r*2):[s,c,u]}function Pl(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,i,o]=n?Gi(t,e,r):Gi(e,t,r);if(!(i>=a))return[];const s=i-a+1,c=new Array(s);if(n)if(o<0)for(let u=0;u<s;++u)c[u]=(i-u)/-o;else for(let u=0;u<s;++u)c[u]=(i-u)*o;else if(o<0)for(let u=0;u<s;++u)c[u]=(a+u)/-o;else for(let u=0;u<s;++u)c[u]=(a+u)*o;return c}function El(e,t,r){return t=+t,e=+e,r=+r,Gi(e,t,r)[2]}function _l(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?El(t,e,r):El(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function Wf(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function Hf(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function P0(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?N0:dC(a);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),m=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),h=Math.max(r,Math.floor(t-u*f/c+m)),p=Math.min(n,Math.floor(t+(c-u)*f/c+m));P0(e,t,h,p,a)}const i=e[t];let o=r,s=n;for(ha(e,r,t),a(e[n],i)>0&&ha(e,r,n);o<s;){for(ha(e,o,s),++o,--s;a(e[o],i)<0;)++o;for(;a(e[s],i)>0;)--s}a(e[r],i)===0?ha(e,r,s):(++s,ha(e,s,n)),s<=t&&(r=s+1),t<=s&&(n=s-1)}return e}function ha(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function pC(e,t,r){if(e=Float64Array.from(oC(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return Hf(e);if(t>=1)return Wf(e);var n,a=(n-1)*t,i=Math.floor(a),o=Wf(P0(e,i).subarray(0,i+1)),s=Hf(e.subarray(i+1));return o+(s-o)*(a-i)}}function gC(e,t,r=S0){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,i=Math.floor(a),o=+r(e[i],i,e),s=+r(e[i+1],i+1,e);return o+(s-o)*(a-i)}}function vC(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(a);++n<a;)i[n]=e+n*r;return i}function Rt(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Sr(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Al=Symbol("implicit");function Yc(){var e=new Bf,t=[],r=[],n=Al;function a(i){let o=e.get(i);if(o===void 0){if(n!==Al)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new Bf;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return Yc(t,r).unknown(n)},Rt.apply(a,arguments),a}function Xc(){var e=Yc().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,i,o,s=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var m=t().length,h=a<n,p=h?a:n,v=h?n:a;i=(v-p)/Math.max(1,m-c+u*2),s&&(i=Math.floor(i)),p+=(v-p-i*(m-c))*d,o=i*(1-c),s&&(p=Math.round(p),o=Math.round(o));var g=vC(m).map(function(x){return p+i*x});return r(h?g.reverse():g)}return e.domain=function(m){return arguments.length?(t(m),f()):t()},e.range=function(m){return arguments.length?([n,a]=m,n=+n,a=+a,f()):[n,a]},e.rangeRound=function(m){return[n,a]=m,n=+n,a=+a,s=!0,f()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(m){return arguments.length?(s=!!m,f()):s},e.padding=function(m){return arguments.length?(c=Math.min(1,u=+m),f()):c},e.paddingInner=function(m){return arguments.length?(c=Math.min(1,m),f()):c},e.paddingOuter=function(m){return arguments.length?(u=+m,f()):u},e.align=function(m){return arguments.length?(d=Math.max(0,Math.min(1,m)),f()):d},e.copy=function(){return Xc(t(),[n,a]).round(s).paddingInner(c).paddingOuter(u).align(d)},Rt.apply(f(),arguments)}function E0(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return E0(t())},e}function yC(){return E0(Xc.apply(null,arguments).paddingInner(1))}function Qc(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function _0(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function qa(){}var Oa=.7,Vi=1/Oa,Rn="\\s*([+-]?\\d+)\\s*",Ta="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",er="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",xC=/^#([0-9a-f]{3,8})$/,bC=new RegExp(`^rgb\\(${Rn},${Rn},${Rn}\\)$`),wC=new RegExp(`^rgb\\(${er},${er},${er}\\)$`),jC=new RegExp(`^rgba\\(${Rn},${Rn},${Rn},${Ta}\\)$`),kC=new RegExp(`^rgba\\(${er},${er},${er},${Ta}\\)$`),SC=new RegExp(`^hsl\\(${Ta},${er},${er}\\)$`),NC=new RegExp(`^hsla\\(${Ta},${er},${er},${Ta}\\)$`),qf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Qc(qa,Ia,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Zf,formatHex:Zf,formatHex8:PC,formatHsl:EC,formatRgb:Kf,toString:Kf});function Zf(){return this.rgb().formatHex()}function PC(){return this.rgb().formatHex8()}function EC(){return A0(this).formatHsl()}function Kf(){return this.rgb().formatRgb()}function Ia(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=xC.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?Gf(t):r===3?new ct(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?xi(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?xi(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=bC.exec(e))?new ct(t[1],t[2],t[3],1):(t=wC.exec(e))?new ct(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=jC.exec(e))?xi(t[1],t[2],t[3],t[4]):(t=kC.exec(e))?xi(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=SC.exec(e))?Xf(t[1],t[2]/100,t[3]/100,1):(t=NC.exec(e))?Xf(t[1],t[2]/100,t[3]/100,t[4]):qf.hasOwnProperty(e)?Gf(qf[e]):e==="transparent"?new ct(NaN,NaN,NaN,0):null}function Gf(e){return new ct(e>>16&255,e>>8&255,e&255,1)}function xi(e,t,r,n){return n<=0&&(e=t=r=NaN),new ct(e,t,r,n)}function _C(e){return e instanceof qa||(e=Ia(e)),e?(e=e.rgb(),new ct(e.r,e.g,e.b,e.opacity)):new ct}function Cl(e,t,r,n){return arguments.length===1?_C(e):new ct(e,t,r,n??1)}function ct(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}Qc(ct,Cl,_0(qa,{brighter(e){return e=e==null?Vi:Math.pow(Vi,e),new ct(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Oa:Math.pow(Oa,e),new ct(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ct(cn(this.r),cn(this.g),cn(this.b),Yi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Vf,formatHex:Vf,formatHex8:AC,formatRgb:Yf,toString:Yf}));function Vf(){return`#${rn(this.r)}${rn(this.g)}${rn(this.b)}`}function AC(){return`#${rn(this.r)}${rn(this.g)}${rn(this.b)}${rn((isNaN(this.opacity)?1:this.opacity)*255)}`}function Yf(){const e=Yi(this.opacity);return`${e===1?"rgb(":"rgba("}${cn(this.r)}, ${cn(this.g)}, ${cn(this.b)}${e===1?")":`, ${e})`}`}function Yi(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function cn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function rn(e){return e=cn(e),(e<16?"0":"")+e.toString(16)}function Xf(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Ht(e,t,r,n)}function A0(e){if(e instanceof Ht)return new Ht(e.h,e.s,e.l,e.opacity);if(e instanceof qa||(e=Ia(e)),!e)return new Ht;if(e instanceof Ht)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,s=i-a,c=(i+a)/2;return s?(t===i?o=(r-n)/s+(r<n)*6:r===i?o=(n-t)/s+2:o=(t-r)/s+4,s/=c<.5?i+a:2-i-a,o*=60):s=c>0&&c<1?0:o,new Ht(o,s,c,e.opacity)}function CC(e,t,r,n){return arguments.length===1?A0(e):new Ht(e,t,r,n??1)}function Ht(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}Qc(Ht,CC,_0(qa,{brighter(e){return e=e==null?Vi:Math.pow(Vi,e),new Ht(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Oa:Math.pow(Oa,e),new Ht(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new ct(Ds(e>=240?e-240:e+120,a,n),Ds(e,a,n),Ds(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new Ht(Qf(this.h),bi(this.s),bi(this.l),Yi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Yi(this.opacity);return`${e===1?"hsl(":"hsla("}${Qf(this.h)}, ${bi(this.s)*100}%, ${bi(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Qf(e){return e=(e||0)%360,e<0?e+360:e}function bi(e){return Math.max(0,Math.min(1,e||0))}function Ds(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const Jc=e=>()=>e;function OC(e,t){return function(r){return e+r*t}}function TC(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function IC(e){return(e=+e)==1?C0:function(t,r){return r-t?TC(t,r,e):Jc(isNaN(t)?r:t)}}function C0(e,t){var r=t-e;return r?OC(e,r):Jc(isNaN(e)?t:e)}const Jf=function e(t){var r=IC(t);function n(a,i){var o=r((a=Cl(a)).r,(i=Cl(i)).r),s=r(a.g,i.g),c=r(a.b,i.b),u=C0(a.opacity,i.opacity);return function(d){return a.r=o(d),a.g=s(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=e,n}(1);function DC(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=e[a]*(1-i)+t[a]*i;return n}}function MC(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function $C(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)a[o]=Vn(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(s){for(o=0;o<n;++o)i[o]=a[o](s);return i}}function zC(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Xi(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function RC(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=Vn(e[a],t[a]):n[a]=t[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var Ol=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ms=new RegExp(Ol.source,"g");function LC(e){return function(){return e}}function FC(e){return function(t){return e(t)+""}}function BC(e,t){var r=Ol.lastIndex=Ms.lastIndex=0,n,a,i,o=-1,s=[],c=[];for(e=e+"",t=t+"";(n=Ol.exec(e))&&(a=Ms.exec(t));)(i=a.index)>r&&(i=t.slice(r,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(a=a[0])?s[o]?s[o]+=a:s[++o]=a:(s[++o]=null,c.push({i:o,x:Xi(n,a)})),r=Ms.lastIndex;return r<t.length&&(i=t.slice(r),s[o]?s[o]+=i:s[++o]=i),s.length<2?c[0]?FC(c[0].x):LC(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)s[(f=c[d]).i]=f.x(u);return s.join("")})}function Vn(e,t){var r=typeof t,n;return t==null||r==="boolean"?Jc(t):(r==="number"?Xi:r==="string"?(n=Ia(t))?(t=n,Jf):BC:t instanceof Ia?Jf:t instanceof Date?zC:MC(t)?DC:Array.isArray(t)?$C:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?RC:Xi)(e,t)}function eu(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function UC(e,t){t===void 0&&(t=e,e=Vn);for(var r=0,n=t.length-1,a=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(a,a=t[++r]);return function(o){var s=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[s](o-s)}}function WC(e){return function(){return e}}function Qi(e){return+e}var em=[0,1];function at(e){return e}function Tl(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:WC(isNaN(t)?NaN:.5)}function HC(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function qC(e,t,r){var n=e[0],a=e[1],i=t[0],o=t[1];return a<n?(n=Tl(a,n),i=r(o,i)):(n=Tl(n,a),i=r(i,o)),function(s){return i(n(s))}}function ZC(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)a[o]=Tl(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(s){var c=Ha(e,s,1,n)-1;return i[c](a[c](s))}}function Za(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Qo(){var e=em,t=em,r=Vn,n,a,i,o=at,s,c,u;function d(){var m=Math.min(e.length,t.length);return o!==at&&(o=HC(e[0],e[m-1])),s=m>2?ZC:qC,c=u=null,f}function f(m){return m==null||isNaN(m=+m)?i:(c||(c=s(e.map(n),t,r)))(n(o(m)))}return f.invert=function(m){return o(a((u||(u=s(t,e.map(n),Xi)))(m)))},f.domain=function(m){return arguments.length?(e=Array.from(m,Qi),d()):e.slice()},f.range=function(m){return arguments.length?(t=Array.from(m),d()):t.slice()},f.rangeRound=function(m){return t=Array.from(m),r=eu,d()},f.clamp=function(m){return arguments.length?(o=m?!0:at,d()):o!==at},f.interpolate=function(m){return arguments.length?(r=m,d()):r},f.unknown=function(m){return arguments.length?(i=m,f):i},function(m,h){return n=m,a=h,d()}}function tu(){return Qo()(at,at)}function KC(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Ji(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Un(e){return e=Ji(Math.abs(e)),e?e[1]:NaN}function GC(e,t){return function(r,n){for(var a=r.length,i=[],o=0,s=e[0],c=0;a>0&&s>0&&(c+s+1>n&&(s=Math.max(1,n-c)),i.push(r.substring(a-=s,a+s)),!((c+=s+1)>n));)s=e[o=(o+1)%e.length];return i.reverse().join(t)}}function VC(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var YC=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Da(e){if(!(t=YC.exec(e)))throw new Error("invalid format: "+e);var t;return new ru({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Da.prototype=ru.prototype;function ru(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}ru.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function XC(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var O0;function QC(e,t){var r=Ji(e,t);if(!r)return e+"";var n=r[0],a=r[1],i=a-(O0=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+Ji(e,Math.max(0,t+i-1))[0]}function tm(e,t){var r=Ji(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const rm={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:KC,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>tm(e*100,t),r:tm,s:QC,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function nm(e){return e}var am=Array.prototype.map,im=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function JC(e){var t=e.grouping===void 0||e.thousands===void 0?nm:GC(am.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?nm:VC(am.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"−":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=Da(f);var m=f.fill,h=f.align,p=f.sign,v=f.symbol,g=f.zero,x=f.width,w=f.comma,b=f.precision,j=f.trim,k=f.type;k==="n"?(w=!0,k="g"):rm[k]||(b===void 0&&(b=12),j=!0,k="g"),(g||m==="0"&&h==="=")&&(g=!0,m="0",h="=");var S=v==="$"?r:v==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",N=v==="$"?n:/[%p]/.test(k)?o:"",C=rm[k],T=/[defgprs%]/.test(k);b=b===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function $(O){var E=S,F=N,Z,Y,B;if(k==="c")F=C(O)+F,O="";else{O=+O;var q=O<0||1/O<0;if(O=isNaN(O)?c:C(Math.abs(O),b),j&&(O=XC(O)),q&&+O==0&&p!=="+"&&(q=!1),E=(q?p==="("?p:s:p==="-"||p==="("?"":p)+E,F=(k==="s"?im[8+O0/3]:"")+F+(q&&p==="("?")":""),T){for(Z=-1,Y=O.length;++Z<Y;)if(B=O.charCodeAt(Z),48>B||B>57){F=(B===46?a+O.slice(Z+1):O.slice(Z))+F,O=O.slice(0,Z);break}}}w&&!g&&(O=t(O,1/0));var te=E.length+O.length+F.length,re=te<x?new Array(x-te+1).join(m):"";switch(w&&g&&(O=t(re+O,re.length?x-F.length:1/0),re=""),h){case"<":O=E+O+F+re;break;case"=":O=E+re+O+F;break;case"^":O=re.slice(0,te=re.length>>1)+E+O+F+re.slice(te);break;default:O=re+E+O+F;break}return i(O)}return $.toString=function(){return f+""},$}function d(f,m){var h=u((f=Da(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(Un(m)/3)))*3,v=Math.pow(10,-p),g=im[8+p/3];return function(x){return h(v*x)+g}}return{format:u,formatPrefix:d}}var wi,nu,T0;eO({thousands:",",grouping:[3],currency:["$",""]});function eO(e){return wi=JC(e),nu=wi.format,T0=wi.formatPrefix,wi}function tO(e){return Math.max(0,-Un(Math.abs(e)))}function rO(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Un(t)/3)))*3-Un(Math.abs(e)))}function nO(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Un(t)-Un(e))+1}function I0(e,t,r,n){var a=_l(e,t,r),i;switch(n=Da(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=rO(a,o))&&(n.precision=i),T0(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=nO(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=tO(a))&&(n.precision=i-(n.type==="%")*2);break}}return nu(n)}function Hr(e){var t=e.domain;return e.ticks=function(r){var n=t();return Pl(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return I0(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,i=n.length-1,o=n[a],s=n[i],c,u,d=10;for(s<o&&(u=o,o=s,s=u,u=a,a=i,i=u);d-- >0;){if(u=El(o,s,r),u===c)return n[a]=o,n[i]=s,t(n);if(u>0)o=Math.floor(o/u)*u,s=Math.ceil(s/u)*u;else if(u<0)o=Math.ceil(o*u)/u,s=Math.floor(s*u)/u;else break;c=u}return e},e}function D0(){var e=tu();return e.copy=function(){return Za(e,D0())},Rt.apply(e,arguments),Hr(e)}function M0(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,Qi),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return M0(e).unknown(t)},e=arguments.length?Array.from(e,Qi):[0,1],Hr(r)}function $0(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],i=e[n],o;return i<a&&(o=r,r=n,n=o,o=a,a=i,i=o),e[r]=t.floor(a),e[n]=t.ceil(i),e}function om(e){return Math.log(e)}function sm(e){return Math.exp(e)}function aO(e){return-Math.log(-e)}function iO(e){return-Math.exp(-e)}function oO(e){return isFinite(e)?+("1e"+e):e<0?0:e}function sO(e){return e===10?oO:e===Math.E?Math.exp:t=>Math.pow(e,t)}function lO(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function lm(e){return(t,r)=>-e(-t,r)}function au(e){const t=e(om,sm),r=t.domain;let n=10,a,i;function o(){return a=lO(n),i=sO(n),r()[0]<0?(a=lm(a),i=lm(i),e(aO,iO)):e(om,sm),t}return t.base=function(s){return arguments.length?(n=+s,o()):n},t.domain=function(s){return arguments.length?(r(s),o()):r()},t.ticks=s=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let m=a(u),h=a(d),p,v;const g=s==null?10:+s;let x=[];if(!(n%1)&&h-m<g){if(m=Math.floor(m),h=Math.ceil(h),u>0){for(;m<=h;++m)for(p=1;p<n;++p)if(v=m<0?p/i(-m):p*i(m),!(v<u)){if(v>d)break;x.push(v)}}else for(;m<=h;++m)for(p=n-1;p>=1;--p)if(v=m>0?p/i(-m):p*i(m),!(v<u)){if(v>d)break;x.push(v)}x.length*2<g&&(x=Pl(u,d,g))}else x=Pl(m,h,Math.min(h-m,g)).map(i);return f?x.reverse():x},t.tickFormat=(s,c)=>{if(s==null&&(s=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=Da(c)).precision==null&&(c.trim=!0),c=nu(c)),s===1/0)return c;const u=Math.max(1,n*s/t.ticks().length);return d=>{let f=d/i(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},t.nice=()=>r($0(r(),{floor:s=>i(Math.floor(a(s))),ceil:s=>i(Math.ceil(a(s)))})),t}function z0(){const e=au(Qo()).domain([1,10]);return e.copy=()=>Za(e,z0()).base(e.base()),Rt.apply(e,arguments),e}function cm(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function um(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function iu(e){var t=1,r=e(cm(t),um(t));return r.constant=function(n){return arguments.length?e(cm(t=+n),um(t)):t},Hr(r)}function R0(){var e=iu(Qo());return e.copy=function(){return Za(e,R0()).constant(e.constant())},Rt.apply(e,arguments)}function dm(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function cO(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function uO(e){return e<0?-e*e:e*e}function ou(e){var t=e(at,at),r=1;function n(){return r===1?e(at,at):r===.5?e(cO,uO):e(dm(r),dm(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},Hr(t)}function su(){var e=ou(Qo());return e.copy=function(){return Za(e,su()).exponent(e.exponent())},Rt.apply(e,arguments),e}function dO(){return su.apply(null,arguments).exponent(.5)}function fm(e){return Math.sign(e)*e*e}function fO(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function L0(){var e=tu(),t=[0,1],r=!1,n;function a(i){var o=fO(e(i));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(i){return e.invert(fm(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,Qi)).map(fm)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return L0(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Rt.apply(a,arguments),Hr(a)}function F0(){var e=[],t=[],r=[],n;function a(){var o=0,s=Math.max(1,t.length);for(r=new Array(s-1);++o<s;)r[o-1]=gC(e,o/s);return i}function i(o){return o==null||isNaN(o=+o)?n:t[Ha(r,o)]}return i.invertExtent=function(o){var s=t.indexOf(o);return s<0?[NaN,NaN]:[s>0?r[s-1]:e[0],s<r.length?r[s]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let s of o)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(Rr),a()},i.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return F0().domain(e).range(t).unknown(n)},Rt.apply(i,arguments)}function B0(){var e=0,t=1,r=1,n=[.5],a=[0,1],i;function o(c){return c!=null&&c<=c?a[Ha(n,c,0,r)]:i}function s(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,s()):[e,t]},o.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,s()):a.slice()},o.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return B0().domain([e,t]).range(a).unknown(i)},Rt.apply(Hr(o),arguments)}function U0(){var e=[.5],t=[0,1],r,n=1;function a(i){return i!=null&&i<=i?t[Ha(e,i,0,n)]:r}return a.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return U0().domain(e).range(t).unknown(r)},Rt.apply(a,arguments)}const $s=new Date,zs=new Date;function Re(e,t,r,n){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const o=a(i),s=a.ceil(i);return i-o<s-i?o:s},a.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,s)=>{const c=[];if(i=a.ceil(i),s=s==null?1:Math.floor(s),!(i<o)||!(s>0))return c;let u;do c.push(u=new Date(+i)),t(i,s),e(i);while(u<i&&i<o);return c},a.filter=i=>Re(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,s)=>{if(o>=o)if(s<0)for(;++s<=0;)for(;t(o,-1),!i(o););else for(;--s>=0;)for(;t(o,1),!i(o););}),r&&(a.count=(i,o)=>($s.setTime(+i),zs.setTime(+o),e($s),e(zs),Math.floor(r($s,zs))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?o=>n(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const eo=Re(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);eo.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Re(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):eo);eo.range;const cr=1e3,Ot=cr*60,ur=Ot*60,vr=ur*24,lu=vr*7,mm=vr*30,Rs=vr*365,nn=Re(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*cr)},(e,t)=>(t-e)/cr,e=>e.getUTCSeconds());nn.range;const cu=Re(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*cr)},(e,t)=>{e.setTime(+e+t*Ot)},(e,t)=>(t-e)/Ot,e=>e.getMinutes());cu.range;const uu=Re(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ot)},(e,t)=>(t-e)/Ot,e=>e.getUTCMinutes());uu.range;const du=Re(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*cr-e.getMinutes()*Ot)},(e,t)=>{e.setTime(+e+t*ur)},(e,t)=>(t-e)/ur,e=>e.getHours());du.range;const fu=Re(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ur)},(e,t)=>(t-e)/ur,e=>e.getUTCHours());fu.range;const Ka=Re(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ot)/vr,e=>e.getDate()-1);Ka.range;const Jo=Re(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/vr,e=>e.getUTCDate()-1);Jo.range;const W0=Re(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/vr,e=>Math.floor(e/vr));W0.range;function wn(e){return Re(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Ot)/lu)}const es=wn(0),to=wn(1),mO=wn(2),hO=wn(3),Wn=wn(4),pO=wn(5),gO=wn(6);es.range;to.range;mO.range;hO.range;Wn.range;pO.range;gO.range;function jn(e){return Re(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/lu)}const ts=jn(0),ro=jn(1),vO=jn(2),yO=jn(3),Hn=jn(4),xO=jn(5),bO=jn(6);ts.range;ro.range;vO.range;yO.range;Hn.range;xO.range;bO.range;const mu=Re(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());mu.range;const hu=Re(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());hu.range;const yr=Re(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());yr.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Re(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});yr.range;const xr=Re(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());xr.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Re(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});xr.range;function H0(e,t,r,n,a,i){const o=[[nn,1,cr],[nn,5,5*cr],[nn,15,15*cr],[nn,30,30*cr],[i,1,Ot],[i,5,5*Ot],[i,15,15*Ot],[i,30,30*Ot],[a,1,ur],[a,3,3*ur],[a,6,6*ur],[a,12,12*ur],[n,1,vr],[n,2,2*vr],[r,1,lu],[t,1,mm],[t,3,3*mm],[e,1,Rs]];function s(u,d,f){const m=d<u;m&&([u,d]=[d,u]);const h=f&&typeof f.range=="function"?f:c(u,d,f),p=h?h.range(u,+d+1):[];return m?p.reverse():p}function c(u,d,f){const m=Math.abs(d-u)/f,h=Vc(([,,g])=>g).right(o,m);if(h===o.length)return e.every(_l(u/Rs,d/Rs,f));if(h===0)return eo.every(Math.max(_l(u,d,f),1));const[p,v]=o[m/o[h-1][2]<o[h][2]/m?h-1:h];return p.every(v)}return[s,c]}const[wO,jO]=H0(xr,hu,ts,W0,fu,uu),[kO,SO]=H0(yr,mu,es,Ka,du,cu);function Ls(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Fs(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function pa(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function NO(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,i=e.days,o=e.shortDays,s=e.months,c=e.shortMonths,u=ga(a),d=va(a),f=ga(i),m=va(i),h=ga(o),p=va(o),v=ga(s),g=va(s),x=ga(c),w=va(c),b={a:q,A:te,b:re,B:Pe,c:null,d:xm,e:xm,f:GO,g:aT,G:oT,H:qO,I:ZO,j:KO,L:q0,m:VO,M:YO,p:K,q:z,Q:jm,s:km,S:XO,u:QO,U:JO,V:eT,w:tT,W:rT,x:null,X:null,y:nT,Y:iT,Z:sT,"%":wm},j={a:X,A:Ce,b:Oe,B:be,c:null,d:bm,e:bm,f:dT,g:wT,G:kT,H:lT,I:cT,j:uT,L:K0,m:fT,M:mT,p:Gr,q:Er,Q:jm,s:km,S:hT,u:pT,U:gT,V:vT,w:yT,W:xT,x:null,X:null,y:bT,Y:jT,Z:ST,"%":wm},k={a:$,A:O,b:E,B:F,c:Z,d:vm,e:vm,f:BO,g:gm,G:pm,H:ym,I:ym,j:zO,L:FO,m:$O,M:RO,p:T,q:MO,Q:WO,s:HO,S:LO,u:CO,U:OO,V:TO,w:AO,W:IO,x:Y,X:B,y:gm,Y:pm,Z:DO,"%":UO};b.x=S(r,b),b.X=S(n,b),b.c=S(t,b),j.x=S(r,j),j.X=S(n,j),j.c=S(t,j);function S(R,Q){return function(ae){var D=[],Qe=-1,le=0,nt=R.length,Je,ht,ra;for(ae instanceof Date||(ae=new Date(+ae));++Qe<nt;)R.charCodeAt(Qe)===37&&(D.push(R.slice(le,Qe)),(ht=hm[Je=R.charAt(++Qe)])!=null?Je=R.charAt(++Qe):ht=Je==="e"?" ":"0",(ra=Q[Je])&&(Je=ra(ae,ht)),D.push(Je),le=Qe+1);return D.push(R.slice(le,Qe)),D.join("")}}function N(R,Q){return function(ae){var D=pa(1900,void 0,1),Qe=C(D,R,ae+="",0),le,nt;if(Qe!=ae.length)return null;if("Q"in D)return new Date(D.Q);if("s"in D)return new Date(D.s*1e3+("L"in D?D.L:0));if(Q&&!("Z"in D)&&(D.Z=0),"p"in D&&(D.H=D.H%12+D.p*12),D.m===void 0&&(D.m="q"in D?D.q:0),"V"in D){if(D.V<1||D.V>53)return null;"w"in D||(D.w=1),"Z"in D?(le=Fs(pa(D.y,0,1)),nt=le.getUTCDay(),le=nt>4||nt===0?ro.ceil(le):ro(le),le=Jo.offset(le,(D.V-1)*7),D.y=le.getUTCFullYear(),D.m=le.getUTCMonth(),D.d=le.getUTCDate()+(D.w+6)%7):(le=Ls(pa(D.y,0,1)),nt=le.getDay(),le=nt>4||nt===0?to.ceil(le):to(le),le=Ka.offset(le,(D.V-1)*7),D.y=le.getFullYear(),D.m=le.getMonth(),D.d=le.getDate()+(D.w+6)%7)}else("W"in D||"U"in D)&&("w"in D||(D.w="u"in D?D.u%7:"W"in D?1:0),nt="Z"in D?Fs(pa(D.y,0,1)).getUTCDay():Ls(pa(D.y,0,1)).getDay(),D.m=0,D.d="W"in D?(D.w+6)%7+D.W*7-(nt+5)%7:D.w+D.U*7-(nt+6)%7);return"Z"in D?(D.H+=D.Z/100|0,D.M+=D.Z%100,Fs(D)):Ls(D)}}function C(R,Q,ae,D){for(var Qe=0,le=Q.length,nt=ae.length,Je,ht;Qe<le;){if(D>=nt)return-1;if(Je=Q.charCodeAt(Qe++),Je===37){if(Je=Q.charAt(Qe++),ht=k[Je in hm?Q.charAt(Qe++):Je],!ht||(D=ht(R,ae,D))<0)return-1}else if(Je!=ae.charCodeAt(D++))return-1}return D}function T(R,Q,ae){var D=u.exec(Q.slice(ae));return D?(R.p=d.get(D[0].toLowerCase()),ae+D[0].length):-1}function $(R,Q,ae){var D=h.exec(Q.slice(ae));return D?(R.w=p.get(D[0].toLowerCase()),ae+D[0].length):-1}function O(R,Q,ae){var D=f.exec(Q.slice(ae));return D?(R.w=m.get(D[0].toLowerCase()),ae+D[0].length):-1}function E(R,Q,ae){var D=x.exec(Q.slice(ae));return D?(R.m=w.get(D[0].toLowerCase()),ae+D[0].length):-1}function F(R,Q,ae){var D=v.exec(Q.slice(ae));return D?(R.m=g.get(D[0].toLowerCase()),ae+D[0].length):-1}function Z(R,Q,ae){return C(R,t,Q,ae)}function Y(R,Q,ae){return C(R,r,Q,ae)}function B(R,Q,ae){return C(R,n,Q,ae)}function q(R){return o[R.getDay()]}function te(R){return i[R.getDay()]}function re(R){return c[R.getMonth()]}function Pe(R){return s[R.getMonth()]}function K(R){return a[+(R.getHours()>=12)]}function z(R){return 1+~~(R.getMonth()/3)}function X(R){return o[R.getUTCDay()]}function Ce(R){return i[R.getUTCDay()]}function Oe(R){return c[R.getUTCMonth()]}function be(R){return s[R.getUTCMonth()]}function Gr(R){return a[+(R.getUTCHours()>=12)]}function Er(R){return 1+~~(R.getUTCMonth()/3)}return{format:function(R){var Q=S(R+="",b);return Q.toString=function(){return R},Q},parse:function(R){var Q=N(R+="",!1);return Q.toString=function(){return R},Q},utcFormat:function(R){var Q=S(R+="",j);return Q.toString=function(){return R},Q},utcParse:function(R){var Q=N(R+="",!0);return Q.toString=function(){return R},Q}}}var hm={"-":"",_:" ",0:"0"},Be=/^\s*\d+/,PO=/^%/,EO=/[\\^$*+?|[\]().{}]/g;function ie(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(t)+a:a)}function _O(e){return e.replace(EO,"\\$&")}function ga(e){return new RegExp("^(?:"+e.map(_O).join("|")+")","i")}function va(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function AO(e,t,r){var n=Be.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function CO(e,t,r){var n=Be.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function OO(e,t,r){var n=Be.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function TO(e,t,r){var n=Be.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function IO(e,t,r){var n=Be.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function pm(e,t,r){var n=Be.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function gm(e,t,r){var n=Be.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function DO(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function MO(e,t,r){var n=Be.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function $O(e,t,r){var n=Be.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function vm(e,t,r){var n=Be.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function zO(e,t,r){var n=Be.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function ym(e,t,r){var n=Be.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function RO(e,t,r){var n=Be.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function LO(e,t,r){var n=Be.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function FO(e,t,r){var n=Be.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function BO(e,t,r){var n=Be.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function UO(e,t,r){var n=PO.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function WO(e,t,r){var n=Be.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function HO(e,t,r){var n=Be.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function xm(e,t){return ie(e.getDate(),t,2)}function qO(e,t){return ie(e.getHours(),t,2)}function ZO(e,t){return ie(e.getHours()%12||12,t,2)}function KO(e,t){return ie(1+Ka.count(yr(e),e),t,3)}function q0(e,t){return ie(e.getMilliseconds(),t,3)}function GO(e,t){return q0(e,t)+"000"}function VO(e,t){return ie(e.getMonth()+1,t,2)}function YO(e,t){return ie(e.getMinutes(),t,2)}function XO(e,t){return ie(e.getSeconds(),t,2)}function QO(e){var t=e.getDay();return t===0?7:t}function JO(e,t){return ie(es.count(yr(e)-1,e),t,2)}function Z0(e){var t=e.getDay();return t>=4||t===0?Wn(e):Wn.ceil(e)}function eT(e,t){return e=Z0(e),ie(Wn.count(yr(e),e)+(yr(e).getDay()===4),t,2)}function tT(e){return e.getDay()}function rT(e,t){return ie(to.count(yr(e)-1,e),t,2)}function nT(e,t){return ie(e.getFullYear()%100,t,2)}function aT(e,t){return e=Z0(e),ie(e.getFullYear()%100,t,2)}function iT(e,t){return ie(e.getFullYear()%1e4,t,4)}function oT(e,t){var r=e.getDay();return e=r>=4||r===0?Wn(e):Wn.ceil(e),ie(e.getFullYear()%1e4,t,4)}function sT(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ie(t/60|0,"0",2)+ie(t%60,"0",2)}function bm(e,t){return ie(e.getUTCDate(),t,2)}function lT(e,t){return ie(e.getUTCHours(),t,2)}function cT(e,t){return ie(e.getUTCHours()%12||12,t,2)}function uT(e,t){return ie(1+Jo.count(xr(e),e),t,3)}function K0(e,t){return ie(e.getUTCMilliseconds(),t,3)}function dT(e,t){return K0(e,t)+"000"}function fT(e,t){return ie(e.getUTCMonth()+1,t,2)}function mT(e,t){return ie(e.getUTCMinutes(),t,2)}function hT(e,t){return ie(e.getUTCSeconds(),t,2)}function pT(e){var t=e.getUTCDay();return t===0?7:t}function gT(e,t){return ie(ts.count(xr(e)-1,e),t,2)}function G0(e){var t=e.getUTCDay();return t>=4||t===0?Hn(e):Hn.ceil(e)}function vT(e,t){return e=G0(e),ie(Hn.count(xr(e),e)+(xr(e).getUTCDay()===4),t,2)}function yT(e){return e.getUTCDay()}function xT(e,t){return ie(ro.count(xr(e)-1,e),t,2)}function bT(e,t){return ie(e.getUTCFullYear()%100,t,2)}function wT(e,t){return e=G0(e),ie(e.getUTCFullYear()%100,t,2)}function jT(e,t){return ie(e.getUTCFullYear()%1e4,t,4)}function kT(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Hn(e):Hn.ceil(e),ie(e.getUTCFullYear()%1e4,t,4)}function ST(){return"+0000"}function wm(){return"%"}function jm(e){return+e}function km(e){return Math.floor(+e/1e3)}var An,V0,Y0;NT({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function NT(e){return An=NO(e),V0=An.format,An.parse,Y0=An.utcFormat,An.utcParse,An}function PT(e){return new Date(e)}function ET(e){return e instanceof Date?+e:+new Date(+e)}function pu(e,t,r,n,a,i,o,s,c,u){var d=tu(),f=d.invert,m=d.domain,h=u(".%L"),p=u(":%S"),v=u("%I:%M"),g=u("%I %p"),x=u("%a %d"),w=u("%b %d"),b=u("%B"),j=u("%Y");function k(S){return(c(S)<S?h:s(S)<S?p:o(S)<S?v:i(S)<S?g:n(S)<S?a(S)<S?x:w:r(S)<S?b:j)(S)}return d.invert=function(S){return new Date(f(S))},d.domain=function(S){return arguments.length?m(Array.from(S,ET)):m().map(PT)},d.ticks=function(S){var N=m();return e(N[0],N[N.length-1],S??10)},d.tickFormat=function(S,N){return N==null?k:u(N)},d.nice=function(S){var N=m();return(!S||typeof S.range!="function")&&(S=t(N[0],N[N.length-1],S??10)),S?m($0(N,S)):d},d.copy=function(){return Za(d,pu(e,t,r,n,a,i,o,s,c,u))},d}function _T(){return Rt.apply(pu(kO,SO,yr,mu,es,Ka,du,cu,nn,V0).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function AT(){return Rt.apply(pu(wO,jO,xr,hu,ts,Jo,fu,uu,nn,Y0).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function rs(){var e=0,t=1,r,n,a,i,o=at,s=!1,c;function u(f){return f==null||isNaN(f=+f)?c:o(a===0?.5:(f=(i(f)-r)*a,s?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=i(e=+e),n=i(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(s=!!f,u):s},u.interpolator=function(f){return arguments.length?(o=f,u):o};function d(f){return function(m){var h,p;return arguments.length?([h,p]=m,o=f(h,p),u):[o(0),o(1)]}}return u.range=d(Vn),u.rangeRound=d(eu),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return i=f,r=f(e),n=f(t),a=r===n?0:1/(n-r),u}}function qr(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function X0(){var e=Hr(rs()(at));return e.copy=function(){return qr(e,X0())},Sr.apply(e,arguments)}function Q0(){var e=au(rs()).domain([1,10]);return e.copy=function(){return qr(e,Q0()).base(e.base())},Sr.apply(e,arguments)}function J0(){var e=iu(rs());return e.copy=function(){return qr(e,J0()).constant(e.constant())},Sr.apply(e,arguments)}function gu(){var e=ou(rs());return e.copy=function(){return qr(e,gu()).exponent(e.exponent())},Sr.apply(e,arguments)}function CT(){return gu.apply(null,arguments).exponent(.5)}function ev(){var e=[],t=at;function r(n){if(n!=null&&!isNaN(n=+n))return t((Ha(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Rr),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>pC(e,i/n))},r.copy=function(){return ev(t).domain(e)},Sr.apply(r,arguments)}function ns(){var e=0,t=.5,r=1,n=1,a,i,o,s,c,u=at,d,f=!1,m;function h(v){return isNaN(v=+v)?m:(v=.5+((v=+d(v))-i)*(n*v<n*i?s:c),u(f?Math.max(0,Math.min(1,v)):v))}h.domain=function(v){return arguments.length?([e,t,r]=v,a=d(e=+e),i=d(t=+t),o=d(r=+r),s=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),n=i<a?-1:1,h):[e,t,r]},h.clamp=function(v){return arguments.length?(f=!!v,h):f},h.interpolator=function(v){return arguments.length?(u=v,h):u};function p(v){return function(g){var x,w,b;return arguments.length?([x,w,b]=g,u=UC(v,[x,w,b]),h):[u(0),u(.5),u(1)]}}return h.range=p(Vn),h.rangeRound=p(eu),h.unknown=function(v){return arguments.length?(m=v,h):m},function(v){return d=v,a=v(e),i=v(t),o=v(r),s=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),n=i<a?-1:1,h}}function tv(){var e=Hr(ns()(at));return e.copy=function(){return qr(e,tv())},Sr.apply(e,arguments)}function rv(){var e=au(ns()).domain([.1,1,10]);return e.copy=function(){return qr(e,rv()).base(e.base())},Sr.apply(e,arguments)}function nv(){var e=iu(ns());return e.copy=function(){return qr(e,nv()).constant(e.constant())},Sr.apply(e,arguments)}function vu(){var e=ou(ns());return e.copy=function(){return qr(e,vu()).exponent(e.exponent())},Sr.apply(e,arguments)}function OT(){return vu.apply(null,arguments).exponent(.5)}const xa=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Xc,scaleDiverging:tv,scaleDivergingLog:rv,scaleDivergingPow:vu,scaleDivergingSqrt:OT,scaleDivergingSymlog:nv,scaleIdentity:M0,scaleImplicit:Al,scaleLinear:D0,scaleLog:z0,scaleOrdinal:Yc,scalePoint:yC,scalePow:su,scaleQuantile:F0,scaleQuantize:B0,scaleRadial:L0,scaleSequential:X0,scaleSequentialLog:Q0,scaleSequentialPow:gu,scaleSequentialQuantile:ev,scaleSequentialSqrt:CT,scaleSequentialSymlog:J0,scaleSqrt:dO,scaleSymlog:R0,scaleThreshold:U0,scaleTime:_T,scaleUtc:AT,tickFormat:I0},Symbol.toStringTag,{value:"Module"}));var kn=e=>e.chartData,TT=_([kn],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),av=(e,t,r,n)=>n?TT(e):kn(e);function qn(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(Zt(t)&&Zt(r))return!0}return!1}function Sm(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function IT(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,a,i;if(Zt(r))a=r;else if(typeof r=="function")return;if(Zt(n))i=n;else if(typeof n=="function")return;var o=[a,i];if(qn(o))return o}}function DT(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(qn(n))return Sm(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[a,i]=e,o,s;if(a==="auto")t!=null&&(o=Math.min(...t));else if(U(a))o=a;else if(typeof a=="function")try{t!=null&&(o=a(t?.[0]))}catch{}else if(typeof a=="string"&&jf.test(a)){var c=jf.exec(a);if(c==null||t==null)o=void 0;else{var u=+c[1];o=t[0]-u}}else o=t?.[0];if(i==="auto")t!=null&&(s=Math.max(...t));else if(U(i))s=i;else if(typeof i=="function")try{t!=null&&(s=i(t?.[1]))}catch{}else if(typeof i=="string"&&kf.test(i)){var d=kf.exec(i);if(d==null||t==null)s=void 0;else{var f=+d[1];s=t[1]+f}}else s=t?.[1];var m=[o,s];if(qn(m))return t==null?m:Sm(m,t,r)}}}var Yn=1e9,MT={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},xu,we=!0,Mt="[DecimalError] ",un=Mt+"Invalid argument: ",yu=Mt+"Exponent out of range: ",Xn=Math.floor,Qr=Math.pow,$T=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,wt,Fe=1e7,ve=7,iv=9007199254740991,no=Xn(iv/ve),L={};L.absoluteValue=L.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};L.comparedTo=L.cmp=function(e){var t,r,n,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};L.decimalPlaces=L.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*ve;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};L.dividedBy=L.div=function(e){return hr(this,new this.constructor(e))};L.dividedToIntegerBy=L.idiv=function(e){var t=this,r=t.constructor;return me(hr(t,new r(e),0,1),r.precision)};L.equals=L.eq=function(e){return!this.cmp(e)};L.exponent=function(){return Ie(this)};L.greaterThan=L.gt=function(e){return this.cmp(e)>0};L.greaterThanOrEqualTo=L.gte=function(e){return this.cmp(e)>=0};L.isInteger=L.isint=function(){return this.e>this.d.length-2};L.isNegative=L.isneg=function(){return this.s<0};L.isPositive=L.ispos=function(){return this.s>0};L.isZero=function(){return this.s===0};L.lessThan=L.lt=function(e){return this.cmp(e)<0};L.lessThanOrEqualTo=L.lte=function(e){return this.cmp(e)<1};L.logarithm=L.log=function(e){var t,r=this,n=r.constructor,a=n.precision,i=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(wt))throw Error(Mt+"NaN");if(r.s<1)throw Error(Mt+(r.s?"NaN":"-Infinity"));return r.eq(wt)?new n(0):(we=!1,t=hr(Ma(r,i),Ma(e,i),i),we=!0,me(t,a))};L.minus=L.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?lv(t,e):ov(t,(e.s=-e.s,e))};L.modulo=L.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(Mt+"NaN");return r.s?(we=!1,t=hr(r,e,0,1).times(e),we=!0,r.minus(t)):me(new n(r),a)};L.naturalExponential=L.exp=function(){return sv(this)};L.naturalLogarithm=L.ln=function(){return Ma(this)};L.negated=L.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};L.plus=L.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?ov(t,e):lv(t,(e.s=-e.s,e))};L.precision=L.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(un+e);if(t=Ie(a)+1,n=a.d.length-1,r=n*ve+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};L.squareRoot=L.sqrt=function(){var e,t,r,n,a,i,o,s=this,c=s.constructor;if(s.s<1){if(!s.s)return new c(0);throw Error(Mt+"NaN")}for(e=Ie(s),we=!1,a=Math.sqrt(+s),a==0||a==1/0?(t=Qt(s.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=Xn((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(a.toString()),r=c.precision,a=o=r+3;;)if(i=n,n=i.plus(hr(s,i,o+2)).times(.5),Qt(i.d).slice(0,o)===(t=Qt(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(me(i,r+1,0),i.times(i).eq(s)){n=i;break}}else if(t!="9999")break;o+=4}return we=!0,me(n,r)};L.times=L.mul=function(e){var t,r,n,a,i,o,s,c,u,d=this,f=d.constructor,m=d.d,h=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=m.length,u=h.length,c<u&&(i=m,m=h,h=i,o=c,c=u,u=o),i=[],o=c+u,n=o;n--;)i.push(0);for(n=u;--n>=0;){for(t=0,a=c+n;a>n;)s=i[a]+h[n]*m[a-n-1]+t,i[a--]=s%Fe|0,t=s/Fe|0;i[a]=(i[a]+t)%Fe|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,we?me(e,f.precision):e};L.toDecimalPlaces=L.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(nr(e,0,Yn),t===void 0?t=n.rounding:nr(t,0,8),me(r,e+Ie(r)+1,t))};L.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=yn(n,!0):(nr(e,0,Yn),t===void 0?t=a.rounding:nr(t,0,8),n=me(new a(n),e+1,t),r=yn(n,!0,e+1)),r};L.toFixed=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?yn(a):(nr(e,0,Yn),t===void 0?t=i.rounding:nr(t,0,8),n=me(new i(a),e+Ie(a)+1,t),r=yn(n.abs(),!1,e+Ie(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};L.toInteger=L.toint=function(){var e=this,t=e.constructor;return me(new t(e),Ie(e)+1,t.rounding)};L.toNumber=function(){return+this};L.toPower=L.pow=function(e){var t,r,n,a,i,o,s=this,c=s.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(wt);if(s=new c(s),!s.s){if(e.s<1)throw Error(Mt+"Infinity");return s}if(s.eq(wt))return s;if(n=c.precision,e.eq(wt))return me(s,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=s.s,o){if((r=d<0?-d:d)<=iv){for(a=new c(wt),t=Math.ceil(n/ve+4),we=!1;r%2&&(a=a.times(s),Pm(a.d,t)),r=Xn(r/2),r!==0;)s=s.times(s),Pm(s.d,t);return we=!0,e.s<0?new c(wt).div(a):me(a,n)}}else if(i<0)throw Error(Mt+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,s.s=1,we=!1,a=e.times(Ma(s,n+u)),we=!0,a=sv(a),a.s=i,a};L.toPrecision=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?(r=Ie(a),n=yn(a,r<=i.toExpNeg||r>=i.toExpPos)):(nr(e,1,Yn),t===void 0?t=i.rounding:nr(t,0,8),a=me(new i(a),e,t),r=Ie(a),n=yn(a,e<=r||r<=i.toExpNeg,e)),n};L.toSignificantDigits=L.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(nr(e,1,Yn),t===void 0?t=n.rounding:nr(t,0,8)),me(new n(r),e,t)};L.toString=L.valueOf=L.val=L.toJSON=L[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Ie(e),r=e.constructor;return yn(e,t<=r.toExpNeg||t>=r.toExpPos)};function ov(e,t){var r,n,a,i,o,s,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),we?me(t,f):t;if(c=e.d,u=t.d,o=e.e,a=t.e,c=c.slice(),i=o-a,i){for(i<0?(n=c,i=-i,s=u.length):(n=u,a=o,s=c.length),o=Math.ceil(f/ve),s=o>s?o+1:s+1,i>s&&(i=s,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(s=c.length,i=u.length,s-i<0&&(i=s,n=u,u=c,c=n),r=0;i;)r=(c[--i]=c[i]+u[i]+r)/Fe|0,c[i]%=Fe;for(r&&(c.unshift(r),++a),s=c.length;c[--s]==0;)c.pop();return t.d=c,t.e=a,we?me(t,f):t}function nr(e,t,r){if(e!==~~e||e<t||e>r)throw Error(un+e)}function Qt(e){var t,r,n,a=e.length-1,i="",o=e[0];if(a>0){for(i+=o,t=1;t<a;t++)n=e[t]+"",r=ve-n.length,r&&(i+=Dr(r)),i+=n;o=e[t],n=o+"",r=ve-n.length,r&&(i+=Dr(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var hr=function(){function e(n,a){var i,o=0,s=n.length;for(n=n.slice();s--;)i=n[s]*a+o,n[s]=i%Fe|0,o=i/Fe|0;return o&&n.unshift(o),n}function t(n,a,i,o){var s,c;if(i!=o)c=i>o?1:-1;else for(s=c=0;s<i;s++)if(n[s]!=a[s]){c=n[s]>a[s]?1:-1;break}return c}function r(n,a,i){for(var o=0;i--;)n[i]-=o,o=n[i]<a[i]?1:0,n[i]=o*Fe+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,o){var s,c,u,d,f,m,h,p,v,g,x,w,b,j,k,S,N,C,T=n.constructor,$=n.s==a.s?1:-1,O=n.d,E=a.d;if(!n.s)return new T(n);if(!a.s)throw Error(Mt+"Division by zero");for(c=n.e-a.e,N=E.length,k=O.length,h=new T($),p=h.d=[],u=0;E[u]==(O[u]||0);)++u;if(E[u]>(O[u]||0)&&--c,i==null?w=i=T.precision:o?w=i+(Ie(n)-Ie(a))+1:w=i,w<0)return new T(0);if(w=w/ve+2|0,u=0,N==1)for(d=0,E=E[0],w++;(u<k||d)&&w--;u++)b=d*Fe+(O[u]||0),p[u]=b/E|0,d=b%E|0;else{for(d=Fe/(E[0]+1)|0,d>1&&(E=e(E,d),O=e(O,d),N=E.length,k=O.length),j=N,v=O.slice(0,N),g=v.length;g<N;)v[g++]=0;C=E.slice(),C.unshift(0),S=E[0],E[1]>=Fe/2&&++S;do d=0,s=t(E,v,N,g),s<0?(x=v[0],N!=g&&(x=x*Fe+(v[1]||0)),d=x/S|0,d>1?(d>=Fe&&(d=Fe-1),f=e(E,d),m=f.length,g=v.length,s=t(f,v,m,g),s==1&&(d--,r(f,N<m?C:E,m))):(d==0&&(s=d=1),f=E.slice()),m=f.length,m<g&&f.unshift(0),r(v,f,g),s==-1&&(g=v.length,s=t(E,v,N,g),s<1&&(d++,r(v,N<g?C:E,g))),g=v.length):s===0&&(d++,v=[0]),p[u++]=d,s&&v[0]?v[g++]=O[j]||0:(v=[O[j]],g=1);while((j++<k||v[0]!==void 0)&&w--)}return p[0]||p.shift(),h.e=c,me(h,o?i+Ie(h)+1:i)}}();function sv(e,t){var r,n,a,i,o,s,c=0,u=0,d=e.constructor,f=d.precision;if(Ie(e)>16)throw Error(yu+Ie(e));if(!e.s)return new d(wt);for(we=!1,s=f,o=new d(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(n=Math.log(Qr(2,u))/Math.LN10*2+5|0,s+=n,r=a=i=new d(wt),d.precision=s;;){if(a=me(a.times(e),s),r=r.times(++c),o=i.plus(hr(a,r,s)),Qt(o.d).slice(0,s)===Qt(i.d).slice(0,s)){for(;u--;)i=me(i.times(i),s);return d.precision=f,t==null?(we=!0,me(i,f)):i}i=o}}function Ie(e){for(var t=e.e*ve,r=e.d[0];r>=10;r/=10)t++;return t}function Bs(e,t,r){if(t>e.LN10.sd())throw we=!0,r&&(e.precision=r),Error(Mt+"LN10 precision limit exceeded");return me(new e(e.LN10),t)}function Dr(e){for(var t="";e--;)t+="0";return t}function Ma(e,t){var r,n,a,i,o,s,c,u,d,f=1,m=10,h=e,p=h.d,v=h.constructor,g=v.precision;if(h.s<1)throw Error(Mt+(h.s?"NaN":"-Infinity"));if(h.eq(wt))return new v(0);if(t==null?(we=!1,u=g):u=t,h.eq(10))return t==null&&(we=!0),Bs(v,u);if(u+=m,v.precision=u,r=Qt(p),n=r.charAt(0),i=Ie(h),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)h=h.times(e),r=Qt(h.d),n=r.charAt(0),f++;i=Ie(h),n>1?(h=new v("0."+r),i++):h=new v(n+"."+r.slice(1))}else return c=Bs(v,u+2,g).times(i+""),h=Ma(new v(n+"."+r.slice(1)),u-m).plus(c),v.precision=g,t==null?(we=!0,me(h,g)):h;for(s=o=h=hr(h.minus(wt),h.plus(wt),u),d=me(h.times(h),u),a=3;;){if(o=me(o.times(d),u),c=s.plus(hr(o,new v(a),u)),Qt(c.d).slice(0,u)===Qt(s.d).slice(0,u))return s=s.times(2),i!==0&&(s=s.plus(Bs(v,u+2,g).times(i+""))),s=hr(s,new v(f),u),v.precision=g,t==null?(we=!0,me(s,g)):s;s=c,a+=2}}function Nm(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=Xn(r/ve),e.d=[],n=(r+1)%ve,r<0&&(n+=ve),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=ve;n<a;)e.d.push(+t.slice(n,n+=ve));t=t.slice(n),n=ve-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),we&&(e.e>no||e.e<-no))throw Error(yu+r)}else e.s=0,e.e=0,e.d=[0];return e}function me(e,t,r){var n,a,i,o,s,c,u,d,f=e.d;for(o=1,i=f[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=ve,a=t,u=f[d=0];else{if(d=Math.ceil((n+1)/ve),i=f.length,d>=i)return e;for(u=i=f[d],o=1;i>=10;i/=10)o++;n%=ve,a=n-ve+o}if(r!==void 0&&(i=Qr(10,o-a-1),s=u/i%10|0,c=t<0||f[d+1]!==void 0||u%i,c=r<4?(s||c)&&(r==0||r==(e.s<0?3:2)):s>5||s==5&&(r==4||c||r==6&&(n>0?a>0?u/Qr(10,o-a):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(i=Ie(e),f.length=1,t=t-i-1,f[0]=Qr(10,(ve-t%ve)%ve),e.e=Xn(-t/ve)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,i=1,d--):(f.length=d+1,i=Qr(10,ve-n),f[d]=a>0?(u/Qr(10,o-a)%Qr(10,a)|0)*i:0),c)for(;;)if(d==0){(f[0]+=i)==Fe&&(f[0]=1,++e.e);break}else{if(f[d]+=i,f[d]!=Fe)break;f[d--]=0,i=1}for(n=f.length;f[--n]===0;)f.pop();if(we&&(e.e>no||e.e<-no))throw Error(yu+Ie(e));return e}function lv(e,t){var r,n,a,i,o,s,c,u,d,f,m=e.constructor,h=m.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new m(e),we?me(t,h):t;if(c=e.d,f=t.d,n=t.e,u=e.e,c=c.slice(),o=u-n,o){for(d=o<0,d?(r=c,o=-o,s=f.length):(r=f,n=u,s=c.length),a=Math.max(Math.ceil(h/ve),s)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=c.length,s=f.length,d=a<s,d&&(s=a),a=0;a<s;a++)if(c[a]!=f[a]){d=c[a]<f[a];break}o=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),s=c.length,a=f.length-s;a>0;--a)c[s++]=0;for(a=f.length;a>o;){if(c[--a]<f[a]){for(i=a;i&&c[--i]===0;)c[i]=Fe-1;--c[i],c[a]+=Fe}c[a]-=f[a]}for(;c[--s]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,we?me(t,h):t):new m(0)}function yn(e,t,r){var n,a=Ie(e),i=Qt(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+Dr(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+Dr(-a-1)+i,r&&(n=r-o)>0&&(i+=Dr(n))):a>=o?(i+=Dr(a+1-o),r&&(n=r-a-1)>0&&(i=i+"."+Dr(n))):((n=a+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(i+="."),i+=Dr(n))),e.s<0?"-"+i:i}function Pm(e,t){if(e.length>t)return e.length=t,!0}function cv(e){var t,r,n;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(un+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return Nm(o,i.toString())}else if(typeof i!="string")throw Error(un+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,$T.test(i))Nm(o,i);else throw Error(un+i)}if(a.prototype=L,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=cv,a.config=a.set=zT,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function zT(e){if(!e||typeof e!="object")throw Error(Mt+"Object expected");var t,r,n,a=["precision",1,Yn,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(Xn(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(un+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(un+r+": "+n);return this}var xu=cv(MT);wt=new xu(1);const ue=xu;var RT=e=>e,uv={},dv=e=>e===uv,Em=e=>function t(){return arguments.length===0||arguments.length===1&&dv(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},fv=(e,t)=>e===1?t:Em(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var i=n.filter(o=>o!==uv).length;return i>=e?t(...n):fv(e-i,Em(function(){for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];var u=n.map(d=>dv(d)?s.shift():d);return t(...u,...s)}))}),as=e=>fv(e.length,e),Il=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},LT=as((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),FT=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return RT;var a=r.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce((s,c)=>c(s),i(...arguments))}},Dl=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),mv=e=>{var t=null,r=null;return function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return t&&a.every((o,s)=>{var c;return o===((c=t)===null||c===void 0?void 0:c[s])})||(t=a,r=e(...a)),r}};function hv(e){var t;return e===0?t=1:t=Math.floor(new ue(e).abs().log(10).toNumber())+1,t}function pv(e,t,r){for(var n=new ue(e),a=0,i=[];n.lt(t)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}as((e,t,r)=>{var n=+e,a=+t;return n+r*(a-n)});as((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});as((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var gv=e=>{var[t,r]=e,[n,a]=[t,r];return t>r&&([n,a]=[r,t]),[n,a]},vv=(e,t,r)=>{if(e.lte(0))return new ue(0);var n=hv(e.toNumber()),a=new ue(10).pow(n),i=e.div(a),o=n!==1?.05:.1,s=new ue(Math.ceil(i.div(o).toNumber())).add(r).mul(o),c=s.mul(a);return t?new ue(c.toNumber()):new ue(Math.ceil(c.toNumber()))},BT=(e,t,r)=>{var n=new ue(1),a=new ue(e);if(!a.isint()&&r){var i=Math.abs(e);i<1?(n=new ue(10).pow(hv(e)-1),a=new ue(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new ue(Math.floor(e)))}else e===0?a=new ue(Math.floor((t-1)/2)):r||(a=new ue(Math.floor(e)));var o=Math.floor((t-1)/2),s=FT(LT(c=>a.add(new ue(c-o).mul(n)).toNumber()),Il);return s(0,t)},yv=function(t,r,n,a){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new ue(0),tickMin:new ue(0),tickMax:new ue(0)};var o=vv(new ue(r).sub(t).div(n-1),a,i),s;t<=0&&r>=0?s=new ue(0):(s=new ue(t).add(r).div(2),s=s.sub(new ue(s).mod(o)));var c=Math.ceil(s.sub(t).div(o).toNumber()),u=Math.ceil(new ue(r).sub(s).div(o).toNumber()),d=c+u+1;return d>n?yv(t,r,n,a,i+1):(d<n&&(u=r>0?u+(n-d):u,c=r>0?c:c+(n-d)),{step:o,tickMin:s.sub(new ue(c).mul(o)),tickMax:s.add(new ue(u).mul(o))})};function UT(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(n,2),[o,s]=gv([t,r]);if(o===-1/0||s===1/0){var c=s===1/0?[o,...Il(0,n-1).map(()=>1/0)]:[...Il(0,n-1).map(()=>-1/0),s];return t>r?Dl(c):c}if(o===s)return BT(o,n,a);var{step:u,tickMin:d,tickMax:f}=yv(o,s,i,a,0),m=pv(d,f.add(new ue(.1).mul(u)),u);return t>r?Dl(m):m}function WT(e,t){var[r,n]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,o]=gv([r,n]);if(i===-1/0||o===1/0)return[r,n];if(i===o)return[i];var s=Math.max(t,2),c=vv(new ue(o).sub(i).div(s-1),a,0),u=[...pv(new ue(i),new ue(o),c),o];return a===!1&&(u=u.map(d=>Math.round(d))),r>n?Dl(u):u}var HT=mv(UT),qT=mv(WT),ZT=e=>e.rootProps.barCategoryGap,is=e=>e.rootProps.stackOffset,bu=e=>e.options.chartName,wu=e=>e.rootProps.syncId,xv=e=>e.rootProps.syncMethod,ju=e=>e.options.eventEmitter,sr={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},xt={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},os=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},KT={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:sr.angleAxisId,includeHidden:!1,name:void 0,reversed:sr.reversed,scale:sr.scale,tick:sr.tick,tickCount:void 0,ticks:void 0,type:sr.type,unit:void 0},GT={allowDataOverflow:xt.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:xt.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:xt.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:xt.scale,tick:xt.tick,tickCount:xt.tickCount,ticks:void 0,type:xt.type,unit:void 0},VT={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:sr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:sr.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:sr.scale,tick:sr.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},YT={allowDataOverflow:xt.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:xt.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:xt.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:xt.scale,tick:xt.tick,tickCount:xt.tickCount,ticks:void 0,type:"category",unit:void 0},ku=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?VT:KT,Su=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?YT:GT,ss=e=>e.polarOptions,Nu=_([jr,kr,Ye],cA),bv=_([ss,Nu],(e,t)=>{if(e!=null)return Fr(e.innerRadius,t,0)}),wv=_([ss,Nu],(e,t)=>{if(e!=null)return Fr(e.outerRadius,t,t*.8)}),XT=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},jv=_([ss],XT);_([ku,jv],os);var kv=_([Nu,bv,wv],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});_([Su,kv],os);var QT=_([Ne,ss,bv,wv,jr,kr],(e,t,r,n,a,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:o,cy:s,startAngle:c,endAngle:u}=t;return{cx:Fr(o,a,a/2),cy:Fr(s,i,i/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:u,clockWise:!1}}}),Ue=(e,t)=>t,ls=(e,t,r)=>r;function _m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ao(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_m(Object(r),!0).forEach(function(n){JT(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_m(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function JT(e,t,r){return(t=eI(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eI(e){var t=tI(e,"string");return typeof t=="symbol"?t:t+""}function tI(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ml=[0,"auto"],vt={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},Nr=(e,t)=>{var r=e.cartesianAxis.xAxis[t];return r??vt},yt={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:Ml,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Vo},Zr=(e,t)=>{var r=e.cartesianAxis.yAxis[t];return r??yt},rI={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},Pu=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??rI},mt=(e,t,r)=>{switch(t){case"xAxis":return Nr(e,r);case"yAxis":return Zr(e,r);case"zAxis":return Pu(e,r);case"angleAxis":return ku(e,r);case"radiusAxis":return Su(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},nI=(e,t,r)=>{switch(t){case"xAxis":return Nr(e,r);case"yAxis":return Zr(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Ga=(e,t,r)=>{switch(t){case"xAxis":return Nr(e,r);case"yAxis":return Zr(e,r);case"angleAxis":return ku(e,r);case"radiusAxis":return Su(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Sv=e=>e.graphicalItems.countOfBars>0;function Nv(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var Pv=e=>e.graphicalItems.cartesianItems,aI=_([Ue,ls],Nv),Ev=(e,t,r)=>e.filter(r).filter(n=>t?.includeHidden===!0?!0:!n.hide),Va=_([Pv,mt,aI],Ev),_v=e=>e.filter(t=>t.stackId===void 0),iI=_([Va],_v),Av=e=>e.map(t=>t.data).filter(Boolean).flat(1),oI=_([Va],Av),Cv=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=t;return e.length>0?e:r.slice(n,a+1)},cs=_([oI,av],Cv),Ov=(e,t,r)=>t?.dataKey!=null?e.map(n=>({value:kt(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(a=>({value:kt(a,n)}))):e.map(n=>({value:n})),us=_([cs,mt,Va],Ov);function Tv(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Sn(e){return e.filter(t=>rr(t)||t instanceof Date).map(Number).filter(t=>It(t)===!1)}function sI(e,t,r){return!r||typeof t!="number"||It(t)?[]:r.length?Sn(r.flatMap(n=>{var a=kt(e,n.dataKey),i,o;if(Array.isArray(a)?[i,o]=a:i=o=a,!(!Zt(i)||!Zt(o)))return[t-i,t+o]})):[]}var Iv=(e,t,r)=>{var n={},a=t.reduce((i,o)=>(o.stackId==null||(i[o.stackId]==null&&(i[o.stackId]=[]),i[o.stackId].push(o)),i),n);return Object.fromEntries(Object.entries(a).map(i=>{var[o,s]=i,c=s.map(u=>u.dataKey);return[o,{stackedData:SA(e,c,r),graphicalItems:s}]}))},lI=_([cs,Va,is],Iv),Dv=(e,t,r)=>{var{dataStartIndex:n,dataEndIndex:a}=t;if(r!=="zAxis"){var i=_A(e,n,a);if(!(i!=null&&i[0]===0&&i[1]===0))return i}},cI=_([lI,kn,Ue],Dv),Mv=(e,t,r,n)=>r.length>0?e.flatMap(a=>r.flatMap(i=>{var o,s,c=(o=i.errorBars)===null||o===void 0?void 0:o.filter(d=>Tv(n,d)),u=kt(a,(s=t.dataKey)!==null&&s!==void 0?s:i.dataKey);return{value:u,errorDomain:sI(a,u,c)}})).filter(Boolean):t?.dataKey!=null?e.map(a=>({value:kt(a,t.dataKey),errorDomain:[]})):e.map(a=>({value:a,errorDomain:[]})),uI=_(cs,mt,iI,Ue,Mv);function dI(e){var{value:t}=e;if(rr(t)||t instanceof Date)return t}var fI=e=>{var t=e.flatMap(n=>[n.value,n.errorDomain]).flat(1),r=Sn(t);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},mI=(e,t,r)=>{var n=e.map(dI).filter(a=>a!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&qp(n))?k0(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},Eu=e=>{var t;if(e==null||!("domain"in e))return Ml;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=Sn(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:Ml},_u=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r.filter(Boolean);if(a.length!==0){var i=a.flat(),o=Math.min(...i),s=Math.max(...i);return[o,s]}},$v=e=>e.referenceElements.dots,Qn=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),hI=_([$v,Ue,ls],Qn),zv=e=>e.referenceElements.areas,pI=_([zv,Ue,ls],Qn),Rv=e=>e.referenceElements.lines,gI=_([Rv,Ue,ls],Qn),Lv=(e,t)=>{var r=Sn(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},vI=_(hI,Ue,Lv),Fv=(e,t)=>{var r=Sn(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},yI=_([pI,Ue],Fv),Bv=(e,t)=>{var r=Sn(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},xI=_(gI,Ue,Bv),bI=_(vI,xI,yI,(e,t,r)=>_u(e,r,t)),wI=_([mt],Eu),Uv=(e,t,r,n,a)=>{var i=IT(t,e.allowDataOverflow);return i??DT(t,_u(r,a,fI(n)),e.allowDataOverflow)},jI=_([mt,wI,cI,uI,bI],Uv),kI=[0,1],Wv=(e,t,r,n,a,i,o)=>{if(!(e==null||r==null||r.length===0)){var{dataKey:s,type:c}=e,u=Wr(t,i);return u&&s==null?k0(0,r.length):c==="category"?mI(n,e,u):a==="expand"?kI:o}},Au=_([mt,Ne,cs,us,is,Ue,jI],Wv),Hv=(e,t,r,n,a)=>{if(e!=null){var{scale:i,type:o}=e;if(i==="auto")return t==="radial"&&a==="radiusAxis"?"band":t==="radial"&&a==="angleAxis"?"linear":o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":o==="category"?"band":"linear";if(typeof i=="string"){var s="scale".concat(Ec(i));return s in xa?s:"point"}}},Ya=_([mt,Ne,Sv,bu,Ue],Hv);function SI(e){if(e!=null){if(e in xa)return xa[e]();var t="scale".concat(Ec(e));if(t in xa)return xa[t]()}}function Cu(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var a=SI(t);if(a!=null){var i=a.domain(r).range(n);return bA(i),i}}}var qv=(e,t,r)=>{var n=Eu(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&qn(e))return HT(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&qn(e))return qT(e,t.tickCount,t.allowDecimals)}},Ou=_([Au,Ga,Ya],qv),Zv=(e,t,r,n)=>{if(n!=="angleAxis"&&e?.type==="number"&&qn(t)&&Array.isArray(r)&&r.length>0){var a=t[0],i=r[0],o=t[1],s=r[r.length-1];return[Math.min(a,i),Math.max(o,s)]}return t},NI=_([mt,Au,Ou,Ue],Zv),PI=_(us,mt,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(Sn(e.map(s=>s.value))).sort((s,c)=>s-c);if(n.length<2)return 1/0;var a=n[n.length-1]-n[0];if(a===0)return 1/0;for(var i=0;i<n.length-1;i++){var o=n[i+1]-n[i];r=Math.min(r,o)}return r/a}}),Kv=_(PI,Ne,ZT,Ye,(e,t,r,n)=>n,(e,t,r,n,a)=>{if(!Zt(e))return 0;var i=t==="vertical"?n.height:n.width;if(a==="gap")return e*i/2;if(a==="no-gap"){var o=Fr(r,e*i),s=e*i/2;return s-o-(s-o)/i*o}return 0}),EI=(e,t)=>{var r=Nr(e,t);return r==null||typeof r.padding!="string"?0:Kv(e,"xAxis",t,r.padding)},_I=(e,t)=>{var r=Zr(e,t);return r==null||typeof r.padding!="string"?0:Kv(e,"yAxis",t,r.padding)},AI=_(Nr,EI,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:a}=e;return typeof a=="string"?{left:t,right:t}:{left:((r=a.left)!==null&&r!==void 0?r:0)+t,right:((n=a.right)!==null&&n!==void 0?n:0)+t}}),CI=_(Zr,_I,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:a}=e;return typeof a=="string"?{top:t,bottom:t}:{top:((r=a.top)!==null&&r!==void 0?r:0)+t,bottom:((n=a.bottom)!==null&&n!==void 0?n:0)+t}}),OI=_([Ye,AI,Xo,Yo,(e,t,r)=>r],(e,t,r,n,a)=>{var{padding:i}=n;return a?[i.left,r.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),TI=_([Ye,Ne,CI,Xo,Yo,(e,t,r)=>r],(e,t,r,n,a,i)=>{var{padding:o}=a;return i?[n.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),Xa=(e,t,r,n)=>{var a;switch(t){case"xAxis":return OI(e,r,n);case"yAxis":return TI(e,r,n);case"zAxis":return(a=Pu(e,r))===null||a===void 0?void 0:a.range;case"angleAxis":return jv(e);case"radiusAxis":return kv(e,r);default:return}},Gv=_([mt,Xa],os),Jn=_([mt,Ya,NI,Gv],Cu);_(Va,Ue,(e,t)=>e.flatMap(r=>{var n;return(n=r.errorBars)!==null&&n!==void 0?n:[]}).filter(r=>Tv(t,r)));function Vv(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var ds=(e,t)=>t,fs=(e,t,r)=>r,II=_(Hc,ds,fs,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(Vv)),DI=_(qc,ds,fs,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(Vv)),Yv=(e,t)=>({width:e.width,height:t.height}),MI=(e,t)=>{var r=typeof t.width=="number"?t.width:Vo;return{width:r,height:e.height}},$I=_(Ye,Nr,Yv),zI=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},RI=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},LI=_(kr,Ye,II,ds,fs,(e,t,r,n,a)=>{var i={},o;return r.forEach(s=>{var c=Yv(t,s);o==null&&(o=zI(t,n,e));var u=n==="top"&&!a||n==="bottom"&&a;i[s.id]=o-Number(u)*c.height,o+=(u?-1:1)*c.height}),i}),FI=_(jr,Ye,DI,ds,fs,(e,t,r,n,a)=>{var i={},o;return r.forEach(s=>{var c=MI(t,s);o==null&&(o=RI(t,n,e));var u=n==="left"&&!a||n==="right"&&a;i[s.id]=o-Number(u)*c.width,o+=(u?-1:1)*c.width}),i}),BI=(e,t)=>{var r=Ye(e),n=Nr(e,t);if(n!=null){var a=LI(e,n.orientation,n.mirror),i=a[t];return i==null?{x:r.left,y:0}:{x:r.left,y:i}}},UI=(e,t)=>{var r=Ye(e),n=Zr(e,t);if(n!=null){var a=FI(e,n.orientation,n.mirror),i=a[t];return i==null?{x:0,y:r.top}:{x:i,y:r.top}}},WI=_(Ye,Zr,(e,t)=>{var r=typeof t.width=="number"?t.width:Vo;return{width:r,height:e.height}}),Xv=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:a,type:i,dataKey:o}=r,s=Wr(e,n),c=t.map(u=>u.value);if(o&&s&&i==="category"&&a&&qp(c))return c}},Tu=_([Ne,us,mt,Ue],Xv),Qv=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:a,scale:i}=r,o=Wr(e,n);if(o&&(a==="number"||i!=="auto"))return t.map(s=>s.value)}},Iu=_([Ne,us,Ga,Ue],Qv),Am=_([Ne,nI,Ya,Jn,Tu,Iu,Xa,Ou,Ue],(e,t,r,n,a,i,o,s,c)=>{if(t==null)return null;var u=Wr(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:i,duplicateDomain:a,isCategorical:u,niceTicks:s,range:o,realScaleType:r,scale:n}}),HI=(e,t,r,n,a,i,o,s,c)=>{if(!(t==null||n==null)){var u=Wr(e,c),{type:d,ticks:f,tickCount:m}=t,h=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,p=d==="category"&&n.bandwidth?n.bandwidth()/h:0;p=c==="angleAxis"&&i!=null&&i.length>=2?Ct(i[0]-i[1])*2*p:p;var v=f||a;if(v){var g=v.map((x,w)=>{var b=o?o.indexOf(x):x;return{index:w,coordinate:n(b)+p,value:x,offset:p}});return g.filter(x=>!It(x.coordinate))}return u&&s?s.map((x,w)=>({coordinate:n(x)+p,value:x,index:w,offset:p})):n.ticks?n.ticks(m).map(x=>({coordinate:n(x)+p,value:x,offset:p})):n.domain().map((x,w)=>({coordinate:n(x)+p,value:o?o[x]:x,index:w,offset:p}))}},Jv=_([Ne,Ga,Ya,Jn,Ou,Xa,Tu,Iu,Ue],HI),qI=(e,t,r,n,a,i,o)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var s=Wr(e,o),{tickCount:c}=t,u=0;return u=o==="angleAxis"&&n?.length>=2?Ct(n[0]-n[1])*2*u:u,s&&i?i.map((d,f)=>({coordinate:r(d)+u,value:d,index:f,offset:u})):r.ticks?r.ticks(c).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,f)=>({coordinate:r(d)+u,value:a?a[d]:d,index:f,offset:u}))}},ey=_([Ne,Ga,Jn,Xa,Tu,Iu,Ue],qI),ms=_(mt,Jn,(e,t)=>{if(!(e==null||t==null))return ao(ao({},e),{},{scale:t})}),ZI=_([mt,Ya,Au,Gv],Cu);_((e,t,r)=>Pu(e,r),ZI,(e,t)=>{if(!(e==null||t==null))return ao(ao({},e),{},{scale:t})});var KI=_([Ne,Hc,qc],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),ty=e=>e.options.defaultTooltipEventType,ry=e=>e.options.validateTooltipEventTypes;function ny(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function Du(e,t){var r=ty(e),n=ry(e);return ny(t,r,n)}function GI(e){return H(t=>Du(t,e))}var ay=(e,t)=>{var r,n=Number(t);if(!(It(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},VI=e=>e.tooltip.settings,Mr={active:!1,index:null,dataKey:void 0,coordinate:void 0},YI={itemInteraction:{click:Mr,hover:Mr},axisInteraction:{click:Mr,hover:Mr},keyboardInteraction:Mr,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},iy=zt({name:"tooltip",initialState:YI,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=fr(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:XI,removeTooltipEntrySettings:QI,setTooltipSettingsState:JI,setActiveMouseOverItemIndex:eD,mouseLeaveItem:yR,mouseLeaveChart:oy,setActiveClickItemIndex:xR,setMouseOverAxisIndex:sy,setMouseClickAxisIndex:tD,setSyncInteraction:$l,setKeyboardInteraction:zl}=iy.actions,rD=iy.reducer;function Cm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ji(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Cm(Object(r),!0).forEach(function(n){nD(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nD(e,t,r){return(t=aD(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aD(e){var t=iD(e,"string");return typeof t=="symbol"?t:t+""}function iD(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oD(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function sD(e){return e.index!=null}var ly=(e,t,r,n)=>{if(t==null)return Mr;var a=oD(e,t,r);if(a==null)return Mr;if(a.active)return a;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(sD(a)){if(i)return ji(ji({},a),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return ji(ji({},Mr),{},{coordinate:a.coordinate})},Mu=(e,t)=>{var r=e?.index;if(r==null)return null;var n=Number(r);if(!Zt(n))return r;var a=0,i=1/0;return t.length>0&&(i=t.length-1),String(Math.max(a,Math.min(n,i)))},cy=(e,t,r,n,a,i,o,s)=>{if(!(i==null||s==null)){var c=o[0],u=c==null?void 0:s(c.positions,i);if(u!=null)return u;var d=a?.[Number(i)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:d.coordinate}}}},uy=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var a;return r==="hover"?a=e.itemInteraction.hover.dataKey:a=e.itemInteraction.click.dataKey,a==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(i=>{var o;return((o=i.settings)===null||o===void 0?void 0:o.dataKey)===a})},Qa=e=>e.options.tooltipPayloadSearcher,ea=e=>e.tooltip;function Om(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Tm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Om(Object(r),!0).forEach(function(n){lD(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Om(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lD(e,t,r){return(t=cD(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cD(e){var t=uD(e,"string");return typeof t=="symbol"?t:t+""}function uD(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dD(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function fD(e,t){return e??t}var dy=(e,t,r,n,a,i,o)=>{if(!(t==null||i==null)){var{chartData:s,computedData:c,dataStartIndex:u,dataEndIndex:d}=r,f=[];return e.reduce((m,h)=>{var p,{dataDefinedOnItem:v,settings:g}=h,x=fD(v,s),w=dD(x,u,d),b=(p=g?.dataKey)!==null&&p!==void 0?p:n?.dataKey,j=g?.nameKey,k;if(n!=null&&n.dataKey&&Array.isArray(w)&&!Array.isArray(w[0])&&o==="axis"?k=Zp(w,n.dataKey,a):k=i(w,t,c,j),Array.isArray(k))k.forEach(N=>{var C=Tm(Tm({},g),{},{name:N.name,unit:N.unit,color:void 0,fill:void 0});m.push(Sf({tooltipEntrySettings:C,dataKey:N.dataKey,payload:N.payload,value:kt(N.payload,N.dataKey),name:N.name}))});else{var S;m.push(Sf({tooltipEntrySettings:g,dataKey:b,payload:k,value:kt(k,b),name:(S=kt(k,j))!==null&&S!==void 0?S:g?.name}))}return m},f)}},We=e=>{var t=Ne(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},ta=e=>e.tooltip.settings.axisId,Xe=e=>{var t=We(e),r=ta(e);return Ga(e,t,r)},$u=_([Xe,Ne,Sv,bu,We],Hv),mD=_([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),hD=_([We,ta],Nv),hs=_([mD,Xe,hD],Ev),pD=_([hs],Av),Nn=_([pD,kn],Cv),zu=_([Nn,Xe,hs],Ov),gD=_([Xe],Eu),vD=_([Nn,hs,is],Iv),yD=_([vD,kn,We],Dv),xD=_([hs],_v),bD=_([Nn,Xe,xD,We],Mv),wD=_([$v,We,ta],Qn),jD=_([wD,We],Lv),kD=_([zv,We,ta],Qn),SD=_([kD,We],Fv),ND=_([Rv,We,ta],Qn),PD=_([ND,We],Bv),ED=_([jD,PD,SD],_u),_D=_([Xe,gD,yD,bD,ED],Uv),fy=_([Xe,Ne,Nn,zu,is,We,_D],Wv),AD=_([fy,Xe,$u],qv),CD=_([Xe,fy,AD,We],Zv),my=e=>{var t=We(e),r=ta(e),n=!1;return Xa(e,t,r,n)},hy=_([Xe,my],os),py=_([Xe,$u,CD,hy],Cu),OD=_([Ne,zu,Xe,We],Xv),TD=_([Ne,zu,Xe,We],Qv),ID=(e,t,r,n,a,i,o,s)=>{if(t){var{type:c}=t,u=Wr(e,s);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=c==="category"&&n.bandwidth?n.bandwidth()/d:0;return f=s==="angleAxis"&&a!=null&&a?.length>=2?Ct(a[0]-a[1])*2*f:f,u&&o?o.map((m,h)=>({coordinate:n(m)+f,value:m,index:h,offset:f})):n.domain().map((m,h)=>({coordinate:n(m)+f,value:i?i[m]:m,index:h,offset:f}))}}},Pr=_([Ne,Xe,$u,py,my,OD,TD,We],ID),Ru=_([ty,ry,VI],(e,t,r)=>ny(r.shared,e,t)),gy=e=>e.tooltip.settings.trigger,Lu=e=>e.tooltip.settings.defaultIndex,ps=_([ea,Ru,gy,Lu],ly),$a=_([ps,Nn],Mu),vy=_([Pr,$a],ay),DD=_([ps],e=>{if(e)return e.dataKey}),yy=_([ea,Ru,gy,Lu],uy),MD=_([jr,kr,Ne,Ye,Pr,Lu,yy,Qa],cy),$D=_([ps,MD],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),zD=_([ps],e=>e.active),RD=_([yy,$a,kn,Xe,vy,Qa,Ru],dy),LD=_([RD],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function Im(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Dm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Im(Object(r),!0).forEach(function(n){FD(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Im(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FD(e,t,r){return(t=BD(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BD(e){var t=UD(e,"string");return typeof t=="symbol"?t:t+""}function UD(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var WD=()=>H(Xe),HD=()=>{var e=WD(),t=H(Pr),r=H(py);return yl(Dm(Dm({},e),{},{scale:r}),t)},qD=()=>H(bu),Fu=(e,t)=>t,xy=(e,t,r)=>r,Bu=(e,t,r,n)=>n,ZD=_(Pr,e=>Zo(e,t=>t.coordinate)),Uu=_([ea,Fu,xy,Bu],ly),by=_([Uu,Nn],Mu),KD=(e,t,r)=>{if(t!=null){var n=ea(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},wy=_([ea,Fu,xy,Bu],uy),io=_([jr,kr,Ne,Ye,Pr,Bu,wy,Qa],cy),GD=_([Uu,io],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),jy=_(Pr,by,ay),VD=_([wy,by,kn,Xe,jy,Qa,Fu],dy),YD=_([Uu],e=>({isActive:e.active,activeIndex:e.index})),XD=(e,t,r,n,a,i,o,s)=>{if(!(!e||!t||!n||!a||!i)){var c=AA(e.chartX,e.chartY,t,r,s);if(c){var u=OA(c,t),d=yA(u,o,i,n,a),f=CA(t,i,d,c);return{activeIndex:String(d),activeCoordinate:f}}}};function Rl(){return Rl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rl.apply(null,arguments)}function Mm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ki(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Mm(Object(r),!0).forEach(function(n){QD(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function QD(e,t,r){return(t=JD(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JD(e){var t=eM(e,"string");return typeof t=="symbol"?t:t+""}function eM(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tM(e){var{coordinate:t,payload:r,index:n,offset:a,tooltipAxisBandSize:i,layout:o,cursor:s,tooltipEventType:c,chartName:u}=e,d=t,f=r,m=n;if(!s||!d||u!=="ScatterChart"&&c!=="axis")return null;var h,p;if(u==="ScatterChart")h=d,p=y2;else if(u==="BarChart")h=x2(o,d,a,i),p=X2;else if(o==="radial"){var{cx:v,cy:g,radius:x,startAngle:w,endAngle:b}=y0(d);h={cx:v,cy:g,startAngle:w,endAngle:b,innerRadius:x,outerRadius:x},p=tC}else h={points:rC(o,d,a)},p=u0;var j=typeof s=="object"&&"className"in s?s.className:void 0,k=ki(ki(ki(ki({stroke:"#ccc",pointerEvents:"none"},a),h),ye(s,!1)),{},{payload:f,payloadIndex:m,className:fe("recharts-tooltip-cursor",j)});return y.isValidElement(s)?y.cloneElement(s,k):y.createElement(p,k)}function rM(e){var t=HD(),r=i0(),n=Kc(),a=qD();return y.createElement(tM,Rl({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:n,tooltipAxisBandSize:t,chartName:a}))}var ky=y.createContext(null),nM=()=>y.useContext(ky),Sy={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function i(c,u,d,f,m){if(typeof d!="function")throw new TypeError("The listener must be a function");var h=new a(d,f||c,m),p=r?r+u:u;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],h]:c._events[p].push(h):(c._events[p]=h,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function s(){this._events=new n,this._eventsCount=0}s.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},s.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var m=0,h=f.length,p=new Array(h);m<h;m++)p[m]=f[m].fn;return p},s.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},s.prototype.emit=function(u,d,f,m,h,p){var v=r?r+u:u;if(!this._events[v])return!1;var g=this._events[v],x=arguments.length,w,b;if(g.fn){switch(g.once&&this.removeListener(u,g.fn,void 0,!0),x){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,d),!0;case 3:return g.fn.call(g.context,d,f),!0;case 4:return g.fn.call(g.context,d,f,m),!0;case 5:return g.fn.call(g.context,d,f,m,h),!0;case 6:return g.fn.call(g.context,d,f,m,h,p),!0}for(b=1,w=new Array(x-1);b<x;b++)w[b-1]=arguments[b];g.fn.apply(g.context,w)}else{var j=g.length,k;for(b=0;b<j;b++)switch(g[b].once&&this.removeListener(u,g[b].fn,void 0,!0),x){case 1:g[b].fn.call(g[b].context);break;case 2:g[b].fn.call(g[b].context,d);break;case 3:g[b].fn.call(g[b].context,d,f);break;case 4:g[b].fn.call(g[b].context,d,f,m);break;default:if(!w)for(k=1,w=new Array(x-1);k<x;k++)w[k-1]=arguments[k];g[b].fn.apply(g[b].context,w)}}return!0},s.prototype.on=function(u,d,f){return i(this,u,d,f,!1)},s.prototype.once=function(u,d,f){return i(this,u,d,f,!0)},s.prototype.removeListener=function(u,d,f,m){var h=r?r+u:u;if(!this._events[h])return this;if(!d)return o(this,h),this;var p=this._events[h];if(p.fn)p.fn===d&&(!m||p.once)&&(!f||p.context===f)&&o(this,h);else{for(var v=0,g=[],x=p.length;v<x;v++)(p[v].fn!==d||m&&!p[v].once||f&&p[v].context!==f)&&g.push(p[v]);g.length?this._events[h]=g.length===1?g[0]:g:o(this,h)}return this},s.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,e.exports=s})(Sy);var aM=Sy.exports;const iM=Ur(aM);var za=new iM,Ll="recharts.syncEvent.tooltip",$m="recharts.syncEvent.brush";function oM(e,t){if(t){var r=Number.parseInt(t,10);if(!It(r))return e?.[r]}}var sM={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},Ny=zt({name:"options",initialState:sM,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),lM=Ny.reducer,{createEventEmitter:cM}=Ny.actions;function uM(e){return e.tooltip.syncInteraction}var dM={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},Py=zt({name:"chartData",initialState:dM,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:zm,setDataStartEndIndexes:fM,setComputedData:bR}=Py.actions,mM=Py.reducer,Ey=()=>{};function hM(){var e=H(wu),t=H(ju),r=ot(),n=H(xv),a=H(Pr),i=Kc(),o=Zc(),s=H(c=>c.rootProps.className);y.useEffect(()=>{if(e==null)return Ey;var c=(u,d,f)=>{if(t!==f&&e===u){if(n==="index"){r(d);return}if(a!=null){var m;if(typeof n=="function"){var h={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},p=n(a,h);m=a[p]}else n==="value"&&(m=a.find(S=>String(S.value)===d.payload.label));var{coordinate:v}=d.payload;if(m==null||d.payload.active===!1||v==null||o==null){r($l({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:g,y:x}=v,w=Math.min(g,o.x+o.width),b=Math.min(x,o.y+o.height),j={x:i==="horizontal"?m.coordinate:w,y:i==="horizontal"?b:m.coordinate},k=$l({active:d.payload.active,coordinate:j,dataKey:d.payload.dataKey,index:String(m.index),label:d.payload.label});r(k)}}};return za.on(Ll,c),()=>{za.off(Ll,c)}},[s,r,t,e,n,a,i,o])}function pM(){var e=H(wu),t=H(ju),r=ot();y.useEffect(()=>{if(e==null)return Ey;var n=(a,i,o)=>{t!==o&&e===a&&r(fM(i))};return za.on($m,n),()=>{za.off($m,n)}},[r,t,e])}function gM(){var e=ot();y.useEffect(()=>{e(cM())},[e]),hM(),pM()}function vM(e,t,r,n,a,i){var o=H(m=>KD(m,e,t)),s=H(ju),c=H(wu),u=H(xv),d=H(uM),f=d?.active;y.useEffect(()=>{if(!f&&c!=null&&s!=null){var m=$l({active:i,coordinate:r,dataKey:o,index:a,label:typeof n=="number"?String(n):n});za.emit(Ll,c,m,s)}},[f,r,o,a,n,s,c,u,i])}function Rm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Lm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Rm(Object(r),!0).forEach(function(n){yM(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yM(e,t,r){return(t=xM(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xM(e){var t=bM(e,"string");return typeof t=="symbol"?t:t+""}function bM(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wM(e){return e.dataKey}function jM(e,t){return y.isValidElement(e)?y.cloneElement(e,t):typeof e=="function"?y.createElement(e,t):y.createElement(YA,t)}var Fm=[],kM={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Wa.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Bm(e){var t=bn(e,kM),{active:r,allowEscapeViewBox:n,animationDuration:a,animationEasing:i,content:o,filterNull:s,isAnimationActive:c,offset:u,payloadUniqBy:d,position:f,reverseDirection:m,useTranslate3d:h,wrapperStyle:p,cursor:v,shared:g,trigger:x,defaultIndex:w,portal:b,axisId:j}=t,k=ot(),S=typeof w=="number"?String(w):w;y.useEffect(()=>{k(JI({shared:g,trigger:x,axisId:j,active:r,defaultIndex:S}))},[k,g,x,j,r,S]);var N=Zc(),C=c0(),T=GI(g),{activeIndex:$,isActive:O}=H(Oe=>YD(Oe,T,x,S)),E=H(Oe=>VD(Oe,T,x,S)),F=H(Oe=>jy(Oe,T,x,S)),Z=H(Oe=>GD(Oe,T,x,S)),Y=E,B=nM(),q=r??O,[te,re]=g_([Y,q]),Pe=T==="axis"?F:void 0;vM(T,x,Z,Pe,$,q);var K=b??B;if(K==null)return null;var z=Y??Fm;q||(z=Fm),s&&z.length&&(z=DE(Y.filter(Oe=>Oe.value!=null&&(Oe.hide!==!0||t.includeHidden)),d,wM));var X=z.length>0,Ce=y.createElement(n2,{allowEscapeViewBox:n,animationDuration:a,animationEasing:i,isAnimationActive:c,active:q,coordinate:Z,hasPayload:X,offset:u,position:f,reverseDirection:m,useTranslate3d:h,viewBox:N,wrapperStyle:p,lastBoundingBox:te,innerRef:re,hasPortalFromProps:!!b},jM(o,Lm(Lm({},t),{},{payload:z,label:Pe,active:q,coordinate:Z,accessibilityLayer:C})));return y.createElement(y.Fragment,null,Vl.createPortal(Ce,K),q&&y.createElement(rM,{cursor:v,tooltipEventType:T,coordinate:Z,payload:Y,index:$}))}var _y={},Ay={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=0,a={}){typeof a!="object"&&(a={});let i=null,o=null,s=null,c=0,u=null,d;const{leading:f=!1,trailing:m=!0,maxWait:h}=a,p="maxWait"in a,v=p?Math.max(Number(h)||0,n):0,g=N=>(i!==null&&(d=r.apply(o,i)),i=o=null,c=N,d),x=N=>(c=N,u=setTimeout(k,n),f&&i!==null?g(N):d),w=N=>(u=null,m&&i!==null?g(N):d),b=N=>{if(s===null)return!0;const C=N-s,T=C>=n||C<0,$=p&&N-c>=v;return T||$},j=N=>{const C=s===null?0:N-s,T=n-C,$=v-(N-c);return p?Math.min(T,$):T},k=()=>{const N=Date.now();if(b(N))return w(N);u=setTimeout(k,j(N))},S=function(...N){const C=Date.now(),T=b(C);if(i=N,o=this,s=C,T){if(u===null)return x(C);if(p)return clearTimeout(u),u=setTimeout(k,n),g(C)}return u===null&&(u=setTimeout(k,n)),d};return S.cancel=()=>{u!==null&&clearTimeout(u),c=0,s=i=o=u=null},S.flush=()=>u===null?d:w(Date.now()),S}e.debounce=t})(Ay);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ay;function r(n,a=0,i={}){const{leading:o=!0,trailing:s=!0}=i;return t.debounce(n,a,{leading:o,maxWait:a,trailing:s})}e.throttle=r})(_y);var SM=_y.throttle;const NM=Ur(SM);var ja=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]};function Um(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Us(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Um(Object(r),!0).forEach(function(n){PM(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Um(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PM(e,t,r){return(t=EM(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EM(e){var t=_M(e,"string");return typeof t=="symbol"?t:t+""}function _M(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Wm=y.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:a="100%",height:i="100%",minWidth:o=0,minHeight:s,maxHeight:c,children:u,debounce:d=0,id:f,className:m,onResize:h,style:p={}}=e,v=y.useRef(null),g=y.useRef();g.current=h,y.useImperativeHandle(t,()=>v.current);var[x,w]=y.useState({containerWidth:n.width,containerHeight:n.height}),b=y.useCallback((k,S)=>{w(N=>{var C=Math.round(k),T=Math.round(S);return N.containerWidth===C&&N.containerHeight===T?N:{containerWidth:C,containerHeight:T}})},[]);y.useEffect(()=>{var k=T=>{var $,{width:O,height:E}=T[0].contentRect;b(O,E),($=g.current)===null||$===void 0||$.call(g,O,E)};d>0&&(k=NM(k,d,{trailing:!0,leading:!1}));var S=new ResizeObserver(k),{width:N,height:C}=v.current.getBoundingClientRect();return b(N,C),S.observe(v.current),()=>{S.disconnect()}},[b,d]);var j=y.useMemo(()=>{var{containerWidth:k,containerHeight:S}=x;if(k<0||S<0)return null;ja(en(a)||en(i),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,i),ja(!r||r>0,"The aspect(%s) must be greater than zero.",r);var N=en(a)?k:a,C=en(i)?S:i;return r&&r>0&&(N?C=N/r:C&&(N=C*r),c&&C>c&&(C=c)),ja(N>0||C>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,N,C,a,i,o,s,r),y.Children.map(u,T=>y.cloneElement(T,{width:N,height:C,style:Us({width:N,height:C},T.props.style)}))},[r,u,i,c,s,o,x,a]);return y.createElement("div",{id:f?"".concat(f):void 0,className:fe("recharts-responsive-container",m),style:Us(Us({},p),{},{width:a,height:i,minWidth:o,minHeight:s,maxHeight:c}),ref:v},y.createElement("div",{style:{width:0,height:0,overflow:"visible"}},j))});function Hm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Fl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Hm(Object(r),!0).forEach(function(n){AM(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function AM(e,t,r){return(t=CM(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CM(e){var t=OM(e,"string");return typeof t=="symbol"?t:t+""}function OM(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Cn={widthCache:{},cacheCount:0},TM=2e3,IM={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},qm="recharts_measurement_span";function DM(e){var t=Fl({},e);return Object.keys(t).forEach(r=>{t[r]||delete t[r]}),t}var ka=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Wa.isSsr)return{width:0,height:0};var n=DM(r),a=JSON.stringify({text:t,copyStyle:n});if(Cn.widthCache[a])return Cn.widthCache[a];try{var i=document.getElementById(qm);i||(i=document.createElement("span"),i.setAttribute("id",qm),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=Fl(Fl({},IM),n);Object.assign(i.style,o),i.textContent="".concat(t);var s=i.getBoundingClientRect(),c={width:s.width,height:s.height};return Cn.widthCache[a]=c,++Cn.cacheCount>TM&&(Cn.cacheCount=0,Cn.widthCache={}),c}catch{return{width:0,height:0}}},Zm=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Km=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,MM=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,$M=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Cy={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},zM=Object.keys(Cy),Tn="NaN";function RM(e,t){return e*Cy[t]}class lt{static parse(t){var r,[,n,a]=(r=$M.exec(t))!==null&&r!==void 0?r:[];return new lt(parseFloat(n),a??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,It(t)&&(this.unit=""),r!==""&&!MM.test(r)&&(this.num=NaN,this.unit=""),zM.includes(r)&&(this.num=RM(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new lt(NaN,""):new lt(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new lt(NaN,""):new lt(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new lt(NaN,""):new lt(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new lt(NaN,""):new lt(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return It(this.num)}}function Oy(e){if(e.includes(Tn))return Tn;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,a,i]=(r=Zm.exec(t))!==null&&r!==void 0?r:[],o=lt.parse(n??""),s=lt.parse(i??""),c=a==="*"?o.multiply(s):o.divide(s);if(c.isNaN())return Tn;t=t.replace(Zm,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,d,f,m]=(u=Km.exec(t))!==null&&u!==void 0?u:[],h=lt.parse(d??""),p=lt.parse(m??""),v=f==="+"?h.add(p):h.subtract(p);if(v.isNaN())return Tn;t=t.replace(Km,v.toString())}return t}var Gm=/\(([^()]*)\)/;function LM(e){for(var t=e,r;(r=Gm.exec(t))!=null;){var[,n]=r;t=t.replace(Gm,Oy(n))}return t}function FM(e){var t=e.replace(/\s+/g,"");return t=LM(t),t=Oy(t),t}function BM(e){try{return FM(e)}catch{return Tn}}function Ws(e){var t=BM(e.slice(5,-1));return t===Tn?"":t}var UM=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],WM=["dx","dy","angle","className","breakAll"];function Bl(){return Bl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bl.apply(null,arguments)}function Vm(e,t){if(e==null)return{};var r,n,a=HM(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function HM(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Ty=/[ \f\n\r\t\v\u2028\u2029]+/,Iy=e=>{var{children:t,breakAll:r,style:n}=e;try{var a=[];_e(t)||(r?a=t.toString().split(""):a=t.toString().split(Ty));var i=a.map(s=>({word:s,width:ka(s,n).width})),o=r?0:ka(" ",n).width;return{wordsWithComputedWidth:i,spaceWidth:o}}catch{return null}},qM=(e,t,r,n,a)=>{var{maxLines:i,children:o,style:s,breakAll:c}=e,u=U(i),d=o,f=function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return O.reduce((E,F)=>{var{word:Z,width:Y}=F,B=E[E.length-1];if(B&&(n==null||a||B.width+Y+r<Number(n)))B.words.push(Z),B.width+=Y+r;else{var q={words:[Z],width:Y};E.push(q)}return E},[])},m=f(t),h=$=>$.reduce((O,E)=>O.width>E.width?O:E);if(!u||a)return m;var p=m.length>i||h(m).width>Number(n);if(!p)return m;for(var v="…",g=$=>{var O=d.slice(0,$),E=Iy({breakAll:c,style:s,children:O+v}).wordsWithComputedWidth,F=f(E),Z=F.length>i||h(F).width>Number(n);return[Z,F]},x=0,w=d.length-1,b=0,j;x<=w&&b<=d.length-1;){var k=Math.floor((x+w)/2),S=k-1,[N,C]=g(S),[T]=g(k);if(!N&&!T&&(x=k+1),N&&T&&(w=k-1),!N&&T){j=C;break}b++}return j||m},Ym=e=>{var t=_e(e)?[]:e.toString().split(Ty);return[{words:t}]},ZM=e=>{var{width:t,scaleToFit:r,children:n,style:a,breakAll:i,maxLines:o}=e;if((t||r)&&!Wa.isSsr){var s,c,u=Iy({breakAll:i,children:n,style:a});if(u){var{wordsWithComputedWidth:d,spaceWidth:f}=u;s=d,c=f}else return Ym(n);return qM({breakAll:i,children:n,maxLines:o,style:a},s,c,t,r)}return Ym(n)},Xm="#808080",Wu=y.forwardRef((e,t)=>{var{x:r=0,y:n=0,lineHeight:a="1em",capHeight:i="0.71em",scaleToFit:o=!1,textAnchor:s="start",verticalAnchor:c="end",fill:u=Xm}=e,d=Vm(e,UM),f=y.useMemo(()=>ZM({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:o,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,o,d.style,d.width]),{dx:m,dy:h,angle:p,className:v,breakAll:g}=d,x=Vm(d,WM);if(!rr(r)||!rr(n))return null;var w=r+(U(m)?m:0),b=n+(U(h)?h:0),j;switch(c){case"start":j=Ws("calc(".concat(i,")"));break;case"middle":j=Ws("calc(".concat((f.length-1)/2," * -").concat(a," + (").concat(i," / 2))"));break;default:j=Ws("calc(".concat(f.length-1," * -").concat(a,")"));break}var k=[];if(o){var S=f[0].width,{width:N}=d;k.push("scale(".concat(U(N)?N/S:1,")"))}return p&&k.push("rotate(".concat(p,", ").concat(w,", ").concat(b,")")),k.length&&(x.transform=k.join(" ")),y.createElement("text",Bl({},ye(x,!0),{ref:t,x:w,y:b,className:fe("recharts-text",v),textAnchor:s,fill:u.includes("url")?Xm:u}),f.map((C,T)=>{var $=C.words.join(g?"":" ");return y.createElement("tspan",{x:w,dy:T===0?j:a,key:"".concat($,"-").concat(T)},$)}))});Wu.displayName="Text";var KM=["offset"],GM=["labelRef"];function Qm(e,t){if(e==null)return{};var r,n,a=VM(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function VM(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Jm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Te(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Jm(Object(r),!0).forEach(function(n){YM(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function YM(e,t,r){return(t=XM(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XM(e){var t=QM(e,"string");return typeof t=="symbol"?t:t+""}function QM(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lr(){return lr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lr.apply(null,arguments)}var JM=e=>{var{value:t,formatter:r}=e,n=_e(e.children)?t:e.children;return typeof r=="function"?r(n):n},Hu=e=>e!=null&&typeof e=="function",e$=(e,t)=>{var r=Ct(t-e),n=Math.min(Math.abs(t-e),360);return r*n},t$=(e,t,r)=>{var{position:n,viewBox:a,offset:i,className:o}=e,{cx:s,cy:c,innerRadius:u,outerRadius:d,startAngle:f,endAngle:m,clockWise:h}=a,p=(u+d)/2,v=e$(f,m),g=v>=0?1:-1,x,w;n==="insideStart"?(x=f+g*i,w=h):n==="insideEnd"?(x=m-g*i,w=!h):n==="end"&&(x=m+g*i,w=h),w=v<=0?w:!w;var b=Ge(s,c,p,x),j=Ge(s,c,p,x+(w?1:-1)*359),k="M".concat(b.x,",").concat(b.y,`
    A`).concat(p,",").concat(p,",0,1,").concat(w?0:1,`,
    `).concat(j.x,",").concat(j.y),S=_e(e.id)?Aa("recharts-radial-line-"):e.id;return y.createElement("text",lr({},r,{dominantBaseline:"central",className:fe("recharts-radial-bar-label",o)}),y.createElement("defs",null,y.createElement("path",{id:S,d:k})),y.createElement("textPath",{xlinkHref:"#".concat(S)},t))},r$=e=>{var{viewBox:t,offset:r,position:n}=e,{cx:a,cy:i,innerRadius:o,outerRadius:s,startAngle:c,endAngle:u}=t,d=(c+u)/2;if(n==="outside"){var{x:f,y:m}=Ge(a,i,s+r,d);return{x:f,y:m,textAnchor:f>=a?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:a,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:a,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:a,y:i,textAnchor:"middle",verticalAnchor:"end"};var h=(o+s)/2,{x:p,y:v}=Ge(a,i,h,d);return{x:p,y:v,textAnchor:"middle",verticalAnchor:"middle"}},n$=(e,t)=>{var{parentViewBox:r,offset:n,position:a}=e,{x:i,y:o,width:s,height:c}=t,u=c>=0?1:-1,d=u*n,f=u>0?"end":"start",m=u>0?"start":"end",h=s>=0?1:-1,p=h*n,v=h>0?"end":"start",g=h>0?"start":"end";if(a==="top"){var x={x:i+s/2,y:o-u*n,textAnchor:"middle",verticalAnchor:f};return Te(Te({},x),r?{height:Math.max(o-r.y,0),width:s}:{})}if(a==="bottom"){var w={x:i+s/2,y:o+c+d,textAnchor:"middle",verticalAnchor:m};return Te(Te({},w),r?{height:Math.max(r.y+r.height-(o+c),0),width:s}:{})}if(a==="left"){var b={x:i-p,y:o+c/2,textAnchor:v,verticalAnchor:"middle"};return Te(Te({},b),r?{width:Math.max(b.x-r.x,0),height:c}:{})}if(a==="right"){var j={x:i+s+p,y:o+c/2,textAnchor:g,verticalAnchor:"middle"};return Te(Te({},j),r?{width:Math.max(r.x+r.width-j.x,0),height:c}:{})}var k=r?{width:s,height:c}:{};return a==="insideLeft"?Te({x:i+p,y:o+c/2,textAnchor:g,verticalAnchor:"middle"},k):a==="insideRight"?Te({x:i+s-p,y:o+c/2,textAnchor:v,verticalAnchor:"middle"},k):a==="insideTop"?Te({x:i+s/2,y:o+d,textAnchor:"middle",verticalAnchor:m},k):a==="insideBottom"?Te({x:i+s/2,y:o+c-d,textAnchor:"middle",verticalAnchor:f},k):a==="insideTopLeft"?Te({x:i+p,y:o+d,textAnchor:g,verticalAnchor:m},k):a==="insideTopRight"?Te({x:i+s-p,y:o+d,textAnchor:v,verticalAnchor:m},k):a==="insideBottomLeft"?Te({x:i+p,y:o+c-d,textAnchor:g,verticalAnchor:f},k):a==="insideBottomRight"?Te({x:i+s-p,y:o+c-d,textAnchor:v,verticalAnchor:f},k):a&&typeof a=="object"&&(U(a.x)||en(a.x))&&(U(a.y)||en(a.y))?Te({x:i+Fr(a.x,s),y:o+Fr(a.y,c),textAnchor:"end",verticalAnchor:"end"},k):Te({x:i+s/2,y:o+c/2,textAnchor:"middle",verticalAnchor:"middle"},k)},a$=e=>"cx"in e&&U(e.cx);function bt(e){var{offset:t=5}=e,r=Qm(e,KM),n=Te({offset:t},r),{viewBox:a,position:i,value:o,children:s,content:c,className:u="",textBreakAll:d,labelRef:f}=n,m=Zc(),h=a||m;if(!h||_e(o)&&_e(s)&&!y.isValidElement(c)&&typeof c!="function")return null;if(y.isValidElement(c)){var{labelRef:p}=n,v=Qm(n,GM);return y.cloneElement(c,v)}var g;if(typeof c=="function"){if(g=y.createElement(c,n),y.isValidElement(g))return g}else g=JM(n);var x=a$(h),w=ye(n,!0);if(x&&(i==="insideStart"||i==="insideEnd"||i==="end"))return t$(n,g,w);var b=x?r$(n):n$(n,h);return y.createElement(Wu,lr({ref:f,className:fe("recharts-label",u)},w,b,{breakAll:d}),g)}bt.displayName="Label";var Dy=e=>{var{cx:t,cy:r,angle:n,startAngle:a,endAngle:i,r:o,radius:s,innerRadius:c,outerRadius:u,x:d,y:f,top:m,left:h,width:p,height:v,clockWise:g,labelViewBox:x}=e;if(x)return x;if(U(p)&&U(v)){if(U(d)&&U(f))return{x:d,y:f,width:p,height:v};if(U(m)&&U(h))return{x:m,y:h,width:p,height:v}}if(U(d)&&U(f))return{x:d,y:f,width:0,height:0};if(U(t)&&U(r))return{cx:t,cy:r,startAngle:a||n||0,endAngle:i||n||0,innerRadius:c||0,outerRadius:u||s||o||0,clockWise:g};if(e.viewBox)return e.viewBox},i$=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?y.createElement(bt,lr({key:"label-implicit"},n)):rr(e)?y.createElement(bt,lr({key:"label-implicit",value:e},n)):y.isValidElement(e)?e.type===bt?y.cloneElement(e,Te({key:"label-implicit"},n)):y.createElement(bt,lr({key:"label-implicit",content:e},n)):Hu(e)?y.createElement(bt,lr({key:"label-implicit",content:e},n)):e&&typeof e=="object"?y.createElement(bt,lr({},e,{key:"label-implicit"},n)):null},o$=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var{children:a,labelRef:i}=t,o=Dy(t),s=Gp(a,bt).map((u,d)=>y.cloneElement(u,{viewBox:r||o,key:"label-".concat(d)}));if(!n)return s;var c=i$(t.label,r||o,i);return[c,...s]};bt.parseViewBox=Dy;bt.renderCallByParent=o$;var My={},$y={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})($y);var zy={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(zy);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$y,r=zy,n=Bo;function a(i){if(n.isArrayLike(i))return t.last(r.toArray(i))}e.last=a})(My);var s$=My.last;const l$=Ur(s$);var c$=["valueAccessor"],u$=["data","dataKey","clockWise","id","textBreakAll"];function oo(){return oo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oo.apply(null,arguments)}function eh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function th(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eh(Object(r),!0).forEach(function(n){d$(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eh(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function d$(e,t,r){return(t=f$(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f$(e){var t=m$(e,"string");return typeof t=="symbol"?t:t+""}function m$(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rh(e,t){if(e==null)return{};var r,n,a=h$(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function h$(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var p$=e=>Array.isArray(e.value)?l$(e.value):e.value;function dn(e){var{valueAccessor:t=p$}=e,r=rh(e,c$),{data:n,dataKey:a,clockWise:i,id:o,textBreakAll:s}=r,c=rh(r,u$);return!n||!n.length?null:y.createElement(Br,{className:"recharts-label-list"},n.map((u,d)=>{var f=_e(a)?t(u,d):kt(u&&u.payload,a),m=_e(o)?{}:{id:"".concat(o,"-").concat(d)};return y.createElement(bt,oo({},ye(u,!0),c,m,{parentViewBox:u.parentViewBox,value:f,textBreakAll:s,viewBox:bt.parseViewBox(_e(i)?u:th(th({},u),{},{clockWise:i})),key:"label-".concat(d),index:d}))}))}dn.displayName="LabelList";function g$(e,t){return e?e===!0?y.createElement(dn,{key:"labelList-implicit",data:t}):y.isValidElement(e)||Hu(e)?y.createElement(dn,{key:"labelList-implicit",data:t,content:e}):typeof e=="object"?y.createElement(dn,oo({data:t},e,{key:"labelList-implicit"})):null:null}function v$(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var{children:n}=e,a=Gp(n,dn).map((o,s)=>y.cloneElement(o,{data:t,key:"labelList-".concat(s)}));if(!r)return a;var i=g$(e.label,t);return[i,...a]}dn.renderCallByParent=v$;function Ul(){return Ul=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ul.apply(null,arguments)}var Ry=e=>{var{cx:t,cy:r,r:n,className:a}=e,i=fe("recharts-dot",a);return t===+t&&r===+r&&n===+n?y.createElement("circle",Ul({},ye(e,!1),Ac(e),{className:i,cx:t,cy:r,r:n})):null},y$={radiusAxis:{},angleAxis:{}},Ly=zt({name:"polarAxis",initialState:y$,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:wR,removeRadiusAxis:jR,addAngleAxis:kR,removeAngleAxis:SR}=Ly.actions,x$=Ly.reducer,b$={countOfBars:0,cartesianItems:[],polarItems:[]},Fy=zt({name:"graphicalItems",initialState:b$,reducers:{addBar(e){e.countOfBars+=1},removeBar(e){e.countOfBars-=1},addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:n}=t.payload,a=fr(e).cartesianItems.indexOf(r);a>-1&&(e.cartesianItems[a]=n)},removeCartesianGraphicalItem(e,t){var r=fr(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=fr(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addBar:NR,removeBar:PR,addCartesianGraphicalItem:w$,replaceCartesianGraphicalItem:j$,removeCartesianGraphicalItem:k$,addPolarGraphicalItem:ER,removePolarGraphicalItem:_R}=Fy.actions,S$=Fy.reducer;function nh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ah(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nh(Object(r),!0).forEach(function(n){N$(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nh(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function N$(e,t,r){return(t=P$(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P$(e){var t=E$(e,"string");return typeof t=="symbol"?t:t+""}function E$(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _$(e){var t=ot(),r=y.useRef(null);return y.useEffect(()=>{var n=ah(ah({},e),{},{stackId:NA(e.stackId)});r.current===null?t(w$(n)):r.current!==n&&t(j$({prev:r.current,next:n})),r.current=n},[t,e]),y.useEffect(()=>()=>{r.current&&(t(k$(r.current)),r.current=null)},[t]),null}function A$(e){var{fn:t,args:r}=e,n=ot(),a=ft();return y.useEffect(()=>{if(!a){var i=t(r);return n(XI(i)),()=>{n(QI(i))}}},[t,r,n,a]),null}var C$=()=>{};function O$(e){var{legendPayload:t}=e,r=ot(),n=ft();return y.useEffect(()=>n?C$:(r(WA(t)),()=>{r(HA(t))}),[r,n,t]),null}function T$(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=y.useRef(Aa(t)),n=y.useRef(e);return n.current!==e&&(r.current=Aa(t),n.current=e),r.current}var I$=_([Ye],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),D$=_([I$,jr,kr],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),M$=e=>{var t=ft();return H(r=>ms(r,"xAxis",e,t))},$$=e=>{var t=ft();return H(r=>ms(r,"yAxis",e,t))},qu=()=>H(D$),z$=()=>H(LD);function ih(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function oh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ih(Object(r),!0).forEach(function(n){R$(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ih(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function R$(e,t,r){return(t=L$(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L$(e){var t=F$(e,"string");return typeof t=="symbol"?t:t+""}function F$(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var B$=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:a,dataKey:i}=e;if(a===!1||t.x==null||t.y==null)return null;var o=oh(oh({index:r,dataKey:i,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},ye(a,!1)),Ac(a)),s;return y.isValidElement(a)?s=y.cloneElement(a,o):typeof a=="function"?s=a(o):s=y.createElement(Ry,o),y.createElement(Br,{className:"recharts-active-dot"},s)};function U$(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:a}=e,i=H($a),o=z$();if(t==null||o==null)return null;var s=t.find(c=>o.includes(c.payload));return _e(s)?null:B$({point:s,childIndex:Number(i),mainColor:r,dataKey:a,activeDot:n})}var W$=["children"];function H$(e,t){if(e==null)return{};var r,n,a=q$(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function q$(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var sh=()=>{},By=y.createContext({addErrorBar:sh,removeErrorBar:sh}),Z$={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Uy=y.createContext(Z$);function K$(e){var{children:t}=e,r=H$(e,W$);return y.createElement(Uy.Provider,{value:r},t)}var G$=()=>y.useContext(Uy),V$=e=>{var{children:t,xAxisId:r,yAxisId:n,zAxisId:a,dataKey:i,data:o,stackId:s,hide:c,type:u,barSize:d}=e,[f,m]=y.useState([]),h=y.useCallback(g=>{m(x=>[...x,g])},[m]),p=y.useCallback(g=>{m(x=>x.filter(w=>w!==g))},[m]),v=ft();return y.createElement(By.Provider,{value:{addErrorBar:h,removeErrorBar:p}},y.createElement(_$,{type:u,data:o,xAxisId:r,yAxisId:n,zAxisId:a,dataKey:i,errorBars:f,stackId:s,hide:c,barSize:d,isPanorama:v}),t)};function Y$(e){var{addErrorBar:t,removeErrorBar:r}=y.useContext(By);return y.useEffect(()=>(t(e),()=>{r(e)}),[t,r,e]),null}var X$=["direction","width","dataKey","isAnimationActive","animationBegin","animationDuration","animationEasing"];function Wy(e,t,r){return(t=Q$(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q$(e){var t=J$(e,"string");return typeof t=="symbol"?t:t+""}function J$(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ra(){return Ra=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ra.apply(null,arguments)}function e5(e,t){if(e==null)return{};var r,n,a=t5(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function t5(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function r5(e){var{direction:t,width:r,dataKey:n,isAnimationActive:a,animationBegin:i,animationDuration:o,animationEasing:s}=e,c=e5(e,X$),u=ye(c,!1),{data:d,dataPointFormatter:f,xAxisId:m,yAxisId:h,errorBarOffset:p}=G$(),v=M$(m),g=$$(h);if(v?.scale==null||g?.scale==null||d==null||t==="x"&&v.type!=="number")return null;var x=d.map(w=>{var{x:b,y:j,value:k,errorVal:S}=f(w,n,t);if(!S)return null;var N=[],C,T;if(Array.isArray(S)?[C,T]=S:C=T=S,t==="x"){var{scale:$}=v,O=j+p,E=O+r,F=O-r,Z=$(k-C),Y=$(k+T);N.push({x1:Y,y1:E,x2:Y,y2:F}),N.push({x1:Z,y1:O,x2:Y,y2:O}),N.push({x1:Z,y1:E,x2:Z,y2:F})}else if(t==="y"){var{scale:B}=g,q=b+p,te=q-r,re=q+r,Pe=B(k-C),K=B(k+T);N.push({x1:te,y1:K,x2:re,y2:K}),N.push({x1:q,y1:Pe,x2:q,y2:K}),N.push({x1:te,y1:Pe,x2:re,y2:Pe})}var z="".concat(b+p,"px ").concat(j+p,"px");return y.createElement(Br,Ra({className:"recharts-errorBar",key:"bar-".concat(N.map(X=>"".concat(X.x1,"-").concat(X.x2,"-").concat(X.y1,"-").concat(X.y2)))},u),N.map(X=>{var Ce=a?{transformOrigin:"".concat(X.x1-5,"px")}:void 0;return y.createElement(Zi,{from:{transform:"scaleY(0)",transformOrigin:z},to:{transform:"scaleY(1)",transformOrigin:z},begin:i,easing:s,isActive:a,duration:o,key:"line-".concat(X.x1,"-").concat(X.x2,"-").concat(X.y1,"-").concat(X.y2),style:{transformOrigin:z}},y.createElement("line",Ra({},X,{style:Ce})))}))});return y.createElement(Br,{className:"recharts-errorBars"},x)}var Hy=y.createContext(void 0);function n5(e){var t=y.useContext(Hy);return e??t??"x"}function a5(e){var{direction:t,children:r}=e;return y.createElement(Hy.Provider,{value:t},r)}var qy={stroke:"black",strokeWidth:1.5,width:5,offset:0,isAnimationActive:!0,animationBegin:0,animationDuration:400,animationEasing:"ease-in-out"};function i5(e){var t=n5(e.direction),{width:r,isAnimationActive:n,animationBegin:a,animationDuration:i,animationEasing:o}=bn(e,qy);return y.createElement(y.Fragment,null,y.createElement(Y$,{dataKey:e.dataKey,direction:t}),y.createElement(r5,Ra({},e,{direction:t,width:r,isAnimationActive:n,animationBegin:a,animationDuration:i,animationEasing:o})))}class Zy extends y.Component{render(){return y.createElement(i5,this.props)}}Wy(Zy,"defaultProps",qy);Wy(Zy,"displayName","ErrorBar");function Ky(e,t){var r,n,a=H(u=>Nr(u,e)),i=H(u=>Zr(u,t)),o=(r=a?.allowDataOverflow)!==null&&r!==void 0?r:vt.allowDataOverflow,s=(n=i?.allowDataOverflow)!==null&&n!==void 0?n:yt.allowDataOverflow,c=o||s;return{needClip:c,needClipX:o,needClipY:s}}function o5(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,a=qu(),{needClipX:i,needClipY:o,needClip:s}=Ky(t,r);if(!s)return null;var{x:c,y:u,width:d,height:f}=a;return y.createElement("clipPath",{id:"clipPath-".concat(n)},y.createElement("rect",{x:i?c:c-d/2,y:o?u:u-f/2,width:i?d:d*2,height:o?f:f*2}))}var s5=e=>{var{chartData:t}=e,r=ot(),n=ft();return y.useEffect(()=>n?()=>{}:(r(zm(t)),()=>{r(zm(void 0))}),[t,r,n]),null},lh={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},Gy=zt({name:"brush",initialState:lh,reducers:{setBrushSettings(e,t){return t.payload==null?lh:t.payload}}}),{setBrushSettings:AR}=Gy.actions,l5=Gy.reducer;function c5(e,t,r){return(t=u5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u5(e){var t=d5(e,"string");return typeof t=="symbol"?t:t+""}function d5(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Zu{static create(t){return new Zu(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+a}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(r){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],a=r[r.length-1];return n<=a?t>=n&&t<=a:t>=a&&t<=n}}c5(Zu,"EPS",1e-4);function f5(e){return(e%180+180)%180}var m5=function(t){var{width:r,height:n}=t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=f5(a),o=i*Math.PI/180,s=Math.atan(n/r),c=o>s&&o<Math.PI-s?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},h5={dots:[],areas:[],lines:[]},Vy=zt({name:"referenceElements",initialState:h5,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=fr(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=fr(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=fr(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:CR,removeDot:OR,addArea:TR,removeArea:IR,addLine:DR,removeLine:MR}=Vy.actions,p5=Vy.reducer,g5=y.createContext(void 0),v5=e=>{var{children:t}=e,[r]=y.useState("".concat(Aa("recharts"),"-clip")),n=qu();if(n==null)return null;var{x:a,y:i,width:o,height:s}=n;return y.createElement(g5.Provider,{value:r},y.createElement("defs",null,y.createElement("clipPath",{id:r},y.createElement("rect",{x:a,y:i,height:s,width:o}))),t)};function Hs(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function Yy(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function y5(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return m5(n,r)}function x5(e,t,r){var n=r==="width",{x:a,y:i,width:o,height:s}=e;return t===1?{start:n?a:i,end:n?a+o:i+s}:{start:n?a+o:i+s,end:n?a:i}}function so(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-a)<=0}function b5(e,t){return Yy(e,t+1)}function w5(e,t,r,n,a){for(var i=(n||[]).slice(),{start:o,end:s}=t,c=0,u=1,d=o,f=function(){var p=n?.[c];if(p===void 0)return{v:Yy(n,u)};var v=c,g,x=()=>(g===void 0&&(g=r(p,v)),g),w=p.coordinate,b=c===0||so(e,w,x,d,s);b||(c=0,d=o,u+=1),b&&(d=w+e*(x()/2+a),c+=u)},m;u<=i.length;)if(m=f(),m)return m.v;return[]}function ch(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function tt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ch(Object(r),!0).forEach(function(n){j5(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ch(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function j5(e,t,r){return(t=k5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k5(e){var t=S5(e,"string");return typeof t=="symbol"?t:t+""}function S5(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function N5(e,t,r,n,a){for(var i=(n||[]).slice(),o=i.length,{start:s}=t,{end:c}=t,u=function(m){var h=i[m],p,v=()=>(p===void 0&&(p=r(h,m)),p);if(m===o-1){var g=e*(h.coordinate+e*v()/2-c);i[m]=h=tt(tt({},h),{},{tickCoord:g>0?h.coordinate-g*e:h.coordinate})}else i[m]=h=tt(tt({},h),{},{tickCoord:h.coordinate});var x=so(e,h.tickCoord,v,s,c);x&&(c=h.tickCoord-e*(v()/2+a),i[m]=tt(tt({},h),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return i}function P5(e,t,r,n,a,i){var o=(n||[]).slice(),s=o.length,{start:c,end:u}=t;if(i){var d=n[s-1],f=r(d,s-1),m=e*(d.coordinate+e*f/2-u);o[s-1]=d=tt(tt({},d),{},{tickCoord:m>0?d.coordinate-m*e:d.coordinate});var h=so(e,d.tickCoord,()=>f,c,u);h&&(u=d.tickCoord-e*(f/2+a),o[s-1]=tt(tt({},d),{},{isShow:!0}))}for(var p=i?s-1:s,v=function(w){var b=o[w],j,k=()=>(j===void 0&&(j=r(b,w)),j);if(w===0){var S=e*(b.coordinate-e*k()/2-c);o[w]=b=tt(tt({},b),{},{tickCoord:S<0?b.coordinate-S*e:b.coordinate})}else o[w]=b=tt(tt({},b),{},{tickCoord:b.coordinate});var N=so(e,b.tickCoord,k,c,u);N&&(c=b.tickCoord+e*(k()/2+a),o[w]=tt(tt({},b),{},{isShow:!0}))},g=0;g<p;g++)v(g);return o}function Ku(e,t,r){var{tick:n,ticks:a,viewBox:i,minTickGap:o,orientation:s,interval:c,tickFormatter:u,unit:d,angle:f}=e;if(!a||!a.length||!n)return[];if(U(c)||Wa.isSsr){var m;return(m=b5(a,U(c)?c:0))!==null&&m!==void 0?m:[]}var h=[],p=s==="top"||s==="bottom"?"width":"height",v=d&&p==="width"?ka(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},g=(b,j)=>{var k=typeof u=="function"?u(b.value,j):b.value;return p==="width"?y5(ka(k,{fontSize:t,letterSpacing:r}),v,f):ka(k,{fontSize:t,letterSpacing:r})[p]},x=a.length>=2?Ct(a[1].coordinate-a[0].coordinate):1,w=x5(i,x,p);return c==="equidistantPreserveStart"?w5(x,w,g,a,o):(c==="preserveStart"||c==="preserveStartEnd"?h=P5(x,w,g,a,o,c==="preserveStartEnd"):h=N5(x,w,g,a,o),h.filter(b=>b.isShow))}var E5=["viewBox"],_5=["viewBox"];function In(){return In=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},In.apply(null,arguments)}function uh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function De(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uh(Object(r),!0).forEach(function(n){Gu(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uh(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dh(e,t){if(e==null)return{};var r,n,a=A5(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function A5(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Gu(e,t,r){return(t=C5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C5(e){var t=O5(e,"string");return typeof t=="symbol"?t:t+""}function O5(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Kr extends y.Component{constructor(t){super(t),this.tickRefs=y.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,r){var{viewBox:n}=t,a=dh(t,E5),i=this.props,{viewBox:o}=i,s=dh(i,_5);return!Hs(n,o)||!Hs(a,s)||!Hs(r,this.state)}getTickLineCoord(t){var{x:r,y:n,width:a,height:i,orientation:o,tickSize:s,mirror:c,tickMargin:u}=this.props,d,f,m,h,p,v,g=c?-1:1,x=t.tickSize||s,w=U(t.tickCoord)?t.tickCoord:t.coordinate;switch(o){case"top":d=f=t.coordinate,h=n+ +!c*i,m=h-g*x,v=m-g*u,p=w;break;case"left":m=h=t.coordinate,f=r+ +!c*a,d=f-g*x,p=d-g*u,v=w;break;case"right":m=h=t.coordinate,f=r+ +c*a,d=f+g*x,p=d+g*u,v=w;break;default:d=f=t.coordinate,h=n+ +c*i,m=h+g*x,v=m+g*u,p=w;break}return{line:{x1:d,y1:m,x2:f,y2:h},tick:{x:p,y:v}}}getTickTextAnchor(){var{orientation:t,mirror:r}=this.props,n;switch(t){case"left":n=r?"start":"end";break;case"right":n=r?"end":"start";break;default:n="middle";break}return n}getTickVerticalAnchor(){var{orientation:t,mirror:r}=this.props;switch(t){case"left":case"right":return"middle";case"top":return r?"start":"end";default:return r?"end":"start"}}renderAxisLine(){var{x:t,y:r,width:n,height:a,orientation:i,mirror:o,axisLine:s}=this.props,c=De(De(De({},ye(this.props,!1)),ye(s,!1)),{},{fill:"none"});if(i==="top"||i==="bottom"){var u=+(i==="top"&&!o||i==="bottom"&&o);c=De(De({},c),{},{x1:t,y1:r+u*a,x2:t+n,y2:r+u*a})}else{var d=+(i==="left"&&!o||i==="right"&&o);c=De(De({},c),{},{x1:t+d*n,y1:r,x2:t+d*n,y2:r+a})}return y.createElement("line",In({},c,{className:fe("recharts-cartesian-axis-line",vn(s,"className"))}))}static renderTickItem(t,r,n){var a,i=fe(r.className,"recharts-cartesian-axis-tick-value");if(y.isValidElement(t))a=y.cloneElement(t,De(De({},r),{},{className:i}));else if(typeof t=="function")a=t(De(De({},r),{},{className:i}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=fe(o,t.className)),a=y.createElement(Wu,In({},r,{className:o}),n)}return a}renderTicks(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:a,stroke:i,tick:o,tickFormatter:s,unit:c}=this.props,u=Ku(De(De({},this.props),{},{ticks:n}),t,r),d=this.getTickTextAnchor(),f=this.getTickVerticalAnchor(),m=ye(this.props,!1),h=ye(o,!1),p=De(De({},m),{},{fill:"none"},ye(a,!1)),v=u.map((g,x)=>{var{line:w,tick:b}=this.getTickLineCoord(g),j=De(De(De(De({textAnchor:d,verticalAnchor:f},m),{},{stroke:"none",fill:i},h),b),{},{index:x,payload:g,visibleTicksCount:u.length,tickFormatter:s});return y.createElement(Br,In({className:"recharts-cartesian-axis-tick",key:"tick-".concat(g.value,"-").concat(g.coordinate,"-").concat(g.tickCoord)},rE(this.props,g,x)),a&&y.createElement("line",In({},p,w,{className:fe("recharts-cartesian-axis-tick-line",vn(a,"className"))})),o&&Kr.renderTickItem(o,j,"".concat(typeof s=="function"?s(g.value,x):g.value).concat(c||"")))});return v.length>0?y.createElement("g",{className:"recharts-cartesian-axis-ticks"},v):null}render(){var{axisLine:t,width:r,height:n,className:a,hide:i}=this.props;if(i)return null;var{ticks:o}=this.props;return r!=null&&r<=0||n!=null&&n<=0?null:y.createElement(Br,{className:fe("recharts-cartesian-axis",a),ref:s=>{if(s){var c=s.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(c);var u=c[0];if(u){var d=window.getComputedStyle(u).fontSize,f=window.getComputedStyle(u).letterSpacing;(d!==this.state.fontSize||f!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(u).fontSize,letterSpacing:window.getComputedStyle(u).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,o),bt.renderCallByParent(this.props))}}Gu(Kr,"displayName","CartesianAxis");Gu(Kr,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var T5=["x1","y1","x2","y2","key"],I5=["offset"],D5=["xAxisId","yAxisId"],M5=["xAxisId","yAxisId"];function fh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function rt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fh(Object(r),!0).forEach(function(n){$5(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fh(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $5(e,t,r){return(t=z5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function z5(e){var t=R5(e,"string");return typeof t=="symbol"?t:t+""}function R5(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function an(){return an=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},an.apply(null,arguments)}function lo(e,t){if(e==null)return{};var r,n,a=L5(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function L5(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var F5=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:a,width:i,height:o,ry:s}=e;return y.createElement("rect",{x:n,y:a,ry:s,width:i,height:o,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function Xy(e,t){var r;if(y.isValidElement(e))r=y.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:n,y1:a,x2:i,y2:o,key:s}=t,c=lo(t,T5),u=ye(c,!1),{offset:d}=u,f=lo(u,I5);r=y.createElement("line",an({},f,{x1:n,y1:a,x2:i,y2:o,fill:"none",key:s}))}return r}function B5(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:i,yAxisId:o}=e,s=lo(e,D5),c=a.map((u,d)=>{var f=rt(rt({},s),{},{x1:t,y1:u,x2:t+r,y2:u,key:"line-".concat(d),index:d});return Xy(n,f)});return y.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function U5(e){var{y:t,height:r,vertical:n=!0,verticalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:i,yAxisId:o}=e,s=lo(e,M5),c=a.map((u,d)=>{var f=rt(rt({},s),{},{x1:u,y1:t,x2:u,y2:t+r,key:"line-".concat(d),index:d});return Xy(n,f)});return y.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function W5(e){var{horizontalFill:t,fillOpacity:r,x:n,y:a,width:i,height:o,horizontalPoints:s,horizontal:c=!0}=e;if(!c||!t||!t.length)return null;var u=s.map(f=>Math.round(f+a-a)).sort((f,m)=>f-m);a!==u[0]&&u.unshift(0);var d=u.map((f,m)=>{var h=!u[m+1],p=h?a+o-f:u[m+1]-f;if(p<=0)return null;var v=m%t.length;return y.createElement("rect",{key:"react-".concat(m),y:f,x:n,height:p,width:i,stroke:"none",fill:t[v],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return y.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function H5(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:a,y:i,width:o,height:s,verticalPoints:c}=e;if(!t||!r||!r.length)return null;var u=c.map(f=>Math.round(f+a-a)).sort((f,m)=>f-m);a!==u[0]&&u.unshift(0);var d=u.map((f,m)=>{var h=!u[m+1],p=h?a+o-f:u[m+1]-f;if(p<=0)return null;var v=m%r.length;return y.createElement("rect",{key:"react-".concat(m),x:f,y:i,width:p,height:s,stroke:"none",fill:r[v],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return y.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var q5=(e,t)=>{var{xAxis:r,width:n,height:a,offset:i}=e;return e0(Ku(rt(rt(rt({},Kr.defaultProps),r),{},{ticks:t0(r),viewBox:{x:0,y:0,width:n,height:a}})),i.left,i.left+i.width,t)},Z5=(e,t)=>{var{yAxis:r,width:n,height:a,offset:i}=e;return e0(Ku(rt(rt(rt({},Kr.defaultProps),r),{},{ticks:t0(r),viewBox:{x:0,y:0,width:n,height:a}})),i.top,i.top+i.height,t)},K5={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function Wl(e){var t=o0(),r=s0(),n=i0(),a=rt(rt({},bn(e,K5)),{},{x:U(e.x)?e.x:n.left,y:U(e.y)?e.y:n.top,width:U(e.width)?e.width:n.width,height:U(e.height)?e.height:n.height}),{xAxisId:i,yAxisId:o,x:s,y:c,width:u,height:d,syncWithTicks:f,horizontalValues:m,verticalValues:h}=a,p=ft(),v=H(T=>Am(T,"xAxis",i,p)),g=H(T=>Am(T,"yAxis",o,p));if(!U(u)||u<=0||!U(d)||d<=0||!U(s)||s!==+s||!U(c)||c!==+c)return null;var x=a.verticalCoordinatesGenerator||q5,w=a.horizontalCoordinatesGenerator||Z5,{horizontalPoints:b,verticalPoints:j}=a;if((!b||!b.length)&&typeof w=="function"){var k=m&&m.length,S=w({yAxis:g?rt(rt({},g),{},{ticks:k?m:g.ticks}):void 0,width:t,height:r,offset:n},k?!0:f);ja(Array.isArray(S),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof S,"]")),Array.isArray(S)&&(b=S)}if((!j||!j.length)&&typeof x=="function"){var N=h&&h.length,C=x({xAxis:v?rt(rt({},v),{},{ticks:N?h:v.ticks}):void 0,width:t,height:r,offset:n},N?!0:f);ja(Array.isArray(C),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof C,"]")),Array.isArray(C)&&(j=C)}return y.createElement("g",{className:"recharts-cartesian-grid"},y.createElement(F5,{fill:a.fill,fillOpacity:a.fillOpacity,x:a.x,y:a.y,width:a.width,height:a.height,ry:a.ry}),y.createElement(W5,an({},a,{horizontalPoints:b})),y.createElement(H5,an({},a,{verticalPoints:j})),y.createElement(B5,an({},a,{offset:n,horizontalPoints:b,xAxis:v,yAxis:g})),y.createElement(U5,an({},a,{offset:n,verticalPoints:j,xAxis:v,yAxis:g})))}Wl.displayName="CartesianGrid";var Qy=(e,t,r,n)=>ms(e,"xAxis",t,n),Jy=(e,t,r,n)=>ey(e,"xAxis",t,n),ex=(e,t,r,n)=>ms(e,"yAxis",r,n),tx=(e,t,r,n)=>ey(e,"yAxis",r,n),G5=_([Ne,Qy,ex,Jy,tx],(e,t,r,n,a)=>Wr(e,"xAxis")?yl(t,n,!1):yl(r,a,!1)),V5=(e,t,r,n,a)=>a,Y5=_([Pv,V5],(e,t)=>{if(e.some(r=>r.type==="line"&&t.dataKey===r.dataKey&&t.data===r.data))return t}),X5=_([Ne,Qy,ex,Jy,tx,Y5,G5,av],(e,t,r,n,a,i,o,s)=>{var{chartData:c,dataStartIndex:u,dataEndIndex:d}=s;if(!(i==null||t==null||r==null||n==null||a==null||n.length===0||a.length===0||o==null)){var{dataKey:f,data:m}=i,h;if(m!=null&&m.length>0?h=m:h=c?.slice(u,d+1),h!=null)return gz({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:a,dataKey:f,bandSize:o,displayedData:h})}}),Q5=["type","layout","connectNulls","needClip"],J5=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId"];function rx(e,t){if(e==null)return{};var r,n,a=ez(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ez(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function mh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ut(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mh(Object(r),!0).forEach(function(n){gs(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mh(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gs(e,t,r){return(t=tz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tz(e){var t=rz(e,"string");return typeof t=="symbol"?t:t+""}function rz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zn(){return Zn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zn.apply(null,arguments)}var nz=e=>{var{dataKey:t,name:r,stroke:n,legendType:a,hide:i}=e;return[{inactive:i,dataKey:t,type:a,color:n,value:r0(r,t),payload:e}]};function az(e){var{dataKey:t,data:r,stroke:n,strokeWidth:a,fill:i,name:o,hide:s,unit:c}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:a,fill:i,dataKey:t,nameKey:void 0,name:r0(o,t),hide:s,type:e.tooltipType,color:e.stroke,unit:c}}}var nx=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function iz(e,t){for(var r=e.length%2!==0?[...e,0]:e,n=[],a=0;a<t;++a)n=[...n,...r];return n}var oz=(e,t,r)=>{var n=r.reduce((f,m)=>f+m);if(!n)return nx(t,e);for(var a=Math.floor(e/n),i=e%n,o=t-e,s=[],c=0,u=0;c<r.length;u+=r[c],++c)if(u+r[c]>i){s=[...r.slice(0,c),i-u];break}var d=s.length%2===0?[0,o]:[o];return[...iz(r,a),...s,...d].map(f=>"".concat(f,"px")).join(", ")};function sz(e,t){var r;if(y.isValidElement(e))r=y.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var n=fe("recharts-line-dot",typeof e!="boolean"?e.className:"");r=y.createElement(Ry,Zn({},t,{className:n}))}return r}function lz(e,t){return e==null?!1:t?!0:e.length===1}function cz(e){var{clipPathId:t,points:r,props:n}=e,{dot:a,dataKey:i,needClip:o}=n;if(!lz(r,a))return null;var s=Vp(a),c=ye(n,!1),u=ye(a,!0),d=r.map((m,h)=>{var p=Ut(Ut(Ut({key:"dot-".concat(h),r:3},c),u),{},{index:h,cx:m.x,cy:m.y,dataKey:i,value:m.value,payload:m.payload,points:r});return sz(a,p)}),f={clipPath:o?"url(#clipPath-".concat(s?"":"dots-").concat(t,")"):null};return y.createElement(Br,Zn({className:"recharts-line-dots",key:"dots"},f),d)}function Hl(e){var{clipPathId:t,pathRef:r,points:n,strokeDasharray:a,props:i,showLabels:o}=e,{type:s,layout:c,connectNulls:u,needClip:d}=i,f=rx(i,Q5),m=Ut(Ut({},ye(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:d?"url(#clipPath-".concat(t,")"):null,points:n,type:s,layout:c,connectNulls:u,strokeDasharray:a??i.strokeDasharray});return y.createElement(y.Fragment,null,n?.length>1&&y.createElement(u0,Zn({},m,{pathRef:r})),y.createElement(cz,{points:n,clipPathId:t,props:i}),o&&dn.renderCallByParent(i,n))}function uz(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function dz(e){var{clipPathId:t,props:r,pathRef:n,previousPointsRef:a,longestAnimatedLengthRef:i}=e,{points:o,strokeDasharray:s,isAnimationActive:c,animationBegin:u,animationDuration:d,animationEasing:f,animateNewValues:m,width:h,height:p,onAnimationEnd:v,onAnimationStart:g}=r,x=a.current,w=T$(r,"recharts-line-"),[b,j]=y.useState(!1),k=y.useCallback(()=>{typeof v=="function"&&v(),j(!1)},[v]),S=y.useCallback(()=>{typeof g=="function"&&g(),j(!0)},[g]),N=uz(n.current),C=i.current;return y.createElement(Zi,{begin:u,duration:d,isActive:c,easing:f,from:{t:0},to:{t:1},onAnimationEnd:k,onAnimationStart:S,key:w},T=>{var{t:$}=T,O=ua(C,N+C),E=Math.min(O($),N),F;if(s){var Z="".concat(s).split(/[,\s]+/gim).map(q=>parseFloat(q));F=oz(E,N,Z)}else F=nx(N,E);if(x){var Y=x.length/o.length,B=$===1?o:o.map((q,te)=>{var re=Math.floor(te*Y);if(x[re]){var Pe=x[re],K=ua(Pe.x,q.x),z=ua(Pe.y,q.y);return Ut(Ut({},q),{},{x:K($),y:z($)})}if(m){var X=ua(h*2,q.x),Ce=ua(p/2,q.y);return Ut(Ut({},q),{},{x:X($),y:Ce($)})}return Ut(Ut({},q),{},{x:q.x,y:q.y})});return a.current=B,y.createElement(Hl,{props:r,points:B,clipPathId:t,pathRef:n,showLabels:!b,strokeDasharray:F})}return $>0&&N>0&&(a.current=o,i.current=E),y.createElement(Hl,{props:r,points:o,clipPathId:t,pathRef:n,showLabels:!b,strokeDasharray:F})})}function fz(e){var{clipPathId:t,props:r}=e,{points:n,isAnimationActive:a}=r,i=y.useRef(null),o=y.useRef(0),s=y.useRef(null),c=i.current;return a&&n&&n.length&&c!==n?y.createElement(dz,{props:r,clipPathId:t,previousPointsRef:i,longestAnimatedLengthRef:o,pathRef:s}):y.createElement(Hl,{props:r,points:n,clipPathId:t,pathRef:s,showLabels:!0})}var mz=(e,t)=>({x:e.x,y:e.y,value:e.value,errorVal:kt(e.payload,t)});class hz extends y.Component{constructor(){super(...arguments),gs(this,"id",Aa("recharts-line-"))}render(){var t,{hide:r,dot:n,points:a,className:i,xAxisId:o,yAxisId:s,top:c,left:u,width:d,height:f,id:m,needClip:h,layout:p}=this.props;if(r)return null;var v=fe("recharts-line",i),g=_e(m)?this.id:m,{r:x=3,strokeWidth:w=2}=(t=ye(n,!1))!==null&&t!==void 0?t:{r:3,strokeWidth:2},b=Vp(n),j=x*2+w;return y.createElement(y.Fragment,null,y.createElement(Br,{className:v},h&&y.createElement("defs",null,y.createElement(o5,{clipPathId:g,xAxisId:o,yAxisId:s}),!b&&y.createElement("clipPath",{id:"clipPath-dots-".concat(g)},y.createElement("rect",{x:u-j/2,y:c-j/2,width:d+j,height:f+j}))),y.createElement(fz,{props:this.props,clipPathId:g}),y.createElement(a5,{direction:p==="horizontal"?"y":"x"},y.createElement(K$,{xAxisId:o,yAxisId:s,data:a,dataPointFormatter:mz,errorBarOffset:0},this.props.children))),y.createElement(U$,{activeDot:this.props.activeDot,points:a,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var ax={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!Wa.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function pz(e){var t=bn(e,ax),{activeDot:r,animateNewValues:n,animationBegin:a,animationDuration:i,animationEasing:o,connectNulls:s,dot:c,hide:u,isAnimationActive:d,label:f,legendType:m,xAxisId:h,yAxisId:p}=t,v=rx(t,J5),{needClip:g}=Ky(h,p),{height:x,width:w,x:b,y:j}=qu(),k=Kc(),S=ft(),N=y.useMemo(()=>({dataKey:e.dataKey,data:e.data}),[e.dataKey,e.data]),C=H(T=>X5(T,h,p,S,N));return k!=="horizontal"&&k!=="vertical"?null:y.createElement(hz,Zn({},v,{connectNulls:s,dot:c,activeDot:r,animateNewValues:n,animationBegin:a,animationDuration:i,animationEasing:o,isAnimationActive:d,hide:u,label:f,legendType:m,xAxisId:h,yAxisId:p,points:C,layout:k,height:x,width:w,left:b,top:j,needClip:g}))}function gz(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:a,yAxisTicks:i,dataKey:o,bandSize:s,displayedData:c}=e;return c.map((u,d)=>{var f=kt(u,o);return t==="horizontal"?{x:wf({axis:r,ticks:a,bandSize:s,entry:u,index:d}),y:_e(f)?null:n.scale(f),value:f,payload:u}:{x:_e(f)?null:r.scale(f),y:wf({axis:n,ticks:i,bandSize:s,entry:u,index:d}),value:f,payload:u}})}class co extends y.PureComponent{render(){return y.createElement(V$,{type:"line",data:this.props.data,xAxisId:this.props.xAxisId,yAxisId:this.props.yAxisId,zAxisId:0,dataKey:this.props.dataKey,stackId:void 0,hide:this.props.hide,barSize:void 0},y.createElement(O$,{legendPayload:nz(this.props)}),y.createElement(A$,{fn:az,args:this.props}),y.createElement(pz,this.props))}}gs(co,"displayName","Line");gs(co,"defaultProps",ax);function hh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ph(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hh(Object(r),!0).forEach(function(n){vz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hh(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vz(e,t,r){return(t=yz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yz(e){var t=xz(e,"string");return typeof t=="symbol"?t:t+""}function xz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bz={xAxis:{},yAxis:{},zAxis:{}},ix=zt({name:"cartesianAxis",initialState:bz,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload;e.yAxis[r]&&(e.yAxis[r]=ph(ph({},e.yAxis[r]),{},{width:n}))}}}),{addXAxis:wz,removeXAxis:jz,addYAxis:kz,removeYAxis:Sz,addZAxis:$R,removeZAxis:zR,updateYAxisWidth:Nz}=ix.actions,Pz=ix.reducer,Ez=["children"],_z=["dangerouslySetInnerHTML","ticks"];function ox(e,t,r){return(t=Az(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Az(e){var t=Cz(e,"string");return typeof t=="symbol"?t:t+""}function Cz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ql(){return ql=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ql.apply(null,arguments)}function sx(e,t){if(e==null)return{};var r,n,a=Oz(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Oz(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Tz(e){var t=ot(),r=y.useMemo(()=>{var{children:i}=e,o=sx(e,Ez);return o},[e]),n=H(i=>Nr(i,r.id)),a=r===n;return y.useEffect(()=>(t(wz(r)),()=>{t(jz(r))}),[r,t]),a?e.children:null}var Iz=e=>{var{xAxisId:t,className:r}=e,n=H(a0),a=ft(),i="xAxis",o=H(h=>Jn(h,i,t,a)),s=H(h=>Jv(h,i,t,a)),c=H(h=>$I(h,t)),u=H(h=>BI(h,t));if(c==null||u==null)return null;var{dangerouslySetInnerHTML:d,ticks:f}=e,m=sx(e,_z);return y.createElement(Kr,ql({},m,{scale:o,x:u.x,y:u.y,width:c.width,height:c.height,className:fe("recharts-".concat(i," ").concat(i),r),viewBox:n,ticks:s}))},Dz=e=>{var t,r,n,a,i;return y.createElement(Tz,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(a=e.minTickGap)!==null&&a!==void 0?a:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter},y.createElement(Iz,e))};class uo extends y.Component{render(){return y.createElement(Dz,this.props)}}ox(uo,"displayName","XAxis");ox(uo,"defaultProps",{allowDataOverflow:vt.allowDataOverflow,allowDecimals:vt.allowDecimals,allowDuplicatedCategory:vt.allowDuplicatedCategory,height:vt.height,hide:!1,mirror:vt.mirror,orientation:vt.orientation,padding:vt.padding,reversed:vt.reversed,scale:vt.scale,tickCount:vt.tickCount,type:vt.type,xAxisId:0});var Mz=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:i=0}=e,o=0;if(t){t.forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>o&&(o=f.width)}});var s=r?r.getBoundingClientRect().width:0,c=a+i,u=o+c+s+(r?n:0);return Math.round(u)}return 0},$z=["dangerouslySetInnerHTML","ticks"];function lx(e,t,r){return(t=zz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zz(e){var t=Rz(e,"string");return typeof t=="symbol"?t:t+""}function Rz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zl(){return Zl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zl.apply(null,arguments)}function Lz(e,t){if(e==null)return{};var r,n,a=Fz(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Fz(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Bz(e){var t=ot();return y.useEffect(()=>(t(kz(e)),()=>{t(Sz(e))}),[e,t]),null}var Uz=e=>{var t,{yAxisId:r,className:n,width:a,label:i}=e,o=y.useRef(null),s=y.useRef(null),c=H(a0),u=ft(),d=ot(),f="yAxis",m=H(b=>Jn(b,f,r,u)),h=H(b=>WI(b,r)),p=H(b=>UI(b,r)),v=H(b=>Jv(b,f,r,u));if(y.useLayoutEffect(()=>{var b;if(!(a!=="auto"||!h||Hu(i)||y.isValidElement(i))){var j=o.current,k=j==null||(b=j.tickRefs)===null||b===void 0?void 0:b.current,{tickSize:S,tickMargin:N}=j.props,C=Mz({ticks:k,label:s.current,labelGapWithTick:5,tickSize:S,tickMargin:N});Math.round(h.width)!==Math.round(C)&&d(Nz({id:r,width:C}))}},[o,o==null||(t=o.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,h?.width,h,d,i,r,a]),h==null||p==null)return null;var{dangerouslySetInnerHTML:g,ticks:x}=e,w=Lz(e,$z);return y.createElement(Kr,Zl({},w,{ref:o,labelRef:s,scale:m,x:p.x,y:p.y,width:h.width,height:h.height,className:fe("recharts-".concat(f," ").concat(f),n),viewBox:c,ticks:v}))},Wz=e=>{var t,r,n,a,i;return y.createElement(y.Fragment,null,y.createElement(Bz,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(a=e.minTickGap)!==null&&a!==void 0?a:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter}),y.createElement(Uz,e))},Hz={allowDataOverflow:yt.allowDataOverflow,allowDecimals:yt.allowDecimals,allowDuplicatedCategory:yt.allowDuplicatedCategory,hide:!1,mirror:yt.mirror,orientation:yt.orientation,padding:yt.padding,reversed:yt.reversed,scale:yt.scale,tickCount:yt.tickCount,type:yt.type,width:yt.width,yAxisId:0};class fo extends y.Component{render(){return y.createElement(Wz,this.props)}}lx(fo,"displayName","YAxis");lx(fo,"defaultProps",Hz);var qz={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ja=y;function Zz(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Kz=typeof Object.is=="function"?Object.is:Zz,Gz=Ja.useSyncExternalStore,Vz=Ja.useRef,Yz=Ja.useEffect,Xz=Ja.useMemo,Qz=Ja.useDebugValue;qz.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var i=Vz(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=Xz(function(){function c(h){if(!u){if(u=!0,d=h,h=n(h),a!==void 0&&o.hasValue){var p=o.value;if(a(p,h))return f=p}return f=h}if(p=f,Kz(d,h))return p;var v=n(h);return a!==void 0&&a(p,v)?(d=h,p):(d=h,f=v)}var u=!1,d,f,m=r===void 0?null:r;return[function(){return c(t())},m===null?void 0:function(){return c(m())}]},[t,r,n,a]);var s=Gz(e,i[0],i[1]);return Yz(function(){o.hasValue=!0,o.value=s},[s]),Qz(s),s};function Jz(e){e()}function e4(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Jz(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!n||e===null||(n=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var gh={notify(){},get:()=>[]};function t4(e,t){let r,n=gh,a=0,i=!1;function o(v){d();const g=n.subscribe(v);let x=!1;return()=>{x||(x=!0,g(),f())}}function s(){n.notify()}function c(){p.onStateChange&&p.onStateChange()}function u(){return i}function d(){a++,r||(r=e.subscribe(c),n=e4())}function f(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=gh)}function m(){i||(i=!0,d())}function h(){i&&(i=!1,f())}const p={addNestedSub:o,notifyNestedSubs:s,handleChangeWrapper:c,isSubscribed:u,trySubscribe:m,tryUnsubscribe:h,getListeners:()=>n};return p}var r4=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",n4=r4(),a4=()=>typeof navigator<"u"&&navigator.product==="ReactNative",i4=a4(),o4=()=>n4||i4?y.useLayoutEffect:y.useEffect,s4=o4(),qs=Symbol.for("react-redux-context"),Zs=typeof globalThis<"u"?globalThis:{};function l4(){if(!y.createContext)return{};const e=Zs[qs]??(Zs[qs]=new Map);let t=e.get(y.createContext);return t||(t=y.createContext(null),e.set(y.createContext,t)),t}var c4=l4();function u4(e){const{children:t,context:r,serverState:n,store:a}=e,i=y.useMemo(()=>{const c=t4(a);return{store:a,subscription:c,getServerState:n?()=>n:void 0}},[a,n]),o=y.useMemo(()=>a.getState(),[a]);s4(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==a.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,o]);const s=r||c4;return y.createElement(s.Provider,{value:i},t)}var d4=u4,f4=(e,t)=>t,Vu=_([f4,Ne,QT,We,hy,Pr,ZD,Ye],XD),Yu=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},cx=Dt("mouseClick"),ux=Ua();ux.startListening({actionCreator:cx,effect:(e,t)=>{var r=e.payload,n=Vu(t.getState(),Yu(r));n?.activeIndex!=null&&t.dispatch(tD({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var Kl=Dt("mouseMove"),dx=Ua();dx.startListening({actionCreator:Kl,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=Du(n,n.tooltip.settings.shared),i=Vu(n,Yu(r));a==="axis"&&(i?.activeIndex!=null?t.dispatch(sy({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):t.dispatch(oy()))}});function m4(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var vh={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},fx=zt({name:"rootProps",initialState:vh,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:vh.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),h4=fx.reducer,{updateOptions:p4}=fx.actions,mx=zt({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:RR}=mx.actions,g4=mx.reducer,hx=Dt("keyDown"),px=Dt("focus"),Xu=Ua();Xu.startListening({actionCreator:hx,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var o=Number(Mu(a,Nn(r))),s=Pr(r);if(i==="Enter"){var c=io(r,"axis","hover",String(a.index));t.dispatch(zl({active:!a.active,activeIndex:a.index,activeDataKey:a.dataKey,activeCoordinate:c}));return}var u=KI(r),d=u==="left-to-right"?1:-1,f=i==="ArrowRight"?1:-1,m=o+f*d;if(!(s==null||m>=s.length||m<0)){var h=io(r,"axis","hover",String(m));t.dispatch(zl({active:!0,activeIndex:m.toString(),activeDataKey:void 0,activeCoordinate:h}))}}}}});Xu.startListening({actionCreator:px,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip;if(!a.active&&a.index==null){var i="0",o=io(r,"axis","hover",String(i));t.dispatch(zl({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:o}))}}}});var _t=Dt("externalEvent"),gx=Ua();gx.startListening({actionCreator:_t,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:$D(r),activeDataKey:DD(r),activeIndex:$a(r),activeLabel:vy(r),activeTooltipIndex:$a(r),isTooltipActive:zD(r)};e.payload.handler(n,e.payload.reactEvent)}}});var v4=_([ea],e=>e.tooltipItemPayloads),y4=_([v4,Qa,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var a=e.find(s=>s.settings.dataKey===n);if(a!=null){var{positions:i}=a;if(i!=null){var o=t(i,r);return o}}}),vx=Dt("touchMove"),yx=Ua();yx.startListening({actionCreator:vx,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=Du(n,n.tooltip.settings.shared);if(a==="axis"){var i=Vu(n,Yu({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));i?.activeIndex!=null&&t.dispatch(sy({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(a==="item"){var o,s=r.touches[0],c=document.elementFromPoint(s.clientX,s.clientY);if(!c||!c.getAttribute)return;var u=c.getAttribute(IA),d=(o=c.getAttribute(DA))!==null&&o!==void 0?o:void 0,f=y4(t.getState(),u,d);t.dispatch(eD({activeDataKey:d,activeIndex:u,activeCoordinate:f}))}}});var x4=Rg({brush:l5,cartesianAxis:Pz,chartData:mM,graphicalItems:S$,layout:aA,legend:qA,options:lM,polarAxis:x$,polarOptions:g4,referenceElements:p5,rootProps:h4,tooltip:rD}),b4=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return A_({reducer:x4,preloadedState:t,middleware:n=>n({serializableCheck:!1}).concat([ux.middleware,dx.middleware,Xu.middleware,gx.middleware,yx.middleware]),devTools:{serialize:{replacer:m4},name:"recharts-".concat(r)}})};function w4(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,a=ft(),i=y.useRef(null);if(a)return r;i.current==null&&(i.current=b4(t,n));var o=Rc;return y.createElement(d4,{context:o,store:i.current},r)}function j4(e){var{layout:t,width:r,height:n,margin:a}=e,i=ot(),o=ft();return y.useEffect(()=>{o||(i(tA(t)),i(rA({width:r,height:n})),i(eA(a)))},[i,o,t,r,n,a]),null}function k4(e){var t=ot();return y.useEffect(()=>{t(p4(e))},[t,e]),null}var S4=["children"];function N4(e,t){if(e==null)return{};var r,n,a=P4(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function P4(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function mo(){return mo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mo.apply(null,arguments)}var E4={width:"100%",height:"100%"},_4=y.forwardRef((e,t)=>{var r=o0(),n=s0(),a=c0();if(!Wi(r)||!Wi(n))return null;var{children:i,otherAttributes:o,title:s,desc:c}=e,u,d;return typeof o.tabIndex=="number"?u=o.tabIndex:u=a?0:void 0,typeof o.role=="string"?d=o.role:d=a?"application":void 0,y.createElement(Yp,mo({},o,{title:s,desc:c,role:d,tabIndex:u,width:r,height:n,style:E4,ref:t}),i)}),A4=e=>{var{children:t}=e,r=H(Xo);if(!r)return null;var{width:n,height:a,y:i,x:o}=r;return y.createElement(Yp,{width:n,height:a,x:o,y:i},t)},yh=y.forwardRef((e,t)=>{var{children:r}=e,n=N4(e,S4),a=ft();return a?y.createElement(A4,null,r):y.createElement(_4,mo({ref:t},n),r)});function C4(){var e=ot(),[t,r]=y.useState(null),n=H(TA);return y.useEffect(()=>{if(t!=null){var a=t.getBoundingClientRect(),i=a.width/t.offsetWidth;Zt(i)&&i!==n&&e(nA(i))}},[t,e,n]),r}function xh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function O4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xh(Object(r),!0).forEach(function(n){T4(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xh(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function T4(e,t,r){return(t=I4(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I4(e){var t=D4(e,"string");return typeof t=="symbol"?t:t+""}function D4(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var M4=y.forwardRef((e,t)=>{var{children:r,className:n,height:a,onClick:i,onContextMenu:o,onDoubleClick:s,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:f,onMouseUp:m,onTouchEnd:h,onTouchMove:p,onTouchStart:v,style:g,width:x}=e,w=ot(),[b,j]=y.useState(null),[k,S]=y.useState(null);gM();var N=C4(),C=y.useCallback(z=>{N(z),typeof t=="function"&&t(z),j(z),S(z)},[N,t,j,S]),T=y.useCallback(z=>{w(cx(z)),w(_t({handler:i,reactEvent:z}))},[w,i]),$=y.useCallback(z=>{w(Kl(z)),w(_t({handler:u,reactEvent:z}))},[w,u]),O=y.useCallback(z=>{w(oy()),w(_t({handler:d,reactEvent:z}))},[w,d]),E=y.useCallback(z=>{w(Kl(z)),w(_t({handler:f,reactEvent:z}))},[w,f]),F=y.useCallback(()=>{w(px())},[w]),Z=y.useCallback(z=>{w(hx(z.key))},[w]),Y=y.useCallback(z=>{w(_t({handler:o,reactEvent:z}))},[w,o]),B=y.useCallback(z=>{w(_t({handler:s,reactEvent:z}))},[w,s]),q=y.useCallback(z=>{w(_t({handler:c,reactEvent:z}))},[w,c]),te=y.useCallback(z=>{w(_t({handler:m,reactEvent:z}))},[w,m]),re=y.useCallback(z=>{w(_t({handler:v,reactEvent:z}))},[w,v]),Pe=y.useCallback(z=>{w(vx(z)),w(_t({handler:p,reactEvent:z}))},[w,p]),K=y.useCallback(z=>{w(_t({handler:h,reactEvent:z}))},[w,h]);return y.createElement(ky.Provider,{value:b},y.createElement(uE.Provider,{value:k},y.createElement("div",{className:fe("recharts-wrapper",n),style:O4({position:"relative",cursor:"default",width:x,height:a},g),onClick:T,onContextMenu:Y,onDoubleClick:B,onFocus:F,onKeyDown:Z,onMouseDown:q,onMouseEnter:$,onMouseLeave:O,onMouseMove:E,onMouseUp:te,onTouchEnd:K,onTouchMove:Pe,onTouchStart:re,ref:C},r)))}),$4=["children","className","width","height","style","compact","title","desc"];function z4(e,t){if(e==null)return{};var r,n,a=R4(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function R4(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var L4=y.forwardRef((e,t)=>{var{children:r,className:n,width:a,height:i,style:o,compact:s,title:c,desc:u}=e,d=z4(e,$4),f=ye(d,!1);return s?y.createElement(yh,{otherAttributes:f,title:c,desc:u},r):y.createElement(M4,{className:n,style:o,width:a,height:i,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},y.createElement(yh,{otherAttributes:f,title:c,desc:u,ref:t},y.createElement(v5,null,r)))}),F4=["width","height"];function Gl(){return Gl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gl.apply(null,arguments)}function B4(e,t){if(e==null)return{};var r,n,a=U4(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function U4(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var W4={top:5,right:5,bottom:5,left:5},H4={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:W4,reverseStackOrder:!1,syncMethod:"index"},q4=y.forwardRef(function(t,r){var n,a=bn(t.categoricalChartProps,H4),{width:i,height:o}=a,s=B4(a,F4);if(!Wi(i)||!Wi(o))return null;var{chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,categoricalChartProps:m}=t,h={chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,eventEmitter:void 0};return y.createElement(w4,{preloadedState:{options:h},reduxStoreName:(n=m.id)!==null&&n!==void 0?n:c},y.createElement(s5,{chartData:m.data}),y.createElement(j4,{width:i,height:o,layout:a.layout,margin:a.margin}),y.createElement(k4,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),y.createElement(L4,Gl({},s,{width:i,height:o,ref:r})))}),Z4=["axis"],bh=y.forwardRef((e,t)=>y.createElement(q4,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Z4,tooltipPayloadSearcher:oM,categoricalChartProps:e,ref:t}));function K4(e){return(typeof e=="string"?new Date(e):e).toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"2-digit"})}function G4(e){const t=typeof e=="string"?new Date(e):e;return t.toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"2-digit"})+" "+t.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})}const V4=({images:e})=>{const[t,r]=y.useState(!1),n=e.map(o=>{let s;const c={excellent:95,good:80,fair:60,poor:30};return o.healthAnalysis?.overallHealth&&c[o.healthAnalysis.overallHealth]?s=c[o.healthAnalysis.overallHealth]:typeof o.healthAnalysis?.confidence=="number"&&(s=o.healthAnalysis.confidence<=1?o.healthAnalysis.confidence*100:o.healthAnalysis.confidence),{id:o.id,date:K4(o.timestamp),dateTime:G4(o.timestamp),rawDate:o.timestamp,score:typeof s=="number"?s:null,url:o.url}}).sort((o,s)=>new Date(o.rawDate).getTime()-new Date(s.rawDate).getTime()),a=n.map(o=>({dateTime:o.dateTime,score:o.score})),i=o=>{const{key:s,cx:c,cy:u}=o;return l.jsx("circle",{cx:c,cy:u,r:4,stroke:"#2A7F3E",strokeWidth:2,fill:"#fff"},s)};return l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("h3",{className:"text-base font-semibold text-[#2A7F3E]",children:"Evolución de Salud"}),l.jsx(G,{size:"sm",variant:"outline",onClick:()=>r(!0),children:"Ampliar"})]}),l.jsx("div",{className:"w-full h-48",children:l.jsx(Wm,{width:"100%",height:"100%",children:l.jsxs(bh,{data:a,margin:{top:10,right:20,left:0,bottom:0},children:[l.jsx(Wl,{strokeDasharray:"3 3",vertical:!1,stroke:"#F0F8F5"}),l.jsx(uo,{dataKey:"dateTime",tick:{fontSize:12,fill:"#888"}}),l.jsx(fo,{domain:[0,100],tick:{fontSize:12,fill:"#888"},width:32}),l.jsx(Bm,{contentStyle:{fontSize:13,borderRadius:8},labelFormatter:o=>`Fecha: ${o}`,formatter:o=>`${o}%`}),l.jsx(co,{type:"monotone",dataKey:"score",stroke:"#2A7F3E",strokeWidth:2,dot:i,activeDot:{r:6},connectNulls:!1})]})})}),l.jsx("div",{className:"mt-4 overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-sm border-separate border-spacing-y-1",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"text-[#666]",children:[l.jsx("th",{className:"text-left font-medium px-2 py-1",children:"Fecha"}),l.jsx("th",{className:"text-left font-medium px-2 py-1",children:"Imagen"}),l.jsx("th",{className:"text-left font-medium px-2 py-1",children:"Salud"})]})}),l.jsx("tbody",{children:n.map(o=>l.jsxs("tr",{className:"bg-[#F9F9F9] hover:bg-[#F0F8F5] transition-colors",children:[l.jsx("td",{className:"px-2 py-1 whitespace-nowrap",children:o.date}),l.jsx("td",{className:"px-2 py-1",children:l.jsx("img",{src:o.url,alt:"miniatura",className:"w-10 h-10 object-cover rounded-md border"})}),l.jsx("td",{className:"px-2 py-1 font-medium text-[#2A7F3E]",children:o.score!==null?`${o.score.toFixed(0)}%`:l.jsx("span",{className:"text-[#bbb]",children:"N/A"})})]},o.id))})]})}),l.jsx(se,{children:t&&l.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 p-2",onClick:()=>r(!1),children:l.jsxs(P.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-2xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-auto p-6 relative",onClick:o=>o.stopPropagation(),children:[l.jsx(G,{size:"icon-sm",variant:"ghost",className:"absolute top-2 right-2",onClick:()=>r(!1),children:"×"}),l.jsx("h3",{className:"text-lg font-semibold mb-4 text-[#2A7F3E]",children:"Evolución de Salud (Ampliado)"}),l.jsx("div",{className:"w-full h-72 mb-6",children:l.jsx(Wm,{width:"100%",height:"100%",children:l.jsxs(bh,{data:a,margin:{top:10,right:20,left:0,bottom:0},children:[l.jsx(Wl,{strokeDasharray:"3 3",vertical:!1,stroke:"#F0F8F5"}),l.jsx(uo,{dataKey:"dateTime",tick:{fontSize:13,fill:"#888"}}),l.jsx(fo,{domain:[0,100],tick:{fontSize:13,fill:"#888"},width:36}),l.jsx(Bm,{contentStyle:{fontSize:14,borderRadius:8},labelFormatter:o=>`Fecha: ${o}`,formatter:o=>`${o}%`}),l.jsx(co,{type:"monotone",dataKey:"score",stroke:"#2A7F3E",strokeWidth:2,dot:i,activeDot:{r:7},connectNulls:!1})]})})}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-sm border-separate border-spacing-y-1",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"text-[#666]",children:[l.jsx("th",{className:"text-left font-medium px-2 py-1",children:"Fecha"}),l.jsx("th",{className:"text-left font-medium px-2 py-1",children:"Imagen"}),l.jsx("th",{className:"text-left font-medium px-2 py-1",children:"Salud"})]})}),l.jsx("tbody",{children:n.map(o=>l.jsxs("tr",{className:"bg-[#F9F9F9] hover:bg-[#F0F8F5] transition-colors",children:[l.jsx("td",{className:"px-2 py-1 whitespace-nowrap",children:o.date}),l.jsx("td",{className:"px-2 py-1",children:l.jsx("img",{src:o.url,alt:"miniatura",className:"w-12 h-12 object-cover rounded-md border"})}),l.jsx("td",{className:"px-2 py-1 font-medium text-[#2A7F3E]",children:o.score!==null?`${o.score.toFixed(0)}%`:l.jsx("span",{className:"text-[#bbb]",children:"N/A"})})]},o.id))})]})})]})})})]})},Y4=({plant:e,onAddPhoto:t})=>{const r=y.useMemo(()=>{if(!e.images||e.images.length===0)return[];const i=[...e.images].sort((d,f)=>new Date(d.timestamp).getTime()-new Date(f.timestamp).getTime()),o=[],s=30*24*60*60*1e3;let c=new Date(i[0].timestamp),u=[];return i.forEach((d,f)=>{const m=new Date(d.timestamp);if(m.getTime()-c.getTime()<=s)u.push(d);else{if(u.length>0){const h=u.map(v=>{const g=v.healthAnalysis;if(!g)return;const x={excellent:95,good:80,fair:60,poor:30};if(g.overallHealth&&x[g.overallHealth])return x[g.overallHealth];if(typeof g.confidence=="number")return g.confidence<=1?g.confidence*100:g.confidence}).filter(v=>v!==void 0),p=h.length>0?h.reduce((v,g)=>v+g,0)/h.length:0;o.push({id:`period-${o.length}`,images:[...u],startDate:new Date(u[0].timestamp),endDate:new Date(u[u.length-1].timestamp),avgHealthScore:p,trend:o.length>0?p>o[o.length-1].avgHealthScore?"improving":"declining":"stable",photoCount:u.length})}c=m,u=[d]}if(f===i.length-1&&u.length>0){const h=u.map(v=>{const g=v.healthAnalysis;if(!g)return;const x={excellent:95,good:80,fair:60,poor:30};if(g.overallHealth&&x[g.overallHealth])return x[g.overallHealth];if(typeof g.confidence=="number")return g.confidence<=1?g.confidence*100:g.confidence}).filter(v=>v!==void 0),p=h.length>0?h.reduce((v,g)=>v+g,0)/h.length:0;o.push({id:`period-${o.length}`,images:[...u],startDate:new Date(u[0].timestamp),endDate:new Date(u[u.length-1].timestamp),avgHealthScore:p,trend:o.length>0?p>o[o.length-1].avgHealthScore?"improving":"declining":"stable",photoCount:u.length})}}),o},[e.images]);function n(i){if(i.length<2)return null;const o=i[i.length-1]-i[0];return o>5?{icon:"⬆️",label:"Mejorando",color:"text-green-600 bg-green-50"}:o<-5?{icon:"⬇️",label:"Declive",color:"text-red-600 bg-red-50"}:{icon:"➡️",label:"Estable",color:"text-gray-600 bg-gray-50"}}if(r.length===0)return l.jsxs(Pt,{className:"mt-6",children:[l.jsx(No,{children:l.jsxs(bc,{className:"flex items-center",children:[l.jsx(Qx,{className:"w-5 h-5 mr-2 text-primary"}),"Evolución de tu Planta"]})}),l.jsx(gr,{children:l.jsxs("div",{className:"text-center py-8",children:[l.jsx(tr,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"¡Comienza a documentar la evolución!"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:"Agrega más fotos a lo largo del tiempo para ver cómo progresa tu planta."}),l.jsxs(G,{onClick:t,className:"gap-2",children:[l.jsx(ec,{className:"w-4 h-4"}),"Agregar Primera Foto"]})]})})]});const a=r.map(i=>i.avgHealthScore??0);return n(a),l.jsx(Pt,{className:"mt-6",children:l.jsx(gr,{className:"mt-4 space-y-6",children:l.jsx(V4,{images:e.images||[]})})})},X4=({isOpen:e,onClose:t,onPhotoAdded:r,plantName:n})=>{const[a,i]=y.useState("choose"),[o,s]=y.useState(null),[c,u]=y.useState(""),[d,f]=y.useState(null),[m,h]=y.useState(!1),p=y.useRef(null),{addToast:v}=Kn(),g=y.useCallback(()=>{i("choose"),s(null),u(""),f(null),h(!1)},[]),x=y.useCallback(()=>{g(),t()},[g,t]),w=y.useCallback(F=>{const Z=new FileReader;Z.onload=Y=>{const B=Y.target?.result;s(B),i("preview")},Z.readAsDataURL(F)},[]),b=y.useCallback(()=>{p.current&&p.current.click()},[]),j=y.useCallback(()=>{b()},[b]),k=y.useCallback(F=>{const Z=F.target.files?.[0];if(Z){if(!Z.type.startsWith("image/")){f("Por favor selecciona un archivo de imagen válido.");return}if(Z.size>5*1024*1024){f("La imagen es demasiado grande. Máximo 5MB.");return}w(Z)}},[w]),S=y.useCallback(async()=>{if(o)try{i("uploading"),h(!0),await r(o,c.trim()||void 0),i("success"),h(!1),v({type:"success",title:"Foto agregada exitosamente",message:`Nueva imagen añadida a ${n}`}),setTimeout(()=>{x()},1500)}catch(F){f(F instanceof Error?F.message:"Error al subir la imagen"),i("error"),h(!1)}},[o,c,r,n,v,x]),N=()=>(console.log("[AddPhotoModal] Renderizando botón Tomar Foto"),console.log("[AddPhotoModal] Renderizando botón Elegir de Galería"),l.jsxs(P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"text-center space-y-6",children:[l.jsxs("div",{children:[l.jsx(tr,{className:"w-16 h-16 text-primary mx-auto mb-4"}),l.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Agregar Nueva Foto"}),l.jsxs("p",{className:"text-muted-foreground",children:["Documenta el progreso de ",l.jsx("span",{className:"font-medium",children:n})]})]}),l.jsxs("div",{className:"grid gap-4",children:[l.jsxs(G,{variant:"primary",size:"lg",onClick:j,className:"h-16 gap-3 text-primary-foreground",children:[l.jsx(tr,{className:"w-6 h-6"}),"Tomar Foto"]}),l.jsxs(G,{variant:"secondary",size:"lg",onClick:b,className:"h-16 gap-3 text-primary-foreground",children:[l.jsx(Th,{className:"w-6 h-6"}),"Elegir de Galería"]})]}),l.jsx("input",{ref:p,type:"file",accept:"image/*",onChange:k,className:"hidden","data-testid":"file-input"})]})),C=()=>l.jsxs(P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Vista Previa"}),l.jsxs("p",{className:"text-muted-foreground",children:["Revisa la imagen antes de agregar a ",n]})]}),o&&l.jsxs("div",{className:"space-y-4 pb-8 sm:pb-0",children:[l.jsx("div",{className:"aspect-video max-h-80 mx-auto rounded-lg overflow-hidden border",children:l.jsx("img",{src:o,alt:"Vista previa",className:"w-full h-full object-cover"})}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"block text-sm font-medium",children:"Nota (opcional)"}),l.jsx("textarea",{value:c,onChange:F=>u(F.target.value),placeholder:"Agrega una nota sobre esta foto...",className:"w-full p-3 border border-neutral-200 rounded-lg resize-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:3,maxLength:200}),l.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[c.length,"/200"]})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx(G,{variant:"secondary",onClick:()=>i("choose"),className:"flex-1",children:"Cambiar Imagen"}),l.jsxs(G,{variant:"primary",onClick:S,className:"flex-1 gap-2",children:[l.jsx(Ve,{className:"w-4 h-4"}),"Analizar y Guardar"]})]})]})]}),T=()=>l.jsxs(P.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center space-y-6 py-8",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsx(on,{className:"w-16 h-16 text-primary mx-auto animate-spin"}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-semibold mb-2",children:m?"Analizando imagen...":"Subiendo foto..."}),l.jsx("p",{className:"text-muted-foreground",children:m?"La IA está evaluando la salud de tu planta":"Guardando la nueva imagen en tu jardín"})]})]}),l.jsx("div",{className:"w-full bg-neutral-200 rounded-full h-2",children:l.jsx("div",{className:"bg-primary h-2 rounded-full animate-pulse",style:{width:"70%"}})})]}),$=()=>l.jsxs(P.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"text-center space-y-6 py-8",children:[l.jsx(dr,{className:"w-16 h-16 text-success-500 mx-auto"}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-semibold mb-2",children:"¡Foto agregada!"}),l.jsxs("p",{className:"text-muted-foreground",children:["La nueva imagen ha sido añadida al progreso de ",n]})]})]}),O=()=>l.jsxs(P.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"text-center space-y-6 py-8",children:[l.jsx(Tt,{className:"w-16 h-16 text-error-500 mx-auto"}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Error al subir"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:d||"Hubo un problema al procesar la imagen"}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx(G,{variant:"secondary",onClick:()=>i("choose"),children:"Intentar de Nuevo"}),l.jsx(G,{variant:"primary",onClick:x,children:"Cerrar"})]})]})]}),E=()=>{switch(a){case"choose":return N();case"preview":return C();case"uploading":return T();case"success":return $();case"error":return O();default:return N()}};return l.jsx(se,{children:e&&l.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",onClick:F=>{F.target===F.currentTarget&&a!=="uploading"&&x()},children:l.jsx(P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"w-full max-w-md",children:l.jsx(Pt,{children:l.jsxs(gr,{className:"p-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(tc,{className:"w-5 h-5 text-primary"}),l.jsx("span",{className:"font-medium text-sm text-muted-foreground",children:"NUEVA FOTO"})]}),a!=="uploading"&&l.jsx(G,{variant:"ghost",size:"icon-sm",onClick:x,children:l.jsx(br,{className:"w-4 h-4"})})]}),E()]})})})})})},Q4=({plant:e})=>{const{careProfile:t,healthScore:r,lastWatered:n,dateAdded:a}=e,i=e.images?.[0]?.healthAnalysis,o=n?Math.floor((Date.now()-new Date(n).getTime())/(1e3*60*60*24)):null,s=Math.floor((Date.now()-new Date(a).getTime())/(1e3*60*60*24)),u=r>=85?{text:"Excelente",color:"text-green-500",icon:dr,emoji:"🌟"}:r>=70?{text:"Buena",color:"text-green-400",icon:dr,emoji:"✅"}:r>=50?{text:"Regular",color:"text-yellow-500",icon:Jl,emoji:"⚠️"}:{text:"Necesita atención",color:"text-red-500",icon:qt,emoji:"🆘"},f=(()=>{if(!o||!t?.wateringFrequency)return{text:"Sin datos",color:"text-gray-500",urgent:!1};const p=o>=t.wateringFrequency;return o>t.wateringFrequency+2?{text:"Riego urgente",color:"text-red-500",urgent:!0}:p?{text:"Necesita riego",color:"text-yellow-500",urgent:!0}:{text:"Bien hidratada",color:"text-green-500",urgent:!1}})(),m={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{staggerChildren:.1}}},h={hidden:{opacity:0,y:10},visible:{opacity:1,y:0}};return l.jsx(P.div,{variants:m,initial:"hidden",animate:"visible",children:l.jsxs(Pt,{variant:"glass",className:"content-spacing-sm element-spacing",children:[e.description&&l.jsx("div",{className:"mb-4",children:l.jsx("p",{className:"text-base text-neutral-700 dark:text-neutral-200 leading-relaxed",children:e.description})}),l.jsx(P.div,{variants:h,className:"w-full mb-3",children:l.jsxs("div",{className:"w-full flex items-center justify-between bg-green-100 dark:bg-green-900/30 rounded-lg px-4 py-2 mb-2",children:[l.jsxs("span",{className:"flex items-center gap-2 text-green-700 text-base font-bold",children:[l.jsx(dr,{className:"w-5 h-5"}),r,"% ",u.text]}),l.jsxs("span",{className:"flex items-center gap-1 text-contrast-soft text-sm align-baseline",children:[l.jsx(Ai,{className:"w-4 h-4"}),"Día ",s]})]})}),l.jsxs(P.div,{variants:h,className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:ce("flex items-center space-x-3 p-3 rounded-lg",f.urgent?"bg-yellow-50 dark:bg-yellow-900/20":"bg-green-50 dark:bg-green-900/20"),children:[l.jsx(po,{className:ce("w-5 h-5",f.color)}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-contrast-soft",children:"Riego"}),l.jsx("p",{className:ce("font-semibold text-sm",f.color),children:f.text}),o!==null&&l.jsxs("p",{className:"text-xs text-contrast-soft",children:["Hace ",o," día",o!==1?"s":""]})]})]}),l.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg bg-blue-50 dark:bg-blue-900/20",children:[l.jsx(zr,{className:"w-5 h-5 text-blue-500"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-contrast-soft",children:"Luz"}),l.jsx("p",{className:"font-semibold text-sm text-blue-600 dark:text-blue-400",children:t?.sunlightRequirement||"No especificado"}),e.lightRequirements&&l.jsx("p",{className:"text-xs text-contrast-soft capitalize",children:e.lightRequirements.replace("_"," ")})]})]}),e.plantEnvironment&&l.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg bg-purple-50 dark:bg-purple-900/20",children:[l.jsx(Rh,{className:"w-5 h-5 text-purple-500"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-contrast-soft",children:"Ambiente"}),l.jsx("p",{className:"font-semibold text-sm text-purple-600 dark:text-purple-400 capitalize",children:e.plantEnvironment==="ambos"?"Interior/Exterior":e.plantEnvironment})]})]}),t?.temperatureRange&&l.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg bg-orange-50 dark:bg-orange-900/20",children:[l.jsx(Lh,{className:"w-5 h-5 text-orange-500"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-contrast-soft",children:"Temperatura"}),l.jsxs("p",{className:"font-semibold text-sm text-orange-600 dark:text-orange-400",children:[t.temperatureRange.min,"°-",t.temperatureRange.max,"°C"]})]})]})]}),i?.issues&&i.issues.length>0&&l.jsx(P.div,{variants:h,className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsx(qt,{className:"w-5 h-5 text-red-500 mt-0.5"}),l.jsxs("div",{children:[l.jsxs("p",{className:"font-semibold text-red-700 dark:text-red-300 text-sm mb-1",children:[i.issues.length," problema",i.issues.length!==1?"s":""," detectado",i.issues.length!==1?"s":""]}),l.jsxs("p",{className:"text-xs text-red-600 dark:text-red-400",children:[i.issues[0].description,i.issues.length>1&&` y ${i.issues.length-1} más...`]})]})]})}),l.jsx("br",{}),e.personality?.communicationStyle&&l.jsx(P.div,{variants:h,className:"p-4 bg-gradient-to-r from-green-50 to-blue-50 dark:from-green-900/20 dark:to-blue-900/20 rounded-lg border border-green-200 dark:border-green-800",children:l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsx(Sa,{className:"w-5 h-5 text-green-500 mt-0.5"}),l.jsxs("div",{children:[l.jsxs("p",{className:"font-semibold text-green-700 dark:text-green-300 text-sm mb-1",children:["🤖 Personalidad: ",e.personality.communicationStyle]}),e.personality.catchphrases&&e.personality.catchphrases.length>0&&l.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400 italic",children:['"',e.personality.catchphrases[0],'"']})]})]})})]})})},J4=({plant:e,onAddPhoto:t})=>{const[r,n]=y.useState("evolution"),a=e.images?.[0]?.healthAnalysis,i=a?.issues&&a.issues.length>0,o=e.images&&e.images.length>1,s=[{id:"evolution",title:"Evolución y Progreso",icon:l.jsx(Jx,{className:"w-5 h-5"}),badge:o?`${e.images?.length||0} fotos`:"Nueva",component:l.jsx(Y4,{plant:e,onAddPhoto:t}),priority:1},{id:"health",title:"Análisis de Salud",icon:l.jsx(eb,{className:"w-5 h-5"}),badge:i?"Atención":"Saludable",component:l.jsx(KP,{analysis:a}),priority:i?1:3},{id:"care",title:"Perfil de Cuidados",icon:l.jsx(tb,{className:"w-5 h-5"}),badge:e.careProfile?"Completo":"Pendiente",component:l.jsx(HP,{plant:e}),priority:e.careProfile?2:1},...e.funFacts&&e.funFacts.length>0?[{id:"funfacts",title:"Datos Curiosos",icon:l.jsx(Ve,{className:"w-5 h-5"}),component:l.jsx(qP,{species:e.species,funFacts:e.funFacts}),priority:4}]:[]].filter(c=>c.id==="health"?!!a:!0).sort((c,u)=>c.priority-u.priority);return l.jsx("div",{className:"flex flex-col gap-y-1",children:s.map(c=>{const u=r===c.id,d=c.id==="health";return c.id==="care"?l.jsxs(Pt,{variant:"default",radius:"default",className:ce("border border-[#E5E5E5] rounded-[8px] transition-all duration-200","bg-white","p-0 mb-4"),children:[l.jsxs(P.button,{onClick:()=>n(u?"":c.id),className:ce("w-full flex items-center justify-between px-4 py-3 min-h-12 text-left focus:outline-none","bg-white","rounded-t-[8px]"),style:{position:u?"sticky":"static",top:0,zIndex:2},whileTap:{scale:.98},children:[l.jsxs("div",{className:"flex items-center min-w-0 flex-1",children:[l.jsx("span",{className:"flex items-center justify-center mr-2",style:{width:20,height:20},children:c.icon}),l.jsx("span",{className:"font-semibold text-[16px] truncate text-neutral-900 dark:text-neutral-100",children:c.title})]}),l.jsx(P.div,{animate:{rotate:u?180:0},transition:{duration:.2},className:"flex-shrink-0 ml-2 align-middle",style:{display:"flex",alignItems:"center",marginRight:16,transition:"transform .2s"},children:l.jsx(ld,{className:"w-6 h-6 text-neutral-600 dark:text-neutral-400"})})]}),l.jsx(se,{children:u&&l.jsx(P.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:l.jsxs("div",{className:"px-4 pb-3 pt-1 max-h-[60vh] overflow-y-auto",style:{lineHeight:"1.4"},children:[c.component,l.jsx("div",{style:{paddingBottom:8}})]})})})]},c.id):l.jsxs(Pt,{variant:"default",radius:"default",className:ce("border border-[#E0E0E0] rounded-[8px] transition-all duration-200",u&&d?"bg-[#FAFAFA]":"bg-white","p-0 mb-4"),children:[l.jsxs(P.button,{onClick:()=>n(u?"":c.id),className:ce("w-full flex items-center justify-between px-4 py-3 min-h-12 text-left focus:outline-none",u&&d?"bg-[#FAFAFA]":"bg-white","rounded-t-[8px]"),style:{position:u?"sticky":"static",top:0,zIndex:2},whileTap:{scale:.98},children:[l.jsxs("div",{className:"flex items-center min-w-0 flex-1",children:[l.jsx("span",{className:"flex items-center justify-center mr-2",style:{width:20,height:20},children:c.icon}),l.jsx("span",{className:"font-semibold text-[16px] truncate text-neutral-900 dark:text-neutral-100",children:c.title})]}),d&&l.jsx("span",{className:"ml-2 px-[6px] py-[2px] text-xs font-medium rounded-[4px] bg-[#E0F2E9] text-[#2A7F3E] align-middle",style:{lineHeight:"1.2"},children:c.badge}),l.jsx(P.div,{animate:{rotate:u?180:0},transition:{duration:.2},className:"flex-shrink-0 ml-2 align-middle",style:{display:"flex",alignItems:"center",marginRight:16},children:l.jsx(ld,{className:"w-6 h-6 text-neutral-600 dark:text-neutral-400"})})]}),l.jsx(se,{children:u&&l.jsx(P.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:l.jsxs("div",{className:"px-4 pb-3 pt-1 max-h-[60vh] overflow-y-auto",style:{lineHeight:"1.4"},children:[c.component,d&&l.jsx("div",{style:{paddingBottom:8}})]})})})]},c.id)})})},wh=()=>l.jsxs("div",{className:"relative",children:[l.jsxs("div",{className:"relative h-96 w-full overflow-hidden bg-gradient-to-br from-muted/50 to-muted",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background/80 via-background/20 to-transparent"}),l.jsx("div",{className:"absolute top-0 left-0 right-0 p-4 pt-safe-top",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx(V,{className:"h-10 w-10 rounded-full"}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(V,{className:"h-10 w-10 rounded-full"}),l.jsx(V,{className:"h-10 w-10 rounded-full"})]})]})}),l.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-6 pb-safe-bottom",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(V,{className:"h-8 w-64"}),l.jsx(V,{className:"h-6 w-48"})]}),l.jsxs("div",{className:"flex flex-wrap gap-3",children:[l.jsx(V,{className:"h-8 w-24 rounded-full"}),l.jsx(V,{className:"h-8 w-32 rounded-full"}),l.jsx(V,{className:"h-8 w-20 rounded-full"})]})]})})]}),l.jsxs("div",{className:"p-4 space-y-6 pb-20",children:[l.jsxs("div",{className:"bg-background p-6 rounded-2xl shadow-lg border border-border/50",children:[l.jsxs("div",{className:"mb-6 flex items-center",children:[l.jsx(V,{className:"h-12 w-12 rounded-full mr-4"}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(V,{className:"h-6 w-48"}),l.jsx(V,{className:"h-4 w-64"})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx(V,{className:"h-4 w-full"}),l.jsx(V,{className:"h-4 w-5/6"}),l.jsx(V,{className:"h-4 w-4/5"}),l.jsx(V,{className:"h-4 w-3/4"})]}),l.jsxs("div",{className:"mt-8 space-y-4",children:[l.jsxs("div",{className:"flex items-center mb-4",children:[l.jsx(V,{className:"h-12 w-12 rounded-full mr-4"}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(V,{className:"h-6 w-32"}),l.jsx(V,{className:"h-4 w-56"})]})]}),[1,2,3].map(e=>l.jsxs("div",{className:"flex items-start bg-muted/20 rounded-xl p-4",children:[l.jsx(V,{className:"h-5 w-5 rounded-full mr-4 mt-1"}),l.jsx(V,{className:"h-4 w-full"})]},e))]})]}),l.jsxs("div",{className:"bg-background p-6 rounded-2xl shadow-lg border border-border/50",children:[l.jsxs("div",{className:"mb-4 flex items-center",children:[l.jsx(V,{className:"h-6 w-6 mr-3"}),l.jsx(V,{className:"h-6 w-48"})]}),l.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-6",children:[l.jsx(V,{className:"h-12 w-12 mx-auto mb-3"}),l.jsx(V,{className:"h-6 w-32 mx-auto mb-2"}),l.jsx(V,{className:"h-4 w-48 mx-auto"})]})]}),l.jsxs("div",{className:"bg-background p-6 rounded-2xl shadow-lg border border-border/50",children:[l.jsxs("div",{className:"mb-4 flex items-center",children:[l.jsx(V,{className:"h-6 w-6 mr-3"}),l.jsx(V,{className:"h-6 w-40"})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3,4,5,6].map(e=>l.jsxs("div",{className:"bg-muted/50 rounded-lg p-4",children:[l.jsx(V,{className:"h-8 w-8 mb-2"}),l.jsx(V,{className:"h-4 w-16 mb-1"}),l.jsx(V,{className:"h-5 w-24"})]},e))})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(V,{className:"h-5 w-5 mr-2"}),l.jsx(V,{className:"h-6 w-32"})]}),l.jsx(V,{className:"h-4 w-16"})]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:[1,2,3,4,5,6].map(e=>l.jsx(V,{className:"aspect-square rounded-xl"},e))})]})]}),l.jsxs("div",{className:"fixed bottom-4 right-4 z-40 flex flex-col-reverse gap-3",children:[[1,2,3].map(e=>l.jsx(V,{className:"h-14 w-14 rounded-full"},e)),l.jsx(V,{className:"h-16 w-16 rounded-full"})]})]}),e3=()=>{const{plantId:e}=Xl(),t=it(),{plant:r,loading:n,error:a}=jc(e),{addPlantImage:i}=zP(),[o,s]=y.useState(!1),c=async(u,d)=>{if(!e)throw new Error("Plant ID is required");return new Promise((f,m)=>{i({plantId:e,imageDataUrl:u,note:d},{onSuccess:()=>f(),onError:h=>m(h)})})};return n?l.jsx(wh,{}):a?l.jsx("main",{className:"flex flex-1 flex-col items-center justify-center p-4 text-center h-screen",children:l.jsxs(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[l.jsx(Tt,{className:"w-16 h-16 text-destructive mx-auto"}),l.jsx("h1",{className:"text-2xl font-bold text-destructive",children:"Ocurrió un Error"}),l.jsx("p",{className:"text-muted-foreground max-w-md",children:a}),l.jsx(G,{onClick:()=>window.location.reload(),className:"mt-4",children:"Intentar de nuevo"})]})}):r?l.jsx(y.Suspense,{fallback:l.jsx(wh,{}),children:l.jsxs(P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[l.jsx(WP,{plant:r}),l.jsxs("main",{className:"p-3 sm:p-4 space-y-3 sm:space-y-4",style:{paddingBottom:"calc(88px + env(safe-area-inset-bottom))"},children:[l.jsx(P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1,duration:.2},children:l.jsx(Q4,{plant:r})}),l.jsx(P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.15,duration:.2},children:l.jsx(J4,{plant:r,onAddPhoto:()=>s(!0)})}),l.jsx(P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2,duration:.2},children:l.jsx(RP,{images:r.images})})]}),l.jsxs(P.div,{className:"fixed bottom-24 right-4 z-40 flex flex-col-reverse gap-3",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.25,duration:.2},children:[l.jsxs(P.button,{onClick:()=>s(!0),className:"bg-primary hover:bg-primary/90 text-primary-foreground p-2.5 sm:p-3 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 group flex items-center",whileHover:{scale:1.1},whileTap:{scale:.95},title:"Agregar nueva foto",children:[l.jsx(tr,{className:"w-4 h-4 sm:w-5 sm:h-5"}),l.jsx("span",{className:"ml-2 text-xs font-medium block sm:hidden",children:"Agregar foto"}),l.jsx("span",{className:"absolute right-full mr-3 top-1/2 -translate-y-1/2 tooltip-contrast text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap shadow-lg hidden sm:block",children:"Agregar foto"})]}),l.jsxs(P.button,{onClick:()=>t(ze.toPlantChat(r.id)),className:"bg-blue-500 hover:bg-blue-600 text-white p-2.5 sm:p-3 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 group flex items-center",whileHover:{scale:1.1},whileTap:{scale:.95},title:"Chat con la planta",children:[l.jsx(Fa,{className:"w-4 h-4 sm:w-5 sm:h-5"}),l.jsx("span",{className:"ml-2 text-xs font-medium block sm:hidden",children:"Chat"}),l.jsx("span",{className:"absolute right-full mr-3 top-1/2 -translate-y-1/2 tooltip-contrast text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap shadow-lg hidden sm:block",children:"Chat"})]})]}),l.jsx(X4,{isOpen:o,onClose:()=>s(!1),onPhotoAdded:c,plantName:r.nickname||r.name})]})}):l.jsx("main",{className:"flex flex-1 flex-col items-center justify-center p-4 text-center h-screen",children:l.jsxs(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[l.jsx(Tt,{className:"w-16 h-16 text-muted-foreground mx-auto"}),l.jsx("h1",{className:"text-2xl font-bold",children:"Planta no encontrada"}),l.jsx("p",{className:"text-muted-foreground max-w-md",children:"No se pudo encontrar la información de la planta solicitada."}),l.jsx(G,{onClick:()=>t(ze.toDashboard()),className:"mt-4",children:"Volver al inicio"})]})})},t3=({videoRef:e,canvasRef:t})=>{const[r,n]=y.useState(!1),[a,i]=y.useState(null),[o,s]=y.useState("environment"),[c,u]=y.useState(null),d=y.useRef(null),f=y.useCallback(async()=>{try{d.current&&d.current.getTracks().forEach(x=>x.stop()),u(null);const g=await navigator.mediaDevices.getUserMedia({video:{facingMode:o,width:{ideal:1920},height:{ideal:1080},aspectRatio:16/9}});e.current&&(e.current.srcObject=g,d.current=g)}catch(g){console.error("Error accessing camera:",g),g instanceof Error?g.name==="NotAllowedError"||g.message.includes("Permission dismissed")?u("Permiso de cámara denegado. Por favor, actívalo en los ajustes de tu navegador."):u("No se pudo acceder a la cámara. Revisa los permisos y el dispositivo."):u("Ocurrió un error inesperado al acceder a la cámara.")}},[o,e]);y.useEffect(()=>(f(),()=>{d.current&&d.current.getTracks().forEach(g=>g.stop())}),[f]);const m=y.useCallback(()=>{if(!e.current||!t.current)return;const g=e.current,x=t.current,w=x.getContext("2d");if(!w)return;x.width=g.videoWidth,x.height=g.videoHeight,w.drawImage(g,0,0,g.videoWidth,g.videoHeight);const b=x.toDataURL("image/jpeg",.9);i(b),n(!0),d.current&&d.current.getTracks().forEach(j=>j.stop()),"vibrate"in navigator&&navigator.vibrate(50)},[e,t]),h=y.useCallback(()=>{i(null),n(!1),f()},[f]);return{isCapturing:r,capturedImage:a,cameraError:c,captureImage:m,retakePhoto:h,switchCamera:()=>{s(g=>g==="user"?"environment":"user")},startCamera:f,selectFromGallery:g=>{if(g&&g.type.startsWith("image/")){const x=new FileReader;x.onload=w=>{const b=w.target?.result;i(b),n(!0),d.current&&d.current.getTracks().forEach(j=>j.stop())},x.readAsDataURL(g)}}}},r3=({error:e,onRetry:t})=>{const r=it();return l.jsx("div",{className:"absolute inset-0 bg-black flex items-center justify-center p-6",children:l.jsx("div",{className:"bg-gray-900 rounded-2xl p-6 max-w-sm w-full mx-4",children:l.jsxs("div",{className:"flex flex-col items-center text-center",children:[l.jsx("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mb-4",children:l.jsx(Tt,{size:32,className:"text-red-400"})}),l.jsx("h3",{className:"text-white text-lg font-semibold mb-2",children:"Camera Access Required"}),l.jsx("p",{className:"text-gray-300 text-sm mb-6 leading-relaxed",children:e}),l.jsxs("div",{className:"space-y-3 w-full",children:[l.jsxs(G,{onClick:t,children:[l.jsx(Lr,{size:18,className:"mr-2"}),l.jsx("span",{children:"Try Again"})]}),l.jsx(G,{onClick:()=>r(ze.toDashboard()),variant:"secondary",children:"Go Back"})]}),l.jsx("div",{className:"mt-4 p-3 bg-gray-800 rounded-lg",children:l.jsxs("p",{className:"text-gray-400 text-xs",children:[l.jsx("strong",{children:"How to enable camera:"}),l.jsx("br",{}),"1. Click the camera icon in your browser's address bar",l.jsx("br",{}),'2. Select "Allow" for camera access',l.jsx("br",{}),'3. Refresh the page or tap "Try Again"']})})]})})})},n3=({image:e,isAnalyzing:t,onRetake:r,onAnalyze:n})=>l.jsxs(l.Fragment,{children:[l.jsx(P.img,{src:e,alt:"Captured plant",className:"absolute inset-0 w-full h-full object-cover z-10",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}),l.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-8 safe-area-bottom z-20",children:[l.jsxs("div",{className:"flex items-center justify-center space-x-6",children:[l.jsx(G,{onClick:r,variant:"secondary",disabled:t,children:"Retake"}),l.jsx(G,{onClick:n,disabled:t,children:t?l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),l.jsx("span",{children:"Analyzing..."})]}):"Add Plant"})]}),t&&l.jsx("p",{className:"text-center text-white mt-4 text-sm",children:"AI is identifying your plant and creating a care profile..."})]})]}),a3=({videoRef:e,canvasRef:t,flashEnabled:r,onCapture:n,onSwitchCamera:a,onToggleFlash:i,onSelectFromGallery:o})=>{const s=it();return l.jsxs(l.Fragment,{children:[l.jsx(P.video,{ref:e,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5}}),l.jsx("canvas",{ref:t,className:"hidden"}),l.jsx("div",{className:"absolute top-0 left-0 right-0 p-4 safe-area-top z-20",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx(G,{onClick:()=>s(ze.toDashboard()),variant:"ghost",size:"icon",className:"rounded-full bg-black/50",children:l.jsx(br,{size:20})}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx(G,{onClick:i,variant:"ghost",size:"icon",className:`rounded-full ${r?"bg-yellow-500 text-black hover:bg-yellow-600":"bg-black/50"}`,children:r?l.jsx(Ve,{size:20}):l.jsx(rb,{size:20})}),l.jsx(G,{onClick:a,variant:"ghost",size:"icon",className:"rounded-full bg-black/50",children:l.jsx(nb,{size:20})})]})]})}),l.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-8 safe-area-bottom z-20",children:[l.jsxs("div",{className:"flex items-center justify-center space-x-8",children:[l.jsx(G,{onClick:o,size:"icon",variant:"ghost",className:"w-14 h-14 rounded-full bg-black/50",children:l.jsx(tc,{size:24})}),l.jsx(P.button,{onClick:n,className:"w-20 h-20 rounded-full bg-white border-4 border-gray-300 flex items-center justify-center ios-button",whileHover:{scale:1.05},whileTap:{scale:.95},children:l.jsx("div",{className:"w-16 h-16 rounded-full bg-white flex items-center justify-center",children:l.jsx(tr,{size:24,className:"text-gray-600"})})}),l.jsx("div",{className:"w-14 h-14"})]}),l.jsx("p",{className:"text-center text-white mt-4 text-sm",children:"Position your plant in the frame and tap to capture, or select from gallery"})]}),l.jsx("div",{className:"absolute inset-0 pointer-events-none flex items-center justify-center",children:l.jsx("div",{className:"w-64 h-64 border-2 border-white/50 rounded-2xl"})})]})},i3=()=>{const e=it(),{createPlant:t,isCreatingPlant:r}=So(),n=y.useRef(null),a=y.useRef(null),{isCapturing:i,capturedImage:o,cameraError:s,captureImage:c,retakePhoto:u,switchCamera:d,startCamera:f,selectFromGallery:m}=t3({videoRef:n,canvasRef:a}),[h,p]=y.useState(!1),v=y.useRef(null),g=()=>{if(!o)return;const b="Interior",j=new Promise((k,S)=>{t({imageDataUrl:o,location:b},{onSuccess:N=>{N?.id?e(ze.toPlantDetail(N.id)):e(ze.toDashboard()),k(N)},onError:N=>{S(N)}})});xp.promise(j,{loading:"Analizando imagen con IA...",success:k=>`¡Planta "${k.name}" creada con éxito!`,error:k=>`Error: ${k.message}`})},x=()=>p(b=>!b),w=b=>{const j=b.target.files?.[0];j&&m(j)};return l.jsxs("div",{className:"fixed inset-0 bg-black z-50",children:[l.jsx("input",{ref:v,type:"file",accept:"image/*",onChange:w,className:"hidden",id:"gallery-input"}),l.jsx(se,{mode:"wait",children:s?l.jsx(r3,{error:s,onRetry:f},"error"):i?l.jsx(n3,{image:o,isAnalyzing:r,onRetake:u,onAnalyze:g},"preview"):l.jsx(a3,{videoRef:n,canvasRef:a,flashEnabled:h,onCapture:c,onSwitchCamera:d,onToggleFlash:x,onSelectFromGallery:()=>v.current?.click()},"capture")})]})},o3=()=>{const{plantId:e}=Xl(),t=it(),{user:r}=wr(),n=mr(u=>u.getPlantById(e||"")),a=mr(u=>u.addChatMessage),i=mr(u=>u.isLoading),o=y.useMemo(()=>{if(!n||!n.chatHistory||n.chatHistory.length===0)return!1;const u=n.chatHistory[n.chatHistory.length-1];return i&&u.sender==="user"},[n,i]);return{plant:n,isTyping:o,handleSendMessage:async u=>{if(!(!e||!r||!u.trim()))try{await a(e,u.trim(),r.id)}catch(d){console.error("Failed to send message:",d)}},handleGoBack:()=>{t(`/plant/${e}`)},currentUser:r}},s3=({plant:e})=>{const t=it(),r=()=>{const n=e.healthScore/100,a=e.lastWatered?new Date(e.lastWatered).getTime():0,i=a?Math.max(0,1-(Date.now()-a)/(e.careProfile.wateringFrequency*24*60*60*1e3)):0,o=n*.6+i*.4;return o>.8?"radiante":o>.6?"feliz":o>.4?"estable":"necesitada de atención"};return l.jsx("header",{className:"sticky top-0 z-10 bg-background/80 backdrop-blur-sm border-b border-muted",children:l.jsxs("div",{className:"flex items-center gap-2 p-4 pt-safe-top",children:[l.jsx("button",{onClick:()=>t(ze.toPlantDetail(e.id)),className:"btn btn-ghost btn-circle",children:l.jsx(rc,{size:20})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h1",{className:"font-bold text-foreground truncate",children:e.nickname||e.name}),l.jsxs("p",{className:"text-xs text-neutral-600 dark:text-neutral-400 capitalize",children:["Se siente ",r()]})]}),l.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-green-600 dark:text-green-400",children:[l.jsx(Ch,{className:"w-4 h-4"}),l.jsxs("span",{children:[e.healthScore,"%"]})]})]})})};var l3={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 día",other:"{{count}} días"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 año",other:"alrededor de {{count}} años"},xYears:{one:"1 año",other:"{{count}} años"},overXYears:{one:"más de 1 año",other:"más de {{count}} años"},almostXYears:{one:"casi 1 año",other:"casi {{count}} años"}},c3=function(t,r,n){var a,i=l3[t];return typeof i=="string"?a=i:r===1?a=i.one:a=i.other.replace("{{count}}",r.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"en "+a:"hace "+a:a},u3={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},d3={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},f3={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},m3={date:$n({formats:u3,defaultWidth:"full"}),time:$n({formats:d3,defaultWidth:"full"}),dateTime:$n({formats:f3,defaultWidth:"full"})},h3={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'mañana a la' p",nextWeek:"eeee 'a la' p",other:"P"},p3={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'mañana a las' p",nextWeek:"eeee 'a las' p",other:"P"},g3=function(t,r,n,a){return r.getUTCHours()!==1?p3[t]:h3[t]},v3={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","después de cristo"]},y3={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},x3={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},b3={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","sá"],abbreviated:["dom","lun","mar","mié","jue","vie","sáb"],wide:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},w3={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"}},j3={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},k3=function(t,r){var n=Number(t);return n+"º"},S3={ordinalNumber:k3,era:Vt({values:v3,defaultWidth:"wide"}),quarter:Vt({values:y3,defaultWidth:"wide",argumentCallback:function(t){return Number(t)-1}}),month:Vt({values:x3,defaultWidth:"wide"}),day:Vt({values:b3,defaultWidth:"wide"}),dayPeriod:Vt({values:w3,defaultWidth:"wide",formattingValues:j3,defaultFormattingWidth:"wide"})},N3=/^(\d+)(º)?/i,P3=/\d+/i,E3={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[uú]n|despu[eé]s de cristo|era com[uú]n)/i},_3={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[uú]n)/i,/^(despu[eé]s de cristo|era com[uú]n)/i]},A3={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},C3={any:[/1/i,/2/i,/3/i,/4/i]},O3={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},T3={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},I3={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[áa])/i,abbreviated:/^(dom|lun|mar|mi[ée]|jue|vie|s[áa]b)/i,wide:/^(domingo|lunes|martes|mi[ée]rcoles|jueves|viernes|s[áa]bado)/i},D3={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},M3={narrow:/^(a|p|mn|md|(de la|a las) (mañana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (mañana|tarde|noche))/i},$3={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/mañana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},z3={ordinalNumber:Fp({matchPattern:N3,parsePattern:P3,valueCallback:function(t){return parseInt(t,10)}}),era:Yt({matchPatterns:E3,defaultMatchWidth:"wide",parsePatterns:_3,defaultParseWidth:"any"}),quarter:Yt({matchPatterns:A3,defaultMatchWidth:"wide",parsePatterns:C3,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:Yt({matchPatterns:O3,defaultMatchWidth:"wide",parsePatterns:T3,defaultParseWidth:"any"}),day:Yt({matchPatterns:I3,defaultMatchWidth:"wide",parsePatterns:D3,defaultParseWidth:"any"}),dayPeriod:Yt({matchPatterns:M3,defaultMatchWidth:"any",parsePatterns:$3,defaultParseWidth:"any"})},xx={code:"es",formatDistance:c3,formatLong:m3,formatRelative:g3,localize:S3,match:z3,options:{weekStartsOn:1,firstWeekContainsDate:1}};const R3=e=>{switch(e){case"happy":case"excited":return"😊";case"grateful":return"🥰";case"worried":return"😟";case"sad":return"😢";default:return"🌱"}},L3=({message:e})=>{const t=e.sender==="user",r=n=>{xo.success("¡Gracias por tu feedback!",n?"Nos alegra que la respuesta te haya sido útil.":"Trabajaremos para mejorar las respuestas.")};return l.jsxs(P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:ce("flex items-end gap-2",t?"justify-end":"justify-start"),children:[!t&&l.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-muted text-xl",children:R3(e.emotion)}),l.jsxs("div",{className:ce("max-w-xs rounded-2xl px-4 py-2 sm:max-w-sm md:max-w-md shadow-adaptive",t?"rounded-br-lg bg-primary-700 text-white drop-shadow-sm":"rounded-bl-lg bg-contrast-surface text-contrast-medium border border-contrast","rounded-[12px]"),children:[l.jsx("p",{className:"text-sm",children:e.content}),e.context?.insights&&e.context.insights.length>0&&l.jsxs("div",{className:"mt-3 space-y-2",children:[l.jsx("div",{className:"font-semibold text-xs text-green-700 dark:text-green-300",children:"Recomendaciones y observaciones:"}),l.jsx("ul",{className:"space-y-1",children:e.context.insights.map((n,a)=>l.jsxs("li",{className:"text-xs bg-green-50 dark:bg-green-900/20 rounded-lg p-2 border border-green-200 dark:border-green-800",children:[l.jsxs("div",{className:"font-medium",children:[n.type==="warning"&&"⚠️ ",n.type==="tip"&&"💡 ",n.type==="recommendation"&&"🌱 ",n.type==="observation"&&"🔎 ",n.title]}),l.jsx("div",{children:n.description}),n.affectedPlants&&n.affectedPlants.length>0&&l.jsxs("div",{className:"mt-1 text-[11px] text-green-800 dark:text-green-200",children:["Plantas: ",n.affectedPlants.join(", ")]})]},a))})]}),e.context?.suggestedActions&&e.context.suggestedActions.length>0&&l.jsxs("div",{className:"mt-3 space-y-2",children:[l.jsx("div",{className:"font-semibold text-xs text-blue-700 dark:text-blue-300",children:"Acciones sugeridas:"}),l.jsx("ul",{className:"space-y-1",children:e.context.suggestedActions.map((n,a)=>l.jsxs("li",{className:"text-xs bg-blue-50 dark:bg-blue-900/20 rounded-lg p-2 border border-blue-200 dark:border-blue-800",children:[l.jsx("div",{className:"font-medium",children:n.action}),n.priority&&l.jsxs("div",{className:"text-[11px] text-blue-800 dark:text-blue-200",children:["Prioridad: ",n.priority]}),n.plantIds&&n.plantIds.length>0&&l.jsxs("div",{className:"text-[11px] text-blue-800 dark:text-blue-200",children:["Plantas: ",n.plantIds.join(", ")]})]},a))})]}),l.jsx("p",{className:ce("mt-1 text-xs",t?"text-white/80":"text-contrast-soft","text-[#888] text-[12px]"),children:Up(new Date(e.timestamp),{addSuffix:!0,locale:xx})}),!t&&l.jsxs("div",{className:"flex gap-2 mt-2",children:[l.jsx("button",{"aria-label":"Respuesta útil",className:"text-green-600 hover:text-green-800 text-lg focus:outline-none",onClick:()=>r(!0),children:"👍"}),l.jsx("button",{"aria-label":"Respuesta no útil",className:"text-red-500 hover:text-red-700 text-lg focus:outline-none",onClick:()=>r(!1),children:"👎"})]})]})]})},F3=({messages:e})=>l.jsx("div",{className:"space-y-4",children:e.map(t=>l.jsx(L3,{message:t},t.id))}),B3=["¿Cómo te sientes hoy?","¿Necesitas agua?","Cuéntame un dato curioso sobre ti"],U3=({onSendMessage:e,isTyping:t})=>{const[r,n]=y.useState(""),a=y.useRef(null),i=()=>{const s=a.current?.value.trim();s&&(e(s),a.current&&(a.current.value=""))},o=s=>{s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),i())};return l.jsx("footer",{className:"sticky bottom-0 z-10 bg-background/80 backdrop-blur-sm border-t border-border",children:l.jsxs("div",{className:"p-4 pb-safe-bottom space-y-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("div",{className:"relative flex-1",children:[l.jsx(Po,{type:"text",ref:a,onKeyDown:o,placeholder:"Escribe un mensaje...",className:"pr-12",disabled:t}),l.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 text-muted-foreground",children:l.jsx(Bh,{size:16})})]}),l.jsx(G,{"aria-label":"Enviar mensaje",onClick:i,disabled:!r.trim()||t,size:"icon",children:l.jsx(Uh,{size:20})})]}),l.jsx("div",{className:"flex flex-wrap items-center gap-2 mb-3",children:B3.map(s=>l.jsx(G,{onClick:()=>n(s),disabled:t,variant:"secondary",size:"sm",children:s},s))})]})})},bx=()=>{const e={initial:{y:0},animate:{y:[0,-4,0],transition:{duration:1,repeat:1/0,ease:"easeInOut"}}};return l.jsxs(P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0},className:"flex items-end gap-2",children:[l.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-muted text-xl",children:"🌱"}),l.jsxs("div",{className:"flex items-center gap-1 rounded-2xl rounded-bl-lg bg-muted px-4 py-3",children:[l.jsx(P.div,{variants:e,animate:"animate",style:{transitionDelay:"0s"},className:"h-2 w-2 rounded-full bg-muted-foreground/50"}),l.jsx(P.div,{variants:e,animate:"animate",style:{transitionDelay:"0.2s"},className:"h-2 w-2 rounded-full bg-muted-foreground/50"}),l.jsx(P.div,{variants:e,animate:"animate",style:{transitionDelay:"0.4s"},className:"h-2 w-2 rounded-full bg-muted-foreground/50"})]})]})},W3=({plantName:e})=>l.jsxs(P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5,ease:"easeOut"},className:"flex flex-1 flex-col items-center justify-center text-center p-8",children:[l.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-primary/10 mb-4",children:l.jsx(Ve,{className:"h-8 w-8 text-primary"})}),l.jsx("h3",{className:"text-xl font-bold text-foreground",children:"Inicia una conversación"}),l.jsxs("p",{className:"text-muted-foreground max-w-xs",children:[e," está esperando para charlar. ¡Pregúntale sobre sus cuidados o simplemente saluda!"]})]}),H3=()=>{const{plantId:e}=Xl(),t=it(),{loading:r,error:n}=jc(e),{plant:a,isTyping:i,handleSendMessage:o}=o3(),s=y.useRef(null);return y.useEffect(()=>{s.current?.scrollIntoView({behavior:"smooth"})},[a?.chatHistory,i]),r?l.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-background text-foreground",children:[l.jsx(on,{className:"w-12 h-12 animate-spin text-green-500"}),l.jsx("p",{className:"mt-4 text-lg",children:"Cargando chat..."})]}):n?l.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-background text-red-500",children:[l.jsxs("p",{className:"mb-4",children:["Error: ",n]}),l.jsx("button",{onClick:()=>t(-1),className:"btn btn-primary",children:"Volver"})]}):a?l.jsxs("div",{className:"flex flex-col h-screen bg-background text-foreground",children:[l.jsx(s3,{plant:a}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",style:{paddingBottom:"calc(88px + env(safe-area-inset-bottom))"},children:[l.jsx(se,{children:a.chatHistory.length===0?l.jsx(W3,{plantName:a.nickname||a.name}):l.jsx(F3,{messages:a.chatHistory,plantNickname:a.nickname||a.name})}),i&&l.jsx(bx,{}),l.jsx("div",{ref:s})]}),l.jsx(U3,{onSendMessage:o,isTyping:i})]}):l.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-background text-foreground",children:[l.jsx("p",{className:"mb-4",children:"Planta no encontrada."}),l.jsx("button",{onClick:()=>t(-1),className:"btn btn-primary",children:"Volver"})]})};class q3{constructor(t,r){Bt(this,"supabase");Bt(this,"cache");this.supabase=t,this.cache=r}async sendMessage(t,r,n){try{const{data:{session:a},error:i}=await this.supabase.auth.getSession();if(i||!a?.access_token)throw console.error("User session not available:",i),new Error("Usuario no autenticado. Por favor inicia sesión nuevamente.");const{data:o,error:s}=await this.supabase.functions.invoke("garden-ai-chat",{body:{message:t,sessionId:r,userId:n},headers:{Authorization:`Bearer ${a.access_token}`}});if(s)throw new Error(`Garden AI service error: ${s.message}`);if(!o)throw new Error("No data received from garden AI service");return o}catch(a){throw console.error("Error in garden chat service:",a),a}}async sendMessageToGardenAI(t,r,n){try{const a=await this.buildGardenContext(r),i=n.map(p=>({role:p.sender==="user"?"user":"assistant",content:p.content})),o="amigable, motivador, experto, cálido, y con un toque de humor ligero",{data:{session:s},error:c}=await this.supabase.auth.getSession();if(c||!s?.access_token)throw console.error("User session not available:",c),new Error("Usuario no autenticado. Por favor inicia sesión nuevamente.");const{data:u,error:d}=await this.supabase.functions.invoke("garden-ai-chat",{body:{userMessage:t,gardenContext:a,conversationHistory:i,tonePersona:o},headers:{Authorization:`Bearer ${s.access_token}`}});if(d)throw new Error(`Garden AI service error: ${d.message}`);if(!u)throw new Error("No data received from garden AI service");const f=typeof u=="string"?JSON.parse(u):u,m=(f.content||"").toLowerCase();return(!f.content||m.includes("no sé")||m.includes("no tengo información")||m.includes("no puedo ayudarte")||m.length<30)&&xo.warning("Respuesta genérica","La respuesta de la IA fue muy genérica o poco útil. Intenta preguntar de otra forma o proporciona más detalles."),{content:f.content||"Lo siento, no pude procesar tu mensaje.",insights:f.insights||[],suggestedActions:f.suggestedActions||[]}}catch(a){throw a}}async verifyFunctionAvailability(){try{const t={userMessage:"ping",gardenContext:{totalPlants:0,plantsData:[],averageHealthScore:0,commonIssues:[],careScheduleSummary:{needsWatering:[],needsFertilizing:[],healthConcerns:[]},environmentalFactors:{locations:["test"]}},conversationHistory:[]},{data:{session:r},error:n}=await this.supabase.auth.getSession();if(n||!r?.access_token)throw console.error("User session not available:",n),new Error("Usuario no autenticado. Por favor inicia sesión nuevamente.");const{data:a,error:i}=await this.supabase.functions.invoke("garden-ai-chat",{body:t,headers:{Authorization:`Bearer ${r.access_token}`}});return i?i.message.includes("404")||i.message.includes("not found")?{available:!1,error:"La función de chat de jardín no está disponible en este momento"}:{available:!1,error:i.message}:a&&typeof a.content=="string"?{available:!0}:{available:!1,error:"Function returned unexpected response format"}}catch(t){return{available:!1,error:t instanceof Error?t.message:"Error desconocido"}}}async getGardenHealthSummary(t){try{const r=this.cache.getGardenSummary(t);if(r)return r;const n=await this.buildGardenContext(t),a=n.plantsData.filter(s=>s.healthScore>=80).length,i=n.careScheduleSummary.needsWatering.length+n.careScheduleSummary.healthConcerns.length,o={totalPlants:n.totalPlants,averageHealth:n.averageHealthScore,urgentActions:i,healthyPlants:a};return this.cache.setGardenSummary(t,o),o}catch(r){throw console.error("Error getting garden health summary:",r),r}}async getSuggestedQuestions(t){try{const r=await this.buildGardenContext(t),n=[];return r.totalPlants===0?(n.push("¿Cómo agrego mi primera planta?"),n.push("¿Qué tipo de planta me recomiendas para empezar?"),n):(n.push("¿Cuántas plantas tengo y cómo están?"),n.push("¿Cuál es la salud promedio de mi jardín?"),r.careScheduleSummary.healthConcerns.length>0&&(n.push("¿Qué plantas necesitan atención especial?"),n.push("¿Qué problemas de salud hay en mi jardín?")),r.plantsData.some(a=>a.healthScore>=80)&&n.push("¿Cuáles de mis plantas están más sanas?"),r.environmentalFactors.locations.length>1&&n.push("¿Cómo afecta la ubicación a mis plantas?"),r.totalPlants>5&&n.push("¿Cómo organizar mejor mi espacio de plantas?"),r.plantsData.some(a=>"lastFertilized"in a&&!!a.lastFertilized)&&n.push("¿Cuándo debo fertilizar mis plantas?"),new Set(r.plantsData.map(a=>a.species)).size>1&&n.push("¿Qué especie de planta es la más resistente en mi jardín?"),n.slice(0,6))}catch(r){return console.error("Error getting suggested questions:",r),["¿Cuántas plantas tengo y cómo están?","¿Cuál es la salud promedio de mi jardín?"]}}async refreshGardenData(t){try{this.invalidateCache(t),await this.buildGardenContext(t),console.log("[GardenChatService] Garden data refreshed for user:",t)}catch(r){throw console.error("Error refreshing garden data:",r),r}}async buildGardenContext(t){try{const r=this.cache.getGardenContext(t);if(r)return r;const{data:n,error:a}=await this.supabase.from("plants").select(`
          id,
          name,
          nickname,
          species,
          location,
          plant_environment,
          light_requirements,
          health_score,
          last_watered,
          last_fertilized,
          care_profile,
          date_added
        `).eq("user_id",t).order("created_at",{ascending:!1});if(a)throw a;const i=n.map(p=>({id:p.id,name:p.name,nickname:p.nickname||void 0,species:p.species,location:p.location,plantEnvironment:p.plant_environment,lightRequirements:p.light_requirements,healthScore:p.health_score||85,lastWatered:p.last_watered?new Date(p.last_watered):void 0,wateringFrequency:p.care_profile?.wateringFrequency})),o=i.length,s=o>0?Math.round(i.reduce((p,v)=>p+v.healthScore,0)/o):0,c=new Date,u=[],d=[],f=[];i.forEach(p=>{if(p.lastWatered&&p.wateringFrequency){const v=new Date(p.lastWatered),g=new Date(v);g.setDate(v.getDate()+p.wateringFrequency),c>g&&u.push(p.id)}p.healthScore<70&&f.push(p.id)});const m=[...new Set(i.map(p=>p.location))],h={totalPlants:o,plantsData:i,averageHealthScore:s,commonIssues:[],careScheduleSummary:{needsWatering:u,needsFertilizing:d,healthConcerns:f},environmentalFactors:{locations:m,lightConditions:[],humidityNeeds:[]}};return this.cache.setGardenContext(t,h),h}catch(r){throw console.error("Error building garden context:",r),r}}invalidateCache(t){this.cache.invalidateCache(t),console.log("Cache invalidated for user:",t)}}const Jr=new q3(pe,Dn),Z3=()=>{const{user:e}=wr(),[t,r]=y.useState([]),[n,a]=y.useState(!1),[i,o]=y.useState(!1),[s,c]=y.useState(null),[u,d]=y.useState(null),[f,m]=y.useState([]),[h,p]=y.useState("");y.useEffect(()=>{e?.id&&v()},[e?.id]);const v=async()=>{if(e?.id){a(!0);try{const[S,N]=await Promise.all([Jr.getGardenHealthSummary(e.id),Jr.getSuggestedQuestions(e.id)]);if(d(S),m(N),t.length===0&&S.totalPlants>0){const C={id:`welcome-${Date.now()}`,sender:"ai",content:`¡Hola! Soy tu asistente de jardín 🌱 

Veo que tienes ${S.totalPlants} plantas en tu jardín con una salud promedio de ${S.averageHealth}%. ${S.urgentActions>0?`Hay ${S.urgentActions} acciones que podrían necesitar tu atención.`:"¡Todo parece estar en buen estado!"}

¿En qué puedo ayudarte hoy con tu jardín?`,timestamp:new Date,context:{queryType:"general"}};r([C])}}catch(S){console.error("Error loading initial garden data:",S),c("Error al cargar la información del jardín")}finally{a(!1)}}},g=y.useCallback(async S=>{if(!e?.id||!S.trim()||i)return;const N=await Jr.verifyFunctionAvailability();if(!N.available){c(`🚧 El chat de jardín no está disponible: ${N.error}`);return}const C={id:`user-${Date.now()}`,sender:"user",content:S.trim(),timestamp:new Date};p(S.trim()),r(T=>[...T,C]),o(!0),c(null);try{const T=await Jr.sendMessageToGardenAI(S.trim(),e.id,t),$={id:`ai-${Date.now()}`,sender:"ai",content:T.content,timestamp:new Date,context:{plantsAnalyzed:K3(T),queryType:G3(S),insights:T.insights||[],suggestedActions:T.suggestedActions||[]}};if(r(O=>[...O,$]),T.suggestedActions&&T.suggestedActions.length>0){const O=await Jr.getGardenHealthSummary(e.id);d(O)}}catch(T){console.error("Error sending message to garden AI:",T);let $="Error al enviar el mensaje. Por favor intenta de nuevo.";T instanceof Error&&(T.message.includes("función de chat de jardín no está disponible")?$="🚧 El chat de jardín está temporalmente no disponible. Estamos trabajando para solucionarlo.":T.message.includes("CORS")?$="🔧 Error de configuración. Por favor contacta al administrador.":T.message.includes("garden-ai-chat no existe")&&($="⚠️ Servicio no configurado. El chat de jardín necesita configuración adicional.")),c($),r(O=>O.slice(0,-1))}finally{o(!1)}},[e?.id,t,i]),x=y.useCallback(async()=>{h&&await g(h)},[h,g]),w=y.useCallback(()=>{r([]),c(null),e?.id&&v()},[e?.id]),b=y.useCallback(async()=>{if(e?.id){a(!0);try{await Jr.refreshGardenData(e.id),await v(),console.log("[useGardenChat] Garden data refreshed successfully")}catch(S){console.error("Error refreshing garden data:",S),c("Error al actualizar los datos del jardín")}finally{a(!1)}}},[e?.id]),j=y.useMemo(()=>n,[n]),k=y.useMemo(()=>{},[e?.id,u]);return{messages:t,isLoading:j,isTyping:i,error:s,gardenSummary:u,suggestedQuestions:f,sendMessage:g,clearMessages:w,retryLastMessage:x,refreshGardenData:b,cacheStats:k}};function K3(e){const t=[];return e.insights&&e.insights.forEach(r=>{r.affectedPlants&&t.push(...r.affectedPlants)}),e.suggestedActions&&e.suggestedActions.forEach(r=>{r.plantIds&&t.push(...r.plantIds)}),[...new Set(t)]}function G3(e){const t=e.toLowerCase();return t.includes("salud")||t.includes("problema")||t.includes("enferm")?"health_analysis":t.includes("comparar")||t.includes("diferencia")||t.includes("mejor")?"care_comparison":t.includes("hongo")||t.includes("plaga")||t.includes("prevenir")?"disease_prevention":t.includes("crecimiento")||t.includes("progreso")||t.includes("tiempo")?"growth_tracking":"general"}const V3=({onClose:e})=>{const[t,r]=y.useState([{name:"garden-ai-chat",available:!1}]),[n,a]=y.useState(!1),i=async()=>{a(!0);const c=[],u=await Jr.verifyFunctionAvailability();c.push({name:"garden-ai-chat",available:u.available,error:u.error,lastChecked:new Date}),r(c),a(!1)};y.useEffect(()=>{i()},[]);const o=c=>c.available?l.jsx(dr,{className:"w-5 h-5 text-green-500"}):l.jsx(Tt,{className:"w-5 h-5 text-red-500"}),s=c=>c.available?"Disponible":"No disponible";return l.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:e,children:l.jsx(P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:c=>c.stopPropagation(),className:"w-full max-w-md",children:l.jsxs(Pt,{className:"p-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx(Wh,{className:"w-6 h-6 text-blue-500"}),l.jsx("h3",{className:"text-lg font-semibold",children:"Diagnóstico del Sistema"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Estado de Funciones Edge"}),l.jsx("div",{className:"space-y-3",children:t.map(c=>l.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[o(c),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-sm",children:c.name}),l.jsx("p",{className:"text-xs text-muted-foreground",children:s(c)})]})]}),c.error&&l.jsxs("div",{className:"text-xs text-red-500 max-w-32 text-right",children:[c.error.substring(0,50),"..."]})]},c.name))})]}),t.some(c=>!c.available)&&l.jsx(P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx(Tt,{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400 mt-0.5 flex-shrink-0"}),l.jsxs("div",{className:"text-sm",children:[l.jsx("p",{className:"font-medium text-yellow-800 dark:text-yellow-200",children:"Servicios no disponibles"}),l.jsx("p",{className:"text-yellow-700 dark:text-yellow-300 mt-1",children:"Algunos servicios del chat de jardín no están funcionando. Verifica que las funciones Edge estén desplegadas en Supabase."})]})]})}),l.jsxs("div",{className:"flex gap-3 pt-3",children:[l.jsxs(G,{onClick:i,disabled:n,variant:"outline",size:"sm",className:"flex-1 gap-2",children:[l.jsx(Lr,{className:`w-4 h-4 ${n?"animate-spin":""}`}),"Verificar Nuevamente"]}),l.jsx(G,{onClick:e,variant:"secondary",size:"sm",className:"flex-1",children:"Cerrar"})]})]})]})})})},Ks=({gardenSummary:e,onClearChat:t,onRefresh:r,isRefreshing:n=!1})=>{const a=it(),[i,o]=y.useState(!1),s=u=>u>=80?"text-green-500":u>=60?"text-green-400":"text-red-500",c=u=>u>=80?"Excelente":u>=60?"Buena":"Necesita atención";return l.jsxs("header",{className:"sticky top-0 z-10 bg-background/80 backdrop-blur-sm border-b border-muted",children:[l.jsxs("div",{className:"flex items-center gap-3 p-4 pt-safe-top",children:[l.jsx("button",{onClick:()=>a(ze.toDashboard()),className:"p-2 -ml-2 rounded-full hover:bg-muted transition-colors","aria-label":"Volver al dashboard",children:l.jsx(rc,{size:20})}),l.jsx("div",{className:"flex-1",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-full",children:l.jsx(nc,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"font-bold text-foreground tracking-[0.2px]",children:"Asistente de Jardín"}),e&&l.jsxs("div",{className:"flex items-center gap-2 text-xs text-neutral-600 dark:text-neutral-400",children:[l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx($h,{size:12}),e.totalPlants," plantas"]}),l.jsx("span",{className:`font-medium ${s(e.averageHealth)} text-xs px-2 py-0.5 rounded-full`,style:{fontSize:"11px",padding:"2px 8px"},children:c(e.averageHealth)}),e.urgentActions>0&&l.jsxs(P.span,{className:"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300 px-2 py-0.5 rounded-full text-xs font-medium",style:{fontSize:"11px",padding:"2px 8px"},initial:{scale:0},animate:{scale:1},transition:{delay:.2},children:[e.urgentActions," acciones"]})]})]})]})}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{onClick:()=>o(!0),className:"p-2 rounded-full hover:bg-muted transition-colors","aria-label":"Diagnóstico del sistema",children:l.jsx(Wh,{size:18})}),r&&l.jsx("button",{onClick:r,disabled:n,className:"p-2 rounded-full hover:bg-muted transition-colors disabled:opacity-50","aria-label":"Actualizar datos del jardín",children:l.jsx(P.div,{animate:n?{rotate:360}:{},transition:n?{duration:1,repeat:1/0,ease:"linear"}:{},children:l.jsx(Lr,{size:18})})}),l.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-muted transition-colors","aria-label":"Opciones del chat",children:l.jsx(zh,{size:20})})]})]}),l.jsx(se,{children:i&&l.jsx(V3,{onClose:()=>o(!1)})})]})},Y3=({message:e})=>{const t=e.sender==="user",r=()=>{if(!e.context?.queryType)return l.jsx(Sa,{size:16});switch(e.context.queryType){case"health_analysis":return l.jsx(qt,{size:16});case"care_comparison":return l.jsx(Gs,{size:16});case"disease_prevention":return l.jsx(ib,{size:16});case"growth_tracking":return l.jsx(Fh,{size:16});default:return l.jsx(Sa,{size:16})}},n=()=>{if(t)return"text-primary-foreground/70";if(!e.context?.queryType)return"text-green-500";switch(e.context.queryType){case"health_analysis":return"text-red-500";case"care_comparison":return"text-blue-500";case"disease_prevention":return"text-orange-500";case"growth_tracking":return"text-purple-500";default:return"text-green-500"}};return l.jsxs(P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:ce("flex items-end gap-2 max-w-[85%]",t?"justify-end ml-auto":"justify-start"),children:[!t&&l.jsx(P.div,{className:ce("flex h-8 w-8 items-center justify-center rounded-full","bg-gradient-to-br from-green-100 to-green-200 dark:from-green-900/30 dark:to-green-800/30"),initial:{scale:0},animate:{scale:1},transition:{delay:.1},children:l.jsx("div",{className:n(),children:r()})}),l.jsx("div",{className:"flex-1",children:l.jsxs("div",{className:ce("rounded-2xl px-4 py-3 break-words shadow-adaptive",t?"rounded-br-lg bg-primary-700 text-white drop-shadow-sm ml-8":"rounded-bl-lg bg-contrast-surface text-contrast-medium mr-8 border border-contrast","rounded-[12px]"),children:[l.jsx("div",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:e.content}),e.context?.insights&&e.context.insights.length>0&&l.jsxs("div",{className:"mt-3 space-y-2",children:[l.jsx("div",{className:"font-semibold text-xs text-green-700 dark:text-green-300",children:"Recomendaciones y observaciones:"}),l.jsx("ul",{className:"space-y-1",children:e.context.insights.map((a,i)=>l.jsxs("li",{className:"text-xs bg-green-50 dark:bg-green-900/20 rounded-lg p-2 border border-green-200 dark:border-green-800",children:[l.jsxs("div",{className:"font-medium",children:[a.type==="warning"&&"⚠️ ",a.type==="tip"&&"💡 ",a.type==="recommendation"&&"🌱 ",a.type==="observation"&&"🔎 ",a.title]}),l.jsx("div",{children:a.description}),a.affectedPlants&&a.affectedPlants.length>0&&l.jsxs("div",{className:"mt-1 text-[11px] text-green-800 dark:text-green-200",children:["Plantas: ",a.affectedPlants.join(", ")]})]},i))})]}),e.context?.suggestedActions&&e.context.suggestedActions.length>0&&l.jsxs("div",{className:"mt-3 space-y-2",children:[l.jsx("div",{className:"font-semibold text-xs text-blue-700 dark:text-blue-300",children:"Acciones sugeridas:"}),l.jsx("ul",{className:"space-y-1",children:e.context.suggestedActions.map((a,i)=>l.jsxs("li",{className:"text-xs bg-blue-50 dark:bg-blue-900/20 rounded-lg p-2 border border-blue-200 dark:border-blue-800",children:[l.jsx("div",{className:"font-medium",children:a.action}),a.priority&&l.jsxs("div",{className:"text-[11px] text-blue-800 dark:text-blue-200",children:["Prioridad: ",a.priority]}),a.plantIds&&a.plantIds.length>0&&l.jsxs("div",{className:"text-[11px] text-blue-800 dark:text-blue-200",children:["Plantas: ",a.plantIds.join(", ")]})]},i))})]}),!t&&e.context?.plantsAnalyzed&&e.context.plantsAnalyzed.length>0&&l.jsxs(P.div,{className:"mt-2 flex items-center gap-1 text-xs opacity-70",initial:{opacity:0},animate:{opacity:.7},transition:{delay:.5},children:[l.jsx(Gs,{size:12}),l.jsxs("span",{children:["Analizó ",e.context.plantsAnalyzed.length," planta(s)"]})]}),l.jsx("div",{className:ce("mt-2 text-xs",t?"text-primary-foreground/70":"text-muted-foreground/70","text-[#888] text-[12px]"),children:Up(new Date(e.timestamp),{addSuffix:!0,locale:xx})})]})}),t&&l.jsx(P.div,{className:"flex h-8 w-8 items-center justify-center rounded-full bg-primary/10",initial:{scale:0},animate:{scale:1},transition:{delay:.1},children:l.jsx(ab,{size:16,className:"text-primary"})})]})},X3=({onSendMessage:e,isTyping:t,suggestedQuestions:r,isLoading:n=!1})=>{const[a,i]=y.useState(""),[o,s]=y.useState(!0),c=y.useRef(null),u=async()=>{if(t)return;const h=c.current?.value.trim();h&&(s(!1),c.current&&(c.current.value=""),await e(h))},d=h=>{h.key==="Enter"&&!h.shiftKey&&(h.preventDefault(),u())},f=async h=>{i(""),s(!1),await e(h)},m=()=>{r.length>0&&!a&&s(!0)};return l.jsx("footer",{className:"sticky bottom-0 z-10 bg-background/80 backdrop-blur-sm border-t border-border",children:l.jsxs("div",{className:"p-4 pb-safe-bottom space-y-3",children:[l.jsx(se,{children:o&&r.length>0&&!n&&l.jsxs(P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},className:"space-y-2 mb-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[l.jsx(Ve,{size:12}),l.jsx("span",{children:"Preguntas sugeridas"})]}),l.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:r.slice(0,4).map((h,p)=>l.jsx(P.button,{onClick:()=>f(h),disabled:t,className:"px-3 py-1.5 text-xs bg-muted hover:bg-[#F0F0F0] active:bg-[#F0F0F0] rounded-full border border-border/50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-left",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:p*.1},whileHover:{scale:1.02},whileTap:{scale:.98},children:h},h))})]})}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("div",{className:"relative flex-1",children:[l.jsx(Po,{type:"text",ref:c,onKeyDown:d,onFocus:m,placeholder:"Pregúntame sobre tu jardín...",className:"pr-12",disabled:t||n}),l.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 text-muted-foreground",children:l.jsx(Bh,{size:16})})]}),l.jsx(G,{"aria-label":"Enviar mensaje",onClick:u,disabled:!a.trim()||t||n,size:"icon",className:"shrink-0",children:t?l.jsx(P.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:l.jsx(Ve,{size:20})}):l.jsx(Uh,{size:20})})]}),n&&l.jsxs(P.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center justify-center gap-2 text-xs text-muted-foreground",children:[l.jsx(P.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:l.jsx(Ve,{size:12})}),l.jsx("span",{children:"Analizando tu jardín..."})]})]})})},Q3={plants:l.jsx("svg",{viewBox:"0 0 200 150",className:"w-32 h-24 text-primary-300 dark:text-primary-600",children:l.jsxs(P.g,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},children:[l.jsx(P.path,{d:"M60 120 L140 120 L130 100 L70 100 Z",fill:"currentColor",initial:{scaleY:0},animate:{scaleY:1},transition:{delay:.2,duration:.5}}),l.jsx(P.g,{initial:{scale:0,rotate:-10},animate:{scale:1,rotate:0},transition:{delay:.5,duration:.8,type:"spring"},children:l.jsx("path",{d:"M80 100 Q85 80 90 85 Q95 75 85 70 Q75 75 80 100",fill:"currentColor",opacity:"0.8"})}),l.jsx(P.g,{initial:{scale:0,rotate:10},animate:{scale:1,rotate:0},transition:{delay:.7,duration:.8,type:"spring"},children:l.jsx("path",{d:"M100 100 Q105 85 110 90 Q115 80 105 75 Q95 80 100 100",fill:"currentColor",opacity:"0.7"})}),l.jsx(P.g,{initial:{scale:0,rotate:-5},animate:{scale:1,rotate:0},transition:{delay:.9,duration:.8,type:"spring"},children:l.jsx("path",{d:"M120 100 Q125 90 130 95 Q135 85 125 80 Q115 85 120 100",fill:"currentColor",opacity:"0.6"})})]})}),search:l.jsx("svg",{viewBox:"0 0 200 150",className:"w-32 h-24 text-primary-300 dark:text-primary-600",children:l.jsxs(P.g,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8},children:[l.jsx(P.circle,{cx:"80",cy:"70",r:"25",stroke:"currentColor",strokeWidth:"3",fill:"none",initial:{scale:0},animate:{scale:1},transition:{delay:.3,duration:.5,type:"spring"}}),l.jsx(P.line,{x1:"100",y1:"88",x2:"120",y2:"108",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",initial:{scaleX:0},animate:{scaleX:1},transition:{delay:.6,duration:.4}}),l.jsx(P.circle,{cx:"140",cy:"50",r:"2",fill:"currentColor",initial:{scale:0},animate:{scale:1},transition:{delay:1,duration:.3}}),l.jsx(P.circle,{cx:"150",cy:"40",r:"3",fill:"currentColor",initial:{scale:0},animate:{scale:1},transition:{delay:1.2,duration:.3}})]})}),chat:l.jsx("svg",{viewBox:"0 0 200 150",className:"w-32 h-24 text-primary-300 dark:text-primary-600",children:l.jsxs(P.g,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8},children:[l.jsx(P.rect,{x:"50",y:"40",width:"100",height:"60",rx:"20",fill:"currentColor",opacity:"0.8",initial:{scale:0,y:20},animate:{scale:1,y:0},transition:{delay:.2,duration:.6,type:"spring"}}),l.jsx(P.path,{d:"M80 100 L70 115 L95 105 Z",fill:"currentColor",opacity:"0.8",initial:{scale:0},animate:{scale:1},transition:{delay:.5,duration:.4}}),l.jsxs(P.g,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8,duration:.5},children:[l.jsx("circle",{cx:"75",cy:"70",r:"3",fill:"white"}),l.jsx("circle",{cx:"100",cy:"70",r:"3",fill:"white"}),l.jsx("circle",{cx:"125",cy:"70",r:"3",fill:"white"})]})]})}),camera:l.jsx("svg",{viewBox:"0 0 200 150",className:"w-32 h-24 text-primary-300 dark:text-primary-600",children:l.jsxs(P.g,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8},children:[l.jsx(P.rect,{x:"60",y:"60",width:"80",height:"50",rx:"8",fill:"currentColor",opacity:"0.8",initial:{scale:0},animate:{scale:1},transition:{delay:.2,duration:.5,type:"spring"}}),l.jsx(P.rect,{x:"85",y:"45",width:"30",height:"15",rx:"4",fill:"currentColor",opacity:"0.6",initial:{scaleY:0},animate:{scaleY:1},transition:{delay:.4,duration:.3}}),l.jsx(P.circle,{cx:"100",cy:"85",r:"15",stroke:"white",strokeWidth:"2",fill:"none",initial:{scale:0},animate:{scale:1},transition:{delay:.6,duration:.4,type:"spring"}}),l.jsx(P.circle,{cx:"120",cy:"70",r:"3",fill:"currentColor",opacity:"0.9",initial:{scale:0},animate:{scale:[0,1.2,1]},transition:{delay:.8,duration:.5}})]})}),settings:l.jsx("svg",{viewBox:"0 0 200 150",className:"w-32 h-24 text-primary-300 dark:text-primary-600",children:l.jsxs(P.g,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8},children:[l.jsxs(P.g,{animate:{rotate:360},transition:{duration:20,repeat:1/0,ease:"linear"},style:{originX:"100px",originY:"75px"},children:[l.jsx("path",{d:"M100 50 L110 60 L120 50 L120 60 L130 70 L120 80 L120 90 L110 90 L100 100 L90 90 L80 90 L80 80 L70 70 L80 60 L80 50 Z",fill:"currentColor",opacity:"0.7"}),l.jsx("circle",{cx:"100",cy:"75",r:"8",fill:"white"})]}),l.jsxs(P.g,{animate:{rotate:-360},transition:{duration:15,repeat:1/0,ease:"linear"},style:{originX:"140px",originY:"95px"},children:[l.jsx("path",{d:"M140 85 L145 90 L150 85 L150 90 L155 95 L150 100 L150 105 L145 105 L140 110 L135 105 L130 105 L130 100 L125 95 L130 90 L130 85 Z",fill:"currentColor",opacity:"0.5"}),l.jsx("circle",{cx:"140",cy:"95",r:"5",fill:"white"})]})]})})},J3=({icon:e,title:t,description:r,action:n,illustration:a="plants",className:i})=>l.jsxs(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},className:ce("flex flex-col items-center justify-center text-center py-12 px-6 max-w-md mx-auto",i),children:[l.jsx(P.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2,duration:.5,ease:"easeOut"},className:"mb-6",children:e||Q3[a]}),l.jsx(P.h3,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4,duration:.5},className:"text-xl font-semibold text-neutral-900 dark:text-neutral-100 mb-3",children:t}),l.jsx(P.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5,duration:.5},className:"text-neutral-600 dark:text-neutral-400 mb-6 leading-relaxed",children:r}),n&&l.jsx(P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},children:l.jsx(G,{onClick:n.onClick,variant:"primary",size:"lg",className:"animate-glow",children:n.label})})]}),eR=()=>{const e=it(),t=mr(h=>h.plants),{messages:r,isLoading:n,isTyping:a,error:i,gardenSummary:o,suggestedQuestions:s,sendMessage:c,clearMessages:u,retryLastMessage:d,refreshGardenData:f}=Z3(),m=y.useRef(null);return y.useEffect(()=>{m.current?.scrollIntoView({behavior:"smooth"})},[r,a]),i&&!o?l.jsxs("div",{className:"flex flex-col h-screen bg-background text-foreground",children:[l.jsx(Ks,{gardenSummary:o}),l.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:l.jsxs(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center max-w-md",children:[l.jsx(Tt,{className:"w-16 h-16 text-destructive mx-auto mb-4"}),l.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Error de conexión"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:i}),l.jsxs(G,{onClick:f,variant:"primary",children:[l.jsx(Lr,{className:"w-4 h-4 mr-2"}),"Reintentar"]})]})})]}):o?.totalPlants===0?l.jsxs("div",{className:"flex flex-col h-screen bg-background text-foreground",children:[l.jsx(Ks,{gardenSummary:o}),l.jsx("div",{className:"flex-1 flex items-center justify-center",children:l.jsx(J3,{illustration:"plants",title:"Tu jardín está vacío",description:"Agrega algunas plantas a tu jardín para poder chatear conmigo sobre su cuidado y salud.",action:{label:"Agregar mi primera planta",onClick:()=>e(ze.toCamera())}})})]}):l.jsxs("div",{className:"flex flex-col h-screen bg-background text-foreground",children:[l.jsx(Ks,{gardenSummary:o,onClearChat:u,onRefresh:f,isRefreshing:n&&r.length>0}),r.length===0&&t.length>0&&l.jsxs("div",{className:"p-4 border-b border-neutral-200 dark:border-neutral-700",children:[l.jsx("h3",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-3",children:"Chats individuales con tus plantas:"}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.slice(0,4).map(h=>l.jsx(Pt,{variant:"glass",size:"sm",interactive:!0,className:"cursor-pointer hover:border-primary-300 dark:hover:border-primary-600",onClick:()=>e(ze.toPlantChat(h.id)),children:l.jsx(gr,{className:"p-3",children:l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-8 h-8 rounded-lg bg-primary-100 dark:bg-primary-900 flex items-center justify-center",children:l.jsx(nc,{className:"w-4 h-4 text-primary-600 dark:text-primary-400"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"text-sm font-medium truncate",children:h.nickname||h.name}),l.jsx("p",{className:"text-xs text-neutral-500 truncate",children:h.species})]}),l.jsx(Fa,{className:"w-4 h-4 text-neutral-400"})]})})},h.id)),t.length>4&&l.jsx(Pt,{variant:"outline",size:"sm",interactive:!0,className:"cursor-pointer",onClick:()=>e(ze.toDashboard()),children:l.jsx(gr,{className:"p-3 flex items-center justify-center",children:l.jsxs("span",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:["+",t.length-4," más"]})})})]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto",style:{paddingBottom:"calc(88px + env(safe-area-inset-bottom))"},children:[l.jsxs("div",{className:"p-4 space-y-4 max-w-4xl mx-auto",children:[l.jsx(se,{children:r.map(h=>l.jsx(Y3,{message:h},h.id))}),a&&l.jsx(P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:l.jsx(bx,{})}),i&&r.length>0&&l.jsx(P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex items-center justify-center",children:l.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3 max-w-sm",children:[l.jsxs("div",{className:"flex items-center gap-2 text-red-700 dark:text-red-300 text-sm",children:[l.jsx(Tt,{size:16}),l.jsx("span",{children:i})]}),l.jsxs(G,{onClick:d,size:"sm",variant:"outline",className:"mt-2 w-full",children:[l.jsx(Lr,{size:14,className:"mr-1"}),"Reintentar"]})]})}),l.jsx("div",{ref:m})]}),!1]}),l.jsx(X3,{onSendMessage:c,isTyping:a,suggestedQuestions:s,isLoading:n})]})},tR=y.lazy(()=>Yl(()=>import("./Settings-B7yPfWTz.js"),__vite__mapDeps([0,1,2,3,4,5]))),rR=y.lazy(()=>Yl(()=>import("./Auth-BULfOu3q.js"),__vite__mapDeps([6,1,2,4,5,3]))),nR=new Sh({defaultOptions:{queries:{staleTime:Ir.QUERY.STALE_TIME.MEDIUM,gcTime:Ir.QUERY.GC_TIME.MEDIUM,refetchOnWindowFocus:!1,refetchOnReconnect:!1,retry:Ir.QUERY.RETRY.COUNT,retryDelay:e=>Math.min(Ir.QUERY.RETRY.DELAY*2**e,3e4)},mutations:{retry:Ir.QUERY.RETRY.COUNT,retryDelay:Ir.QUERY.RETRY.DELAY}}}),jh=({message:e,showDevelopmentInfo:t=!1})=>l.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-green-50 via-emerald-50 to-teal-100 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 text-foreground px-4",children:l.jsxs("div",{className:"text-center max-w-md",children:[l.jsx(La,{className:"w-16 h-16 text-green-500 animate-bounce mb-6 mx-auto"}),l.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Plantitas"}),l.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400 mb-4",children:e}),t&&l.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mt-6",children:[l.jsxs("div",{className:"flex items-center justify-center mb-2",children:[l.jsx(_h,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mr-2"}),l.jsx("span",{className:"text-sm font-medium text-blue-800 dark:text-blue-300",children:"Modo Desarrollo"})]}),l.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:"Configurar Supabase en .env para funcionalidad completa"})]}),l.jsx("div",{className:"flex justify-center mt-8",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-500"})})]})}),aR=()=>window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?"/":window.location.pathname.startsWith("/plantitas-app")?"/plantitas-app/":"/",iR=()=>{const{session:e,isInitialized:t,isDevelopmentMode:r,initialize:n}=wr(),[a,i]=y.useState(!1),[o,s]=y.useState(!1);if(sS(),y.useEffect(()=>{console.log("[APP] useEffect running...");try{const u=lS();return console.log("[APP] Calling initialize..."),n().catch(d=>{console.error("[APP] Initialize failed:",d),s(!0),i(!0)}),console.log("[APP] Initialize called"),()=>{console.log("[APP] Cleanup running..."),u()}}catch(u){hc("APP_INITIALIZATION",u),s(!0),i(!0)}},[n]),y.useEffect(()=>{const u=setTimeout(()=>{t||(console.warn("[APP] Emergency timeout - forcing app render"),i(!0))},2e3);return()=>clearTimeout(u)},[t]),!t&&!a)return l.jsx(jh,{message:o?"Iniciando en modo sin conexión...":"Inicializando...",showDevelopmentInfo:r||o});const c=()=>l.jsx(id,{children:l.jsxs(Kt,{path:"/",element:l.jsx(pN,{}),children:[l.jsx(Kt,{index:!0,element:l.jsx(MN,{})}),l.jsx(Kt,{path:"camera",element:l.jsx(i3,{})}),l.jsx(Kt,{path:"settings",element:l.jsx(tR,{})}),l.jsx(Kt,{path:"garden-chat",element:l.jsx(eR,{})}),l.jsx(Kt,{path:"plant/:plantId",element:l.jsx(e3,{})}),l.jsx(Kt,{path:"plant/:plantId/chat",element:l.jsx(H3,{})}),l.jsx(Kt,{path:"*",element:l.jsx(xs,{to:Me.dashboard,replace:!0})})]})});return l.jsx(Nh,{client:nR,children:l.jsx(Jk,{children:l.jsx(iS,{children:l.jsx(gN,{children:l.jsxs(Lx,{basename:aR(),future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:[l.jsx(Yk,{position:"top-center",richColors:!0}),!1,l.jsx(y.Suspense,{fallback:l.jsx(jh,{message:"Cargando...",showDevelopmentInfo:r}),children:l.jsxs(id,{children:[l.jsx(Kt,{path:Me.auth,element:e?l.jsx(xs,{to:Me.dashboard,replace:!0}):l.jsx(rR,{})}),l.jsx(Kt,{path:"/*",element:e?l.jsx(c,{}):l.jsx(xs,{to:Me.auth,replace:!0})})]})})]})})})})})};console.log("[MOBILE] 🚨 Main.tsx loading started");console.log("[MOBILE] Location:",window.location.href);console.log("[MOBILE] Pathname:",window.location.pathname);console.log("[MOBILE] User Agent:",navigator.userAgent);window.addEventListener("error",e=>{console.error("[GLOBAL] Uncaught error:",e.error),console.error("[GLOBAL] Error details:",{message:e.message,filename:e.filename,lineno:e.lineno,colno:e.colno,stack:e.error?.stack})});window.addEventListener("unhandledrejection",e=>{console.error("[GLOBAL] Unhandled promise rejection:",e.reason),console.error("[GLOBAL] Promise:",e.promise)});try{cS(),console.log("[MOBILE] Debug system initialized")}catch(e){console.error("[MOBILE] Debug system failed:",e)}const wx=new Sh;function oR(){const{user:e}=wr();return I.useEffect(()=>{e?.id&&wx.prefetchQuery({queryKey:["plants",e.id],queryFn:()=>On.getUserPlantSummaries(e.id),staleTime:1e3*60*5})},[e?.id]),null}console.log("[MOBILE] Looking for root container...");const jx=document.getElementById("root");if(!jx)throw hc("ROOT_CONTAINER","Root container not found"),new Error("Root container not found");console.log("[MOBILE] Root container found, creating React root...");try{const e=Vs.createRoot(jx);console.log("[MOBILE] React root created, rendering App..."),e.render(l.jsx(I.StrictMode,{children:l.jsx(mN,{children:l.jsxs(Nh,{client:wx,children:[l.jsx(oR,{}),l.jsx(iR,{})]})})})),console.log("[MOBILE] App render called successfully")}catch(e){throw hc("REACT_RENDER",e),e}export{G as B,wr as a,vN as b,ce as c,hR as d,pR as u};
