const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/Settings-CxTUh2MP.js","assets/js/query-BtyC95ZO.js","assets/js/vendor-ohv-86MT.js","assets/js/router-Lz5I7iQY.js","assets/js/ui-BKcRNX0w.js","assets/js/supabase-ChG5PfJU.js","assets/js/Auth-BKhpep5C.js"])))=>i.map(i=>d[i]);
import{j as c,u as yo,a as Ir,b as ch,Q as uh,c as dh}from"./query-BtyC95ZO.js";import{a as fh,b as I,d as yx,r as y,e as Fr}from"./vendor-ohv-86MT.js";import{c as xx,_ as Hl}from"./supabase-ChG5PfJU.js";import{u as kt,a as mh,L as bx,O as wx,b as ql,B as jx,R as Ku,c as Zt,N as vs}from"./router-Lz5I7iQY.js";import{A as pe,m as _,X as xo,I as hh,T as zr,C as Wt,a as Dr,L as Tn,P as Zl,b as cr,c as Kl,H as Ti,B as ja,S as Px,W as Sx,d as Nx,R as cn,e as at,f as Mr,g as ph,D as bo,E as _x,h as Hs,i as wo,j as gh,k as Ii,l as kx,n as Ex,o as vh,u as Ax,p as Gu,q as Gl,r as yh,s as Cx,M as xh,t as Vu,v as Ox,w as bh,x as Vl,y as wh,z as Tx,F as Ix,U as Yu,G as Dx,J as Mx,K as $x,N as Xu,O as jh,Q as zx,V as Rx,Y as Ph,Z as Sh,_ as Nh,$ as Lx,a0 as Fx}from"./ui-BKcRNX0w.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var qs={},Qu=fh;qs.createRoot=Qu.createRoot,qs.hydrateRoot=Qu.hydrateRoot;const Ju=e=>{let t;const r=new Set,n=(u,d)=>{const f=typeof u=="function"?u(t):u;if(!Object.is(f,t)){const m=t;t=d??(typeof f!="object"||f===null)?f:Object.assign({},t,f),r.forEach(h=>h(t,m))}},a=()=>t,s={setState:n,getState:a,getInitialState:()=>l,subscribe:u=>(r.add(u),()=>r.delete(u))},l=t=e(n,a,s);return s},Bx=e=>e?Ju(e):Ju,Ux=e=>e;function Wx(e,t=Ux){const r=I.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return I.useDebugValue(r),r}const ed=e=>{const t=Bx(e),r=n=>Wx(t,n);return Object.assign(r,t),r},Yl=e=>e?ed(e):ed,_h=void 0,Hx=void 0;throw new Error("Missing Supabase environment variables");const he=xx(_h,Hx,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"},global:{headers:{"X-Client-Info":"plantitas-app"}},realtime:{timeout:1e4}}),qx=Object.freeze(Object.defineProperty({__proto__:null,supabase:he,supabaseUrl:_h},Symbol.toStringTag,{value:"Module"}));class Zx{cache=new Map;CACHE_DURATIONS={GARDEN_CONTEXT:5*60*1e3,GARDEN_SUMMARY:3*60*1e3,SUGGESTED_QUESTIONS:10*60*1e3,PLANT_DATA:2*60*1e3};getCacheKey(t,r){return`${t}:${r}`}isValidCache(t){return t?Date.now()<t.expiresAt:!1}getCachedData(t){const r=this.cache.get(t);return this.isValidCache(r)?r.data:(r&&this.cache.delete(t),null)}setCachedData(t,r,n){const a={data:r,timestamp:Date.now(),expiresAt:Date.now()+n};this.cache.set(t,a),console.log(`[GardenCache] Cache SET for key: ${t}, expires in ${n/1e3}s`)}getGardenContext(t){const r=this.getCacheKey(t,"garden_context");return this.getCachedData(r)}setGardenContext(t,r){const n=this.getCacheKey(t,"garden_context");this.setCachedData(n,r,this.CACHE_DURATIONS.GARDEN_CONTEXT)}getGardenSummary(t){const r=this.getCacheKey(t,"garden_summary");return this.getCachedData(r)}setGardenSummary(t,r){const n=this.getCacheKey(t,"garden_summary");this.setCachedData(n,r,this.CACHE_DURATIONS.GARDEN_SUMMARY)}getSuggestedQuestions(t){const r=this.getCacheKey(t,"suggested_questions");return this.getCachedData(r)}setSuggestedQuestions(t,r){const n=this.getCacheKey(t,"suggested_questions");this.setCachedData(n,r,this.CACHE_DURATIONS.SUGGESTED_QUESTIONS)}getPlantData(t){const r=this.getCacheKey(t,"plant_data");return this.getCachedData(r)}setPlantData(t,r){const n=this.getCacheKey(t,"plant_data");this.setCachedData(n,r,this.CACHE_DURATIONS.PLANT_DATA)}invalidateCache(t,r){r?r.forEach(n=>{const a=this.getCacheKey(t,n);this.cache.delete(a),console.log(`[GardenCache] Invalidated cache for key: ${a}`)}):Array.from(this.cache.keys()).filter(a=>a.startsWith(`${t}:`)).forEach(a=>{this.cache.delete(a),console.log(`[GardenCache] Invalidated cache for key: ${a}`)})}invalidateOnPlantChange(t){console.log("[GardenCache] Plant data changed, invalidating related caches"),this.invalidateCache(t,["garden_context","garden_summary","plant_data","suggested_questions"])}getCacheStats(t){const r=Array.from(this.cache.keys()),n=r.filter(o=>o.startsWith(`${t}:`));let a=0,i=0;return n.forEach(o=>{const s=this.cache.get(o);s&&(this.isValidCache(s)?a++:i++)}),{totalEntries:r.length,userEntries:n.length,validEntries:a,expiredEntries:i}}cleanup(){const t=Date.now(),r=[];this.cache.forEach((n,a)=>{t>=n.expiresAt&&r.push(a)}),r.forEach(n=>{this.cache.delete(n)}),r.length>0&&console.log(`[GardenCache] Cleaned up ${r.length} expired entries`)}clearAll(){this.cache.size,this.cache.clear()}}const In=new Zx;typeof window<"u"&&setInterval(()=>{In.cleanup()},5*60*1e3);function A(e,t,r){function n(s,l){var u;Object.defineProperty(s,"_zod",{value:s._zod??{},enumerable:!1}),(u=s._zod).traits??(u.traits=new Set),s._zod.traits.add(e),t(s,l);for(const d in o.prototype)d in s||Object.defineProperty(s,d,{value:o.prototype[d].bind(s)});s._zod.constr=o,s._zod.def=l}const a=r?.Parent??Object;class i extends a{}Object.defineProperty(i,"name",{value:e});function o(s){var l;const u=r?.Parent?new i:this;n(u,s),(l=u._zod).deferred??(l.deferred=[]);for(const d of u._zod.deferred)d();return u}return Object.defineProperty(o,"init",{value:n}),Object.defineProperty(o,Symbol.hasInstance,{value:s=>r?.Parent&&s instanceof r.Parent?!0:s?._zod?.traits?.has(e)}),Object.defineProperty(o,"name",{value:e}),o}class Pa extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const kh={};function un(e){return kh}function Kx(e){const t=Object.values(e).filter(n=>typeof n=="number");return Object.entries(e).filter(([n,a])=>t.indexOf(+n)===-1).map(([n,a])=>a)}function Gx(e,t){return typeof t=="bigint"?t.toString():t}function Eh(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function Xl(e){return e==null}function Ql(e){const t=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}function Vx(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,a=r>n?r:n,i=Number.parseInt(e.toFixed(a).replace(".","")),o=Number.parseInt(t.toFixed(a).replace(".",""));return i%o/10**a}function xe(e,t,r){Object.defineProperty(e,t,{get(){{const n=r();return e[t]=n,n}},set(n){Object.defineProperty(e,t,{value:n})},configurable:!0})}function Jl(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function ra(e){return JSON.stringify(e)}const Ah=Error.captureStackTrace?Error.captureStackTrace:(...e)=>{};function Zs(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const Yx=Eh(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function Ks(e){if(Zs(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(Zs(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}const Xx=new Set(["string","number","symbol"]);function jo(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function vn(e,t,r){const n=new e._zod.constr(t??e._zod.def);return(!t||r?.parent)&&(n._zod.parent=e),n}function W(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if(t?.message!==void 0){if(t?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function Qx(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const Jx={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function eb(e,t){const r={},n=e._zod.def;for(const a in t){if(!(a in n.shape))throw new Error(`Unrecognized key: "${a}"`);t[a]&&(r[a]=n.shape[a])}return vn(e,{...e._zod.def,shape:r,checks:[]})}function tb(e,t){const r={...e._zod.def.shape},n=e._zod.def;for(const a in t){if(!(a in n.shape))throw new Error(`Unrecognized key: "${a}"`);t[a]&&delete r[a]}return vn(e,{...e._zod.def,shape:r,checks:[]})}function rb(e,t){if(!Ks(t))throw new Error("Invalid input to extend: expected a plain object");const r={...e._zod.def,get shape(){const n={...e._zod.def.shape,...t};return Jl(this,"shape",n),n},checks:[]};return vn(e,r)}function nb(e,t){return vn(e,{...e._zod.def,get shape(){const r={...e._zod.def.shape,...t._zod.def.shape};return Jl(this,"shape",r),r},catchall:t._zod.def.catchall,checks:[]})}function ab(e,t,r){const n=t._zod.def.shape,a={...n};if(r)for(const i in r){if(!(i in n))throw new Error(`Unrecognized key: "${i}"`);r[i]&&(a[i]=e?new e({type:"optional",innerType:n[i]}):n[i])}else for(const i in n)a[i]=e?new e({type:"optional",innerType:n[i]}):n[i];return vn(t,{...t._zod.def,shape:a,checks:[]})}function ib(e,t,r){const n=t._zod.def.shape,a={...n};if(r)for(const i in r){if(!(i in a))throw new Error(`Unrecognized key: "${i}"`);r[i]&&(a[i]=new e({type:"nonoptional",innerType:n[i]}))}else for(const i in n)a[i]=new e({type:"nonoptional",innerType:n[i]});return vn(t,{...t._zod.def,shape:a,checks:[]})}function xa(e,t=0){for(let r=t;r<e.issues.length;r++)if(e.issues[r]?.continue!==!0)return!0;return!1}function ec(e,t){return t.map(r=>{var n;return(n=r).path??(n.path=[]),r.path.unshift(e),r})}function li(e){return typeof e=="string"?e:e?.message}function dn(e,t,r){const n={...e,path:e.path??[]};if(!e.message){const a=li(e.inst?._zod.def?.error?.(e))??li(t?.error?.(e))??li(r.customError?.(e))??li(r.localeError?.(e))??"Invalid input";n.message=a}return delete n.inst,delete n.continue,t?.reportInput||delete n.input,n}function tc(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function Sa(...e){const[t,r,n]=e;return typeof t=="string"?{message:t,code:"custom",input:r,inst:n}:{...t}}const Ch=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),Object.defineProperty(e,"message",{get(){return JSON.stringify(t,Gx,2)},enumerable:!0}),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},Oh=A("$ZodError",Ch),Th=A("$ZodError",Ch,{Parent:Error});function ob(e,t=r=>r.message){const r={},n=[];for(const a of e.issues)a.path.length>0?(r[a.path[0]]=r[a.path[0]]||[],r[a.path[0]].push(t(a))):n.push(t(a));return{formErrors:n,fieldErrors:r}}function sb(e,t){const r=t||function(i){return i.message},n={_errors:[]},a=i=>{for(const o of i.issues)if(o.code==="invalid_union"&&o.errors.length)o.errors.map(s=>a({issues:s}));else if(o.code==="invalid_key")a({issues:o.issues});else if(o.code==="invalid_element")a({issues:o.issues});else if(o.path.length===0)n._errors.push(r(o));else{let s=n,l=0;for(;l<o.path.length;){const u=o.path[l];l===o.path.length-1?(s[u]=s[u]||{_errors:[]},s[u]._errors.push(r(o))):s[u]=s[u]||{_errors:[]},s=s[u],l++}}};return a(e),n}const lb=e=>(t,r,n,a)=>{const i=n?Object.assign(n,{async:!1}):{async:!1},o=t._zod.run({value:r,issues:[]},i);if(o instanceof Promise)throw new Pa;if(o.issues.length){const s=new(a?.Err??e)(o.issues.map(l=>dn(l,i,un())));throw Ah(s,a?.callee),s}return o.value},cb=e=>async(t,r,n,a)=>{const i=n?Object.assign(n,{async:!0}):{async:!0};let o=t._zod.run({value:r,issues:[]},i);if(o instanceof Promise&&(o=await o),o.issues.length){const s=new(a?.Err??e)(o.issues.map(l=>dn(l,i,un())));throw Ah(s,a?.callee),s}return o.value},Ih=e=>(t,r,n)=>{const a=n?{...n,async:!1}:{async:!1},i=t._zod.run({value:r,issues:[]},a);if(i instanceof Promise)throw new Pa;return i.issues.length?{success:!1,error:new(e??Oh)(i.issues.map(o=>dn(o,a,un())))}:{success:!0,data:i.value}},ub=Ih(Th),Dh=e=>async(t,r,n)=>{const a=n?Object.assign(n,{async:!0}):{async:!0};let i=t._zod.run({value:r,issues:[]},a);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new e(i.issues.map(o=>dn(o,a,un())))}:{success:!0,data:i.value}},db=Dh(Th),fb=/^[cC][^\s-]{8,}$/,mb=/^[0-9a-z]+$/,hb=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,pb=/^[0-9a-vA-V]{20}$/,gb=/^[A-Za-z0-9]{27}$/,vb=/^[a-zA-Z0-9_-]{21}$/,yb=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,xb=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,td=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,bb=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,wb="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function jb(){return new RegExp(wb,"u")}const Pb=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Sb=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,Nb=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,_b=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,kb=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Mh=/^[A-Za-z0-9_-]*$/,Eb=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/,Ab=/^\+(?:[0-9]){6,14}[0-9]$/,$h="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",Cb=new RegExp(`^${$h}$`);function zh(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function Ob(e){return new RegExp(`^${zh(e)}$`)}function Tb(e){const t=zh({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-]\\d{2}:\\d{2})");const n=`${t}(?:${r.join("|")})`;return new RegExp(`^${$h}T(?:${n})$`)}const Ib=e=>{const t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},Db=/^\d+$/,Mb=/^-?\d+(?:\.\d+)?/i,$b=/true|false/i,zb=/^[^A-Z]*$/,Rb=/^[^a-z]*$/,ut=A("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),Rh={number:"number",bigint:"bigint",object:"date"},Lh=A("$ZodCheckLessThan",(e,t)=>{ut.init(e,t);const r=Rh[typeof t.value];e._zod.onattach.push(n=>{const a=n._zod.bag,i=(t.inclusive?a.maximum:a.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<i&&(t.inclusive?a.maximum=t.value:a.exclusiveMaximum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value<=t.value:n.value<t.value)||n.issues.push({origin:r,code:"too_big",maximum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Fh=A("$ZodCheckGreaterThan",(e,t)=>{ut.init(e,t);const r=Rh[typeof t.value];e._zod.onattach.push(n=>{const a=n._zod.bag,i=(t.inclusive?a.minimum:a.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>i&&(t.inclusive?a.minimum=t.value:a.exclusiveMinimum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value>=t.value:n.value>t.value)||n.issues.push({origin:r,code:"too_small",minimum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Lb=A("$ZodCheckMultipleOf",(e,t)=>{ut.init(e,t),e._zod.onattach.push(r=>{var n;(n=r._zod.bag).multipleOf??(n.multipleOf=t.value)}),e._zod.check=r=>{if(typeof r.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof r.value=="bigint"?r.value%t.value===BigInt(0):Vx(r.value,t.value)===0)||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:t.value,input:r.value,inst:e,continue:!t.abort})}}),Fb=A("$ZodCheckNumberFormat",(e,t)=>{ut.init(e,t),t.format=t.format||"float64";const r=t.format?.includes("int"),n=r?"int":"number",[a,i]=Jx[t.format];e._zod.onattach.push(o=>{const s=o._zod.bag;s.format=t.format,s.minimum=a,s.maximum=i,r&&(s.pattern=Db)}),e._zod.check=o=>{const s=o.value;if(r){if(!Number.isInteger(s)){o.issues.push({expected:n,format:t.format,code:"invalid_type",input:s,inst:e});return}if(!Number.isSafeInteger(s)){s>0?o.issues.push({input:s,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,continue:!t.abort}):o.issues.push({input:s,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,continue:!t.abort});return}}s<a&&o.issues.push({origin:"number",input:s,code:"too_small",minimum:a,inclusive:!0,inst:e,continue:!t.abort}),s>i&&o.issues.push({origin:"number",input:s,code:"too_big",maximum:i,inst:e})}}),Bb=A("$ZodCheckMaxLength",(e,t)=>{var r;ut.init(e,t),(r=e._zod.def).when??(r.when=n=>{const a=n.value;return!Xl(a)&&a.length!==void 0}),e._zod.onattach.push(n=>{const a=n._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<a&&(n._zod.bag.maximum=t.maximum)}),e._zod.check=n=>{const a=n.value;if(a.length<=t.maximum)return;const o=tc(a);n.issues.push({origin:o,code:"too_big",maximum:t.maximum,inclusive:!0,input:a,inst:e,continue:!t.abort})}}),Ub=A("$ZodCheckMinLength",(e,t)=>{var r;ut.init(e,t),(r=e._zod.def).when??(r.when=n=>{const a=n.value;return!Xl(a)&&a.length!==void 0}),e._zod.onattach.push(n=>{const a=n._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>a&&(n._zod.bag.minimum=t.minimum)}),e._zod.check=n=>{const a=n.value;if(a.length>=t.minimum)return;const o=tc(a);n.issues.push({origin:o,code:"too_small",minimum:t.minimum,inclusive:!0,input:a,inst:e,continue:!t.abort})}}),Wb=A("$ZodCheckLengthEquals",(e,t)=>{var r;ut.init(e,t),(r=e._zod.def).when??(r.when=n=>{const a=n.value;return!Xl(a)&&a.length!==void 0}),e._zod.onattach.push(n=>{const a=n._zod.bag;a.minimum=t.length,a.maximum=t.length,a.length=t.length}),e._zod.check=n=>{const a=n.value,i=a.length;if(i===t.length)return;const o=tc(a),s=i>t.length;n.issues.push({origin:o,...s?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}}),Po=A("$ZodCheckStringFormat",(e,t)=>{var r,n;ut.init(e,t),e._zod.onattach.push(a=>{const i=a._zod.bag;i.format=t.format,t.pattern&&(i.patterns??(i.patterns=new Set),i.patterns.add(t.pattern))}),t.pattern?(r=e._zod).check??(r.check=a=>{t.pattern.lastIndex=0,!t.pattern.test(a.value)&&a.issues.push({origin:"string",code:"invalid_format",format:t.format,input:a.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(n=e._zod).check??(n.check=()=>{})}),Hb=A("$ZodCheckRegex",(e,t)=>{Po.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),qb=A("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=zb),Po.init(e,t)}),Zb=A("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=Rb),Po.init(e,t)}),Kb=A("$ZodCheckIncludes",(e,t)=>{ut.init(e,t);const r=jo(t.includes),n=new RegExp(typeof t.position=="number"?`^.{${t.position}}${r}`:r);t.pattern=n,e._zod.onattach.push(a=>{const i=a._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(n)}),e._zod.check=a=>{a.value.includes(t.includes,t.position)||a.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:a.value,inst:e,continue:!t.abort})}}),Gb=A("$ZodCheckStartsWith",(e,t)=>{ut.init(e,t);const r=new RegExp(`^${jo(t.prefix)}.*`);t.pattern??(t.pattern=r),e._zod.onattach.push(n=>{const a=n._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(r)}),e._zod.check=n=>{n.value.startsWith(t.prefix)||n.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:n.value,inst:e,continue:!t.abort})}}),Vb=A("$ZodCheckEndsWith",(e,t)=>{ut.init(e,t);const r=new RegExp(`.*${jo(t.suffix)}$`);t.pattern??(t.pattern=r),e._zod.onattach.push(n=>{const a=n._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(r)}),e._zod.check=n=>{n.value.endsWith(t.suffix)||n.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:n.value,inst:e,continue:!t.abort})}}),Yb=A("$ZodCheckOverwrite",(e,t)=>{ut.init(e,t),e._zod.check=r=>{r.value=t.tx(r.value)}});class Xb{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const n=t.split(`
`).filter(o=>o),a=Math.min(...n.map(o=>o.length-o.trimStart().length)),i=n.map(o=>o.slice(a)).map(o=>" ".repeat(this.indent*2)+o);for(const o of i)this.content.push(o)}compile(){const t=Function,r=this?.args,a=[...(this?.content??[""]).map(i=>`  ${i}`)];return new t(...r,a.join(`
`))}}const Qb={major:4,minor:0,patch:5},Pe=A("$ZodType",(e,t)=>{var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=Qb;const n=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&n.unshift(e);for(const a of n)for(const i of a._zod.onattach)i(e);if(n.length===0)(r=e._zod).deferred??(r.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const a=(i,o,s)=>{let l=xa(i),u;for(const d of o){if(d._zod.def.when){if(!d._zod.def.when(i))continue}else if(l)continue;const f=i.issues.length,m=d._zod.check(i);if(m instanceof Promise&&s?.async===!1)throw new Pa;if(u||m instanceof Promise)u=(u??Promise.resolve()).then(async()=>{await m,i.issues.length!==f&&(l||(l=xa(i,f)))});else{if(i.issues.length===f)continue;l||(l=xa(i,f))}}return u?u.then(()=>i):i};e._zod.run=(i,o)=>{const s=e._zod.parse(i,o);if(s instanceof Promise){if(o.async===!1)throw new Pa;return s.then(l=>a(l,n,o))}return a(s,n,o)}}e["~standard"]={validate:a=>{try{const i=ub(e,a);return i.success?{value:i.data}:{issues:i.error?.issues}}catch{return db(e,a).then(o=>o.success?{value:o.data}:{issues:o.error?.issues})}},vendor:"zod",version:1}}),rc=A("$ZodString",(e,t)=>{Pe.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??Ib(e._zod.bag),e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:e}),r}}),je=A("$ZodStringFormat",(e,t)=>{Po.init(e,t),rc.init(e,t)}),Jb=A("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=xb),je.init(e,t)}),ew=A("$ZodUUID",(e,t)=>{if(t.version){const n={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(n===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=td(n))}else t.pattern??(t.pattern=td());je.init(e,t)}),tw=A("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=bb),je.init(e,t)}),rw=A("$ZodURL",(e,t)=>{je.init(e,t),e._zod.check=r=>{try{const n=r.value,a=new URL(n),i=a.href;t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(a.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:Eb.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(a.protocol.endsWith(":")?a.protocol.slice(0,-1):a.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),!n.endsWith("/")&&i.endsWith("/")?r.value=i.slice(0,-1):r.value=i;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),nw=A("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=jb()),je.init(e,t)}),aw=A("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=vb),je.init(e,t)}),iw=A("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=fb),je.init(e,t)}),ow=A("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=mb),je.init(e,t)}),sw=A("$ZodULID",(e,t)=>{t.pattern??(t.pattern=hb),je.init(e,t)}),lw=A("$ZodXID",(e,t)=>{t.pattern??(t.pattern=pb),je.init(e,t)}),cw=A("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=gb),je.init(e,t)}),uw=A("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=Tb(t)),je.init(e,t)}),dw=A("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=Cb),je.init(e,t)}),fw=A("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=Ob(t)),je.init(e,t)}),mw=A("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=yb),je.init(e,t)}),hw=A("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=Pb),je.init(e,t),e._zod.onattach.push(r=>{const n=r._zod.bag;n.format="ipv4"})}),pw=A("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=Sb),je.init(e,t),e._zod.onattach.push(r=>{const n=r._zod.bag;n.format="ipv6"}),e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),gw=A("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=Nb),je.init(e,t)}),vw=A("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=_b),je.init(e,t),e._zod.check=r=>{const[n,a]=r.value.split("/");try{if(!a)throw new Error;const i=Number(a);if(`${i}`!==a)throw new Error;if(i<0||i>128)throw new Error;new URL(`http://[${n}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});function Bh(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const yw=A("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=kb),je.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64"}),e._zod.check=r=>{Bh(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}});function xw(e){if(!Mh.test(e))return!1;const t=e.replace(/[-_]/g,n=>n==="-"?"+":"/"),r=t.padEnd(Math.ceil(t.length/4)*4,"=");return Bh(r)}const bw=A("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=Mh),je.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64url"}),e._zod.check=r=>{xw(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),ww=A("$ZodE164",(e,t)=>{t.pattern??(t.pattern=Ab),je.init(e,t)});function jw(e,t=null){try{const r=e.split(".");if(r.length!==3)return!1;const[n]=r;if(!n)return!1;const a=JSON.parse(atob(n));return!("typ"in a&&a?.typ!=="JWT"||!a.alg||t&&(!("alg"in a)||a.alg!==t))}catch{return!1}}const Pw=A("$ZodJWT",(e,t)=>{je.init(e,t),e._zod.check=r=>{jw(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),Uh=A("$ZodNumber",(e,t)=>{Pe.init(e,t),e._zod.pattern=e._zod.bag.pattern??Mb,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=Number(r.value)}catch{}const a=r.value;if(typeof a=="number"&&!Number.isNaN(a)&&Number.isFinite(a))return r;const i=typeof a=="number"?Number.isNaN(a)?"NaN":Number.isFinite(a)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:a,inst:e,...i?{received:i}:{}}),r}}),Sw=A("$ZodNumber",(e,t)=>{Fb.init(e,t),Uh.init(e,t)}),Nw=A("$ZodBoolean",(e,t)=>{Pe.init(e,t),e._zod.pattern=$b,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=!!r.value}catch{}const a=r.value;return typeof a=="boolean"||r.issues.push({expected:"boolean",code:"invalid_type",input:a,inst:e}),r}}),_w=A("$ZodUnknown",(e,t)=>{Pe.init(e,t),e._zod.parse=r=>r}),kw=A("$ZodNever",(e,t)=>{Pe.init(e,t),e._zod.parse=(r,n)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:e}),r)}),Ew=A("$ZodDate",(e,t)=>{Pe.init(e,t),e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=new Date(r.value)}catch{}const a=r.value,i=a instanceof Date;return i&&!Number.isNaN(a.getTime())||r.issues.push({expected:"date",code:"invalid_type",input:a,...i?{received:"Invalid Date"}:{},inst:e}),r}});function rd(e,t,r){e.issues.length&&t.issues.push(...ec(r,e.issues)),t.value[r]=e.value}const Aw=A("$ZodArray",(e,t)=>{Pe.init(e,t),e._zod.parse=(r,n)=>{const a=r.value;if(!Array.isArray(a))return r.issues.push({expected:"array",code:"invalid_type",input:a,inst:e}),r;r.value=Array(a.length);const i=[];for(let o=0;o<a.length;o++){const s=a[o],l=t.element._zod.run({value:s,issues:[]},n);l instanceof Promise?i.push(l.then(u=>rd(u,r,o))):rd(l,r,o)}return i.length?Promise.all(i).then(()=>r):r}});function ci(e,t,r){e.issues.length&&t.issues.push(...ec(r,e.issues)),t.value[r]=e.value}function nd(e,t,r,n){e.issues.length?n[r]===void 0?r in n?t.value[r]=void 0:t.value[r]=e.value:t.issues.push(...ec(r,e.issues)):e.value===void 0?r in n&&(t.value[r]=void 0):t.value[r]=e.value}const Cw=A("$ZodObject",(e,t)=>{Pe.init(e,t);const r=Eh(()=>{const f=Object.keys(t.shape);for(const h of f)if(!(t.shape[h]instanceof Pe))throw new Error(`Invalid element at key "${h}": expected a Zod schema`);const m=Qx(t.shape);return{shape:t.shape,keys:f,keySet:new Set(f),numKeys:f.length,optionalKeys:new Set(m)}});xe(e._zod,"propValues",()=>{const f=t.shape,m={};for(const h in f){const p=f[h]._zod;if(p.values){m[h]??(m[h]=new Set);for(const v of p.values)m[h].add(v)}}return m});const n=f=>{const m=new Xb(["shape","payload","ctx"]),h=r.value,p=b=>{const w=ra(b);return`shape[${w}]._zod.run({ value: input[${w}], issues: [] }, ctx)`};m.write("const input = payload.value;");const v=Object.create(null);let g=0;for(const b of h.keys)v[b]=`key_${g++}`;m.write("const newResult = {}");for(const b of h.keys)if(h.optionalKeys.has(b)){const w=v[b];m.write(`const ${w} = ${p(b)};`);const j=ra(b);m.write(`
        if (${w}.issues.length) {
          if (input[${j}] === undefined) {
            if (${j} in input) {
              newResult[${j}] = undefined;
            }
          } else {
            payload.issues = payload.issues.concat(
              ${w}.issues.map((iss) => ({
                ...iss,
                path: iss.path ? [${j}, ...iss.path] : [${j}],
              }))
            );
          }
        } else if (${w}.value === undefined) {
          if (${j} in input) newResult[${j}] = undefined;
        } else {
          newResult[${j}] = ${w}.value;
        }
        `)}else{const w=v[b];m.write(`const ${w} = ${p(b)};`),m.write(`
          if (${w}.issues.length) payload.issues = payload.issues.concat(${w}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${ra(b)}, ...iss.path] : [${ra(b)}]
          })));`),m.write(`newResult[${ra(b)}] = ${w}.value`)}m.write("payload.value = newResult;"),m.write("return payload;");const x=m.compile();return(b,w)=>x(f,b,w)};let a;const i=Zs,o=!kh.jitless,l=o&&Yx.value,u=t.catchall;let d;e._zod.parse=(f,m)=>{d??(d=r.value);const h=f.value;if(!i(h))return f.issues.push({expected:"object",code:"invalid_type",input:h,inst:e}),f;const p=[];if(o&&l&&m?.async===!1&&m.jitless!==!0)a||(a=n(t.shape)),f=a(f,m);else{f.value={};const w=d.shape;for(const j of d.keys){const P=w[j],S=P._zod.run({value:h[j],issues:[]},m),N=P._zod.optin==="optional"&&P._zod.optout==="optional";S instanceof Promise?p.push(S.then(C=>N?nd(C,f,j,h):ci(C,f,j))):N?nd(S,f,j,h):ci(S,f,j)}}if(!u)return p.length?Promise.all(p).then(()=>f):f;const v=[],g=d.keySet,x=u._zod,b=x.def.type;for(const w of Object.keys(h)){if(g.has(w))continue;if(b==="never"){v.push(w);continue}const j=x.run({value:h[w],issues:[]},m);j instanceof Promise?p.push(j.then(P=>ci(P,f,w))):ci(j,f,w)}return v.length&&f.issues.push({code:"unrecognized_keys",keys:v,input:h,inst:e}),p.length?Promise.all(p).then(()=>f):f}});function ad(e,t,r,n){for(const a of e)if(a.issues.length===0)return t.value=a.value,t;return t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(a=>a.issues.map(i=>dn(i,n,un())))}),t}const Ow=A("$ZodUnion",(e,t)=>{Pe.init(e,t),xe(e._zod,"optin",()=>t.options.some(r=>r._zod.optin==="optional")?"optional":void 0),xe(e._zod,"optout",()=>t.options.some(r=>r._zod.optout==="optional")?"optional":void 0),xe(e._zod,"values",()=>{if(t.options.every(r=>r._zod.values))return new Set(t.options.flatMap(r=>Array.from(r._zod.values)))}),xe(e._zod,"pattern",()=>{if(t.options.every(r=>r._zod.pattern)){const r=t.options.map(n=>n._zod.pattern);return new RegExp(`^(${r.map(n=>Ql(n.source)).join("|")})$`)}}),e._zod.parse=(r,n)=>{let a=!1;const i=[];for(const o of t.options){const s=o._zod.run({value:r.value,issues:[]},n);if(s instanceof Promise)i.push(s),a=!0;else{if(s.issues.length===0)return s;i.push(s)}}return a?Promise.all(i).then(o=>ad(o,r,e,n)):ad(i,r,e,n)}}),Tw=A("$ZodIntersection",(e,t)=>{Pe.init(e,t),e._zod.parse=(r,n)=>{const a=r.value,i=t.left._zod.run({value:a,issues:[]},n),o=t.right._zod.run({value:a,issues:[]},n);return i instanceof Promise||o instanceof Promise?Promise.all([i,o]).then(([l,u])=>id(r,l,u)):id(r,i,o)}});function Gs(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(Ks(e)&&Ks(t)){const r=Object.keys(t),n=Object.keys(e).filter(i=>r.indexOf(i)!==-1),a={...e,...t};for(const i of n){const o=Gs(e[i],t[i]);if(!o.valid)return{valid:!1,mergeErrorPath:[i,...o.mergeErrorPath]};a[i]=o.data}return{valid:!0,data:a}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let n=0;n<e.length;n++){const a=e[n],i=t[n],o=Gs(a,i);if(!o.valid)return{valid:!1,mergeErrorPath:[n,...o.mergeErrorPath]};r.push(o.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function id(e,t,r){if(t.issues.length&&e.issues.push(...t.issues),r.issues.length&&e.issues.push(...r.issues),xa(e))return e;const n=Gs(t.value,r.value);if(!n.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(n.mergeErrorPath)}`);return e.value=n.data,e}const Iw=A("$ZodEnum",(e,t)=>{Pe.init(e,t);const r=Kx(t.entries);e._zod.values=new Set(r),e._zod.pattern=new RegExp(`^(${r.filter(n=>Xx.has(typeof n)).map(n=>typeof n=="string"?jo(n):n.toString()).join("|")})$`),e._zod.parse=(n,a)=>{const i=n.value;return e._zod.values.has(i)||n.issues.push({code:"invalid_value",values:r,input:i,inst:e}),n}}),Dw=A("$ZodTransform",(e,t)=>{Pe.init(e,t),e._zod.parse=(r,n)=>{const a=t.transform(r.value,r);if(n.async)return(a instanceof Promise?a:Promise.resolve(a)).then(o=>(r.value=o,r));if(a instanceof Promise)throw new Pa;return r.value=a,r}}),Mw=A("$ZodOptional",(e,t)=>{Pe.init(e,t),e._zod.optin="optional",e._zod.optout="optional",xe(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),xe(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${Ql(r.source)})?$`):void 0}),e._zod.parse=(r,n)=>t.innerType._zod.optin==="optional"?t.innerType._zod.run(r,n):r.value===void 0?r:t.innerType._zod.run(r,n)}),$w=A("$ZodNullable",(e,t)=>{Pe.init(e,t),xe(e._zod,"optin",()=>t.innerType._zod.optin),xe(e._zod,"optout",()=>t.innerType._zod.optout),xe(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${Ql(r.source)}|null)$`):void 0}),xe(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(r,n)=>r.value===null?r:t.innerType._zod.run(r,n)}),zw=A("$ZodDefault",(e,t)=>{Pe.init(e,t),e._zod.optin="optional",xe(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{if(r.value===void 0)return r.value=t.defaultValue,r;const a=t.innerType._zod.run(r,n);return a instanceof Promise?a.then(i=>od(i,t)):od(a,t)}});function od(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const Rw=A("$ZodPrefault",(e,t)=>{Pe.init(e,t),e._zod.optin="optional",xe(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>(r.value===void 0&&(r.value=t.defaultValue),t.innerType._zod.run(r,n))}),Lw=A("$ZodNonOptional",(e,t)=>{Pe.init(e,t),xe(e._zod,"values",()=>{const r=t.innerType._zod.values;return r?new Set([...r].filter(n=>n!==void 0)):void 0}),e._zod.parse=(r,n)=>{const a=t.innerType._zod.run(r,n);return a instanceof Promise?a.then(i=>sd(i,e)):sd(a,e)}});function sd(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const Fw=A("$ZodCatch",(e,t)=>{Pe.init(e,t),e._zod.optin="optional",xe(e._zod,"optout",()=>t.innerType._zod.optout),xe(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{const a=t.innerType._zod.run(r,n);return a instanceof Promise?a.then(i=>(r.value=i.value,i.issues.length&&(r.value=t.catchValue({...r,error:{issues:i.issues.map(o=>dn(o,n,un()))},input:r.value}),r.issues=[]),r)):(r.value=a.value,a.issues.length&&(r.value=t.catchValue({...r,error:{issues:a.issues.map(i=>dn(i,n,un()))},input:r.value}),r.issues=[]),r)}}),Bw=A("$ZodPipe",(e,t)=>{Pe.init(e,t),xe(e._zod,"values",()=>t.in._zod.values),xe(e._zod,"optin",()=>t.in._zod.optin),xe(e._zod,"optout",()=>t.out._zod.optout),xe(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(r,n)=>{const a=t.in._zod.run(r,n);return a instanceof Promise?a.then(i=>ld(i,t,n)):ld(a,t,n)}});function ld(e,t,r){return xa(e)?e:t.out._zod.run({value:e.value,issues:e.issues},r)}const Uw=A("$ZodReadonly",(e,t)=>{Pe.init(e,t),xe(e._zod,"propValues",()=>t.innerType._zod.propValues),xe(e._zod,"values",()=>t.innerType._zod.values),xe(e._zod,"optin",()=>t.innerType._zod.optin),xe(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(r,n)=>{const a=t.innerType._zod.run(r,n);return a instanceof Promise?a.then(cd):cd(a)}});function cd(e){return e.value=Object.freeze(e.value),e}const Ww=A("$ZodCustom",(e,t)=>{ut.init(e,t),Pe.init(e,t),e._zod.parse=(r,n)=>r,e._zod.check=r=>{const n=r.value,a=t.fn(n);if(a instanceof Promise)return a.then(i=>ud(i,r,n,e));ud(a,r,n,e)}});function ud(e,t,r,n){if(!e){const a={code:"custom",input:r,inst:n,path:[...n._zod.def.path??[]],continue:!n._zod.def.abort};n._zod.def.params&&(a.params=n._zod.def.params),t.issues.push(Sa(a))}}class Hw{constructor(){this._map=new Map,this._idmap=new Map}add(t,...r){const n=r[0];if(this._map.set(t,n),n&&typeof n=="object"&&"id"in n){if(this._idmap.has(n.id))throw new Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,t)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(t){const r=this._map.get(t);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(t),this}get(t){const r=t._zod.parent;if(r){const n={...this.get(r)??{}};return delete n.id,{...n,...this._map.get(t)}}return this._map.get(t)}has(t){return this._map.has(t)}}function qw(){return new Hw}const ui=qw();function Zw(e,t){return new e({type:"string",...W(t)})}function Kw(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...W(t)})}function dd(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...W(t)})}function Gw(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...W(t)})}function Vw(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...W(t)})}function Yw(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...W(t)})}function Xw(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...W(t)})}function Qw(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...W(t)})}function Jw(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...W(t)})}function e1(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...W(t)})}function t1(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...W(t)})}function r1(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...W(t)})}function n1(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...W(t)})}function a1(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...W(t)})}function i1(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...W(t)})}function o1(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...W(t)})}function s1(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...W(t)})}function l1(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...W(t)})}function c1(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...W(t)})}function u1(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...W(t)})}function d1(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...W(t)})}function f1(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...W(t)})}function m1(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...W(t)})}function h1(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...W(t)})}function p1(e,t){return new e({type:"string",format:"date",check:"string_format",...W(t)})}function g1(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...W(t)})}function v1(e,t){return new e({type:"string",format:"duration",check:"string_format",...W(t)})}function y1(e,t){return new e({type:"number",checks:[],...W(t)})}function x1(e,t){return new e({type:"number",coerce:!0,checks:[],...W(t)})}function b1(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...W(t)})}function w1(e,t){return new e({type:"boolean",...W(t)})}function j1(e){return new e({type:"unknown"})}function P1(e,t){return new e({type:"never",...W(t)})}function S1(e,t){return new e({type:"date",...W(t)})}function fd(e,t){return new Lh({check:"less_than",...W(t),value:e,inclusive:!1})}function Ei(e,t){return new Lh({check:"less_than",...W(t),value:e,inclusive:!0})}function md(e,t){return new Fh({check:"greater_than",...W(t),value:e,inclusive:!1})}function Ai(e,t){return new Fh({check:"greater_than",...W(t),value:e,inclusive:!0})}function hd(e,t){return new Lb({check:"multiple_of",...W(t),value:e})}function Wh(e,t){return new Bb({check:"max_length",...W(t),maximum:e})}function Di(e,t){return new Ub({check:"min_length",...W(t),minimum:e})}function Hh(e,t){return new Wb({check:"length_equals",...W(t),length:e})}function N1(e,t){return new Hb({check:"string_format",format:"regex",...W(t),pattern:e})}function _1(e){return new qb({check:"string_format",format:"lowercase",...W(e)})}function k1(e){return new Zb({check:"string_format",format:"uppercase",...W(e)})}function E1(e,t){return new Kb({check:"string_format",format:"includes",...W(t),includes:e})}function A1(e,t){return new Gb({check:"string_format",format:"starts_with",...W(t),prefix:e})}function C1(e,t){return new Vb({check:"string_format",format:"ends_with",...W(t),suffix:e})}function za(e){return new Yb({check:"overwrite",tx:e})}function O1(e){return za(t=>t.normalize(e))}function T1(){return za(e=>e.trim())}function I1(){return za(e=>e.toLowerCase())}function D1(){return za(e=>e.toUpperCase())}function M1(e,t,r){return new e({type:"array",element:t,...W(r)})}function $1(e,t,r){return new e({type:"custom",check:"custom",fn:t,...W(r)})}const z1=A("ZodISODateTime",(e,t)=>{uw.init(e,t),Se.init(e,t)});function R1(e){return h1(z1,e)}const L1=A("ZodISODate",(e,t)=>{dw.init(e,t),Se.init(e,t)});function F1(e){return p1(L1,e)}const B1=A("ZodISOTime",(e,t)=>{fw.init(e,t),Se.init(e,t)});function U1(e){return g1(B1,e)}const W1=A("ZodISODuration",(e,t)=>{mw.init(e,t),Se.init(e,t)});function H1(e){return v1(W1,e)}const qh=(e,t)=>{Oh.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:r=>sb(e,r)},flatten:{value:r=>ob(e,r)},addIssue:{value:r=>e.issues.push(r)},addIssues:{value:r=>e.issues.push(...r)},isEmpty:{get(){return e.issues.length===0}}})},q1=A("ZodError",qh),So=A("ZodError",qh,{Parent:Error}),Z1=lb(So),K1=cb(So),G1=Ih(So),V1=Dh(So),Ae=A("ZodType",(e,t)=>(Pe.init(e,t),e.def=t,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone({...t,checks:[...t.checks??[],...r.map(n=>typeof n=="function"?{_zod:{check:n,def:{check:"custom"},onattach:[]}}:n)]}),e.clone=(r,n)=>vn(e,r,n),e.brand=()=>e,e.register=(r,n)=>(r.add(e,n),e),e.parse=(r,n)=>Z1(e,r,n,{callee:e.parse}),e.safeParse=(r,n)=>G1(e,r,n),e.parseAsync=async(r,n)=>K1(e,r,n,{callee:e.parseAsync}),e.safeParseAsync=async(r,n)=>V1(e,r,n),e.spa=e.safeParseAsync,e.refine=(r,n)=>e.check(Bj(r,n)),e.superRefine=r=>e.check(Uj(r)),e.overwrite=r=>e.check(za(r)),e.optional=()=>yd(e),e.nullable=()=>xd(e),e.nullish=()=>yd(xd(e)),e.nonoptional=r=>Ij(e,r),e.array=()=>re(e),e.or=r=>Pj([e,r]),e.and=r=>Nj(e,r),e.transform=r=>bd(e,kj(r)),e.default=r=>Cj(e,r),e.prefault=r=>Tj(e,r),e.catch=r=>Mj(e,r),e.pipe=r=>bd(e,r),e.readonly=()=>Rj(e),e.describe=r=>{const n=e.clone();return ui.add(n,{description:r}),n},Object.defineProperty(e,"description",{get(){return ui.get(e)?.description},configurable:!0}),e.meta=(...r)=>{if(r.length===0)return ui.get(e);const n=e.clone();return ui.add(n,r[0]),n},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),Zh=A("_ZodString",(e,t)=>{rc.init(e,t),Ae.init(e,t);const r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...n)=>e.check(N1(...n)),e.includes=(...n)=>e.check(E1(...n)),e.startsWith=(...n)=>e.check(A1(...n)),e.endsWith=(...n)=>e.check(C1(...n)),e.min=(...n)=>e.check(Di(...n)),e.max=(...n)=>e.check(Wh(...n)),e.length=(...n)=>e.check(Hh(...n)),e.nonempty=(...n)=>e.check(Di(1,...n)),e.lowercase=n=>e.check(_1(n)),e.uppercase=n=>e.check(k1(n)),e.trim=()=>e.check(T1()),e.normalize=(...n)=>e.check(O1(...n)),e.toLowerCase=()=>e.check(I1()),e.toUpperCase=()=>e.check(D1())}),Y1=A("ZodString",(e,t)=>{rc.init(e,t),Zh.init(e,t),e.email=r=>e.check(Kw(X1,r)),e.url=r=>e.check(Qw(Q1,r)),e.jwt=r=>e.check(m1(mj,r)),e.emoji=r=>e.check(Jw(J1,r)),e.guid=r=>e.check(dd(pd,r)),e.uuid=r=>e.check(Gw(di,r)),e.uuidv4=r=>e.check(Vw(di,r)),e.uuidv6=r=>e.check(Yw(di,r)),e.uuidv7=r=>e.check(Xw(di,r)),e.nanoid=r=>e.check(e1(ej,r)),e.guid=r=>e.check(dd(pd,r)),e.cuid=r=>e.check(t1(tj,r)),e.cuid2=r=>e.check(r1(rj,r)),e.ulid=r=>e.check(n1(nj,r)),e.base64=r=>e.check(u1(uj,r)),e.base64url=r=>e.check(d1(dj,r)),e.xid=r=>e.check(a1(aj,r)),e.ksuid=r=>e.check(i1(ij,r)),e.ipv4=r=>e.check(o1(oj,r)),e.ipv6=r=>e.check(s1(sj,r)),e.cidrv4=r=>e.check(l1(lj,r)),e.cidrv6=r=>e.check(c1(cj,r)),e.e164=r=>e.check(f1(fj,r)),e.datetime=r=>e.check(R1(r)),e.date=r=>e.check(F1(r)),e.time=r=>e.check(U1(r)),e.duration=r=>e.check(H1(r))});function M(e){return Zw(Y1,e)}const Se=A("ZodStringFormat",(e,t)=>{je.init(e,t),Zh.init(e,t)}),X1=A("ZodEmail",(e,t)=>{tw.init(e,t),Se.init(e,t)}),pd=A("ZodGUID",(e,t)=>{Jb.init(e,t),Se.init(e,t)}),di=A("ZodUUID",(e,t)=>{ew.init(e,t),Se.init(e,t)}),Q1=A("ZodURL",(e,t)=>{rw.init(e,t),Se.init(e,t)}),J1=A("ZodEmoji",(e,t)=>{nw.init(e,t),Se.init(e,t)}),ej=A("ZodNanoID",(e,t)=>{aw.init(e,t),Se.init(e,t)}),tj=A("ZodCUID",(e,t)=>{iw.init(e,t),Se.init(e,t)}),rj=A("ZodCUID2",(e,t)=>{ow.init(e,t),Se.init(e,t)}),nj=A("ZodULID",(e,t)=>{sw.init(e,t),Se.init(e,t)}),aj=A("ZodXID",(e,t)=>{lw.init(e,t),Se.init(e,t)}),ij=A("ZodKSUID",(e,t)=>{cw.init(e,t),Se.init(e,t)}),oj=A("ZodIPv4",(e,t)=>{hw.init(e,t),Se.init(e,t)}),sj=A("ZodIPv6",(e,t)=>{pw.init(e,t),Se.init(e,t)}),lj=A("ZodCIDRv4",(e,t)=>{gw.init(e,t),Se.init(e,t)}),cj=A("ZodCIDRv6",(e,t)=>{vw.init(e,t),Se.init(e,t)}),uj=A("ZodBase64",(e,t)=>{yw.init(e,t),Se.init(e,t)}),dj=A("ZodBase64URL",(e,t)=>{bw.init(e,t),Se.init(e,t)}),fj=A("ZodE164",(e,t)=>{ww.init(e,t),Se.init(e,t)}),mj=A("ZodJWT",(e,t)=>{Pw.init(e,t),Se.init(e,t)}),nc=A("ZodNumber",(e,t)=>{Uh.init(e,t),Ae.init(e,t),e.gt=(n,a)=>e.check(md(n,a)),e.gte=(n,a)=>e.check(Ai(n,a)),e.min=(n,a)=>e.check(Ai(n,a)),e.lt=(n,a)=>e.check(fd(n,a)),e.lte=(n,a)=>e.check(Ei(n,a)),e.max=(n,a)=>e.check(Ei(n,a)),e.int=n=>e.check(gd(n)),e.safe=n=>e.check(gd(n)),e.positive=n=>e.check(md(0,n)),e.nonnegative=n=>e.check(Ai(0,n)),e.negative=n=>e.check(fd(0,n)),e.nonpositive=n=>e.check(Ei(0,n)),e.multipleOf=(n,a)=>e.check(hd(n,a)),e.step=(n,a)=>e.check(hd(n,a)),e.finite=()=>e;const r=e._zod.bag;e.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),e.isFinite=!0,e.format=r.format??null});function fn(e){return y1(nc,e)}const hj=A("ZodNumberFormat",(e,t)=>{Sw.init(e,t),nc.init(e,t)});function gd(e){return b1(hj,e)}const pj=A("ZodBoolean",(e,t)=>{Nw.init(e,t),Ae.init(e,t)});function Kh(e){return w1(pj,e)}const gj=A("ZodUnknown",(e,t)=>{_w.init(e,t),Ae.init(e,t)});function vd(){return j1(gj)}const vj=A("ZodNever",(e,t)=>{kw.init(e,t),Ae.init(e,t)});function yj(e){return P1(vj,e)}const xj=A("ZodDate",(e,t)=>{Ew.init(e,t),Ae.init(e,t),e.min=(n,a)=>e.check(Ai(n,a)),e.max=(n,a)=>e.check(Ei(n,a));const r=e._zod.bag;e.minDate=r.minimum?new Date(r.minimum):null,e.maxDate=r.maximum?new Date(r.maximum):null});function Qt(e){return S1(xj,e)}const bj=A("ZodArray",(e,t)=>{Aw.init(e,t),Ae.init(e,t),e.element=t.element,e.min=(r,n)=>e.check(Di(r,n)),e.nonempty=r=>e.check(Di(1,r)),e.max=(r,n)=>e.check(Wh(r,n)),e.length=(r,n)=>e.check(Hh(r,n)),e.unwrap=()=>e.element});function re(e,t){return M1(bj,e,t)}const wj=A("ZodObject",(e,t)=>{Cw.init(e,t),Ae.init(e,t),xe(e,"shape",()=>t.shape),e.keyof=()=>ue(Object.keys(e._zod.def.shape)),e.catchall=r=>e.clone({...e._zod.def,catchall:r}),e.passthrough=()=>e.clone({...e._zod.def,catchall:vd()}),e.loose=()=>e.clone({...e._zod.def,catchall:vd()}),e.strict=()=>e.clone({...e._zod.def,catchall:yj()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=r=>rb(e,r),e.merge=r=>nb(e,r),e.pick=r=>eb(e,r),e.omit=r=>tb(e,r),e.partial=(...r)=>ab(Gh,e,r[0]),e.required=(...r)=>ib(Vh,e,r[0])});function oe(e,t){const r={type:"object",get shape(){return Jl(this,"shape",{...e}),this.shape},...W(t)};return new wj(r)}const jj=A("ZodUnion",(e,t)=>{Ow.init(e,t),Ae.init(e,t),e.options=t.options});function Pj(e,t){return new jj({type:"union",options:e,...W(t)})}const Sj=A("ZodIntersection",(e,t)=>{Tw.init(e,t),Ae.init(e,t)});function Nj(e,t){return new Sj({type:"intersection",left:e,right:t})}const Vs=A("ZodEnum",(e,t)=>{Iw.init(e,t),Ae.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const r=new Set(Object.keys(t.entries));e.extract=(n,a)=>{const i={};for(const o of n)if(r.has(o))i[o]=t.entries[o];else throw new Error(`Key ${o} not found in enum`);return new Vs({...t,checks:[],...W(a),entries:i})},e.exclude=(n,a)=>{const i={...t.entries};for(const o of n)if(r.has(o))delete i[o];else throw new Error(`Key ${o} not found in enum`);return new Vs({...t,checks:[],...W(a),entries:i})}});function ue(e,t){const r=Array.isArray(e)?Object.fromEntries(e.map(n=>[n,n])):e;return new Vs({type:"enum",entries:r,...W(t)})}const _j=A("ZodTransform",(e,t)=>{Dw.init(e,t),Ae.init(e,t),e._zod.parse=(r,n)=>{r.addIssue=i=>{if(typeof i=="string")r.issues.push(Sa(i,r.value,t));else{const o=i;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=r.value),o.inst??(o.inst=e),o.continue??(o.continue=!0),r.issues.push(Sa(o))}};const a=t.transform(r.value,r);return a instanceof Promise?a.then(i=>(r.value=i,r)):(r.value=a,r)}});function kj(e){return new _j({type:"transform",transform:e})}const Gh=A("ZodOptional",(e,t)=>{Mw.init(e,t),Ae.init(e,t),e.unwrap=()=>e._zod.def.innerType});function yd(e){return new Gh({type:"optional",innerType:e})}const Ej=A("ZodNullable",(e,t)=>{$w.init(e,t),Ae.init(e,t),e.unwrap=()=>e._zod.def.innerType});function xd(e){return new Ej({type:"nullable",innerType:e})}const Aj=A("ZodDefault",(e,t)=>{zw.init(e,t),Ae.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function Cj(e,t){return new Aj({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const Oj=A("ZodPrefault",(e,t)=>{Rw.init(e,t),Ae.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Tj(e,t){return new Oj({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const Vh=A("ZodNonOptional",(e,t)=>{Lw.init(e,t),Ae.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Ij(e,t){return new Vh({type:"nonoptional",innerType:e,...W(t)})}const Dj=A("ZodCatch",(e,t)=>{Fw.init(e,t),Ae.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function Mj(e,t){return new Dj({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const $j=A("ZodPipe",(e,t)=>{Bw.init(e,t),Ae.init(e,t),e.in=t.in,e.out=t.out});function bd(e,t){return new $j({type:"pipe",in:e,out:t})}const zj=A("ZodReadonly",(e,t)=>{Uw.init(e,t),Ae.init(e,t)});function Rj(e){return new zj({type:"readonly",innerType:e})}const Lj=A("ZodCustom",(e,t)=>{Ww.init(e,t),Ae.init(e,t)});function Fj(e){const t=new ut({check:"custom"});return t._zod.check=e,t}function Bj(e,t={}){return $1(Lj,e,t)}function Uj(e){const t=Fj(r=>(r.addIssue=n=>{if(typeof n=="string")r.issues.push(Sa(n,r.value,t._zod.def));else{const a=n;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=r.value),a.inst??(a.inst=t),a.continue??(a.continue=!t._zod.def.abort),r.issues.push(Sa(a))}},e(r.value,r)));return t}function Yt(e){return x1(nc,e)}const Yh=oe({type:ue(["overwatering","underwatering","pest","disease","nutrient","light","other"]),severity:ue(["low","medium","high"]),description:M().min(1),treatment:M().min(1)}),Xh=oe({overallHealth:ue(["excellent","good","fair","poor"]),issues:re(Yh),recommendations:re(M()),moistureLevel:Yt().min(0).max(100),growthStage:ue(["seedling","juvenile","mature","flowering","dormant"]),confidence:Yt().min(0).max(100)}),Qh=oe({wateringFrequency:Yt().positive(),sunlightRequirement:ue(["low","medium","high"]),humidityPreference:ue(["low","medium","high"]),temperatureRange:oe({min:Yt(),max:Yt()}),fertilizingFrequency:Yt().positive(),soilType:M().min(1),specialCare:re(M()).optional()}),Jh=oe({traits:re(M()).min(1),communicationStyle:ue(["cheerful","wise","dramatic","calm","playful"]),catchphrases:re(M()),moodFactors:oe({health:Yt().min(0).max(1),care:Yt().min(0).max(1),attention:Yt().min(0).max(1)})}),Wj=oe({species:M(),commonName:M(),variety:M().nullable().optional(),confidence:Yt().min(0).max(100),generalDescription:M().min(20),funFacts:re(M()),plantEnvironment:ue(["interior","exterior","ambos"]),lightRequirements:ue(["poca_luz","luz_indirecta","luz_directa_parcial","pleno_sol"]),health:Xh,careProfile:Qh,personality:Jh}),ep=oe({type:ue(["info","warning","tip","alert"]),title:M(),message:M()}),Hj=re(ep),qj=Object.freeze(Object.defineProperty({__proto__:null,AIAnalysisResponseSchema:Wj,CareProfileSchema:Qh,HealthAnalysisSchema:Xh,HealthIssueSchema:Yh,InsightResponseSchema:Hj,InsightSchema:ep,PlantPersonalitySchema:Jh},Symbol.toStringTag,{value:"Module"})),{HealthAnalysisSchema:Zj,CareProfileSchema:Kj,PlantPersonalitySchema:Gj,InsightResponseSchema:Vj}=qj,Yj=oe({id:M().min(1,"Image ID is required"),url:M().url("Must be a valid URL"),timestamp:Qt(),healthAnalysis:Zj.optional(),isProfileImage:Kh()}),Xj=oe({id:M().min(1,"Message ID is required"),sender:ue(["user","plant","system"]),content:M().min(1,"Message content cannot be empty"),timestamp:Qt(),emotion:ue(["alegre","triste","enojado","neutral","juguetón","agradecido","happy","sad","excited","worried","grateful"]).optional(),context:oe({insights:re(oe({type:ue(["tip","warning","observation","recommendation"]),title:M(),description:M(),affectedPlants:re(M()).optional()})).optional(),suggestedActions:re(oe({action:M(),priority:ue(["low","medium","high"]),plantIds:re(M()).optional()})).optional()}).optional()}),Qj=oe({id:M().min(1,"Notification ID is required"),type:ue(["watering","fertilizing","health_check","general"]),title:M().min(1,"Title is required"),message:M().min(1,"Message is required"),priority:ue(["low","medium","high"]),scheduledFor:Qt(),completed:Kh()}),Jj=oe({id:M().uuid(),name:M(),species:M(),variety:M().optional(),nickname:M().optional(),description:M().optional(),funFacts:re(M()).optional(),location:M(),plantEnvironment:ue(["interior","exterior","ambos"]).optional(),lightRequirements:ue(["poca_luz","luz_indirecta","luz_directa_parcial","pleno_sol"]).optional(),dateAdded:Qt(),lastWatered:Qt().optional(),lastFertilized:Qt().optional(),images:re(Yj),healthScore:fn().min(0).max(100),careProfile:Kj,personality:Gj,chatHistory:re(Xj),notifications:re(Qj)}),eP=oe({id:M().min(1,"Plant ID is required"),name:M().min(1,"Plant name is required"),nickname:M().optional(),species:M().min(1,"Species is required"),location:M().min(1,"Location is required"),plantEnvironment:ue(["interior","exterior","ambos"]).optional(),lightRequirements:ue(["poca_luz","luz_indirecta","luz_directa_parcial","pleno_sol"]).optional(),healthScore:fn().min(0).max(100),profileImageUrl:M().url().optional(),lastWatered:Qt().optional(),wateringFrequency:fn().positive().optional()});oe({content:M(),emotion:ue(["alegre","triste","enojado","neutral","juguetón","agradecido","happy","sad","excited","worried","grateful"]),mood:M().optional()});oe({changes:re(M()),healthImprovement:fn(),recommendations:re(M()),newHealthScore:fn().min(0).max(100)});Jj.omit({id:!0,dateAdded:!0,chatHistory:!0,notifications:!0}).partial({images:!0,healthScore:!0,careProfile:!0,personality:!0});const tP=oe({fullName:M().min(3,"El nombre debe tener al menos 3 caracteres"),email:M().email("Email inválido"),password:M().min(6,"La contraseña debe tener al menos 6 caracteres"),confirmPassword:M().min(6)}).refine(e=>e.password===e.confirmPassword,{message:"Las contraseñas no coinciden",path:["confirmPassword"]}),rP=oe({email:M().email(),password:M().min(1,"Password is required")}),nP=oe({id:M().min(1,"Message ID is required"),sender:ue(["user","ai"]),content:M().min(1,"Message content cannot be empty"),timestamp:Qt(),context:oe({plantsAnalyzed:re(M()).optional(),queryType:ue(["general","health_analysis","care_comparison","disease_prevention","growth_tracking"]).optional(),insights:re(oe({type:ue(["tip","warning","observation","recommendation"]),title:M(),description:M(),affectedPlants:re(M()).optional()})).optional(),suggestedActions:re(oe({action:M(),priority:ue(["low","medium","high"]),plantIds:re(M()).optional()})).optional()}).optional()}),aP=oe({totalPlants:fn(),plantsData:re(eP),averageHealthScore:fn(),commonIssues:re(M()),careScheduleSummary:oe({needsWatering:re(M()),needsFertilizing:re(M()),healthConcerns:re(M())}),environmentalFactors:oe({locations:re(M()),lightConditions:re(M()),humidityNeeds:re(M())})});oe({id:M().uuid(),userId:M().uuid(),messages:re(nP),createdAt:Qt(),updatedAt:Qt(),context:aP.optional()});oe({content:M().min(1),insights:re(oe({type:ue(["tip","warning","observation","recommendation"]),title:M(),description:M(),affectedPlants:re(M()).optional()})).optional(),suggestedActions:re(oe({action:M(),priority:ue(["low","medium","high"]),plantIds:re(M()).optional()})).optional()});let ys=null;const yr=Yl((e,t)=>({user:null,profile:null,session:null,isLoading:!1,error:null,isInitialized:!1,initialize:async()=>{ys?.subscription&&ys.subscription.unsubscribe();try{const{data:{session:n},error:a}=await he.auth.getSession();if(a)throw new Error("Error al obtener la sesión inicial.");if(e({session:n,user:n?.user??null}),n?.user){const{data:i,error:o}=await he.from("profiles").select("*").eq("id",n.user.id).single();if(o)throw o;e({profile:i})}else e({profile:null})}catch(n){console.error("Error durante la inicialización:",n.message),e({error:"Error durante la inicialización."})}finally{e({isInitialized:!0})}const{data:r}=he.auth.onAuthStateChange(async(n,a)=>{if(e({session:a,user:a?.user??null,isLoading:!1}),n==="SIGNED_OUT"){e({profile:null});return}if(a?.user)try{const{data:i,error:o}=await he.from("profiles").select("*").eq("id",a.user.id).single();if(o)throw o;e({profile:i})}catch(i){console.error("Error fetching profile on auth change:",i)}});ys=r},signIn:async r=>{e({isLoading:!0,error:null});try{const{email:n,password:a}=rP.parse(r),{error:i}=await he.auth.signInWithPassword({email:n,password:a});if(i)throw i}catch(n){const a=n.message.includes("Invalid login credentials")?"Credenciales inválidas.":"Error al iniciar sesión.";throw e({error:a}),console.error(n),n}finally{e({isLoading:!1})}},signUp:async r=>{e({isLoading:!0,error:null});try{const{email:n,password:a,fullName:i}=tP.parse(r),{error:o}=await he.auth.signUp({email:n,password:a,options:{data:{full_name:i}}});if(o)throw o}catch(n){const a=n.message.includes("already registered")?"El usuario ya está registrado.":"Error al registrarse.";throw e({error:a}),console.error(n),n}finally{e({isLoading:!1})}},signOut:async()=>{e({isLoading:!0}),In.clearAll();const{error:r}=await he.auth.signOut();r&&(console.error("Error signing out:",r),e({error:"Error al cerrar sesión.",isLoading:!1})),e({session:null,user:null,profile:null,isLoading:!1})},clearError:()=>e({error:null})}));function iP(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}const oP=e=>{switch(e){case"success":return cP;case"info":return dP;case"warning":return uP;case"error":return fP;default:return null}},sP=Array(12).fill(0),lP=({visible:e,className:t})=>I.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},I.createElement("div",{className:"sonner-spinner"},sP.map((r,n)=>I.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),cP=I.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},I.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),uP=I.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},I.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),dP=I.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},I.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),fP=I.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},I.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),mP=I.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},I.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),I.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),hP=()=>{const[e,t]=I.useState(document.hidden);return I.useEffect(()=>{const r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e};let Ys=1;class pP{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const r=this.subscribers.indexOf(t);this.subscribers.splice(r,1)}),this.publish=t=>{this.subscribers.forEach(r=>r(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var r;const{message:n,...a}=t,i=typeof t?.id=="number"||((r=t.id)==null?void 0:r.length)>0?t.id:Ys++,o=this.toasts.find(l=>l.id===i),s=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...t,id:i,title:n}),{...l,...t,id:i,dismissible:s,title:n}):l):this.addToast({title:n,...a,dismissible:s,id:i}),i},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(r=>r({id:t,dismiss:!0})))):this.toasts.forEach(r=>{this.subscribers.forEach(n=>n({id:r.id,dismiss:!0}))}),t),this.message=(t,r)=>this.create({...r,message:t}),this.error=(t,r)=>this.create({...r,message:t,type:"error"}),this.success=(t,r)=>this.create({...r,type:"success",message:t}),this.info=(t,r)=>this.create({...r,type:"info",message:t}),this.warning=(t,r)=>this.create({...r,type:"warning",message:t}),this.loading=(t,r)=>this.create({...r,type:"loading",message:t}),this.promise=(t,r)=>{if(!r)return;let n;r.loading!==void 0&&(n=this.create({...r,promise:t,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));const a=Promise.resolve(t instanceof Function?t():t);let i=n!==void 0,o;const s=a.then(async u=>{if(o=["resolve",u],I.isValidElement(u))i=!1,this.create({id:n,type:"default",message:u});else if(vP(u)&&!u.ok){i=!1;const f=typeof r.error=="function"?await r.error(`HTTP error! status: ${u.status}`):r.error,m=typeof r.description=="function"?await r.description(`HTTP error! status: ${u.status}`):r.description,p=typeof f=="object"&&!I.isValidElement(f)?f:{message:f};this.create({id:n,type:"error",description:m,...p})}else if(u instanceof Error){i=!1;const f=typeof r.error=="function"?await r.error(u):r.error,m=typeof r.description=="function"?await r.description(u):r.description,p=typeof f=="object"&&!I.isValidElement(f)?f:{message:f};this.create({id:n,type:"error",description:m,...p})}else if(r.success!==void 0){i=!1;const f=typeof r.success=="function"?await r.success(u):r.success,m=typeof r.description=="function"?await r.description(u):r.description,p=typeof f=="object"&&!I.isValidElement(f)?f:{message:f};this.create({id:n,type:"success",description:m,...p})}}).catch(async u=>{if(o=["reject",u],r.error!==void 0){i=!1;const d=typeof r.error=="function"?await r.error(u):r.error,f=typeof r.description=="function"?await r.description(u):r.description,h=typeof d=="object"&&!I.isValidElement(d)?d:{message:d};this.create({id:n,type:"error",description:f,...h})}}).finally(()=>{i&&(this.dismiss(n),n=void 0),r.finally==null||r.finally.call(r)}),l=()=>new Promise((u,d)=>s.then(()=>o[0]==="reject"?d(o[1]):u(o[1])).catch(d));return typeof n!="string"&&typeof n!="number"?{unwrap:l}:Object.assign(n,{unwrap:l})},this.custom=(t,r)=>{const n=r?.id||Ys++;return this.create({jsx:t(n),id:n,...r}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const st=new pP,gP=(e,t)=>{const r=t?.id||Ys++;return st.addToast({title:e,...t,id:r}),r},vP=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",yP=gP,xP=()=>st.toasts,bP=()=>st.getActiveToasts(),tp=Object.assign(yP,{success:st.success,info:st.info,warning:st.warning,error:st.error,custom:st.custom,message:st.message,promise:st.promise,dismiss:st.dismiss,loading:st.loading},{getHistory:xP,getToasts:bP});iP("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function fi(e){return e.label!==void 0}const wP=3,jP="24px",PP="16px",wd=4e3,SP=356,NP=14,_P=45,kP=200;function Kt(...e){return e.filter(Boolean).join(" ")}function EP(e){const[t,r]=e.split("-"),n=[];return t&&n.push(t),r&&n.push(r),n}const AP=e=>{var t,r,n,a,i,o,s,l,u;const{invert:d,toast:f,unstyled:m,interacting:h,setHeights:p,visibleToasts:v,heights:g,index:x,toasts:b,expanded:w,removeToast:j,defaultRichColors:P,closeButton:S,style:N,cancelButtonStyle:C,actionButtonStyle:T,className:R="",descriptionClassName:k="",duration:O,position:B,gap:Z,expandByDefault:V,classNames:F,icons:q,closeButtonAriaLabel:ee="Close toast"}=e,[te,_e]=I.useState(null),[K,$]=I.useState(null),[Y,Ce]=I.useState(!1),[Oe,be]=I.useState(!1),[Zr,Sr]=I.useState(!1),[z,X]=I.useState(!1),[ae,D]=I.useState(!1),[Xe,se]=I.useState(0),[rt,Qe]=I.useState(0),ht=I.useRef(f.duration||O||wd),ta=I.useRef(null),rr=I.useRef(null),lx=x===0,cx=x+1<=v,pt=f.type,Sn=f.dismissible!==!1,ux=f.className||"",dx=f.descriptionClassName||"",ii=I.useMemo(()=>g.findIndex(Q=>Q.toastId===f.id)||0,[g,f.id]),fx=I.useMemo(()=>{var Q;return(Q=f.closeButton)!=null?Q:S},[f.closeButton,S]),Fu=I.useMemo(()=>f.duration||O||wd,[f.duration,O]),ps=I.useRef(0),Nn=I.useRef(0),Bu=I.useRef(0),_n=I.useRef(null),[mx,hx]=B.split("-"),Uu=I.useMemo(()=>g.reduce((Q,ze,Je)=>Je>=ii?Q:Q+ze.height,0),[g,ii]),Wu=hP(),px=f.invert||d,gs=pt==="loading";Nn.current=I.useMemo(()=>ii*Z+Uu,[ii,Uu]),I.useEffect(()=>{ht.current=Fu},[Fu]),I.useEffect(()=>{Ce(!0)},[]),I.useEffect(()=>{const Q=rr.current;if(Q){const ze=Q.getBoundingClientRect().height;return Qe(ze),p(Je=>[{toastId:f.id,height:ze,position:f.position},...Je]),()=>p(Je=>Je.filter(gt=>gt.toastId!==f.id))}},[p,f.id]),I.useLayoutEffect(()=>{if(!Y)return;const Q=rr.current,ze=Q.style.height;Q.style.height="auto";const Je=Q.getBoundingClientRect().height;Q.style.height=ze,Qe(Je),p(gt=>gt.find(We=>We.toastId===f.id)?gt.map(We=>We.toastId===f.id?{...We,height:Je}:We):[{toastId:f.id,height:Je,position:f.position},...gt])},[Y,f.title,f.description,p,f.id,f.jsx,f.action,f.cancel]);const Nr=I.useCallback(()=>{be(!0),se(Nn.current),p(Q=>Q.filter(ze=>ze.toastId!==f.id)),setTimeout(()=>{j(f)},kP)},[f,j,p,Nn]);I.useEffect(()=>{if(f.promise&&pt==="loading"||f.duration===1/0||f.type==="loading")return;let Q;return w||h||Wu?(()=>{if(Bu.current<ps.current){const gt=new Date().getTime()-ps.current;ht.current=ht.current-gt}Bu.current=new Date().getTime()})():(()=>{ht.current!==1/0&&(ps.current=new Date().getTime(),Q=setTimeout(()=>{f.onAutoClose==null||f.onAutoClose.call(f,f),Nr()},ht.current))})(),()=>clearTimeout(Q)},[w,h,f,pt,Wu,Nr]),I.useEffect(()=>{f.delete&&(Nr(),f.onDismiss==null||f.onDismiss.call(f,f))},[Nr,f.delete]);function gx(){var Q;if(q?.loading){var ze;return I.createElement("div",{className:Kt(F?.loader,f==null||(ze=f.classNames)==null?void 0:ze.loader,"sonner-loader"),"data-visible":pt==="loading"},q.loading)}return I.createElement(lP,{className:Kt(F?.loader,f==null||(Q=f.classNames)==null?void 0:Q.loader),visible:pt==="loading"})}const vx=f.icon||q?.[pt]||oP(pt);var Hu,qu;return I.createElement("li",{tabIndex:0,ref:rr,className:Kt(R,ux,F?.toast,f==null||(t=f.classNames)==null?void 0:t.toast,F?.default,F?.[pt],f==null||(r=f.classNames)==null?void 0:r[pt]),"data-sonner-toast":"","data-rich-colors":(Hu=f.richColors)!=null?Hu:P,"data-styled":!(f.jsx||f.unstyled||m),"data-mounted":Y,"data-promise":!!f.promise,"data-swiped":ae,"data-removed":Oe,"data-visible":cx,"data-y-position":mx,"data-x-position":hx,"data-index":x,"data-front":lx,"data-swiping":Zr,"data-dismissible":Sn,"data-type":pt,"data-invert":px,"data-swipe-out":z,"data-swipe-direction":K,"data-expanded":!!(w||V&&Y),style:{"--index":x,"--toasts-before":x,"--z-index":b.length-x,"--offset":`${Oe?Xe:Nn.current}px`,"--initial-height":V?"auto":`${rt}px`,...N,...f.style},onDragEnd:()=>{Sr(!1),_e(null),_n.current=null},onPointerDown:Q=>{Q.button!==2&&(gs||!Sn||(ta.current=new Date,se(Nn.current),Q.target.setPointerCapture(Q.pointerId),Q.target.tagName!=="BUTTON"&&(Sr(!0),_n.current={x:Q.clientX,y:Q.clientY})))},onPointerUp:()=>{var Q,ze,Je;if(z||!Sn)return;_n.current=null;const gt=Number(((Q=rr.current)==null?void 0:Q.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),oi=Number(((ze=rr.current)==null?void 0:ze.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),We=new Date().getTime()-((Je=ta.current)==null?void 0:Je.getTime()),Et=te==="x"?gt:oi,si=Math.abs(Et)/We;if(Math.abs(Et)>=_P||si>.11){se(Nn.current),f.onDismiss==null||f.onDismiss.call(f,f),$(te==="x"?gt>0?"right":"left":oi>0?"down":"up"),Nr(),X(!0);return}else{var Rt,Lt;(Rt=rr.current)==null||Rt.style.setProperty("--swipe-amount-x","0px"),(Lt=rr.current)==null||Lt.style.setProperty("--swipe-amount-y","0px")}D(!1),Sr(!1),_e(null)},onPointerMove:Q=>{var ze,Je,gt;if(!_n.current||!Sn||((ze=window.getSelection())==null?void 0:ze.toString().length)>0)return;const We=Q.clientY-_n.current.y,Et=Q.clientX-_n.current.x;var si;const Rt=(si=e.swipeDirections)!=null?si:EP(B);!te&&(Math.abs(Et)>1||Math.abs(We)>1)&&_e(Math.abs(Et)>Math.abs(We)?"x":"y");let Lt={x:0,y:0};const Zu=Kr=>1/(1.5+Math.abs(Kr)/20);if(te==="y"){if(Rt.includes("top")||Rt.includes("bottom"))if(Rt.includes("top")&&We<0||Rt.includes("bottom")&&We>0)Lt.y=We;else{const Kr=We*Zu(We);Lt.y=Math.abs(Kr)<Math.abs(We)?Kr:We}}else if(te==="x"&&(Rt.includes("left")||Rt.includes("right")))if(Rt.includes("left")&&Et<0||Rt.includes("right")&&Et>0)Lt.x=Et;else{const Kr=Et*Zu(Et);Lt.x=Math.abs(Kr)<Math.abs(Et)?Kr:Et}(Math.abs(Lt.x)>0||Math.abs(Lt.y)>0)&&D(!0),(Je=rr.current)==null||Je.style.setProperty("--swipe-amount-x",`${Lt.x}px`),(gt=rr.current)==null||gt.style.setProperty("--swipe-amount-y",`${Lt.y}px`)}},fx&&!f.jsx&&pt!=="loading"?I.createElement("button",{"aria-label":ee,"data-disabled":gs,"data-close-button":!0,onClick:gs||!Sn?()=>{}:()=>{Nr(),f.onDismiss==null||f.onDismiss.call(f,f)},className:Kt(F?.closeButton,f==null||(n=f.classNames)==null?void 0:n.closeButton)},(qu=q?.close)!=null?qu:mP):null,(pt||f.icon||f.promise)&&f.icon!==null&&(q?.[pt]!==null||f.icon)?I.createElement("div",{"data-icon":"",className:Kt(F?.icon,f==null||(a=f.classNames)==null?void 0:a.icon)},f.promise||f.type==="loading"&&!f.icon?f.icon||gx():null,f.type!=="loading"?vx:null):null,I.createElement("div",{"data-content":"",className:Kt(F?.content,f==null||(i=f.classNames)==null?void 0:i.content)},I.createElement("div",{"data-title":"",className:Kt(F?.title,f==null||(o=f.classNames)==null?void 0:o.title)},f.jsx?f.jsx:typeof f.title=="function"?f.title():f.title),f.description?I.createElement("div",{"data-description":"",className:Kt(k,dx,F?.description,f==null||(s=f.classNames)==null?void 0:s.description)},typeof f.description=="function"?f.description():f.description):null),I.isValidElement(f.cancel)?f.cancel:f.cancel&&fi(f.cancel)?I.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||C,onClick:Q=>{fi(f.cancel)&&Sn&&(f.cancel.onClick==null||f.cancel.onClick.call(f.cancel,Q),Nr())},className:Kt(F?.cancelButton,f==null||(l=f.classNames)==null?void 0:l.cancelButton)},f.cancel.label):null,I.isValidElement(f.action)?f.action:f.action&&fi(f.action)?I.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||T,onClick:Q=>{fi(f.action)&&(f.action.onClick==null||f.action.onClick.call(f.action,Q),!Q.defaultPrevented&&Nr())},className:Kt(F?.actionButton,f==null||(u=f.classNames)==null?void 0:u.actionButton)},f.action.label):null)};function jd(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function CP(e,t){const r={};return[e,t].forEach((n,a)=>{const i=a===1,o=i?"--mobile-offset":"--offset",s=i?PP:jP;function l(u){["top","right","bottom","left"].forEach(d=>{r[`${o}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof n=="number"||typeof n=="string"?l(n):typeof n=="object"?["top","right","bottom","left"].forEach(u=>{n[u]===void 0?r[`${o}-${u}`]=s:r[`${o}-${u}`]=typeof n[u]=="number"?`${n[u]}px`:n[u]}):l(s)}),r}const OP=I.forwardRef(function(t,r){const{invert:n,position:a="bottom-right",hotkey:i=["altKey","KeyT"],expand:o,closeButton:s,className:l,offset:u,mobileOffset:d,theme:f="light",richColors:m,duration:h,style:p,visibleToasts:v=wP,toastOptions:g,dir:x=jd(),gap:b=NP,icons:w,containerAriaLabel:j="Notifications"}=t,[P,S]=I.useState([]),N=I.useMemo(()=>Array.from(new Set([a].concat(P.filter(K=>K.position).map(K=>K.position)))),[P,a]),[C,T]=I.useState([]),[R,k]=I.useState(!1),[O,B]=I.useState(!1),[Z,V]=I.useState(f!=="system"?f:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),F=I.useRef(null),q=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),ee=I.useRef(null),te=I.useRef(!1),_e=I.useCallback(K=>{S($=>{var Y;return(Y=$.find(Ce=>Ce.id===K.id))!=null&&Y.delete||st.dismiss(K.id),$.filter(({id:Ce})=>Ce!==K.id)})},[]);return I.useEffect(()=>st.subscribe(K=>{if(K.dismiss){requestAnimationFrame(()=>{S($=>$.map(Y=>Y.id===K.id?{...Y,delete:!0}:Y))});return}setTimeout(()=>{yx.flushSync(()=>{S($=>{const Y=$.findIndex(Ce=>Ce.id===K.id);return Y!==-1?[...$.slice(0,Y),{...$[Y],...K},...$.slice(Y+1)]:[K,...$]})})})}),[P]),I.useEffect(()=>{if(f!=="system"){V(f);return}if(f==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?V("dark"):V("light")),typeof window>"u")return;const K=window.matchMedia("(prefers-color-scheme: dark)");try{K.addEventListener("change",({matches:$})=>{V($?"dark":"light")})}catch{K.addListener(({matches:Y})=>{try{V(Y?"dark":"light")}catch(Ce){console.error(Ce)}})}},[f]),I.useEffect(()=>{P.length<=1&&k(!1)},[P]),I.useEffect(()=>{const K=$=>{var Y;if(i.every(be=>$[be]||$.code===be)){var Oe;k(!0),(Oe=F.current)==null||Oe.focus()}$.code==="Escape"&&(document.activeElement===F.current||(Y=F.current)!=null&&Y.contains(document.activeElement))&&k(!1)};return document.addEventListener("keydown",K),()=>document.removeEventListener("keydown",K)},[i]),I.useEffect(()=>{if(F.current)return()=>{ee.current&&(ee.current.focus({preventScroll:!0}),ee.current=null,te.current=!1)}},[F.current]),I.createElement("section",{ref:r,"aria-label":`${j} ${q}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},N.map((K,$)=>{var Y;const[Ce,Oe]=K.split("-");return P.length?I.createElement("ol",{key:K,dir:x==="auto"?jd():x,tabIndex:-1,ref:F,className:l,"data-sonner-toaster":!0,"data-sonner-theme":Z,"data-y-position":Ce,"data-x-position":Oe,style:{"--front-toast-height":`${((Y=C[0])==null?void 0:Y.height)||0}px`,"--width":`${SP}px`,"--gap":`${b}px`,...p,...CP(u,d)},onBlur:be=>{te.current&&!be.currentTarget.contains(be.relatedTarget)&&(te.current=!1,ee.current&&(ee.current.focus({preventScroll:!0}),ee.current=null))},onFocus:be=>{be.target instanceof HTMLElement&&be.target.dataset.dismissible==="false"||te.current||(te.current=!0,ee.current=be.relatedTarget)},onMouseEnter:()=>k(!0),onMouseMove:()=>k(!0),onMouseLeave:()=>{O||k(!1)},onDragEnd:()=>k(!1),onPointerDown:be=>{be.target instanceof HTMLElement&&be.target.dataset.dismissible==="false"||B(!0)},onPointerUp:()=>B(!1)},P.filter(be=>!be.position&&$===0||be.position===K).map((be,Zr)=>{var Sr,z;return I.createElement(AP,{key:be.id,icons:w,index:Zr,toast:be,defaultRichColors:m,duration:(Sr=g?.duration)!=null?Sr:h,className:g?.className,descriptionClassName:g?.descriptionClassName,invert:n,visibleToasts:v,closeButton:(z=g?.closeButton)!=null?z:s,interacting:O,position:K,style:g?.style,unstyled:g?.unstyled,classNames:g?.classNames,cancelButtonStyle:g?.cancelButtonStyle,actionButtonStyle:g?.actionButtonStyle,closeButtonAriaLabel:g?.closeButtonAriaLabel,removeToast:_e,toasts:P.filter(X=>X.position==be.position),heights:C.filter(X=>X.position==be.position),setHeights:T,expandByDefault:o,gap:b,expanded:R,swipeDirections:t.swipeDirections})})):null}))});class TP{listeners=new Set;subscribe(t){return this.listeners.add(t),()=>{this.listeners.delete(t)}}emit(t){this.listeners.forEach(r=>r(t))}success(t,r,n){this.emit({type:"success",title:t,message:r,duration:n})}error(t,r,n){this.emit({type:"error",title:t,message:r,duration:n})}warning(t,r,n){this.emit({type:"warning",title:t,message:r,duration:n})}info(t,r,n){this.emit({type:"info",title:t,message:r,duration:n})}}const No=new TP,rp=y.createContext(void 0),Zn=()=>{const e=y.useContext(rp);if(!e)throw new Error("useToast must be used within a ToastProvider");return e},IP=e=>{switch(e){case"success":return c.jsx(Dr,{size:20,className:"text-green-500"});case"error":return c.jsx(Wt,{size:20,className:"text-red-500"});case"warning":return c.jsx(zr,{size:20,className:"text-yellow-500"});case"info":return c.jsx(hh,{size:20,className:"text-blue-500"})}},DP=e=>{switch(e){case"success":return"border-green-200 bg-green-50 dark:bg-green-900/20 dark:border-green-800";case"error":return"border-red-200 bg-red-50 dark:bg-red-900/20 dark:border-red-800";case"warning":return"border-yellow-200 bg-yellow-50 dark:bg-yellow-900/20 dark:border-yellow-800";case"info":return"border-blue-200 bg-blue-50 dark:bg-blue-900/20 dark:border-blue-800"}},MP=({children:e})=>{const[t,r]=y.useState([]),n=y.useCallback(o=>{const s=`toast-${Date.now()}-${Math.random()}`,l={id:s,duration:5e3,...o};r(u=>[...u,l]),l.duration!==0&&setTimeout(()=>{a(s)},l.duration)},[]);y.useEffect(()=>No.subscribe(s=>{n(s)}),[n]);const a=y.useCallback(o=>{r(s=>s.filter(l=>l.id!==o))},[]),i=y.useCallback(()=>{r([])},[]);return c.jsxs(rp.Provider,{value:{toasts:t,addToast:n,removeToast:a,clearToasts:i},children:[e,c.jsx($P,{})]})},$P=()=>{const{toasts:e,removeToast:t}=Zn();return c.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:c.jsx(pe,{children:e.map(r=>c.jsx(_.div,{initial:{opacity:0,x:300,scale:.8},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:300,scale:.8},transition:{type:"spring",damping:25,stiffness:300},className:`max-w-sm w-full rounded-lg border p-4 shadow-lg ${DP(r.type)}`,role:"alert","aria-live":"assertive",tabIndex:0,children:c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx("div",{className:"flex-shrink-0 mt-0.5",children:IP(r.type)}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:r.title}),r.message&&c.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:r.message})]}),c.jsx("button",{onClick:()=>t(r.id),className:"flex-shrink-0 ml-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors","aria-label":"Cerrar notificación",children:c.jsx(xo,{size:16})})]})},r.id))})})},Cr={QUERY:{STALE_TIME:{MEDIUM:1e3*60*15},GC_TIME:{MEDIUM:1e3*60*30,LONG:1e3*60*60},RETRY:{COUNT:1,DELAY:1e3}}},na={measureTime:async(e,t)=>typeof t=="function"?await t():t,markStart:e=>{},markEnd:e=>{},debounce:(e,t)=>{let r;return(...n)=>{clearTimeout(r),r=setTimeout(()=>e.apply(void 0,n),t)}},throttle:(e,t)=>{let r;return(...n)=>{r||(e.apply(void 0,n),r=!0,setTimeout(()=>r=!1,t))}}},zP=()=>(y.useEffect(()=>{},[]),{measureTime:na.measureTime,markStart:na.markStart,markEnd:na.markEnd,debounce:na.debounce,throttle:na.throttle});function np(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=np(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function de(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=np(e))&&(n&&(n+=" "),n+=t);return n}const ac="-",RP=e=>{const t=FP(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{const s=o.split(ac);return s[0]===""&&s.length!==1&&s.shift(),ap(s,t)||LP(o)},getConflictingClassGroupIds:(o,s)=>{const l=r[o]||[];return s&&n[o]?[...l,...n[o]]:l}}},ap=(e,t)=>{if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),a=n?ap(e.slice(1),n):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(ac);return t.validators.find(({validator:o})=>o(i))?.classGroupId},Pd=/^\[(.+)\]$/,LP=e=>{if(Pd.test(e)){const t=Pd.exec(e)[1],r=t?.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},FP=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return UP(Object.entries(e.classGroups),r).forEach(([i,o])=>{Xs(o,n,i,t)}),n},Xs=(e,t,r,n)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:Sd(t,a);i.classGroupId=r;return}if(typeof a=="function"){if(BP(a)){Xs(a(n),t,r,n);return}t.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([i,o])=>{Xs(o,Sd(t,i),r,n)})})},Sd=(e,t)=>{let r=e;return t.split(ac).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},BP=e=>e.isThemeGetter,UP=(e,t)=>t?e.map(([r,n])=>{const a=n.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,s])=>[t+o,s])):i);return[r,a]}):e,WP=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const a=(i,o)=>{r.set(i,o),t++,t>e&&(t=0,n=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return a(i,o),o},set(i,o){r.has(i)?r.set(i,o):a(i,o)}}},ip="!",HP=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,a=t[0],i=t.length,o=s=>{const l=[];let u=0,d=0,f;for(let g=0;g<s.length;g++){let x=s[g];if(u===0){if(x===a&&(n||s.slice(g,g+i)===t)){l.push(s.slice(d,g)),d=g+i;continue}if(x==="/"){f=g;continue}}x==="["?u++:x==="]"&&u--}const m=l.length===0?s:s.substring(d),h=m.startsWith(ip),p=h?m.substring(1):m,v=f&&f>d?f-d:void 0;return{modifiers:l,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:v}};return r?s=>r({className:s,parseClassName:o}):o},qP=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},ZP=e=>({cache:WP(e.cacheSize),parseClassName:HP(e),...RP(e)}),KP=/\s+/,GP=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a}=t,i=[],o=e.trim().split(KP);let s="";for(let l=o.length-1;l>=0;l-=1){const u=o[l],{modifiers:d,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:h}=r(u);let p=!!h,v=n(p?m.substring(0,h):m);if(!v){if(!p){s=u+(s.length>0?" "+s:s);continue}if(v=n(m),!v){s=u+(s.length>0?" "+s:s);continue}p=!1}const g=qP(d).join(":"),x=f?g+ip:g,b=x+v;if(i.includes(b))continue;i.push(b);const w=a(v,p);for(let j=0;j<w.length;++j){const P=w[j];i.push(x+P)}s=u+(s.length>0?" "+s:s)}return s};function VP(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=op(t))&&(n&&(n+=" "),n+=r);return n}const op=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=op(e[n]))&&(r&&(r+=" "),r+=t);return r};function YP(e,...t){let r,n,a,i=o;function o(l){const u=t.reduce((d,f)=>f(d),e());return r=ZP(u),n=r.cache.get,a=r.cache.set,i=s,s(l)}function s(l){const u=n(l);if(u)return u;const d=GP(l,r);return a(l,d),d}return function(){return i(VP.apply(null,arguments))}}const ge=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},sp=/^\[(?:([a-z-]+):)?(.+)\]$/i,XP=/^\d+\/\d+$/,QP=new Set(["px","full","screen"]),JP=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,eS=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,tS=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,rS=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,nS=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,nr=e=>Dn(e)||QP.has(e)||XP.test(e),_r=e=>Kn(e,"length",dS),Dn=e=>!!e&&!Number.isNaN(Number(e)),xs=e=>Kn(e,"number",Dn),aa=e=>!!e&&Number.isInteger(Number(e)),aS=e=>e.endsWith("%")&&Dn(e.slice(0,-1)),J=e=>sp.test(e),kr=e=>JP.test(e),iS=new Set(["length","size","percentage"]),oS=e=>Kn(e,iS,lp),sS=e=>Kn(e,"position",lp),lS=new Set(["image","url"]),cS=e=>Kn(e,lS,mS),uS=e=>Kn(e,"",fS),ia=()=>!0,Kn=(e,t,r)=>{const n=sp.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},dS=e=>eS.test(e)&&!tS.test(e),lp=()=>!1,fS=e=>rS.test(e),mS=e=>nS.test(e),hS=()=>{const e=ge("colors"),t=ge("spacing"),r=ge("blur"),n=ge("brightness"),a=ge("borderColor"),i=ge("borderRadius"),o=ge("borderSpacing"),s=ge("borderWidth"),l=ge("contrast"),u=ge("grayscale"),d=ge("hueRotate"),f=ge("invert"),m=ge("gap"),h=ge("gradientColorStops"),p=ge("gradientColorStopPositions"),v=ge("inset"),g=ge("margin"),x=ge("opacity"),b=ge("padding"),w=ge("saturate"),j=ge("scale"),P=ge("sepia"),S=ge("skew"),N=ge("space"),C=ge("translate"),T=()=>["auto","contain","none"],R=()=>["auto","hidden","clip","visible","scroll"],k=()=>["auto",J,t],O=()=>[J,t],B=()=>["",nr,_r],Z=()=>["auto",Dn,J],V=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],F=()=>["solid","dashed","dotted","double","none"],q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ee=()=>["start","end","center","between","around","evenly","stretch"],te=()=>["","0",J],_e=()=>["auto","avoid","all","avoid-page","page","left","right","column"],K=()=>[Dn,J];return{cacheSize:500,separator:":",theme:{colors:[ia],spacing:[nr,_r],blur:["none","",kr,J],brightness:K(),borderColor:[e],borderRadius:["none","","full",kr,J],borderSpacing:O(),borderWidth:B(),contrast:K(),grayscale:te(),hueRotate:K(),invert:te(),gap:O(),gradientColorStops:[e],gradientColorStopPositions:[aS,_r],inset:k(),margin:k(),opacity:K(),padding:O(),saturate:K(),scale:K(),sepia:te(),skew:K(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",J]}],container:["container"],columns:[{columns:[kr]}],"break-after":[{"break-after":_e()}],"break-before":[{"break-before":_e()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...V(),J]}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",aa,J]}],basis:[{basis:k()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",J]}],grow:[{grow:te()}],shrink:[{shrink:te()}],order:[{order:["first","last","none",aa,J]}],"grid-cols":[{"grid-cols":[ia]}],"col-start-end":[{col:["auto",{span:["full",aa,J]},J]}],"col-start":[{"col-start":Z()}],"col-end":[{"col-end":Z()}],"grid-rows":[{"grid-rows":[ia]}],"row-start-end":[{row:["auto",{span:[aa,J]},J]}],"row-start":[{"row-start":Z()}],"row-end":[{"row-end":Z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",J]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",J]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...ee()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...ee(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...ee(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",J,t]}],"min-w":[{"min-w":[J,t,"min","max","fit"]}],"max-w":[{"max-w":[J,t,"none","full","min","max","fit","prose",{screen:[kr]},kr]}],h:[{h:[J,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[J,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[J,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[J,t,"auto","min","max","fit"]}],"font-size":[{text:["base",kr,_r]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",xs]}],"font-family":[{font:[ia]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",J]}],"line-clamp":[{"line-clamp":["none",Dn,xs]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",nr,J]}],"list-image":[{"list-image":["none",J]}],"list-style-type":[{list:["none","disc","decimal",J]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...F(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",nr,_r]}],"underline-offset":[{"underline-offset":["auto",nr,J]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",J]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",J]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...V(),sS]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",oS]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},cS]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[h]}],"gradient-via":[{via:[h]}],"gradient-to":[{to:[h]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[s]}],"border-w-x":[{"border-x":[s]}],"border-w-y":[{"border-y":[s]}],"border-w-s":[{"border-s":[s]}],"border-w-e":[{"border-e":[s]}],"border-w-t":[{"border-t":[s]}],"border-w-r":[{"border-r":[s]}],"border-w-b":[{"border-b":[s]}],"border-w-l":[{"border-l":[s]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...F(),"hidden"]}],"divide-x":[{"divide-x":[s]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[s]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:F()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...F()]}],"outline-offset":[{"outline-offset":[nr,J]}],"outline-w":[{outline:[nr,_r]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:B()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[nr,_r]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",kr,uS]}],"shadow-color":[{shadow:[ia]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...q(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":q()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",kr,J]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[w]}],sepia:[{sepia:[P]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[P]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",J]}],duration:[{duration:K()}],ease:[{ease:["linear","in","out","in-out",J]}],delay:[{delay:K()}],animate:[{animate:["none","spin","ping","pulse","bounce",J]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[aa,J]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",J]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",J]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",J]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[nr,_r,xs]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},pS=YP(hS);function ce(...e){return pS(de(e))}const Le={auth:"/auth",dashboard:"/",camera:"/camera",settings:"/settings",gardenChat:"/garden-chat",plantDetail:e=>`/plant/${e}`,plantChat:e=>`/plant/${e}/chat`},it={toDashboard:()=>Le.dashboard,toCamera:()=>Le.camera,toSettings:()=>Le.settings,toGardenChat:()=>Le.gardenChat,toPlantDetail:e=>Le.plantDetail(e),toPlantChat:e=>Le.plantChat(e),toAuth:()=>Le.auth},gS=(e,t)=>e===t?!0:t===Le.dashboard?e==="/"||e.startsWith("/plant/"):t===Le.gardenChat?e===Le.gardenChat||e.includes("/chat")||e.includes("/garden-chat"):t===Le.settings?e.startsWith("/settings"):!1;var cp=Symbol.for("immer-nothing"),Nd=Symbol.for("immer-draftable"),St=Symbol.for("immer-state");function Bt(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Rn=Object.getPrototypeOf;function mn(e){return!!e&&!!e[St]}function mr(e){return e?up(e)||Array.isArray(e)||!!e[Nd]||!!e.constructor?.[Nd]||ko(e)||Eo(e):!1}var vS=Object.prototype.constructor.toString();function up(e){if(!e||typeof e!="object")return!1;const t=Rn(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===vS}function Mi(e,t){_o(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function _o(e){const t=e[St];return t?t.type_:Array.isArray(e)?1:ko(e)?2:Eo(e)?3:0}function Qs(e,t){return _o(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function dp(e,t,r){const n=_o(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function yS(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function ko(e){return e instanceof Map}function Eo(e){return e instanceof Set}function Gr(e){return e.copy_||e.base_}function Js(e,t){if(ko(e))return new Map(e);if(Eo(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=up(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[St];let a=Reflect.ownKeys(n);for(let i=0;i<a.length;i++){const o=a[i],s=n[o];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(n[o]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[o]})}return Object.create(Rn(e),n)}else{const n=Rn(e);if(n!==null&&r)return{...e};const a=Object.create(n);return Object.assign(a,e)}}function ic(e,t=!1){return Ao(e)||mn(e)||!mr(e)||(_o(e)>1&&(e.set=e.add=e.clear=e.delete=xS),Object.freeze(e),t&&Object.entries(e).forEach(([r,n])=>ic(n,!0))),e}function xS(){Bt(2)}function Ao(e){return Object.isFrozen(e)}var bS={};function hn(e){const t=bS[e];return t||Bt(0,e),t}var Na;function fp(){return Na}function wS(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function _d(e,t){t&&(hn("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function el(e){tl(e),e.drafts_.forEach(jS),e.drafts_=null}function tl(e){e===Na&&(Na=e.parent_)}function kd(e){return Na=wS(Na,e)}function jS(e){const t=e[St];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Ed(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[St].modified_&&(el(t),Bt(4)),mr(e)&&(e=$i(t,e),t.parent_||zi(t,e)),t.patches_&&hn("Patches").generateReplacementPatches_(r[St].base_,e,t.patches_,t.inversePatches_)):e=$i(t,r,[]),el(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==cp?e:void 0}function $i(e,t,r){if(Ao(t))return t;const n=t[St];if(!n)return Mi(t,(a,i)=>Ad(e,n,t,a,i,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return zi(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const a=n.copy_;let i=a,o=!1;n.type_===3&&(i=new Set(a),a.clear(),o=!0),Mi(i,(s,l)=>Ad(e,n,a,s,l,r,o)),zi(e,a,!1),r&&e.patches_&&hn("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function Ad(e,t,r,n,a,i,o){if(mn(a)){const s=i&&t&&t.type_!==3&&!Qs(t.assigned_,n)?i.concat(n):void 0,l=$i(e,a,s);if(dp(r,n,l),mn(l))e.canAutoFreeze_=!1;else return}else o&&r.add(a);if(mr(a)&&!Ao(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;$i(e,a),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&zi(e,a)}}function zi(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&ic(t,r)}function PS(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:fp(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,i=oc;r&&(a=[n],i=_a);const{revoke:o,proxy:s}=Proxy.revocable(a,i);return n.draft_=s,n.revoke_=o,s}var oc={get(e,t){if(t===St)return e;const r=Gr(e);if(!Qs(r,t))return SS(e,r,t);const n=r[t];return e.finalized_||!mr(n)?n:n===bs(e.base_,t)?(ws(e),e.copy_[t]=nl(n,e)):n},has(e,t){return t in Gr(e)},ownKeys(e){return Reflect.ownKeys(Gr(e))},set(e,t,r){const n=mp(Gr(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const a=bs(Gr(e),t),i=a?.[St];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(yS(r,a)&&(r!==void 0||Qs(e.base_,t)))return!0;ws(e),rl(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return bs(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,ws(e),rl(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Gr(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Bt(11)},getPrototypeOf(e){return Rn(e.base_)},setPrototypeOf(){Bt(12)}},_a={};Mi(oc,(e,t)=>{_a[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});_a.deleteProperty=function(e,t){return _a.set.call(this,e,t,void 0)};_a.set=function(e,t,r){return oc.set.call(this,e[0],t,r,e[0])};function bs(e,t){const r=e[St];return(r?Gr(r):e)[t]}function SS(e,t,r){const n=mp(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function mp(e,t){if(!(t in e))return;let r=Rn(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Rn(r)}}function rl(e){e.modified_||(e.modified_=!0,e.parent_&&rl(e.parent_))}function ws(e){e.copy_||(e.copy_=Js(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var NS=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const o=this;return function(l=i,...u){return o.produce(l,d=>r.call(this,d,...u))}}typeof r!="function"&&Bt(6),n!==void 0&&typeof n!="function"&&Bt(7);let a;if(mr(t)){const i=kd(this),o=nl(t,void 0);let s=!0;try{a=r(o),s=!1}finally{s?el(i):tl(i)}return _d(i,n),Ed(a,i)}else if(!t||typeof t!="object"){if(a=r(t),a===void 0&&(a=t),a===cp&&(a=void 0),this.autoFreeze_&&ic(a,!0),n){const i=[],o=[];hn("Patches").generateReplacementPatches_(t,a,i,o),n(i,o)}return a}else Bt(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(o,...s)=>this.produceWithPatches(o,l=>t(l,...s));let n,a;return[this.produce(t,r,(o,s)=>{n=o,a=s}),n,a]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){mr(e)||Bt(8),mn(e)&&(e=ur(e));const t=kd(this),r=nl(e,void 0);return r[St].isManual_=!0,tl(t),r}finishDraft(e,t){const r=e&&e[St];(!r||!r.isManual_)&&Bt(9);const{scope_:n}=r;return _d(n,t),Ed(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const a=t[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(t=t.slice(r+1));const n=hn("Patches").applyPatches_;return mn(e)?n(e,t):this.produce(e,a=>n(a,t))}};function nl(e,t){const r=ko(e)?hn("MapSet").proxyMap_(e,t):Eo(e)?hn("MapSet").proxySet_(e,t):PS(e,t);return(t?t.scope_:fp()).drafts_.push(r),r}function ur(e){return mn(e)||Bt(10,e),hp(e)}function hp(e){if(!mr(e)||Ao(e))return e;const t=e[St];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Js(e,t.scope_.immer_.useStrictShallowCopy_)}else r=Js(e,!0);return Mi(r,(n,a)=>{dp(r,n,hp(a))}),t&&(t.finalized_=!1),r}var Nt=new NS,ar=Nt.produce;Nt.produceWithPatches.bind(Nt);Nt.setAutoFreeze.bind(Nt);Nt.setUseStrictShallowCopy.bind(Nt);Nt.applyPatches.bind(Nt);Nt.createDraft.bind(Nt);Nt.finishDraft.bind(Nt);let mi;const _S=new Uint8Array(16);function kS(){if(!mi&&(mi=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!mi))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return mi(_S)}const qe=[];for(let e=0;e<256;++e)qe.push((e+256).toString(16).slice(1));function ES(e,t=0){return qe[e[t+0]]+qe[e[t+1]]+qe[e[t+2]]+qe[e[t+3]]+"-"+qe[e[t+4]]+qe[e[t+5]]+"-"+qe[e[t+6]]+qe[e[t+7]]+"-"+qe[e[t+8]]+qe[e[t+9]]+"-"+qe[e[t+10]]+qe[e[t+11]]+qe[e[t+12]]+qe[e[t+13]]+qe[e[t+14]]+qe[e[t+15]]}const AS=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Cd={randomUUID:AS};function CS(e,t,r){if(Cd.randomUUID&&!e)return Cd.randomUUID();e=e||{};const n=e.random||(e.rng||kS)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,ES(n)}const pp=5,OS=pp*1024*1024,gp=e=>{if(!e||typeof e!="string")throw new Error("URL de imagen inválida");const t=e.split(",")[1];if(!t)throw new Error("Formato de imagen inválido");const r=t.length*3/4;if(r>OS){const n=(r/1048576).toFixed(1);throw new Error(`La imagen es demasiado grande (${n}MB). El límite máximo es ${pp}MB. Por favor, usa una imagen más pequeña.`)}console.log(`[imageService] Image size validation passed: ${(r/(1024*1024)).toFixed(2)}MB`)},TS=e=>{if(!e||typeof e!="string")throw new Error("Invalid data URL: input is not a string");if(!e.startsWith("data:"))throw new Error('Invalid data URL: does not start with "data:"');const t=e.split(",");if(t.length!==2)throw new Error("Invalid data URL: incorrect format");const r=t[0].match(/:(.*?);/);if(!r)throw new Error("Invalid data URL: could not extract MIME type");const n=r[1];if(!n.startsWith("image/"))throw new Error(`Invalid data URL: not an image MIME type (${n})`);try{const a=atob(t[1]);let i=a.length;const o=new Uint8Array(i);for(;i--;)o[i]=a.charCodeAt(i);return new Blob([o],{type:n})}catch(a){throw new Error(`Invalid data URL: failed to decode base64 data - ${a instanceof Error?a.message:"Unknown error"}`)}},vp=async(e,t,r)=>{try{gp(e);const n=TS(e),a=n.type.split("/")[1],i=`${r}/${CS()}.${a}`,{error:o}=await he.storage.from(t).upload(i,n,{cacheControl:"3600",upsert:!1});if(o)throw console.error("Error uploading image to Supabase Storage:",o),new Error(`Storage error: ${o.message}`);const{data:s}=he.storage.from(t).getPublicUrl(i);if(!s||!s.publicUrl)throw new Error("Could not get public URL for uploaded image.");return s.publicUrl}catch(n){throw console.error("Failed to upload image:",n),n instanceof Error?new Error(`Image upload failed: ${n.message}`):new Error("An unknown error occurred during image upload.")}},IS=async e=>{try{const{data:{session:t},error:r}=await he.auth.getSession();if(r||!t?.access_token)throw console.error("User session not available:",r),new Error("Usuario no autenticado. Por favor inicia sesión nuevamente.");const{data:n,error:a}=await he.functions.invoke("generate-plant-insights",{body:{plant:e},headers:{Authorization:`Bearer ${t.access_token}`}});if(a)throw new Error(`Failed to generate insights: ${a.message}`);return Vj.parse(n)}catch(t){throw console.error("[insightService] Error generating insights:",t),t instanceof q1?new Error(`Invalid data structure for insights: ${t.message}`):t}},yp=async e=>{gp(e);const{data:{session:t},error:r}=await he.auth.getSession();if(r||!t)throw new Error("User must be authenticated to analyze images");const{data:n,error:a}=await he.functions.invoke("analyze-image",{body:{imageDataUrl:e},headers:{Authorization:`Bearer ${t.access_token}`}});if(a){if(console.error("Error invoking analyze-image function:",a),a.message?.includes("unsupported image"))throw new Error("La imagen no es válida. Por favor, asegúrate de que sea una foto clara de una planta.");if(a.message?.includes("OpenAI API key"))throw new Error("Servicio de análisis temporalmente no disponible. Intenta de nuevo más tarde.");const i=a.context?.msg?JSON.parse(a.context.msg).error:a.message;throw new Error(`Failed to analyze image: ${i}`)}if(n&&n.error)throw console.error("Image analysis failed with a specific error:",n.error),new Error(n.error);return n},Od=async(e,t)=>{const r="cálido, simpático, motivador, y con un toque de humor ligero",n=(e.images||[]).map(m=>({url:m.url,timestamp:m.timestamp instanceof Date?m.timestamp.toISOString():m.timestamp,...m.healthAnalysis?{healthAnalysis:m.healthAnalysis}:{}})).sort((m,h)=>new Date(m.timestamp).getTime()-new Date(h.timestamp).getTime());let a=[];try{a=await IS(e)}catch(m){console.warn("[generatePlantResponse] No se pudieron generar insights para la planta:",m),a=[]}const i={...e,images:n},{data:{session:o},error:s}=await he.auth.getSession();if(s||!o?.access_token)throw console.error("User session not available:",s),new Error("Usuario no autenticado. Por favor inicia sesión nuevamente.");const{data:l,error:u}=await he.functions.invoke("generate-plant-response",{body:{plant:i,userMessage:t,tonePersona:r,insights:a},headers:{Authorization:`Bearer ${o.access_token}`}});if(u)throw console.error("Error calling generate-plant-response function:",u),new Error("Failed to generate plant response: "+u.message);const d=(l?.content||"").toLowerCase();return(!l?.content||d.includes("no sé")||d.includes("no tengo información")||d.includes("no puedo ayudarte")||d.length<20)&&No.warning("Respuesta genérica","La respuesta de la planta fue muy genérica o poco útil. Intenta preguntar de otra forma o proporciona más detalles."),{...l,insights:l?.insights||a||[],suggestedActions:l?.suggestedActions||[]}},DS=async(e,t)=>{const{data:{session:r},error:n}=await he.auth.getSession();if(n||!r?.access_token)throw console.error("User session not available:",n),new Error("Usuario no autenticado. Por favor inicia sesión nuevamente.");const{data:a,error:i}=await he.functions.invoke("complete-plant-info",{body:{species:e,commonName:t},headers:{Authorization:`Bearer ${r.access_token}`}});if(i)throw console.error("💥 [API] Error en complete-plant-info function:",i),new Error("Failed to complete plant info: "+i.message);const o=["interior","exterior","ambos"],s=["poca_luz","luz_indirecta","luz_directa_parcial","pleno_sol"];return{plantEnvironment:o.includes(a.plantEnvironment)?a.plantEnvironment:"interior",lightRequirements:s.includes(a.lightRequirements)?a.lightRequirements:"luz_indirecta",description:a.description||void 0,funFacts:Array.isArray(a.funFacts)?a.funFacts:void 0}},oa=(e,t,r,n)=>({id:e.id,name:e.name,species:e.species,variety:e.variety||void 0,nickname:e.nickname||void 0,description:e.description||void 0,funFacts:e.fun_facts||[],location:e.location,plantEnvironment:e.plant_environment,lightRequirements:e.light_requirements,dateAdded:new Date(e.date_added),lastWatered:e.last_watered?new Date(e.last_watered):void 0,lastFertilized:e.last_fertilized?new Date(e.last_fertilized):void 0,images:t,healthScore:e.health_score||85,careProfile:e.care_profile,personality:e.personality,chatHistory:r,notifications:n});class sc{supabase;constructor(t=he){this.supabase=t}async getUserPlantSummaries(t){try{const{data:r,error:n}=await this.supabase.from("plants").select(`
          id,
          name,
          nickname,
          species,
          location,
          plant_environment,
          light_requirements,
          health_score,
          last_watered,
          care_profile
        `).eq("user_id",t).order("created_at",{ascending:!1});if(n)throw n;let a=new Map;if(r.length>0){const o=r.map(u=>u.id),{data:s,error:l}=await this.supabase.from("plant_images").select("plant_id, url").in("plant_id",o).eq("is_profile_image",!0);l?console.warn("[plantService] Error fetching profile images:",l):a=new Map((s||[]).map(u=>[u.plant_id,u.url]))}return r.map(o=>({id:o.id,name:o.name,nickname:o.nickname||void 0,species:o.species,location:o.location,plantEnvironment:o.plant_environment,lightRequirements:o.light_requirements,healthScore:o.health_score||85,profileImageUrl:a.get(o.id),lastWatered:o.last_watered?new Date(o.last_watered):void 0,wateringFrequency:o.care_profile?.wateringFrequency}))}catch(r){throw console.error("Error fetching plant summaries:",r),r}}async getUserPlants(t){try{const{data:r,error:n}=await this.supabase.from("plants").select(`
          *,
          plant_images ( * ),
          chat_messages ( * ),
          plant_notifications ( * )
        `).eq("user_id",t).order("created_at",{ascending:!1});if(n)throw n;return r.map(i=>{const o=(i.plant_images||[]).map(u=>({id:u.id,url:u.url,timestamp:new Date(u.created_at),healthAnalysis:u.health_analysis,isProfileImage:u.is_profile_image||!1})),s=(i.chat_messages||[]).map(u=>({id:u.id,sender:u.sender,content:u.content,timestamp:new Date(u.created_at),emotion:u.emotion})),l=(i.plant_notifications||[]).map(u=>({id:u.id,type:u.type,title:u.title,message:u.message,priority:u.priority||"medium",scheduledFor:new Date(u.scheduled_for),completed:u.completed||!1}));return oa(i,o,s,l)})}catch(r){throw console.error("Error fetching plants:",r),r}}async getPlantById(t,r){try{const{data:n,error:a}=await this.supabase.from("plants").select(`
          *,
          plant_images ( * ),
          chat_messages ( * ),
          plant_notifications ( * )
        `).eq("id",t).eq("user_id",r).single();if(a){if(a.code==="PGRST116")return null;throw a}if(!n)return null;const i=(n.plant_images||[]).map(l=>({id:l.id,url:l.url,timestamp:new Date(l.created_at),healthAnalysis:l.health_analysis,isProfileImage:l.is_profile_image||!1})),o=(n.chat_messages||[]).map(l=>({id:l.id,sender:l.sender,content:l.content,timestamp:new Date(l.created_at),emotion:l.emotion})),s=(n.plant_notifications||[]).map(l=>({id:l.id,type:l.type,title:l.title,message:l.message,priority:l.priority||"medium",scheduledFor:new Date(l.scheduled_for),completed:l.completed||!1}));return oa(n,i,o,s)}catch(n){throw console.error("Error fetching plant by ID:",n),n}}async addPlantFromAnalysis(t,r,n){try{console.log("[PlantService] Iniciando análisis IA...");const a=await yp(r);console.log("[PlantService] Resultado IA:",a);const i={name:a.commonName,species:a.species,description:a.generalDescription,funFacts:a.funFacts,variety:a.variety??void 0,nickname:a.commonName,location:n,plantEnvironment:a.plantEnvironment,lightRequirements:a.lightRequirements,dateAdded:new Date,healthScore:a.health.confidence,careProfile:a.careProfile,personality:a.personality};console.log("[PlantService] Payload a createPlant:",i);const o=await this.createPlant(i,t);return console.log("[PlantService] Planta creada:",o),(async()=>{let s=!1,l=!1;try{console.log(`[PlantService] Starting image upload for plant ${o.id}`);const u=await vp(r,"plant-images",`${t}/${o.id}`);console.log("[PlantService] Imagen subida:",u),await this.addPlantImage(o.id,{url:u,timestamp:new Date,isProfileImage:!0,healthAnalysis:a.health},t),s=!0,console.log(`[PlantService] Image upload completed for plant ${o.id}`)}catch(u){console.error(`[PlantService] Image upload failed for plant ${o.id}:`,u),alert("Error subiendo imagen: "+(u instanceof Error?u.message:JSON.stringify(u)))}try{console.log(`[PlantService] Starting chat initialization for plant ${o.id}`);const u=await Od(o,"¡Hola! Acabo de llegar. ¿Cómo te llamas?");console.log("[PlantService] Respuesta IA chat:",u),await this.addChatMessage(o.id,{sender:"plant",content:u.content,timestamp:new Date,emotion:u.emotion},t),l=!0,console.log(`[PlantService] Chat initialization completed for plant ${o.id}`)}catch(u){console.error(`[PlantService] Chat initialization failed for plant ${o.id}:`,u),alert("Error inicializando chat: "+(u instanceof Error?u.message:JSON.stringify(u)))}s&&l?console.log(`[PlantService] All background tasks for plant ${o.id} completed successfully.`):(s||l)&&console.log(`[PlantService] Background tasks for plant ${o.id} partially completed.`)})().catch(s=>{console.error(`[PlantService] Error during background tasks for plant ${o.id}:`,s),alert("Error en tareas de fondo: "+(s instanceof Error?s.message:JSON.stringify(s)))}),o}catch(a){throw console.error("Error adding plant from analysis:",a),alert("Error creando planta: "+(a instanceof Error?a.message:JSON.stringify(a))),a}}async createPlant(t,r){try{const n={user_id:r,name:t.name,species:t.species,variety:t.variety||null,nickname:t.nickname||null,description:t.description||null,fun_facts:t.funFacts||null,location:t.location,plant_environment:t.plantEnvironment||null,light_requirements:t.lightRequirements||null,date_added:t.dateAdded.toISOString(),last_watered:null,last_fertilized:null,health_score:t.healthScore,care_profile:t.careProfile,personality:t.personality,updated_at:null};console.log("[PlantService] Payload a Supabase:",n);const{data:a,error:i}=await this.supabase.from("plants").insert(n).select("*").single();if(console.log("[PlantService] Respuesta Supabase:",a,i),i)throw console.error("Supabase error:",{message:i.message,details:i.details,code:i.code}),alert("Error Supabase: "+i.message),new Error(`Supabase error creating plant: ${i.message}`);if(!a)throw alert("No se pudo crear la planta en la base de datos, no se devolvieron datos."),new Error("Failed to create plant in the database, no data returned.");return oa(a,[],[],[])}catch(n){throw console.error("Error creating plant:",n),alert("Error creando planta: "+(n instanceof Error?n.message:JSON.stringify(n))),n}}async updatePlantInfo(t,r,n){try{const a={};n.plantEnvironment!==void 0&&(a.plant_environment=n.plantEnvironment),n.lightRequirements!==void 0&&(a.light_requirements=n.lightRequirements),n.description!==void 0&&(a.description=n.description),n.funFacts!==void 0&&(a.fun_facts=n.funFacts);const{data:i,error:o}=await this.supabase.from("plants").update(a).eq("id",t).eq("user_id",r).select("*").single();if(o)throw console.error("Supabase error updating plant:",o),new Error(`Error updating plant: ${o.message}`);if(!i)throw new Error("Plant not found or not updated.");return oa(i,[],[],[])}catch(a){throw console.error("Error updating plant info:",a),a}}async updatePlantHealthScore(t,r,n,a,i){try{console.log("🏥 [DB] Actualizando health score en BD:",{plantId:t,healthScore:n,hasAnalysis:!!a});const{error:o}=await this.supabase.from("plants").update({health_score:n}).eq("id",t).eq("user_id",r);if(o)throw console.error("💥 [DB] Error actualizando health score:",o),new Error(`Error updating plant health score: ${o.message}`);if(a&&i){console.log("📸 [DB] Actualizando análisis de salud en imagen:",i);const{error:s}=await this.supabase.from("plant_images").update({health_analysis:a}).eq("id",i).eq("user_id",r);s&&console.warn("⚠️ [DB] Error actualizando análisis en imagen:",s)}console.log("✅ [DB] Health score actualizado exitosamente")}catch(o){throw console.error("💥 [DB] Error en updatePlantHealthScore:",o),o}}async updatePlant(t,r){try{const n={name:t.name,species:t.species,variety:t.variety,nickname:t.nickname,description:t.description,fun_facts:t.funFacts,location:t.location,health_score:t.healthScore,care_profile:t.careProfile,personality:t.personality,last_watered:t.lastWatered?.toISOString(),last_fertilized:t.lastFertilized?.toISOString()},{data:a,error:i}=await this.supabase.from("plants").update(n).eq("id",t.id).eq("user_id",r).select().single();if(i)throw i;return oa(a,t.images,t.chatHistory,t.notifications)}catch(n){throw console.error("Error updating plant:",n),n}}async deletePlant(t,r){try{const{error:n}=await this.supabase.from("plants").delete().eq("id",t).eq("user_id",r);if(n)throw n}catch(n){throw console.error("Error deleting plant:",n),n}}async sendChatMessageAndGetResponse(t,r,n){const a=await this.addChatMessage(t.id,r,n),i=await Od(t,r.content),o={};i.insights&&(o.insights=i.insights),i.suggestedActions&&(o.suggestedActions=i.suggestedActions);const s={sender:"plant",content:i.content,emotion:i.emotion,timestamp:new Date,...Object.keys(o).length>0?{context:o}:{}},l=await this.addChatMessage(t.id,s,n);return[a,l]}async addChatMessage(t,r,n){try{const a={plant_id:t,user_id:n,sender:r.sender,content:r.content,emotion:r.emotion||null};r.context&&(a.context=r.context);const{data:i,error:o}=await this.supabase.from("chat_messages").insert(a).select().single();if(o)throw console.error("❌ Supabase error:",o),o;return{id:i.id,sender:i.sender,content:i.content,timestamp:new Date(i.created_at),emotion:i.emotion,context:i.context||void 0}}catch(a){throw console.error("Error adding chat message:",a),a}}async addPlantImage(t,r,n){try{const a=r.url;let i="";try{const u=new URL(a).pathname.split("/"),d=u.findIndex(f=>f==="object");d!==-1&&d+2<u.length&&(i=u.slice(d+2).join("/"))}catch{console.warn("Could not extract storage path from URL:",a),i=`${n}/${t}/${Date.now()}.jpg`}const{data:o,error:s}=await this.supabase.from("plant_images").insert({plant_id:t,user_id:n,url:a,storage_path:i,is_profile_image:r.isProfileImage,health_analysis:r.healthAnalysis}).select().single();if(s)throw s;if(!o.url)throw new Error("Image URL not returned from database.");return{id:o.id,url:o.url,timestamp:new Date(o.created_at),isProfileImage:o.is_profile_image||!1,healthAnalysis:o.health_analysis}}catch(a){throw console.error("Error adding plant image:",a),new Error(`Image upload failed: ${a instanceof Error?a.message:"Unknown error"}`)}}async setProfileImage(t,r,n){try{await this.supabase.from("plant_images").update({is_profile_image:!1}).eq("plant_id",t).eq("user_id",n);const{error:a}=await this.supabase.from("plant_images").update({is_profile_image:!0}).eq("id",r).eq("user_id",n);if(a)throw a}catch(a){throw console.error("Error setting profile image:",a),a}}async deleteImage(t,r){try{const{data:n,error:a}=await this.supabase.from("plant_images").select("storage_path").eq("id",t).eq("user_id",r).single();if(a)throw a;n?.storage_path&&await this.supabase.storage.from("plant-images").remove([n.storage_path]);const{error:i}=await this.supabase.from("plant_images").delete().eq("id",t).eq("user_id",r);if(i)throw i}catch(n){throw console.error("Error deleting image:",n),n}}}const An=new sc(he),sa=new sc,dr=Yl((e,t)=>({plants:[],isLoading:!1,error:null,selectedPlantId:null,getPlantById:r=>t().plants.find(n=>n.id===r),setPlant:r=>{e(ar(n=>{const a=n.plants.findIndex(i=>i.id===r.id);a!==-1?n.plants[a]=r:n.plants.push(r)}))},addPlant:async(r,n,a)=>{try{const i=await sa.addPlantFromAnalysis(a,r,n);return e(ar(o=>{o.plants.unshift(i)})),In.invalidateOnPlantChange(a),i}catch(i){throw console.error(i),i}},updatePlant:async(r,n)=>{try{const a=await sa.updatePlant(r,n);e(ar(i=>{const o=i.plants.findIndex(s=>s.id===a.id);o!==-1&&(i.plants[o]=a)})),In.invalidateOnPlantChange(n)}catch(a){throw console.error(a),a}},deletePlant:async(r,n)=>{try{await sa.deletePlant(r,n),e(ar(a=>{a.plants=a.plants.filter(i=>i.id!==r)})),In.invalidateOnPlantChange(n)}catch(a){throw console.error(a),a}},addChatMessage:async(r,n,a)=>{e({isLoading:!0,error:null});const i=t().getPlantById(r);if(!i){e({isLoading:!1,error:"Plant not found to add message"});return}const o={id:`temp-user-${Date.now()}`,sender:"user",content:n,timestamp:new Date};e(ar(s=>{s.plants.find(l=>l.id===r)?.chatHistory.push(o)}));try{const[s,l]=await sa.sendChatMessageAndGetResponse(i,{sender:"user",content:n,timestamp:o.timestamp},a);e(ar(u=>{const d=u.plants.find(f=>f.id===r);d&&(d.chatHistory=[...d.chatHistory.filter(f=>f.id!==o.id),s,l]),u.isLoading=!1}))}catch(s){const l=s instanceof Error?s.message:"Failed to send message";console.error(l),e({isLoading:!1,error:l})}},addPlantImage:async(r,n,a)=>{try{const i=await sa.addPlantImage(r,{url:n,timestamp:new Date,isProfileImage:!1},a);e(ar(o=>{const s=o.plants.find(l=>l.id===r);s&&s.images.push(i)}))}catch(i){throw console.error(i),i}},selectPlant:r=>e({selectedPlantId:r}),clearError:()=>{},clearPlants:()=>e({plants:[],selectedPlantId:null})}));class MS{async updatePlantHealthDiagnosis(t){if(!t.images||t.images.length===0)throw new Error("Esta planta no tiene imágenes para analizar. Toma una foto primero.");const r=[...t.images].sort((i,o)=>o.timestamp.getTime()-i.timestamp.getTime())[0],{data:{session:n},error:a}=await he.auth.getSession();if(a||!n?.access_token)throw console.error("💥 [Health] User session not available:",a),new Error("Usuario no autenticado. Por favor inicia sesión nuevamente.");try{const i=await fetch(r.url,{method:"HEAD"});if(!i.ok)throw new Error(`Imagen no accesible: ${i.status}`)}catch(i){throw console.error("💥 [Health] Error verificando acceso a imagen:",i),new Error("La imagen de la planta no está disponible. Intenta tomar una nueva foto.")}console.log("🔬 [Health] Llamando a update-health-diagnosis...");try{const{data:i,error:o}=await he.functions.invoke("update-health-diagnosis",{body:{imageUrl:r.url,plantName:t.name,species:t.species},headers:{Authorization:`Bearer ${n.access_token}`}});if(o)throw console.error("💥 [Health] Error en función update-health-diagnosis:",o),new Error(`Error en análisis: ${o.message}`);if(!i||!i.overallHealth)throw console.error("💥 [Health] Datos incompletos del análisis:",i),new Error("El análisis no devolvió información de salud válida.");console.log("🎯 [Health] Análisis de salud completado exitosamente:",{overallHealth:i.overallHealth,confidence:i.confidence,issuesCount:i.issues?.length||0,recommendationsCount:i.recommendations?.length||0});const l={excellent:95,good:80,fair:60,poor:30}[i.overallHealth]||i.confidence||60;return console.log("📊 [Health] Nuevo score de salud calculado:",{overallHealth:i.overallHealth,numericScore:l,confidence:i.confidence}),{healthScore:l,healthAnalysis:i,updatedImage:{...r,healthAnalysis:i}}}catch(i){console.error("💥 [Health] Error en diagnóstico primario:",i),console.log("🔄 [Health] Intentando análisis de fallback...");try{if(r.healthAnalysis&&r.healthAnalysis.overallHealth){console.log("🎯 [Health] Usando análisis existente de la imagen");const o=r.healthAnalysis;return{healthScore:{excellent:95,good:80,fair:60,poor:30}[o.overallHealth]||60,healthAnalysis:o,updatedImage:r}}}catch(o){console.error("💥 [Health] Error en fallback:",o)}throw new Error("No se pudo actualizar el diagnóstico de salud. Verifica tu conexión a internet e intenta nuevamente.")}}async updatePlantHealthScore(t,r,n,a,i){try{console.log("🏥 [DB] Actualizando health score en BD:",{plantId:t,healthScore:n,hasAnalysis:!!a});const{error:o}=await he.from("plants").update({health_score:n}).eq("id",t).eq("user_id",r);if(o)throw console.error("💥 [DB] Error actualizando health score:",o),new Error(`Error updating plant health score: ${o.message}`);if(a&&i){console.log("📸 [DB] Actualizando análisis de salud en imagen:",i);const{error:s}=await he.from("plant_images").update({health_analysis:a}).eq("id",i).eq("user_id",r);s&&console.warn("⚠️ [DB] Error actualizando análisis en imagen:",s)}console.log("✅ [DB] Health score actualizado exitosamente")}catch(o){throw console.error("💥 [DB] Error en updatePlantHealthScore:",o),o}}}const Td=new MS,Co=()=>{const e=yo(),{addPlant:t,updatePlant:r,deletePlant:n}=dr.getState(),i=yr(f=>f.user)?.id,{addToast:o}=Zn(),s=Ir({mutationFn:f=>{if(!i)throw new Error("User not authenticated");const{imageDataUrl:m,location:h}=f;return t(m,h,i)},onSuccess:f=>{e.invalidateQueries({queryKey:["plants",i]})},onError:f=>{console.error("Failed to create plant:",f)}}),l=Ir({mutationFn:f=>{if(!i)throw new Error("User not authenticated");return r(f,i)},onMutate:async f=>{await e.cancelQueries({queryKey:["plants",i]});const m=e.getQueryData(["plants",i]);return m&&e.setQueryData(["plants",i],m.map(h=>h.id===f.id?f:h)),{previousPlants:m}},onError:(f,m,h)=>{h?.previousPlants&&e.setQueryData(["plants",i],h.previousPlants)},onSettled:f=>{e.invalidateQueries({queryKey:["plants",i]})}}),u=Ir({mutationFn:async({plant:f,userId:m})=>{console.log("🩺 [Mutation] Iniciando actualización de diagnóstico...");const h=await Td.updatePlantHealthDiagnosis(f);return await Td.updatePlantHealthScore(f.id,m,h.healthScore,h.healthAnalysis,h.updatedImage.id),console.log("✅ [Mutation] Diagnóstico actualizado exitosamente"),h},onSuccess:(f,{plant:m})=>{e.invalidateQueries({queryKey:["plants"]}),e.invalidateQueries({queryKey:["plant",m.id]}),o({type:"success",title:"Diagnóstico Actualizado",message:`Nuevo estado de salud: ${f.healthScore}%`})},onError:f=>{console.error("💥 [Mutation] Error actualizando diagnóstico:",f),o({type:"error",title:"Error en Diagnóstico",message:f.message})}}),d=Ir({mutationFn:f=>{if(!i)throw new Error("User not authenticated");return n(f,i)},onMutate:async f=>{await e.cancelQueries({queryKey:["plants",i]});const m=e.getQueryData(["plants",i]);return m&&e.setQueryData(["plants",i],m.filter(h=>h.id!==f)),{previousPlants:m}},onError:(f,m,h)=>{h?.previousPlants&&e.setQueryData(["plants",i],h.previousPlants)},onSettled:()=>{e.invalidateQueries({queryKey:["plants",i]})}});return{createPlant:s.mutate,isCreatingPlant:s.isPending,updatePlant:l.mutate,isUpdatingPlant:l.isPending,updatePlantHealthMutation:u.mutate,isUpdatingPlantHealth:u.isPending,deletePlant:d.mutate,isDeletingPlant:d.isPending}},$S=()=>{const[e,t]=y.useState(!1),r=kt(),{createPlant:n,isCreatingPlant:a}=Co();y.useEffect(()=>{const s=l=>{l.key==="Escape"&&t(!1)};return e&&document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s)}},[e]);const i=[{id:"camera",icon:cr,label:"Tomar Foto",color:"bg-blue-500",action:()=>{t(!1),r(it.toCamera())}},{id:"gallery",icon:Kl,label:"Galería",color:"bg-purple-500",action:()=>o()}],o=y.useCallback(()=>{const s=document.createElement("input");s.type="file",s.accept="image/*",s.onchange=async l=>{const u=l.target.files?.[0];if(u){const d=new FileReader;d.onload=async f=>{const m=f.target?.result;if(m){t(!1);const h=new Promise((p,v)=>{n({imageDataUrl:m,location:"Interior"},{onSuccess:g=>{g?.id&&r(it.toPlantDetail(g.id)),p(g)},onError:g=>{console.error("Failed to create plant:",g),v(g)}})});tp.promise(h,{loading:"Analizando imagen... La IA está trabajando.",success:p=>`¡Planta "${p.name}" creada con éxito!`,error:p=>`Error: ${p.message}`})}},d.readAsDataURL(u)}},s.click()},[n,r]);return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"relative flex items-center",children:[c.jsx(_.button,{onClick:()=>t(!e),className:"w-12 h-12 bg-primary-500 hover:bg-primary-600 disabled:bg-primary-300 text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-200 flex items-center justify-center disabled:cursor-not-allowed",whileHover:{scale:a?1:1.05},whileTap:{scale:a?1:.95},disabled:a,"aria-label":e?"Cerrar menú":"Agregar planta","aria-expanded":e,children:c.jsx(pe,{mode:"wait",children:a?c.jsx(_.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},children:c.jsx(Tn,{className:"w-6 h-6 animate-spin"})},"loading"):c.jsx(_.div,{initial:{opacity:0,rotate:-180},animate:{opacity:1,rotate:e?45:0},exit:{opacity:0,rotate:180},transition:{duration:.2},children:c.jsx(Zl,{className:"w-6 h-6"})},"plus")})}),e&&c.jsx(_.span,{initial:{opacity:0,x:10},animate:{opacity:1,x:16},exit:{opacity:0,x:10},transition:{duration:.2},className:"ml-3 px-3 py-1 rounded-full bg-primary-100 text-primary-700 text-xs font-medium shadow-md whitespace-nowrap z-50",children:"Agregar planta"})]}),c.jsx(pe,{children:e&&c.jsx(_.div,{className:"absolute bottom-16 right-0 flex flex-col gap-3",initial:"closed",animate:"open",exit:"closed",variants:{open:{transition:{staggerChildren:.1,delayChildren:.1}},closed:{transition:{staggerChildren:.05,staggerDirection:-1}}},children:i.map((s,l)=>c.jsxs(_.button,{onClick:s.action,className:`w-12 h-12 ${s.color} hover:scale-105 text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-200 flex items-center justify-center group relative`,variants:{open:{opacity:1,scale:1,y:0,transition:{delay:l*.1}},closed:{opacity:0,scale:.3,y:20,transition:{delay:(i.length-l)*.05}}},whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":s.label,children:[c.jsx(s.icon,{className:"w-5 h-5"}),c.jsx("div",{className:"absolute right-full mr-3 opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none",children:c.jsxs("div",{className:"bg-gray-900 text-white text-xs px-2 py-1 rounded-lg whitespace-nowrap",children:[s.label,c.jsx("div",{className:"absolute left-full top-1/2 -translate-y-1/2 w-0 h-0 border-l-4 border-r-0 border-t-2 border-b-2 border-transparent border-l-gray-900"})]})})]},s.id))})}),c.jsx(pe,{children:e&&c.jsx(_.div,{className:"fixed inset-0 z-[-1]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>t(!1)})})]})},zS=[{icon:Ti,path:Le.dashboard,label:"Inicio",description:"Tu jardín personal"},{icon:ja,path:Le.gardenChat,label:"Chat IA",description:"Asistente de plantas"},{icon:Px,path:Le.settings,label:"Ajustes",description:"Configuración"}],RS=()=>{const e=mh(),t=e.pathname.startsWith("/plant/");return c.jsxs(c.Fragment,{children:[c.jsx("nav",{className:"safe-bottom fixed bottom-0 left-0 right-0 z-50 glass-enhanced border-t border-contrast",children:c.jsx("div",{className:"flex justify-around items-center h-20 max-w-lg mx-auto px-2",children:zS.map(r=>{const n=gS(e.pathname,r.path);return c.jsx(_.div,{className:"relative flex-1 h-full",whileTap:{scale:.92},whileHover:{scale:1.02},children:c.jsxs(bx,{to:r.path,className:ce("touch-target relative flex flex-col items-center justify-center w-full h-full rounded-2xl transition-all duration-200","focus-contrast",n?"text-primary-700 dark:text-primary-400":"text-neutral-700 dark:text-neutral-300 hover:text-primary-600 dark:hover:text-primary-400"),"aria-label":`${r.label} - ${r.description}`,...n?{"aria-current":"page"}:{},children:[c.jsx(pe,{children:n&&c.jsx(_.div,{layoutId:"nav-background",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{type:"spring",stiffness:400,damping:30},className:"absolute inset-1 bg-primary-500/10 dark:bg-primary-400/10 rounded-xl"})}),c.jsx(_.div,{animate:{scale:n?1.1:1,y:n?-2:0},transition:{duration:.2},className:ce("relative z-10",n?"text-[#2A7F3E]":"text-[#888]"),children:c.jsx(r.icon,{size:24,strokeWidth:n?2.5:2,className:"drop-shadow-sm"})}),c.jsx(_.span,{animate:{scale:n?1.05:1,fontWeight:n?600:500},transition:{duration:.2},className:"text-xs mt-1 relative z-10",children:r.label}),c.jsx(pe,{children:n&&c.jsx(_.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},transition:{delay:.1},className:"absolute left-1/2 -translate-x-1/2 w-1 h-1 bg-primary-500 dark:bg-primary-400 rounded-full mt-1.5"})})]})},r.path)})})}),!t&&c.jsx("div",{className:"fixed bottom-20 sm:bottom-24 right-4 sm:right-6 z-40",children:c.jsx($S,{})})]})},LS=()=>{const[e,t]=y.useState(navigator.onLine);return y.useEffect(()=>{const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r),window.addEventListener("offline",n),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}},[]),e},FS=()=>{const e=LS();return c.jsxs(pe,{children:[!e&&c.jsx(_.div,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},exit:{y:-100,opacity:0},className:"fixed top-0 left-0 right-0 z-50 safe-area-top",children:c.jsx("div",{className:"bg-red-500 text-white px-4 py-2 text-center text-sm font-medium",children:c.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[c.jsx(Sx,{size:16}),c.jsx("span",{children:"Sin conexión - Modo offline"})]})})}),e&&c.jsx(_.div,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},exit:{y:-100,opacity:0},className:"fixed top-0 left-0 right-0 z-50 safe-area-top",onAnimationComplete:()=>{setTimeout(()=>{const t=document.querySelector("[data-online-indicator]");t&&t.remove()},2e3)},children:c.jsx("div",{className:"bg-green-500 text-white px-4 py-2 text-center text-sm font-medium","data-online-indicator":!0,children:c.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[c.jsx(Nx,{size:16}),c.jsx("span",{children:"Conexión restaurada"})]})})})]})};function BS(e,t){let r;try{r=e()}catch{return}return{getItem:a=>{var i;const o=l=>l===null?null:JSON.parse(l,void 0),s=(i=r.getItem(a))!=null?i:null;return s instanceof Promise?s.then(o):o(s)},setItem:(a,i)=>r.setItem(a,JSON.stringify(i,void 0)),removeItem:a=>r.removeItem(a)}}const al=e=>t=>{try{const r=e(t);return r instanceof Promise?r:{then(n){return al(n)(r)},catch(n){return this}}}catch(r){return{then(n){return this},catch(n){return al(n)(r)}}}},US=(e,t)=>(r,n,a)=>{let i={storage:BS(()=>localStorage),partialize:v=>v,version:0,merge:(v,g)=>({...g,...v}),...t},o=!1;const s=new Set,l=new Set;let u=i.storage;if(!u)return e((...v)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),r(...v)},n,a);const d=()=>{const v=i.partialize({...n()});return u.setItem(i.name,{state:v,version:i.version})},f=a.setState;a.setState=(v,g)=>{f(v,g),d()};const m=e((...v)=>{r(...v),d()},n,a);a.getInitialState=()=>m;let h;const p=()=>{var v,g;if(!u)return;o=!1,s.forEach(b=>{var w;return b((w=n())!=null?w:m)});const x=((g=i.onRehydrateStorage)==null?void 0:g.call(i,(v=n())!=null?v:m))||void 0;return al(u.getItem.bind(u))(i.name).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==i.version){if(i.migrate){const w=i.migrate(b.state,b.version);return w instanceof Promise?w.then(j=>[!0,j]):[!0,w]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,b.state];return[!1,void 0]}).then(b=>{var w;const[j,P]=b;if(h=i.merge(P,(w=n())!=null?w:m),r(h,!0),j)return d()}).then(()=>{x?.(h,void 0),h=n(),o=!0,l.forEach(b=>b(h))}).catch(b=>{x?.(void 0,b)})};return a.persist={setOptions:v=>{i={...i,...v},v.storage&&(u=v.storage)},clearStorage:()=>{u?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:v=>(s.add(v),()=>{s.delete(v)}),onFinishHydration:v=>(l.add(v),()=>{l.delete(v)})},i.skipHydration||p(),h||m},WS=US,HS=Yl()(WS((e,t)=>({isDark:typeof window<"u"?window.matchMedia("(prefers-color-scheme: dark)").matches:!1,toggleTheme:()=>{const{isDark:r}=t(),n=!r;e({isDark:n}),js(n),"vibrate"in navigator&&navigator.vibrate(50)},setTheme:r=>{e({isDark:r}),js(r)}}),{name:"theme-storage",onRehydrateStorage:()=>e=>{e&&js(e.isDark)}})),js=e=>{if(typeof window>"u")return;const t=e?"dark":"light";document.documentElement.setAttribute("data-theme",t),e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},qS=()=>{const e=mh(),{isDark:t}=HS(),r=e.pathname==="/camera",n=()=>{const i={"/":"Página de inicio - Tu jardín personal","/camera":"Cámara - Agregar nueva planta","/chat":"Chat con IA - Asistente de plantas","/garden-chat":"Chat del jardín - Consultas generales","/settings":"Configuración - Ajustes de la aplicación"},o=e.pathname.includes("/plant/")?"/plant":e.pathname,s=i[o]||i[e.pathname]||"Página",l=document.createElement("div");l.setAttribute("aria-live","polite"),l.setAttribute("aria-atomic","true"),l.setAttribute("class","sr-only"),l.textContent=`Navegando a ${s}`,document.body.appendChild(l),setTimeout(()=>{document.body.removeChild(l)},1e3)};y.useEffect(()=>{n()},[e.pathname]),y.useEffect(()=>{const i=t?"dark":"light";document.documentElement.setAttribute("data-theme",i)},[t]);const a=()=>c.jsx("a",{href:"#main-content",className:"sr-only focus:not-sr-only fixed top-4 left-4 z-50 bg-primary-600 text-white px-4 py-2 rounded-md font-medium transition-all duration-200 focus:shadow-lg",onFocus:i=>{i.currentTarget.scrollIntoView({behavior:"smooth"})},children:"Saltar al contenido principal"});return c.jsxs("div",{className:"min-h-screen bg-background text-text-primary",children:[c.jsx(a,{}),c.jsx("h1",{className:"sr-only",children:"Plantitas - Aplicación de cuidado de plantas"}),c.jsx("main",{id:"main-content",role:"main","aria-label":"Contenido principal",className:"pb-28 min-h-screen focus:outline-none",tabIndex:-1,children:c.jsx(pe,{mode:"wait",children:c.jsx(_.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15,ease:"easeOut"},className:"w-full h-full",children:c.jsx(wx,{})},e.pathname)})}),c.jsx("aside",{role:"complementary","aria-label":"Información de estado",children:c.jsx(FS,{})}),!r&&c.jsx("nav",{role:"navigation","aria-label":"Navegación inferior",children:c.jsx(RS,{})}),c.jsx("style",{children:`
        @media (prefers-contrast: high) {
          :root {
            --color-background: #000000;
            --color-surface: #111111;
            --color-text-primary: #ffffff;
            --color-text-secondary: #ffffff;
            --color-border: #ffffff;
            --color-accent: #00ff00;
          }
        }

        @media (prefers-reduced-motion: reduce) {
          * {
            animation-duration: 0.01ms !important;
            animation-iteration-count: 1 !important;
            transition-duration: 0.01ms !important;
          }
        }

        /* Screen reader only utility */
        .sr-only {
          position: absolute;
          width: 1px;
          height: 1px;
          padding: 0;
          margin: -1px;
          overflow: hidden;
          clip: rect(0, 0, 0, 0);
          white-space: nowrap;
          border: 0;
        }

        .sr-only.focus\\:not-sr-only:focus {
          position: static;
          width: auto;
          height: auto;
          padding: inherit;
          margin: inherit;
          overflow: visible;
          clip: auto;
          white-space: normal;
        }

        /* Enhanced focus indicators */
        *:focus-visible {
          outline: 3px solid var(--color-accent) !important;
          outline-offset: 2px !important;
          border-radius: 4px;
        }

        /* High contrast focus ring */
        @media (prefers-contrast: high) {
          *:focus-visible {
            outline: 4px solid #00ff00 !important;
            outline-offset: 3px !important;
          }
        }
      `})]})};class ZS extends y.Component{constructor(t){super(t),this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){this.setState({error:t,errorInfo:r})}handleReload=()=>{window.location.reload()};handleGoHome=()=>{window.location.href="/plantitas-app/"};render(){return this.state.hasError?this.props.fallback?this.props.fallback:c.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-4",children:c.jsx("div",{className:"max-w-md w-full",children:c.jsxs("div",{className:"glass-effect rounded-2xl p-8 text-center",children:[c.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center",children:c.jsx(zr,{size:32,className:"text-red-500"})}),c.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"¡Oops! Algo salió mal"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Ha ocurrido un error inesperado. No te preocupes, tus plantas están seguras."}),!1,c.jsxs("div",{className:"space-y-3",children:[c.jsxs("button",{onClick:this.handleReload,className:"w-full px-4 py-3 bg-primary-500 text-white rounded-xl font-medium ios-button flex items-center justify-center space-x-2",children:[c.jsx(cn,{size:18}),c.jsx("span",{children:"Recargar Página"})]}),c.jsxs("button",{onClick:this.handleGoHome,className:"w-full px-4 py-3 bg-gray-600 text-white rounded-xl font-medium ios-button flex items-center justify-center space-x-2",children:[c.jsx(Ti,{size:18}),c.jsx("span",{children:"Ir al Inicio"})]})]}),c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-4",children:"Si el problema persiste, intenta limpiar el caché del navegador."})]})})}):this.props.children}}const KS=()=>{const e=yr(t=>t.user);return ch({queryKey:["plants",e?.id],queryFn:async()=>e?An.getUserPlantSummaries(e.id):Promise.resolve([]),enabled:!!e,staleTime:Cr.QUERY.STALE_TIME.MEDIUM,gcTime:Cr.QUERY.GC_TIME.LONG,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!0,placeholderData:[]})},Id=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Dd=de,lc=(e,t)=>r=>{var n;if(t?.variants==null)return Dd(e,r?.class,r?.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(u=>{const d=r?.[u],f=i?.[u];if(d===null)return null;const m=Id(d)||Id(f);return a[u][m]}),s=r&&Object.entries(r).reduce((u,d)=>{let[f,m]=d;return m===void 0||(u[f]=m),u},{}),l=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((u,d)=>{let{class:f,className:m,...h}=d;return Object.entries(h).every(p=>{let[v,g]=p;return Array.isArray(g)?g.includes({...i,...s}[v]):{...i,...s}[v]===g})?[...u,f,m]:u},[]);return Dd(e,o,l,r?.class,r?.className)},GS=lc("overflow-hidden transition-all duration-300",{variants:{variant:{default:["bg-white/90 border border-neutral-200","dark:bg-neutral-900/90 dark:border-neutral-700","shadow-md hover:shadow-lg"],glass:["glass","hover:shadow-glass-lg","border-neutral-200/50 dark:border-neutral-700/50"],elevated:["bg-white border border-neutral-100","dark:bg-neutral-800 dark:border-neutral-700","shadow-lg hover:shadow-xl"],outline:["bg-transparent border-2 border-neutral-200","dark:border-neutral-700","hover:border-primary-300 dark:hover:border-primary-600"],ghost:["bg-transparent border-none","hover:bg-neutral-50 dark:hover:bg-neutral-900/50"]},size:{sm:"p-4",default:"p-6",lg:"p-8",xl:"p-10"},radius:{none:"rounded-none",sm:"rounded-lg",default:"rounded-xl",lg:"rounded-2xl",full:"rounded-3xl"},interactive:{true:"cursor-pointer",false:""}},defaultVariants:{variant:"default",size:"default",radius:"default",interactive:!1}}),_t=I.forwardRef(({className:e,variant:t,size:r,radius:n,interactive:a,hover:i=!1,loading:o=!1,children:s,ariaLabel:l,...u},d)=>c.jsx(_.div,{whileHover:a&&!o?{scale:i?1.02:1.01,y:i?-4:-2}:void 0,whileTap:a&&!o?{scale:.98}:void 0,transition:{duration:.2,ease:[.4,0,.2,1]},className:ce(GS({variant:t,size:r,radius:n,interactive:a}),o&&"animate-pulse",e),ref:d,...u,children:o?c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"h-4 bg-neutral-200 dark:bg-neutral-700 rounded animate-shimmer"}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"h-3 bg-neutral-200 dark:bg-neutral-700 rounded animate-shimmer"}),c.jsx("div",{className:"h-3 bg-neutral-200 dark:bg-neutral-700 rounded w-4/5 animate-shimmer"})]})]}):s}));_t.displayName="Card";const Oo=I.forwardRef(({className:e,...t},r)=>c.jsx("div",{ref:r,className:ce("flex flex-col space-y-1.5 pb-4",e),...t}));Oo.displayName="CardHeader";const cc=I.forwardRef(({className:e,...t},r)=>c.jsx("h3",{ref:r,className:ce("text-xl font-semibold leading-tight text-neutral-900 dark:text-neutral-100",e),...t}));cc.displayName="CardTitle";const VS=I.forwardRef(({className:e,...t},r)=>c.jsx("p",{ref:r,className:ce("text-sm text-neutral-600 dark:text-neutral-400 leading-relaxed",e),...t}));VS.displayName="CardDescription";const hr=I.forwardRef(({className:e,...t},r)=>c.jsx("div",{ref:r,className:ce("",e),...t}));hr.displayName="CardContent";const xp=I.forwardRef(({className:e,...t},r)=>c.jsx("div",{ref:r,className:ce("flex items-center pt-4 mt-4 border-t border-neutral-200 dark:border-neutral-700",e),...t}));xp.displayName="CardFooter";const la=new Set,hi=new Map,uc=({src:e,alt:t,className:r="",fallback:n,onLoad:a,onError:i,priority:o=!1,sizes:s="(max-width: 768px) 100vw, 50vw"})=>{const[l,u]=y.useState(()=>la.has(e)),[d,f]=y.useState(!1),m=y.useRef(null);y.useEffect(()=>{if(o&&!la.has(e)&&!hi.has(e)){const v=new Image;v.src=e,v.onload=()=>{la.add(e),hi.set(e,v)},v.onerror=()=>{hi.delete(e)},hi.set(e,v)}},[e,o]);const h=y.useCallback(()=>{la.add(e),u(!0),a?.()},[a,e]),p=y.useCallback(()=>{la.delete(e),f(!0),i?.()},[i,e]);return d&&n?c.jsx(c.Fragment,{children:n}):d?c.jsx("div",{className:`bg-gray-200 dark:bg-gray-700 flex items-center justify-center ${r}`,children:c.jsx("span",{className:"text-gray-400 text-sm",children:"No image"})}):c.jsxs("div",{className:`relative overflow-hidden ${r}`,children:[c.jsx(pe,{children:!l&&c.jsx(_.div,{initial:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"absolute inset-0 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 dark:from-gray-700 dark:via-gray-600 dark:to-gray-700 animate-pulse"})}),c.jsx(_.img,{ref:m,src:e,alt:t,className:`w-full h-full object-cover ${l?"opacity-100":"opacity-0"}`,loading:o?"eager":"lazy",decoding:"async",fetchPriority:o?"high":"low",sizes:s,onLoad:h,onError:p,initial:{opacity:0},animate:{opacity:l?1:0},transition:{duration:.15}})]})},YS=y.memo(({score:e})=>{const t=y.useMemo(()=>e>=80?{color:"bg-green-400",textColor:"text-green-600 dark:text-green-400",icon:c.jsx(at,{className:"w-4 h-4 mr-1 text-green-400"}),status:"Excelente"}:e>=60?{color:"bg-yellow-300",textColor:"text-yellow-600 dark:text-yellow-400",icon:c.jsx(Mr,{className:"w-4 h-4 mr-1 text-yellow-400"}),status:"Buena"}:{color:"bg-red-300",textColor:"text-red-600 dark:text-red-400",icon:c.jsx(zr,{className:"w-4 h-4 mr-1 text-red-400"}),status:"Atención"},[e]);return c.jsxs("div",{className:"flex items-center gap-3 w-full",children:[c.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[c.jsx("div",{className:"relative w-24 h-2 bg-neutral-100 dark:bg-neutral-800 rounded-full overflow-hidden",children:c.jsx(_.div,{className:`absolute top-0 left-0 h-full rounded-full ${t.color}`,initial:{width:0},animate:{width:`${e}%`},transition:{duration:.5,ease:"easeOut"}})}),c.jsxs("span",{className:"text-xs font-semibold text-neutral-500 dark:text-neutral-400",children:[e,"%"]})]}),c.jsxs("div",{className:"flex items-center gap-1 text-xs px-2 py-0.5 rounded-full bg-neutral-50 dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-700",children:[t.icon,c.jsx("span",{className:t.textColor,children:t.status})]})]})});YS.displayName="PlantHealthIndicator";const bp=y.memo(({plant:e,index:t})=>{const r=kt(),n=yo(),{needsWatering:a,isFavorite:i}=y.useMemo(()=>{const d=e.lastWatered&&e.wateringFrequency?new Date().getTime()-new Date(e.lastWatered).getTime()>e.wateringFrequency*24*60*60*1e3:!e.lastWatered,f=e.healthScore>=80;return{needsWatering:d,isFavorite:f}},[e.lastWatered,e.wateringFrequency,e.healthScore]),o=()=>{n.prefetchQuery({queryKey:["plant",e.id],queryFn:async()=>{const{supabase:d}=await Hl(async()=>{const{supabase:p}=await Promise.resolve().then(()=>qx);return{supabase:p}},void 0),{data:f,error:m}=await d.from("plants").select(`
            *,
            plant_images(*)
          `).eq("id",e.id).single();if(m)throw m.code==="PGRST116"?new Error("Planta no encontrada."):new Error("Error al cargar la información de la planta.");const h=f;return{id:h.id,name:h.name,species:h.species,description:h.description??void 0,funFacts:h.fun_facts??void 0,variety:h.variety??void 0,nickname:h.nickname??void 0,location:h.location,plantEnvironment:h.plant_environment,lightRequirements:h.light_requirements,dateAdded:new Date(h.date_added),lastWatered:h.last_watered?new Date(h.last_watered):void 0,lastFertilized:h.last_fertilized?new Date(h.last_fertilized):void 0,healthScore:h.health_score??0,careProfile:h.care_profile,personality:h.personality,images:h.plant_images.map(p=>({id:p.id,url:p.url??"",timestamp:new Date(p.created_at),isProfileImage:p.is_profile_image??!1,healthAnalysis:p.health_analysis})),chatHistory:[],notifications:[]}},staleTime:1e3*60*5})},s=()=>r(it.toPlantDetail(e.id)),l=Math.min(t,4),u=t<8;return c.jsx(_.div,{initial:u?{opacity:0,y:10}:{opacity:1,y:0},animate:{opacity:1,y:0},transition:u?{delay:l*.02,duration:.2,ease:"easeOut"}:{duration:0},whileHover:{y:-1},className:"group",children:c.jsxs(_t,{variant:"glass",size:"sm",radius:"lg",interactive:!0,hover:!0,onClick:s,onMouseEnter:o,className:"overflow-hidden border-2 hover:border-primary-300 dark:hover:border-primary-600 transition-all duration-200 p-4 mb-4",children:[c.jsx(Oo,{className:"pb-2 flex-shrink-0 space-y-0",children:c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsxs("div",{className:"relative w-20 h-20 rounded-[8px] overflow-hidden bg-gradient-to-br from-primary-50 to-primary-100 dark:from-primary-950 dark:to-primary-900 flex-shrink-0 border border-primary-200 dark:border-primary-800",children:[e.profileImageUrl?c.jsx(uc,{src:e.profileImageUrl,alt:e.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200",priority:t<4,sizes:"(max-width: 768px) 20vw, 10vw"}):c.jsx("div",{className:"w-full h-full flex items-center justify-center text-primary-400 dark:text-primary-600",children:c.jsx(Mr,{size:24})}),c.jsx(pe,{children:i&&c.jsx(_.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},transition:{duration:.2},className:"absolute -top-1 -right-1 w-6 h-6 bg-error-500 rounded-full flex items-center justify-center shadow-lg",children:c.jsx(ph,{size:12,className:"text-white fill-current"})})}),c.jsx(pe,{children:a&&c.jsx(_.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},transition:{duration:.2},className:"absolute -bottom-1 -right-1 w-6 h-6 bg-warning-500 rounded-full flex items-center justify-center shadow-lg",children:c.jsx(_.div,{animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},children:c.jsx(bo,{size:12,className:"text-white"})})})})]}),c.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:[c.jsx(cc,{className:"text-2xl font-bold text-neutral-900 dark:text-neutral-100 truncate mb-0 group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors",title:e.nickname||e.name,children:e.nickname||e.name}),c.jsx("p",{className:"text-xs text-[#555] truncate mb-[6px]",title:e.species,children:e.species}),c.jsx("div",{className:"flex items-center text-xs text-neutral-500 dark:text-neutral-500",children:c.jsxs("span",{className:"px-2 py-1 bg-neutral-100 dark:bg-neutral-800 rounded-md",children:["📍 ",e.location]})})]})]})}),c.jsxs(hr,{className:"pt-2 pb-0",children:[c.jsxs("div",{className:"flex items-center gap-2 w-full",children:[c.jsx("div",{className:"relative w-24 h-[6px] bg-[#EEE] rounded-full overflow-hidden flex-shrink-0",children:c.jsx(_.div,{className:`absolute top-0 left-0 h-full rounded-full ${e.healthScore>=80?"bg-green-400":e.healthScore>=60?"bg-yellow-300":"bg-red-300"}`,initial:{width:0},animate:{width:`${e.healthScore}%`},transition:{duration:.5,ease:"easeOut"}})}),c.jsxs("span",{className:"text-xs font-semibold text-neutral-500 dark:text-neutral-400 ml-1 min-w-[32px] text-right",children:[e.healthScore,"%"]}),c.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-semibold ml-auto ${e.healthScore>=80?"bg-green-500/10 text-green-700":e.healthScore>=60?"bg-yellow-400/10 text-yellow-700":"bg-red-400/10 text-red-700"}`,style:{padding:"4px 8px"},children:[e.healthScore>=80?c.jsx(at,{className:"w-4 h-4 mr-1 text-green-400"}):e.healthScore>=60?c.jsx(Mr,{className:"w-4 h-4 mr-1 text-yellow-400"}):c.jsx(zr,{className:"w-4 h-4 mr-1 text-red-400"}),c.jsx("span",{children:e.healthScore>=80?"Excelente":e.healthScore>=60?"Buena":"Atención"})]})]}),e.healthScore<40&&c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 bg-error-100 text-error-700 dark:bg-error-900/30 dark:text-error-300 rounded-full text-xs font-semibold",children:[c.jsx(zr,{className:"w-3 h-3 mr-1","aria-label":"Atención"}),"¡Atención!"]}),c.jsx("span",{className:"text-xs text-error-600 dark:text-error-300",children:"Salud muy baja"})]})]}),c.jsx(_.div,{className:"absolute inset-0 bg-gradient-to-t from-primary-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none",initial:!1})]})})});bp.displayName="PlantCard";function G({className:e,...t}){return c.jsx("div",{className:ce("animate-shimmer rounded-md","bg-[linear-gradient(110deg,var(--color-neutral-200)_8%,var(--color-neutral-300)_18%,var(--color-neutral-200)_33%)]","dark:bg-[linear-gradient(110deg,var(--color-neutral-800)_8%,var(--color-neutral-700)_18%,var(--color-neutral-800)_33%)]","bg-[length:200%_100%]",e),...t})}const XS=()=>c.jsxs(_t,{variant:"elevated",size:"default",className:"overflow-hidden",children:[c.jsxs("div",{className:"flex items-start p-4 space-x-4",children:[c.jsx(G,{className:"w-20 h-20 rounded-lg flex-shrink-0"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs(Oo,{className:"p-0",children:[c.jsx(G,{className:"h-6 w-3/4"}),c.jsx(G,{className:"h-4 w-1/2 mt-2"})]}),c.jsx(hr,{className:"p-0 mt-3",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(G,{className:"w-16 h-1.5"}),c.jsx(G,{className:"w-8 h-3"})]})})]})]}),c.jsx(xp,{className:"bg-neutral-50 dark:bg-neutral-800/50 p-2 border-t border-subtle",children:c.jsxs("div",{className:"flex justify-between items-center w-full",children:[c.jsx(G,{className:"h-4 w-1/3"}),c.jsx(G,{className:"w-8 h-8 rounded"})]})})]}),QS=lc("touch-target inline-flex items-center justify-center font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{primary:["bg-primary-600 text-white","hover:bg-primary-700","active:bg-primary-800","focus-visible:ring-primary-500/30","shadow-md hover:shadow-lg","disabled:bg-neutral-300 disabled:text-neutral-500","dark:bg-primary-500 dark:hover:bg-primary-400"],secondary:["bg-neutral-100 text-neutral-800 border border-neutral-300","hover:bg-neutral-200 hover:border-neutral-400","active:bg-neutral-300","focus-visible:ring-neutral-500/30","dark:bg-neutral-800 dark:text-neutral-100 dark:border-neutral-600","dark:hover:bg-neutral-700 dark:hover:border-neutral-500","shadow-sm hover:shadow-md"],outline:["bg-white text-neutral-800 border-2 border-neutral-800","hover:bg-neutral-50 hover:text-neutral-900","active:bg-neutral-100","focus-visible:ring-primary-500/30","dark:bg-neutral-950 dark:text-neutral-100 dark:border-neutral-200","dark:hover:bg-neutral-900 dark:hover:text-neutral-50"],ghost:["bg-transparent text-neutral-700 border border-transparent","hover:bg-neutral-100 hover:text-neutral-800","active:bg-neutral-200","focus-visible:ring-neutral-500/30","dark:text-neutral-300 dark:hover:bg-neutral-800 dark:hover:text-neutral-200","dark:active:bg-neutral-700"],destructive:["bg-error-600 text-white","hover:bg-error-700","active:bg-error-800","focus-visible:ring-error-500/30","shadow-md hover:shadow-lg","dark:bg-error-500 dark:text-black"],success:["bg-success-600 text-white","hover:bg-success-700","active:bg-success-800","focus-visible:ring-success-500/30","shadow-md hover:shadow-lg","dark:bg-success-500 dark:text-black"],warning:["bg-warning-600 text-white","hover:bg-warning-700","active:bg-warning-800","focus-visible:ring-warning-500/30","shadow-md hover:shadow-lg","dark:bg-warning-500 dark:text-black"],glass:["glass-enhanced text-neutral-800 border border-contrast","hover:backdrop-blur-xl hover:bg-contrast-surface","active:scale-[0.98]","focus-visible:ring-primary-500/30","dark:text-neutral-100"]},size:{xs:"h-8 px-3 text-xs rounded-md",sm:"h-10 px-4 text-sm rounded-lg",default:"h-11 px-6 text-base rounded-xl",lg:"h-12 px-8 text-lg rounded-xl",xl:"h-14 px-10 text-xl rounded-2xl",icon:"h-11 w-11 rounded-xl","icon-sm":"h-10 w-10 rounded-lg","icon-lg":"h-12 w-12 rounded-xl"},fullWidth:{true:"w-full",false:"w-auto"}},defaultVariants:{variant:"primary",size:"default",fullWidth:!1}}),ne=I.forwardRef(({className:e,variant:t,size:r,fullWidth:n,loading:a=!1,leftIcon:i,rightIcon:o,children:s,disabled:l,...u},d)=>{const f=l||a;return c.jsxs(_.button,{whileTap:f?void 0:{scale:.96},whileHover:f?void 0:{scale:1.02},transition:{duration:.15,ease:[.4,0,.2,1]},className:ce(QS({variant:t,size:r,fullWidth:n,className:e})),disabled:f,ref:d,...u,children:[a&&c.jsx(_.div,{className:"mr-2",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:c.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",children:[c.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeDasharray:"32",strokeDashoffset:"32",opacity:"0.3"}),c.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeDasharray:"8",strokeDashoffset:"8"})]})}),i&&!a&&c.jsx("span",{className:"mr-2 -ml-1",children:i}),c.jsx("span",{className:ce("flex items-center justify-center",a&&"opacity-70"),"aria-hidden":a?"true":void 0,children:Array.isArray(s)?s.filter(m=>typeof m=="string"||typeof m=="number"||I.isValidElement(m)):typeof s=="string"||typeof s=="number"||I.isValidElement(s)?s:null}),o&&c.jsx("span",{className:"ml-2 -mr-1",children:o})]})});ne.displayName="Button";const JS=lc("w-full transition-all duration-200 outline-none disabled:cursor-not-allowed disabled:opacity-50",{variants:{variant:{default:["bg-white border border-neutral-300","dark:bg-neutral-900 dark:border-neutral-600","focus:border-primary-500 dark:focus:border-primary-400","focus:ring-2 focus:ring-primary-500/20"],filled:["bg-neutral-100 border border-transparent","dark:bg-neutral-800 dark:border-transparent","focus:bg-white focus:border-primary-500","dark:focus:bg-neutral-900 dark:focus:border-primary-400","focus:ring-2 focus:ring-primary-500/20"],glass:["glass border-neutral-200/50","dark:border-neutral-700/50","focus:border-primary-500/70 dark:focus:border-primary-400/70","focus:ring-2 focus:ring-primary-500/20"]},size:{sm:"h-10 px-3 text-sm rounded-lg",default:"h-12 px-4 text-base rounded-xl",lg:"h-14 px-5 text-lg rounded-xl"},state:{default:"",error:"border-error-500 focus:border-error-500 focus:ring-error-500/20",success:"border-success-500 focus:border-success-500 focus:ring-success-500/20",warning:"border-warning-500 focus:border-warning-500 focus:ring-warning-500/20"}},defaultVariants:{variant:"default",size:"default",state:"default"}}),To=I.forwardRef(({className:e,variant:t,size:r,state:n,label:a,helperText:i,errorMessage:o,successMessage:s,leftIcon:l,rightIcon:u,loading:d=!1,showPasswordToggle:f=!1,floatingLabel:m=!1,type:h,disabled:p,value:v,defaultValue:g,...x},b)=>{const[w,j]=y.useState(!1),[P,S]=y.useState(!1),[N,C]=y.useState(v||g||""),T=y.useRef(null),R=y.useCallback(ee=>{T.current=ee,typeof b=="function"?b(ee):b&&(b.current=ee)},[b]),k=o?"error":s?"success":n,O=!!N||w,B=f?P?"text":"password":h;y.useEffect(()=>{v!==void 0&&C(v)},[v]);const Z=ee=>{j(!0),x.onFocus?.(ee)},V=ee=>{j(!1),x.onBlur?.(ee)},F=ee=>{C(ee.target.value),x.onChange?.(ee)},q=()=>{T.current?.focus()};return c.jsxs("div",{className:"w-full",children:[c.jsxs("div",{className:"relative",children:[a&&!m&&c.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-2",children:a}),c.jsxs("div",{className:"relative",children:[l&&c.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-neutral-500 dark:text-neutral-400 pointer-events-none z-10",children:l}),a&&m&&c.jsx(_.label,{onClick:q,animate:{scale:O?.85:1,y:O?-24:0,x:O?4:l?36:16},transition:{duration:.2,ease:[.4,0,.2,1]},className:ce("absolute left-0 top-1/2 -translate-y-1/2 text-neutral-500 dark:text-neutral-400 pointer-events-none z-10 origin-left",O&&"text-primary-600 dark:text-primary-400","cursor-text"),children:a}),c.jsx("input",{ref:R,type:B,value:N,disabled:p||d,className:ce(JS({variant:t,size:r,state:k}),l&&"pl-10",(u||f||d)&&"pr-10",m&&O&&"pt-6 pb-2",(!r||r==="default")&&"py-[12px]","placeholder-[#777]",e),style:{...x.style},onFocus:Z,onBlur:V,onChange:F,...x}),c.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex items-center space-x-1",children:[d&&c.jsx(_.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-4 h-4 text-neutral-500",children:c.jsx("svg",{viewBox:"0 0 24 24",fill:"none",className:"w-full h-full",children:c.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeDasharray:"8",strokeDashoffset:"8"})})}),!d&&k==="error"&&c.jsx(Wt,{className:"w-4 h-4 text-error-500"}),!d&&k==="success"&&c.jsx(Dr,{className:"w-4 h-4 text-success-500"}),f&&!d&&c.jsx("button",{type:"button",onClick:()=>S(!P),className:"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-200 transition-colors",tabIndex:-1,children:P?c.jsx(_x,{className:"w-4 h-4"}):c.jsx(Hs,{className:"w-4 h-4"})}),u&&!d&&c.jsx("div",{className:"text-neutral-500 dark:text-neutral-400",children:u})]})]}),c.jsx(pe,{children:w&&c.jsx(_.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.15},className:ce("absolute inset-0 rounded-xl pointer-events-none",k==="error"&&"ring-2 ring-error-500/20",k==="success"&&"ring-2 ring-success-500/20",k==="default"&&"ring-2 ring-primary-500/20")})})]}),c.jsx(pe,{mode:"wait",children:(i||o||s)&&c.jsxs(_.div,{initial:{opacity:0,y:-8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.2},className:"mt-2 text-sm flex items-center space-x-1",children:[o&&c.jsxs(c.Fragment,{children:[c.jsx(Wt,{className:"w-4 h-4 text-error-500 flex-shrink-0"}),c.jsx("span",{className:"text-error-600 dark:text-error-400",children:o})]}),s&&!o&&c.jsxs(c.Fragment,{children:[c.jsx(Dr,{className:"w-4 h-4 text-success-500 flex-shrink-0"}),c.jsx("span",{className:"text-success-600 dark:text-success-400",children:s})]}),i&&!o&&!s&&c.jsx("span",{className:"text-neutral-600 dark:text-neutral-400",children:i})]})})]})});To.displayName="Input";const eN=()=>{const e=kt();return c.jsxs(_.div,{className:"flex flex-col items-center justify-center text-center py-16 px-6",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5,ease:"easeOut"},children:[c.jsxs(_.div,{className:"relative w-24 h-24 mb-6",initial:{rotate:-15},animate:{rotate:[15,-10,10,-5,5,0]},transition:{duration:1,ease:"easeInOut"},children:[c.jsx(gh,{className:"absolute top-0 left-0 w-8 h-8 text-sky-400 opacity-60"}),c.jsx(wo,{className:"w-24 h-24 text-green-500"}),c.jsx(bo,{className:"absolute bottom-0 right-0 w-10 h-10 text-blue-400 opacity-70"})]}),c.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 mb-2",children:"Tu jardín está vacío"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400 max-w-sm mb-6",children:"Añade tu primera planta para empezar a monitorizar su salud y cuidados."}),c.jsxs(ne,{size:"lg",onClick:()=>e(it.toCamera()),children:[c.jsx(Zl,{className:"mr-2"}),"Añadir Planta"]})]})},tN=()=>{const{data:e=[],isLoading:t,error:r}=KS(),[n,a]=y.useState(""),[i,o]=y.useState("name"),s=y.useMemo(()=>[...e].filter(l=>l.name.toLowerCase().includes(n.toLowerCase())||l.species.toLowerCase().includes(n.toLowerCase())).sort((l,u)=>{switch(i){case"health":return(u.healthScore||0)-(l.healthScore||0);case"lastWatered":return(u.lastWatered?.getTime()||0)-(l.lastWatered?.getTime()||0);default:return l.name.localeCompare(u.name)}}),[e,n,i]);return t?c.jsxs("div",{className:"p-4 sm:p-6 space-y-6",children:[c.jsxs("header",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:"Mi Jardín"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Buscando tus plantas..."})]}),c.jsx(G,{className:"h-10 w-10 rounded-full"})]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:Array.from({length:8}).map((l,u)=>c.jsx(XS,{},u))})]}):r?c.jsx("div",{className:"flex justify-center items-center h-screen",children:c.jsxs("div",{className:"text-xl text-red-500 text-center",children:[c.jsx("p",{children:"Ocurrió un error al cargar tus plantas:"}),c.jsx("p",{className:"text-sm mt-2",children:r.message})]})}):c.jsxs("div",{className:"container-spacing element-spacing bg-white",style:{paddingBottom:"calc(88px + env(safe-area-inset-bottom))"},children:[c.jsx("header",{className:"flex items-center justify-between border-b-2 border-[#E0F2E9] bg-white pb-2 mb-4",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(wo,{size:20,strokeWidth:2,className:"text-[#2A7F3E] flex-shrink-0"}),c.jsx("h1",{className:"font-semibold text-[28px] leading-[1.2] text-[#222]",children:"Mi Jardín"}),c.jsxs("span",{className:"ml-2 bg-[#E0F2E9]/50 text-[#2A7F3E] text-sm font-medium rounded-full px-[6px] py-[2px]",children:[e.length," ",e.length===1?"planta":"plantas"]})]})}),c.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-3 mt-6 mb-6",children:[c.jsx(To,{type:"text",placeholder:"Buscar por nombre o especie...",value:n,onChange:l=>a(l.target.value),className:"max-w-md w-full mx-auto"}),c.jsxs("div",{className:"relative w-full max-w-xs",children:[c.jsxs("select",{value:i,onChange:l=>o(l.target.value),className:"appearance-none bg-white border border-green-300 rounded-[8px] px-4 py-2 h-10 text-green-700 font-medium shadow-sm focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-colors duration-150 w-full pr-8",style:{borderWidth:"1px"},children:[c.jsx("option",{value:"name",children:"Ordenar por Nombre"}),c.jsx("option",{value:"health",children:"Ordenar por Salud"}),c.jsx("option",{value:"lastWatered",children:"Ordenar por Riego"})]}),c.jsx("span",{className:"pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 text-green-400 text-base",children:"▼"})]})]}),c.jsx(pe,{children:s.length>0?c.jsx(_.div,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 element-spacing",initial:"hidden",animate:"visible",variants:{visible:{transition:{staggerChildren:.01,delayChildren:0}}},children:s.map((l,u)=>c.jsx(bp,{plant:l,index:Math.min(u,8)},l.id))}):c.jsx(eN,{})})]})};function il(e){"@babel/helpers - typeof";return il=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},il(e)}function dt(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function Me(e){dt(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||il(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}var rN={};function nN(){return rN}function Ri(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function Md(e){dt(1,arguments);var t=Me(e);return t.setHours(0,0,0,0),t}var aN=864e5;function iN(e,t){dt(2,arguments);var r=Md(e),n=Md(t),a=r.getTime()-Ri(r),i=n.getTime()-Ri(n);return Math.round((a-i)/aN)}function Ci(e,t){dt(2,arguments);var r=Me(e),n=Me(t),a=r.getTime()-n.getTime();return a<0?-1:a>0?1:a}function oN(e,t){dt(2,arguments);var r=Me(e),n=Me(t),a=r.getFullYear()-n.getFullYear(),i=r.getMonth()-n.getMonth();return a*12+i}function $d(e,t){var r=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return r<0?-1:r>0?1:r}function sN(e,t){dt(2,arguments);var r=Me(e),n=Me(t),a=$d(r,n),i=Math.abs(iN(r,n));r.setDate(r.getDate()-a*i);var o=+($d(r,n)===-a),s=a*(i-o);return s===0?0:s}function lN(e,t){return dt(2,arguments),Me(e).getTime()-Me(t).getTime()}var cN={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(t){return t<0?Math.ceil(t):Math.floor(t)}},uN="trunc";function dN(e){return cN[uN]}function fN(e){dt(1,arguments);var t=Me(e);return t.setHours(23,59,59,999),t}function mN(e){dt(1,arguments);var t=Me(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function hN(e){dt(1,arguments);var t=Me(e);return fN(t).getTime()===mN(t).getTime()}function pN(e,t){dt(2,arguments);var r=Me(e),n=Me(t),a=Ci(r,n),i=Math.abs(oN(r,n)),o;if(i<1)o=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-a*i);var s=Ci(r,n)===-a;hN(Me(e))&&i===1&&Ci(e,n)===1&&(s=!1),o=a*(i-Number(s))}return o===0?0:o}function gN(e,t,r){dt(2,arguments);var n=lN(e,t)/1e3;return dN()(n)}var vN={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},yN=function(t,r,n){var a,i=vN[t];return typeof i=="string"?a=i:r===1?a=i.one:a=i.other.replace("{{count}}",r.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+a:a+" ago":a};function Mn(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.width?String(t.width):e.defaultWidth,n=e.formats[r]||e.formats[e.defaultWidth];return n}}var xN={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},bN={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},wN={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},jN={date:Mn({formats:xN,defaultWidth:"full"}),time:Mn({formats:bN,defaultWidth:"full"}),dateTime:Mn({formats:wN,defaultWidth:"full"})},PN={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},SN=function(t,r,n,a){return PN[t]};function Gt(e){return function(t,r){var n=r!=null&&r.context?String(r.context):"standalone",a;if(n==="formatting"&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,o=r!=null&&r.width?String(r.width):i;a=e.formattingValues[o]||e.formattingValues[i]}else{var s=e.defaultWidth,l=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[l]||e.values[s]}var u=e.argumentCallback?e.argumentCallback(t):t;return a[u]}}var NN={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},_N={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},kN={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},EN={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},AN={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},CN={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ON=function(t,r){var n=Number(t),a=n%100;if(a>20||a<10)switch(a%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},TN={ordinalNumber:ON,era:Gt({values:NN,defaultWidth:"wide"}),quarter:Gt({values:_N,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:Gt({values:kN,defaultWidth:"wide"}),day:Gt({values:EN,defaultWidth:"wide"}),dayPeriod:Gt({values:AN,defaultWidth:"wide",formattingValues:CN,defaultFormattingWidth:"wide"})};function Vt(e){return function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=r.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;var o=i[0],s=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(s)?DN(s,function(f){return f.test(o)}):IN(s,function(f){return f.test(o)}),u;u=e.valueCallback?e.valueCallback(l):l,u=r.valueCallback?r.valueCallback(u):u;var d=t.slice(o.length);return{value:u,rest:d}}}function IN(e,t){for(var r in e)if(e.hasOwnProperty(r)&&t(e[r]))return r}function DN(e,t){for(var r=0;r<e.length;r++)if(t(e[r]))return r}function wp(e){return function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.match(e.matchPattern);if(!n)return null;var a=n[0],i=t.match(e.parsePattern);if(!i)return null;var o=e.valueCallback?e.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;var s=t.slice(a.length);return{value:o,rest:s}}}var MN=/^(\d+)(th|st|nd|rd)?/i,$N=/\d+/i,zN={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},RN={any:[/^b/i,/^(a|c)/i]},LN={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},FN={any:[/1/i,/2/i,/3/i,/4/i]},BN={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},UN={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},WN={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},HN={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},qN={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},ZN={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},KN={ordinalNumber:wp({matchPattern:MN,parsePattern:$N,valueCallback:function(t){return parseInt(t,10)}}),era:Vt({matchPatterns:zN,defaultMatchWidth:"wide",parsePatterns:RN,defaultParseWidth:"any"}),quarter:Vt({matchPatterns:LN,defaultMatchWidth:"wide",parsePatterns:FN,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:Vt({matchPatterns:BN,defaultMatchWidth:"wide",parsePatterns:UN,defaultParseWidth:"any"}),day:Vt({matchPatterns:WN,defaultMatchWidth:"wide",parsePatterns:HN,defaultParseWidth:"any"}),dayPeriod:Vt({matchPatterns:qN,defaultMatchWidth:"any",parsePatterns:ZN,defaultParseWidth:"any"})},GN={code:"en-US",formatDistance:yN,formatLong:jN,formatRelative:SN,localize:TN,match:KN,options:{weekStartsOn:0,firstWeekContainsDate:1}};function jp(e,t){if(e==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}function VN(e){return jp({},e)}var zd=1440,YN=2520,Ps=43200,XN=86400;function QN(e,t,r){var n,a;dt(2,arguments);var i=nN(),o=(n=(a=r?.locale)!==null&&a!==void 0?a:i.locale)!==null&&n!==void 0?n:GN;if(!o.formatDistance)throw new RangeError("locale must contain formatDistance property");var s=Ci(e,t);if(isNaN(s))throw new RangeError("Invalid time value");var l=jp(VN(r),{addSuffix:!!r?.addSuffix,comparison:s}),u,d;s>0?(u=Me(t),d=Me(e)):(u=Me(e),d=Me(t));var f=gN(d,u),m=(Ri(d)-Ri(u))/1e3,h=Math.round((f-m)/60),p;if(h<2)return r!=null&&r.includeSeconds?f<5?o.formatDistance("lessThanXSeconds",5,l):f<10?o.formatDistance("lessThanXSeconds",10,l):f<20?o.formatDistance("lessThanXSeconds",20,l):f<40?o.formatDistance("halfAMinute",0,l):f<60?o.formatDistance("lessThanXMinutes",1,l):o.formatDistance("xMinutes",1,l):h===0?o.formatDistance("lessThanXMinutes",1,l):o.formatDistance("xMinutes",h,l);if(h<45)return o.formatDistance("xMinutes",h,l);if(h<90)return o.formatDistance("aboutXHours",1,l);if(h<zd){var v=Math.round(h/60);return o.formatDistance("aboutXHours",v,l)}else{if(h<YN)return o.formatDistance("xDays",1,l);if(h<Ps){var g=Math.round(h/zd);return o.formatDistance("xDays",g,l)}else if(h<XN)return p=Math.round(h/Ps),o.formatDistance("aboutXMonths",p,l)}if(p=pN(d,u),p<12){var x=Math.round(h/Ps);return o.formatDistance("xMonths",x,l)}else{var b=p%12,w=Math.floor(p/12);return b<3?o.formatDistance("aboutXYears",w,l):b<9?o.formatDistance("overXYears",w,l):o.formatDistance("almostXYears",w+1,l)}}function Pp(e,t){return dt(1,arguments),QN(e,Date.now(),t)}const JN=async e=>{const{data:t,error:r}=await he.from("plants").select(`
      *,
      plant_images(*)
    `).eq("id",e).single();if(r)throw console.error(`Error fetching plant ${e}:`,r),r.code==="PGRST116"?new Error("Planta no encontrada."):new Error("Error al cargar la información de la planta.");const n=t;return{id:n.id,name:n.name,species:n.species,description:n.description??void 0,funFacts:n.fun_facts??void 0,variety:n.variety??void 0,nickname:n.nickname??void 0,location:n.location,plantEnvironment:n.plant_environment,lightRequirements:n.light_requirements,dateAdded:new Date(n.date_added),lastWatered:n.last_watered?new Date(n.last_watered):void 0,lastFertilized:n.last_fertilized?new Date(n.last_fertilized):void 0,healthScore:n.health_score??0,careProfile:n.care_profile,personality:n.personality,images:n.plant_images.map(a=>({id:a.id,url:a.url??"",timestamp:new Date(a.created_at),isProfileImage:a.is_profile_image??!1,healthAnalysis:a.health_analysis})),chatHistory:[],notifications:[]}},dc=e=>{const{data:t,isLoading:r,error:n}=ch({queryKey:["plant",e],queryFn:async()=>JN(e),enabled:!!e,staleTime:6e5,gcTime:18e5,refetchOnWindowFocus:!1,refetchOnMount:!1,retry:1}),a=dr(s=>s.setPlant),i=dr(s=>s.selectPlant);y.useEffect(()=>(t&&(a(t),i(t.id)),()=>{i(null)}),[t,a,i]);const o=y.useMemo(()=>{if(!t)return[];const s=[];if(!t.images||t.images.length===0)return s;const l=t.images.map(u=>u.healthAnalysis?.confidence||null).filter(u=>u!==null);if(l.length>=3){const u=l.slice(-3);if(u[0]>u[1]&&u[1]>u[2]){const d=u[0]-u[2];s.push({type:"warning",title:"Tendencia de Salud a la Baja",message:`La salud de tu planta ha disminuido un ${d.toFixed(0)}% en las últimas revisiones.`})}}if(t.lastWatered&&t.careProfile){const u=sN(new Date,new Date(t.lastWatered)),d=t.careProfile.wateringFrequency;u>d&&s.push({type:"tip",title:"Consejo de Riego",message:`Han pasado ${u} días desde el último riego. El intervalo recomendado es de ${d} días.`})}return s},[t]);return{plant:t,insights:o,loading:r,error:n?.message||null}},e_=()=>{const e=yo(),r=yr(s=>s.user)?.id,{addToast:n}=Zn(),a=Ir({mutationFn:async({plantId:s,imageDataUrl:l,note:u})=>{if(!r)throw new Error("User not authenticated");console.log("🖼️ [Image] Iniciando proceso de subida de imagen..."),console.log("🔬 [Image] Analizando imagen con IA...");const d=await yp(l);console.log("☁️ [Image] Subiendo imagen a Storage...");const f=await vp(l,"plant-images",`${r}/${s}`);console.log("💾 [Image] Guardando registro en base de datos...");const m=await An.addPlantImage(s,{url:f,timestamp:new Date,isProfileImage:!1,healthAnalysis:d.health},r);return d.health?.confidence&&(console.log("🏥 [Image] Actualizando health score de la planta..."),await An.updatePlantHealthScore(s,r,d.health.confidence,d.health,m.id)),console.log("✅ [Image] Proceso completado exitosamente"),{image:m,analysis:d,note:u}},onSuccess:(s,l)=>{e.invalidateQueries({queryKey:["plants"]}),e.invalidateQueries({queryKey:["plant",l.plantId]});const{setPlant:u}=dr.getState(),d=dr.getState().getPlantById(l.plantId);if(d){const f={...d,images:[...d.images,s.image],healthScore:s.analysis.health?.confidence||d.healthScore};u(f)}n({type:"success",title:"Nueva imagen añadida",message:`Análisis completado. Salud actual: ${s.analysis.health?.confidence?.toFixed(0)||"N/A"}%`})},onError:s=>{console.error("💥 [Image] Error en proceso de subida:",s),n({type:"error",title:"Error al agregar imagen",message:s.message})}}),i=Ir({mutationFn:async({plantId:s,imageId:l})=>{if(!r)throw new Error("User not authenticated");return console.log("🖼️ [Profile] Cambiando imagen de perfil..."),await An.setProfileImage(s,l,r),{plantId:s,imageId:l}},onSuccess:s=>{e.invalidateQueries({queryKey:["plants"]}),e.invalidateQueries({queryKey:["plant",s.plantId]}),n({type:"success",title:"Imagen de perfil actualizada",message:"La imagen principal de la planta ha sido cambiada"})},onError:s=>{n({type:"error",title:"Error al cambiar imagen de perfil",message:s.message})}}),o=Ir({mutationFn:async({plantId:s,imageId:l})=>{if(!r)throw new Error("User not authenticated");return console.log("🗑️ [Image] Eliminando imagen..."),await An.deleteImage(l,r),{plantId:s,imageId:l}},onSuccess:s=>{e.invalidateQueries({queryKey:["plants"]}),e.invalidateQueries({queryKey:["plant",s.plantId]}),n({type:"success",title:"Imagen eliminada",message:"La imagen ha sido eliminada de tu planta"})},onError:s=>{n({type:"error",title:"Error al eliminar imagen",message:s.message})}});return{addPlantImage:a.mutate,isAddingImage:a.isPending,setProfileImage:i.mutate,isSettingProfileImage:i.isPending,deleteImage:o.mutate,isDeletingImage:o.isPending}};function t_({images:e}){const[t,r]=y.useState(null);if(!e||e.length===0)return c.jsx(_t,{className:"mt-4",children:c.jsx(hr,{className:"pt-6",children:c.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[c.jsx(cr,{className:"w-12 h-12 text-muted-foreground mb-4"}),c.jsx("p",{className:"text-muted-foreground",children:"No hay imágenes para esta planta todavía."}),c.jsx("p",{className:"text-sm text-muted-foreground/70 mt-2",children:"¡Agrega algunas fotos para seguir su progreso!"})]})})});const n=[...e].sort((l,u)=>new Date(u.timestamp).getTime()-new Date(l.timestamp).getTime()),a=l=>{r(l)},i=()=>{r(null)},o=l=>{if(t===null)return;const u=l==="prev"?(t-1+n.length)%n.length:(t+1)%n.length;r(u)},s=l=>(l instanceof Date?l:new Date(l)).toLocaleDateString("es-ES",{day:"numeric",month:"short",year:"numeric"});return c.jsxs("div",{className:"mt-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h2",{className:"text-xl font-bold tracking-tight flex items-center",children:[c.jsx(cr,{className:"w-5 h-5 mr-2 text-primary"}),"Galería de Imágenes"]}),c.jsxs("span",{className:"text-sm text-muted-foreground",children:[n.length," foto",n.length!==1?"s":""]})]}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:n.map((l,u)=>c.jsxs(_.div,{className:"aspect-square relative rounded-[8px] overflow-hidden cursor-pointer group w-[80px] h-[80px]",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>a(u),children:[c.jsx(uc,{src:l.url,alt:`Imagen de planta del ${s(l.timestamp)}`,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110 rounded-[8px]"}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:c.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-3",children:c.jsx("div",{className:"flex items-center text-white text-xs gap-2",children:c.jsxs("span",{className:"flex items-center",children:[c.jsx(Ii,{className:"w-3 h-3 mr-1"}),s(l.timestamp)]})})})}),l.isProfileImage&&c.jsx("div",{className:"absolute top-2 right-2 bg-primary text-primary-foreground text-xs px-2 py-1 rounded-full font-medium",children:"Principal"})]},l.id))}),c.jsx(pe,{children:t!==null&&c.jsx(_.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-4",onClick:i,children:c.jsxs(_.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:"relative max-w-4xl max-h-full",onClick:l=>l.stopPropagation(),children:[c.jsx("button",{onClick:i,className:"absolute top-4 right-4 z-10 bg-black/50 text-white p-2 rounded-full hover:bg-black/70 transition-colors",children:c.jsx(xo,{className:"w-6 h-6"})}),n.length>1&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>o("prev"),className:"absolute left-4 top-1/2 -translate-y-1/2 z-10 bg-black/50 text-white p-2 rounded-full hover:bg-black/70 transition-colors",children:c.jsx(kx,{className:"w-6 h-6"})}),c.jsx("button",{onClick:()=>o("next"),className:"absolute right-4 top-1/2 -translate-y-1/2 z-10 bg-black/50 text-white p-2 rounded-full hover:bg-black/70 transition-colors",children:c.jsx(Ex,{className:"w-6 h-6"})})]}),c.jsx("img",{src:n[t].url,alt:`Imagen de planta del ${s(n[t].timestamp)}`,className:"max-w-full max-h-full object-contain rounded-lg"}),c.jsxs("div",{className:"absolute bottom-4 left-4 right-4 bg-black/50 text-white p-4 rounded-lg backdrop-blur-sm",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx(Ii,{className:"w-4 h-4 mr-2"}),c.jsx("span",{className:"text-sm",children:s(n[t].timestamp)})]}),c.jsxs("span",{className:"text-sm text-white/70",children:[t+1," de ",n.length]})]}),c.jsx("div",{className:"mt-2 text-sm flex items-center gap-2",children:(()=>{const l=n[t].healthAnalysis;if(!l)return c.jsx("span",{className:"italic text-white/60",children:"Sin análisis"});let u="🌱",d="Excelente";switch(l.overallHealth){case"excellent":u="🌱",d="Excelente";break;case"good":u="🌿",d="Buena";break;case"fair":u="🍃",d="Regular";break;case"poor":u="🥀",d="Baja";break;default:u="🌱",d=l.overallHealth}let f;const m={excellent:95,good:80,fair:60,poor:30};return l.overallHealth&&m[l.overallHealth]?f=m[l.overallHealth]:typeof l.confidence=="number"&&(f=l.confidence<=1?l.confidence*100:l.confidence),c.jsxs("span",{children:["Salud: ",c.jsx("span",{className:"font-semibold",children:d})," ",c.jsx("span",{children:u}),f!==void 0&&c.jsxs("span",{className:"ml-2",children:["(",Math.round(f),"%)"]})]})})()}),n[t].isProfileImage&&c.jsx("div",{className:"mt-2",children:c.jsx("span",{className:"bg-primary text-primary-foreground text-xs px-2 py-1 rounded-full",children:"Imagen Principal"})})]})]})})})]})}const r_=new sc,n_=()=>{const[e,t]=y.useState(!1),r=yo(),n=yr(s=>s.user),{addToast:a}=Zn(),i=Ir({mutationFn:async({plantId:s,species:l,commonName:u})=>{if(!n)throw new Error("User not authenticated");t(!0),a({type:"info",title:"🤖 Completando información",message:`Consultando IA para ${u||l}...`,duration:3e3});try{const d=await DS(l,u);return await r_.updatePlantInfo(s,n.id,{plantEnvironment:d.plantEnvironment,lightRequirements:d.lightRequirements,description:d.description,funFacts:d.funFacts})}catch(d){throw console.error("❌ [COMPLETAR IA] Error durante el proceso:",d),d}finally{t(!1)}},onSuccess:s=>{console.log("🔄 [COMPLETAR IA] Refrescando datos en cache..."),a({type:"success",title:"✅ ¡Información completada!",message:`Se agregaron datos de ambiente y luz para ${s.name}`,duration:5e3}),r.invalidateQueries({queryKey:["plant",s.id]}),r.invalidateQueries({queryKey:["plants"]}),console.log("✅ [COMPLETAR IA] Cache actualizado correctamente")},onError:s=>{console.error("💥 [COMPLETAR IA] Error final en la operación:",s),a({type:"error",title:"❌ Error al completar información",message:"No se pudo obtener los datos de IA. Intenta de nuevo.",duration:7e3}),t(!1)}});return{completeInfo:(s,l,u)=>i.mutate({plantId:s,species:l,commonName:u}),isCompleting:e||i.isPending,error:i.error,isSuccess:i.isSuccess}},a_=({plant:e,variant:t="primary",size:r="sm",showLabel:n=!0,className:a=""})=>{const{updatePlantHealthMutation:i,isUpdatingPlantHealth:o}=Co(),s=yr(h=>h.user),{addToast:l}=Zn(),{plant:u}=dc(e.id),d=async()=>{if(!s?.id){l({type:"error",title:"Error",message:"Debes estar logueado para actualizar el diagnóstico"});return}if(!u){l({type:"error",title:"Error",message:"No se pudieron cargar los datos de la planta"});return}console.log("🩺 [Button] Actualizando diagnóstico para:",e.name),i({plant:u,userId:s.id})},f=c.jsxs(c.Fragment,{children:[o?c.jsx(_.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:c.jsx(cn,{size:r.includes("icon")?16:14})}):c.jsx(vh,{size:r.includes("icon")?16:14}),n&&!r.includes("icon")&&c.jsx("span",{className:"ml-2 text-xs",children:o?"Analizando...":"Analizar"})]}),m=r.includes("icon");return c.jsx(ne,{onClick:d,disabled:o||!u,size:r,variant:t,className:a,"aria-label":m?`Actualizar diagnóstico de salud para ${e.name}`:void 0,title:m?`Actualizar diagnóstico de salud para ${e.name}`:void 0,children:f})},i_=({plant:e})=>{const t=kt(),[r,n]=y.useState(!1),[a,i]=y.useState(!1),{deletePlant:o,isDeletingPlant:s}=Co(),{completeInfo:l,isCompleting:u}=n_(),{scrollY:d}=Ax(),f=Gu(d,[0,300],[0,150]),m=Gu(d,[0,200],[1,.3]),h=e.images?.find(k=>k.isProfileImage)||e.images?.[0],p=!e.plantEnvironment||!e.lightRequirements,v=()=>{window.confirm("¿Estás seguro de que quieres eliminar esta planta? Esta acción es irreversible.")&&o(e.id,{onSuccess:()=>{t("/")}})},g=()=>{console.log("🎯 [UI] Usuario solicitó completar información con IA"),console.log("🌱 [UI] Datos de la planta:",{id:e.id,nombre:e.name,especie:e.species,ambienteActual:e.plantEnvironment||"No especificado",luzActual:e.lightRequirements||"No especificado"}),n(!1),i(!0)},x=()=>{console.log("✅ [UI] Usuario confirmó el completado automático"),i(!1),l(e.id,e.species,e.name)},b=()=>{console.log("❌ [UI] Usuario canceló el completado automático"),i(!1)},w=k=>(k instanceof Date?k:new Date(k)).toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"}),j=k=>{switch(k){case"interior":return c.jsx(Ti,{className:"w-4 h-4 mr-2"});case"exterior":return c.jsx(Vu,{className:"w-4 h-4 mr-2"});case"ambos":return c.jsxs(c.Fragment,{children:[c.jsx(Ti,{className:"w-3 h-3 mr-1"}),c.jsx(Vu,{className:"w-3 h-3 mr-1"})]});default:return null}},P=k=>{switch(k){case"interior":return"Interior";case"exterior":return"Exterior";case"ambos":return"Interior/Exterior";default:return null}},S=k=>{switch(k){case"poca_luz":return c.jsx(Ox,{className:"w-4 h-4 mr-2"});case"luz_indirecta":return c.jsx(Mr,{className:"w-4 h-4 mr-2 opacity-60"});case"luz_directa_parcial":return c.jsx(Mr,{className:"w-4 h-4 mr-2 opacity-80"});case"pleno_sol":return c.jsx(Mr,{className:"w-4 h-4 mr-2"});default:return null}},N=k=>{switch(k){case"poca_luz":return"Poca luz";case"luz_indirecta":return"Luz indirecta";case"luz_directa_parcial":return"Sol parcial";case"pleno_sol":return"Pleno sol";default:return null}},C={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.2,delayChildren:.1}}},T={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",damping:25,stiffness:120}}},R={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.6}}};return y.useEffect(()=>{const k=()=>n(!1);if(r)return document.addEventListener("click",k),()=>document.removeEventListener("click",k)},[r]),c.jsxs(_.div,{className:"relative h-96 w-full overflow-hidden",variants:C,initial:"hidden",animate:"visible",children:[c.jsx(_.div,{className:"absolute inset-0 scale-110",style:{y:f,opacity:m},children:h?c.jsx(uc,{src:h.url,alt:e.name,className:"h-full w-full object-cover"}):c.jsx("div",{className:"h-full w-full bg-gradient-to-br from-green-400 via-green-500 to-green-600",children:c.jsx("div",{className:"absolute inset-0 opacity-30",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Ccircle cx='7' cy='7' r='2'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})})}),c.jsxs(_.div,{className:"absolute inset-0",variants:R,children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[rgba(0,0,0,0.6)] to-transparent"}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-transparent via-transparent to-black/30"}),c.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-background/60 to-transparent"})]}),c.jsx("div",{className:"absolute top-0 left-0 right-0 p-4 pt-safe-top z-20",children:c.jsxs(_.div,{className:"flex items-center justify-between",variants:T,children:[c.jsx(ne,{"aria-label":"Volver atrás",variant:"ghost",size:"icon",onClick:()=>t("/"),className:"bg-black/30 text-white backdrop-blur-lg rounded-full border border-white/20 hover:bg-black/50 transition-all duration-300",children:c.jsx(Gl,{size:20})}),c.jsx("div",{className:"flex items-center space-x-2",children:c.jsxs("div",{className:"relative",children:[c.jsx(ne,{"aria-label":"Más opciones",variant:"ghost",size:"icon",onClick:k=>{k.stopPropagation(),n(O=>!O)},className:"bg-neutral-800/90 text-white backdrop-blur-lg rounded-full border border-neutral-600 hover:bg-neutral-700 transition-all duration-300 dark:bg-neutral-200/90 dark:text-neutral-900 dark:border-neutral-400 dark:hover:bg-neutral-300",children:c.jsx(yh,{size:20})}),c.jsx(pe,{children:r&&c.jsx(_.div,{initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},transition:{duration:.15},className:"absolute right-0 mt-2 w-48 origin-top-right rounded-xl bg-background/95 backdrop-blur-lg shadow-xl ring-1 ring-black/10 focus:outline-none z-30 border border-border/50",onClick:k=>k.stopPropagation(),children:c.jsxs("div",{className:"py-2",children:[p&&c.jsxs("button",{onClick:g,disabled:u,className:"flex w-full items-center px-4 py-3 text-sm text-contrast-high hover:bg-contrast-surface transition-colors rounded-lg mx-2",children:[u?c.jsx(Tn,{className:"mr-3 h-4 w-4 animate-spin"}):c.jsx(at,{className:"mr-3 h-4 w-4"}),c.jsx("span",{children:u?"Completando...":"Completar con IA"})]}),c.jsx("div",{className:"flex w-full items-center px-2 py-1",children:c.jsx(a_,{plant:e,variant:"outline",size:"sm",showLabel:!0,className:"w-full"})}),c.jsxs("button",{onClick:v,disabled:s,className:"flex w-full items-center px-4 py-3 text-sm text-error-600 dark:text-error-500 hover:bg-error-50 dark:hover:bg-error-900/20 transition-colors rounded-lg mx-2 font-medium",children:[s?c.jsx(Tn,{className:"mr-3 h-4 w-4 animate-spin"}):c.jsx(Cx,{className:"mr-3 h-4 w-4"}),c.jsx("span",{children:s?"Eliminando...":"Eliminar planta"})]})]})})})]})})]})}),c.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-6 pb-safe-bottom z-10",children:c.jsxs(_.div,{className:"space-y-4",variants:T,children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(_.h1,{className:"text-[24px] font-bold text-white drop-shadow-lg",variants:T,children:e.nickname||e.name}),c.jsx(_.p,{className:"text-[16px] text-white/90 font-medium",variants:T,children:e.species})]}),c.jsxs(_.div,{className:"flex flex-wrap gap-2 pt-2 max-h-32 overflow-y-auto",variants:T,children:[e.location&&c.jsxs("div",{className:"flex items-center text-white/80 bg-black/30 backdrop-blur-sm px-3 py-2 rounded-full border border-white/20",children:[c.jsx(xh,{className:"w-4 h-4 mr-2"}),c.jsx("span",{className:"text-sm font-medium",children:e.location})]}),e.dateAdded&&c.jsxs("div",{className:"flex items-center text-white/80 bg-black/30 backdrop-blur-sm px-3 py-2 rounded-full border border-white/20",children:[c.jsx(Ii,{className:"w-4 h-4 mr-2"}),c.jsxs("span",{className:"text-sm font-medium",children:["Desde ",w(e.dateAdded)]})]}),e.plantEnvironment&&P(e.plantEnvironment)&&c.jsxs("div",{className:"flex items-center text-white/80 bg-black/30 backdrop-blur-sm px-3 py-2 rounded-full border border-white/20",children:[j(e.plantEnvironment),c.jsx("span",{className:"text-sm font-medium",children:P(e.plantEnvironment)})]}),e.lightRequirements&&N(e.lightRequirements)&&c.jsxs("div",{className:"flex items-center text-white/80 bg-black/30 backdrop-blur-sm px-3 py-2 rounded-full border border-white/20",children:[S(e.lightRequirements),c.jsx("span",{className:"text-sm font-medium",children:N(e.lightRequirements)})]}),e.images&&e.images.length>0&&c.jsx("div",{className:"flex items-center text-white/80 bg-black/30 backdrop-blur-sm px-3 py-2 rounded-full border border-white/20",children:c.jsxs("span",{className:"text-sm font-medium",children:[e.images.length," foto",e.images.length!==1?"s":""]})})]})]})}),c.jsx(pe,{children:a&&c.jsx(_.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:b,children:c.jsxs(_.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},onClick:k=>k.stopPropagation(),className:"bg-white dark:bg-gray-900 rounded-2xl p-6 max-w-md w-full mx-4 shadow-xl",children:[c.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[c.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center",children:c.jsx(at,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Completar con IA"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Información automática"})]})]}),c.jsxs("div",{className:"space-y-3 mb-6",children:[c.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"¿Quieres que la IA complete la información faltante de esta planta?"}),c.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-3 space-y-2",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"text-2xl",children:"🌱"}),c.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:e.name})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"text-2xl",children:"🔬"}),c.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:e.species})]})]}),c.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[c.jsx("p",{className:"font-medium mb-1",children:"La IA agregará:"}),c.jsxs("ul",{className:"space-y-1",children:[c.jsx("li",{children:"• Ambiente recomendado (interior/exterior)"}),c.jsx("li",{children:"• Necesidades de luz específicas"})]})]})]}),c.jsxs("div",{className:"flex space-x-3",children:[c.jsx(ne,{variant:"outline",onClick:b,className:"flex-1",disabled:u,children:"Cancelar"}),c.jsx(ne,{onClick:x,className:"flex-1 bg-green-600 hover:bg-green-700 text-white",disabled:u,children:u?c.jsxs(c.Fragment,{children:[c.jsx(Tn,{className:"w-4 h-4 mr-2 animate-spin"}),"Completando..."]}):c.jsxs(c.Fragment,{children:[c.jsx(at,{className:"w-4 h-4 mr-2"}),"Completar"]})})]})]})})})]})},o_=({plant:e})=>{const{careProfile:t,personality:r}=e;if(!t)return c.jsx("div",{className:"bg-background p-6 rounded-lg shadow-lg w-full text-center",children:c.jsx("p",{className:"text-muted-foreground",children:"No hay perfil de cuidados disponible para esta planta."})});const n=[{icon:c.jsx(bo,{size:20,strokeWidth:2,color:"#555"}),label:"RIEGO",value:`Cada ${t.wateringFrequency} días`},{icon:c.jsx(Mr,{size:20,strokeWidth:2,color:"#555"}),label:"LUZ SOLAR",value:t.sunlightRequirement},{icon:c.jsx(gh,{size:20,strokeWidth:2,color:"#555"}),label:"HUMEDAD",value:t.humidityPreference},{icon:c.jsx(bh,{size:20,strokeWidth:2,color:"#555"}),label:"TEMPERATURA IDEAL",value:`${t.temperatureRange.min}°C - ${t.temperatureRange.max}°C`},{icon:c.jsx(at,{size:20,strokeWidth:2,color:"#555"}),label:"FERTILIZACIÓN",value:`Cada ${t.fertilizingFrequency} días`},{icon:c.jsx(Vl,{size:20,strokeWidth:2,color:"#555"}),label:"TIPO DE SUELO",value:t.soilType}];return c.jsxs("div",{className:"w-full",style:{lineHeight:"1.4"},children:[c.jsx("div",{className:"grid grid-cols-2 gap-x-4 gap-y-6 mb-4",style:{gap:"24px 16px"},children:n.map((a,i)=>c.jsxs("div",{className:"flex flex-col items-start",children:[c.jsxs("div",{className:"flex items-center mb-1",children:[a.icon,c.jsx("span",{className:"ml-2 text-[12px] uppercase tracking-[0.4px] text-[#777] font-medium",children:a.label})]}),c.jsx("span",{className:"text-[15px] font-semibold text-[#333] mt-1",children:a.value})]},i))}),t.specialCare&&t.specialCare.length>0&&c.jsxs("div",{className:"mb-4",children:[c.jsx("h4",{className:"font-semibold text-[14px] text-[#333] mt-4 mb-2",children:"Cuidados Especiales"}),c.jsx("ul",{className:"list-none pl-0 ml-4",style:{lineHeight:"1.5"},children:t.specialCare.map((a,i)=>c.jsxs("li",{className:"flex items-start mb-1",children:[c.jsx("span",{className:"mr-2 text-[#2A7F3E] font-bold",style:{fontSize:18,lineHeight:"1"},children:"•"}),c.jsx("span",{className:"text-[14px] text-[#444]",children:a})]},i))})]}),c.jsx("hr",{className:"my-6",style:{border:"none",borderTop:"1px solid #EEE",margin:"24px 0"}}),r&&c.jsxs("div",{className:"mb-4",children:[c.jsxs("div",{className:"flex items-center mb-3",children:[c.jsx(ja,{size:20,strokeWidth:2,color:"#555",className:"mr-2"}),c.jsx("span",{className:"text-[18px] font-semibold text-[#333]",children:"Personalidad de la Planta"})]}),r.communicationStyle&&c.jsx("div",{className:Array.isArray(r.communicationStyle)&&r.communicationStyle.length>1?"grid grid-cols-2 gap-x-4 mb-3":"flex justify-center mb-3",children:(Array.isArray(r.communicationStyle)?r.communicationStyle:[r.communicationStyle]).map((a,i)=>c.jsxs("div",{className:"flex flex-col items-start mb-2",children:[c.jsx("span",{className:"text-[12px] uppercase tracking-[0.4px] text-[#777] font-medium",children:"ESTILO"}),c.jsx("span",{className:"text-[15px] font-semibold text-[#333] mt-1",children:a})]},i))}),r.catchphrases&&r.catchphrases.length>0&&c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-[14px] text-[#333] mb-2",children:"Frases Típicas"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:r.catchphrases.map((a,i)=>c.jsx("span",{className:"inline-block bg-[#F0FDF6] text-[#046A38] text-[14px] px-2 py-1 rounded-[4px] font-medium",style:{padding:"4px 8px",marginRight:8,marginBottom:8},children:a},i))})]})]})]})},s_=({funFacts:e})=>{const t={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{staggerChildren:.1}}},r={hidden:{opacity:0,y:10},visible:{opacity:1,y:0}};return c.jsxs(_.div,{className:"bg-white/0 dark:bg-transparent p-3 sm:p-4 w-full",variants:t,initial:"hidden",animate:"visible",children:[e&&e.length>0&&c.jsxs(_.div,{variants:r,children:[c.jsxs("div",{className:"flex items-center mb-6",children:[c.jsx("div",{className:"p-3 bg-yellow-500/10 rounded-full mr-4",children:c.jsx(at,{className:"w-6 h-6 text-yellow-500"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-2xl font-bold text-foreground",children:"Datos Curiosos"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Descubre cosas increíbles sobre esta planta"})]})]}),c.jsx("div",{className:"grid gap-4",children:e.map((n,a)=>c.jsxs(_.div,{className:"group flex items-start bg-yellow-500/5 hover:bg-yellow-500/10 border border-yellow-500/20 rounded-xl p-4 transition-all duration-300 hover:shadow-md",variants:r,whileHover:{scale:1.02},whileTap:{scale:.98},children:[c.jsx("div",{className:"flex-shrink-0 mr-4 mt-1",children:c.jsxs("div",{className:"relative",children:[c.jsx(wh,{className:"w-5 h-5 text-yellow-500 group-hover:text-yellow-600 transition-colors"}),c.jsx("div",{className:"absolute -inset-2 bg-yellow-500/20 rounded-full opacity-0 group-hover:opacity-100 transition-opacity pulse"})]})}),c.jsx("p",{className:"text-foreground/90 leading-relaxed font-medium group-hover:text-foreground transition-colors",children:n})]},a))})]}),(!e||e.length===0)&&c.jsx(_.div,{className:"mt-8 flex items-center justify-center p-6 bg-muted/30 rounded-xl border border-dashed border-muted-foreground/20",variants:r,children:c.jsxs("div",{className:"text-center",children:[c.jsx(at,{className:"w-6 h-6 text-yellow-400 mx-auto mb-2"}),c.jsx("p",{className:"text-muted-foreground font-medium",children:"No hay datos curiosos disponibles"}),c.jsx("p",{className:"text-xs text-muted-foreground/70 mt-1",children:"¡Pronto agregaremos información interesante!"})]})})]})},l_=()=>c.jsx(wo,{className:"w-5 h-5 text-[#EF9A9A]","aria-label":"Problema de hoja seca"}),c_=({analysis:e})=>{if(!e)return null;const t=e.issues&&e.issues.length>0;return c.jsxs("div",{className:"w-full",role:"region","aria-label":"Análisis de salud de la planta",style:{lineHeight:"1.4"},children:[t?c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-[16px] text-[#333] mt-3",children:"Problemas Detectados"}),c.jsxs("p",{className:"mb-2 text-[14px] text-[#D32F2F] font-medium",style:{marginTop:12,marginBottom:8},children:[e.issues.length," problema",e.issues.length!==1?"s":""," detectado",e.issues.length!==1?"s":""]}),c.jsx("ul",{className:"",children:e.issues.map((r,n)=>c.jsxs("li",{className:"flex items-start",style:{marginBottom:n<e.issues.length-1?16:0,paddingBottom:n<e.issues.length-1?16:0,borderBottom:n<e.issues.length-1?"1px solid #EEE":"none"},children:[c.jsx("div",{className:"flex-shrink-0 w-5 h-5 flex items-center justify-center mt-1",children:l_()}),c.jsxs("div",{className:"ml-4",children:[c.jsx("p",{className:"font-semibold text-[15px] text-[#333]",children:r.type}),c.jsx("p",{className:"text-[14px] text-[#555] mt-1",children:r.description})]})]},n))}),c.jsxs("div",{className:"mt-4",children:[c.jsx("h4",{className:"font-semibold text-[14px] text-[#333] mt-4 mb-2",children:"Tratamientos Sugeridos"}),c.jsx("ul",{className:"list-none pl-0 ml-3",style:{lineHeight:"1.5"},children:e.issues.map((r,n)=>c.jsxs("li",{className:"flex items-start mb-1",children:[c.jsx("span",{className:"mr-2 text-[#2A7F3E] font-bold",style:{fontSize:18,lineHeight:"1"},children:"•"}),c.jsx("span",{className:"text-[14px] text-[#444]",children:r.treatment})]},n))})]})]}):c.jsxs("div",{className:"flex flex-col items-center justify-center text-center p-6 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[c.jsx("span",{className:"text-4xl mb-2",role:"img","aria-label":"Planta saludable",children:"🌱"}),c.jsx(Tx,{className:"w-12 h-12 text-green-500 mb-3","aria-label":"Todo en orden"}),c.jsxs("h4",{className:"font-semibold text-lg text-green-700 dark:text-green-300 flex items-center gap-2",children:["¡Todo en orden!",c.jsx("span",{className:"text-base","aria-hidden":"true",children:"🌱"})]}),c.jsx("p",{className:"text-muted-foreground",children:"El análisis inicial no detectó problemas de salud significativos."})]}),e.recommendations&&e.recommendations.length>0&&c.jsxs("div",{className:"mt-4",children:[c.jsx("h4",{className:"font-semibold text-[14px] text-[#333] mt-4 mb-2",children:"Recomendaciones Adicionales"}),c.jsx("ul",{className:"list-none pl-0 ml-3",style:{lineHeight:"1.5"},children:e.recommendations.map((r,n)=>c.jsxs("li",{className:"flex items-start mb-1",children:[c.jsx("span",{className:"mr-2 text-[#2A7F3E] font-bold",style:{fontSize:18,lineHeight:"1"},children:"•"}),c.jsx("span",{className:"text-[14px] text-[#444]",children:r})]},n))})]})]})};var Io={},Sp={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(Sp);var fc={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(fc);var mc={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="string"||typeof r=="symbol"?r:Object.is(r?.valueOf?.(),-0)?"-0":String(r)}e.toKey=t})(mc);var Do={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){const n=[],a=r.length;if(a===0)return n;let i=0,o="",s="",l=!1;for(r.charCodeAt(0)===46&&(n.push(""),i++);i<a;){const u=r[i];s?u==="\\"&&i+1<a?(i++,o+=r[i]):u===s?s="":o+=u:l?u==='"'||u==="'"?s=u:u==="]"?(l=!1,n.push(o),o=""):o+=u:u==="["?(l=!0,o&&(n.push(o),o="")):u==="."?o&&(n.push(o),o=""):o+=u,i++}return o&&n.push(o),n}e.toPath=t})(Do);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Sp,r=fc,n=mc,a=Do;function i(s,l,u){if(s==null)return u;switch(typeof l){case"string":{if(t.isUnsafeProperty(l))return u;const d=s[l];return d===void 0?r.isDeepKey(l)?i(s,a.toPath(l),u):u:d}case"number":case"symbol":{typeof l=="number"&&(l=n.toKey(l));const d=s[l];return d===void 0?u:d}default:{if(Array.isArray(l))return o(s,l,u);if(Object.is(l?.valueOf(),-0)?l="-0":l=String(l),t.isUnsafeProperty(l))return u;const d=s[l];return d===void 0?u:d}}}function o(s,l,u){if(l.length===0)return u;let d=s;for(let f=0;f<l.length;f++){if(d==null||t.isUnsafeProperty(l[f]))return u;d=d[l[f]]}return d===void 0?u:d}e.get=i})(Io);var u_=Io.get;const pn=Fr(u_);var Np={exports:{}},me={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mo=60103,$o=60106,Ra=60107,La=60108,Fa=60114,Ba=60109,Ua=60110,Wa=60112,Ha=60113,hc=60120,qa=60115,Za=60116,_p=60121,kp=60122,Ep=60117,Ap=60129,Cp=60131;if(typeof Symbol=="function"&&Symbol.for){var He=Symbol.for;Mo=He("react.element"),$o=He("react.portal"),Ra=He("react.fragment"),La=He("react.strict_mode"),Fa=He("react.profiler"),Ba=He("react.provider"),Ua=He("react.context"),Wa=He("react.forward_ref"),Ha=He("react.suspense"),hc=He("react.suspense_list"),qa=He("react.memo"),Za=He("react.lazy"),_p=He("react.block"),kp=He("react.server.block"),Ep=He("react.fundamental"),Ap=He("react.debug_trace_mode"),Cp=He("react.legacy_hidden")}function qt(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Mo:switch(e=e.type,e){case Ra:case Fa:case La:case Ha:case hc:return e;default:switch(e=e&&e.$$typeof,e){case Ua:case Wa:case Za:case qa:case Ba:return e;default:return t}}case $o:return t}}}var d_=Ba,f_=Mo,m_=Wa,h_=Ra,p_=Za,g_=qa,v_=$o,y_=Fa,x_=La,b_=Ha;me.ContextConsumer=Ua;me.ContextProvider=d_;me.Element=f_;me.ForwardRef=m_;me.Fragment=h_;me.Lazy=p_;me.Memo=g_;me.Portal=v_;me.Profiler=y_;me.StrictMode=x_;me.Suspense=b_;me.isAsyncMode=function(){return!1};me.isConcurrentMode=function(){return!1};me.isContextConsumer=function(e){return qt(e)===Ua};me.isContextProvider=function(e){return qt(e)===Ba};me.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Mo};me.isForwardRef=function(e){return qt(e)===Wa};me.isFragment=function(e){return qt(e)===Ra};me.isLazy=function(e){return qt(e)===Za};me.isMemo=function(e){return qt(e)===qa};me.isPortal=function(e){return qt(e)===$o};me.isProfiler=function(e){return qt(e)===Fa};me.isStrictMode=function(e){return qt(e)===La};me.isSuspense=function(e){return qt(e)===Ha};me.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Ra||e===Fa||e===Ap||e===La||e===Ha||e===hc||e===Cp||typeof e=="object"&&e!==null&&(e.$$typeof===Za||e.$$typeof===qa||e.$$typeof===Ba||e.$$typeof===Ua||e.$$typeof===Wa||e.$$typeof===Ep||e.$$typeof===_p||e[0]===kp)};me.typeOf=qt;Np.exports=me;var w_=Np.exports,Ot=e=>e===0?0:e>0?1:-1,It=e=>typeof e=="number"&&e!=+e,Qr=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,U=e=>(typeof e=="number"||e instanceof Number)&&!It(e),er=e=>U(e)||typeof e=="string",j_=0,ka=e=>{var t=++j_;return"".concat(e||"").concat(t)},Rr=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!U(t)&&typeof t!="string")return n;var i;if(Qr(t)){if(r==null)return n;var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return It(i)&&(i=n),a&&r!=null&&i>r&&(i=r),i},Op=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1},ca=(e,t)=>U(e)&&U(t)?r=>e+r*(t-e):()=>t;function Tp(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):pn(n,t))===r)}var Ee=e=>e===null||typeof e>"u",pc=e=>Ee(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),P_=["viewBox","children"],S_=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Rd=["points","pathLength"],Ss={svg:P_,polygon:Rd,polyline:Rd},gc=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],vc=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(y.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(a=>{gc.includes(a)&&(n[a]=i=>r[a](r,i))}),n},N_=(e,t,r)=>n=>(e(t,r,n),null),__=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(a=>{var i=e[a];gc.includes(a)&&typeof i=="function"&&(n||(n={}),n[a]=N_(i,t,r))}),n},Ld=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",Fd=null,Ns=null,Ip=e=>{if(e===Fd&&Array.isArray(Ns))return Ns;var t=[];return y.Children.forEach(e,r=>{Ee(r)||(w_.isFragment(r)?t=t.concat(Ip(r.props.children)):t.push(r))}),Ns=t,Fd=e,t};function Dp(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(a=>Ld(a)):n=[Ld(t)],Ip(e).forEach(a=>{var i=pn(a,"type.displayName")||pn(a,"type.name");n.indexOf(i)!==-1&&r.push(a)}),r}var Mp=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,k_=(e,t,r,n)=>{var a,i=(a=n&&Ss?.[n])!==null&&a!==void 0?a:[];return t.startsWith("data-")||typeof e!="function"&&(n&&i.includes(t)||S_.includes(t))||r&&gc.includes(t)},ye=(e,t,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(y.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var a={};return Object.keys(n).forEach(i=>{var o;k_((o=n)===null||o===void 0?void 0:o[i],i,t,r)&&(a[i]=n[i])}),a},E_=["children","width","height","viewBox","className","style","title","desc"];function ol(){return ol=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ol.apply(null,arguments)}function A_(e,t){if(e==null)return{};var r,n,a=C_(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function C_(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var $p=y.forwardRef((e,t)=>{var{children:r,width:n,height:a,viewBox:i,className:o,style:s,title:l,desc:u}=e,d=A_(e,E_),f=i||{width:n,height:a,x:0,y:0},m=de("recharts-surface",o);return y.createElement("svg",ol({},ye(d,!0,"svg"),{className:m,width:n,height:a,style:s,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),y.createElement("title",null,l),y.createElement("desc",null,u),r)}),O_=["children","className"];function sl(){return sl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sl.apply(null,arguments)}function T_(e,t){if(e==null)return{};var r,n,a=I_(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function I_(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Lr=y.forwardRef((e,t)=>{var{children:r,className:n}=e,a=T_(e,O_),i=de("recharts-layer",n);return y.createElement("g",sl({className:i},ye(a,!0),{ref:t}),r)}),D_=y.createContext(null);function ke(e){return function(){return e}}const ll=Math.PI,cl=2*ll,Vr=1e-6,M_=cl-Vr;function zp(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function $_(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return zp;const r=10**t;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class z_{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?zp:$_(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,i,o){this._append`C${+t},${+r},${+n},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,a,i){if(t=+t,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,s=this._y1,l=n-t,u=a-r,d=o-t,f=s-r,m=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(m>Vr)if(!(Math.abs(f*l-u*d)>Vr)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let h=n-o,p=a-s,v=l*l+u*u,g=h*h+p*p,x=Math.sqrt(v),b=Math.sqrt(m),w=i*Math.tan((ll-Math.acos((v+m-g)/(2*x*b)))/2),j=w/b,P=w/x;Math.abs(j-1)>Vr&&this._append`L${t+j*d},${r+j*f}`,this._append`A${i},${i},0,0,${+(f*h>d*p)},${this._x1=t+P*l},${this._y1=r+P*u}`}}arc(t,r,n,a,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let s=n*Math.cos(a),l=n*Math.sin(a),u=t+s,d=r+l,f=1^o,m=o?a-i:i-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Vr||Math.abs(this._y1-d)>Vr)&&this._append`L${u},${d}`,n&&(m<0&&(m=m%cl+cl),m>M_?this._append`A${n},${n},0,1,${f},${t-s},${r-l}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:m>Vr&&this._append`A${n},${n},0,${+(m>=ll)},${f},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function Rp(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new z_(t)}function yc(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Lp(e){this._context=e}Lp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function zo(e){return new Lp(e)}function Fp(e){return e[0]}function Bp(e){return e[1]}function Up(e,t){var r=ke(!0),n=null,a=zo,i=null,o=Rp(s);e=typeof e=="function"?e:e===void 0?Fp:ke(e),t=typeof t=="function"?t:t===void 0?Bp:ke(t);function s(l){var u,d=(l=yc(l)).length,f,m=!1,h;for(n==null&&(i=a(h=o())),u=0;u<=d;++u)!(u<d&&r(f=l[u],u,l))===m&&((m=!m)?i.lineStart():i.lineEnd()),m&&i.point(+e(f,u,l),+t(f,u,l));if(h)return i=null,h+""||null}return s.x=function(l){return arguments.length?(e=typeof l=="function"?l:ke(+l),s):e},s.y=function(l){return arguments.length?(t=typeof l=="function"?l:ke(+l),s):t},s.defined=function(l){return arguments.length?(r=typeof l=="function"?l:ke(!!l),s):r},s.curve=function(l){return arguments.length?(a=l,n!=null&&(i=a(n)),s):a},s.context=function(l){return arguments.length?(l==null?n=i=null:i=a(n=l),s):n},s}function pi(e,t,r){var n=null,a=ke(!0),i=null,o=zo,s=null,l=Rp(u);e=typeof e=="function"?e:e===void 0?Fp:ke(+e),t=typeof t=="function"?t:ke(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?Bp:ke(+r);function u(f){var m,h,p,v=(f=yc(f)).length,g,x=!1,b,w=new Array(v),j=new Array(v);for(i==null&&(s=o(b=l())),m=0;m<=v;++m){if(!(m<v&&a(g=f[m],m,f))===x)if(x=!x)h=m,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),p=m-1;p>=h;--p)s.point(w[p],j[p]);s.lineEnd(),s.areaEnd()}x&&(w[m]=+e(g,m,f),j[m]=+t(g,m,f),s.point(n?+n(g,m,f):w[m],r?+r(g,m,f):j[m]))}if(b)return s=null,b+""||null}function d(){return Up().defined(a).curve(o).context(i)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:ke(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:ke(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:ke(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:ke(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:ke(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:ke(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:ke(!!f),u):a},u.curve=function(f){return arguments.length?(o=f,i!=null&&(s=o(i)),u):o},u.context=function(f){return arguments.length?(f==null?i=s=null:s=o(i=f),u):i},u}class Wp{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function R_(e){return new Wp(e,!0)}function L_(e){return new Wp(e,!1)}function Li(){}function Fi(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function Hp(e){this._context=e}Hp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Fi(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Fi(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function F_(e){return new Hp(e)}function qp(e){this._context=e}qp.prototype={areaStart:Li,areaEnd:Li,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Fi(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function B_(e){return new qp(e)}function Zp(e){this._context=e}Zp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Fi(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function U_(e){return new Zp(e)}function Kp(e){this._context=e}Kp.prototype={areaStart:Li,areaEnd:Li,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function W_(e){return new Kp(e)}function Bd(e){return e<0?-1:1}function Ud(e,t,r){var n=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(n||a<0&&-0),o=(r-e._y1)/(a||n<0&&-0),s=(i*a+o*n)/(n+a);return(Bd(i)+Bd(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(s))||0}function Wd(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function _s(e,t,r){var n=e._x0,a=e._y0,i=e._x1,o=e._y1,s=(i-n)/3;e._context.bezierCurveTo(n+s,a+s*t,i-s,o-s*r,i,o)}function Bi(e){this._context=e}Bi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:_s(this,this._t0,Wd(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,_s(this,Wd(this,r=Ud(this,e,t)),r);break;default:_s(this,this._t0,r=Ud(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function Gp(e){this._context=new Vp(e)}(Gp.prototype=Object.create(Bi.prototype)).point=function(e,t){Bi.prototype.point.call(this,t,e)};function Vp(e){this._context=e}Vp.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,i){this._context.bezierCurveTo(t,e,n,r,i,a)}};function H_(e){return new Bi(e)}function q_(e){return new Gp(e)}function Yp(e){this._context=e}Yp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=Hd(e),a=Hd(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Hd(e){var t,r=e.length-1,n,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(a[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function Z_(e){return new Yp(e)}function Ro(e,t){this._context=e,this._t=t}Ro.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function K_(e){return new Ro(e,.5)}function G_(e){return new Ro(e,0)}function V_(e){return new Ro(e,1)}function Ln(e,t){if((o=e.length)>1)for(var r=1,n,a,i=e[t[0]],o,s=i.length;r<o;++r)for(a=i,i=e[t[r]],n=0;n<s;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function ul(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function Y_(e,t){return e[t]}function X_(e){const t=[];return t.key=e,t}function Q_(){var e=ke([]),t=ul,r=Ln,n=Y_;function a(i){var o=Array.from(e.apply(this,arguments),X_),s,l=o.length,u=-1,d;for(const f of i)for(s=0,++u;s<l;++s)(o[s][u]=[0,+n(f,o[s].key,u,i)]).data=f;for(s=0,d=yc(t(o));s<l;++s)o[d[s]].index=s;return r(o,d),o}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:ke(Array.from(i)),a):e},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:ke(+i),a):n},a.order=function(i){return arguments.length?(t=i==null?ul:typeof i=="function"?i:ke(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(r=i??Ln,a):r},a}function J_(e,t){if((n=e.length)>0){for(var r,n,a=0,i=e[0].length,o;a<i;++a){for(o=r=0;r<n;++r)o+=e[r][a][1]||0;if(o)for(r=0;r<n;++r)e[r][a][1]/=o}Ln(e,t)}}function ek(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,i=n.length;r<i;++r){for(var o=0,s=0;o<a;++o)s+=e[o][r][1]||0;n[r][1]+=n[r][0]=-s/2}Ln(e,t)}}function tk(e,t){if(!(!((o=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,i,o;n<i;++n){for(var s=0,l=0,u=0;s<o;++s){for(var d=e[t[s]],f=d[n][1]||0,m=d[n-1][1]||0,h=(f-m)/2,p=0;p<s;++p){var v=e[t[p]],g=v[n][1]||0,x=v[n-1][1]||0;h+=g-x}l+=f,u+=h*f}a[n-1][1]+=a[n-1][0]=r,l&&(r-=u/l)}a[n-1][1]+=a[n-1][0]=r,Ln(e,t)}}var Xp={},Qp={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const a=new Map;for(let i=0;i<r.length;i++){const o=r[i],s=n(o);a.has(s)||a.set(s,o)}return Array.from(a.values())}e.uniqBy=t})(Qp);var xc={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(xc);var Jp={},Lo={},eg={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(eg);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eg;function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(Lo);var tg={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(tg);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Lo,r=tg;function n(a){return r.isObjectLike(a)&&t.isArrayLike(a)}e.isArrayLikeObject=n})(Jp);var rg={},ng={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Io;function r(n){return function(a){return t.get(a,n)}}e.property=r})(ng);var ag={},ks={},Es={},bc={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(bc);var wc={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(wc);var Fo={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(Fo);var qd;function rk(){return qd||(qd=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jc(),r=bc,n=wc,a=Fo;function i(f,m,h){return typeof h!="function"?t.isMatch(f,m):o(f,m,function p(v,g,x,b,w,j){const P=h(v,g,x,b,w,j);return P!==void 0?!!P:o(v,g,p,j)},new Map)}function o(f,m,h,p){if(m===f)return!0;switch(typeof m){case"object":return s(f,m,h,p);case"function":return Object.keys(m).length>0?o(f,{...m},h,p):a.eq(f,m);default:return r.isObject(f)?typeof m=="string"?m==="":!0:a.eq(f,m)}}function s(f,m,h,p){if(m==null)return!0;if(Array.isArray(m))return u(f,m,h,p);if(m instanceof Map)return l(f,m,h,p);if(m instanceof Set)return d(f,m,h,p);const v=Object.keys(m);if(f==null)return v.length===0;if(v.length===0)return!0;if(p&&p.has(m))return p.get(m)===f;p&&p.set(m,f);try{for(let g=0;g<v.length;g++){const x=v[g];if(!n.isPrimitive(f)&&!(x in f)||m[x]===void 0&&f[x]!==void 0||m[x]===null&&f[x]!==null||!h(f[x],m[x],x,f,m,p))return!1}return!0}finally{p&&p.delete(m)}}function l(f,m,h,p){if(m.size===0)return!0;if(!(f instanceof Map))return!1;for(const[v,g]of m.entries()){const x=f.get(v);if(h(x,g,v,f,m,p)===!1)return!1}return!0}function u(f,m,h,p){if(m.length===0)return!0;if(!Array.isArray(f))return!1;const v=new Set;for(let g=0;g<m.length;g++){const x=m[g];let b=!1;for(let w=0;w<f.length;w++){if(v.has(w))continue;const j=f[w];let P=!1;if(h(j,x,g,f,m,p)&&(P=!0),P){v.add(w),b=!0;break}}if(!b)return!1}return!0}function d(f,m,h,p){return m.size===0?!0:f instanceof Set?u([...f],[...m],h,p):!1}e.isMatchWith=i,e.isSetMatch=d}(Es)),Es}var Zd;function jc(){return Zd||(Zd=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rk();function r(n,a){return t.isMatchWith(n,a,()=>{})}e.isMatch=r}(ks)),ks}var ig={},Pc={},Sc={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(Sc);var Bo={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(Bo);var Uo={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",a="[object Boolean]",i="[object Arguments]",o="[object Symbol]",s="[object Date]",l="[object Map]",u="[object Set]",d="[object Array]",f="[object Function]",m="[object ArrayBuffer]",h="[object Object]",p="[object Error]",v="[object DataView]",g="[object Uint8Array]",x="[object Uint8ClampedArray]",b="[object Uint16Array]",w="[object Uint32Array]",j="[object BigUint64Array]",P="[object Int8Array]",S="[object Int16Array]",N="[object Int32Array]",C="[object BigInt64Array]",T="[object Float32Array]",R="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=m,e.arrayTag=d,e.bigInt64ArrayTag=C,e.bigUint64ArrayTag=j,e.booleanTag=a,e.dataViewTag=v,e.dateTag=s,e.errorTag=p,e.float32ArrayTag=T,e.float64ArrayTag=R,e.functionTag=f,e.int16ArrayTag=S,e.int32ArrayTag=N,e.int8ArrayTag=P,e.mapTag=l,e.numberTag=n,e.objectTag=h,e.regexpTag=t,e.setTag=u,e.stringTag=r,e.symbolTag=o,e.uint16ArrayTag=b,e.uint32ArrayTag=w,e.uint8ArrayTag=g,e.uint8ClampedArrayTag=x})(Uo);var og={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(og);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Sc,r=Bo,n=Uo,a=wc,i=og;function o(d,f){return s(d,void 0,d,new Map,f)}function s(d,f,m,h=new Map,p=void 0){const v=p?.(d,f,m,h);if(v!=null)return v;if(a.isPrimitive(d))return d;if(h.has(d))return h.get(d);if(Array.isArray(d)){const g=new Array(d.length);h.set(d,g);for(let x=0;x<d.length;x++)g[x]=s(d[x],x,m,h,p);return Object.hasOwn(d,"index")&&(g.index=d.index),Object.hasOwn(d,"input")&&(g.input=d.input),g}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const g=new RegExp(d.source,d.flags);return g.lastIndex=d.lastIndex,g}if(d instanceof Map){const g=new Map;h.set(d,g);for(const[x,b]of d)g.set(x,s(b,x,m,h,p));return g}if(d instanceof Set){const g=new Set;h.set(d,g);for(const x of d)g.add(s(x,void 0,m,h,p));return g}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(i.isTypedArray(d)){const g=new(Object.getPrototypeOf(d)).constructor(d.length);h.set(d,g);for(let x=0;x<d.length;x++)g[x]=s(d[x],x,m,h,p);return g}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const g=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return h.set(d,g),l(g,d,m,h,p),g}if(typeof File<"u"&&d instanceof File){const g=new File([d],d.name,{type:d.type});return h.set(d,g),l(g,d,m,h,p),g}if(d instanceof Blob){const g=new Blob([d],{type:d.type});return h.set(d,g),l(g,d,m,h,p),g}if(d instanceof Error){const g=new d.constructor;return h.set(d,g),g.message=d.message,g.name=d.name,g.stack=d.stack,g.cause=d.cause,l(g,d,m,h,p),g}if(typeof d=="object"&&u(d)){const g=Object.create(Object.getPrototypeOf(d));return h.set(d,g),l(g,d,m,h,p),g}return d}function l(d,f,m=d,h,p){const v=[...Object.keys(f),...t.getSymbols(f)];for(let g=0;g<v.length;g++){const x=v[g],b=Object.getOwnPropertyDescriptor(d,x);(b==null||b.writable)&&(d[x]=s(f[x],x,m,h,p))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=s,e.copyProperties=l})(Pc);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Pc;function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(ig);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jc(),r=ig;function n(a){return a=r.cloneDeep(a),i=>t.isMatch(i,a)}e.matches=n})(ag);var sg={},lg={},cg={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Pc,r=Uo;function n(a,i){return t.cloneDeepWith(a,(o,s,l,u)=>{const d=i?.(o,s,l,u);if(d!=null)return d;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new a.constructor(a?.valueOf());return t.copyProperties(f,a),f}case r.argumentsTag:{const f={};return t.copyProperties(f,a),f.length=a.length,f[Symbol.iterator]=a[Symbol.iterator],f}default:return}})}e.cloneDeepWith=n})(cg);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cg;function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(lg);var ug={},Nc={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,a=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<a;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(Nc);var dg={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Bo;function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(dg);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fc,r=Nc,n=dg,a=Do;function i(o,s){let l;if(Array.isArray(s)?l=s:typeof s=="string"&&t.isDeepKey(s)&&o?.[s]==null?l=a.toPath(s):l=[s],l.length===0)return!1;let u=o;for(let d=0;d<l.length;d++){const f=l[d];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}e.has=i})(ug);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jc(),r=mc,n=lg,a=Io,i=ug;function o(s,l){switch(typeof s){case"object":{Object.is(s?.valueOf(),-0)&&(s="-0");break}case"number":{s=r.toKey(s);break}}return l=n.cloneDeep(l),function(u){const d=a.get(u,s);return d===void 0?i.has(u,s):l===void 0?d===void 0:t.isMatch(d,l)}}e.matchesProperty=o})(sg);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xc,r=ng,n=ag,a=sg;function i(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?a.matchesProperty(o[0],o[1]):n.matches(o);case"string":case"symbol":case"number":return r.property(o)}}e.iteratee=i})(rg);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Qp,r=xc,n=Jp,a=rg;function i(o,s=r.identity){return n.isArrayLikeObject(o)?t.uniqBy(Array.from(o),a.iteratee(s)):[]}e.uniqBy=i})(Xp);var nk=Xp.uniqBy;const Kd=Fr(nk);function ak(e,t,r){return t===!0?Kd(e,r):typeof t=="function"?Kd(e,t):e}var fg={exports:{}},mg={},hg={exports:{}},pg={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fn=y;function ik(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ok=typeof Object.is=="function"?Object.is:ik,sk=Fn.useState,lk=Fn.useEffect,ck=Fn.useLayoutEffect,uk=Fn.useDebugValue;function dk(e,t){var r=t(),n=sk({inst:{value:r,getSnapshot:t}}),a=n[0].inst,i=n[1];return ck(function(){a.value=r,a.getSnapshot=t,As(a)&&i({inst:a})},[e,r,t]),lk(function(){return As(a)&&i({inst:a}),e(function(){As(a)&&i({inst:a})})},[e]),uk(r),r}function As(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ok(e,r)}catch{return!0}}function fk(e,t){return t()}var mk=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?fk:dk;pg.useSyncExternalStore=Fn.useSyncExternalStore!==void 0?Fn.useSyncExternalStore:mk;hg.exports=pg;var hk=hg.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wo=y,pk=hk;function gk(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var vk=typeof Object.is=="function"?Object.is:gk,yk=pk.useSyncExternalStore,xk=Wo.useRef,bk=Wo.useEffect,wk=Wo.useMemo,jk=Wo.useDebugValue;mg.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var i=xk(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=wk(function(){function l(h){if(!u){if(u=!0,d=h,h=n(h),a!==void 0&&o.hasValue){var p=o.value;if(a(p,h))return f=p}return f=h}if(p=f,vk(d,h))return p;var v=n(h);return a!==void 0&&a(p,v)?(d=h,p):(d=h,f=v)}var u=!1,d,f,m=r===void 0?null:r;return[function(){return l(t())},m===null?void 0:function(){return l(m())}]},[t,r,n,a]);var s=yk(e,i[0],i[1]);return bk(function(){o.hasValue=!0,o.value=s},[s]),jk(s),s};fg.exports=mg;var Pk=fg.exports,_c=y.createContext(null),Sk=e=>e,ot=()=>{var e=y.useContext(_c);return e?e.store.dispatch:Sk},Oi=()=>{},Nk=()=>Oi,_k=(e,t)=>e===t;function H(e){var t=y.useContext(_c);return Pk.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:Nk,t?t.store.getState:Oi,t?t.store.getState:Oi,t?e:Oi,_k)}function kk(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Ek(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Ak(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var Gd=e=>Array.isArray(e)?e:[e];function Ck(e){const t=Array.isArray(e[0])?e[0]:e;return Ak(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Ok(e,t){const r=[],{length:n}=e;for(let a=0;a<n;a++)r.push(e[a].apply(null,t));return r}var Tk=class{constructor(e){this.value=e}deref(){return this.value}},Ik=typeof WeakRef<"u"?WeakRef:Tk,Dk=0,Vd=1;function gi(){return{s:Dk,v:void 0,o:null,p:null}}function gg(e,t={}){let r=gi();const{resultEqualityCheck:n}=t;let a,i=0;function o(){let s=r;const{length:l}=arguments;for(let f=0,m=l;f<m;f++){const h=arguments[f];if(typeof h=="function"||typeof h=="object"&&h!==null){let p=s.o;p===null&&(s.o=p=new WeakMap);const v=p.get(h);v===void 0?(s=gi(),p.set(h,s)):s=v}else{let p=s.p;p===null&&(s.p=p=new Map);const v=p.get(h);v===void 0?(s=gi(),p.set(h,s)):s=v}}const u=s;let d;if(s.s===Vd)d=s.v;else if(d=e.apply(null,arguments),i++,n){const f=a?.deref?.()??a;f!=null&&n(f,d)&&(d=f,i!==0&&i--),a=typeof d=="object"&&d!==null||typeof d=="function"?new Ik(d):d}return u.s=Vd,u.v=d,d}return o.clearCache=()=>{r=gi(),o.resetResultsCount()},o.resultsCount=()=>i,o.resetResultsCount=()=>{i=0},o}function Mk(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...a)=>{let i=0,o=0,s,l={},u=a.pop();typeof u=="object"&&(l=u,u=a.pop()),kk(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...l},{memoize:f,memoizeOptions:m=[],argsMemoize:h=gg,argsMemoizeOptions:p=[]}=d,v=Gd(m),g=Gd(p),x=Ck(a),b=f(function(){return i++,u.apply(null,arguments)},...v),w=h(function(){o++;const P=Ok(x,arguments);return s=b.apply(null,P),s},...g);return Object.assign(w,{resultFunc:u,memoizedResultFunc:b,dependencies:x,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>s,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:f,argsMemoize:h})};return Object.assign(n,{withTypes:()=>n}),n}var E=Mk(gg),$k=Object.assign((e,t=E)=>{Ek(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(i=>e[i]);return t(n,(...i)=>i.reduce((o,s,l)=>(o[r[l]]=s,o),{}))},{withTypes:()=>$k}),vg={},yg={},xg={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,a,i)=>{if(n!==a){const o=t(n),s=t(a);if(o===s&&o===0){if(n<a)return i==="desc"?1:-1;if(n>a)return i==="desc"?-1:1}return i==="desc"?s-o:o-s}return 0};e.compareValues=r})(xg);var bg={},kc={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(kc);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kc,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(i,o){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(n.test(i)||!r.test(i))||o!=null&&Object.hasOwn(o,i)}e.isKey=a})(bg);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xg,r=bg,n=Do;function a(i,o,s,l){if(i==null)return[];s=l?void 0:s,Array.isArray(i)||(i=Object.values(i)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(s)||(s=s==null?[]:[s]),s=s.map(h=>String(h));const u=(h,p)=>{let v=h;for(let g=0;g<p.length&&v!=null;++g)v=v[p[g]];return v},d=(h,p)=>p==null||h==null?p:typeof h=="object"&&"key"in h?Object.hasOwn(p,h.key)?p[h.key]:u(p,h.path):typeof h=="function"?h(p):Array.isArray(h)?u(p,h):typeof p=="object"?p[h]:p,f=o.map(h=>(Array.isArray(h)&&h.length===1&&(h=h[0]),h==null||typeof h=="function"||Array.isArray(h)||r.isKey(h)?h:{key:h,path:n.toPath(h)}));return i.map(h=>({original:h,criteria:f.map(p=>d(p,h))})).slice().sort((h,p)=>{for(let v=0;v<f.length;v++){const g=t.compareValues(h.criteria[v],p.criteria[v],s[v]);if(g!==0)return g}return 0}).map(h=>h.original)}e.orderBy=a})(yg);var wg={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const a=[],i=Math.floor(n),o=(s,l)=>{for(let u=0;u<s.length;u++){const d=s[u];Array.isArray(d)&&l<i?o(d,l+1):a.push(d)}};return o(r,0),a}e.flatten=t})(wg);var Ec={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Nc,r=Lo,n=bc,a=Fo;function i(o,s,l){return n.isObject(l)&&(typeof s=="number"&&r.isArrayLike(l)&&t.isIndex(s)&&s<l.length||typeof s=="string"&&s in l)?a.eq(l[s],o):!1}e.isIterateeCall=i})(Ec);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yg,r=wg,n=Ec;function a(i,...o){const s=o.length;return s>1&&n.isIterateeCall(i,o[0],o[1])?o=[]:s>2&&n.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(i,r.flatten(o),["asc"])}e.sortBy=a})(vg);var zk=vg.sortBy;const Ho=Fr(zk);var jg=e=>e.legend.settings,Rk=e=>e.legend.size,Lk=e=>e.legend.payload;E([Lk,jg],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?Ho(n,r):n});var vi=1;function Fk(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=y.useState({height:0,left:0,top:0,width:0}),n=y.useCallback(a=>{if(a!=null){var i=a.getBoundingClientRect(),o={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(o.height-t.height)>vi||Math.abs(o.left-t.left)>vi||Math.abs(o.top-t.top)>vi||Math.abs(o.width-t.width)>vi)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function Ze(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Bk=typeof Symbol=="function"&&Symbol.observable||"@@observable",Yd=Bk,Cs=()=>Math.random().toString(36).substring(7).split("").join("."),Uk={INIT:`@@redux/INIT${Cs()}`,REPLACE:`@@redux/REPLACE${Cs()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Cs()}`},Ui=Uk;function Ac(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Pg(e,t,r){if(typeof e!="function")throw new Error(Ze(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Ze(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Ze(1));return r(Pg)(e,t)}let n=e,a=t,i=new Map,o=i,s=0,l=!1;function u(){o===i&&(o=new Map,i.forEach((g,x)=>{o.set(x,g)}))}function d(){if(l)throw new Error(Ze(3));return a}function f(g){if(typeof g!="function")throw new Error(Ze(4));if(l)throw new Error(Ze(5));let x=!0;u();const b=s++;return o.set(b,g),function(){if(x){if(l)throw new Error(Ze(6));x=!1,u(),o.delete(b),i=null}}}function m(g){if(!Ac(g))throw new Error(Ze(7));if(typeof g.type>"u")throw new Error(Ze(8));if(typeof g.type!="string")throw new Error(Ze(17));if(l)throw new Error(Ze(9));try{l=!0,a=n(a,g)}finally{l=!1}return(i=o).forEach(b=>{b()}),g}function h(g){if(typeof g!="function")throw new Error(Ze(10));n=g,m({type:Ui.REPLACE})}function p(){const g=f;return{subscribe(x){if(typeof x!="object"||x===null)throw new Error(Ze(11));function b(){const j=x;j.next&&j.next(d())}return b(),{unsubscribe:g(b)}},[Yd](){return this}}}return m({type:Ui.INIT}),{dispatch:m,subscribe:f,getState:d,replaceReducer:h,[Yd]:p}}function Wk(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:Ui.INIT})>"u")throw new Error(Ze(12));if(typeof r(void 0,{type:Ui.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ze(13))})}function Sg(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const o=t[i];typeof e[o]=="function"&&(r[o]=e[o])}const n=Object.keys(r);let a;try{Wk(r)}catch(i){a=i}return function(o={},s){if(a)throw a;let l=!1;const u={};for(let d=0;d<n.length;d++){const f=n[d],m=r[f],h=o[f],p=m(h,s);if(typeof p>"u")throw s&&s.type,new Error(Ze(14));u[f]=p,l=l||p!==h}return l=l||n.length!==Object.keys(o).length,l?u:o}}function Wi(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function Hk(...e){return t=>(r,n)=>{const a=t(r,n);let i=()=>{throw new Error(Ze(15))};const o={getState:a.getState,dispatch:(l,...u)=>i(l,...u)},s=e.map(l=>l(o));return i=Wi(...s)(a.dispatch),{...a,dispatch:i}}}function Ng(e){return Ac(e)&&"type"in e&&typeof e.type=="string"}function _g(e){return({dispatch:r,getState:n})=>a=>i=>typeof i=="function"?i(r,n,e):a(i)}var qk=_g(),Zk=_g,Kk=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Wi:Wi.apply(null,arguments)};function Dt(e,t){function r(...n){if(t){let a=t(...n);if(!a)throw new Error(jt(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>Ng(n)&&n.type===e,r}var kg=class va extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,va.prototype)}static get[Symbol.species](){return va}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new va(...t[0].concat(this)):new va(...t.concat(this))}};function Xd(e){return mr(e)?ar(e,()=>{}):e}function yi(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function Gk(e){return typeof e=="boolean"}var Vk=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:i=!0}=t??{};let o=new kg;return r&&(Gk(r)?o.push(qk):o.push(Zk(r.extraArgument))),o},Yk="RTK_autoBatch",Qd=e=>t=>{setTimeout(t,e)},Xk=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let a=!0,i=!1,o=!1;const s=new Set,l=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Qd(10):e.type==="callback"?e.queueNotification:Qd(e.timeout),u=()=>{o=!1,i&&(i=!1,s.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const f=()=>a&&d(),m=n.subscribe(f);return s.add(d),()=>{m(),s.delete(d)}},dispatch(d){try{return a=!d?.meta?.[Yk],i=!a,i&&(o||(o=!0,l(u))),n.dispatch(d)}finally{a=!0}}})},Qk=e=>function(r){const{autoBatch:n=!0}=r??{};let a=new kg(e);return n&&a.push(Xk(typeof n=="object"?n:void 0)),a};function Jk(e){const t=Vk(),{reducer:r=void 0,middleware:n,devTools:a=!0,preloadedState:i=void 0,enhancers:o=void 0}=e||{};let s;if(typeof r=="function")s=r;else if(Ac(r))s=Sg(r);else throw new Error(jt(1));let l;typeof n=="function"?l=n(t):l=t();let u=Wi;a&&(u=Kk({trace:!1,...typeof a=="object"&&a}));const d=Hk(...l),f=Qk(d);let m=typeof o=="function"?o(f):f();const h=u(...m);return Pg(s,i,h)}function Eg(e){const t={},r=[];let n;const a={addCase(i,o){const s=typeof i=="string"?i:i.type;if(!s)throw new Error(jt(28));if(s in t)throw new Error(jt(29));return t[s]=o,a},addMatcher(i,o){return r.push({matcher:i,reducer:o}),a},addDefaultCase(i){return n=i,a}};return e(a),[t,r,n]}function eE(e){return typeof e=="function"}function tE(e,t){let[r,n,a]=Eg(t),i;if(eE(e))i=()=>Xd(e());else{const s=Xd(e);i=()=>s}function o(s=i(),l){let u=[r[l.type],...n.filter(({matcher:d})=>d(l)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[a]),u.reduce((d,f)=>{if(f)if(mn(d)){const h=f(d,l);return h===void 0?d:h}else{if(mr(d))return ar(d,m=>f(m,l));{const m=f(d,l);if(m===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return m}}return d},s)}return o.getInitialState=i,o}var rE="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",nE=(e=21)=>{let t="",r=e;for(;r--;)t+=rE[Math.random()*64|0];return t},aE=Symbol.for("rtk-slice-createasyncthunk");function iE(e,t){return`${e}/${t}`}function oE({creators:e}={}){const t=e?.asyncThunk?.[aE];return function(n){const{name:a,reducerPath:i=a}=n;if(!a)throw new Error(jt(11));const o=(typeof n.reducers=="function"?n.reducers(lE()):n.reducers)||{},s=Object.keys(o),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(w,j){const P=typeof w=="string"?w:w.type;if(!P)throw new Error(jt(12));if(P in l.sliceCaseReducersByType)throw new Error(jt(13));return l.sliceCaseReducersByType[P]=j,u},addMatcher(w,j){return l.sliceMatchers.push({matcher:w,reducer:j}),u},exposeAction(w,j){return l.actionCreators[w]=j,u},exposeCaseReducer(w,j){return l.sliceCaseReducersByName[w]=j,u}};s.forEach(w=>{const j=o[w],P={reducerName:w,type:iE(a,w),createNotation:typeof n.reducers=="function"};uE(j)?fE(P,j,u,t):cE(P,j,u)});function d(){const[w={},j=[],P=void 0]=typeof n.extraReducers=="function"?Eg(n.extraReducers):[n.extraReducers],S={...w,...l.sliceCaseReducersByType};return tE(n.initialState,N=>{for(let C in S)N.addCase(C,S[C]);for(let C of l.sliceMatchers)N.addMatcher(C.matcher,C.reducer);for(let C of j)N.addMatcher(C.matcher,C.reducer);P&&N.addDefaultCase(P)})}const f=w=>w,m=new Map,h=new WeakMap;let p;function v(w,j){return p||(p=d()),p(w,j)}function g(){return p||(p=d()),p.getInitialState()}function x(w,j=!1){function P(N){let C=N[w];return typeof C>"u"&&j&&(C=yi(h,P,g)),C}function S(N=f){const C=yi(m,j,()=>new WeakMap);return yi(C,N,()=>{const T={};for(const[R,k]of Object.entries(n.selectors??{}))T[R]=sE(k,N,()=>yi(h,N,g),j);return T})}return{reducerPath:w,getSelectors:S,get selectors(){return S(P)},selectSlice:P}}const b={name:a,reducer:v,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:g,...x(i),injectInto(w,{reducerPath:j,...P}={}){const S=j??i;return w.inject({reducerPath:S,reducer:v},P),{...b,...x(S,!0)}}};return b}}function sE(e,t,r,n){function a(i,...o){let s=t(i);return typeof s>"u"&&n&&(s=r()),e(s,...o)}return a.unwrapped=e,a}var $t=oE();function lE(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function cE({type:e,reducerName:t,createNotation:r},n,a){let i,o;if("reducer"in n){if(r&&!dE(n))throw new Error(jt(17));i=n.reducer,o=n.prepare}else i=n;a.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,o?Dt(e,o):Dt(e))}function uE(e){return e._reducerDefinitionType==="asyncThunk"}function dE(e){return e._reducerDefinitionType==="reducerWithPrepare"}function fE({type:e,reducerName:t},r,n,a){if(!a)throw new Error(jt(18));const{payloadCreator:i,fulfilled:o,pending:s,rejected:l,settled:u,options:d}=r,f=a(e,i,d);n.exposeAction(t,f),o&&n.addCase(f.fulfilled,o),s&&n.addCase(f.pending,s),l&&n.addCase(f.rejected,l),u&&n.addMatcher(f.settled,u),n.exposeCaseReducer(t,{fulfilled:o||xi,pending:s||xi,rejected:l||xi,settled:u||xi})}function xi(){}var mE="task",Ag="listener",Cg="completed",Cc="cancelled",hE=`task-${Cc}`,pE=`task-${Cg}`,dl=`${Ag}-${Cc}`,gE=`${Ag}-${Cg}`,qo=class{constructor(e){this.code=e,this.message=`${mE} ${Cc} (reason: ${e})`}name="TaskAbortError";message},Oc=(e,t)=>{if(typeof e!="function")throw new TypeError(jt(32))},Hi=()=>{},Og=(e,t=Hi)=>(e.catch(t),e),Tg=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),nn=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},an=e=>{if(e.aborted){const{reason:t}=e;throw new qo(t)}};function Ig(e,t){let r=Hi;return new Promise((n,a)=>{const i=()=>a(new qo(e.reason));if(e.aborted){i();return}r=Tg(e,i),t.finally(()=>r()).then(n,a)}).finally(()=>{r=Hi})}var vE=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof qo?"cancelled":"rejected",error:r}}finally{t?.()}},qi=e=>t=>Og(Ig(e,t).then(r=>(an(e),r))),Dg=e=>{const t=qi(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:$n}=Object,Jd={},Zo="listenerMiddleware",yE=(e,t)=>{const r=n=>Tg(e,()=>nn(n,e.reason));return(n,a)=>{Oc(n);const i=new AbortController;r(i);const o=vE(async()=>{an(e),an(i.signal);const s=await n({pause:qi(i.signal),delay:Dg(i.signal),signal:i.signal});return an(i.signal),s},()=>nn(i,pE));return a?.autoJoin&&t.push(o.catch(Hi)),{result:qi(e)(o),cancel(){nn(i,hE)}}}},xE=(e,t)=>{const r=async(n,a)=>{an(t);let i=()=>{};const s=[new Promise((l,u)=>{let d=e({predicate:n,effect:(f,m)=>{m.unsubscribe(),l([f,m.getState(),m.getOriginalState()])}});i=()=>{d(),u()}})];a!=null&&s.push(new Promise(l=>setTimeout(l,a,null)));try{const l=await Ig(t,Promise.race(s));return an(t),l}finally{i()}};return(n,a)=>Og(r(n,a))},Mg=e=>{let{type:t,actionCreator:r,matcher:n,predicate:a,effect:i}=e;if(t)a=Dt(t).match;else if(r)t=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(jt(21));return Oc(i),{predicate:a,type:t,effect:i}},$g=$n(e=>{const{type:t,predicate:r,effect:n}=Mg(e);return{id:nE(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(jt(22))}}},{withTypes:()=>$g}),ef=(e,t)=>{const{type:r,effect:n,predicate:a}=Mg(t);return Array.from(e.values()).find(i=>(typeof r=="string"?i.type===r:i.predicate===a)&&i.effect===n)},fl=e=>{e.pending.forEach(t=>{nn(t,dl)})},bE=e=>()=>{e.forEach(fl),e.clear()},tf=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},zg=$n(Dt(`${Zo}/add`),{withTypes:()=>zg}),wE=Dt(`${Zo}/removeAll`),Rg=$n(Dt(`${Zo}/remove`),{withTypes:()=>Rg}),jE=(...e)=>{console.error(`${Zo}/error`,...e)},Ka=(e={})=>{const t=new Map,{extra:r,onError:n=jE}=e;Oc(n);const a=d=>(d.unsubscribe=()=>t.delete(d.id),t.set(d.id,d),f=>{d.unsubscribe(),f?.cancelActive&&fl(d)}),i=d=>{const f=ef(t,d)??$g(d);return a(f)};$n(i,{withTypes:()=>i});const o=d=>{const f=ef(t,d);return f&&(f.unsubscribe(),d.cancelActive&&fl(f)),!!f};$n(o,{withTypes:()=>o});const s=async(d,f,m,h)=>{const p=new AbortController,v=xE(i,p.signal),g=[];try{d.pending.add(p),await Promise.resolve(d.effect(f,$n({},m,{getOriginalState:h,condition:(x,b)=>v(x,b).then(Boolean),take:v,delay:Dg(p.signal),pause:qi(p.signal),extra:r,signal:p.signal,fork:yE(p.signal,g),unsubscribe:d.unsubscribe,subscribe:()=>{t.set(d.id,d)},cancelActiveListeners:()=>{d.pending.forEach((x,b,w)=>{x!==p&&(nn(x,dl),w.delete(x))})},cancel:()=>{nn(p,dl),d.pending.delete(p)},throwIfCancelled:()=>{an(p.signal)}})))}catch(x){x instanceof qo||tf(n,x,{raisedBy:"effect"})}finally{await Promise.all(g),nn(p,gE),d.pending.delete(p)}},l=bE(t);return{middleware:d=>f=>m=>{if(!Ng(m))return f(m);if(zg.match(m))return i(m.payload);if(wE.match(m)){l();return}if(Rg.match(m))return o(m.payload);let h=d.getState();const p=()=>{if(h===Jd)throw new Error(jt(23));return h};let v;try{if(v=f(m),t.size>0){const g=d.getState(),x=Array.from(t.values());for(const b of x){let w=!1;try{w=b.predicate(m,g,h)}catch(j){w=!1,tf(n,j,{raisedBy:"predicate"})}w&&s(b,m,d,p)}}}finally{h=Jd}return v},startListening:i,stopListening:o,clearListeners:l}};function jt(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var PE={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Lg=$t({name:"chartLayout",initialState:PE,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:SE,setLayout:NE,setChartSize:_E,setScale:kE}=Lg.actions,EE=Lg.reducer;function rf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function nf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rf(Object(r),!0).forEach(function(n){AE(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rf(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function AE(e,t,r){return(t=CE(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CE(e){var t=OE(e,"string");return typeof t=="symbol"?t:t+""}function OE(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Zi=Math.PI/180,TE=e=>e*180/Math.PI,Ge=(e,t,r,n)=>({x:e+Math.cos(-Zi*n)*r,y:t+Math.sin(-Zi*n)*r}),IE=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},DE=(e,t)=>{var{x:r,y:n}=e,{x:a,y:i}=t;return Math.sqrt((r-a)**2+(n-i)**2)},ME=(e,t)=>{var{x:r,y:n}=e,{cx:a,cy:i}=t,o=DE({x:r,y:n},{x:a,y:i});if(o<=0)return{radius:o,angle:0};var s=(r-a)/o,l=Math.acos(s);return n>i&&(l=2*Math.PI-l),{radius:o,angle:TE(l),angleInRadian:l}},$E=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),a=Math.floor(r/360),i=Math.min(n,a);return{startAngle:t-i*360,endAngle:r-i*360}},zE=(e,t)=>{var{startAngle:r,endAngle:n}=t,a=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(a,i);return e+o*360},RE=(e,t)=>{var{x:r,y:n}=e,{radius:a,angle:i}=ME({x:r,y:n},t),{innerRadius:o,outerRadius:s}=t;if(a<o||a>s||a===0)return null;var{startAngle:l,endAngle:u}=$E(t),d=i,f;if(l<=u){for(;d>u;)d-=360;for(;d<l;)d+=360;f=d>=l&&d<=u}else{for(;d>l;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=l}return f?nf(nf({},t),{},{radius:a,angle:zE(d,t)}):null};function af(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ct(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?af(Object(r),!0).forEach(function(n){LE(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):af(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LE(e,t,r){return(t=FE(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FE(e){var t=BE(e,"string");return typeof t=="symbol"?t:t+""}function BE(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pt(e,t,r){return Ee(e)||Ee(t)?r:er(t)?pn(e,t,r):typeof t=="function"?t(e):r}var UE=(e,t,r,n,a)=>{var i,o=-1,s=(i=t?.length)!==null&&i!==void 0?i:0;if(s<=1||e==null)return 0;if(n==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var l=0;l<s;l++){var u=l>0?r[l-1].coordinate:r[s-1].coordinate,d=r[l].coordinate,f=l>=s-1?r[0].coordinate:r[l+1].coordinate,m=void 0;if(Ot(d-u)!==Ot(f-d)){var h=[];if(Ot(f-d)===Ot(a[1]-a[0])){m=f;var p=d+a[1]-a[0];h[0]=Math.min(p,(p+u)/2),h[1]=Math.max(p,(p+u)/2)}else{m=u;var v=f+a[1]-a[0];h[0]=Math.min(d,(v+d)/2),h[1]=Math.max(d,(v+d)/2)}var g=[Math.min(d,(m+d)/2),Math.max(d,(m+d)/2)];if(e>g[0]&&e<=g[1]||e>=h[0]&&e<=h[1]){({index:o}=r[l]);break}}else{var x=Math.min(u,f),b=Math.max(u,f);if(e>(x+d)/2&&e<=(b+d)/2){({index:o}=r[l]);break}}}else if(t){for(var w=0;w<s;w++)if(w===0&&e<=(t[w].coordinate+t[w+1].coordinate)/2||w>0&&w<s-1&&e>(t[w].coordinate+t[w-1].coordinate)/2&&e<=(t[w].coordinate+t[w+1].coordinate)/2||w===s-1&&e>(t[w].coordinate+t[w-1].coordinate)/2){({index:o}=t[w]);break}}return o},WE=(e,t,r)=>{if(t&&r){var{width:n,height:a}=r,{align:i,verticalAlign:o,layout:s}=t;if((s==="vertical"||s==="horizontal"&&o==="middle")&&i!=="center"&&U(e[i]))return Ct(Ct({},e),{},{[i]:e[i]+(n||0)});if((s==="horizontal"||s==="vertical"&&i==="center")&&o!=="middle"&&U(e[o]))return Ct(Ct({},e),{},{[o]:e[o]+(a||0)})}return e},Br=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",Fg=(e,t,r,n)=>{if(n)return e.map(s=>s.coordinate);var a,i,o=e.map(s=>(s.coordinate===t&&(a=!0),s.coordinate===r&&(i=!0),s.coordinate));return a||o.push(t),i||o.push(r),o},Bg=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:a,range:i,scale:o,realScaleType:s,isCategorical:l,categoricalDomain:u,tickCount:d,ticks:f,niceTicks:m,axisType:h}=e;if(!o)return null;var p=s==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,v=a==="category"&&o.bandwidth?o.bandwidth()/p:0;if(v=h==="angleAxis"&&i&&i.length>=2?Ot(i[0]-i[1])*2*v:v,f||m){var g=(f||m||[]).map((x,b)=>{var w=n?n.indexOf(x):x;return{coordinate:o(w)+v,value:x,offset:v,index:b}});return g.filter(x=>!It(x.coordinate))}return l&&u?u.map((x,b)=>({coordinate:o(x)+v,value:x,index:b,offset:v})):o.ticks&&d!=null?o.ticks(d).map((x,b)=>({coordinate:o(x)+v,value:x,offset:v,index:b})):o.domain().map((x,b)=>({coordinate:o(x)+v,value:n?n[x]:x,index:b,offset:v}))},of=1e-4,HE=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),a=Math.min(n[0],n[1])-of,i=Math.max(n[0],n[1])+of,o=e(t[0]),s=e(t[r-1]);(o<a||o>i||s<a||s>i)&&e.domain([t[0],t[r-1]])}},qE=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,i=0,o=0;o<t;++o){var s=It(e[o][r][1])?e[o][r][0]:e[o][r][1];s>=0?(e[o][r][0]=a,e[o][r][1]=a+s,a=e[o][r][1]):(e[o][r][0]=i,e[o][r][1]=i+s,i=e[o][r][1])}},ZE=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,i=0;i<t;++i){var o=It(e[i][r][1])?e[i][r][0]:e[i][r][1];o>=0?(e[i][r][0]=a,e[i][r][1]=a+o,a=e[i][r][1]):(e[i][r][0]=0,e[i][r][1]=0)}},KE={sign:qE,expand:J_,none:Ln,silhouette:ek,wiggle:tk,positive:ZE},GE=(e,t,r)=>{var n=KE[r],a=Q_().keys(t).value((i,o)=>+Pt(i,o,0)).order(ul).offset(n);return a(e)};function VE(e){return e==null?void 0:String(e)}function sf(e){var{axis:t,ticks:r,bandSize:n,entry:a,index:i,dataKey:o}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Ee(a[t.dataKey])){var s=Tp(r,"value",a[t.dataKey]);if(s)return s.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var l=Pt(a,Ee(o)?t.dataKey:o);return Ee(l)?null:t.scale(l)}var YE=e=>{var t=e.flat(2).filter(U);return[Math.min(...t),Math.max(...t)]},XE=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],QE=(e,t,r)=>{if(e!=null)return XE(Object.keys(e).reduce((n,a)=>{var i=e[a],{stackedData:o}=i,s=o.reduce((l,u)=>{var d=YE(u.slice(t,r+1));return[Math.min(l[0],d[0]),Math.max(l[1],d[1])]},[1/0,-1/0]);return[Math.min(s[0],n[0]),Math.max(s[1],n[1])]},[1/0,-1/0]))},lf=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,cf=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,ml=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var a=Ho(t,d=>d.coordinate),i=1/0,o=1,s=a.length;o<s;o++){var l=a[o],u=a[o-1];i=Math.min((l.coordinate||0)-(u.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0};function uf(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:a,name:i}=e;return Ct(Ct({},t),{},{dataKey:r,payload:n,value:a,name:i})}function Ug(e,t){if(e)return String(e);if(typeof t=="string")return t}function JE(e,t,r,n,a){if(r==="horizontal"||r==="vertical"){var i=e>=a.left&&e<=a.left+a.width&&t>=a.top&&t<=a.top+a.height;return i?{x:e,y:t}:null}return n?RE({x:e,y:t},n):null}var eA=(e,t,r,n)=>{var a=t.find(u=>u&&u.index===r);if(a){if(e==="horizontal")return{x:a.coordinate,y:n.y};if(e==="vertical")return{x:n.x,y:a.coordinate};if(e==="centric"){var i=a.coordinate,{radius:o}=n;return Ct(Ct(Ct({},n),Ge(n.cx,n.cy,o,i)),{},{angle:i,radius:o})}var s=a.coordinate,{angle:l}=n;return Ct(Ct(Ct({},n),Ge(n.cx,n.cy,s,l)),{},{angle:l,radius:s})}return{x:0,y:0}},tA=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,xr=e=>e.layout.width,br=e=>e.layout.height,rA=e=>e.layout.scale,Wg=e=>e.layout.margin,Tc=E(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Ic=E(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),nA="data-recharts-item-index",aA="data-recharts-item-data-key",Ko=60;function df(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Er(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?df(Object(r),!0).forEach(function(n){iA(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):df(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iA(e,t,r){return(t=oA(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oA(e){var t=sA(e,"string");return typeof t=="symbol"?t:t+""}function sA(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lA=e=>e.brush.height,Ve=E([xr,br,Wg,lA,Tc,Ic,jg,Rk],(e,t,r,n,a,i,o,s)=>{var l=i.reduce((p,v)=>{var{orientation:g}=v;if(!v.mirror&&!v.hide){var x=typeof v.width=="number"?v.width:Ko;return Er(Er({},p),{},{[g]:p[g]+x})}return p},{left:r.left||0,right:r.right||0}),u=a.reduce((p,v)=>{var{orientation:g}=v;return!v.mirror&&!v.hide?Er(Er({},p),{},{[g]:pn(p,"".concat(g))+v.height}):p},{top:r.top||0,bottom:r.bottom||0}),d=Er(Er({},u),l),f=d.bottom;d.bottom+=n,d=WE(d,o,s);var m=e-d.left-d.right,h=t-d.top-d.bottom;return Er(Er({brushBottom:f},d),{},{width:Math.max(m,0),height:Math.max(h,0)})}),cA=E(Ve,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Hg=E(xr,br,(e,t)=>({x:0,y:0,width:e,height:t})),uA=y.createContext(null),ft=()=>y.useContext(uA)!=null,Go=e=>e.brush,Vo=E([Go,Ve,Wg],(e,t,r)=>({height:e.height,x:U(e.x)?e.x:t.left,y:U(e.y)?e.y:t.top+t.height+t.brushBottom-(r?.bottom||0),width:U(e.width)?e.width:t.width})),Dc=()=>{var e,t=ft(),r=H(cA),n=H(Vo),a=(e=H(Go))===null||e===void 0?void 0:e.padding;return!t||!n||!a?r:{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}},dA={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},qg=()=>{var e;return(e=H(Ve))!==null&&e!==void 0?e:dA},Zg=()=>H(xr),Kg=()=>H(br),Ne=e=>e.layout.layoutType,Mc=()=>H(Ne),fA={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},Gg=$t({name:"legend",initialState:fA,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=ur(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:FR,setLegendSettings:BR,addLegendPayload:mA,removeLegendPayload:hA}=Gg.actions,pA=Gg.reducer;function hl(){return hl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hl.apply(null,arguments)}function ff(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Os(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ff(Object(r),!0).forEach(function(n){gA(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ff(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gA(e,t,r){return(t=vA(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vA(e){var t=yA(e,"string");return typeof t=="symbol"?t:t+""}function yA(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xA(e){return Array.isArray(e)&&er(e[0])&&er(e[1])?e.join(" ~ "):e}var bA=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:a={},payload:i,formatter:o,itemSorter:s,wrapperClassName:l,labelClassName:u,label:d,labelFormatter:f,accessibilityLayer:m=!1}=e,h=()=>{if(i&&i.length){var P={padding:0,margin:0},S=(s?Ho(i,s):i).map((N,C)=>{if(N.type==="none")return null;var T=N.formatter||o||xA,{value:R,name:k}=N,O=R,B=k;if(T){var Z=T(R,k,N,C,i);if(Array.isArray(Z))[O,B]=Z;else if(Z!=null)O=Z;else return null}var V=Os({display:"block",paddingTop:4,paddingBottom:4,color:N.color||"#000"},n);return y.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(C),style:V},er(B)?y.createElement("span",{className:"recharts-tooltip-item-name"},B):null,er(B)?y.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,y.createElement("span",{className:"recharts-tooltip-item-value"},O),y.createElement("span",{className:"recharts-tooltip-item-unit"},N.unit||""))});return y.createElement("ul",{className:"recharts-tooltip-item-list",style:P},S)}return null},p=Os({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),v=Os({margin:0},a),g=!Ee(d),x=g?d:"",b=de("recharts-default-tooltip",l),w=de("recharts-tooltip-label",u);g&&f&&i!==void 0&&i!==null&&(x=f(d,i));var j=m?{role:"status","aria-live":"assertive"}:{};return y.createElement("div",hl({className:b,style:p},j),y.createElement("p",{className:w,style:v},y.isValidElement(x)?x:"".concat(x)),h())},ua="recharts-tooltip-wrapper",wA={visibility:"hidden"};function jA(e){var{coordinate:t,translateX:r,translateY:n}=e;return de(ua,{["".concat(ua,"-right")]:U(r)&&t&&U(t.x)&&r>=t.x,["".concat(ua,"-left")]:U(r)&&t&&U(t.x)&&r<t.x,["".concat(ua,"-bottom")]:U(n)&&t&&U(t.y)&&n>=t.y,["".concat(ua,"-top")]:U(n)&&t&&U(t.y)&&n<t.y})}function mf(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:a,position:i,reverseDirection:o,tooltipDimension:s,viewBox:l,viewBoxDimension:u}=e;if(i&&U(i[n]))return i[n];var d=r[n]-s-(a>0?a:0),f=r[n]+a;if(t[n])return o[n]?d:f;var m=l[n];if(m==null)return 0;if(o[n]){var h=d,p=m;return h<p?Math.max(f,m):Math.max(d,m)}if(u==null)return 0;var v=f+s,g=m+u;return v>g?Math.max(d,m):Math.max(f,m)}function PA(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function SA(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:a,reverseDirection:i,tooltipBox:o,useTranslate3d:s,viewBox:l}=e,u,d,f;return o.height>0&&o.width>0&&r?(d=mf({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:l,viewBoxDimension:l.width}),f=mf({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:l,viewBoxDimension:l.height}),u=PA({translateX:d,translateY:f,useTranslate3d:s})):u=wA,{cssProperties:u,cssClasses:jA({translateX:d,translateY:f,coordinate:r})}}function hf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function bi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hf(Object(r),!0).forEach(function(n){pl(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hf(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pl(e,t,r){return(t=NA(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NA(e){var t=_A(e,"string");return typeof t=="symbol"?t:t+""}function _A(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class kA extends y.PureComponent{constructor(){super(...arguments),pl(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),pl(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,a,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(a=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:a,children:i,coordinate:o,hasPayload:s,isAnimationActive:l,offset:u,position:d,reverseDirection:f,useTranslate3d:m,viewBox:h,wrapperStyle:p,lastBoundingBox:v,innerRef:g,hasPortalFromProps:x}=this.props,{cssClasses:b,cssProperties:w}=SA({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:u,position:d,reverseDirection:f,tooltipBox:{height:v.height,width:v.width},useTranslate3d:m,viewBox:h}),j=x?{}:bi(bi({transition:l&&t?"transform ".concat(n,"ms ").concat(a):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&s?"visible":"hidden",position:"absolute",top:0,left:0}),P=bi(bi({},j),{},{visibility:!this.state.dismissed&&t&&s?"visible":"hidden"},p);return y.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:b,style:P,ref:g},i)}}var EA=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Ga={isSsr:EA()},Vg=()=>H(e=>e.rootProps.accessibilityLayer);function Ht(e){return Number.isFinite(e)}function Ki(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function gl(){return gl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gl.apply(null,arguments)}function pf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function gf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pf(Object(r),!0).forEach(function(n){AA(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pf(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function AA(e,t,r){return(t=CA(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CA(e){var t=OA(e,"string");return typeof t=="symbol"?t:t+""}function OA(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vf={curveBasisClosed:B_,curveBasisOpen:U_,curveBasis:F_,curveBumpX:R_,curveBumpY:L_,curveLinearClosed:W_,curveLinear:zo,curveMonotoneX:H_,curveMonotoneY:q_,curveNatural:Z_,curveStep:K_,curveStepAfter:V_,curveStepBefore:G_},wi=e=>Ht(e.x)&&Ht(e.y),da=e=>e.x,fa=e=>e.y,TA=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(pc(e));return(r==="curveMonotone"||r==="curveBump")&&t?vf["".concat(r).concat(t==="vertical"?"Y":"X")]:vf[r]||zo},IA=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:a,connectNulls:i=!1}=e,o=TA(t,a),s=i?r.filter(wi):r,l;if(Array.isArray(n)){var u=i?n.filter(f=>wi(f)):n,d=s.map((f,m)=>gf(gf({},f),{},{base:u[m]}));return a==="vertical"?l=pi().y(fa).x1(da).x0(f=>f.base.x):l=pi().x(da).y1(fa).y0(f=>f.base.y),l.defined(wi).curve(o),l(d)}return a==="vertical"&&U(n)?l=pi().y(fa).x1(da).x0(n):U(n)?l=pi().x(da).y1(fa).y0(n):l=Up().x(da).y(fa),l.defined(wi).curve(o),l(s)},Yg=e=>{var{className:t,points:r,path:n,pathRef:a}=e;if((!r||!r.length)&&!n)return null;var i=r&&r.length?IA(e):n;return y.createElement("path",gl({},ye(e,!1),vc(e),{className:de("recharts-curve",t),d:i===null?void 0:i,ref:a}))},DA=["x","y","top","left","width","height","className"];function vl(){return vl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vl.apply(null,arguments)}function yf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function MA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yf(Object(r),!0).forEach(function(n){$A(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yf(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $A(e,t,r){return(t=zA(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zA(e){var t=RA(e,"string");return typeof t=="symbol"?t:t+""}function RA(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function LA(e,t){if(e==null)return{};var r,n,a=FA(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function FA(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var BA=(e,t,r,n,a,i)=>"M".concat(e,",").concat(a,"v").concat(n,"M").concat(i,",").concat(t,"h").concat(r),UA=e=>{var{x:t=0,y:r=0,top:n=0,left:a=0,width:i=0,height:o=0,className:s}=e,l=LA(e,DA),u=MA({x:t,y:r,top:n,left:a,width:i,height:o},l);return!U(t)||!U(r)||!U(i)||!U(o)||!U(n)||!U(a)?null:y.createElement("path",vl({},ye(u,!0),{className:de("recharts-cross",s),d:BA(t,r,i,o,n,a)}))};function WA(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function xf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function HA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xf(Object(r),!0).forEach(function(n){qA(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xf(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qA(e,t,r){return(t=ZA(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZA(e){var t=KA(e,"string");return typeof t=="symbol"?t:t+""}function KA(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yn(e,t){var r=HA({},e),n=t,a=Object.keys(t),i=a.reduce((o,s)=>(o[s]===void 0&&n[s]!==void 0&&(o[s]=n[s]),o),r);return i}var Xg={},Qg={},Jg={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(!r||typeof r!="object")return!1;const n=Object.getPrototypeOf(r);return n===null||n===Object.prototype||Object.getPrototypeOf(n)===null?Object.prototype.toString.call(r)==="[object Object]":!1}e.isPlainObject=t})(Jg);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Jg,r=Sc,n=Bo,a=Uo,i=Fo;function o(u,d,f){return s(u,d,void 0,void 0,void 0,void 0,f)}function s(u,d,f,m,h,p,v){const g=v(u,d,f,m,h,p);if(g!==void 0)return g;if(typeof u==typeof d)switch(typeof u){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return u===d;case"number":return u===d||Object.is(u,d);case"function":return u===d;case"object":return l(u,d,p,v)}return l(u,d,p,v)}function l(u,d,f,m){if(Object.is(u,d))return!0;let h=n.getTag(u),p=n.getTag(d);if(h===a.argumentsTag&&(h=a.objectTag),p===a.argumentsTag&&(p=a.objectTag),h!==p)return!1;switch(h){case a.stringTag:return u.toString()===d.toString();case a.numberTag:{const x=u.valueOf(),b=d.valueOf();return i.eq(x,b)}case a.booleanTag:case a.dateTag:case a.symbolTag:return Object.is(u.valueOf(),d.valueOf());case a.regexpTag:return u.source===d.source&&u.flags===d.flags;case a.functionTag:return u===d}f=f??new Map;const v=f.get(u),g=f.get(d);if(v!=null&&g!=null)return v===d;f.set(u,d),f.set(d,u);try{switch(h){case a.mapTag:{if(u.size!==d.size)return!1;for(const[x,b]of u.entries())if(!d.has(x)||!s(b,d.get(x),x,u,d,f,m))return!1;return!0}case a.setTag:{if(u.size!==d.size)return!1;const x=Array.from(u.values()),b=Array.from(d.values());for(let w=0;w<x.length;w++){const j=x[w],P=b.findIndex(S=>s(j,S,void 0,u,d,f,m));if(P===-1)return!1;b.splice(P,1)}return!0}case a.arrayTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:case a.bigUint64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.bigInt64ArrayTag:case a.float32ArrayTag:case a.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(u)!==Buffer.isBuffer(d)||u.length!==d.length)return!1;for(let x=0;x<u.length;x++)if(!s(u[x],d[x],x,u,d,f,m))return!1;return!0}case a.arrayBufferTag:return u.byteLength!==d.byteLength?!1:l(new Uint8Array(u),new Uint8Array(d),f,m);case a.dataViewTag:return u.byteLength!==d.byteLength||u.byteOffset!==d.byteOffset?!1:l(new Uint8Array(u),new Uint8Array(d),f,m);case a.errorTag:return u.name===d.name&&u.message===d.message;case a.objectTag:{if(!(l(u.constructor,d.constructor,f,m)||t.isPlainObject(u)&&t.isPlainObject(d)))return!1;const b=[...Object.keys(u),...r.getSymbols(u)],w=[...Object.keys(d),...r.getSymbols(d)];if(b.length!==w.length)return!1;for(let j=0;j<b.length;j++){const P=b[j],S=u[P];if(!Object.hasOwn(d,P))return!1;const N=d[P];if(!s(S,N,P,u,d,f,m))return!1}return!0}default:return!1}}finally{f.delete(u),f.delete(d)}}e.isEqualWith=o})(Qg);var ev={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(){}e.noop=t})(ev);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Qg,r=ev;function n(a,i){return t.isEqualWith(a,i,r.noop)}e.isEqual=n})(Xg);var GA=Xg.isEqual;const VA=Fr(GA);function YA(e){var t={},r=()=>null,n=!1,a=null,i=o=>{if(!n){if(Array.isArray(o)){if(!o.length)return;var s=o,[l,...u]=s;if(typeof l=="number"){a=e.setTimeout(i.bind(null,u),l);return}i(l),a=e.setTimeout(i.bind(null,u));return}typeof o=="object"&&(t=o,r(t)),typeof o=="function"&&o()}};return{stop:()=>{n=!0},start:o=>{n=!1,a&&(a(),a=null),i(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>e}}var Gi=1e-4,tv=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],rv=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),bf=(e,t)=>r=>{var n=tv(e,t);return rv(n,r)},XA=(e,t)=>r=>{var n=tv(e,t),a=[...n.map((i,o)=>i*o).slice(1),0];return rv(a,r)},wf=function(){for(var t,r,n,a,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];if(o.length===1)switch(o[0]){case"linear":[t,n,r,a]=[0,0,1,1];break;case"ease":[t,n,r,a]=[.25,.1,.25,1];break;case"ease-in":[t,n,r,a]=[.42,0,1,1];break;case"ease-out":[t,n,r,a]=[.42,0,.58,1];break;case"ease-in-out":[t,n,r,a]=[0,0,.58,1];break;default:{var l=o[0].split("(");l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4&&([t,n,r,a]=l[1].split(")")[0].split(",").map(p=>parseFloat(p)))}}else o.length===4&&([t,n,r,a]=o);var u=bf(t,r),d=bf(n,a),f=XA(t,r),m=p=>p>1?1:p<0?0:p,h=p=>{for(var v=p>1?1:p,g=v,x=0;x<8;++x){var b=u(g)-v,w=f(g);if(Math.abs(b-v)<Gi||w<Gi)return d(g);g=m(g-b/w)}return d(g)};return h.isStepper=!1,h},QA=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:a=17}=t,i=(o,s,l)=>{var u=-(o-s)*r,d=l*n,f=l+(u-d)*a/1e3,m=l*a/1e3+o;return Math.abs(m-s)<Gi&&Math.abs(f)<Gi?[s,0]:[m,f]};return i.isStepper=!0,i.dt=a,i},JA=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return wf(e);case"spring":return QA();default:if(e.split("(")[0]==="cubic-bezier")return wf(e)}return typeof e=="function"?e:null};function jf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Pf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jf(Object(r),!0).forEach(function(n){e2(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jf(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function e2(e,t,r){return(t=t2(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function t2(e){var t=r2(e,"string");return typeof t=="symbol"?t:t+""}function r2(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var n2=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),a2=(e,t,r)=>e.map(n=>"".concat(n2(n)," ").concat(t,"ms ").concat(r)).join(","),i2=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(a=>n.includes(a))),Ea=(e,t)=>Object.keys(t).reduce((r,n)=>Pf(Pf({},r),{},{[n]:e(n,t[n])}),{});function Sf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ke(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Sf(Object(r),!0).forEach(function(n){o2(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sf(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function o2(e,t,r){return(t=s2(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s2(e){var t=l2(e,"string");return typeof t=="symbol"?t:t+""}function l2(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Vi=(e,t,r)=>e+(t-e)*r,yl=e=>{var{from:t,to:r}=e;return t!==r},nv=(e,t,r)=>{var n=Ea((a,i)=>{if(yl(i)){var[o,s]=e(i.from,i.to,i.velocity);return Ke(Ke({},i),{},{from:o,velocity:s})}return i},t);return r<1?Ea((a,i)=>yl(i)?Ke(Ke({},i),{},{velocity:Vi(i.velocity,n[a].velocity,r),from:Vi(i.from,n[a].from,r)}):i,t):nv(e,n,r-1)};function c2(e,t,r,n,a,i){var o,s=n.reduce((m,h)=>Ke(Ke({},m),{},{[h]:{from:e[h],velocity:0,to:t[h]}}),{}),l=()=>Ea((m,h)=>h.from,s),u=()=>!Object.values(s).filter(yl).length,d=null,f=m=>{o||(o=m);var h=m-o,p=h/r.dt;s=nv(r,s,p),a(Ke(Ke(Ke({},e),t),l())),o=m,u()||(d=i.setTimeout(f))};return()=>(d=i.setTimeout(f),()=>{d()})}function u2(e,t,r,n,a,i,o){var s=null,l=a.reduce((f,m)=>Ke(Ke({},f),{},{[m]:[e[m],t[m]]}),{}),u,d=f=>{u||(u=f);var m=(f-u)/n,h=Ea((v,g)=>Vi(...g,r(m)),l);if(i(Ke(Ke(Ke({},e),t),h)),m<1)s=o.setTimeout(d);else{var p=Ea((v,g)=>Vi(...g,r(1)),l);i(Ke(Ke(Ke({},e),t),p))}};return()=>(s=o.setTimeout(d),()=>{s()})}const d2=(e,t,r,n,a,i)=>{var o=i2(e,t);return r.isStepper===!0?c2(e,t,r,o,a,i):u2(e,t,r,n,o,a,i)};class f2{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),a=null,i=o=>{o-n>=r?t(o):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(i))};return a=requestAnimationFrame(i),()=>{cancelAnimationFrame(a)}}}var m2=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function xl(){return xl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xl.apply(null,arguments)}function h2(e,t){if(e==null)return{};var r,n,a=p2(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function p2(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Nf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ar(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Nf(Object(r),!0).forEach(function(n){Jr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nf(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Jr(e,t,r){return(t=g2(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g2(e){var t=v2(e,"string");return typeof t=="symbol"?t:t+""}function v2(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function y2(){return YA(new f2)}class $c extends y.PureComponent{constructor(t,r){super(t,r),Jr(this,"mounted",!1),Jr(this,"manager",null),Jr(this,"stopJSAnimation",null),Jr(this,"unSubscribe",null);var{isActive:n,attributeName:a,from:i,to:o,children:s,duration:l,animationManager:u}=this.props;if(this.manager=u,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!n||l<=0){this.state={style:{}},typeof s=="function"&&(this.state={style:o});return}if(i){if(typeof s=="function"){this.state={style:i};return}this.state={style:a?{[a]:i}:i}}else this.state={style:{}}}componentDidMount(){var{isActive:t,canBegin:r}=this.props;this.mounted=!0,!(!t||!r)&&this.runAnimation(this.props)}componentDidUpdate(t){var{isActive:r,canBegin:n,attributeName:a,shouldReAnimate:i,to:o,from:s}=this.props,{style:l}=this.state;if(n){if(!r){var u={style:a?{[a]:o}:o};this.state&&l&&(a&&l[a]!==o||!a&&l!==o)&&this.setState(u);return}if(!(VA(t.to,o)&&t.canBegin&&t.isActive)){var d=!t.canBegin||!t.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var f=d||i?s:t.to;if(this.state&&l){var m={style:a?{[a]:f}:f};(a&&l[a]!==f||!a&&l!==f)&&this.setState(m)}this.runAnimation(Ar(Ar({},this.props),{},{from:f,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:t}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}handleStyleChange(t){this.changeStyle(t)}changeStyle(t){this.mounted&&this.setState({style:t})}runJSAnimation(t){var{from:r,to:n,duration:a,easing:i,begin:o,onAnimationEnd:s,onAnimationStart:l}=t,u=d2(r,n,JA(i),a,this.changeStyle,this.manager.getTimeoutController()),d=()=>{this.stopJSAnimation=u()};this.manager.start([l,o,d,a,s])}runAnimation(t){var{begin:r,duration:n,attributeName:a,to:i,easing:o,onAnimationStart:s,onAnimationEnd:l,children:u}=t;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof o=="function"||typeof u=="function"||o==="spring"){this.runJSAnimation(t);return}var d=a?{[a]:i}:i,f=a2(Object.keys(d),n,o);this.manager.start([s,r,Ar(Ar({},d),{},{transition:f}),n,l])}render(){var t=this.props,{children:r,begin:n,duration:a,attributeName:i,easing:o,isActive:s,from:l,to:u,canBegin:d,onAnimationEnd:f,shouldReAnimate:m,onAnimationReStart:h,animationManager:p}=t,v=h2(t,m2),g=y.Children.count(r),x=this.state.style;if(typeof r=="function")return r(x);if(!s||g===0||a<=0)return r;var b=w=>{var{style:j={},className:P}=w.props,S=y.cloneElement(w,Ar(Ar({},v),{},{style:Ar(Ar({},j),x),className:P}));return S};return g===1?b(y.Children.only(r)):y.createElement("div",null,y.Children.map(r,w=>b(w)))}}Jr($c,"displayName","Animate");Jr($c,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});var x2=y.createContext(null);function Yi(e){var t,r,n=y.useContext(x2);return y.createElement($c,xl({},e,{animationManager:(t=(r=e.animationManager)!==null&&r!==void 0?r:n)!==null&&t!==void 0?t:y2()}))}function Xi(){return Xi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xi.apply(null,arguments)}var _f=(e,t,r,n,a)=>{var i=Math.min(Math.abs(r)/2,Math.abs(n)/2),o=n>=0?1:-1,s=r>=0?1:-1,l=n>=0&&r>=0||n<0&&r<0?1:0,u;if(i>0&&a instanceof Array){for(var d=[0,0,0,0],f=0,m=4;f<m;f++)d[f]=a[f]>i?i:a[f];u="M".concat(e,",").concat(t+o*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(l,",").concat(e+s*d[0],",").concat(t)),u+="L ".concat(e+r-s*d[1],",").concat(t),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(l,`,
        `).concat(e+r,",").concat(t+o*d[1])),u+="L ".concat(e+r,",").concat(t+n-o*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(l,`,
        `).concat(e+r-s*d[2],",").concat(t+n)),u+="L ".concat(e+s*d[3],",").concat(t+n),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(l,`,
        `).concat(e,",").concat(t+n-o*d[3])),u+="Z"}else if(i>0&&a===+a&&a>0){var h=Math.min(i,a);u="M ".concat(e,",").concat(t+o*h,`
            A `).concat(h,",").concat(h,",0,0,").concat(l,",").concat(e+s*h,",").concat(t,`
            L `).concat(e+r-s*h,",").concat(t,`
            A `).concat(h,",").concat(h,",0,0,").concat(l,",").concat(e+r,",").concat(t+o*h,`
            L `).concat(e+r,",").concat(t+n-o*h,`
            A `).concat(h,",").concat(h,",0,0,").concat(l,",").concat(e+r-s*h,",").concat(t+n,`
            L `).concat(e+s*h,",").concat(t+n,`
            A `).concat(h,",").concat(h,",0,0,").concat(l,",").concat(e,",").concat(t+n-o*h," Z")}else u="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return u},b2={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},w2=e=>{var t=yn(e,b2),r=y.useRef(null),[n,a]=y.useState(-1);y.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var x=r.current.getTotalLength();x&&a(x)}catch{}},[]);var{x:i,y:o,width:s,height:l,radius:u,className:d}=t,{animationEasing:f,animationDuration:m,animationBegin:h,isAnimationActive:p,isUpdateAnimationActive:v}=t;if(i!==+i||o!==+o||s!==+s||l!==+l||s===0||l===0)return null;var g=de("recharts-rectangle",d);return v?y.createElement(Yi,{canBegin:n>0,from:{width:s,height:l,x:i,y:o},to:{width:s,height:l,x:i,y:o},duration:m,animationEasing:f,isActive:v},x=>{var{width:b,height:w,x:j,y:P}=x;return y.createElement(Yi,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:h,duration:m,isActive:p,easing:f},y.createElement("path",Xi({},ye(t,!0),{className:g,d:_f(j,P,b,w,u),ref:r})))}):y.createElement("path",Xi({},ye(t,!0),{className:g,d:_f(i,o,s,l,u)}))};function av(e){var{cx:t,cy:r,radius:n,startAngle:a,endAngle:i}=e,o=Ge(t,r,n,a),s=Ge(t,r,n,i);return{points:[o,s],cx:t,cy:r,radius:n,startAngle:a,endAngle:i}}function bl(){return bl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bl.apply(null,arguments)}var j2=(e,t)=>{var r=Ot(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},ji=e=>{var{cx:t,cy:r,radius:n,angle:a,sign:i,isExternal:o,cornerRadius:s,cornerIsExternal:l}=e,u=s*(o?1:-1)+n,d=Math.asin(s/u)/Zi,f=l?a:a+i*d,m=Ge(t,r,u,f),h=Ge(t,r,n,f),p=l?a-i*d:a,v=Ge(t,r,u*Math.cos(d*Zi),p);return{center:m,circleTangency:h,lineTangency:v,theta:d}},iv=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:i,endAngle:o}=e,s=j2(i,o),l=i+s,u=Ge(t,r,a,i),d=Ge(t,r,a,l),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(s)>180),",").concat(+(i>l),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(n>0){var m=Ge(t,r,n,i),h=Ge(t,r,n,l);f+="L ".concat(h.x,",").concat(h.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(s)>180),",").concat(+(i<=l),`,
            `).concat(m.x,",").concat(m.y," Z")}else f+="L ".concat(t,",").concat(r," Z");return f},P2=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:s,startAngle:l,endAngle:u}=e,d=Ot(u-l),{circleTangency:f,lineTangency:m,theta:h}=ji({cx:t,cy:r,radius:a,angle:l,sign:d,cornerRadius:i,cornerIsExternal:s}),{circleTangency:p,lineTangency:v,theta:g}=ji({cx:t,cy:r,radius:a,angle:u,sign:-d,cornerRadius:i,cornerIsExternal:s}),x=s?Math.abs(l-u):Math.abs(l-u)-h-g;if(x<0)return o?"M ".concat(m.x,",").concat(m.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):iv({cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:l,endAngle:u});var b="M ".concat(m.x,",").concat(m.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(x>180),",").concat(+(d<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(v.x,",").concat(v.y,`
  `);if(n>0){var{circleTangency:w,lineTangency:j,theta:P}=ji({cx:t,cy:r,radius:n,angle:l,sign:d,isExternal:!0,cornerRadius:i,cornerIsExternal:s}),{circleTangency:S,lineTangency:N,theta:C}=ji({cx:t,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:i,cornerIsExternal:s}),T=s?Math.abs(l-u):Math.abs(l-u)-P-C;if(T<0&&i===0)return"".concat(b,"L").concat(t,",").concat(r,"Z");b+="L".concat(N.x,",").concat(N.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(S.x,",").concat(S.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(T>180),",").concat(+(d>0),",").concat(w.x,",").concat(w.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(j.x,",").concat(j.y,"Z")}else b+="L".concat(t,",").concat(r,"Z");return b},S2={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},N2=e=>{var t=yn(e,S2),{cx:r,cy:n,innerRadius:a,outerRadius:i,cornerRadius:o,forceCornerRadius:s,cornerIsExternal:l,startAngle:u,endAngle:d,className:f}=t;if(i<a||u===d)return null;var m=de("recharts-sector",f),h=i-a,p=Rr(o,h,0,!0),v;return p>0&&Math.abs(u-d)<360?v=P2({cx:r,cy:n,innerRadius:a,outerRadius:i,cornerRadius:Math.min(p,h/2),forceCornerRadius:s,cornerIsExternal:l,startAngle:u,endAngle:d}):v=iv({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:u,endAngle:d}),y.createElement("path",bl({},ye(t,!0),{className:m,d:v}))};function _2(e,t,r){var n,a,i,o;if(e==="horizontal")n=t.x,i=n,a=r.top,o=r.top+r.height;else if(e==="vertical")a=t.y,o=a,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:s,cy:l,innerRadius:u,outerRadius:d,angle:f}=t,m=Ge(s,l,u,f),h=Ge(s,l,d,f);n=m.x,a=m.y,i=h.x,o=h.y}else return av(t);return[{x:n,y:a},{x:i,y:o}]}var ov={},sv={},lv={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kc;function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(lv);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lv;function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(sv);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ec,r=sv;function n(a,i,o){o&&typeof o!="number"&&t.isIterateeCall(a,i,o)&&(i=o=void 0),a=r.toFinite(a),i===void 0?(i=a,a=0):i=r.toFinite(i),o=o===void 0?a<i?1:-1:r.toFinite(o);const s=Math.max(Math.ceil((i-a)/(o||1)),0),l=new Array(s);for(let u=0;u<s;u++)l[u]=a,a+=o;return l}e.range=n})(ov);var k2=ov.range;const cv=Fr(k2);function $r(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function E2(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function zc(e){let t,r,n;e.length!==2?(t=$r,r=(s,l)=>$r(e(s),l),n=(s,l)=>e(s)-l):(t=e===$r||e===E2?e:A2,r=e,n=e);function a(s,l,u=0,d=s.length){if(u<d){if(t(l,l)!==0)return d;do{const f=u+d>>>1;r(s[f],l)<0?u=f+1:d=f}while(u<d)}return u}function i(s,l,u=0,d=s.length){if(u<d){if(t(l,l)!==0)return d;do{const f=u+d>>>1;r(s[f],l)<=0?u=f+1:d=f}while(u<d)}return u}function o(s,l,u=0,d=s.length){const f=a(s,l,u,d-1);return f>u&&n(s[f-1],l)>-n(s[f],l)?f-1:f}return{left:a,center:o,right:i}}function A2(){return 0}function uv(e){return e===null?NaN:+e}function*C2(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const O2=zc($r),Va=O2.right;zc(uv).center;class kf extends Map{constructor(t,r=D2){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(Ef(this,t))}has(t){return super.has(Ef(this,t))}set(t,r){return super.set(T2(this,t),r)}delete(t){return super.delete(I2(this,t))}}function Ef({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function T2({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function I2({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function D2(e){return e!==null&&typeof e=="object"?e.valueOf():e}function M2(e=$r){if(e===$r)return dv;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function dv(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const $2=Math.sqrt(50),z2=Math.sqrt(10),R2=Math.sqrt(2);function Qi(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),o=i>=$2?10:i>=z2?5:i>=R2?2:1;let s,l,u;return a<0?(u=Math.pow(10,-a)/o,s=Math.round(e*u),l=Math.round(t*u),s/u<e&&++s,l/u>t&&--l,u=-u):(u=Math.pow(10,a)*o,s=Math.round(e/u),l=Math.round(t/u),s*u<e&&++s,l*u>t&&--l),l<s&&.5<=r&&r<2?Qi(e,t,r*2):[s,l,u]}function wl(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,i,o]=n?Qi(t,e,r):Qi(e,t,r);if(!(i>=a))return[];const s=i-a+1,l=new Array(s);if(n)if(o<0)for(let u=0;u<s;++u)l[u]=(i-u)/-o;else for(let u=0;u<s;++u)l[u]=(i-u)*o;else if(o<0)for(let u=0;u<s;++u)l[u]=(a+u)/-o;else for(let u=0;u<s;++u)l[u]=(a+u)*o;return l}function jl(e,t,r){return t=+t,e=+e,r=+r,Qi(e,t,r)[2]}function Pl(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?jl(t,e,r):jl(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function Af(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function Cf(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function fv(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?dv:M2(a);n>r;){if(n-r>600){const l=n-r+1,u=t-r+1,d=Math.log(l),f=.5*Math.exp(2*d/3),m=.5*Math.sqrt(d*f*(l-f)/l)*(u-l/2<0?-1:1),h=Math.max(r,Math.floor(t-u*f/l+m)),p=Math.min(n,Math.floor(t+(l-u)*f/l+m));fv(e,t,h,p,a)}const i=e[t];let o=r,s=n;for(ma(e,r,t),a(e[n],i)>0&&ma(e,r,n);o<s;){for(ma(e,o,s),++o,--s;a(e[o],i)<0;)++o;for(;a(e[s],i)>0;)--s}a(e[r],i)===0?ma(e,r,s):(++s,ma(e,s,n)),s<=t&&(r=s+1),t<=s&&(n=s-1)}return e}function ma(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function L2(e,t,r){if(e=Float64Array.from(C2(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return Cf(e);if(t>=1)return Af(e);var n,a=(n-1)*t,i=Math.floor(a),o=Af(fv(e,i).subarray(0,i+1)),s=Cf(e.subarray(i+1));return o+(s-o)*(a-i)}}function F2(e,t,r=uv){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,i=Math.floor(a),o=+r(e[i],i,e),s=+r(e[i+1],i+1,e);return o+(s-o)*(a-i)}}function B2(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(a);++n<a;)i[n]=e+n*r;return i}function zt(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function wr(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Sl=Symbol("implicit");function Rc(){var e=new kf,t=[],r=[],n=Sl;function a(i){let o=e.get(i);if(o===void 0){if(n!==Sl)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new kf;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return Rc(t,r).unknown(n)},zt.apply(a,arguments),a}function Lc(){var e=Rc().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,i,o,s=!1,l=0,u=0,d=.5;delete e.unknown;function f(){var m=t().length,h=a<n,p=h?a:n,v=h?n:a;i=(v-p)/Math.max(1,m-l+u*2),s&&(i=Math.floor(i)),p+=(v-p-i*(m-l))*d,o=i*(1-l),s&&(p=Math.round(p),o=Math.round(o));var g=B2(m).map(function(x){return p+i*x});return r(h?g.reverse():g)}return e.domain=function(m){return arguments.length?(t(m),f()):t()},e.range=function(m){return arguments.length?([n,a]=m,n=+n,a=+a,f()):[n,a]},e.rangeRound=function(m){return[n,a]=m,n=+n,a=+a,s=!0,f()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(m){return arguments.length?(s=!!m,f()):s},e.padding=function(m){return arguments.length?(l=Math.min(1,u=+m),f()):l},e.paddingInner=function(m){return arguments.length?(l=Math.min(1,m),f()):l},e.paddingOuter=function(m){return arguments.length?(u=+m,f()):u},e.align=function(m){return arguments.length?(d=Math.max(0,Math.min(1,m)),f()):d},e.copy=function(){return Lc(t(),[n,a]).round(s).paddingInner(l).paddingOuter(u).align(d)},zt.apply(f(),arguments)}function mv(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return mv(t())},e}function U2(){return mv(Lc.apply(null,arguments).paddingInner(1))}function Fc(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function hv(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Ya(){}var Aa=.7,Ji=1/Aa,zn="\\s*([+-]?\\d+)\\s*",Ca="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Jt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",W2=/^#([0-9a-f]{3,8})$/,H2=new RegExp(`^rgb\\(${zn},${zn},${zn}\\)$`),q2=new RegExp(`^rgb\\(${Jt},${Jt},${Jt}\\)$`),Z2=new RegExp(`^rgba\\(${zn},${zn},${zn},${Ca}\\)$`),K2=new RegExp(`^rgba\\(${Jt},${Jt},${Jt},${Ca}\\)$`),G2=new RegExp(`^hsl\\(${Ca},${Jt},${Jt}\\)$`),V2=new RegExp(`^hsla\\(${Ca},${Jt},${Jt},${Ca}\\)$`),Of={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Fc(Ya,Oa,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Tf,formatHex:Tf,formatHex8:Y2,formatHsl:X2,formatRgb:If,toString:If});function Tf(){return this.rgb().formatHex()}function Y2(){return this.rgb().formatHex8()}function X2(){return pv(this).formatHsl()}function If(){return this.rgb().formatRgb()}function Oa(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=W2.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?Df(t):r===3?new ct(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Pi(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Pi(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=H2.exec(e))?new ct(t[1],t[2],t[3],1):(t=q2.exec(e))?new ct(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Z2.exec(e))?Pi(t[1],t[2],t[3],t[4]):(t=K2.exec(e))?Pi(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=G2.exec(e))?zf(t[1],t[2]/100,t[3]/100,1):(t=V2.exec(e))?zf(t[1],t[2]/100,t[3]/100,t[4]):Of.hasOwnProperty(e)?Df(Of[e]):e==="transparent"?new ct(NaN,NaN,NaN,0):null}function Df(e){return new ct(e>>16&255,e>>8&255,e&255,1)}function Pi(e,t,r,n){return n<=0&&(e=t=r=NaN),new ct(e,t,r,n)}function Q2(e){return e instanceof Ya||(e=Oa(e)),e?(e=e.rgb(),new ct(e.r,e.g,e.b,e.opacity)):new ct}function Nl(e,t,r,n){return arguments.length===1?Q2(e):new ct(e,t,r,n??1)}function ct(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}Fc(ct,Nl,hv(Ya,{brighter(e){return e=e==null?Ji:Math.pow(Ji,e),new ct(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Aa:Math.pow(Aa,e),new ct(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ct(on(this.r),on(this.g),on(this.b),eo(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Mf,formatHex:Mf,formatHex8:J2,formatRgb:$f,toString:$f}));function Mf(){return`#${en(this.r)}${en(this.g)}${en(this.b)}`}function J2(){return`#${en(this.r)}${en(this.g)}${en(this.b)}${en((isNaN(this.opacity)?1:this.opacity)*255)}`}function $f(){const e=eo(this.opacity);return`${e===1?"rgb(":"rgba("}${on(this.r)}, ${on(this.g)}, ${on(this.b)}${e===1?")":`, ${e})`}`}function eo(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function on(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function en(e){return e=on(e),(e<16?"0":"")+e.toString(16)}function zf(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Ut(e,t,r,n)}function pv(e){if(e instanceof Ut)return new Ut(e.h,e.s,e.l,e.opacity);if(e instanceof Ya||(e=Oa(e)),!e)return new Ut;if(e instanceof Ut)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,s=i-a,l=(i+a)/2;return s?(t===i?o=(r-n)/s+(r<n)*6:r===i?o=(n-t)/s+2:o=(t-r)/s+4,s/=l<.5?i+a:2-i-a,o*=60):s=l>0&&l<1?0:o,new Ut(o,s,l,e.opacity)}function eC(e,t,r,n){return arguments.length===1?pv(e):new Ut(e,t,r,n??1)}function Ut(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}Fc(Ut,eC,hv(Ya,{brighter(e){return e=e==null?Ji:Math.pow(Ji,e),new Ut(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Aa:Math.pow(Aa,e),new Ut(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new ct(Ts(e>=240?e-240:e+120,a,n),Ts(e,a,n),Ts(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new Ut(Rf(this.h),Si(this.s),Si(this.l),eo(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=eo(this.opacity);return`${e===1?"hsl(":"hsla("}${Rf(this.h)}, ${Si(this.s)*100}%, ${Si(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Rf(e){return e=(e||0)%360,e<0?e+360:e}function Si(e){return Math.max(0,Math.min(1,e||0))}function Ts(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const Bc=e=>()=>e;function tC(e,t){return function(r){return e+r*t}}function rC(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function nC(e){return(e=+e)==1?gv:function(t,r){return r-t?rC(t,r,e):Bc(isNaN(t)?r:t)}}function gv(e,t){var r=t-e;return r?tC(e,r):Bc(isNaN(e)?t:e)}const Lf=function e(t){var r=nC(t);function n(a,i){var o=r((a=Nl(a)).r,(i=Nl(i)).r),s=r(a.g,i.g),l=r(a.b,i.b),u=gv(a.opacity,i.opacity);return function(d){return a.r=o(d),a.g=s(d),a.b=l(d),a.opacity=u(d),a+""}}return n.gamma=e,n}(1);function aC(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=e[a]*(1-i)+t[a]*i;return n}}function iC(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function oC(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)a[o]=Gn(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(s){for(o=0;o<n;++o)i[o]=a[o](s);return i}}function sC(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function to(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function lC(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=Gn(e[a],t[a]):n[a]=t[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var _l=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Is=new RegExp(_l.source,"g");function cC(e){return function(){return e}}function uC(e){return function(t){return e(t)+""}}function dC(e,t){var r=_l.lastIndex=Is.lastIndex=0,n,a,i,o=-1,s=[],l=[];for(e=e+"",t=t+"";(n=_l.exec(e))&&(a=Is.exec(t));)(i=a.index)>r&&(i=t.slice(r,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(a=a[0])?s[o]?s[o]+=a:s[++o]=a:(s[++o]=null,l.push({i:o,x:to(n,a)})),r=Is.lastIndex;return r<t.length&&(i=t.slice(r),s[o]?s[o]+=i:s[++o]=i),s.length<2?l[0]?uC(l[0].x):cC(t):(t=l.length,function(u){for(var d=0,f;d<t;++d)s[(f=l[d]).i]=f.x(u);return s.join("")})}function Gn(e,t){var r=typeof t,n;return t==null||r==="boolean"?Bc(t):(r==="number"?to:r==="string"?(n=Oa(t))?(t=n,Lf):dC:t instanceof Oa?Lf:t instanceof Date?sC:iC(t)?aC:Array.isArray(t)?oC:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?lC:to)(e,t)}function Uc(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function fC(e,t){t===void 0&&(t=e,e=Gn);for(var r=0,n=t.length-1,a=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(a,a=t[++r]);return function(o){var s=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[s](o-s)}}function mC(e){return function(){return e}}function ro(e){return+e}var Ff=[0,1];function nt(e){return e}function kl(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:mC(isNaN(t)?NaN:.5)}function hC(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function pC(e,t,r){var n=e[0],a=e[1],i=t[0],o=t[1];return a<n?(n=kl(a,n),i=r(o,i)):(n=kl(n,a),i=r(i,o)),function(s){return i(n(s))}}function gC(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)a[o]=kl(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(s){var l=Va(e,s,1,n)-1;return i[l](a[l](s))}}function Xa(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Yo(){var e=Ff,t=Ff,r=Gn,n,a,i,o=nt,s,l,u;function d(){var m=Math.min(e.length,t.length);return o!==nt&&(o=hC(e[0],e[m-1])),s=m>2?gC:pC,l=u=null,f}function f(m){return m==null||isNaN(m=+m)?i:(l||(l=s(e.map(n),t,r)))(n(o(m)))}return f.invert=function(m){return o(a((u||(u=s(t,e.map(n),to)))(m)))},f.domain=function(m){return arguments.length?(e=Array.from(m,ro),d()):e.slice()},f.range=function(m){return arguments.length?(t=Array.from(m),d()):t.slice()},f.rangeRound=function(m){return t=Array.from(m),r=Uc,d()},f.clamp=function(m){return arguments.length?(o=m?!0:nt,d()):o!==nt},f.interpolate=function(m){return arguments.length?(r=m,d()):r},f.unknown=function(m){return arguments.length?(i=m,f):i},function(m,h){return n=m,a=h,d()}}function Wc(){return Yo()(nt,nt)}function vC(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function no(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Bn(e){return e=no(Math.abs(e)),e?e[1]:NaN}function yC(e,t){return function(r,n){for(var a=r.length,i=[],o=0,s=e[0],l=0;a>0&&s>0&&(l+s+1>n&&(s=Math.max(1,n-l)),i.push(r.substring(a-=s,a+s)),!((l+=s+1)>n));)s=e[o=(o+1)%e.length];return i.reverse().join(t)}}function xC(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var bC=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ta(e){if(!(t=bC.exec(e)))throw new Error("invalid format: "+e);var t;return new Hc({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Ta.prototype=Hc.prototype;function Hc(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Hc.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function wC(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var vv;function jC(e,t){var r=no(e,t);if(!r)return e+"";var n=r[0],a=r[1],i=a-(vv=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+no(e,Math.max(0,t+i-1))[0]}function Bf(e,t){var r=no(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const Uf={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:vC,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Bf(e*100,t),r:Bf,s:jC,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Wf(e){return e}var Hf=Array.prototype.map,qf=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function PC(e){var t=e.grouping===void 0||e.thousands===void 0?Wf:yC(Hf.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?Wf:xC(Hf.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"−":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(f){f=Ta(f);var m=f.fill,h=f.align,p=f.sign,v=f.symbol,g=f.zero,x=f.width,b=f.comma,w=f.precision,j=f.trim,P=f.type;P==="n"?(b=!0,P="g"):Uf[P]||(w===void 0&&(w=12),j=!0,P="g"),(g||m==="0"&&h==="=")&&(g=!0,m="0",h="=");var S=v==="$"?r:v==="#"&&/[boxX]/.test(P)?"0"+P.toLowerCase():"",N=v==="$"?n:/[%p]/.test(P)?o:"",C=Uf[P],T=/[defgprs%]/.test(P);w=w===void 0?6:/[gprs]/.test(P)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function R(k){var O=S,B=N,Z,V,F;if(P==="c")B=C(k)+B,k="";else{k=+k;var q=k<0||1/k<0;if(k=isNaN(k)?l:C(Math.abs(k),w),j&&(k=wC(k)),q&&+k==0&&p!=="+"&&(q=!1),O=(q?p==="("?p:s:p==="-"||p==="("?"":p)+O,B=(P==="s"?qf[8+vv/3]:"")+B+(q&&p==="("?")":""),T){for(Z=-1,V=k.length;++Z<V;)if(F=k.charCodeAt(Z),48>F||F>57){B=(F===46?a+k.slice(Z+1):k.slice(Z))+B,k=k.slice(0,Z);break}}}b&&!g&&(k=t(k,1/0));var ee=O.length+k.length+B.length,te=ee<x?new Array(x-ee+1).join(m):"";switch(b&&g&&(k=t(te+k,te.length?x-B.length:1/0),te=""),h){case"<":k=O+k+B+te;break;case"=":k=O+te+k+B;break;case"^":k=te.slice(0,ee=te.length>>1)+O+k+B+te.slice(ee);break;default:k=te+O+k+B;break}return i(k)}return R.toString=function(){return f+""},R}function d(f,m){var h=u((f=Ta(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(Bn(m)/3)))*3,v=Math.pow(10,-p),g=qf[8+p/3];return function(x){return h(v*x)+g}}return{format:u,formatPrefix:d}}var Ni,qc,yv;SC({thousands:",",grouping:[3],currency:["$",""]});function SC(e){return Ni=PC(e),qc=Ni.format,yv=Ni.formatPrefix,Ni}function NC(e){return Math.max(0,-Bn(Math.abs(e)))}function _C(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Bn(t)/3)))*3-Bn(Math.abs(e)))}function kC(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Bn(t)-Bn(e))+1}function xv(e,t,r,n){var a=Pl(e,t,r),i;switch(n=Ta(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=_C(a,o))&&(n.precision=i),yv(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=kC(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=NC(a))&&(n.precision=i-(n.type==="%")*2);break}}return qc(n)}function Ur(e){var t=e.domain;return e.ticks=function(r){var n=t();return wl(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return xv(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,i=n.length-1,o=n[a],s=n[i],l,u,d=10;for(s<o&&(u=o,o=s,s=u,u=a,a=i,i=u);d-- >0;){if(u=jl(o,s,r),u===l)return n[a]=o,n[i]=s,t(n);if(u>0)o=Math.floor(o/u)*u,s=Math.ceil(s/u)*u;else if(u<0)o=Math.ceil(o*u)/u,s=Math.floor(s*u)/u;else break;l=u}return e},e}function bv(){var e=Wc();return e.copy=function(){return Xa(e,bv())},zt.apply(e,arguments),Ur(e)}function wv(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,ro),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return wv(e).unknown(t)},e=arguments.length?Array.from(e,ro):[0,1],Ur(r)}function jv(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],i=e[n],o;return i<a&&(o=r,r=n,n=o,o=a,a=i,i=o),e[r]=t.floor(a),e[n]=t.ceil(i),e}function Zf(e){return Math.log(e)}function Kf(e){return Math.exp(e)}function EC(e){return-Math.log(-e)}function AC(e){return-Math.exp(-e)}function CC(e){return isFinite(e)?+("1e"+e):e<0?0:e}function OC(e){return e===10?CC:e===Math.E?Math.exp:t=>Math.pow(e,t)}function TC(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Gf(e){return(t,r)=>-e(-t,r)}function Zc(e){const t=e(Zf,Kf),r=t.domain;let n=10,a,i;function o(){return a=TC(n),i=OC(n),r()[0]<0?(a=Gf(a),i=Gf(i),e(EC,AC)):e(Zf,Kf),t}return t.base=function(s){return arguments.length?(n=+s,o()):n},t.domain=function(s){return arguments.length?(r(s),o()):r()},t.ticks=s=>{const l=r();let u=l[0],d=l[l.length-1];const f=d<u;f&&([u,d]=[d,u]);let m=a(u),h=a(d),p,v;const g=s==null?10:+s;let x=[];if(!(n%1)&&h-m<g){if(m=Math.floor(m),h=Math.ceil(h),u>0){for(;m<=h;++m)for(p=1;p<n;++p)if(v=m<0?p/i(-m):p*i(m),!(v<u)){if(v>d)break;x.push(v)}}else for(;m<=h;++m)for(p=n-1;p>=1;--p)if(v=m>0?p/i(-m):p*i(m),!(v<u)){if(v>d)break;x.push(v)}x.length*2<g&&(x=wl(u,d,g))}else x=wl(m,h,Math.min(h-m,g)).map(i);return f?x.reverse():x},t.tickFormat=(s,l)=>{if(s==null&&(s=10),l==null&&(l=n===10?"s":","),typeof l!="function"&&(!(n%1)&&(l=Ta(l)).precision==null&&(l.trim=!0),l=qc(l)),s===1/0)return l;const u=Math.max(1,n*s/t.ticks().length);return d=>{let f=d/i(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?l(d):""}},t.nice=()=>r(jv(r(),{floor:s=>i(Math.floor(a(s))),ceil:s=>i(Math.ceil(a(s)))})),t}function Pv(){const e=Zc(Yo()).domain([1,10]);return e.copy=()=>Xa(e,Pv()).base(e.base()),zt.apply(e,arguments),e}function Vf(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Yf(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Kc(e){var t=1,r=e(Vf(t),Yf(t));return r.constant=function(n){return arguments.length?e(Vf(t=+n),Yf(t)):t},Ur(r)}function Sv(){var e=Kc(Yo());return e.copy=function(){return Xa(e,Sv()).constant(e.constant())},zt.apply(e,arguments)}function Xf(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function IC(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function DC(e){return e<0?-e*e:e*e}function Gc(e){var t=e(nt,nt),r=1;function n(){return r===1?e(nt,nt):r===.5?e(IC,DC):e(Xf(r),Xf(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},Ur(t)}function Vc(){var e=Gc(Yo());return e.copy=function(){return Xa(e,Vc()).exponent(e.exponent())},zt.apply(e,arguments),e}function MC(){return Vc.apply(null,arguments).exponent(.5)}function Qf(e){return Math.sign(e)*e*e}function $C(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function Nv(){var e=Wc(),t=[0,1],r=!1,n;function a(i){var o=$C(e(i));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(i){return e.invert(Qf(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,ro)).map(Qf)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return Nv(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},zt.apply(a,arguments),Ur(a)}function _v(){var e=[],t=[],r=[],n;function a(){var o=0,s=Math.max(1,t.length);for(r=new Array(s-1);++o<s;)r[o-1]=F2(e,o/s);return i}function i(o){return o==null||isNaN(o=+o)?n:t[Va(r,o)]}return i.invertExtent=function(o){var s=t.indexOf(o);return s<0?[NaN,NaN]:[s>0?r[s-1]:e[0],s<r.length?r[s]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let s of o)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort($r),a()},i.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return _v().domain(e).range(t).unknown(n)},zt.apply(i,arguments)}function kv(){var e=0,t=1,r=1,n=[.5],a=[0,1],i;function o(l){return l!=null&&l<=l?a[Va(n,l,0,r)]:i}function s(){var l=-1;for(n=new Array(r);++l<r;)n[l]=((l+1)*t-(l-r)*e)/(r+1);return o}return o.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,s()):[e,t]},o.range=function(l){return arguments.length?(r=(a=Array.from(l)).length-1,s()):a.slice()},o.invertExtent=function(l){var u=a.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},o.unknown=function(l){return arguments.length&&(i=l),o},o.thresholds=function(){return n.slice()},o.copy=function(){return kv().domain([e,t]).range(a).unknown(i)},zt.apply(Ur(o),arguments)}function Ev(){var e=[.5],t=[0,1],r,n=1;function a(i){return i!=null&&i<=i?t[Va(e,i,0,n)]:r}return a.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return Ev().domain(e).range(t).unknown(r)},zt.apply(a,arguments)}const Ds=new Date,Ms=new Date;function $e(e,t,r,n){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const o=a(i),s=a.ceil(i);return i-o<s-i?o:s},a.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,s)=>{const l=[];if(i=a.ceil(i),s=s==null?1:Math.floor(s),!(i<o)||!(s>0))return l;let u;do l.push(u=new Date(+i)),t(i,s),e(i);while(u<i&&i<o);return l},a.filter=i=>$e(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,s)=>{if(o>=o)if(s<0)for(;++s<=0;)for(;t(o,-1),!i(o););else for(;--s>=0;)for(;t(o,1),!i(o););}),r&&(a.count=(i,o)=>(Ds.setTime(+i),Ms.setTime(+o),e(Ds),e(Ms),Math.floor(r(Ds,Ms))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?o=>n(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const ao=$e(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);ao.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?$e(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):ao);ao.range;const sr=1e3,Tt=sr*60,lr=Tt*60,pr=lr*24,Yc=pr*7,Jf=pr*30,$s=pr*365,tn=$e(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*sr)},(e,t)=>(t-e)/sr,e=>e.getUTCSeconds());tn.range;const Xc=$e(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*sr)},(e,t)=>{e.setTime(+e+t*Tt)},(e,t)=>(t-e)/Tt,e=>e.getMinutes());Xc.range;const Qc=$e(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Tt)},(e,t)=>(t-e)/Tt,e=>e.getUTCMinutes());Qc.range;const Jc=$e(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*sr-e.getMinutes()*Tt)},(e,t)=>{e.setTime(+e+t*lr)},(e,t)=>(t-e)/lr,e=>e.getHours());Jc.range;const eu=$e(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*lr)},(e,t)=>(t-e)/lr,e=>e.getUTCHours());eu.range;const Qa=$e(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Tt)/pr,e=>e.getDate()-1);Qa.range;const Xo=$e(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/pr,e=>e.getUTCDate()-1);Xo.range;const Av=$e(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/pr,e=>Math.floor(e/pr));Av.range;function xn(e){return $e(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Tt)/Yc)}const Qo=xn(0),io=xn(1),zC=xn(2),RC=xn(3),Un=xn(4),LC=xn(5),FC=xn(6);Qo.range;io.range;zC.range;RC.range;Un.range;LC.range;FC.range;function bn(e){return $e(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/Yc)}const Jo=bn(0),oo=bn(1),BC=bn(2),UC=bn(3),Wn=bn(4),WC=bn(5),HC=bn(6);Jo.range;oo.range;BC.range;UC.range;Wn.range;WC.range;HC.range;const tu=$e(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());tu.range;const ru=$e(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());ru.range;const gr=$e(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());gr.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:$e(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});gr.range;const vr=$e(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());vr.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:$e(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});vr.range;function Cv(e,t,r,n,a,i){const o=[[tn,1,sr],[tn,5,5*sr],[tn,15,15*sr],[tn,30,30*sr],[i,1,Tt],[i,5,5*Tt],[i,15,15*Tt],[i,30,30*Tt],[a,1,lr],[a,3,3*lr],[a,6,6*lr],[a,12,12*lr],[n,1,pr],[n,2,2*pr],[r,1,Yc],[t,1,Jf],[t,3,3*Jf],[e,1,$s]];function s(u,d,f){const m=d<u;m&&([u,d]=[d,u]);const h=f&&typeof f.range=="function"?f:l(u,d,f),p=h?h.range(u,+d+1):[];return m?p.reverse():p}function l(u,d,f){const m=Math.abs(d-u)/f,h=zc(([,,g])=>g).right(o,m);if(h===o.length)return e.every(Pl(u/$s,d/$s,f));if(h===0)return ao.every(Math.max(Pl(u,d,f),1));const[p,v]=o[m/o[h-1][2]<o[h][2]/m?h-1:h];return p.every(v)}return[s,l]}const[qC,ZC]=Cv(vr,ru,Jo,Av,eu,Qc),[KC,GC]=Cv(gr,tu,Qo,Qa,Jc,Xc);function zs(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Rs(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function ha(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function VC(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,i=e.days,o=e.shortDays,s=e.months,l=e.shortMonths,u=pa(a),d=ga(a),f=pa(i),m=ga(i),h=pa(o),p=ga(o),v=pa(s),g=ga(s),x=pa(l),b=ga(l),w={a:q,A:ee,b:te,B:_e,c:null,d:im,e:im,f:yO,g:EO,G:CO,H:pO,I:gO,j:vO,L:Ov,m:xO,M:bO,p:K,q:$,Q:lm,s:cm,S:wO,u:jO,U:PO,V:SO,w:NO,W:_O,x:null,X:null,y:kO,Y:AO,Z:OO,"%":sm},j={a:Y,A:Ce,b:Oe,B:be,c:null,d:om,e:om,f:MO,g:qO,G:KO,H:TO,I:IO,j:DO,L:Iv,m:$O,M:zO,p:Zr,q:Sr,Q:lm,s:cm,S:RO,u:LO,U:FO,V:BO,w:UO,W:WO,x:null,X:null,y:HO,Y:ZO,Z:GO,"%":sm},P={a:R,A:k,b:O,B,c:Z,d:nm,e:nm,f:dO,g:rm,G:tm,H:am,I:am,j:sO,L:uO,m:oO,M:lO,p:T,q:iO,Q:mO,s:hO,S:cO,u:eO,U:tO,V:rO,w:JC,W:nO,x:V,X:F,y:rm,Y:tm,Z:aO,"%":fO};w.x=S(r,w),w.X=S(n,w),w.c=S(t,w),j.x=S(r,j),j.X=S(n,j),j.c=S(t,j);function S(z,X){return function(ae){var D=[],Xe=-1,se=0,rt=z.length,Qe,ht,ta;for(ae instanceof Date||(ae=new Date(+ae));++Xe<rt;)z.charCodeAt(Xe)===37&&(D.push(z.slice(se,Xe)),(ht=em[Qe=z.charAt(++Xe)])!=null?Qe=z.charAt(++Xe):ht=Qe==="e"?" ":"0",(ta=X[Qe])&&(Qe=ta(ae,ht)),D.push(Qe),se=Xe+1);return D.push(z.slice(se,Xe)),D.join("")}}function N(z,X){return function(ae){var D=ha(1900,void 0,1),Xe=C(D,z,ae+="",0),se,rt;if(Xe!=ae.length)return null;if("Q"in D)return new Date(D.Q);if("s"in D)return new Date(D.s*1e3+("L"in D?D.L:0));if(X&&!("Z"in D)&&(D.Z=0),"p"in D&&(D.H=D.H%12+D.p*12),D.m===void 0&&(D.m="q"in D?D.q:0),"V"in D){if(D.V<1||D.V>53)return null;"w"in D||(D.w=1),"Z"in D?(se=Rs(ha(D.y,0,1)),rt=se.getUTCDay(),se=rt>4||rt===0?oo.ceil(se):oo(se),se=Xo.offset(se,(D.V-1)*7),D.y=se.getUTCFullYear(),D.m=se.getUTCMonth(),D.d=se.getUTCDate()+(D.w+6)%7):(se=zs(ha(D.y,0,1)),rt=se.getDay(),se=rt>4||rt===0?io.ceil(se):io(se),se=Qa.offset(se,(D.V-1)*7),D.y=se.getFullYear(),D.m=se.getMonth(),D.d=se.getDate()+(D.w+6)%7)}else("W"in D||"U"in D)&&("w"in D||(D.w="u"in D?D.u%7:"W"in D?1:0),rt="Z"in D?Rs(ha(D.y,0,1)).getUTCDay():zs(ha(D.y,0,1)).getDay(),D.m=0,D.d="W"in D?(D.w+6)%7+D.W*7-(rt+5)%7:D.w+D.U*7-(rt+6)%7);return"Z"in D?(D.H+=D.Z/100|0,D.M+=D.Z%100,Rs(D)):zs(D)}}function C(z,X,ae,D){for(var Xe=0,se=X.length,rt=ae.length,Qe,ht;Xe<se;){if(D>=rt)return-1;if(Qe=X.charCodeAt(Xe++),Qe===37){if(Qe=X.charAt(Xe++),ht=P[Qe in em?X.charAt(Xe++):Qe],!ht||(D=ht(z,ae,D))<0)return-1}else if(Qe!=ae.charCodeAt(D++))return-1}return D}function T(z,X,ae){var D=u.exec(X.slice(ae));return D?(z.p=d.get(D[0].toLowerCase()),ae+D[0].length):-1}function R(z,X,ae){var D=h.exec(X.slice(ae));return D?(z.w=p.get(D[0].toLowerCase()),ae+D[0].length):-1}function k(z,X,ae){var D=f.exec(X.slice(ae));return D?(z.w=m.get(D[0].toLowerCase()),ae+D[0].length):-1}function O(z,X,ae){var D=x.exec(X.slice(ae));return D?(z.m=b.get(D[0].toLowerCase()),ae+D[0].length):-1}function B(z,X,ae){var D=v.exec(X.slice(ae));return D?(z.m=g.get(D[0].toLowerCase()),ae+D[0].length):-1}function Z(z,X,ae){return C(z,t,X,ae)}function V(z,X,ae){return C(z,r,X,ae)}function F(z,X,ae){return C(z,n,X,ae)}function q(z){return o[z.getDay()]}function ee(z){return i[z.getDay()]}function te(z){return l[z.getMonth()]}function _e(z){return s[z.getMonth()]}function K(z){return a[+(z.getHours()>=12)]}function $(z){return 1+~~(z.getMonth()/3)}function Y(z){return o[z.getUTCDay()]}function Ce(z){return i[z.getUTCDay()]}function Oe(z){return l[z.getUTCMonth()]}function be(z){return s[z.getUTCMonth()]}function Zr(z){return a[+(z.getUTCHours()>=12)]}function Sr(z){return 1+~~(z.getUTCMonth()/3)}return{format:function(z){var X=S(z+="",w);return X.toString=function(){return z},X},parse:function(z){var X=N(z+="",!1);return X.toString=function(){return z},X},utcFormat:function(z){var X=S(z+="",j);return X.toString=function(){return z},X},utcParse:function(z){var X=N(z+="",!0);return X.toString=function(){return z},X}}}var em={"-":"",_:" ",0:"0"},Fe=/^\s*\d+/,YC=/^%/,XC=/[\\^$*+?|[\]().{}]/g;function ie(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(t)+a:a)}function QC(e){return e.replace(XC,"\\$&")}function pa(e){return new RegExp("^(?:"+e.map(QC).join("|")+")","i")}function ga(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function JC(e,t,r){var n=Fe.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function eO(e,t,r){var n=Fe.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function tO(e,t,r){var n=Fe.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function rO(e,t,r){var n=Fe.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function nO(e,t,r){var n=Fe.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function tm(e,t,r){var n=Fe.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function rm(e,t,r){var n=Fe.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function aO(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function iO(e,t,r){var n=Fe.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function oO(e,t,r){var n=Fe.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function nm(e,t,r){var n=Fe.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function sO(e,t,r){var n=Fe.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function am(e,t,r){var n=Fe.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function lO(e,t,r){var n=Fe.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function cO(e,t,r){var n=Fe.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function uO(e,t,r){var n=Fe.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function dO(e,t,r){var n=Fe.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function fO(e,t,r){var n=YC.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function mO(e,t,r){var n=Fe.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function hO(e,t,r){var n=Fe.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function im(e,t){return ie(e.getDate(),t,2)}function pO(e,t){return ie(e.getHours(),t,2)}function gO(e,t){return ie(e.getHours()%12||12,t,2)}function vO(e,t){return ie(1+Qa.count(gr(e),e),t,3)}function Ov(e,t){return ie(e.getMilliseconds(),t,3)}function yO(e,t){return Ov(e,t)+"000"}function xO(e,t){return ie(e.getMonth()+1,t,2)}function bO(e,t){return ie(e.getMinutes(),t,2)}function wO(e,t){return ie(e.getSeconds(),t,2)}function jO(e){var t=e.getDay();return t===0?7:t}function PO(e,t){return ie(Qo.count(gr(e)-1,e),t,2)}function Tv(e){var t=e.getDay();return t>=4||t===0?Un(e):Un.ceil(e)}function SO(e,t){return e=Tv(e),ie(Un.count(gr(e),e)+(gr(e).getDay()===4),t,2)}function NO(e){return e.getDay()}function _O(e,t){return ie(io.count(gr(e)-1,e),t,2)}function kO(e,t){return ie(e.getFullYear()%100,t,2)}function EO(e,t){return e=Tv(e),ie(e.getFullYear()%100,t,2)}function AO(e,t){return ie(e.getFullYear()%1e4,t,4)}function CO(e,t){var r=e.getDay();return e=r>=4||r===0?Un(e):Un.ceil(e),ie(e.getFullYear()%1e4,t,4)}function OO(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ie(t/60|0,"0",2)+ie(t%60,"0",2)}function om(e,t){return ie(e.getUTCDate(),t,2)}function TO(e,t){return ie(e.getUTCHours(),t,2)}function IO(e,t){return ie(e.getUTCHours()%12||12,t,2)}function DO(e,t){return ie(1+Xo.count(vr(e),e),t,3)}function Iv(e,t){return ie(e.getUTCMilliseconds(),t,3)}function MO(e,t){return Iv(e,t)+"000"}function $O(e,t){return ie(e.getUTCMonth()+1,t,2)}function zO(e,t){return ie(e.getUTCMinutes(),t,2)}function RO(e,t){return ie(e.getUTCSeconds(),t,2)}function LO(e){var t=e.getUTCDay();return t===0?7:t}function FO(e,t){return ie(Jo.count(vr(e)-1,e),t,2)}function Dv(e){var t=e.getUTCDay();return t>=4||t===0?Wn(e):Wn.ceil(e)}function BO(e,t){return e=Dv(e),ie(Wn.count(vr(e),e)+(vr(e).getUTCDay()===4),t,2)}function UO(e){return e.getUTCDay()}function WO(e,t){return ie(oo.count(vr(e)-1,e),t,2)}function HO(e,t){return ie(e.getUTCFullYear()%100,t,2)}function qO(e,t){return e=Dv(e),ie(e.getUTCFullYear()%100,t,2)}function ZO(e,t){return ie(e.getUTCFullYear()%1e4,t,4)}function KO(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Wn(e):Wn.ceil(e),ie(e.getUTCFullYear()%1e4,t,4)}function GO(){return"+0000"}function sm(){return"%"}function lm(e){return+e}function cm(e){return Math.floor(+e/1e3)}var kn,Mv,$v;VO({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function VO(e){return kn=VC(e),Mv=kn.format,kn.parse,$v=kn.utcFormat,kn.utcParse,kn}function YO(e){return new Date(e)}function XO(e){return e instanceof Date?+e:+new Date(+e)}function nu(e,t,r,n,a,i,o,s,l,u){var d=Wc(),f=d.invert,m=d.domain,h=u(".%L"),p=u(":%S"),v=u("%I:%M"),g=u("%I %p"),x=u("%a %d"),b=u("%b %d"),w=u("%B"),j=u("%Y");function P(S){return(l(S)<S?h:s(S)<S?p:o(S)<S?v:i(S)<S?g:n(S)<S?a(S)<S?x:b:r(S)<S?w:j)(S)}return d.invert=function(S){return new Date(f(S))},d.domain=function(S){return arguments.length?m(Array.from(S,XO)):m().map(YO)},d.ticks=function(S){var N=m();return e(N[0],N[N.length-1],S??10)},d.tickFormat=function(S,N){return N==null?P:u(N)},d.nice=function(S){var N=m();return(!S||typeof S.range!="function")&&(S=t(N[0],N[N.length-1],S??10)),S?m(jv(N,S)):d},d.copy=function(){return Xa(d,nu(e,t,r,n,a,i,o,s,l,u))},d}function QO(){return zt.apply(nu(KC,GC,gr,tu,Qo,Qa,Jc,Xc,tn,Mv).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function JO(){return zt.apply(nu(qC,ZC,vr,ru,Jo,Xo,eu,Qc,tn,$v).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function es(){var e=0,t=1,r,n,a,i,o=nt,s=!1,l;function u(f){return f==null||isNaN(f=+f)?l:o(a===0?.5:(f=(i(f)-r)*a,s?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=i(e=+e),n=i(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(s=!!f,u):s},u.interpolator=function(f){return arguments.length?(o=f,u):o};function d(f){return function(m){var h,p;return arguments.length?([h,p]=m,o=f(h,p),u):[o(0),o(1)]}}return u.range=d(Gn),u.rangeRound=d(Uc),u.unknown=function(f){return arguments.length?(l=f,u):l},function(f){return i=f,r=f(e),n=f(t),a=r===n?0:1/(n-r),u}}function Wr(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function zv(){var e=Ur(es()(nt));return e.copy=function(){return Wr(e,zv())},wr.apply(e,arguments)}function Rv(){var e=Zc(es()).domain([1,10]);return e.copy=function(){return Wr(e,Rv()).base(e.base())},wr.apply(e,arguments)}function Lv(){var e=Kc(es());return e.copy=function(){return Wr(e,Lv()).constant(e.constant())},wr.apply(e,arguments)}function au(){var e=Gc(es());return e.copy=function(){return Wr(e,au()).exponent(e.exponent())},wr.apply(e,arguments)}function eT(){return au.apply(null,arguments).exponent(.5)}function Fv(){var e=[],t=nt;function r(n){if(n!=null&&!isNaN(n=+n))return t((Va(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort($r),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>L2(e,i/n))},r.copy=function(){return Fv(t).domain(e)},wr.apply(r,arguments)}function ts(){var e=0,t=.5,r=1,n=1,a,i,o,s,l,u=nt,d,f=!1,m;function h(v){return isNaN(v=+v)?m:(v=.5+((v=+d(v))-i)*(n*v<n*i?s:l),u(f?Math.max(0,Math.min(1,v)):v))}h.domain=function(v){return arguments.length?([e,t,r]=v,a=d(e=+e),i=d(t=+t),o=d(r=+r),s=a===i?0:.5/(i-a),l=i===o?0:.5/(o-i),n=i<a?-1:1,h):[e,t,r]},h.clamp=function(v){return arguments.length?(f=!!v,h):f},h.interpolator=function(v){return arguments.length?(u=v,h):u};function p(v){return function(g){var x,b,w;return arguments.length?([x,b,w]=g,u=fC(v,[x,b,w]),h):[u(0),u(.5),u(1)]}}return h.range=p(Gn),h.rangeRound=p(Uc),h.unknown=function(v){return arguments.length?(m=v,h):m},function(v){return d=v,a=v(e),i=v(t),o=v(r),s=a===i?0:.5/(i-a),l=i===o?0:.5/(o-i),n=i<a?-1:1,h}}function Bv(){var e=Ur(ts()(nt));return e.copy=function(){return Wr(e,Bv())},wr.apply(e,arguments)}function Uv(){var e=Zc(ts()).domain([.1,1,10]);return e.copy=function(){return Wr(e,Uv()).base(e.base())},wr.apply(e,arguments)}function Wv(){var e=Kc(ts());return e.copy=function(){return Wr(e,Wv()).constant(e.constant())},wr.apply(e,arguments)}function iu(){var e=Gc(ts());return e.copy=function(){return Wr(e,iu()).exponent(e.exponent())},wr.apply(e,arguments)}function tT(){return iu.apply(null,arguments).exponent(.5)}const ya=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Lc,scaleDiverging:Bv,scaleDivergingLog:Uv,scaleDivergingPow:iu,scaleDivergingSqrt:tT,scaleDivergingSymlog:Wv,scaleIdentity:wv,scaleImplicit:Sl,scaleLinear:bv,scaleLog:Pv,scaleOrdinal:Rc,scalePoint:U2,scalePow:Vc,scaleQuantile:_v,scaleQuantize:kv,scaleRadial:Nv,scaleSequential:zv,scaleSequentialLog:Rv,scaleSequentialPow:au,scaleSequentialQuantile:Fv,scaleSequentialSqrt:eT,scaleSequentialSymlog:Lv,scaleSqrt:MC,scaleSymlog:Sv,scaleThreshold:Ev,scaleTime:QO,scaleUtc:JO,tickFormat:xv},Symbol.toStringTag,{value:"Module"}));var wn=e=>e.chartData,rT=E([wn],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),Hv=(e,t,r,n)=>n?rT(e):wn(e);function Hn(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(Ht(t)&&Ht(r))return!0}return!1}function um(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function nT(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,a,i;if(Ht(r))a=r;else if(typeof r=="function")return;if(Ht(n))i=n;else if(typeof n=="function")return;var o=[a,i];if(Hn(o))return o}}function aT(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(Hn(n))return um(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[a,i]=e,o,s;if(a==="auto")t!=null&&(o=Math.min(...t));else if(U(a))o=a;else if(typeof a=="function")try{t!=null&&(o=a(t?.[0]))}catch{}else if(typeof a=="string"&&lf.test(a)){var l=lf.exec(a);if(l==null||t==null)o=void 0;else{var u=+l[1];o=t[0]-u}}else o=t?.[0];if(i==="auto")t!=null&&(s=Math.max(...t));else if(U(i))s=i;else if(typeof i=="function")try{t!=null&&(s=i(t?.[1]))}catch{}else if(typeof i=="string"&&cf.test(i)){var d=cf.exec(i);if(d==null||t==null)s=void 0;else{var f=+d[1];s=t[1]+f}}else s=t?.[1];var m=[o,s];if(Hn(m))return t==null?m:um(m,t,r)}}}var Vn=1e9,iT={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},su,we=!0,Mt="[DecimalError] ",sn=Mt+"Invalid argument: ",ou=Mt+"Exponent out of range: ",Yn=Math.floor,Yr=Math.pow,oT=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,wt,Re=1e7,ve=7,qv=9007199254740991,so=Yn(qv/ve),L={};L.absoluteValue=L.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};L.comparedTo=L.cmp=function(e){var t,r,n,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};L.decimalPlaces=L.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*ve;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};L.dividedBy=L.div=function(e){return fr(this,new this.constructor(e))};L.dividedToIntegerBy=L.idiv=function(e){var t=this,r=t.constructor;return fe(fr(t,new r(e),0,1),r.precision)};L.equals=L.eq=function(e){return!this.cmp(e)};L.exponent=function(){return Ie(this)};L.greaterThan=L.gt=function(e){return this.cmp(e)>0};L.greaterThanOrEqualTo=L.gte=function(e){return this.cmp(e)>=0};L.isInteger=L.isint=function(){return this.e>this.d.length-2};L.isNegative=L.isneg=function(){return this.s<0};L.isPositive=L.ispos=function(){return this.s>0};L.isZero=function(){return this.s===0};L.lessThan=L.lt=function(e){return this.cmp(e)<0};L.lessThanOrEqualTo=L.lte=function(e){return this.cmp(e)<1};L.logarithm=L.log=function(e){var t,r=this,n=r.constructor,a=n.precision,i=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(wt))throw Error(Mt+"NaN");if(r.s<1)throw Error(Mt+(r.s?"NaN":"-Infinity"));return r.eq(wt)?new n(0):(we=!1,t=fr(Ia(r,i),Ia(e,i),i),we=!0,fe(t,a))};L.minus=L.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Gv(t,e):Zv(t,(e.s=-e.s,e))};L.modulo=L.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(Mt+"NaN");return r.s?(we=!1,t=fr(r,e,0,1).times(e),we=!0,r.minus(t)):fe(new n(r),a)};L.naturalExponential=L.exp=function(){return Kv(this)};L.naturalLogarithm=L.ln=function(){return Ia(this)};L.negated=L.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};L.plus=L.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Zv(t,e):Gv(t,(e.s=-e.s,e))};L.precision=L.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(sn+e);if(t=Ie(a)+1,n=a.d.length-1,r=n*ve+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};L.squareRoot=L.sqrt=function(){var e,t,r,n,a,i,o,s=this,l=s.constructor;if(s.s<1){if(!s.s)return new l(0);throw Error(Mt+"NaN")}for(e=Ie(s),we=!1,a=Math.sqrt(+s),a==0||a==1/0?(t=Xt(s.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=Yn((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new l(t)):n=new l(a.toString()),r=l.precision,a=o=r+3;;)if(i=n,n=i.plus(fr(s,i,o+2)).times(.5),Xt(i.d).slice(0,o)===(t=Xt(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(fe(i,r+1,0),i.times(i).eq(s)){n=i;break}}else if(t!="9999")break;o+=4}return we=!0,fe(n,r)};L.times=L.mul=function(e){var t,r,n,a,i,o,s,l,u,d=this,f=d.constructor,m=d.d,h=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,l=m.length,u=h.length,l<u&&(i=m,m=h,h=i,o=l,l=u,u=o),i=[],o=l+u,n=o;n--;)i.push(0);for(n=u;--n>=0;){for(t=0,a=l+n;a>n;)s=i[a]+h[n]*m[a-n-1]+t,i[a--]=s%Re|0,t=s/Re|0;i[a]=(i[a]+t)%Re|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,we?fe(e,f.precision):e};L.toDecimalPlaces=L.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(tr(e,0,Vn),t===void 0?t=n.rounding:tr(t,0,8),fe(r,e+Ie(r)+1,t))};L.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=gn(n,!0):(tr(e,0,Vn),t===void 0?t=a.rounding:tr(t,0,8),n=fe(new a(n),e+1,t),r=gn(n,!0,e+1)),r};L.toFixed=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?gn(a):(tr(e,0,Vn),t===void 0?t=i.rounding:tr(t,0,8),n=fe(new i(a),e+Ie(a)+1,t),r=gn(n.abs(),!1,e+Ie(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};L.toInteger=L.toint=function(){var e=this,t=e.constructor;return fe(new t(e),Ie(e)+1,t.rounding)};L.toNumber=function(){return+this};L.toPower=L.pow=function(e){var t,r,n,a,i,o,s=this,l=s.constructor,u=12,d=+(e=new l(e));if(!e.s)return new l(wt);if(s=new l(s),!s.s){if(e.s<1)throw Error(Mt+"Infinity");return s}if(s.eq(wt))return s;if(n=l.precision,e.eq(wt))return fe(s,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=s.s,o){if((r=d<0?-d:d)<=qv){for(a=new l(wt),t=Math.ceil(n/ve+4),we=!1;r%2&&(a=a.times(s),fm(a.d,t)),r=Yn(r/2),r!==0;)s=s.times(s),fm(s.d,t);return we=!0,e.s<0?new l(wt).div(a):fe(a,n)}}else if(i<0)throw Error(Mt+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,s.s=1,we=!1,a=e.times(Ia(s,n+u)),we=!0,a=Kv(a),a.s=i,a};L.toPrecision=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?(r=Ie(a),n=gn(a,r<=i.toExpNeg||r>=i.toExpPos)):(tr(e,1,Vn),t===void 0?t=i.rounding:tr(t,0,8),a=fe(new i(a),e,t),r=Ie(a),n=gn(a,e<=r||r<=i.toExpNeg,e)),n};L.toSignificantDigits=L.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(tr(e,1,Vn),t===void 0?t=n.rounding:tr(t,0,8)),fe(new n(r),e,t)};L.toString=L.valueOf=L.val=L.toJSON=L[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Ie(e),r=e.constructor;return gn(e,t<=r.toExpNeg||t>=r.toExpPos)};function Zv(e,t){var r,n,a,i,o,s,l,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),we?fe(t,f):t;if(l=e.d,u=t.d,o=e.e,a=t.e,l=l.slice(),i=o-a,i){for(i<0?(n=l,i=-i,s=u.length):(n=u,a=o,s=l.length),o=Math.ceil(f/ve),s=o>s?o+1:s+1,i>s&&(i=s,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(s=l.length,i=u.length,s-i<0&&(i=s,n=u,u=l,l=n),r=0;i;)r=(l[--i]=l[i]+u[i]+r)/Re|0,l[i]%=Re;for(r&&(l.unshift(r),++a),s=l.length;l[--s]==0;)l.pop();return t.d=l,t.e=a,we?fe(t,f):t}function tr(e,t,r){if(e!==~~e||e<t||e>r)throw Error(sn+e)}function Xt(e){var t,r,n,a=e.length-1,i="",o=e[0];if(a>0){for(i+=o,t=1;t<a;t++)n=e[t]+"",r=ve-n.length,r&&(i+=Or(r)),i+=n;o=e[t],n=o+"",r=ve-n.length,r&&(i+=Or(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var fr=function(){function e(n,a){var i,o=0,s=n.length;for(n=n.slice();s--;)i=n[s]*a+o,n[s]=i%Re|0,o=i/Re|0;return o&&n.unshift(o),n}function t(n,a,i,o){var s,l;if(i!=o)l=i>o?1:-1;else for(s=l=0;s<i;s++)if(n[s]!=a[s]){l=n[s]>a[s]?1:-1;break}return l}function r(n,a,i){for(var o=0;i--;)n[i]-=o,o=n[i]<a[i]?1:0,n[i]=o*Re+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,o){var s,l,u,d,f,m,h,p,v,g,x,b,w,j,P,S,N,C,T=n.constructor,R=n.s==a.s?1:-1,k=n.d,O=a.d;if(!n.s)return new T(n);if(!a.s)throw Error(Mt+"Division by zero");for(l=n.e-a.e,N=O.length,P=k.length,h=new T(R),p=h.d=[],u=0;O[u]==(k[u]||0);)++u;if(O[u]>(k[u]||0)&&--l,i==null?b=i=T.precision:o?b=i+(Ie(n)-Ie(a))+1:b=i,b<0)return new T(0);if(b=b/ve+2|0,u=0,N==1)for(d=0,O=O[0],b++;(u<P||d)&&b--;u++)w=d*Re+(k[u]||0),p[u]=w/O|0,d=w%O|0;else{for(d=Re/(O[0]+1)|0,d>1&&(O=e(O,d),k=e(k,d),N=O.length,P=k.length),j=N,v=k.slice(0,N),g=v.length;g<N;)v[g++]=0;C=O.slice(),C.unshift(0),S=O[0],O[1]>=Re/2&&++S;do d=0,s=t(O,v,N,g),s<0?(x=v[0],N!=g&&(x=x*Re+(v[1]||0)),d=x/S|0,d>1?(d>=Re&&(d=Re-1),f=e(O,d),m=f.length,g=v.length,s=t(f,v,m,g),s==1&&(d--,r(f,N<m?C:O,m))):(d==0&&(s=d=1),f=O.slice()),m=f.length,m<g&&f.unshift(0),r(v,f,g),s==-1&&(g=v.length,s=t(O,v,N,g),s<1&&(d++,r(v,N<g?C:O,g))),g=v.length):s===0&&(d++,v=[0]),p[u++]=d,s&&v[0]?v[g++]=k[j]||0:(v=[k[j]],g=1);while((j++<P||v[0]!==void 0)&&b--)}return p[0]||p.shift(),h.e=l,fe(h,o?i+Ie(h)+1:i)}}();function Kv(e,t){var r,n,a,i,o,s,l=0,u=0,d=e.constructor,f=d.precision;if(Ie(e)>16)throw Error(ou+Ie(e));if(!e.s)return new d(wt);for(we=!1,s=f,o=new d(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(n=Math.log(Yr(2,u))/Math.LN10*2+5|0,s+=n,r=a=i=new d(wt),d.precision=s;;){if(a=fe(a.times(e),s),r=r.times(++l),o=i.plus(fr(a,r,s)),Xt(o.d).slice(0,s)===Xt(i.d).slice(0,s)){for(;u--;)i=fe(i.times(i),s);return d.precision=f,t==null?(we=!0,fe(i,f)):i}i=o}}function Ie(e){for(var t=e.e*ve,r=e.d[0];r>=10;r/=10)t++;return t}function Ls(e,t,r){if(t>e.LN10.sd())throw we=!0,r&&(e.precision=r),Error(Mt+"LN10 precision limit exceeded");return fe(new e(e.LN10),t)}function Or(e){for(var t="";e--;)t+="0";return t}function Ia(e,t){var r,n,a,i,o,s,l,u,d,f=1,m=10,h=e,p=h.d,v=h.constructor,g=v.precision;if(h.s<1)throw Error(Mt+(h.s?"NaN":"-Infinity"));if(h.eq(wt))return new v(0);if(t==null?(we=!1,u=g):u=t,h.eq(10))return t==null&&(we=!0),Ls(v,u);if(u+=m,v.precision=u,r=Xt(p),n=r.charAt(0),i=Ie(h),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)h=h.times(e),r=Xt(h.d),n=r.charAt(0),f++;i=Ie(h),n>1?(h=new v("0."+r),i++):h=new v(n+"."+r.slice(1))}else return l=Ls(v,u+2,g).times(i+""),h=Ia(new v(n+"."+r.slice(1)),u-m).plus(l),v.precision=g,t==null?(we=!0,fe(h,g)):h;for(s=o=h=fr(h.minus(wt),h.plus(wt),u),d=fe(h.times(h),u),a=3;;){if(o=fe(o.times(d),u),l=s.plus(fr(o,new v(a),u)),Xt(l.d).slice(0,u)===Xt(s.d).slice(0,u))return s=s.times(2),i!==0&&(s=s.plus(Ls(v,u+2,g).times(i+""))),s=fr(s,new v(f),u),v.precision=g,t==null?(we=!0,fe(s,g)):s;s=l,a+=2}}function dm(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=Yn(r/ve),e.d=[],n=(r+1)%ve,r<0&&(n+=ve),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=ve;n<a;)e.d.push(+t.slice(n,n+=ve));t=t.slice(n),n=ve-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),we&&(e.e>so||e.e<-so))throw Error(ou+r)}else e.s=0,e.e=0,e.d=[0];return e}function fe(e,t,r){var n,a,i,o,s,l,u,d,f=e.d;for(o=1,i=f[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=ve,a=t,u=f[d=0];else{if(d=Math.ceil((n+1)/ve),i=f.length,d>=i)return e;for(u=i=f[d],o=1;i>=10;i/=10)o++;n%=ve,a=n-ve+o}if(r!==void 0&&(i=Yr(10,o-a-1),s=u/i%10|0,l=t<0||f[d+1]!==void 0||u%i,l=r<4?(s||l)&&(r==0||r==(e.s<0?3:2)):s>5||s==5&&(r==4||l||r==6&&(n>0?a>0?u/Yr(10,o-a):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return l?(i=Ie(e),f.length=1,t=t-i-1,f[0]=Yr(10,(ve-t%ve)%ve),e.e=Yn(-t/ve)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,i=1,d--):(f.length=d+1,i=Yr(10,ve-n),f[d]=a>0?(u/Yr(10,o-a)%Yr(10,a)|0)*i:0),l)for(;;)if(d==0){(f[0]+=i)==Re&&(f[0]=1,++e.e);break}else{if(f[d]+=i,f[d]!=Re)break;f[d--]=0,i=1}for(n=f.length;f[--n]===0;)f.pop();if(we&&(e.e>so||e.e<-so))throw Error(ou+Ie(e));return e}function Gv(e,t){var r,n,a,i,o,s,l,u,d,f,m=e.constructor,h=m.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new m(e),we?fe(t,h):t;if(l=e.d,f=t.d,n=t.e,u=e.e,l=l.slice(),o=u-n,o){for(d=o<0,d?(r=l,o=-o,s=f.length):(r=f,n=u,s=l.length),a=Math.max(Math.ceil(h/ve),s)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=l.length,s=f.length,d=a<s,d&&(s=a),a=0;a<s;a++)if(l[a]!=f[a]){d=l[a]<f[a];break}o=0}for(d&&(r=l,l=f,f=r,t.s=-t.s),s=l.length,a=f.length-s;a>0;--a)l[s++]=0;for(a=f.length;a>o;){if(l[--a]<f[a]){for(i=a;i&&l[--i]===0;)l[i]=Re-1;--l[i],l[a]+=Re}l[a]-=f[a]}for(;l[--s]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(t.d=l,t.e=n,we?fe(t,h):t):new m(0)}function gn(e,t,r){var n,a=Ie(e),i=Xt(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+Or(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+Or(-a-1)+i,r&&(n=r-o)>0&&(i+=Or(n))):a>=o?(i+=Or(a+1-o),r&&(n=r-a-1)>0&&(i=i+"."+Or(n))):((n=a+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(i+="."),i+=Or(n))),e.s<0?"-"+i:i}function fm(e,t){if(e.length>t)return e.length=t,!0}function Vv(e){var t,r,n;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(sn+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return dm(o,i.toString())}else if(typeof i!="string")throw Error(sn+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,oT.test(i))dm(o,i);else throw Error(sn+i)}if(a.prototype=L,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=Vv,a.config=a.set=sT,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function sT(e){if(!e||typeof e!="object")throw Error(Mt+"Object expected");var t,r,n,a=["precision",1,Vn,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(Yn(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(sn+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(sn+r+": "+n);return this}var su=Vv(iT);wt=new su(1);const le=su;var lT=e=>e,Yv={},Xv=e=>e===Yv,mm=e=>function t(){return arguments.length===0||arguments.length===1&&Xv(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},Qv=(e,t)=>e===1?t:mm(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var i=n.filter(o=>o!==Yv).length;return i>=e?t(...n):Qv(e-i,mm(function(){for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];var u=n.map(d=>Xv(d)?s.shift():d);return t(...u,...s)}))}),rs=e=>Qv(e.length,e),El=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},cT=rs((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),uT=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return lT;var a=r.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce((s,l)=>l(s),i(...arguments))}},Al=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),Jv=e=>{var t=null,r=null;return function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return t&&a.every((o,s)=>{var l;return o===((l=t)===null||l===void 0?void 0:l[s])})||(t=a,r=e(...a)),r}};function e0(e){var t;return e===0?t=1:t=Math.floor(new le(e).abs().log(10).toNumber())+1,t}function t0(e,t,r){for(var n=new le(e),a=0,i=[];n.lt(t)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}rs((e,t,r)=>{var n=+e,a=+t;return n+r*(a-n)});rs((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});rs((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var r0=e=>{var[t,r]=e,[n,a]=[t,r];return t>r&&([n,a]=[r,t]),[n,a]},n0=(e,t,r)=>{if(e.lte(0))return new le(0);var n=e0(e.toNumber()),a=new le(10).pow(n),i=e.div(a),o=n!==1?.05:.1,s=new le(Math.ceil(i.div(o).toNumber())).add(r).mul(o),l=s.mul(a);return t?new le(l.toNumber()):new le(Math.ceil(l.toNumber()))},dT=(e,t,r)=>{var n=new le(1),a=new le(e);if(!a.isint()&&r){var i=Math.abs(e);i<1?(n=new le(10).pow(e0(e)-1),a=new le(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new le(Math.floor(e)))}else e===0?a=new le(Math.floor((t-1)/2)):r||(a=new le(Math.floor(e)));var o=Math.floor((t-1)/2),s=uT(cT(l=>a.add(new le(l-o).mul(n)).toNumber()),El);return s(0,t)},a0=function(t,r,n,a){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new le(0),tickMin:new le(0),tickMax:new le(0)};var o=n0(new le(r).sub(t).div(n-1),a,i),s;t<=0&&r>=0?s=new le(0):(s=new le(t).add(r).div(2),s=s.sub(new le(s).mod(o)));var l=Math.ceil(s.sub(t).div(o).toNumber()),u=Math.ceil(new le(r).sub(s).div(o).toNumber()),d=l+u+1;return d>n?a0(t,r,n,a,i+1):(d<n&&(u=r>0?u+(n-d):u,l=r>0?l:l+(n-d)),{step:o,tickMin:s.sub(new le(l).mul(o)),tickMax:s.add(new le(u).mul(o))})};function fT(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(n,2),[o,s]=r0([t,r]);if(o===-1/0||s===1/0){var l=s===1/0?[o,...El(0,n-1).map(()=>1/0)]:[...El(0,n-1).map(()=>-1/0),s];return t>r?Al(l):l}if(o===s)return dT(o,n,a);var{step:u,tickMin:d,tickMax:f}=a0(o,s,i,a,0),m=t0(d,f.add(new le(.1).mul(u)),u);return t>r?Al(m):m}function mT(e,t){var[r,n]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,o]=r0([r,n]);if(i===-1/0||o===1/0)return[r,n];if(i===o)return[i];var s=Math.max(t,2),l=n0(new le(o).sub(i).div(s-1),a,0),u=[...t0(new le(i),new le(o),l),o];return a===!1&&(u=u.map(d=>Math.round(d))),r>n?Al(u):u}var hT=Jv(fT),pT=Jv(mT),gT=e=>e.rootProps.barCategoryGap,ns=e=>e.rootProps.stackOffset,lu=e=>e.options.chartName,cu=e=>e.rootProps.syncId,i0=e=>e.rootProps.syncMethod,uu=e=>e.options.eventEmitter,ir={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},xt={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},as=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},vT={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:ir.angleAxisId,includeHidden:!1,name:void 0,reversed:ir.reversed,scale:ir.scale,tick:ir.tick,tickCount:void 0,ticks:void 0,type:ir.type,unit:void 0},yT={allowDataOverflow:xt.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:xt.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:xt.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:xt.scale,tick:xt.tick,tickCount:xt.tickCount,ticks:void 0,type:xt.type,unit:void 0},xT={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:ir.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ir.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ir.scale,tick:ir.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},bT={allowDataOverflow:xt.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:xt.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:xt.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:xt.scale,tick:xt.tick,tickCount:xt.tickCount,ticks:void 0,type:"category",unit:void 0},du=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?xT:vT,fu=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?bT:yT,is=e=>e.polarOptions,mu=E([xr,br,Ve],IE),o0=E([is,mu],(e,t)=>{if(e!=null)return Rr(e.innerRadius,t,0)}),s0=E([is,mu],(e,t)=>{if(e!=null)return Rr(e.outerRadius,t,t*.8)}),wT=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},l0=E([is],wT);E([du,l0],as);var c0=E([mu,o0,s0],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});E([fu,c0],as);var jT=E([Ne,is,o0,s0,xr,br],(e,t,r,n,a,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:o,cy:s,startAngle:l,endAngle:u}=t;return{cx:Rr(o,a,a/2),cy:Rr(s,i,i/2),innerRadius:r,outerRadius:n,startAngle:l,endAngle:u,clockWise:!1}}}),Be=(e,t)=>t,os=(e,t,r)=>r;function hm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function lo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hm(Object(r),!0).forEach(function(n){PT(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PT(e,t,r){return(t=ST(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ST(e){var t=NT(e,"string");return typeof t=="symbol"?t:t+""}function NT(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Cl=[0,"auto"],vt={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},jr=(e,t)=>{var r=e.cartesianAxis.xAxis[t];return r??vt},yt={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:Cl,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Ko},Hr=(e,t)=>{var r=e.cartesianAxis.yAxis[t];return r??yt},_T={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},hu=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??_T},mt=(e,t,r)=>{switch(t){case"xAxis":return jr(e,r);case"yAxis":return Hr(e,r);case"zAxis":return hu(e,r);case"angleAxis":return du(e,r);case"radiusAxis":return fu(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},kT=(e,t,r)=>{switch(t){case"xAxis":return jr(e,r);case"yAxis":return Hr(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Ja=(e,t,r)=>{switch(t){case"xAxis":return jr(e,r);case"yAxis":return Hr(e,r);case"angleAxis":return du(e,r);case"radiusAxis":return fu(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},u0=e=>e.graphicalItems.countOfBars>0;function d0(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var f0=e=>e.graphicalItems.cartesianItems,ET=E([Be,os],d0),m0=(e,t,r)=>e.filter(r).filter(n=>t?.includeHidden===!0?!0:!n.hide),ei=E([f0,mt,ET],m0),h0=e=>e.filter(t=>t.stackId===void 0),AT=E([ei],h0),p0=e=>e.map(t=>t.data).filter(Boolean).flat(1),CT=E([ei],p0),g0=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=t;return e.length>0?e:r.slice(n,a+1)},ss=E([CT,Hv],g0),v0=(e,t,r)=>t?.dataKey!=null?e.map(n=>({value:Pt(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(a=>({value:Pt(a,n)}))):e.map(n=>({value:n})),ls=E([ss,mt,ei],v0);function y0(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function jn(e){return e.filter(t=>er(t)||t instanceof Date).map(Number).filter(t=>It(t)===!1)}function OT(e,t,r){return!r||typeof t!="number"||It(t)?[]:r.length?jn(r.flatMap(n=>{var a=Pt(e,n.dataKey),i,o;if(Array.isArray(a)?[i,o]=a:i=o=a,!(!Ht(i)||!Ht(o)))return[t-i,t+o]})):[]}var x0=(e,t,r)=>{var n={},a=t.reduce((i,o)=>(o.stackId==null||(i[o.stackId]==null&&(i[o.stackId]=[]),i[o.stackId].push(o)),i),n);return Object.fromEntries(Object.entries(a).map(i=>{var[o,s]=i,l=s.map(u=>u.dataKey);return[o,{stackedData:GE(e,l,r),graphicalItems:s}]}))},TT=E([ss,ei,ns],x0),b0=(e,t,r)=>{var{dataStartIndex:n,dataEndIndex:a}=t;if(r!=="zAxis"){var i=QE(e,n,a);if(!(i!=null&&i[0]===0&&i[1]===0))return i}},IT=E([TT,wn,Be],b0),w0=(e,t,r,n)=>r.length>0?e.flatMap(a=>r.flatMap(i=>{var o,s,l=(o=i.errorBars)===null||o===void 0?void 0:o.filter(d=>y0(n,d)),u=Pt(a,(s=t.dataKey)!==null&&s!==void 0?s:i.dataKey);return{value:u,errorDomain:OT(a,u,l)}})).filter(Boolean):t?.dataKey!=null?e.map(a=>({value:Pt(a,t.dataKey),errorDomain:[]})):e.map(a=>({value:a,errorDomain:[]})),DT=E(ss,mt,AT,Be,w0);function MT(e){var{value:t}=e;if(er(t)||t instanceof Date)return t}var $T=e=>{var t=e.flatMap(n=>[n.value,n.errorDomain]).flat(1),r=jn(t);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},zT=(e,t,r)=>{var n=e.map(MT).filter(a=>a!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&Op(n))?cv(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},pu=e=>{var t;if(e==null||!("domain"in e))return Cl;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=jn(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:Cl},gu=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r.filter(Boolean);if(a.length!==0){var i=a.flat(),o=Math.min(...i),s=Math.max(...i);return[o,s]}},j0=e=>e.referenceElements.dots,Xn=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),RT=E([j0,Be,os],Xn),P0=e=>e.referenceElements.areas,LT=E([P0,Be,os],Xn),S0=e=>e.referenceElements.lines,FT=E([S0,Be,os],Xn),N0=(e,t)=>{var r=jn(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},BT=E(RT,Be,N0),_0=(e,t)=>{var r=jn(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},UT=E([LT,Be],_0),k0=(e,t)=>{var r=jn(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},WT=E(FT,Be,k0),HT=E(BT,WT,UT,(e,t,r)=>gu(e,r,t)),qT=E([mt],pu),E0=(e,t,r,n,a)=>{var i=nT(t,e.allowDataOverflow);return i??aT(t,gu(r,a,$T(n)),e.allowDataOverflow)},ZT=E([mt,qT,IT,DT,HT],E0),KT=[0,1],A0=(e,t,r,n,a,i,o)=>{if(!(e==null||r==null||r.length===0)){var{dataKey:s,type:l}=e,u=Br(t,i);return u&&s==null?cv(0,r.length):l==="category"?zT(n,e,u):a==="expand"?KT:o}},vu=E([mt,Ne,ss,ls,ns,Be,ZT],A0),C0=(e,t,r,n,a)=>{if(e!=null){var{scale:i,type:o}=e;if(i==="auto")return t==="radial"&&a==="radiusAxis"?"band":t==="radial"&&a==="angleAxis"?"linear":o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":o==="category"?"band":"linear";if(typeof i=="string"){var s="scale".concat(pc(i));return s in ya?s:"point"}}},ti=E([mt,Ne,u0,lu,Be],C0);function GT(e){if(e!=null){if(e in ya)return ya[e]();var t="scale".concat(pc(e));if(t in ya)return ya[t]()}}function yu(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var a=GT(t);if(a!=null){var i=a.domain(r).range(n);return HE(i),i}}}var O0=(e,t,r)=>{var n=pu(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Hn(e))return hT(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Hn(e))return pT(e,t.tickCount,t.allowDecimals)}},xu=E([vu,Ja,ti],O0),T0=(e,t,r,n)=>{if(n!=="angleAxis"&&e?.type==="number"&&Hn(t)&&Array.isArray(r)&&r.length>0){var a=t[0],i=r[0],o=t[1],s=r[r.length-1];return[Math.min(a,i),Math.max(o,s)]}return t},VT=E([mt,vu,xu,Be],T0),YT=E(ls,mt,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(jn(e.map(s=>s.value))).sort((s,l)=>s-l);if(n.length<2)return 1/0;var a=n[n.length-1]-n[0];if(a===0)return 1/0;for(var i=0;i<n.length-1;i++){var o=n[i+1]-n[i];r=Math.min(r,o)}return r/a}}),I0=E(YT,Ne,gT,Ve,(e,t,r,n)=>n,(e,t,r,n,a)=>{if(!Ht(e))return 0;var i=t==="vertical"?n.height:n.width;if(a==="gap")return e*i/2;if(a==="no-gap"){var o=Rr(r,e*i),s=e*i/2;return s-o-(s-o)/i*o}return 0}),XT=(e,t)=>{var r=jr(e,t);return r==null||typeof r.padding!="string"?0:I0(e,"xAxis",t,r.padding)},QT=(e,t)=>{var r=Hr(e,t);return r==null||typeof r.padding!="string"?0:I0(e,"yAxis",t,r.padding)},JT=E(jr,XT,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:a}=e;return typeof a=="string"?{left:t,right:t}:{left:((r=a.left)!==null&&r!==void 0?r:0)+t,right:((n=a.right)!==null&&n!==void 0?n:0)+t}}),eI=E(Hr,QT,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:a}=e;return typeof a=="string"?{top:t,bottom:t}:{top:((r=a.top)!==null&&r!==void 0?r:0)+t,bottom:((n=a.bottom)!==null&&n!==void 0?n:0)+t}}),tI=E([Ve,JT,Vo,Go,(e,t,r)=>r],(e,t,r,n,a)=>{var{padding:i}=n;return a?[i.left,r.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),rI=E([Ve,Ne,eI,Vo,Go,(e,t,r)=>r],(e,t,r,n,a,i)=>{var{padding:o}=a;return i?[n.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),ri=(e,t,r,n)=>{var a;switch(t){case"xAxis":return tI(e,r,n);case"yAxis":return rI(e,r,n);case"zAxis":return(a=hu(e,r))===null||a===void 0?void 0:a.range;case"angleAxis":return l0(e);case"radiusAxis":return c0(e,r);default:return}},D0=E([mt,ri],as),Qn=E([mt,ti,VT,D0],yu);E(ei,Be,(e,t)=>e.flatMap(r=>{var n;return(n=r.errorBars)!==null&&n!==void 0?n:[]}).filter(r=>y0(t,r)));function M0(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var cs=(e,t)=>t,us=(e,t,r)=>r,nI=E(Tc,cs,us,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(M0)),aI=E(Ic,cs,us,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(M0)),$0=(e,t)=>({width:e.width,height:t.height}),iI=(e,t)=>{var r=typeof t.width=="number"?t.width:Ko;return{width:r,height:e.height}},oI=E(Ve,jr,$0),sI=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},lI=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},cI=E(br,Ve,nI,cs,us,(e,t,r,n,a)=>{var i={},o;return r.forEach(s=>{var l=$0(t,s);o==null&&(o=sI(t,n,e));var u=n==="top"&&!a||n==="bottom"&&a;i[s.id]=o-Number(u)*l.height,o+=(u?-1:1)*l.height}),i}),uI=E(xr,Ve,aI,cs,us,(e,t,r,n,a)=>{var i={},o;return r.forEach(s=>{var l=iI(t,s);o==null&&(o=lI(t,n,e));var u=n==="left"&&!a||n==="right"&&a;i[s.id]=o-Number(u)*l.width,o+=(u?-1:1)*l.width}),i}),dI=(e,t)=>{var r=Ve(e),n=jr(e,t);if(n!=null){var a=cI(e,n.orientation,n.mirror),i=a[t];return i==null?{x:r.left,y:0}:{x:r.left,y:i}}},fI=(e,t)=>{var r=Ve(e),n=Hr(e,t);if(n!=null){var a=uI(e,n.orientation,n.mirror),i=a[t];return i==null?{x:0,y:r.top}:{x:i,y:r.top}}},mI=E(Ve,Hr,(e,t)=>{var r=typeof t.width=="number"?t.width:Ko;return{width:r,height:e.height}}),z0=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:a,type:i,dataKey:o}=r,s=Br(e,n),l=t.map(u=>u.value);if(o&&s&&i==="category"&&a&&Op(l))return l}},bu=E([Ne,ls,mt,Be],z0),R0=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:a,scale:i}=r,o=Br(e,n);if(o&&(a==="number"||i!=="auto"))return t.map(s=>s.value)}},wu=E([Ne,ls,Ja,Be],R0),pm=E([Ne,kT,ti,Qn,bu,wu,ri,xu,Be],(e,t,r,n,a,i,o,s,l)=>{if(t==null)return null;var u=Br(e,l);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:l,categoricalDomain:i,duplicateDomain:a,isCategorical:u,niceTicks:s,range:o,realScaleType:r,scale:n}}),hI=(e,t,r,n,a,i,o,s,l)=>{if(!(t==null||n==null)){var u=Br(e,l),{type:d,ticks:f,tickCount:m}=t,h=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,p=d==="category"&&n.bandwidth?n.bandwidth()/h:0;p=l==="angleAxis"&&i!=null&&i.length>=2?Ot(i[0]-i[1])*2*p:p;var v=f||a;if(v){var g=v.map((x,b)=>{var w=o?o.indexOf(x):x;return{index:b,coordinate:n(w)+p,value:x,offset:p}});return g.filter(x=>!It(x.coordinate))}return u&&s?s.map((x,b)=>({coordinate:n(x)+p,value:x,index:b,offset:p})):n.ticks?n.ticks(m).map(x=>({coordinate:n(x)+p,value:x,offset:p})):n.domain().map((x,b)=>({coordinate:n(x)+p,value:o?o[x]:x,index:b,offset:p}))}},L0=E([Ne,Ja,ti,Qn,xu,ri,bu,wu,Be],hI),pI=(e,t,r,n,a,i,o)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var s=Br(e,o),{tickCount:l}=t,u=0;return u=o==="angleAxis"&&n?.length>=2?Ot(n[0]-n[1])*2*u:u,s&&i?i.map((d,f)=>({coordinate:r(d)+u,value:d,index:f,offset:u})):r.ticks?r.ticks(l).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,f)=>({coordinate:r(d)+u,value:a?a[d]:d,index:f,offset:u}))}},F0=E([Ne,Ja,Qn,ri,bu,wu,Be],pI),ds=E(mt,Qn,(e,t)=>{if(!(e==null||t==null))return lo(lo({},e),{},{scale:t})}),gI=E([mt,ti,vu,D0],yu);E((e,t,r)=>hu(e,r),gI,(e,t)=>{if(!(e==null||t==null))return lo(lo({},e),{},{scale:t})});var vI=E([Ne,Tc,Ic],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),B0=e=>e.options.defaultTooltipEventType,U0=e=>e.options.validateTooltipEventTypes;function W0(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function ju(e,t){var r=B0(e),n=U0(e);return W0(t,r,n)}function yI(e){return H(t=>ju(t,e))}var H0=(e,t)=>{var r,n=Number(t);if(!(It(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},xI=e=>e.tooltip.settings,Tr={active:!1,index:null,dataKey:void 0,coordinate:void 0},bI={itemInteraction:{click:Tr,hover:Tr},axisInteraction:{click:Tr,hover:Tr},keyboardInteraction:Tr,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},q0=$t({name:"tooltip",initialState:bI,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=ur(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:wI,removeTooltipEntrySettings:jI,setTooltipSettingsState:PI,setActiveMouseOverItemIndex:SI,mouseLeaveItem:UR,mouseLeaveChart:Z0,setActiveClickItemIndex:WR,setMouseOverAxisIndex:K0,setMouseClickAxisIndex:NI,setSyncInteraction:Ol,setKeyboardInteraction:Tl}=q0.actions,_I=q0.reducer;function gm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _i(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gm(Object(r),!0).forEach(function(n){kI(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kI(e,t,r){return(t=EI(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EI(e){var t=AI(e,"string");return typeof t=="symbol"?t:t+""}function AI(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function CI(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function OI(e){return e.index!=null}var G0=(e,t,r,n)=>{if(t==null)return Tr;var a=CI(e,t,r);if(a==null)return Tr;if(a.active)return a;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(OI(a)){if(i)return _i(_i({},a),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return _i(_i({},Tr),{},{coordinate:a.coordinate})},Pu=(e,t)=>{var r=e?.index;if(r==null)return null;var n=Number(r);if(!Ht(n))return r;var a=0,i=1/0;return t.length>0&&(i=t.length-1),String(Math.max(a,Math.min(n,i)))},V0=(e,t,r,n,a,i,o,s)=>{if(!(i==null||s==null)){var l=o[0],u=l==null?void 0:s(l.positions,i);if(u!=null)return u;var d=a?.[Number(i)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:d.coordinate}}}},Y0=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var a;return r==="hover"?a=e.itemInteraction.hover.dataKey:a=e.itemInteraction.click.dataKey,a==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(i=>{var o;return((o=i.settings)===null||o===void 0?void 0:o.dataKey)===a})},ni=e=>e.options.tooltipPayloadSearcher,Jn=e=>e.tooltip;function vm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ym(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vm(Object(r),!0).forEach(function(n){TI(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function TI(e,t,r){return(t=II(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function II(e){var t=DI(e,"string");return typeof t=="symbol"?t:t+""}function DI(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function MI(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function $I(e,t){return e??t}var X0=(e,t,r,n,a,i,o)=>{if(!(t==null||i==null)){var{chartData:s,computedData:l,dataStartIndex:u,dataEndIndex:d}=r,f=[];return e.reduce((m,h)=>{var p,{dataDefinedOnItem:v,settings:g}=h,x=$I(v,s),b=MI(x,u,d),w=(p=g?.dataKey)!==null&&p!==void 0?p:n?.dataKey,j=g?.nameKey,P;if(n!=null&&n.dataKey&&Array.isArray(b)&&!Array.isArray(b[0])&&o==="axis"?P=Tp(b,n.dataKey,a):P=i(b,t,l,j),Array.isArray(P))P.forEach(N=>{var C=ym(ym({},g),{},{name:N.name,unit:N.unit,color:void 0,fill:void 0});m.push(uf({tooltipEntrySettings:C,dataKey:N.dataKey,payload:N.payload,value:Pt(N.payload,N.dataKey),name:N.name}))});else{var S;m.push(uf({tooltipEntrySettings:g,dataKey:w,payload:P,value:Pt(P,w),name:(S=Pt(P,j))!==null&&S!==void 0?S:g?.name}))}return m},f)}},Ue=e=>{var t=Ne(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},ea=e=>e.tooltip.settings.axisId,Ye=e=>{var t=Ue(e),r=ea(e);return Ja(e,t,r)},Su=E([Ye,Ne,u0,lu,Ue],C0),zI=E([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),RI=E([Ue,ea],d0),fs=E([zI,Ye,RI],m0),LI=E([fs],p0),Pn=E([LI,wn],g0),Nu=E([Pn,Ye,fs],v0),FI=E([Ye],pu),BI=E([Pn,fs,ns],x0),UI=E([BI,wn,Ue],b0),WI=E([fs],h0),HI=E([Pn,Ye,WI,Ue],w0),qI=E([j0,Ue,ea],Xn),ZI=E([qI,Ue],N0),KI=E([P0,Ue,ea],Xn),GI=E([KI,Ue],_0),VI=E([S0,Ue,ea],Xn),YI=E([VI,Ue],k0),XI=E([ZI,YI,GI],gu),QI=E([Ye,FI,UI,HI,XI],E0),Q0=E([Ye,Ne,Pn,Nu,ns,Ue,QI],A0),JI=E([Q0,Ye,Su],O0),eD=E([Ye,Q0,JI,Ue],T0),J0=e=>{var t=Ue(e),r=ea(e),n=!1;return ri(e,t,r,n)},ey=E([Ye,J0],as),ty=E([Ye,Su,eD,ey],yu),tD=E([Ne,Nu,Ye,Ue],z0),rD=E([Ne,Nu,Ye,Ue],R0),nD=(e,t,r,n,a,i,o,s)=>{if(t){var{type:l}=t,u=Br(e,s);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=l==="category"&&n.bandwidth?n.bandwidth()/d:0;return f=s==="angleAxis"&&a!=null&&a?.length>=2?Ot(a[0]-a[1])*2*f:f,u&&o?o.map((m,h)=>({coordinate:n(m)+f,value:m,index:h,offset:f})):n.domain().map((m,h)=>({coordinate:n(m)+f,value:i?i[m]:m,index:h,offset:f}))}}},Pr=E([Ne,Ye,Su,ty,J0,tD,rD,Ue],nD),_u=E([B0,U0,xI],(e,t,r)=>W0(r.shared,e,t)),ry=e=>e.tooltip.settings.trigger,ku=e=>e.tooltip.settings.defaultIndex,ms=E([Jn,_u,ry,ku],G0),Da=E([ms,Pn],Pu),ny=E([Pr,Da],H0),aD=E([ms],e=>{if(e)return e.dataKey}),ay=E([Jn,_u,ry,ku],Y0),iD=E([xr,br,Ne,Ve,Pr,ku,ay,ni],V0),oD=E([ms,iD],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),sD=E([ms],e=>e.active),lD=E([ay,Da,wn,Ye,ny,ni,_u],X0),cD=E([lD],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function xm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function bm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xm(Object(r),!0).forEach(function(n){uD(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function uD(e,t,r){return(t=dD(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dD(e){var t=fD(e,"string");return typeof t=="symbol"?t:t+""}function fD(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mD=()=>H(Ye),hD=()=>{var e=mD(),t=H(Pr),r=H(ty);return ml(bm(bm({},e),{},{scale:r}),t)},pD=()=>H(lu),Eu=(e,t)=>t,iy=(e,t,r)=>r,Au=(e,t,r,n)=>n,gD=E(Pr,e=>Ho(e,t=>t.coordinate)),Cu=E([Jn,Eu,iy,Au],G0),oy=E([Cu,Pn],Pu),vD=(e,t,r)=>{if(t!=null){var n=Jn(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},sy=E([Jn,Eu,iy,Au],Y0),co=E([xr,br,Ne,Ve,Pr,Au,sy,ni],V0),yD=E([Cu,co],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),ly=E(Pr,oy,H0),xD=E([sy,oy,wn,Ye,ly,ni,Eu],X0),bD=E([Cu],e=>({isActive:e.active,activeIndex:e.index})),wD=(e,t,r,n,a,i,o,s)=>{if(!(!e||!t||!n||!a||!i)){var l=JE(e.chartX,e.chartY,t,r,s);if(l){var u=tA(l,t),d=UE(u,o,i,n,a),f=eA(t,i,d,l);return{activeIndex:String(d),activeCoordinate:f}}}};function Il(){return Il=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Il.apply(null,arguments)}function wm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ki(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wm(Object(r),!0).forEach(function(n){jD(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jD(e,t,r){return(t=PD(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PD(e){var t=SD(e,"string");return typeof t=="symbol"?t:t+""}function SD(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ND(e){var{coordinate:t,payload:r,index:n,offset:a,tooltipAxisBandSize:i,layout:o,cursor:s,tooltipEventType:l,chartName:u}=e,d=t,f=r,m=n;if(!s||!d||u!=="ScatterChart"&&l!=="axis")return null;var h,p;if(u==="ScatterChart")h=d,p=UA;else if(u==="BarChart")h=WA(o,d,a,i),p=w2;else if(o==="radial"){var{cx:v,cy:g,radius:x,startAngle:b,endAngle:w}=av(d);h={cx:v,cy:g,startAngle:b,endAngle:w,innerRadius:x,outerRadius:x},p=N2}else h={points:_2(o,d,a)},p=Yg;var j=typeof s=="object"&&"className"in s?s.className:void 0,P=ki(ki(ki(ki({stroke:"#ccc",pointerEvents:"none"},a),h),ye(s,!1)),{},{payload:f,payloadIndex:m,className:de("recharts-tooltip-cursor",j)});return y.isValidElement(s)?y.cloneElement(s,P):y.createElement(p,P)}function _D(e){var t=hD(),r=qg(),n=Mc(),a=pD();return y.createElement(ND,Il({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:n,tooltipAxisBandSize:t,chartName:a}))}var cy=y.createContext(null),kD=()=>y.useContext(cy),uy={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(l,u,d){this.fn=l,this.context=u,this.once=d||!1}function i(l,u,d,f,m){if(typeof d!="function")throw new TypeError("The listener must be a function");var h=new a(d,f||l,m),p=r?r+u:u;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],h]:l._events[p].push(h):(l._events[p]=h,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new n:delete l._events[u]}function s(){this._events=new n,this._eventsCount=0}s.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},s.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var m=0,h=f.length,p=new Array(h);m<h;m++)p[m]=f[m].fn;return p},s.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},s.prototype.emit=function(u,d,f,m,h,p){var v=r?r+u:u;if(!this._events[v])return!1;var g=this._events[v],x=arguments.length,b,w;if(g.fn){switch(g.once&&this.removeListener(u,g.fn,void 0,!0),x){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,d),!0;case 3:return g.fn.call(g.context,d,f),!0;case 4:return g.fn.call(g.context,d,f,m),!0;case 5:return g.fn.call(g.context,d,f,m,h),!0;case 6:return g.fn.call(g.context,d,f,m,h,p),!0}for(w=1,b=new Array(x-1);w<x;w++)b[w-1]=arguments[w];g.fn.apply(g.context,b)}else{var j=g.length,P;for(w=0;w<j;w++)switch(g[w].once&&this.removeListener(u,g[w].fn,void 0,!0),x){case 1:g[w].fn.call(g[w].context);break;case 2:g[w].fn.call(g[w].context,d);break;case 3:g[w].fn.call(g[w].context,d,f);break;case 4:g[w].fn.call(g[w].context,d,f,m);break;default:if(!b)for(P=1,b=new Array(x-1);P<x;P++)b[P-1]=arguments[P];g[w].fn.apply(g[w].context,b)}}return!0},s.prototype.on=function(u,d,f){return i(this,u,d,f,!1)},s.prototype.once=function(u,d,f){return i(this,u,d,f,!0)},s.prototype.removeListener=function(u,d,f,m){var h=r?r+u:u;if(!this._events[h])return this;if(!d)return o(this,h),this;var p=this._events[h];if(p.fn)p.fn===d&&(!m||p.once)&&(!f||p.context===f)&&o(this,h);else{for(var v=0,g=[],x=p.length;v<x;v++)(p[v].fn!==d||m&&!p[v].once||f&&p[v].context!==f)&&g.push(p[v]);g.length?this._events[h]=g.length===1?g[0]:g:o(this,h)}return this},s.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,e.exports=s})(uy);var ED=uy.exports;const AD=Fr(ED);var Ma=new AD,Dl="recharts.syncEvent.tooltip",jm="recharts.syncEvent.brush";function CD(e,t){if(t){var r=Number.parseInt(t,10);if(!It(r))return e?.[r]}}var OD={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},dy=$t({name:"options",initialState:OD,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),TD=dy.reducer,{createEventEmitter:ID}=dy.actions;function DD(e){return e.tooltip.syncInteraction}var MD={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},fy=$t({name:"chartData",initialState:MD,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:Pm,setDataStartEndIndexes:$D,setComputedData:HR}=fy.actions,zD=fy.reducer,my=()=>{};function RD(){var e=H(cu),t=H(uu),r=ot(),n=H(i0),a=H(Pr),i=Mc(),o=Dc(),s=H(l=>l.rootProps.className);y.useEffect(()=>{if(e==null)return my;var l=(u,d,f)=>{if(t!==f&&e===u){if(n==="index"){r(d);return}if(a!=null){var m;if(typeof n=="function"){var h={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},p=n(a,h);m=a[p]}else n==="value"&&(m=a.find(S=>String(S.value)===d.payload.label));var{coordinate:v}=d.payload;if(m==null||d.payload.active===!1||v==null||o==null){r(Ol({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:g,y:x}=v,b=Math.min(g,o.x+o.width),w=Math.min(x,o.y+o.height),j={x:i==="horizontal"?m.coordinate:b,y:i==="horizontal"?w:m.coordinate},P=Ol({active:d.payload.active,coordinate:j,dataKey:d.payload.dataKey,index:String(m.index),label:d.payload.label});r(P)}}};return Ma.on(Dl,l),()=>{Ma.off(Dl,l)}},[s,r,t,e,n,a,i,o])}function LD(){var e=H(cu),t=H(uu),r=ot();y.useEffect(()=>{if(e==null)return my;var n=(a,i,o)=>{t!==o&&e===a&&r($D(i))};return Ma.on(jm,n),()=>{Ma.off(jm,n)}},[r,t,e])}function FD(){var e=ot();y.useEffect(()=>{e(ID())},[e]),RD(),LD()}function BD(e,t,r,n,a,i){var o=H(m=>vD(m,e,t)),s=H(uu),l=H(cu),u=H(i0),d=H(DD),f=d?.active;y.useEffect(()=>{if(!f&&l!=null&&s!=null){var m=Ol({active:i,coordinate:r,dataKey:o,index:a,label:typeof n=="number"?String(n):n});Ma.emit(Dl,l,m,s)}},[f,r,o,a,n,s,l,u,i])}function Sm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Nm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Sm(Object(r),!0).forEach(function(n){UD(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function UD(e,t,r){return(t=WD(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WD(e){var t=HD(e,"string");return typeof t=="symbol"?t:t+""}function HD(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qD(e){return e.dataKey}function ZD(e,t){return y.isValidElement(e)?y.cloneElement(e,t):typeof e=="function"?y.createElement(e,t):y.createElement(bA,t)}var _m=[],KD={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Ga.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function km(e){var t=yn(e,KD),{active:r,allowEscapeViewBox:n,animationDuration:a,animationEasing:i,content:o,filterNull:s,isAnimationActive:l,offset:u,payloadUniqBy:d,position:f,reverseDirection:m,useTranslate3d:h,wrapperStyle:p,cursor:v,shared:g,trigger:x,defaultIndex:b,portal:w,axisId:j}=t,P=ot(),S=typeof b=="number"?String(b):b;y.useEffect(()=>{P(PI({shared:g,trigger:x,axisId:j,active:r,defaultIndex:S}))},[P,g,x,j,r,S]);var N=Dc(),C=Vg(),T=yI(g),{activeIndex:R,isActive:k}=H(Oe=>bD(Oe,T,x,S)),O=H(Oe=>xD(Oe,T,x,S)),B=H(Oe=>ly(Oe,T,x,S)),Z=H(Oe=>yD(Oe,T,x,S)),V=O,F=kD(),q=r??k,[ee,te]=Fk([V,q]),_e=T==="axis"?B:void 0;BD(T,x,Z,_e,R,q);var K=w??F;if(K==null)return null;var $=V??_m;q||($=_m),s&&$.length&&($=ak(V.filter(Oe=>Oe.value!=null&&(Oe.hide!==!0||t.includeHidden)),d,qD));var Y=$.length>0,Ce=y.createElement(kA,{allowEscapeViewBox:n,animationDuration:a,animationEasing:i,isAnimationActive:l,active:q,coordinate:Z,hasPayload:Y,offset:u,position:f,reverseDirection:m,useTranslate3d:h,viewBox:N,wrapperStyle:p,lastBoundingBox:ee,innerRef:te,hasPortalFromProps:!!w},ZD(o,Nm(Nm({},t),{},{payload:$,label:_e,active:q,coordinate:Z,accessibilityLayer:C})));return y.createElement(y.Fragment,null,fh.createPortal(Ce,K),q&&y.createElement(_D,{cursor:v,tooltipEventType:T,coordinate:Z,payload:V,index:R}))}var hy={},py={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=0,a={}){typeof a!="object"&&(a={});let i=null,o=null,s=null,l=0,u=null,d;const{leading:f=!1,trailing:m=!0,maxWait:h}=a,p="maxWait"in a,v=p?Math.max(Number(h)||0,n):0,g=N=>(i!==null&&(d=r.apply(o,i)),i=o=null,l=N,d),x=N=>(l=N,u=setTimeout(P,n),f&&i!==null?g(N):d),b=N=>(u=null,m&&i!==null?g(N):d),w=N=>{if(s===null)return!0;const C=N-s,T=C>=n||C<0,R=p&&N-l>=v;return T||R},j=N=>{const C=s===null?0:N-s,T=n-C,R=v-(N-l);return p?Math.min(T,R):T},P=()=>{const N=Date.now();if(w(N))return b(N);u=setTimeout(P,j(N))},S=function(...N){const C=Date.now(),T=w(C);if(i=N,o=this,s=C,T){if(u===null)return x(C);if(p)return clearTimeout(u),u=setTimeout(P,n),g(C)}return u===null&&(u=setTimeout(P,n)),d};return S.cancel=()=>{u!==null&&clearTimeout(u),l=0,s=i=o=u=null},S.flush=()=>u===null?d:b(Date.now()),S}e.debounce=t})(py);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=py;function r(n,a=0,i={}){const{leading:o=!0,trailing:s=!0}=i;return t.debounce(n,a,{leading:o,maxWait:a,trailing:s})}e.throttle=r})(hy);var GD=hy.throttle;const VD=Fr(GD);var ba=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]};function Em(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Fs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Em(Object(r),!0).forEach(function(n){YD(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Em(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function YD(e,t,r){return(t=XD(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XD(e){var t=QD(e,"string");return typeof t=="symbol"?t:t+""}function QD(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Am=y.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:a="100%",height:i="100%",minWidth:o=0,minHeight:s,maxHeight:l,children:u,debounce:d=0,id:f,className:m,onResize:h,style:p={}}=e,v=y.useRef(null),g=y.useRef();g.current=h,y.useImperativeHandle(t,()=>v.current);var[x,b]=y.useState({containerWidth:n.width,containerHeight:n.height}),w=y.useCallback((P,S)=>{b(N=>{var C=Math.round(P),T=Math.round(S);return N.containerWidth===C&&N.containerHeight===T?N:{containerWidth:C,containerHeight:T}})},[]);y.useEffect(()=>{var P=T=>{var R,{width:k,height:O}=T[0].contentRect;w(k,O),(R=g.current)===null||R===void 0||R.call(g,k,O)};d>0&&(P=VD(P,d,{trailing:!0,leading:!1}));var S=new ResizeObserver(P),{width:N,height:C}=v.current.getBoundingClientRect();return w(N,C),S.observe(v.current),()=>{S.disconnect()}},[w,d]);var j=y.useMemo(()=>{var{containerWidth:P,containerHeight:S}=x;if(P<0||S<0)return null;ba(Qr(a)||Qr(i),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,i),ba(!r||r>0,"The aspect(%s) must be greater than zero.",r);var N=Qr(a)?P:a,C=Qr(i)?S:i;return r&&r>0&&(N?C=N/r:C&&(N=C*r),l&&C>l&&(C=l)),ba(N>0||C>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,N,C,a,i,o,s,r),y.Children.map(u,T=>y.cloneElement(T,{width:N,height:C,style:Fs({width:N,height:C},T.props.style)}))},[r,u,i,l,s,o,x,a]);return y.createElement("div",{id:f?"".concat(f):void 0,className:de("recharts-responsive-container",m),style:Fs(Fs({},p),{},{width:a,height:i,minWidth:o,minHeight:s,maxHeight:l}),ref:v},y.createElement("div",{style:{width:0,height:0,overflow:"visible"}},j))});function Cm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ml(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Cm(Object(r),!0).forEach(function(n){JD(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function JD(e,t,r){return(t=eM(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eM(e){var t=tM(e,"string");return typeof t=="symbol"?t:t+""}function tM(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var En={widthCache:{},cacheCount:0},rM=2e3,nM={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Om="recharts_measurement_span";function aM(e){var t=Ml({},e);return Object.keys(t).forEach(r=>{t[r]||delete t[r]}),t}var wa=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Ga.isSsr)return{width:0,height:0};var n=aM(r),a=JSON.stringify({text:t,copyStyle:n});if(En.widthCache[a])return En.widthCache[a];try{var i=document.getElementById(Om);i||(i=document.createElement("span"),i.setAttribute("id",Om),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=Ml(Ml({},nM),n);Object.assign(i.style,o),i.textContent="".concat(t);var s=i.getBoundingClientRect(),l={width:s.width,height:s.height};return En.widthCache[a]=l,++En.cacheCount>rM&&(En.cacheCount=0,En.widthCache={}),l}catch{return{width:0,height:0}}},Tm=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Im=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,iM=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,oM=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,gy={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},sM=Object.keys(gy),Cn="NaN";function lM(e,t){return e*gy[t]}class lt{static parse(t){var r,[,n,a]=(r=oM.exec(t))!==null&&r!==void 0?r:[];return new lt(parseFloat(n),a??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,It(t)&&(this.unit=""),r!==""&&!iM.test(r)&&(this.num=NaN,this.unit=""),sM.includes(r)&&(this.num=lM(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new lt(NaN,""):new lt(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new lt(NaN,""):new lt(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new lt(NaN,""):new lt(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new lt(NaN,""):new lt(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return It(this.num)}}function vy(e){if(e.includes(Cn))return Cn;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,a,i]=(r=Tm.exec(t))!==null&&r!==void 0?r:[],o=lt.parse(n??""),s=lt.parse(i??""),l=a==="*"?o.multiply(s):o.divide(s);if(l.isNaN())return Cn;t=t.replace(Tm,l.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,d,f,m]=(u=Im.exec(t))!==null&&u!==void 0?u:[],h=lt.parse(d??""),p=lt.parse(m??""),v=f==="+"?h.add(p):h.subtract(p);if(v.isNaN())return Cn;t=t.replace(Im,v.toString())}return t}var Dm=/\(([^()]*)\)/;function cM(e){for(var t=e,r;(r=Dm.exec(t))!=null;){var[,n]=r;t=t.replace(Dm,vy(n))}return t}function uM(e){var t=e.replace(/\s+/g,"");return t=cM(t),t=vy(t),t}function dM(e){try{return uM(e)}catch{return Cn}}function Bs(e){var t=dM(e.slice(5,-1));return t===Cn?"":t}var fM=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],mM=["dx","dy","angle","className","breakAll"];function $l(){return $l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$l.apply(null,arguments)}function Mm(e,t){if(e==null)return{};var r,n,a=hM(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function hM(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var yy=/[ \f\n\r\t\v\u2028\u2029]+/,xy=e=>{var{children:t,breakAll:r,style:n}=e;try{var a=[];Ee(t)||(r?a=t.toString().split(""):a=t.toString().split(yy));var i=a.map(s=>({word:s,width:wa(s,n).width})),o=r?0:wa(" ",n).width;return{wordsWithComputedWidth:i,spaceWidth:o}}catch{return null}},pM=(e,t,r,n,a)=>{var{maxLines:i,children:o,style:s,breakAll:l}=e,u=U(i),d=o,f=function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return k.reduce((O,B)=>{var{word:Z,width:V}=B,F=O[O.length-1];if(F&&(n==null||a||F.width+V+r<Number(n)))F.words.push(Z),F.width+=V+r;else{var q={words:[Z],width:V};O.push(q)}return O},[])},m=f(t),h=R=>R.reduce((k,O)=>k.width>O.width?k:O);if(!u||a)return m;var p=m.length>i||h(m).width>Number(n);if(!p)return m;for(var v="…",g=R=>{var k=d.slice(0,R),O=xy({breakAll:l,style:s,children:k+v}).wordsWithComputedWidth,B=f(O),Z=B.length>i||h(B).width>Number(n);return[Z,B]},x=0,b=d.length-1,w=0,j;x<=b&&w<=d.length-1;){var P=Math.floor((x+b)/2),S=P-1,[N,C]=g(S),[T]=g(P);if(!N&&!T&&(x=P+1),N&&T&&(b=P-1),!N&&T){j=C;break}w++}return j||m},$m=e=>{var t=Ee(e)?[]:e.toString().split(yy);return[{words:t}]},gM=e=>{var{width:t,scaleToFit:r,children:n,style:a,breakAll:i,maxLines:o}=e;if((t||r)&&!Ga.isSsr){var s,l,u=xy({breakAll:i,children:n,style:a});if(u){var{wordsWithComputedWidth:d,spaceWidth:f}=u;s=d,l=f}else return $m(n);return pM({breakAll:i,children:n,maxLines:o,style:a},s,l,t,r)}return $m(n)},zm="#808080",Ou=y.forwardRef((e,t)=>{var{x:r=0,y:n=0,lineHeight:a="1em",capHeight:i="0.71em",scaleToFit:o=!1,textAnchor:s="start",verticalAnchor:l="end",fill:u=zm}=e,d=Mm(e,fM),f=y.useMemo(()=>gM({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:o,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,o,d.style,d.width]),{dx:m,dy:h,angle:p,className:v,breakAll:g}=d,x=Mm(d,mM);if(!er(r)||!er(n))return null;var b=r+(U(m)?m:0),w=n+(U(h)?h:0),j;switch(l){case"start":j=Bs("calc(".concat(i,")"));break;case"middle":j=Bs("calc(".concat((f.length-1)/2," * -").concat(a," + (").concat(i," / 2))"));break;default:j=Bs("calc(".concat(f.length-1," * -").concat(a,")"));break}var P=[];if(o){var S=f[0].width,{width:N}=d;P.push("scale(".concat(U(N)?N/S:1,")"))}return p&&P.push("rotate(".concat(p,", ").concat(b,", ").concat(w,")")),P.length&&(x.transform=P.join(" ")),y.createElement("text",$l({},ye(x,!0),{ref:t,x:b,y:w,className:de("recharts-text",v),textAnchor:s,fill:u.includes("url")?zm:u}),f.map((C,T)=>{var R=C.words.join(g?"":" ");return y.createElement("tspan",{x:b,dy:T===0?j:a,key:"".concat(R,"-").concat(T)},R)}))});Ou.displayName="Text";var vM=["offset"],yM=["labelRef"];function Rm(e,t){if(e==null)return{};var r,n,a=xM(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function xM(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Lm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Te(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Lm(Object(r),!0).forEach(function(n){bM(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bM(e,t,r){return(t=wM(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wM(e){var t=jM(e,"string");return typeof t=="symbol"?t:t+""}function jM(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function or(){return or=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},or.apply(null,arguments)}var PM=e=>{var{value:t,formatter:r}=e,n=Ee(e.children)?t:e.children;return typeof r=="function"?r(n):n},Tu=e=>e!=null&&typeof e=="function",SM=(e,t)=>{var r=Ot(t-e),n=Math.min(Math.abs(t-e),360);return r*n},NM=(e,t,r)=>{var{position:n,viewBox:a,offset:i,className:o}=e,{cx:s,cy:l,innerRadius:u,outerRadius:d,startAngle:f,endAngle:m,clockWise:h}=a,p=(u+d)/2,v=SM(f,m),g=v>=0?1:-1,x,b;n==="insideStart"?(x=f+g*i,b=h):n==="insideEnd"?(x=m-g*i,b=!h):n==="end"&&(x=m+g*i,b=h),b=v<=0?b:!b;var w=Ge(s,l,p,x),j=Ge(s,l,p,x+(b?1:-1)*359),P="M".concat(w.x,",").concat(w.y,`
    A`).concat(p,",").concat(p,",0,1,").concat(b?0:1,`,
    `).concat(j.x,",").concat(j.y),S=Ee(e.id)?ka("recharts-radial-line-"):e.id;return y.createElement("text",or({},r,{dominantBaseline:"central",className:de("recharts-radial-bar-label",o)}),y.createElement("defs",null,y.createElement("path",{id:S,d:P})),y.createElement("textPath",{xlinkHref:"#".concat(S)},t))},_M=e=>{var{viewBox:t,offset:r,position:n}=e,{cx:a,cy:i,innerRadius:o,outerRadius:s,startAngle:l,endAngle:u}=t,d=(l+u)/2;if(n==="outside"){var{x:f,y:m}=Ge(a,i,s+r,d);return{x:f,y:m,textAnchor:f>=a?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:a,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:a,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:a,y:i,textAnchor:"middle",verticalAnchor:"end"};var h=(o+s)/2,{x:p,y:v}=Ge(a,i,h,d);return{x:p,y:v,textAnchor:"middle",verticalAnchor:"middle"}},kM=(e,t)=>{var{parentViewBox:r,offset:n,position:a}=e,{x:i,y:o,width:s,height:l}=t,u=l>=0?1:-1,d=u*n,f=u>0?"end":"start",m=u>0?"start":"end",h=s>=0?1:-1,p=h*n,v=h>0?"end":"start",g=h>0?"start":"end";if(a==="top"){var x={x:i+s/2,y:o-u*n,textAnchor:"middle",verticalAnchor:f};return Te(Te({},x),r?{height:Math.max(o-r.y,0),width:s}:{})}if(a==="bottom"){var b={x:i+s/2,y:o+l+d,textAnchor:"middle",verticalAnchor:m};return Te(Te({},b),r?{height:Math.max(r.y+r.height-(o+l),0),width:s}:{})}if(a==="left"){var w={x:i-p,y:o+l/2,textAnchor:v,verticalAnchor:"middle"};return Te(Te({},w),r?{width:Math.max(w.x-r.x,0),height:l}:{})}if(a==="right"){var j={x:i+s+p,y:o+l/2,textAnchor:g,verticalAnchor:"middle"};return Te(Te({},j),r?{width:Math.max(r.x+r.width-j.x,0),height:l}:{})}var P=r?{width:s,height:l}:{};return a==="insideLeft"?Te({x:i+p,y:o+l/2,textAnchor:g,verticalAnchor:"middle"},P):a==="insideRight"?Te({x:i+s-p,y:o+l/2,textAnchor:v,verticalAnchor:"middle"},P):a==="insideTop"?Te({x:i+s/2,y:o+d,textAnchor:"middle",verticalAnchor:m},P):a==="insideBottom"?Te({x:i+s/2,y:o+l-d,textAnchor:"middle",verticalAnchor:f},P):a==="insideTopLeft"?Te({x:i+p,y:o+d,textAnchor:g,verticalAnchor:m},P):a==="insideTopRight"?Te({x:i+s-p,y:o+d,textAnchor:v,verticalAnchor:m},P):a==="insideBottomLeft"?Te({x:i+p,y:o+l-d,textAnchor:g,verticalAnchor:f},P):a==="insideBottomRight"?Te({x:i+s-p,y:o+l-d,textAnchor:v,verticalAnchor:f},P):a&&typeof a=="object"&&(U(a.x)||Qr(a.x))&&(U(a.y)||Qr(a.y))?Te({x:i+Rr(a.x,s),y:o+Rr(a.y,l),textAnchor:"end",verticalAnchor:"end"},P):Te({x:i+s/2,y:o+l/2,textAnchor:"middle",verticalAnchor:"middle"},P)},EM=e=>"cx"in e&&U(e.cx);function bt(e){var{offset:t=5}=e,r=Rm(e,vM),n=Te({offset:t},r),{viewBox:a,position:i,value:o,children:s,content:l,className:u="",textBreakAll:d,labelRef:f}=n,m=Dc(),h=a||m;if(!h||Ee(o)&&Ee(s)&&!y.isValidElement(l)&&typeof l!="function")return null;if(y.isValidElement(l)){var{labelRef:p}=n,v=Rm(n,yM);return y.cloneElement(l,v)}var g;if(typeof l=="function"){if(g=y.createElement(l,n),y.isValidElement(g))return g}else g=PM(n);var x=EM(h),b=ye(n,!0);if(x&&(i==="insideStart"||i==="insideEnd"||i==="end"))return NM(n,g,b);var w=x?_M(n):kM(n,h);return y.createElement(Ou,or({ref:f,className:de("recharts-label",u)},b,w,{breakAll:d}),g)}bt.displayName="Label";var by=e=>{var{cx:t,cy:r,angle:n,startAngle:a,endAngle:i,r:o,radius:s,innerRadius:l,outerRadius:u,x:d,y:f,top:m,left:h,width:p,height:v,clockWise:g,labelViewBox:x}=e;if(x)return x;if(U(p)&&U(v)){if(U(d)&&U(f))return{x:d,y:f,width:p,height:v};if(U(m)&&U(h))return{x:m,y:h,width:p,height:v}}if(U(d)&&U(f))return{x:d,y:f,width:0,height:0};if(U(t)&&U(r))return{cx:t,cy:r,startAngle:a||n||0,endAngle:i||n||0,innerRadius:l||0,outerRadius:u||s||o||0,clockWise:g};if(e.viewBox)return e.viewBox},AM=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?y.createElement(bt,or({key:"label-implicit"},n)):er(e)?y.createElement(bt,or({key:"label-implicit",value:e},n)):y.isValidElement(e)?e.type===bt?y.cloneElement(e,Te({key:"label-implicit"},n)):y.createElement(bt,or({key:"label-implicit",content:e},n)):Tu(e)?y.createElement(bt,or({key:"label-implicit",content:e},n)):e&&typeof e=="object"?y.createElement(bt,or({},e,{key:"label-implicit"},n)):null},CM=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var{children:a,labelRef:i}=t,o=by(t),s=Dp(a,bt).map((u,d)=>y.cloneElement(u,{viewBox:r||o,key:"label-".concat(d)}));if(!n)return s;var l=AM(t.label,r||o,i);return[l,...s]};bt.parseViewBox=by;bt.renderCallByParent=CM;var wy={},jy={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(jy);var Py={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(Py);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jy,r=Py,n=Lo;function a(i){if(n.isArrayLike(i))return t.last(r.toArray(i))}e.last=a})(wy);var OM=wy.last;const TM=Fr(OM);var IM=["valueAccessor"],DM=["data","dataKey","clockWise","id","textBreakAll"];function uo(){return uo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},uo.apply(null,arguments)}function Fm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Bm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Fm(Object(r),!0).forEach(function(n){MM(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MM(e,t,r){return(t=$M(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $M(e){var t=zM(e,"string");return typeof t=="symbol"?t:t+""}function zM(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Um(e,t){if(e==null)return{};var r,n,a=RM(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function RM(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var LM=e=>Array.isArray(e.value)?TM(e.value):e.value;function ln(e){var{valueAccessor:t=LM}=e,r=Um(e,IM),{data:n,dataKey:a,clockWise:i,id:o,textBreakAll:s}=r,l=Um(r,DM);return!n||!n.length?null:y.createElement(Lr,{className:"recharts-label-list"},n.map((u,d)=>{var f=Ee(a)?t(u,d):Pt(u&&u.payload,a),m=Ee(o)?{}:{id:"".concat(o,"-").concat(d)};return y.createElement(bt,uo({},ye(u,!0),l,m,{parentViewBox:u.parentViewBox,value:f,textBreakAll:s,viewBox:bt.parseViewBox(Ee(i)?u:Bm(Bm({},u),{},{clockWise:i})),key:"label-".concat(d),index:d}))}))}ln.displayName="LabelList";function FM(e,t){return e?e===!0?y.createElement(ln,{key:"labelList-implicit",data:t}):y.isValidElement(e)||Tu(e)?y.createElement(ln,{key:"labelList-implicit",data:t,content:e}):typeof e=="object"?y.createElement(ln,uo({data:t},e,{key:"labelList-implicit"})):null:null}function BM(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var{children:n}=e,a=Dp(n,ln).map((o,s)=>y.cloneElement(o,{data:t,key:"labelList-".concat(s)}));if(!r)return a;var i=FM(e.label,t);return[i,...a]}ln.renderCallByParent=BM;function zl(){return zl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zl.apply(null,arguments)}var Sy=e=>{var{cx:t,cy:r,r:n,className:a}=e,i=de("recharts-dot",a);return t===+t&&r===+r&&n===+n?y.createElement("circle",zl({},ye(e,!1),vc(e),{className:i,cx:t,cy:r,r:n})):null},UM={radiusAxis:{},angleAxis:{}},Ny=$t({name:"polarAxis",initialState:UM,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:qR,removeRadiusAxis:ZR,addAngleAxis:KR,removeAngleAxis:GR}=Ny.actions,WM=Ny.reducer,HM={countOfBars:0,cartesianItems:[],polarItems:[]},_y=$t({name:"graphicalItems",initialState:HM,reducers:{addBar(e){e.countOfBars+=1},removeBar(e){e.countOfBars-=1},addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:n}=t.payload,a=ur(e).cartesianItems.indexOf(r);a>-1&&(e.cartesianItems[a]=n)},removeCartesianGraphicalItem(e,t){var r=ur(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=ur(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addBar:VR,removeBar:YR,addCartesianGraphicalItem:qM,replaceCartesianGraphicalItem:ZM,removeCartesianGraphicalItem:KM,addPolarGraphicalItem:XR,removePolarGraphicalItem:QR}=_y.actions,GM=_y.reducer;function Wm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Hm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Wm(Object(r),!0).forEach(function(n){VM(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VM(e,t,r){return(t=YM(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YM(e){var t=XM(e,"string");return typeof t=="symbol"?t:t+""}function XM(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function QM(e){var t=ot(),r=y.useRef(null);return y.useEffect(()=>{var n=Hm(Hm({},e),{},{stackId:VE(e.stackId)});r.current===null?t(qM(n)):r.current!==n&&t(ZM({prev:r.current,next:n})),r.current=n},[t,e]),y.useEffect(()=>()=>{r.current&&(t(KM(r.current)),r.current=null)},[t]),null}function JM(e){var{fn:t,args:r}=e,n=ot(),a=ft();return y.useEffect(()=>{if(!a){var i=t(r);return n(wI(i)),()=>{n(jI(i))}}},[t,r,n,a]),null}var e$=()=>{};function t$(e){var{legendPayload:t}=e,r=ot(),n=ft();return y.useEffect(()=>n?e$:(r(mA(t)),()=>{r(hA(t))}),[r,n,t]),null}function r$(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=y.useRef(ka(t)),n=y.useRef(e);return n.current!==e&&(r.current=ka(t),n.current=e),r.current}var n$=E([Ve],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),a$=E([n$,xr,br],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),i$=e=>{var t=ft();return H(r=>ds(r,"xAxis",e,t))},o$=e=>{var t=ft();return H(r=>ds(r,"yAxis",e,t))},Iu=()=>H(a$),s$=()=>H(cD);function qm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Zm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qm(Object(r),!0).forEach(function(n){l$(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function l$(e,t,r){return(t=c$(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c$(e){var t=u$(e,"string");return typeof t=="symbol"?t:t+""}function u$(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var d$=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:a,dataKey:i}=e;if(a===!1||t.x==null||t.y==null)return null;var o=Zm(Zm({index:r,dataKey:i,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},ye(a,!1)),vc(a)),s;return y.isValidElement(a)?s=y.cloneElement(a,o):typeof a=="function"?s=a(o):s=y.createElement(Sy,o),y.createElement(Lr,{className:"recharts-active-dot"},s)};function f$(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:a}=e,i=H(Da),o=s$();if(t==null||o==null)return null;var s=t.find(l=>o.includes(l.payload));return Ee(s)?null:d$({point:s,childIndex:Number(i),mainColor:r,dataKey:a,activeDot:n})}var m$=["children"];function h$(e,t){if(e==null)return{};var r,n,a=p$(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function p$(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Km=()=>{},ky=y.createContext({addErrorBar:Km,removeErrorBar:Km}),g$={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Ey=y.createContext(g$);function v$(e){var{children:t}=e,r=h$(e,m$);return y.createElement(Ey.Provider,{value:r},t)}var y$=()=>y.useContext(Ey),x$=e=>{var{children:t,xAxisId:r,yAxisId:n,zAxisId:a,dataKey:i,data:o,stackId:s,hide:l,type:u,barSize:d}=e,[f,m]=y.useState([]),h=y.useCallback(g=>{m(x=>[...x,g])},[m]),p=y.useCallback(g=>{m(x=>x.filter(b=>b!==g))},[m]),v=ft();return y.createElement(ky.Provider,{value:{addErrorBar:h,removeErrorBar:p}},y.createElement(QM,{type:u,data:o,xAxisId:r,yAxisId:n,zAxisId:a,dataKey:i,errorBars:f,stackId:s,hide:l,barSize:d,isPanorama:v}),t)};function b$(e){var{addErrorBar:t,removeErrorBar:r}=y.useContext(ky);return y.useEffect(()=>(t(e),()=>{r(e)}),[t,r,e]),null}var w$=["direction","width","dataKey","isAnimationActive","animationBegin","animationDuration","animationEasing"];function Ay(e,t,r){return(t=j$(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j$(e){var t=P$(e,"string");return typeof t=="symbol"?t:t+""}function P$(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $a(){return $a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$a.apply(null,arguments)}function S$(e,t){if(e==null)return{};var r,n,a=N$(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function N$(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function _$(e){var{direction:t,width:r,dataKey:n,isAnimationActive:a,animationBegin:i,animationDuration:o,animationEasing:s}=e,l=S$(e,w$),u=ye(l,!1),{data:d,dataPointFormatter:f,xAxisId:m,yAxisId:h,errorBarOffset:p}=y$(),v=i$(m),g=o$(h);if(v?.scale==null||g?.scale==null||d==null||t==="x"&&v.type!=="number")return null;var x=d.map(b=>{var{x:w,y:j,value:P,errorVal:S}=f(b,n,t);if(!S)return null;var N=[],C,T;if(Array.isArray(S)?[C,T]=S:C=T=S,t==="x"){var{scale:R}=v,k=j+p,O=k+r,B=k-r,Z=R(P-C),V=R(P+T);N.push({x1:V,y1:O,x2:V,y2:B}),N.push({x1:Z,y1:k,x2:V,y2:k}),N.push({x1:Z,y1:O,x2:Z,y2:B})}else if(t==="y"){var{scale:F}=g,q=w+p,ee=q-r,te=q+r,_e=F(P-C),K=F(P+T);N.push({x1:ee,y1:K,x2:te,y2:K}),N.push({x1:q,y1:_e,x2:q,y2:K}),N.push({x1:ee,y1:_e,x2:te,y2:_e})}var $="".concat(w+p,"px ").concat(j+p,"px");return y.createElement(Lr,$a({className:"recharts-errorBar",key:"bar-".concat(N.map(Y=>"".concat(Y.x1,"-").concat(Y.x2,"-").concat(Y.y1,"-").concat(Y.y2)))},u),N.map(Y=>{var Ce=a?{transformOrigin:"".concat(Y.x1-5,"px")}:void 0;return y.createElement(Yi,{from:{transform:"scaleY(0)",transformOrigin:$},to:{transform:"scaleY(1)",transformOrigin:$},begin:i,easing:s,isActive:a,duration:o,key:"line-".concat(Y.x1,"-").concat(Y.x2,"-").concat(Y.y1,"-").concat(Y.y2),style:{transformOrigin:$}},y.createElement("line",$a({},Y,{style:Ce})))}))});return y.createElement(Lr,{className:"recharts-errorBars"},x)}var Cy=y.createContext(void 0);function k$(e){var t=y.useContext(Cy);return e??t??"x"}function E$(e){var{direction:t,children:r}=e;return y.createElement(Cy.Provider,{value:t},r)}var Oy={stroke:"black",strokeWidth:1.5,width:5,offset:0,isAnimationActive:!0,animationBegin:0,animationDuration:400,animationEasing:"ease-in-out"};function A$(e){var t=k$(e.direction),{width:r,isAnimationActive:n,animationBegin:a,animationDuration:i,animationEasing:o}=yn(e,Oy);return y.createElement(y.Fragment,null,y.createElement(b$,{dataKey:e.dataKey,direction:t}),y.createElement(_$,$a({},e,{direction:t,width:r,isAnimationActive:n,animationBegin:a,animationDuration:i,animationEasing:o})))}class Ty extends y.Component{render(){return y.createElement(A$,this.props)}}Ay(Ty,"defaultProps",Oy);Ay(Ty,"displayName","ErrorBar");function Iy(e,t){var r,n,a=H(u=>jr(u,e)),i=H(u=>Hr(u,t)),o=(r=a?.allowDataOverflow)!==null&&r!==void 0?r:vt.allowDataOverflow,s=(n=i?.allowDataOverflow)!==null&&n!==void 0?n:yt.allowDataOverflow,l=o||s;return{needClip:l,needClipX:o,needClipY:s}}function C$(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,a=Iu(),{needClipX:i,needClipY:o,needClip:s}=Iy(t,r);if(!s)return null;var{x:l,y:u,width:d,height:f}=a;return y.createElement("clipPath",{id:"clipPath-".concat(n)},y.createElement("rect",{x:i?l:l-d/2,y:o?u:u-f/2,width:i?d:d*2,height:o?f:f*2}))}var O$=e=>{var{chartData:t}=e,r=ot(),n=ft();return y.useEffect(()=>n?()=>{}:(r(Pm(t)),()=>{r(Pm(void 0))}),[t,r,n]),null},Gm={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},Dy=$t({name:"brush",initialState:Gm,reducers:{setBrushSettings(e,t){return t.payload==null?Gm:t.payload}}}),{setBrushSettings:JR}=Dy.actions,T$=Dy.reducer;function I$(e,t,r){return(t=D$(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D$(e){var t=M$(e,"string");return typeof t=="symbol"?t:t+""}function M$(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Du{static create(t){return new Du(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+a}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(r){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],a=r[r.length-1];return n<=a?t>=n&&t<=a:t>=a&&t<=n}}I$(Du,"EPS",1e-4);function $$(e){return(e%180+180)%180}var z$=function(t){var{width:r,height:n}=t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=$$(a),o=i*Math.PI/180,s=Math.atan(n/r),l=o>s&&o<Math.PI-s?n/Math.sin(o):r/Math.cos(o);return Math.abs(l)},R$={dots:[],areas:[],lines:[]},My=$t({name:"referenceElements",initialState:R$,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=ur(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=ur(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=ur(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:e3,removeDot:t3,addArea:r3,removeArea:n3,addLine:a3,removeLine:i3}=My.actions,L$=My.reducer,F$=y.createContext(void 0),B$=e=>{var{children:t}=e,[r]=y.useState("".concat(ka("recharts"),"-clip")),n=Iu();if(n==null)return null;var{x:a,y:i,width:o,height:s}=n;return y.createElement(F$.Provider,{value:r},y.createElement("defs",null,y.createElement("clipPath",{id:r},y.createElement("rect",{x:a,y:i,height:s,width:o}))),t)};function Us(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function $y(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function U$(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return z$(n,r)}function W$(e,t,r){var n=r==="width",{x:a,y:i,width:o,height:s}=e;return t===1?{start:n?a:i,end:n?a+o:i+s}:{start:n?a+o:i+s,end:n?a:i}}function fo(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-a)<=0}function H$(e,t){return $y(e,t+1)}function q$(e,t,r,n,a){for(var i=(n||[]).slice(),{start:o,end:s}=t,l=0,u=1,d=o,f=function(){var p=n?.[l];if(p===void 0)return{v:$y(n,u)};var v=l,g,x=()=>(g===void 0&&(g=r(p,v)),g),b=p.coordinate,w=l===0||fo(e,b,x,d,s);w||(l=0,d=o,u+=1),w&&(d=b+e*(x()/2+a),l+=u)},m;u<=i.length;)if(m=f(),m)return m.v;return[]}function Vm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function et(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Vm(Object(r),!0).forEach(function(n){Z$(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Z$(e,t,r){return(t=K$(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function K$(e){var t=G$(e,"string");return typeof t=="symbol"?t:t+""}function G$(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function V$(e,t,r,n,a){for(var i=(n||[]).slice(),o=i.length,{start:s}=t,{end:l}=t,u=function(m){var h=i[m],p,v=()=>(p===void 0&&(p=r(h,m)),p);if(m===o-1){var g=e*(h.coordinate+e*v()/2-l);i[m]=h=et(et({},h),{},{tickCoord:g>0?h.coordinate-g*e:h.coordinate})}else i[m]=h=et(et({},h),{},{tickCoord:h.coordinate});var x=fo(e,h.tickCoord,v,s,l);x&&(l=h.tickCoord-e*(v()/2+a),i[m]=et(et({},h),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return i}function Y$(e,t,r,n,a,i){var o=(n||[]).slice(),s=o.length,{start:l,end:u}=t;if(i){var d=n[s-1],f=r(d,s-1),m=e*(d.coordinate+e*f/2-u);o[s-1]=d=et(et({},d),{},{tickCoord:m>0?d.coordinate-m*e:d.coordinate});var h=fo(e,d.tickCoord,()=>f,l,u);h&&(u=d.tickCoord-e*(f/2+a),o[s-1]=et(et({},d),{},{isShow:!0}))}for(var p=i?s-1:s,v=function(b){var w=o[b],j,P=()=>(j===void 0&&(j=r(w,b)),j);if(b===0){var S=e*(w.coordinate-e*P()/2-l);o[b]=w=et(et({},w),{},{tickCoord:S<0?w.coordinate-S*e:w.coordinate})}else o[b]=w=et(et({},w),{},{tickCoord:w.coordinate});var N=fo(e,w.tickCoord,P,l,u);N&&(l=w.tickCoord+e*(P()/2+a),o[b]=et(et({},w),{},{isShow:!0}))},g=0;g<p;g++)v(g);return o}function Mu(e,t,r){var{tick:n,ticks:a,viewBox:i,minTickGap:o,orientation:s,interval:l,tickFormatter:u,unit:d,angle:f}=e;if(!a||!a.length||!n)return[];if(U(l)||Ga.isSsr){var m;return(m=H$(a,U(l)?l:0))!==null&&m!==void 0?m:[]}var h=[],p=s==="top"||s==="bottom"?"width":"height",v=d&&p==="width"?wa(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},g=(w,j)=>{var P=typeof u=="function"?u(w.value,j):w.value;return p==="width"?U$(wa(P,{fontSize:t,letterSpacing:r}),v,f):wa(P,{fontSize:t,letterSpacing:r})[p]},x=a.length>=2?Ot(a[1].coordinate-a[0].coordinate):1,b=W$(i,x,p);return l==="equidistantPreserveStart"?q$(x,b,g,a,o):(l==="preserveStart"||l==="preserveStartEnd"?h=Y$(x,b,g,a,o,l==="preserveStartEnd"):h=V$(x,b,g,a,o),h.filter(w=>w.isShow))}var X$=["viewBox"],Q$=["viewBox"];function On(){return On=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},On.apply(null,arguments)}function Ym(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function De(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ym(Object(r),!0).forEach(function(n){$u(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ym(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Xm(e,t){if(e==null)return{};var r,n,a=J$(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function J$(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function $u(e,t,r){return(t=ez(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ez(e){var t=tz(e,"string");return typeof t=="symbol"?t:t+""}function tz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class qr extends y.Component{constructor(t){super(t),this.tickRefs=y.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,r){var{viewBox:n}=t,a=Xm(t,X$),i=this.props,{viewBox:o}=i,s=Xm(i,Q$);return!Us(n,o)||!Us(a,s)||!Us(r,this.state)}getTickLineCoord(t){var{x:r,y:n,width:a,height:i,orientation:o,tickSize:s,mirror:l,tickMargin:u}=this.props,d,f,m,h,p,v,g=l?-1:1,x=t.tickSize||s,b=U(t.tickCoord)?t.tickCoord:t.coordinate;switch(o){case"top":d=f=t.coordinate,h=n+ +!l*i,m=h-g*x,v=m-g*u,p=b;break;case"left":m=h=t.coordinate,f=r+ +!l*a,d=f-g*x,p=d-g*u,v=b;break;case"right":m=h=t.coordinate,f=r+ +l*a,d=f+g*x,p=d+g*u,v=b;break;default:d=f=t.coordinate,h=n+ +l*i,m=h+g*x,v=m+g*u,p=b;break}return{line:{x1:d,y1:m,x2:f,y2:h},tick:{x:p,y:v}}}getTickTextAnchor(){var{orientation:t,mirror:r}=this.props,n;switch(t){case"left":n=r?"start":"end";break;case"right":n=r?"end":"start";break;default:n="middle";break}return n}getTickVerticalAnchor(){var{orientation:t,mirror:r}=this.props;switch(t){case"left":case"right":return"middle";case"top":return r?"start":"end";default:return r?"end":"start"}}renderAxisLine(){var{x:t,y:r,width:n,height:a,orientation:i,mirror:o,axisLine:s}=this.props,l=De(De(De({},ye(this.props,!1)),ye(s,!1)),{},{fill:"none"});if(i==="top"||i==="bottom"){var u=+(i==="top"&&!o||i==="bottom"&&o);l=De(De({},l),{},{x1:t,y1:r+u*a,x2:t+n,y2:r+u*a})}else{var d=+(i==="left"&&!o||i==="right"&&o);l=De(De({},l),{},{x1:t+d*n,y1:r,x2:t+d*n,y2:r+a})}return y.createElement("line",On({},l,{className:de("recharts-cartesian-axis-line",pn(s,"className"))}))}static renderTickItem(t,r,n){var a,i=de(r.className,"recharts-cartesian-axis-tick-value");if(y.isValidElement(t))a=y.cloneElement(t,De(De({},r),{},{className:i}));else if(typeof t=="function")a=t(De(De({},r),{},{className:i}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=de(o,t.className)),a=y.createElement(Ou,On({},r,{className:o}),n)}return a}renderTicks(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:a,stroke:i,tick:o,tickFormatter:s,unit:l}=this.props,u=Mu(De(De({},this.props),{},{ticks:n}),t,r),d=this.getTickTextAnchor(),f=this.getTickVerticalAnchor(),m=ye(this.props,!1),h=ye(o,!1),p=De(De({},m),{},{fill:"none"},ye(a,!1)),v=u.map((g,x)=>{var{line:b,tick:w}=this.getTickLineCoord(g),j=De(De(De(De({textAnchor:d,verticalAnchor:f},m),{},{stroke:"none",fill:i},h),w),{},{index:x,payload:g,visibleTicksCount:u.length,tickFormatter:s});return y.createElement(Lr,On({className:"recharts-cartesian-axis-tick",key:"tick-".concat(g.value,"-").concat(g.coordinate,"-").concat(g.tickCoord)},__(this.props,g,x)),a&&y.createElement("line",On({},p,b,{className:de("recharts-cartesian-axis-tick-line",pn(a,"className"))})),o&&qr.renderTickItem(o,j,"".concat(typeof s=="function"?s(g.value,x):g.value).concat(l||"")))});return v.length>0?y.createElement("g",{className:"recharts-cartesian-axis-ticks"},v):null}render(){var{axisLine:t,width:r,height:n,className:a,hide:i}=this.props;if(i)return null;var{ticks:o}=this.props;return r!=null&&r<=0||n!=null&&n<=0?null:y.createElement(Lr,{className:de("recharts-cartesian-axis",a),ref:s=>{if(s){var l=s.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(l);var u=l[0];if(u){var d=window.getComputedStyle(u).fontSize,f=window.getComputedStyle(u).letterSpacing;(d!==this.state.fontSize||f!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(u).fontSize,letterSpacing:window.getComputedStyle(u).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,o),bt.renderCallByParent(this.props))}}$u(qr,"displayName","CartesianAxis");$u(qr,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var rz=["x1","y1","x2","y2","key"],nz=["offset"],az=["xAxisId","yAxisId"],iz=["xAxisId","yAxisId"];function Qm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function tt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Qm(Object(r),!0).forEach(function(n){oz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oz(e,t,r){return(t=sz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sz(e){var t=lz(e,"string");return typeof t=="symbol"?t:t+""}function lz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rn(){return rn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rn.apply(null,arguments)}function mo(e,t){if(e==null)return{};var r,n,a=cz(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function cz(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var uz=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:a,width:i,height:o,ry:s}=e;return y.createElement("rect",{x:n,y:a,ry:s,width:i,height:o,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function zy(e,t){var r;if(y.isValidElement(e))r=y.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:n,y1:a,x2:i,y2:o,key:s}=t,l=mo(t,rz),u=ye(l,!1),{offset:d}=u,f=mo(u,nz);r=y.createElement("line",rn({},f,{x1:n,y1:a,x2:i,y2:o,fill:"none",key:s}))}return r}function dz(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:i,yAxisId:o}=e,s=mo(e,az),l=a.map((u,d)=>{var f=tt(tt({},s),{},{x1:t,y1:u,x2:t+r,y2:u,key:"line-".concat(d),index:d});return zy(n,f)});return y.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function fz(e){var{y:t,height:r,vertical:n=!0,verticalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:i,yAxisId:o}=e,s=mo(e,iz),l=a.map((u,d)=>{var f=tt(tt({},s),{},{x1:u,y1:t,x2:u,y2:t+r,key:"line-".concat(d),index:d});return zy(n,f)});return y.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function mz(e){var{horizontalFill:t,fillOpacity:r,x:n,y:a,width:i,height:o,horizontalPoints:s,horizontal:l=!0}=e;if(!l||!t||!t.length)return null;var u=s.map(f=>Math.round(f+a-a)).sort((f,m)=>f-m);a!==u[0]&&u.unshift(0);var d=u.map((f,m)=>{var h=!u[m+1],p=h?a+o-f:u[m+1]-f;if(p<=0)return null;var v=m%t.length;return y.createElement("rect",{key:"react-".concat(m),y:f,x:n,height:p,width:i,stroke:"none",fill:t[v],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return y.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function hz(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:a,y:i,width:o,height:s,verticalPoints:l}=e;if(!t||!r||!r.length)return null;var u=l.map(f=>Math.round(f+a-a)).sort((f,m)=>f-m);a!==u[0]&&u.unshift(0);var d=u.map((f,m)=>{var h=!u[m+1],p=h?a+o-f:u[m+1]-f;if(p<=0)return null;var v=m%r.length;return y.createElement("rect",{key:"react-".concat(m),x:f,y:i,width:p,height:s,stroke:"none",fill:r[v],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return y.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var pz=(e,t)=>{var{xAxis:r,width:n,height:a,offset:i}=e;return Fg(Mu(tt(tt(tt({},qr.defaultProps),r),{},{ticks:Bg(r),viewBox:{x:0,y:0,width:n,height:a}})),i.left,i.left+i.width,t)},gz=(e,t)=>{var{yAxis:r,width:n,height:a,offset:i}=e;return Fg(Mu(tt(tt(tt({},qr.defaultProps),r),{},{ticks:Bg(r),viewBox:{x:0,y:0,width:n,height:a}})),i.top,i.top+i.height,t)},vz={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function Rl(e){var t=Zg(),r=Kg(),n=qg(),a=tt(tt({},yn(e,vz)),{},{x:U(e.x)?e.x:n.left,y:U(e.y)?e.y:n.top,width:U(e.width)?e.width:n.width,height:U(e.height)?e.height:n.height}),{xAxisId:i,yAxisId:o,x:s,y:l,width:u,height:d,syncWithTicks:f,horizontalValues:m,verticalValues:h}=a,p=ft(),v=H(T=>pm(T,"xAxis",i,p)),g=H(T=>pm(T,"yAxis",o,p));if(!U(u)||u<=0||!U(d)||d<=0||!U(s)||s!==+s||!U(l)||l!==+l)return null;var x=a.verticalCoordinatesGenerator||pz,b=a.horizontalCoordinatesGenerator||gz,{horizontalPoints:w,verticalPoints:j}=a;if((!w||!w.length)&&typeof b=="function"){var P=m&&m.length,S=b({yAxis:g?tt(tt({},g),{},{ticks:P?m:g.ticks}):void 0,width:t,height:r,offset:n},P?!0:f);ba(Array.isArray(S),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof S,"]")),Array.isArray(S)&&(w=S)}if((!j||!j.length)&&typeof x=="function"){var N=h&&h.length,C=x({xAxis:v?tt(tt({},v),{},{ticks:N?h:v.ticks}):void 0,width:t,height:r,offset:n},N?!0:f);ba(Array.isArray(C),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof C,"]")),Array.isArray(C)&&(j=C)}return y.createElement("g",{className:"recharts-cartesian-grid"},y.createElement(uz,{fill:a.fill,fillOpacity:a.fillOpacity,x:a.x,y:a.y,width:a.width,height:a.height,ry:a.ry}),y.createElement(mz,rn({},a,{horizontalPoints:w})),y.createElement(hz,rn({},a,{verticalPoints:j})),y.createElement(dz,rn({},a,{offset:n,horizontalPoints:w,xAxis:v,yAxis:g})),y.createElement(fz,rn({},a,{offset:n,verticalPoints:j,xAxis:v,yAxis:g})))}Rl.displayName="CartesianGrid";var Ry=(e,t,r,n)=>ds(e,"xAxis",t,n),Ly=(e,t,r,n)=>F0(e,"xAxis",t,n),Fy=(e,t,r,n)=>ds(e,"yAxis",r,n),By=(e,t,r,n)=>F0(e,"yAxis",r,n),yz=E([Ne,Ry,Fy,Ly,By],(e,t,r,n,a)=>Br(e,"xAxis")?ml(t,n,!1):ml(r,a,!1)),xz=(e,t,r,n,a)=>a,bz=E([f0,xz],(e,t)=>{if(e.some(r=>r.type==="line"&&t.dataKey===r.dataKey&&t.data===r.data))return t}),wz=E([Ne,Ry,Fy,Ly,By,bz,yz,Hv],(e,t,r,n,a,i,o,s)=>{var{chartData:l,dataStartIndex:u,dataEndIndex:d}=s;if(!(i==null||t==null||r==null||n==null||a==null||n.length===0||a.length===0||o==null)){var{dataKey:f,data:m}=i,h;if(m!=null&&m.length>0?h=m:h=l?.slice(u,d+1),h!=null)return Fz({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:a,dataKey:f,bandSize:o,displayedData:h})}}),jz=["type","layout","connectNulls","needClip"],Pz=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId"];function Uy(e,t){if(e==null)return{};var r,n,a=Sz(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Sz(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Jm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ft(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Jm(Object(r),!0).forEach(function(n){hs(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hs(e,t,r){return(t=Nz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nz(e){var t=_z(e,"string");return typeof t=="symbol"?t:t+""}function _z(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qn(){return qn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qn.apply(null,arguments)}var kz=e=>{var{dataKey:t,name:r,stroke:n,legendType:a,hide:i}=e;return[{inactive:i,dataKey:t,type:a,color:n,value:Ug(r,t),payload:e}]};function Ez(e){var{dataKey:t,data:r,stroke:n,strokeWidth:a,fill:i,name:o,hide:s,unit:l}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:a,fill:i,dataKey:t,nameKey:void 0,name:Ug(o,t),hide:s,type:e.tooltipType,color:e.stroke,unit:l}}}var Wy=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function Az(e,t){for(var r=e.length%2!==0?[...e,0]:e,n=[],a=0;a<t;++a)n=[...n,...r];return n}var Cz=(e,t,r)=>{var n=r.reduce((f,m)=>f+m);if(!n)return Wy(t,e);for(var a=Math.floor(e/n),i=e%n,o=t-e,s=[],l=0,u=0;l<r.length;u+=r[l],++l)if(u+r[l]>i){s=[...r.slice(0,l),i-u];break}var d=s.length%2===0?[0,o]:[o];return[...Az(r,a),...s,...d].map(f=>"".concat(f,"px")).join(", ")};function Oz(e,t){var r;if(y.isValidElement(e))r=y.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var n=de("recharts-line-dot",typeof e!="boolean"?e.className:"");r=y.createElement(Sy,qn({},t,{className:n}))}return r}function Tz(e,t){return e==null?!1:t?!0:e.length===1}function Iz(e){var{clipPathId:t,points:r,props:n}=e,{dot:a,dataKey:i,needClip:o}=n;if(!Tz(r,a))return null;var s=Mp(a),l=ye(n,!1),u=ye(a,!0),d=r.map((m,h)=>{var p=Ft(Ft(Ft({key:"dot-".concat(h),r:3},l),u),{},{index:h,cx:m.x,cy:m.y,dataKey:i,value:m.value,payload:m.payload,points:r});return Oz(a,p)}),f={clipPath:o?"url(#clipPath-".concat(s?"":"dots-").concat(t,")"):null};return y.createElement(Lr,qn({className:"recharts-line-dots",key:"dots"},f),d)}function Ll(e){var{clipPathId:t,pathRef:r,points:n,strokeDasharray:a,props:i,showLabels:o}=e,{type:s,layout:l,connectNulls:u,needClip:d}=i,f=Uy(i,jz),m=Ft(Ft({},ye(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:d?"url(#clipPath-".concat(t,")"):null,points:n,type:s,layout:l,connectNulls:u,strokeDasharray:a??i.strokeDasharray});return y.createElement(y.Fragment,null,n?.length>1&&y.createElement(Yg,qn({},m,{pathRef:r})),y.createElement(Iz,{points:n,clipPathId:t,props:i}),o&&ln.renderCallByParent(i,n))}function Dz(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function Mz(e){var{clipPathId:t,props:r,pathRef:n,previousPointsRef:a,longestAnimatedLengthRef:i}=e,{points:o,strokeDasharray:s,isAnimationActive:l,animationBegin:u,animationDuration:d,animationEasing:f,animateNewValues:m,width:h,height:p,onAnimationEnd:v,onAnimationStart:g}=r,x=a.current,b=r$(r,"recharts-line-"),[w,j]=y.useState(!1),P=y.useCallback(()=>{typeof v=="function"&&v(),j(!1)},[v]),S=y.useCallback(()=>{typeof g=="function"&&g(),j(!0)},[g]),N=Dz(n.current),C=i.current;return y.createElement(Yi,{begin:u,duration:d,isActive:l,easing:f,from:{t:0},to:{t:1},onAnimationEnd:P,onAnimationStart:S,key:b},T=>{var{t:R}=T,k=ca(C,N+C),O=Math.min(k(R),N),B;if(s){var Z="".concat(s).split(/[,\s]+/gim).map(q=>parseFloat(q));B=Cz(O,N,Z)}else B=Wy(N,O);if(x){var V=x.length/o.length,F=R===1?o:o.map((q,ee)=>{var te=Math.floor(ee*V);if(x[te]){var _e=x[te],K=ca(_e.x,q.x),$=ca(_e.y,q.y);return Ft(Ft({},q),{},{x:K(R),y:$(R)})}if(m){var Y=ca(h*2,q.x),Ce=ca(p/2,q.y);return Ft(Ft({},q),{},{x:Y(R),y:Ce(R)})}return Ft(Ft({},q),{},{x:q.x,y:q.y})});return a.current=F,y.createElement(Ll,{props:r,points:F,clipPathId:t,pathRef:n,showLabels:!w,strokeDasharray:B})}return R>0&&N>0&&(a.current=o,i.current=O),y.createElement(Ll,{props:r,points:o,clipPathId:t,pathRef:n,showLabels:!w,strokeDasharray:B})})}function $z(e){var{clipPathId:t,props:r}=e,{points:n,isAnimationActive:a}=r,i=y.useRef(null),o=y.useRef(0),s=y.useRef(null),l=i.current;return a&&n&&n.length&&l!==n?y.createElement(Mz,{props:r,clipPathId:t,previousPointsRef:i,longestAnimatedLengthRef:o,pathRef:s}):y.createElement(Ll,{props:r,points:n,clipPathId:t,pathRef:s,showLabels:!0})}var zz=(e,t)=>({x:e.x,y:e.y,value:e.value,errorVal:Pt(e.payload,t)});class Rz extends y.Component{constructor(){super(...arguments),hs(this,"id",ka("recharts-line-"))}render(){var t,{hide:r,dot:n,points:a,className:i,xAxisId:o,yAxisId:s,top:l,left:u,width:d,height:f,id:m,needClip:h,layout:p}=this.props;if(r)return null;var v=de("recharts-line",i),g=Ee(m)?this.id:m,{r:x=3,strokeWidth:b=2}=(t=ye(n,!1))!==null&&t!==void 0?t:{r:3,strokeWidth:2},w=Mp(n),j=x*2+b;return y.createElement(y.Fragment,null,y.createElement(Lr,{className:v},h&&y.createElement("defs",null,y.createElement(C$,{clipPathId:g,xAxisId:o,yAxisId:s}),!w&&y.createElement("clipPath",{id:"clipPath-dots-".concat(g)},y.createElement("rect",{x:u-j/2,y:l-j/2,width:d+j,height:f+j}))),y.createElement($z,{props:this.props,clipPathId:g}),y.createElement(E$,{direction:p==="horizontal"?"y":"x"},y.createElement(v$,{xAxisId:o,yAxisId:s,data:a,dataPointFormatter:zz,errorBarOffset:0},this.props.children))),y.createElement(f$,{activeDot:this.props.activeDot,points:a,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var Hy={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!Ga.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function Lz(e){var t=yn(e,Hy),{activeDot:r,animateNewValues:n,animationBegin:a,animationDuration:i,animationEasing:o,connectNulls:s,dot:l,hide:u,isAnimationActive:d,label:f,legendType:m,xAxisId:h,yAxisId:p}=t,v=Uy(t,Pz),{needClip:g}=Iy(h,p),{height:x,width:b,x:w,y:j}=Iu(),P=Mc(),S=ft(),N=y.useMemo(()=>({dataKey:e.dataKey,data:e.data}),[e.dataKey,e.data]),C=H(T=>wz(T,h,p,S,N));return P!=="horizontal"&&P!=="vertical"?null:y.createElement(Rz,qn({},v,{connectNulls:s,dot:l,activeDot:r,animateNewValues:n,animationBegin:a,animationDuration:i,animationEasing:o,isAnimationActive:d,hide:u,label:f,legendType:m,xAxisId:h,yAxisId:p,points:C,layout:P,height:x,width:b,left:w,top:j,needClip:g}))}function Fz(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:a,yAxisTicks:i,dataKey:o,bandSize:s,displayedData:l}=e;return l.map((u,d)=>{var f=Pt(u,o);return t==="horizontal"?{x:sf({axis:r,ticks:a,bandSize:s,entry:u,index:d}),y:Ee(f)?null:n.scale(f),value:f,payload:u}:{x:Ee(f)?null:r.scale(f),y:sf({axis:n,ticks:i,bandSize:s,entry:u,index:d}),value:f,payload:u}})}class ho extends y.PureComponent{render(){return y.createElement(x$,{type:"line",data:this.props.data,xAxisId:this.props.xAxisId,yAxisId:this.props.yAxisId,zAxisId:0,dataKey:this.props.dataKey,stackId:void 0,hide:this.props.hide,barSize:void 0},y.createElement(t$,{legendPayload:kz(this.props)}),y.createElement(JM,{fn:Ez,args:this.props}),y.createElement(Lz,this.props))}}hs(ho,"displayName","Line");hs(ho,"defaultProps",Hy);function eh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function th(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eh(Object(r),!0).forEach(function(n){Bz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eh(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Bz(e,t,r){return(t=Uz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Uz(e){var t=Wz(e,"string");return typeof t=="symbol"?t:t+""}function Wz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Hz={xAxis:{},yAxis:{},zAxis:{}},qy=$t({name:"cartesianAxis",initialState:Hz,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload;e.yAxis[r]&&(e.yAxis[r]=th(th({},e.yAxis[r]),{},{width:n}))}}}),{addXAxis:qz,removeXAxis:Zz,addYAxis:Kz,removeYAxis:Gz,addZAxis:o3,removeZAxis:s3,updateYAxisWidth:Vz}=qy.actions,Yz=qy.reducer,Xz=["children"],Qz=["dangerouslySetInnerHTML","ticks"];function Zy(e,t,r){return(t=Jz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jz(e){var t=e4(e,"string");return typeof t=="symbol"?t:t+""}function e4(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fl(){return Fl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fl.apply(null,arguments)}function Ky(e,t){if(e==null)return{};var r,n,a=t4(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function t4(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function r4(e){var t=ot(),r=y.useMemo(()=>{var{children:i}=e,o=Ky(e,Xz);return o},[e]),n=H(i=>jr(i,r.id)),a=r===n;return y.useEffect(()=>(t(qz(r)),()=>{t(Zz(r))}),[r,t]),a?e.children:null}var n4=e=>{var{xAxisId:t,className:r}=e,n=H(Hg),a=ft(),i="xAxis",o=H(h=>Qn(h,i,t,a)),s=H(h=>L0(h,i,t,a)),l=H(h=>oI(h,t)),u=H(h=>dI(h,t));if(l==null||u==null)return null;var{dangerouslySetInnerHTML:d,ticks:f}=e,m=Ky(e,Qz);return y.createElement(qr,Fl({},m,{scale:o,x:u.x,y:u.y,width:l.width,height:l.height,className:de("recharts-".concat(i," ").concat(i),r),viewBox:n,ticks:s}))},a4=e=>{var t,r,n,a,i;return y.createElement(r4,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(a=e.minTickGap)!==null&&a!==void 0?a:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter},y.createElement(n4,e))};class po extends y.Component{render(){return y.createElement(a4,this.props)}}Zy(po,"displayName","XAxis");Zy(po,"defaultProps",{allowDataOverflow:vt.allowDataOverflow,allowDecimals:vt.allowDecimals,allowDuplicatedCategory:vt.allowDuplicatedCategory,height:vt.height,hide:!1,mirror:vt.mirror,orientation:vt.orientation,padding:vt.padding,reversed:vt.reversed,scale:vt.scale,tickCount:vt.tickCount,type:vt.type,xAxisId:0});var i4=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:i=0}=e,o=0;if(t){t.forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>o&&(o=f.width)}});var s=r?r.getBoundingClientRect().width:0,l=a+i,u=o+l+s+(r?n:0);return Math.round(u)}return 0},o4=["dangerouslySetInnerHTML","ticks"];function Gy(e,t,r){return(t=s4(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s4(e){var t=l4(e,"string");return typeof t=="symbol"?t:t+""}function l4(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bl(){return Bl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bl.apply(null,arguments)}function c4(e,t){if(e==null)return{};var r,n,a=u4(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function u4(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function d4(e){var t=ot();return y.useEffect(()=>(t(Kz(e)),()=>{t(Gz(e))}),[e,t]),null}var f4=e=>{var t,{yAxisId:r,className:n,width:a,label:i}=e,o=y.useRef(null),s=y.useRef(null),l=H(Hg),u=ft(),d=ot(),f="yAxis",m=H(w=>Qn(w,f,r,u)),h=H(w=>mI(w,r)),p=H(w=>fI(w,r)),v=H(w=>L0(w,f,r,u));if(y.useLayoutEffect(()=>{var w;if(!(a!=="auto"||!h||Tu(i)||y.isValidElement(i))){var j=o.current,P=j==null||(w=j.tickRefs)===null||w===void 0?void 0:w.current,{tickSize:S,tickMargin:N}=j.props,C=i4({ticks:P,label:s.current,labelGapWithTick:5,tickSize:S,tickMargin:N});Math.round(h.width)!==Math.round(C)&&d(Vz({id:r,width:C}))}},[o,o==null||(t=o.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,h?.width,h,d,i,r,a]),h==null||p==null)return null;var{dangerouslySetInnerHTML:g,ticks:x}=e,b=c4(e,o4);return y.createElement(qr,Bl({},b,{ref:o,labelRef:s,scale:m,x:p.x,y:p.y,width:h.width,height:h.height,className:de("recharts-".concat(f," ").concat(f),n),viewBox:l,ticks:v}))},m4=e=>{var t,r,n,a,i;return y.createElement(y.Fragment,null,y.createElement(d4,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(a=e.minTickGap)!==null&&a!==void 0?a:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter}),y.createElement(f4,e))},h4={allowDataOverflow:yt.allowDataOverflow,allowDecimals:yt.allowDecimals,allowDuplicatedCategory:yt.allowDuplicatedCategory,hide:!1,mirror:yt.mirror,orientation:yt.orientation,padding:yt.padding,reversed:yt.reversed,scale:yt.scale,tickCount:yt.tickCount,type:yt.type,width:yt.width,yAxisId:0};class go extends y.Component{render(){return y.createElement(m4,this.props)}}Gy(go,"displayName","YAxis");Gy(go,"defaultProps",h4);var p4={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ai=y;function g4(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var v4=typeof Object.is=="function"?Object.is:g4,y4=ai.useSyncExternalStore,x4=ai.useRef,b4=ai.useEffect,w4=ai.useMemo,j4=ai.useDebugValue;p4.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var i=x4(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=w4(function(){function l(h){if(!u){if(u=!0,d=h,h=n(h),a!==void 0&&o.hasValue){var p=o.value;if(a(p,h))return f=p}return f=h}if(p=f,v4(d,h))return p;var v=n(h);return a!==void 0&&a(p,v)?(d=h,p):(d=h,f=v)}var u=!1,d,f,m=r===void 0?null:r;return[function(){return l(t())},m===null?void 0:function(){return l(m())}]},[t,r,n,a]);var s=y4(e,i[0],i[1]);return b4(function(){o.hasValue=!0,o.value=s},[s]),j4(s),s};function P4(e){e()}function S4(){let e=null,t=null;return{clear(){e=null,t=null},notify(){P4(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!n||e===null||(n=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var rh={notify(){},get:()=>[]};function N4(e,t){let r,n=rh,a=0,i=!1;function o(v){d();const g=n.subscribe(v);let x=!1;return()=>{x||(x=!0,g(),f())}}function s(){n.notify()}function l(){p.onStateChange&&p.onStateChange()}function u(){return i}function d(){a++,r||(r=e.subscribe(l),n=S4())}function f(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=rh)}function m(){i||(i=!0,d())}function h(){i&&(i=!1,f())}const p={addNestedSub:o,notifyNestedSubs:s,handleChangeWrapper:l,isSubscribed:u,trySubscribe:m,tryUnsubscribe:h,getListeners:()=>n};return p}var _4=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",k4=_4(),E4=()=>typeof navigator<"u"&&navigator.product==="ReactNative",A4=E4(),C4=()=>k4||A4?y.useLayoutEffect:y.useEffect,O4=C4(),T4=Symbol.for("react-redux-context"),I4=typeof globalThis<"u"?globalThis:{};function D4(){if(!y.createContext)return{};const e=I4[T4]??=new Map;let t=e.get(y.createContext);return t||(t=y.createContext(null),e.set(y.createContext,t)),t}var M4=D4();function $4(e){const{children:t,context:r,serverState:n,store:a}=e,i=y.useMemo(()=>{const l=N4(a);return{store:a,subscription:l,getServerState:n?()=>n:void 0}},[a,n]),o=y.useMemo(()=>a.getState(),[a]);O4(()=>{const{subscription:l}=i;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),o!==a.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[i,o]);const s=r||M4;return y.createElement(s.Provider,{value:i},t)}var z4=$4,R4=(e,t)=>t,zu=E([R4,Ne,jT,Ue,ey,Pr,gD,Ve],wD),Ru=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},Vy=Dt("mouseClick"),Yy=Ka();Yy.startListening({actionCreator:Vy,effect:(e,t)=>{var r=e.payload,n=zu(t.getState(),Ru(r));n?.activeIndex!=null&&t.dispatch(NI({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var Ul=Dt("mouseMove"),Xy=Ka();Xy.startListening({actionCreator:Ul,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=ju(n,n.tooltip.settings.shared),i=zu(n,Ru(r));a==="axis"&&(i?.activeIndex!=null?t.dispatch(K0({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):t.dispatch(Z0()))}});function L4(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var nh={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},Qy=$t({name:"rootProps",initialState:nh,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:nh.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),F4=Qy.reducer,{updateOptions:B4}=Qy.actions,Jy=$t({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:l3}=Jy.actions,U4=Jy.reducer,ex=Dt("keyDown"),tx=Dt("focus"),Lu=Ka();Lu.startListening({actionCreator:ex,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var o=Number(Pu(a,Pn(r))),s=Pr(r);if(i==="Enter"){var l=co(r,"axis","hover",String(a.index));t.dispatch(Tl({active:!a.active,activeIndex:a.index,activeDataKey:a.dataKey,activeCoordinate:l}));return}var u=vI(r),d=u==="left-to-right"?1:-1,f=i==="ArrowRight"?1:-1,m=o+f*d;if(!(s==null||m>=s.length||m<0)){var h=co(r,"axis","hover",String(m));t.dispatch(Tl({active:!0,activeIndex:m.toString(),activeDataKey:void 0,activeCoordinate:h}))}}}}});Lu.startListening({actionCreator:tx,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip;if(!a.active&&a.index==null){var i="0",o=co(r,"axis","hover",String(i));t.dispatch(Tl({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:o}))}}}});var At=Dt("externalEvent"),rx=Ka();rx.startListening({actionCreator:At,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:oD(r),activeDataKey:aD(r),activeIndex:Da(r),activeLabel:ny(r),activeTooltipIndex:Da(r),isTooltipActive:sD(r)};e.payload.handler(n,e.payload.reactEvent)}}});var W4=E([Jn],e=>e.tooltipItemPayloads),H4=E([W4,ni,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var a=e.find(s=>s.settings.dataKey===n);if(a!=null){var{positions:i}=a;if(i!=null){var o=t(i,r);return o}}}),nx=Dt("touchMove"),ax=Ka();ax.startListening({actionCreator:nx,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=ju(n,n.tooltip.settings.shared);if(a==="axis"){var i=zu(n,Ru({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));i?.activeIndex!=null&&t.dispatch(K0({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(a==="item"){var o,s=r.touches[0],l=document.elementFromPoint(s.clientX,s.clientY);if(!l||!l.getAttribute)return;var u=l.getAttribute(nA),d=(o=l.getAttribute(aA))!==null&&o!==void 0?o:void 0,f=H4(t.getState(),u,d);t.dispatch(SI({activeDataKey:d,activeIndex:u,activeCoordinate:f}))}}});var q4=Sg({brush:T$,cartesianAxis:Yz,chartData:zD,graphicalItems:GM,layout:EE,legend:pA,options:TD,polarAxis:WM,polarOptions:U4,referenceElements:L$,rootProps:F4,tooltip:_I}),Z4=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return Jk({reducer:q4,preloadedState:t,middleware:n=>n({serializableCheck:!1}).concat([Yy.middleware,Xy.middleware,Lu.middleware,rx.middleware,ax.middleware]),devTools:{serialize:{replacer:L4},name:"recharts-".concat(r)}})};function K4(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,a=ft(),i=y.useRef(null);if(a)return r;i.current==null&&(i.current=Z4(t,n));var o=_c;return y.createElement(z4,{context:o,store:i.current},r)}function G4(e){var{layout:t,width:r,height:n,margin:a}=e,i=ot(),o=ft();return y.useEffect(()=>{o||(i(NE(t)),i(_E({width:r,height:n})),i(SE(a)))},[i,o,t,r,n,a]),null}function V4(e){var t=ot();return y.useEffect(()=>{t(B4(e))},[t,e]),null}var Y4=["children"];function X4(e,t){if(e==null)return{};var r,n,a=Q4(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Q4(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function vo(){return vo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vo.apply(null,arguments)}var J4={width:"100%",height:"100%"},e5=y.forwardRef((e,t)=>{var r=Zg(),n=Kg(),a=Vg();if(!Ki(r)||!Ki(n))return null;var{children:i,otherAttributes:o,title:s,desc:l}=e,u,d;return typeof o.tabIndex=="number"?u=o.tabIndex:u=a?0:void 0,typeof o.role=="string"?d=o.role:d=a?"application":void 0,y.createElement($p,vo({},o,{title:s,desc:l,role:d,tabIndex:u,width:r,height:n,style:J4,ref:t}),i)}),t5=e=>{var{children:t}=e,r=H(Vo);if(!r)return null;var{width:n,height:a,y:i,x:o}=r;return y.createElement($p,{width:n,height:a,x:o,y:i},t)},ah=y.forwardRef((e,t)=>{var{children:r}=e,n=X4(e,Y4),a=ft();return a?y.createElement(t5,null,r):y.createElement(e5,vo({ref:t},n),r)});function r5(){var e=ot(),[t,r]=y.useState(null),n=H(rA);return y.useEffect(()=>{if(t!=null){var a=t.getBoundingClientRect(),i=a.width/t.offsetWidth;Ht(i)&&i!==n&&e(kE(i))}},[t,e,n]),r}function ih(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function n5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ih(Object(r),!0).forEach(function(n){a5(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ih(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function a5(e,t,r){return(t=i5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i5(e){var t=o5(e,"string");return typeof t=="symbol"?t:t+""}function o5(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var s5=y.forwardRef((e,t)=>{var{children:r,className:n,height:a,onClick:i,onContextMenu:o,onDoubleClick:s,onMouseDown:l,onMouseEnter:u,onMouseLeave:d,onMouseMove:f,onMouseUp:m,onTouchEnd:h,onTouchMove:p,onTouchStart:v,style:g,width:x}=e,b=ot(),[w,j]=y.useState(null),[P,S]=y.useState(null);FD();var N=r5(),C=y.useCallback($=>{N($),typeof t=="function"&&t($),j($),S($)},[N,t,j,S]),T=y.useCallback($=>{b(Vy($)),b(At({handler:i,reactEvent:$}))},[b,i]),R=y.useCallback($=>{b(Ul($)),b(At({handler:u,reactEvent:$}))},[b,u]),k=y.useCallback($=>{b(Z0()),b(At({handler:d,reactEvent:$}))},[b,d]),O=y.useCallback($=>{b(Ul($)),b(At({handler:f,reactEvent:$}))},[b,f]),B=y.useCallback(()=>{b(tx())},[b]),Z=y.useCallback($=>{b(ex($.key))},[b]),V=y.useCallback($=>{b(At({handler:o,reactEvent:$}))},[b,o]),F=y.useCallback($=>{b(At({handler:s,reactEvent:$}))},[b,s]),q=y.useCallback($=>{b(At({handler:l,reactEvent:$}))},[b,l]),ee=y.useCallback($=>{b(At({handler:m,reactEvent:$}))},[b,m]),te=y.useCallback($=>{b(At({handler:v,reactEvent:$}))},[b,v]),_e=y.useCallback($=>{b(nx($)),b(At({handler:p,reactEvent:$}))},[b,p]),K=y.useCallback($=>{b(At({handler:h,reactEvent:$}))},[b,h]);return y.createElement(cy.Provider,{value:w},y.createElement(D_.Provider,{value:P},y.createElement("div",{className:de("recharts-wrapper",n),style:n5({position:"relative",cursor:"default",width:x,height:a},g),onClick:T,onContextMenu:V,onDoubleClick:F,onFocus:B,onKeyDown:Z,onMouseDown:q,onMouseEnter:R,onMouseLeave:k,onMouseMove:O,onMouseUp:ee,onTouchEnd:K,onTouchMove:_e,onTouchStart:te,ref:C},r)))}),l5=["children","className","width","height","style","compact","title","desc"];function c5(e,t){if(e==null)return{};var r,n,a=u5(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function u5(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var d5=y.forwardRef((e,t)=>{var{children:r,className:n,width:a,height:i,style:o,compact:s,title:l,desc:u}=e,d=c5(e,l5),f=ye(d,!1);return s?y.createElement(ah,{otherAttributes:f,title:l,desc:u},r):y.createElement(s5,{className:n,style:o,width:a,height:i,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},y.createElement(ah,{otherAttributes:f,title:l,desc:u,ref:t},y.createElement(B$,null,r)))}),f5=["width","height"];function Wl(){return Wl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wl.apply(null,arguments)}function m5(e,t){if(e==null)return{};var r,n,a=h5(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function h5(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var p5={top:5,right:5,bottom:5,left:5},g5={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:p5,reverseStackOrder:!1,syncMethod:"index"},v5=y.forwardRef(function(t,r){var n,a=yn(t.categoricalChartProps,g5),{width:i,height:o}=a,s=m5(a,f5);if(!Ki(i)||!Ki(o))return null;var{chartName:l,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,categoricalChartProps:m}=t,h={chartName:l,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,eventEmitter:void 0};return y.createElement(K4,{preloadedState:{options:h},reduxStoreName:(n=m.id)!==null&&n!==void 0?n:l},y.createElement(O$,{chartData:m.data}),y.createElement(G4,{width:i,height:o,layout:a.layout,margin:a.margin}),y.createElement(V4,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),y.createElement(d5,Wl({},s,{width:i,height:o,ref:r})))}),y5=["axis"],oh=y.forwardRef((e,t)=>y.createElement(v5,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:y5,tooltipPayloadSearcher:CD,categoricalChartProps:e,ref:t}));function x5(e){return(typeof e=="string"?new Date(e):e).toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"2-digit"})}function b5(e){const t=typeof e=="string"?new Date(e):e;return t.toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"2-digit"})+" "+t.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})}const w5=({images:e})=>{const[t,r]=y.useState(!1),n=e.map(o=>{let s;const l={excellent:95,good:80,fair:60,poor:30};return o.healthAnalysis?.overallHealth&&l[o.healthAnalysis.overallHealth]?s=l[o.healthAnalysis.overallHealth]:typeof o.healthAnalysis?.confidence=="number"&&(s=o.healthAnalysis.confidence<=1?o.healthAnalysis.confidence*100:o.healthAnalysis.confidence),{id:o.id,date:x5(o.timestamp),dateTime:b5(o.timestamp),rawDate:o.timestamp,score:typeof s=="number"?s:null,url:o.url}}).sort((o,s)=>new Date(o.rawDate).getTime()-new Date(s.rawDate).getTime()),a=n.map(o=>({dateTime:o.dateTime,score:o.score})),i=o=>{const{key:s,cx:l,cy:u}=o;return c.jsx("circle",{cx:l,cy:u,r:4,stroke:"#2A7F3E",strokeWidth:2,fill:"#fff"},s)};return c.jsxs("div",{className:"mb-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("h3",{className:"text-base font-semibold text-[#2A7F3E]",children:"Evolución de Salud"}),c.jsx(ne,{size:"sm",variant:"outline",onClick:()=>r(!0),children:"Ampliar"})]}),c.jsx("div",{className:"w-full h-48",children:c.jsx(Am,{width:"100%",height:"100%",children:c.jsxs(oh,{data:a,margin:{top:10,right:20,left:0,bottom:0},children:[c.jsx(Rl,{strokeDasharray:"3 3",vertical:!1,stroke:"#F0F8F5"}),c.jsx(po,{dataKey:"dateTime",tick:{fontSize:12,fill:"#888"}}),c.jsx(go,{domain:[0,100],tick:{fontSize:12,fill:"#888"},width:32}),c.jsx(km,{contentStyle:{fontSize:13,borderRadius:8},labelFormatter:o=>`Fecha: ${o}`,formatter:o=>`${o}%`}),c.jsx(ho,{type:"monotone",dataKey:"score",stroke:"#2A7F3E",strokeWidth:2,dot:i,activeDot:{r:6},connectNulls:!1})]})})}),c.jsx("div",{className:"mt-4 overflow-x-auto",children:c.jsxs("table",{className:"min-w-full text-sm border-separate border-spacing-y-1",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"text-[#666]",children:[c.jsx("th",{className:"text-left font-medium px-2 py-1",children:"Fecha"}),c.jsx("th",{className:"text-left font-medium px-2 py-1",children:"Imagen"}),c.jsx("th",{className:"text-left font-medium px-2 py-1",children:"Salud"})]})}),c.jsx("tbody",{children:n.map(o=>c.jsxs("tr",{className:"bg-[#F9F9F9] hover:bg-[#F0F8F5] transition-colors",children:[c.jsx("td",{className:"px-2 py-1 whitespace-nowrap",children:o.date}),c.jsx("td",{className:"px-2 py-1",children:c.jsx("img",{src:o.url,alt:"miniatura",className:"w-10 h-10 object-cover rounded-md border"})}),c.jsx("td",{className:"px-2 py-1 font-medium text-[#2A7F3E]",children:o.score!==null?`${o.score.toFixed(0)}%`:c.jsx("span",{className:"text-[#bbb]",children:"N/A"})})]},o.id))})]})}),c.jsx(pe,{children:t&&c.jsx(_.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 p-2",onClick:()=>r(!1),children:c.jsxs(_.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-2xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-auto p-6 relative",onClick:o=>o.stopPropagation(),children:[c.jsx(ne,{size:"icon-sm",variant:"ghost",className:"absolute top-2 right-2",onClick:()=>r(!1),children:"×"}),c.jsx("h3",{className:"text-lg font-semibold mb-4 text-[#2A7F3E]",children:"Evolución de Salud (Ampliado)"}),c.jsx("div",{className:"w-full h-72 mb-6",children:c.jsx(Am,{width:"100%",height:"100%",children:c.jsxs(oh,{data:a,margin:{top:10,right:20,left:0,bottom:0},children:[c.jsx(Rl,{strokeDasharray:"3 3",vertical:!1,stroke:"#F0F8F5"}),c.jsx(po,{dataKey:"dateTime",tick:{fontSize:13,fill:"#888"}}),c.jsx(go,{domain:[0,100],tick:{fontSize:13,fill:"#888"},width:36}),c.jsx(km,{contentStyle:{fontSize:14,borderRadius:8},labelFormatter:o=>`Fecha: ${o}`,formatter:o=>`${o}%`}),c.jsx(ho,{type:"monotone",dataKey:"score",stroke:"#2A7F3E",strokeWidth:2,dot:i,activeDot:{r:7},connectNulls:!1})]})})}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full text-sm border-separate border-spacing-y-1",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"text-[#666]",children:[c.jsx("th",{className:"text-left font-medium px-2 py-1",children:"Fecha"}),c.jsx("th",{className:"text-left font-medium px-2 py-1",children:"Imagen"}),c.jsx("th",{className:"text-left font-medium px-2 py-1",children:"Salud"})]})}),c.jsx("tbody",{children:n.map(o=>c.jsxs("tr",{className:"bg-[#F9F9F9] hover:bg-[#F0F8F5] transition-colors",children:[c.jsx("td",{className:"px-2 py-1 whitespace-nowrap",children:o.date}),c.jsx("td",{className:"px-2 py-1",children:c.jsx("img",{src:o.url,alt:"miniatura",className:"w-12 h-12 object-cover rounded-md border"})}),c.jsx("td",{className:"px-2 py-1 font-medium text-[#2A7F3E]",children:o.score!==null?`${o.score.toFixed(0)}%`:c.jsx("span",{className:"text-[#bbb]",children:"N/A"})})]},o.id))})]})})]})})})]})},j5=({plant:e,onAddPhoto:t})=>{const r=y.useMemo(()=>{if(!e.images||e.images.length===0)return[];const i=[...e.images].sort((d,f)=>new Date(d.timestamp).getTime()-new Date(f.timestamp).getTime()),o=[],s=30*24*60*60*1e3;let l=new Date(i[0].timestamp),u=[];return i.forEach((d,f)=>{const m=new Date(d.timestamp);if(m.getTime()-l.getTime()<=s)u.push(d);else{if(u.length>0){const h=u.map(v=>{const g=v.healthAnalysis;if(!g)return;const x={excellent:95,good:80,fair:60,poor:30};if(g.overallHealth&&x[g.overallHealth])return x[g.overallHealth];if(typeof g.confidence=="number")return g.confidence<=1?g.confidence*100:g.confidence}).filter(v=>v!==void 0),p=h.length>0?h.reduce((v,g)=>v+g,0)/h.length:0;o.push({id:`period-${o.length}`,images:[...u],startDate:new Date(u[0].timestamp),endDate:new Date(u[u.length-1].timestamp),avgHealthScore:p,trend:o.length>0?p>o[o.length-1].avgHealthScore?"improving":"declining":"stable",photoCount:u.length})}l=m,u=[d]}if(f===i.length-1&&u.length>0){const h=u.map(v=>{const g=v.healthAnalysis;if(!g)return;const x={excellent:95,good:80,fair:60,poor:30};if(g.overallHealth&&x[g.overallHealth])return x[g.overallHealth];if(typeof g.confidence=="number")return g.confidence<=1?g.confidence*100:g.confidence}).filter(v=>v!==void 0),p=h.length>0?h.reduce((v,g)=>v+g,0)/h.length:0;o.push({id:`period-${o.length}`,images:[...u],startDate:new Date(u[0].timestamp),endDate:new Date(u[u.length-1].timestamp),avgHealthScore:p,trend:o.length>0?p>o[o.length-1].avgHealthScore?"improving":"declining":"stable",photoCount:u.length})}}),o},[e.images]);function n(i){if(i.length<2)return null;const o=i[i.length-1]-i[0];return o>5?{icon:"⬆️",label:"Mejorando",color:"text-green-600 bg-green-50"}:o<-5?{icon:"⬇️",label:"Declive",color:"text-red-600 bg-red-50"}:{icon:"➡️",label:"Estable",color:"text-gray-600 bg-gray-50"}}if(r.length===0)return c.jsxs(_t,{className:"mt-6",children:[c.jsx(Oo,{children:c.jsxs(cc,{className:"flex items-center",children:[c.jsx(Ix,{className:"w-5 h-5 mr-2 text-primary"}),"Evolución de tu Planta"]})}),c.jsx(hr,{children:c.jsxs("div",{className:"text-center py-8",children:[c.jsx(cr,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"¡Comienza a documentar la evolución!"}),c.jsx("p",{className:"text-muted-foreground mb-4",children:"Agrega más fotos a lo largo del tiempo para ver cómo progresa tu planta."}),c.jsxs(ne,{onClick:t,className:"gap-2",children:[c.jsx(Zl,{className:"w-4 h-4"}),"Agregar Primera Foto"]})]})})]});const a=r.map(i=>i.avgHealthScore??0);return n(a),c.jsx(_t,{className:"mt-6",children:c.jsx(hr,{className:"mt-4 space-y-6",children:c.jsx(w5,{images:e.images||[]})})})},P5=({isOpen:e,onClose:t,onPhotoAdded:r,plantName:n})=>{const[a,i]=y.useState("choose"),[o,s]=y.useState(null),[l,u]=y.useState(""),[d,f]=y.useState(null),[m,h]=y.useState(!1),p=y.useRef(null),{addToast:v}=Zn(),g=y.useCallback(()=>{i("choose"),s(null),u(""),f(null),h(!1)},[]),x=y.useCallback(()=>{g(),t()},[g,t]),b=y.useCallback(B=>{const Z=new FileReader;Z.onload=V=>{const F=V.target?.result;s(F),i("preview")},Z.readAsDataURL(B)},[]),w=y.useCallback(()=>{p.current&&p.current.click()},[]),j=y.useCallback(()=>{w()},[w]),P=y.useCallback(B=>{const Z=B.target.files?.[0];if(Z){if(!Z.type.startsWith("image/")){f("Por favor selecciona un archivo de imagen válido.");return}if(Z.size>5*1024*1024){f("La imagen es demasiado grande. Máximo 5MB.");return}b(Z)}},[b]),S=y.useCallback(async()=>{if(o)try{i("uploading"),h(!0),await r(o,l.trim()||void 0),i("success"),h(!1),v({type:"success",title:"Foto agregada exitosamente",message:`Nueva imagen añadida a ${n}`}),setTimeout(()=>{x()},1500)}catch(B){f(B instanceof Error?B.message:"Error al subir la imagen"),i("error"),h(!1)}},[o,l,r,n,v,x]),N=()=>(console.log("[AddPhotoModal] Renderizando botón Tomar Foto:",c.jsx(cr,{className:"w-6 h-6"}),"Tomar Foto"),console.log("[AddPhotoModal] Renderizando botón Elegir de Galería:",c.jsx(Yu,{className:"w-6 h-6"}),"Elegir de Galería"),c.jsxs(_.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"text-center space-y-6",children:[c.jsxs("div",{children:[c.jsx(cr,{className:"w-16 h-16 text-primary mx-auto mb-4"}),c.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Agregar Nueva Foto"}),c.jsxs("p",{className:"text-muted-foreground",children:["Documenta el progreso de ",c.jsx("span",{className:"font-medium",children:n})]})]}),c.jsxs("div",{className:"grid gap-4",children:[c.jsxs(ne,{variant:"primary",size:"lg",onClick:j,className:"h-16 gap-3 text-primary-foreground",children:[c.jsx(cr,{className:"w-6 h-6"}),"Tomar Foto"]}),c.jsxs(ne,{variant:"secondary",size:"lg",onClick:w,className:"h-16 gap-3 text-primary-foreground",children:[c.jsx(Yu,{className:"w-6 h-6"}),"Elegir de Galería"]})]}),c.jsx("input",{ref:p,type:"file",accept:"image/*",onChange:P,className:"hidden","data-testid":"file-input"})]})),C=()=>c.jsxs(_.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Vista Previa"}),c.jsxs("p",{className:"text-muted-foreground",children:["Revisa la imagen antes de agregar a ",n]})]}),o&&c.jsxs("div",{className:"space-y-4 pb-8 sm:pb-0",children:[c.jsx("div",{className:"aspect-video max-h-80 mx-auto rounded-lg overflow-hidden border",children:c.jsx("img",{src:o,alt:"Vista previa",className:"w-full h-full object-cover"})}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"block text-sm font-medium",children:"Nota (opcional)"}),c.jsx("textarea",{value:l,onChange:B=>u(B.target.value),placeholder:"Agrega una nota sobre esta foto...",className:"w-full p-3 border border-neutral-200 rounded-lg resize-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:3,maxLength:200}),c.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[l.length,"/200"]})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx(ne,{variant:"secondary",onClick:()=>i("choose"),className:"flex-1",children:"Cambiar Imagen"}),c.jsxs(ne,{variant:"primary",onClick:S,className:"flex-1 gap-2",children:[c.jsx(at,{className:"w-4 h-4"}),"Analizar y Guardar"]})]})]})]}),T=()=>c.jsxs(_.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center space-y-6 py-8",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx(Tn,{className:"w-16 h-16 text-primary mx-auto animate-spin"}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-semibold mb-2",children:m?"Analizando imagen...":"Subiendo foto..."}),c.jsx("p",{className:"text-muted-foreground",children:m?"La IA está evaluando la salud de tu planta":"Guardando la nueva imagen en tu jardín"})]})]}),c.jsx("div",{className:"w-full bg-neutral-200 rounded-full h-2",children:c.jsx("div",{className:"bg-primary h-2 rounded-full animate-pulse",style:{width:"70%"}})})]}),R=()=>c.jsxs(_.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"text-center space-y-6 py-8",children:[c.jsx(Dr,{className:"w-16 h-16 text-success-500 mx-auto"}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-semibold mb-2",children:"¡Foto agregada!"}),c.jsxs("p",{className:"text-muted-foreground",children:["La nueva imagen ha sido añadida al progreso de ",n]})]})]}),k=()=>c.jsxs(_.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"text-center space-y-6 py-8",children:[c.jsx(Wt,{className:"w-16 h-16 text-error-500 mx-auto"}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Error al subir"}),c.jsx("p",{className:"text-muted-foreground mb-4",children:d||"Hubo un problema al procesar la imagen"}),c.jsxs("div",{className:"flex gap-3 justify-center",children:[c.jsx(ne,{variant:"secondary",onClick:()=>i("choose"),children:"Intentar de Nuevo"}),c.jsx(ne,{variant:"primary",onClick:x,children:"Cerrar"})]})]})]}),O=()=>{switch(a){case"choose":return N();case"preview":return C();case"uploading":return T();case"success":return R();case"error":return k();default:return N()}};return c.jsx(pe,{children:e&&c.jsx(_.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",onClick:B=>{B.target===B.currentTarget&&a!=="uploading"&&x()},children:c.jsx(_.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"w-full max-w-md",children:c.jsx(_t,{children:c.jsxs(hr,{className:"p-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Kl,{className:"w-5 h-5 text-primary"}),c.jsx("span",{className:"font-medium text-sm text-muted-foreground",children:"NUEVA FOTO"})]}),a!=="uploading"&&c.jsx(ne,{variant:"ghost",size:"icon-sm",onClick:x,children:c.jsx(xo,{className:"w-4 h-4"})})]}),O()]})})})})})},S5=({plant:e})=>{const{careProfile:t,healthScore:r,lastWatered:n,dateAdded:a}=e,i=e.images?.[0]?.healthAnalysis,o=n?Math.floor((Date.now()-new Date(n).getTime())/(1e3*60*60*24)):null,s=Math.floor((Date.now()-new Date(a).getTime())/(1e3*60*60*24)),u=r>=85?{text:"Excelente",color:"text-green-500",icon:Dr,emoji:"🌟"}:r>=70?{text:"Buena",color:"text-green-400",icon:Dr,emoji:"✅"}:r>=50?{text:"Regular",color:"text-yellow-500",icon:hh,emoji:"⚠️"}:{text:"Necesita atención",color:"text-red-500",icon:zr,emoji:"🆘"},f=(()=>{if(!o||!t?.wateringFrequency)return{text:"Sin datos",color:"text-gray-500",urgent:!1};const p=o>=t.wateringFrequency;return o>t.wateringFrequency+2?{text:"Riego urgente",color:"text-red-500",urgent:!0}:p?{text:"Necesita riego",color:"text-yellow-500",urgent:!0}:{text:"Bien hidratada",color:"text-green-500",urgent:!1}})(),m={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{staggerChildren:.1}}},h={hidden:{opacity:0,y:10},visible:{opacity:1,y:0}};return c.jsx(_.div,{variants:m,initial:"hidden",animate:"visible",children:c.jsxs(_t,{variant:"glass",className:"content-spacing-sm element-spacing",children:[e.description&&c.jsx("div",{className:"mb-4",children:c.jsx("p",{className:"text-base text-neutral-700 dark:text-neutral-200 leading-relaxed",children:e.description})}),c.jsx(_.div,{variants:h,className:"w-full mb-3",children:c.jsxs("div",{className:"w-full flex items-center justify-between bg-green-100 dark:bg-green-900/30 rounded-lg px-4 py-2 mb-2",children:[c.jsxs("span",{className:"flex items-center gap-2 text-green-700 text-base font-bold",children:[c.jsx(Dr,{className:"w-5 h-5"}),r,"% ",u.text]}),c.jsxs("span",{className:"flex items-center gap-1 text-contrast-soft text-sm align-baseline",children:[c.jsx(Ii,{className:"w-4 h-4"}),"Día ",s]})]})}),c.jsxs(_.div,{variants:h,className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:ce("flex items-center space-x-3 p-3 rounded-lg",f.urgent?"bg-yellow-50 dark:bg-yellow-900/20":"bg-green-50 dark:bg-green-900/20"),children:[c.jsx(bo,{className:ce("w-5 h-5",f.color)}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-contrast-soft",children:"Riego"}),c.jsx("p",{className:ce("font-semibold text-sm",f.color),children:f.text}),o!==null&&c.jsxs("p",{className:"text-xs text-contrast-soft",children:["Hace ",o," día",o!==1?"s":""]})]})]}),c.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg bg-blue-50 dark:bg-blue-900/20",children:[c.jsx(Mr,{className:"w-5 h-5 text-blue-500"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-contrast-soft",children:"Luz"}),c.jsx("p",{className:"font-semibold text-sm text-blue-600 dark:text-blue-400",children:t?.sunlightRequirement||"No especificado"}),e.lightRequirements&&c.jsx("p",{className:"text-xs text-contrast-soft capitalize",children:e.lightRequirements.replace("_"," ")})]})]}),e.plantEnvironment&&c.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg bg-purple-50 dark:bg-purple-900/20",children:[c.jsx(xh,{className:"w-5 h-5 text-purple-500"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-contrast-soft",children:"Ambiente"}),c.jsx("p",{className:"font-semibold text-sm text-purple-600 dark:text-purple-400 capitalize",children:e.plantEnvironment==="ambos"?"Interior/Exterior":e.plantEnvironment})]})]}),t?.temperatureRange&&c.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg bg-orange-50 dark:bg-orange-900/20",children:[c.jsx(bh,{className:"w-5 h-5 text-orange-500"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-contrast-soft",children:"Temperatura"}),c.jsxs("p",{className:"font-semibold text-sm text-orange-600 dark:text-orange-400",children:[t.temperatureRange.min,"°-",t.temperatureRange.max,"°C"]})]})]})]}),i?.issues&&i.issues.length>0&&c.jsx(_.div,{variants:h,className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx(zr,{className:"w-5 h-5 text-red-500 mt-0.5"}),c.jsxs("div",{children:[c.jsxs("p",{className:"font-semibold text-red-700 dark:text-red-300 text-sm mb-1",children:[i.issues.length," problema",i.issues.length!==1?"s":""," detectado",i.issues.length!==1?"s":""]}),c.jsxs("p",{className:"text-xs text-red-600 dark:text-red-400",children:[i.issues[0].description,i.issues.length>1&&` y ${i.issues.length-1} más...`]})]})]})}),c.jsx("br",{}),e.personality?.communicationStyle&&c.jsx(_.div,{variants:h,className:"p-4 bg-gradient-to-r from-green-50 to-blue-50 dark:from-green-900/20 dark:to-blue-900/20 rounded-lg border border-green-200 dark:border-green-800",children:c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx(ja,{className:"w-5 h-5 text-green-500 mt-0.5"}),c.jsxs("div",{children:[c.jsxs("p",{className:"font-semibold text-green-700 dark:text-green-300 text-sm mb-1",children:["🤖 Personalidad: ",e.personality.communicationStyle]}),e.personality.catchphrases&&e.personality.catchphrases.length>0&&c.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400 italic",children:['"',e.personality.catchphrases[0],'"']})]})]})})]})})},N5=({plant:e,onAddPhoto:t})=>{const[r,n]=y.useState("evolution"),a=e.images?.[0]?.healthAnalysis,i=a?.issues&&a.issues.length>0,o=e.images&&e.images.length>1,s=[{id:"evolution",title:"Evolución y Progreso",icon:c.jsx(Dx,{className:"w-5 h-5"}),badge:o?`${e.images?.length||0} fotos`:"Nueva",component:c.jsx(j5,{plant:e,onAddPhoto:t}),priority:1},{id:"health",title:"Análisis de Salud",icon:c.jsx(Mx,{className:"w-5 h-5"}),badge:i?"Atención":"Saludable",component:c.jsx(c_,{analysis:a}),priority:i?1:3},{id:"care",title:"Perfil de Cuidados",icon:c.jsx($x,{className:"w-5 h-5"}),badge:e.careProfile?"Completo":"Pendiente",component:c.jsx(o_,{plant:e}),priority:e.careProfile?2:1},...e.funFacts&&e.funFacts.length>0?[{id:"funfacts",title:"Datos Curiosos",icon:c.jsx(at,{className:"w-5 h-5"}),component:c.jsx(s_,{species:e.species,funFacts:e.funFacts}),priority:4}]:[]].filter(l=>l.id==="health"?!!a:!0).sort((l,u)=>l.priority-u.priority);return c.jsx("div",{className:"flex flex-col gap-y-1",children:s.map(l=>{const u=r===l.id,d=l.id==="health";return l.id==="care"?c.jsxs(_t,{variant:"default",radius:"default",className:ce("border border-[#E5E5E5] rounded-[8px] transition-all duration-200","bg-white","p-0 mb-4"),children:[c.jsxs(_.button,{onClick:()=>n(u?"":l.id),className:ce("w-full flex items-center justify-between px-4 py-3 min-h-12 text-left focus:outline-none","bg-white","rounded-t-[8px]"),style:{position:u?"sticky":"static",top:0,zIndex:2},whileTap:{scale:.98},children:[c.jsxs("div",{className:"flex items-center min-w-0 flex-1",children:[c.jsx("span",{className:"flex items-center justify-center mr-2",style:{width:20,height:20},children:l.icon}),c.jsx("span",{className:"font-semibold text-[16px] truncate text-neutral-900 dark:text-neutral-100",children:l.title})]}),c.jsx(_.div,{animate:{rotate:u?180:0},transition:{duration:.2},className:"flex-shrink-0 ml-2 align-middle",style:{display:"flex",alignItems:"center",marginRight:16,transition:"transform .2s"},children:c.jsx(Xu,{className:"w-6 h-6 text-neutral-600 dark:text-neutral-400"})})]}),c.jsx(pe,{children:u&&c.jsx(_.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:c.jsxs("div",{className:"px-4 pb-3 pt-1 max-h-[60vh] overflow-y-auto",style:{lineHeight:"1.4"},children:[l.component,c.jsx("div",{style:{paddingBottom:8}})]})})})]},l.id):c.jsxs(_t,{variant:"default",radius:"default",className:ce("border border-[#E0E0E0] rounded-[8px] transition-all duration-200",u&&d?"bg-[#FAFAFA]":"bg-white","p-0 mb-4"),children:[c.jsxs(_.button,{onClick:()=>n(u?"":l.id),className:ce("w-full flex items-center justify-between px-4 py-3 min-h-12 text-left focus:outline-none",u&&d?"bg-[#FAFAFA]":"bg-white","rounded-t-[8px]"),style:{position:u?"sticky":"static",top:0,zIndex:2},whileTap:{scale:.98},children:[c.jsxs("div",{className:"flex items-center min-w-0 flex-1",children:[c.jsx("span",{className:"flex items-center justify-center mr-2",style:{width:20,height:20},children:l.icon}),c.jsx("span",{className:"font-semibold text-[16px] truncate text-neutral-900 dark:text-neutral-100",children:l.title})]}),d&&c.jsx("span",{className:"ml-2 px-[6px] py-[2px] text-xs font-medium rounded-[4px] bg-[#E0F2E9] text-[#2A7F3E] align-middle",style:{lineHeight:"1.2"},children:l.badge}),c.jsx(_.div,{animate:{rotate:u?180:0},transition:{duration:.2},className:"flex-shrink-0 ml-2 align-middle",style:{display:"flex",alignItems:"center",marginRight:16},children:c.jsx(Xu,{className:"w-6 h-6 text-neutral-600 dark:text-neutral-400"})})]}),c.jsx(pe,{children:u&&c.jsx(_.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:c.jsxs("div",{className:"px-4 pb-3 pt-1 max-h-[60vh] overflow-y-auto",style:{lineHeight:"1.4"},children:[l.component,d&&c.jsx("div",{style:{paddingBottom:8}})]})})})]},l.id)})})},sh=()=>c.jsxs("div",{className:"relative",children:[c.jsxs("div",{className:"relative h-96 w-full overflow-hidden bg-gradient-to-br from-muted/50 to-muted",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background/80 via-background/20 to-transparent"}),c.jsx("div",{className:"absolute top-0 left-0 right-0 p-4 pt-safe-top",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(G,{className:"h-10 w-10 rounded-full"}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(G,{className:"h-10 w-10 rounded-full"}),c.jsx(G,{className:"h-10 w-10 rounded-full"})]})]})}),c.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-6 pb-safe-bottom",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(G,{className:"h-8 w-64"}),c.jsx(G,{className:"h-6 w-48"})]}),c.jsxs("div",{className:"flex flex-wrap gap-3",children:[c.jsx(G,{className:"h-8 w-24 rounded-full"}),c.jsx(G,{className:"h-8 w-32 rounded-full"}),c.jsx(G,{className:"h-8 w-20 rounded-full"})]})]})})]}),c.jsxs("div",{className:"p-4 space-y-6 pb-20",children:[c.jsxs("div",{className:"bg-background p-6 rounded-2xl shadow-lg border border-border/50",children:[c.jsxs("div",{className:"mb-6 flex items-center",children:[c.jsx(G,{className:"h-12 w-12 rounded-full mr-4"}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(G,{className:"h-6 w-48"}),c.jsx(G,{className:"h-4 w-64"})]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx(G,{className:"h-4 w-full"}),c.jsx(G,{className:"h-4 w-5/6"}),c.jsx(G,{className:"h-4 w-4/5"}),c.jsx(G,{className:"h-4 w-3/4"})]}),c.jsxs("div",{className:"mt-8 space-y-4",children:[c.jsxs("div",{className:"flex items-center mb-4",children:[c.jsx(G,{className:"h-12 w-12 rounded-full mr-4"}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(G,{className:"h-6 w-32"}),c.jsx(G,{className:"h-4 w-56"})]})]}),[1,2,3].map(e=>c.jsxs("div",{className:"flex items-start bg-muted/20 rounded-xl p-4",children:[c.jsx(G,{className:"h-5 w-5 rounded-full mr-4 mt-1"}),c.jsx(G,{className:"h-4 w-full"})]},e))]})]}),c.jsxs("div",{className:"bg-background p-6 rounded-2xl shadow-lg border border-border/50",children:[c.jsxs("div",{className:"mb-4 flex items-center",children:[c.jsx(G,{className:"h-6 w-6 mr-3"}),c.jsx(G,{className:"h-6 w-48"})]}),c.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-6",children:[c.jsx(G,{className:"h-12 w-12 mx-auto mb-3"}),c.jsx(G,{className:"h-6 w-32 mx-auto mb-2"}),c.jsx(G,{className:"h-4 w-48 mx-auto"})]})]}),c.jsxs("div",{className:"bg-background p-6 rounded-2xl shadow-lg border border-border/50",children:[c.jsxs("div",{className:"mb-4 flex items-center",children:[c.jsx(G,{className:"h-6 w-6 mr-3"}),c.jsx(G,{className:"h-6 w-40"})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3,4,5,6].map(e=>c.jsxs("div",{className:"bg-muted/50 rounded-lg p-4",children:[c.jsx(G,{className:"h-8 w-8 mb-2"}),c.jsx(G,{className:"h-4 w-16 mb-1"}),c.jsx(G,{className:"h-5 w-24"})]},e))})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx(G,{className:"h-5 w-5 mr-2"}),c.jsx(G,{className:"h-6 w-32"})]}),c.jsx(G,{className:"h-4 w-16"})]}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:[1,2,3,4,5,6].map(e=>c.jsx(G,{className:"aspect-square rounded-xl"},e))})]})]}),c.jsxs("div",{className:"fixed bottom-4 right-4 z-40 flex flex-col-reverse gap-3",children:[[1,2,3].map(e=>c.jsx(G,{className:"h-14 w-14 rounded-full"},e)),c.jsx(G,{className:"h-16 w-16 rounded-full"})]})]}),_5=()=>{const{plantId:e}=ql(),t=kt(),{plant:r,loading:n,error:a}=dc(e),{addPlantImage:i}=e_(),[o,s]=y.useState(!1),l=async(u,d)=>{if(!e)throw new Error("Plant ID is required");return new Promise((f,m)=>{i({plantId:e,imageDataUrl:u,note:d},{onSuccess:()=>f(),onError:h=>m(h)})})};return n?c.jsx(sh,{}):a?c.jsx("main",{className:"flex flex-1 flex-col items-center justify-center p-4 text-center h-screen",children:c.jsxs(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[c.jsx(Wt,{className:"w-16 h-16 text-destructive mx-auto"}),c.jsx("h1",{className:"text-2xl font-bold text-destructive",children:"Ocurrió un Error"}),c.jsx("p",{className:"text-muted-foreground max-w-md",children:a}),c.jsx(ne,{onClick:()=>window.location.reload(),className:"mt-4",children:"Intentar de nuevo"})]})}):r?c.jsx(y.Suspense,{fallback:c.jsx(sh,{}),children:c.jsxs(_.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[c.jsx(i_,{plant:r}),c.jsxs("main",{className:"p-3 sm:p-4 space-y-3 sm:space-y-4",style:{paddingBottom:"calc(88px + env(safe-area-inset-bottom))"},children:[c.jsx(_.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1,duration:.2},children:c.jsx(S5,{plant:r})}),c.jsx(_.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.15,duration:.2},children:c.jsx(N5,{plant:r,onAddPhoto:()=>s(!0)})}),c.jsx(_.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2,duration:.2},children:c.jsx(t_,{images:r.images})})]}),c.jsxs(_.div,{className:"fixed bottom-24 right-4 z-40 flex flex-col-reverse gap-3",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.25,duration:.2},children:[c.jsxs(_.button,{onClick:()=>s(!0),className:"bg-primary hover:bg-primary/90 text-primary-foreground p-2.5 sm:p-3 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 group flex items-center",whileHover:{scale:1.1},whileTap:{scale:.95},title:"Agregar nueva foto",children:[c.jsx(cr,{className:"w-4 h-4 sm:w-5 sm:h-5"}),c.jsx("span",{className:"ml-2 text-xs font-medium block sm:hidden",children:"Agregar foto"}),c.jsx("span",{className:"absolute right-full mr-3 top-1/2 -translate-y-1/2 tooltip-contrast text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap shadow-lg hidden sm:block",children:"Agregar foto"})]}),c.jsxs(_.button,{onClick:()=>t(it.toPlantChat(r.id)),className:"bg-blue-500 hover:bg-blue-600 text-white p-2.5 sm:p-3 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 group flex items-center",whileHover:{scale:1.1},whileTap:{scale:.95},title:"Chat con la planta",children:[c.jsx(jh,{className:"w-4 h-4 sm:w-5 sm:h-5"}),c.jsx("span",{className:"ml-2 text-xs font-medium block sm:hidden",children:"Chat"}),c.jsx("span",{className:"absolute right-full mr-3 top-1/2 -translate-y-1/2 tooltip-contrast text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap shadow-lg hidden sm:block",children:"Chat"})]})]}),c.jsx(P5,{isOpen:o,onClose:()=>s(!1),onPhotoAdded:l,plantName:r.nickname||r.name})]})}):c.jsx("main",{className:"flex flex-1 flex-col items-center justify-center p-4 text-center h-screen",children:c.jsxs(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[c.jsx(Wt,{className:"w-16 h-16 text-muted-foreground mx-auto"}),c.jsx("h1",{className:"text-2xl font-bold",children:"Planta no encontrada"}),c.jsx("p",{className:"text-muted-foreground max-w-md",children:"No se pudo encontrar la información de la planta solicitada."}),c.jsx(ne,{onClick:()=>t(it.toDashboard()),className:"mt-4",children:"Volver al inicio"})]})})},k5=({videoRef:e,canvasRef:t})=>{const[r,n]=y.useState(!1),[a,i]=y.useState(null),[o,s]=y.useState("environment"),[l,u]=y.useState(null),d=y.useRef(null),f=y.useCallback(async()=>{try{d.current&&d.current.getTracks().forEach(x=>x.stop()),u(null);const g=await navigator.mediaDevices.getUserMedia({video:{facingMode:o,width:{ideal:1920},height:{ideal:1080},aspectRatio:16/9}});e.current&&(e.current.srcObject=g,d.current=g)}catch(g){console.error("Error accessing camera:",g),g instanceof Error?g.name==="NotAllowedError"||g.message.includes("Permission dismissed")?u("Permiso de cámara denegado. Por favor, actívalo en los ajustes de tu navegador."):u("No se pudo acceder a la cámara. Revisa los permisos y el dispositivo."):u("Ocurrió un error inesperado al acceder a la cámara.")}},[o,e]);y.useEffect(()=>(f(),()=>{d.current&&d.current.getTracks().forEach(g=>g.stop())}),[f]);const m=y.useCallback(()=>{if(!e.current||!t.current)return;const g=e.current,x=t.current,b=x.getContext("2d");if(!b)return;x.width=g.videoWidth,x.height=g.videoHeight,b.drawImage(g,0,0,g.videoWidth,g.videoHeight);const w=x.toDataURL("image/jpeg",.9);i(w),n(!0),d.current&&d.current.getTracks().forEach(j=>j.stop()),"vibrate"in navigator&&navigator.vibrate(50)},[e,t]),h=y.useCallback(()=>{i(null),n(!1),f()},[f]);return{isCapturing:r,capturedImage:a,cameraError:l,captureImage:m,retakePhoto:h,switchCamera:()=>{s(g=>g==="user"?"environment":"user")},startCamera:f,selectFromGallery:g=>{if(g&&g.type.startsWith("image/")){const x=new FileReader;x.onload=b=>{const w=b.target?.result;i(w),n(!0),d.current&&d.current.getTracks().forEach(j=>j.stop())},x.readAsDataURL(g)}}}},E5=({error:e,onRetry:t})=>{const r=kt();return c.jsx("div",{className:"absolute inset-0 bg-black flex items-center justify-center p-6",children:c.jsx("div",{className:"bg-gray-900 rounded-2xl p-6 max-w-sm w-full mx-4",children:c.jsxs("div",{className:"flex flex-col items-center text-center",children:[c.jsx("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mb-4",children:c.jsx(Wt,{size:32,className:"text-red-400"})}),c.jsx("h3",{className:"text-white text-lg font-semibold mb-2",children:"Camera Access Required"}),c.jsx("p",{className:"text-gray-300 text-sm mb-6 leading-relaxed",children:e}),c.jsxs("div",{className:"space-y-3 w-full",children:[c.jsxs(ne,{onClick:t,children:[c.jsx(cn,{size:18,className:"mr-2"}),c.jsx("span",{children:"Try Again"})]}),c.jsx(ne,{onClick:()=>r(it.toDashboard()),variant:"secondary",children:"Go Back"})]}),c.jsx("div",{className:"mt-4 p-3 bg-gray-800 rounded-lg",children:c.jsxs("p",{className:"text-gray-400 text-xs",children:[c.jsx("strong",{children:"How to enable camera:"}),c.jsx("br",{}),"1. Click the camera icon in your browser's address bar",c.jsx("br",{}),'2. Select "Allow" for camera access',c.jsx("br",{}),'3. Refresh the page or tap "Try Again"']})})]})})})},A5=({image:e,isAnalyzing:t,onRetake:r,onAnalyze:n})=>c.jsxs(c.Fragment,{children:[c.jsx(_.img,{src:e,alt:"Captured plant",className:"absolute inset-0 w-full h-full object-cover z-10",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}),c.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-8 safe-area-bottom z-20",children:[c.jsxs("div",{className:"flex items-center justify-center space-x-6",children:[c.jsx(ne,{onClick:r,variant:"secondary",disabled:t,children:"Retake"}),c.jsx(ne,{onClick:n,disabled:t,children:t?c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),c.jsx("span",{children:"Analyzing..."})]}):"Add Plant"})]}),t&&c.jsx("p",{className:"text-center text-white mt-4 text-sm",children:"AI is identifying your plant and creating a care profile..."})]})]}),C5=({videoRef:e,canvasRef:t,flashEnabled:r,onCapture:n,onSwitchCamera:a,onToggleFlash:i,onSelectFromGallery:o})=>{const s=kt();return c.jsxs(c.Fragment,{children:[c.jsx(_.video,{ref:e,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5}}),c.jsx("canvas",{ref:t,className:"hidden"}),c.jsx("div",{className:"absolute top-0 left-0 right-0 p-4 safe-area-top z-20",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(ne,{onClick:()=>s(it.toDashboard()),variant:"ghost",size:"icon",className:"rounded-full bg-black/50",children:c.jsx(xo,{size:20})}),c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx(ne,{onClick:i,variant:"ghost",size:"icon",className:`rounded-full ${r?"bg-yellow-500 text-black hover:bg-yellow-600":"bg-black/50"}`,children:r?c.jsx(at,{size:20}):c.jsx(zx,{size:20})}),c.jsx(ne,{onClick:a,variant:"ghost",size:"icon",className:"rounded-full bg-black/50",children:c.jsx(Rx,{size:20})})]})]})}),c.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-8 safe-area-bottom z-20",children:[c.jsxs("div",{className:"flex items-center justify-center space-x-8",children:[c.jsx(ne,{onClick:o,size:"icon",variant:"ghost",className:"w-14 h-14 rounded-full bg-black/50",children:c.jsx(Kl,{size:24})}),c.jsx(_.button,{onClick:n,className:"w-20 h-20 rounded-full bg-white border-4 border-gray-300 flex items-center justify-center ios-button",whileHover:{scale:1.05},whileTap:{scale:.95},children:c.jsx("div",{className:"w-16 h-16 rounded-full bg-white flex items-center justify-center",children:c.jsx(cr,{size:24,className:"text-gray-600"})})}),c.jsx("div",{className:"w-14 h-14"})]}),c.jsx("p",{className:"text-center text-white mt-4 text-sm",children:"Position your plant in the frame and tap to capture, or select from gallery"})]}),c.jsx("div",{className:"absolute inset-0 pointer-events-none flex items-center justify-center",children:c.jsx("div",{className:"w-64 h-64 border-2 border-white/50 rounded-2xl"})})]})},O5=()=>{const e=kt(),{createPlant:t,isCreatingPlant:r}=Co(),n=y.useRef(null),a=y.useRef(null),{isCapturing:i,capturedImage:o,cameraError:s,captureImage:l,retakePhoto:u,switchCamera:d,startCamera:f,selectFromGallery:m}=k5({videoRef:n,canvasRef:a}),[h,p]=y.useState(!1),v=y.useRef(null),g=()=>{if(!o)return;const w="Interior",j=new Promise((P,S)=>{t({imageDataUrl:o,location:w},{onSuccess:N=>{N?.id?e(it.toPlantDetail(N.id)):e(it.toDashboard()),P(N)},onError:N=>{S(N)}})});tp.promise(j,{loading:"Analizando imagen... La IA está trabajando.",success:P=>`¡Planta "${P.name}" creada con éxito!`,error:P=>`Error: ${P.message}`})},x=()=>p(w=>!w),b=w=>{const j=w.target.files?.[0];j&&m(j)};return c.jsxs("div",{className:"fixed inset-0 bg-black z-50",children:[c.jsx("input",{ref:v,type:"file",accept:"image/*",onChange:b,className:"hidden",id:"gallery-input"}),c.jsx(pe,{mode:"wait",children:s?c.jsx(E5,{error:s,onRetry:f},"error"):i?c.jsx(A5,{image:o,isAnalyzing:r,onRetake:u,onAnalyze:g},"preview"):c.jsx(C5,{videoRef:n,canvasRef:a,flashEnabled:h,onCapture:l,onSwitchCamera:d,onToggleFlash:x,onSelectFromGallery:()=>v.current?.click()},"capture")})]})},T5=()=>{const{plantId:e}=ql(),t=kt(),{user:r}=yr(),n=dr(u=>u.getPlantById(e||"")),a=dr(u=>u.addChatMessage),i=dr(u=>u.isLoading),o=y.useMemo(()=>{if(!n||!n.chatHistory||n.chatHistory.length===0)return!1;const u=n.chatHistory[n.chatHistory.length-1];return i&&u.sender==="user"},[n,i]);return{plant:n,isTyping:o,handleSendMessage:async u=>{if(!(!e||!r||!u.trim()))try{await a(e,u.trim(),r.id)}catch(d){console.error("Failed to send message:",d)}},handleGoBack:()=>{t(`/plant/${e}`)},currentUser:r}},I5=({plant:e})=>{const t=kt(),r=()=>{const n=e.healthScore/100,a=e.lastWatered?new Date(e.lastWatered).getTime():0,i=a?Math.max(0,1-(Date.now()-a)/(e.careProfile.wateringFrequency*24*60*60*1e3)):0,o=n*.6+i*.4;return o>.8?"radiante":o>.6?"feliz":o>.4?"estable":"necesitada de atención"};return c.jsx("header",{className:"sticky top-0 z-10 bg-background/80 backdrop-blur-sm border-b border-muted",children:c.jsxs("div",{className:"flex items-center gap-2 p-4 pt-safe-top",children:[c.jsx("button",{onClick:()=>t(it.toPlantDetail(e.id)),className:"btn btn-ghost btn-circle",children:c.jsx(Gl,{size:20})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h1",{className:"font-bold text-foreground truncate",children:e.nickname||e.name}),c.jsxs("p",{className:"text-xs text-neutral-600 dark:text-neutral-400 capitalize",children:["Se siente ",r()]})]}),c.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-green-600 dark:text-green-400",children:[c.jsx(ph,{className:"w-4 h-4"}),c.jsxs("span",{children:[e.healthScore,"%"]})]})]})})};var D5={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 día",other:"{{count}} días"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 año",other:"alrededor de {{count}} años"},xYears:{one:"1 año",other:"{{count}} años"},overXYears:{one:"más de 1 año",other:"más de {{count}} años"},almostXYears:{one:"casi 1 año",other:"casi {{count}} años"}},M5=function(t,r,n){var a,i=D5[t];return typeof i=="string"?a=i:r===1?a=i.one:a=i.other.replace("{{count}}",r.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"en "+a:"hace "+a:a},$5={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},z5={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},R5={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},L5={date:Mn({formats:$5,defaultWidth:"full"}),time:Mn({formats:z5,defaultWidth:"full"}),dateTime:Mn({formats:R5,defaultWidth:"full"})},F5={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'mañana a la' p",nextWeek:"eeee 'a la' p",other:"P"},B5={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'mañana a las' p",nextWeek:"eeee 'a las' p",other:"P"},U5=function(t,r,n,a){return r.getUTCHours()!==1?B5[t]:F5[t]},W5={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","después de cristo"]},H5={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},q5={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},Z5={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","sá"],abbreviated:["dom","lun","mar","mié","jue","vie","sáb"],wide:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},K5={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"}},G5={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},V5=function(t,r){var n=Number(t);return n+"º"},Y5={ordinalNumber:V5,era:Gt({values:W5,defaultWidth:"wide"}),quarter:Gt({values:H5,defaultWidth:"wide",argumentCallback:function(t){return Number(t)-1}}),month:Gt({values:q5,defaultWidth:"wide"}),day:Gt({values:Z5,defaultWidth:"wide"}),dayPeriod:Gt({values:K5,defaultWidth:"wide",formattingValues:G5,defaultFormattingWidth:"wide"})},X5=/^(\d+)(º)?/i,Q5=/\d+/i,J5={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[uú]n|despu[eé]s de cristo|era com[uú]n)/i},eR={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[uú]n)/i,/^(despu[eé]s de cristo|era com[uú]n)/i]},tR={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},rR={any:[/1/i,/2/i,/3/i,/4/i]},nR={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},aR={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},iR={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[áa])/i,abbreviated:/^(dom|lun|mar|mi[ée]|jue|vie|s[áa]b)/i,wide:/^(domingo|lunes|martes|mi[ée]rcoles|jueves|viernes|s[áa]bado)/i},oR={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},sR={narrow:/^(a|p|mn|md|(de la|a las) (mañana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (mañana|tarde|noche))/i},lR={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/mañana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},cR={ordinalNumber:wp({matchPattern:X5,parsePattern:Q5,valueCallback:function(t){return parseInt(t,10)}}),era:Vt({matchPatterns:J5,defaultMatchWidth:"wide",parsePatterns:eR,defaultParseWidth:"any"}),quarter:Vt({matchPatterns:tR,defaultMatchWidth:"wide",parsePatterns:rR,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:Vt({matchPatterns:nR,defaultMatchWidth:"wide",parsePatterns:aR,defaultParseWidth:"any"}),day:Vt({matchPatterns:iR,defaultMatchWidth:"wide",parsePatterns:oR,defaultParseWidth:"any"}),dayPeriod:Vt({matchPatterns:sR,defaultMatchWidth:"any",parsePatterns:lR,defaultParseWidth:"any"})},ix={code:"es",formatDistance:M5,formatLong:L5,formatRelative:U5,localize:Y5,match:cR,options:{weekStartsOn:1,firstWeekContainsDate:1}};const uR=e=>{switch(e){case"happy":case"excited":return"😊";case"grateful":return"🥰";case"worried":return"😟";case"sad":return"😢";default:return"🌱"}},dR=({message:e})=>{const t=e.sender==="user",r=n=>{No.success("¡Gracias por tu feedback!",n?"Nos alegra que la respuesta te haya sido útil.":"Trabajaremos para mejorar las respuestas.")};return c.jsxs(_.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:ce("flex items-end gap-2",t?"justify-end":"justify-start"),children:[!t&&c.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-muted text-xl",children:uR(e.emotion)}),c.jsxs("div",{className:ce("max-w-xs rounded-2xl px-4 py-2 sm:max-w-sm md:max-w-md shadow-adaptive",t?"rounded-br-lg bg-primary-700 text-white drop-shadow-sm":"rounded-bl-lg bg-contrast-surface text-contrast-medium border border-contrast","rounded-[12px]"),children:[c.jsx("p",{className:"text-sm",children:e.content}),e.context?.insights&&e.context.insights.length>0&&c.jsxs("div",{className:"mt-3 space-y-2",children:[c.jsx("div",{className:"font-semibold text-xs text-green-700 dark:text-green-300",children:"Recomendaciones y observaciones:"}),c.jsx("ul",{className:"space-y-1",children:e.context.insights.map((n,a)=>c.jsxs("li",{className:"text-xs bg-green-50 dark:bg-green-900/20 rounded-lg p-2 border border-green-200 dark:border-green-800",children:[c.jsxs("div",{className:"font-medium",children:[n.type==="warning"&&"⚠️ ",n.type==="tip"&&"💡 ",n.type==="recommendation"&&"🌱 ",n.type==="observation"&&"🔎 ",n.title]}),c.jsx("div",{children:n.description}),n.affectedPlants&&n.affectedPlants.length>0&&c.jsxs("div",{className:"mt-1 text-[11px] text-green-800 dark:text-green-200",children:["Plantas: ",n.affectedPlants.join(", ")]})]},a))})]}),e.context?.suggestedActions&&e.context.suggestedActions.length>0&&c.jsxs("div",{className:"mt-3 space-y-2",children:[c.jsx("div",{className:"font-semibold text-xs text-blue-700 dark:text-blue-300",children:"Acciones sugeridas:"}),c.jsx("ul",{className:"space-y-1",children:e.context.suggestedActions.map((n,a)=>c.jsxs("li",{className:"text-xs bg-blue-50 dark:bg-blue-900/20 rounded-lg p-2 border border-blue-200 dark:border-blue-800",children:[c.jsx("div",{className:"font-medium",children:n.action}),n.priority&&c.jsxs("div",{className:"text-[11px] text-blue-800 dark:text-blue-200",children:["Prioridad: ",n.priority]}),n.plantIds&&n.plantIds.length>0&&c.jsxs("div",{className:"text-[11px] text-blue-800 dark:text-blue-200",children:["Plantas: ",n.plantIds.join(", ")]})]},a))})]}),c.jsx("p",{className:ce("mt-1 text-xs",t?"text-white/80":"text-contrast-soft","text-[#888] text-[12px]"),children:Pp(new Date(e.timestamp),{addSuffix:!0,locale:ix})}),!t&&c.jsxs("div",{className:"flex gap-2 mt-2",children:[c.jsx("button",{"aria-label":"Respuesta útil",className:"text-green-600 hover:text-green-800 text-lg focus:outline-none",onClick:()=>r(!0),children:"👍"}),c.jsx("button",{"aria-label":"Respuesta no útil",className:"text-red-500 hover:text-red-700 text-lg focus:outline-none",onClick:()=>r(!1),children:"👎"})]})]})]})},fR=({messages:e})=>c.jsx("div",{className:"space-y-4",children:e.map(t=>c.jsx(dR,{message:t},t.id))}),mR=["¿Cómo te sientes hoy?","¿Necesitas agua?","Cuéntame un dato curioso sobre ti"],hR=({onSendMessage:e,isTyping:t})=>{const[r,n]=y.useState(""),a=y.useRef(null),i=()=>{const s=a.current?.value.trim();s&&(e(s),a.current&&(a.current.value=""))},o=s=>{s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),i())};return c.jsx("footer",{className:"sticky bottom-0 z-10 bg-background/80 backdrop-blur-sm border-t border-border",children:c.jsxs("div",{className:"p-4 pb-safe-bottom space-y-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("div",{className:"relative flex-1",children:[c.jsx(To,{type:"text",ref:a,onKeyDown:o,placeholder:"Escribe un mensaje...",className:"pr-12",disabled:t}),c.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 text-muted-foreground",children:c.jsx(Ph,{size:16})})]}),c.jsx(ne,{"aria-label":"Enviar mensaje",onClick:i,disabled:!r.trim()||t,size:"icon",children:c.jsx(Sh,{size:20})})]}),c.jsx("div",{className:"flex flex-wrap items-center gap-2 mb-3",children:mR.map(s=>c.jsx(ne,{onClick:()=>n(s),disabled:t,variant:"secondary",size:"sm",children:s},s))})]})})},ox=()=>{const e={initial:{y:0},animate:{y:[0,-4,0],transition:{duration:1,repeat:1/0,ease:"easeInOut"}}};return c.jsxs(_.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0},className:"flex items-end gap-2",children:[c.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-muted text-xl",children:"🌱"}),c.jsxs("div",{className:"flex items-center gap-1 rounded-2xl rounded-bl-lg bg-muted px-4 py-3",children:[c.jsx(_.div,{variants:e,animate:"animate",style:{transitionDelay:"0s"},className:"h-2 w-2 rounded-full bg-muted-foreground/50"}),c.jsx(_.div,{variants:e,animate:"animate",style:{transitionDelay:"0.2s"},className:"h-2 w-2 rounded-full bg-muted-foreground/50"}),c.jsx(_.div,{variants:e,animate:"animate",style:{transitionDelay:"0.4s"},className:"h-2 w-2 rounded-full bg-muted-foreground/50"})]})]})},pR=({plantName:e})=>c.jsxs(_.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5,ease:"easeOut"},className:"flex flex-1 flex-col items-center justify-center text-center p-8",children:[c.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-primary/10 mb-4",children:c.jsx(at,{className:"h-8 w-8 text-primary"})}),c.jsx("h3",{className:"text-xl font-bold text-foreground",children:"Inicia una conversación"}),c.jsxs("p",{className:"text-muted-foreground max-w-xs",children:[e," está esperando para charlar. ¡Pregúntale sobre sus cuidados o simplemente saluda!"]})]}),gR=()=>{const{plantId:e}=ql(),t=kt(),{loading:r,error:n}=dc(e),{plant:a,isTyping:i,handleSendMessage:o}=T5(),s=y.useRef(null);return y.useEffect(()=>{s.current?.scrollIntoView({behavior:"smooth"})},[a?.chatHistory,i]),r?c.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-background text-foreground",children:[c.jsx(Tn,{className:"w-12 h-12 animate-spin text-green-500"}),c.jsx("p",{className:"mt-4 text-lg",children:"Cargando chat..."})]}):n?c.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-background text-red-500",children:[c.jsxs("p",{className:"mb-4",children:["Error: ",n]}),c.jsx("button",{onClick:()=>t(-1),className:"btn btn-primary",children:"Volver"})]}):a?c.jsxs("div",{className:"flex flex-col h-screen bg-background text-foreground",children:[c.jsx(I5,{plant:a}),c.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",style:{paddingBottom:"calc(88px + env(safe-area-inset-bottom))"},children:[c.jsx(pe,{children:a.chatHistory.length===0?c.jsx(pR,{plantName:a.nickname||a.name}):c.jsx(fR,{messages:a.chatHistory,plantNickname:a.nickname||a.name})}),i&&c.jsx(ox,{}),c.jsx("div",{ref:s})]}),c.jsx(hR,{onSendMessage:o,isTyping:i})]}):c.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-background text-foreground",children:[c.jsx("p",{className:"mb-4",children:"Planta no encontrada."}),c.jsx("button",{onClick:()=>t(-1),className:"btn btn-primary",children:"Volver"})]})};class vR{supabase;cache;constructor(t,r){this.supabase=t,this.cache=r}async sendMessage(t,r,n){try{const{data:{session:a},error:i}=await this.supabase.auth.getSession();if(i||!a?.access_token)throw console.error("User session not available:",i),new Error("Usuario no autenticado. Por favor inicia sesión nuevamente.");const{data:o,error:s}=await this.supabase.functions.invoke("garden-ai-chat",{body:{message:t,sessionId:r,userId:n},headers:{Authorization:`Bearer ${a.access_token}`}});if(s)throw new Error(`Garden AI service error: ${s.message}`);if(!o)throw new Error("No data received from garden AI service");return o}catch(a){throw console.error("Error in garden chat service:",a),a}}async sendMessageToGardenAI(t,r,n){try{const a=await this.buildGardenContext(r),i=n.map(p=>({role:p.sender==="user"?"user":"assistant",content:p.content})),o="amigable, motivador, experto, cálido, y con un toque de humor ligero",{data:{session:s},error:l}=await this.supabase.auth.getSession();if(l||!s?.access_token)throw console.error("User session not available:",l),new Error("Usuario no autenticado. Por favor inicia sesión nuevamente.");const{data:u,error:d}=await this.supabase.functions.invoke("garden-ai-chat",{body:{userMessage:t,gardenContext:a,conversationHistory:i,tonePersona:o},headers:{Authorization:`Bearer ${s.access_token}`}});if(d)throw new Error(`Garden AI service error: ${d.message}`);if(!u)throw new Error("No data received from garden AI service");const f=typeof u=="string"?JSON.parse(u):u,m=(f.content||"").toLowerCase();return(!f.content||m.includes("no sé")||m.includes("no tengo información")||m.includes("no puedo ayudarte")||m.length<30)&&No.warning("Respuesta genérica","La respuesta de la IA fue muy genérica o poco útil. Intenta preguntar de otra forma o proporciona más detalles."),{content:f.content||"Lo siento, no pude procesar tu mensaje.",insights:f.insights||[],suggestedActions:f.suggestedActions||[]}}catch(a){throw a}}async verifyFunctionAvailability(){try{const t={userMessage:"ping",gardenContext:{totalPlants:0,plantsData:[],averageHealthScore:0,commonIssues:[],careScheduleSummary:{needsWatering:[],needsFertilizing:[],healthConcerns:[]},environmentalFactors:{locations:["test"]}},conversationHistory:[]},{data:{session:r},error:n}=await this.supabase.auth.getSession();if(n||!r?.access_token)throw console.error("User session not available:",n),new Error("Usuario no autenticado. Por favor inicia sesión nuevamente.");const{data:a,error:i}=await this.supabase.functions.invoke("garden-ai-chat",{body:t,headers:{Authorization:`Bearer ${r.access_token}`}});return i?i.message.includes("404")||i.message.includes("not found")?{available:!1,error:"La función de chat de jardín no está disponible en este momento"}:{available:!1,error:i.message}:a&&typeof a.content=="string"?{available:!0}:{available:!1,error:"Function returned unexpected response format"}}catch(t){return{available:!1,error:t instanceof Error?t.message:"Error desconocido"}}}async getGardenHealthSummary(t){try{const r=this.cache.getGardenSummary(t);if(r)return r;const n=await this.buildGardenContext(t),a=n.plantsData.filter(s=>s.healthScore>=80).length,i=n.careScheduleSummary.needsWatering.length+n.careScheduleSummary.healthConcerns.length,o={totalPlants:n.totalPlants,averageHealth:n.averageHealthScore,urgentActions:i,healthyPlants:a};return this.cache.setGardenSummary(t,o),o}catch(r){throw console.error("Error getting garden health summary:",r),r}}async getSuggestedQuestions(t){try{const r=await this.buildGardenContext(t),n=[];return r.totalPlants===0?(n.push("¿Cómo agrego mi primera planta?"),n.push("¿Qué tipo de planta me recomiendas para empezar?"),n):(n.push("¿Cuántas plantas tengo y cómo están?"),n.push("¿Cuál es la salud promedio de mi jardín?"),r.careScheduleSummary.healthConcerns.length>0&&(n.push("¿Qué plantas necesitan atención especial?"),n.push("¿Qué problemas de salud hay en mi jardín?")),r.plantsData.some(a=>a.healthScore>=80)&&n.push("¿Cuáles de mis plantas están más sanas?"),r.environmentalFactors.locations.length>1&&n.push("¿Cómo afecta la ubicación a mis plantas?"),r.totalPlants>5&&n.push("¿Cómo organizar mejor mi espacio de plantas?"),r.plantsData.some(a=>"lastFertilized"in a&&!!a.lastFertilized)&&n.push("¿Cuándo debo fertilizar mis plantas?"),new Set(r.plantsData.map(a=>a.species)).size>1&&n.push("¿Qué especie de planta es la más resistente en mi jardín?"),n.slice(0,6))}catch(r){return console.error("Error getting suggested questions:",r),["¿Cuántas plantas tengo y cómo están?","¿Cuál es la salud promedio de mi jardín?"]}}async refreshGardenData(t){try{this.invalidateCache(t),await this.buildGardenContext(t),console.log("[GardenChatService] Garden data refreshed for user:",t)}catch(r){throw console.error("Error refreshing garden data:",r),r}}async buildGardenContext(t){try{const r=this.cache.getGardenContext(t);if(r)return r;const{data:n,error:a}=await this.supabase.from("plants").select(`
          id,
          name,
          nickname,
          species,
          location,
          plant_environment,
          light_requirements,
          health_score,
          last_watered,
          last_fertilized,
          care_profile,
          date_added
        `).eq("user_id",t).order("created_at",{ascending:!1});if(a)throw a;const i=n.map(p=>({id:p.id,name:p.name,nickname:p.nickname||void 0,species:p.species,location:p.location,plantEnvironment:p.plant_environment,lightRequirements:p.light_requirements,healthScore:p.health_score||85,lastWatered:p.last_watered?new Date(p.last_watered):void 0,wateringFrequency:p.care_profile?.wateringFrequency})),o=i.length,s=o>0?Math.round(i.reduce((p,v)=>p+v.healthScore,0)/o):0,l=new Date,u=[],d=[],f=[];i.forEach(p=>{if(p.lastWatered&&p.wateringFrequency){const v=new Date(p.lastWatered),g=new Date(v);g.setDate(v.getDate()+p.wateringFrequency),l>g&&u.push(p.id)}p.healthScore<70&&f.push(p.id)});const m=[...new Set(i.map(p=>p.location))],h={totalPlants:o,plantsData:i,averageHealthScore:s,commonIssues:[],careScheduleSummary:{needsWatering:u,needsFertilizing:d,healthConcerns:f},environmentalFactors:{locations:m,lightConditions:[],humidityNeeds:[]}};return this.cache.setGardenContext(t,h),h}catch(r){throw console.error("Error building garden context:",r),r}}invalidateCache(t){this.cache.invalidateCache(t),console.log("Cache invalidated for user:",t)}}const Xr=new vR(he,In),yR=()=>{const{user:e}=yr(),[t,r]=y.useState([]),[n,a]=y.useState(!1),[i,o]=y.useState(!1),[s,l]=y.useState(null),[u,d]=y.useState(null),[f,m]=y.useState([]),[h,p]=y.useState("");y.useEffect(()=>{e?.id&&v()},[e?.id]);const v=async()=>{if(e?.id){a(!0);try{const[S,N]=await Promise.all([Xr.getGardenHealthSummary(e.id),Xr.getSuggestedQuestions(e.id)]);if(d(S),m(N),t.length===0&&S.totalPlants>0){const C={id:`welcome-${Date.now()}`,sender:"ai",content:`¡Hola! Soy tu asistente de jardín 🌱 

Veo que tienes ${S.totalPlants} plantas en tu jardín con una salud promedio de ${S.averageHealth}%. ${S.urgentActions>0?`Hay ${S.urgentActions} acciones que podrían necesitar tu atención.`:"¡Todo parece estar en buen estado!"}

¿En qué puedo ayudarte hoy con tu jardín?`,timestamp:new Date,context:{queryType:"general"}};r([C])}}catch(S){console.error("Error loading initial garden data:",S),l("Error al cargar la información del jardín")}finally{a(!1)}}},g=y.useCallback(async S=>{if(!e?.id||!S.trim()||i)return;const N=await Xr.verifyFunctionAvailability();if(!N.available){l(`🚧 El chat de jardín no está disponible: ${N.error}`);return}const C={id:`user-${Date.now()}`,sender:"user",content:S.trim(),timestamp:new Date};p(S.trim()),r(T=>[...T,C]),o(!0),l(null);try{const T=await Xr.sendMessageToGardenAI(S.trim(),e.id,t),R={id:`ai-${Date.now()}`,sender:"ai",content:T.content,timestamp:new Date,context:{plantsAnalyzed:xR(T),queryType:bR(S),insights:T.insights||[],suggestedActions:T.suggestedActions||[]}};if(r(k=>[...k,R]),T.suggestedActions&&T.suggestedActions.length>0){const k=await Xr.getGardenHealthSummary(e.id);d(k)}}catch(T){console.error("Error sending message to garden AI:",T);let R="Error al enviar el mensaje. Por favor intenta de nuevo.";T instanceof Error&&(T.message.includes("función de chat de jardín no está disponible")?R="🚧 El chat de jardín está temporalmente no disponible. Estamos trabajando para solucionarlo.":T.message.includes("CORS")?R="🔧 Error de configuración. Por favor contacta al administrador.":T.message.includes("garden-ai-chat no existe")&&(R="⚠️ Servicio no configurado. El chat de jardín necesita configuración adicional.")),l(R),r(k=>k.slice(0,-1))}finally{o(!1)}},[e?.id,t,i]),x=y.useCallback(async()=>{h&&await g(h)},[h,g]),b=y.useCallback(()=>{r([]),l(null),e?.id&&v()},[e?.id]),w=y.useCallback(async()=>{if(e?.id){a(!0);try{await Xr.refreshGardenData(e.id),await v(),console.log("[useGardenChat] Garden data refreshed successfully")}catch(S){console.error("Error refreshing garden data:",S),l("Error al actualizar los datos del jardín")}finally{a(!1)}}},[e?.id]),j=y.useMemo(()=>n,[n]),P=y.useMemo(()=>{},[e?.id,u]);return{messages:t,isLoading:j,isTyping:i,error:s,gardenSummary:u,suggestedQuestions:f,sendMessage:g,clearMessages:b,retryLastMessage:x,refreshGardenData:w,cacheStats:P}};function xR(e){const t=[];return e.insights&&e.insights.forEach(r=>{r.affectedPlants&&t.push(...r.affectedPlants)}),e.suggestedActions&&e.suggestedActions.forEach(r=>{r.plantIds&&t.push(...r.plantIds)}),[...new Set(t)]}function bR(e){const t=e.toLowerCase();return t.includes("salud")||t.includes("problema")||t.includes("enferm")?"health_analysis":t.includes("comparar")||t.includes("diferencia")||t.includes("mejor")?"care_comparison":t.includes("hongo")||t.includes("plaga")||t.includes("prevenir")?"disease_prevention":t.includes("crecimiento")||t.includes("progreso")||t.includes("tiempo")?"growth_tracking":"general"}const wR=({onClose:e})=>{const[t,r]=y.useState([{name:"garden-ai-chat",available:!1}]),[n,a]=y.useState(!1),i=async()=>{a(!0);const l=[],u=await Xr.verifyFunctionAvailability();l.push({name:"garden-ai-chat",available:u.available,error:u.error,lastChecked:new Date}),r(l),a(!1)};y.useEffect(()=>{i()},[]);const o=l=>l.available?c.jsx(Dr,{className:"w-5 h-5 text-green-500"}):c.jsx(Wt,{className:"w-5 h-5 text-red-500"}),s=l=>l.available?"Disponible":"No disponible";return c.jsx(_.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:e,children:c.jsx(_.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:l=>l.stopPropagation(),className:"w-full max-w-md",children:c.jsxs(_t,{className:"p-6",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx(Nh,{className:"w-6 h-6 text-blue-500"}),c.jsx("h3",{className:"text-lg font-semibold",children:"Diagnóstico del Sistema"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Estado de Funciones Edge"}),c.jsx("div",{className:"space-y-3",children:t.map(l=>c.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[o(l),c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-sm",children:l.name}),c.jsx("p",{className:"text-xs text-muted-foreground",children:s(l)})]})]}),l.error&&c.jsxs("div",{className:"text-xs text-red-500 max-w-32 text-right",children:[l.error.substring(0,50),"..."]})]},l.name))})]}),t.some(l=>!l.available)&&c.jsx(_.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:c.jsxs("div",{className:"flex items-start gap-2",children:[c.jsx(Wt,{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400 mt-0.5 flex-shrink-0"}),c.jsxs("div",{className:"text-sm",children:[c.jsx("p",{className:"font-medium text-yellow-800 dark:text-yellow-200",children:"Servicios no disponibles"}),c.jsx("p",{className:"text-yellow-700 dark:text-yellow-300 mt-1",children:"Algunos servicios del chat de jardín no están funcionando. Verifica que las funciones Edge estén desplegadas en Supabase."})]})]})}),c.jsxs("div",{className:"flex gap-3 pt-3",children:[c.jsxs(ne,{onClick:i,disabled:n,variant:"outline",size:"sm",className:"flex-1 gap-2",children:[c.jsx(cn,{className:`w-4 h-4 ${n?"animate-spin":""}`}),"Verificar Nuevamente"]}),c.jsx(ne,{onClick:e,variant:"secondary",size:"sm",className:"flex-1",children:"Cerrar"})]})]})]})})})},Ws=({gardenSummary:e,onClearChat:t,onRefresh:r,isRefreshing:n=!1})=>{const a=kt(),[i,o]=y.useState(!1),s=u=>u>=80?"text-green-500":u>=60?"text-green-400":"text-red-500",l=u=>u>=80?"Excelente":u>=60?"Buena":"Necesita atención";return c.jsxs("header",{className:"sticky top-0 z-10 bg-background/80 backdrop-blur-sm border-b border-muted",children:[c.jsxs("div",{className:"flex items-center gap-3 p-4 pt-safe-top",children:[c.jsx("button",{onClick:()=>a(it.toDashboard()),className:"p-2 -ml-2 rounded-full hover:bg-muted transition-colors","aria-label":"Volver al dashboard",children:c.jsx(Gl,{size:20})}),c.jsx("div",{className:"flex-1",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-full",children:c.jsx(Vl,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),c.jsxs("div",{children:[c.jsx("h1",{className:"font-bold text-foreground tracking-[0.2px]",children:"Asistente de Jardín"}),e&&c.jsxs("div",{className:"flex items-center gap-2 text-xs text-neutral-600 dark:text-neutral-400",children:[c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(vh,{size:12}),e.totalPlants," plantas"]}),c.jsx("span",{className:`font-medium ${s(e.averageHealth)} text-xs px-2 py-0.5 rounded-full`,style:{fontSize:"11px",padding:"2px 8px"},children:l(e.averageHealth)}),e.urgentActions>0&&c.jsxs(_.span,{className:"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300 px-2 py-0.5 rounded-full text-xs font-medium",style:{fontSize:"11px",padding:"2px 8px"},initial:{scale:0},animate:{scale:1},transition:{delay:.2},children:[e.urgentActions," acciones"]})]})]})]})}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("button",{onClick:()=>o(!0),className:"p-2 rounded-full hover:bg-muted transition-colors","aria-label":"Diagnóstico del sistema",children:c.jsx(Nh,{size:18})}),r&&c.jsx("button",{onClick:r,disabled:n,className:"p-2 rounded-full hover:bg-muted transition-colors disabled:opacity-50","aria-label":"Actualizar datos del jardín",children:c.jsx(_.div,{animate:n?{rotate:360}:{},transition:n?{duration:1,repeat:1/0,ease:"linear"}:{},children:c.jsx(cn,{size:18})})}),c.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-muted transition-colors","aria-label":"Opciones del chat",children:c.jsx(yh,{size:20})})]})]}),c.jsx(pe,{children:i&&c.jsx(wR,{onClose:()=>o(!1)})})]})},jR=({message:e})=>{const t=e.sender==="user",r=()=>{if(!e.context?.queryType)return c.jsx(ja,{size:16});switch(e.context.queryType){case"health_analysis":return c.jsx(zr,{size:16});case"care_comparison":return c.jsx(Hs,{size:16});case"disease_prevention":return c.jsx(Fx,{size:16});case"growth_tracking":return c.jsx(wh,{size:16});default:return c.jsx(ja,{size:16})}},n=()=>{if(t)return"text-primary-foreground/70";if(!e.context?.queryType)return"text-green-500";switch(e.context.queryType){case"health_analysis":return"text-red-500";case"care_comparison":return"text-blue-500";case"disease_prevention":return"text-orange-500";case"growth_tracking":return"text-purple-500";default:return"text-green-500"}};return c.jsxs(_.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:ce("flex items-end gap-2 max-w-[85%]",t?"justify-end ml-auto":"justify-start"),children:[!t&&c.jsx(_.div,{className:ce("flex h-8 w-8 items-center justify-center rounded-full","bg-gradient-to-br from-green-100 to-green-200 dark:from-green-900/30 dark:to-green-800/30"),initial:{scale:0},animate:{scale:1},transition:{delay:.1},children:c.jsx("div",{className:n(),children:r()})}),c.jsx("div",{className:"flex-1",children:c.jsxs("div",{className:ce("rounded-2xl px-4 py-3 break-words shadow-adaptive",t?"rounded-br-lg bg-primary-700 text-white drop-shadow-sm ml-8":"rounded-bl-lg bg-contrast-surface text-contrast-medium mr-8 border border-contrast","rounded-[12px]"),children:[c.jsx("div",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:e.content}),e.context?.insights&&e.context.insights.length>0&&c.jsxs("div",{className:"mt-3 space-y-2",children:[c.jsx("div",{className:"font-semibold text-xs text-green-700 dark:text-green-300",children:"Recomendaciones y observaciones:"}),c.jsx("ul",{className:"space-y-1",children:e.context.insights.map((a,i)=>c.jsxs("li",{className:"text-xs bg-green-50 dark:bg-green-900/20 rounded-lg p-2 border border-green-200 dark:border-green-800",children:[c.jsxs("div",{className:"font-medium",children:[a.type==="warning"&&"⚠️ ",a.type==="tip"&&"💡 ",a.type==="recommendation"&&"🌱 ",a.type==="observation"&&"🔎 ",a.title]}),c.jsx("div",{children:a.description}),a.affectedPlants&&a.affectedPlants.length>0&&c.jsxs("div",{className:"mt-1 text-[11px] text-green-800 dark:text-green-200",children:["Plantas: ",a.affectedPlants.join(", ")]})]},i))})]}),e.context?.suggestedActions&&e.context.suggestedActions.length>0&&c.jsxs("div",{className:"mt-3 space-y-2",children:[c.jsx("div",{className:"font-semibold text-xs text-blue-700 dark:text-blue-300",children:"Acciones sugeridas:"}),c.jsx("ul",{className:"space-y-1",children:e.context.suggestedActions.map((a,i)=>c.jsxs("li",{className:"text-xs bg-blue-50 dark:bg-blue-900/20 rounded-lg p-2 border border-blue-200 dark:border-blue-800",children:[c.jsx("div",{className:"font-medium",children:a.action}),a.priority&&c.jsxs("div",{className:"text-[11px] text-blue-800 dark:text-blue-200",children:["Prioridad: ",a.priority]}),a.plantIds&&a.plantIds.length>0&&c.jsxs("div",{className:"text-[11px] text-blue-800 dark:text-blue-200",children:["Plantas: ",a.plantIds.join(", ")]})]},i))})]}),!t&&e.context?.plantsAnalyzed&&e.context.plantsAnalyzed.length>0&&c.jsxs(_.div,{className:"mt-2 flex items-center gap-1 text-xs opacity-70",initial:{opacity:0},animate:{opacity:.7},transition:{delay:.5},children:[c.jsx(Hs,{size:12}),c.jsxs("span",{children:["Analizó ",e.context.plantsAnalyzed.length," planta(s)"]})]}),c.jsx("div",{className:ce("mt-2 text-xs",t?"text-primary-foreground/70":"text-muted-foreground/70","text-[#888] text-[12px]"),children:Pp(new Date(e.timestamp),{addSuffix:!0,locale:ix})})]})}),t&&c.jsx(_.div,{className:"flex h-8 w-8 items-center justify-center rounded-full bg-primary/10",initial:{scale:0},animate:{scale:1},transition:{delay:.1},children:c.jsx(Lx,{size:16,className:"text-primary"})})]})},PR=({onSendMessage:e,isTyping:t,suggestedQuestions:r,isLoading:n=!1})=>{const[a,i]=y.useState(""),[o,s]=y.useState(!0),l=y.useRef(null),u=async()=>{if(t)return;const h=l.current?.value.trim();h&&(s(!1),l.current&&(l.current.value=""),await e(h))},d=h=>{h.key==="Enter"&&!h.shiftKey&&(h.preventDefault(),u())},f=async h=>{i(""),s(!1),await e(h)},m=()=>{r.length>0&&!a&&s(!0)};return c.jsx("footer",{className:"sticky bottom-0 z-10 bg-background/80 backdrop-blur-sm border-t border-border",children:c.jsxs("div",{className:"p-4 pb-safe-bottom space-y-3",children:[c.jsx(pe,{children:o&&r.length>0&&!n&&c.jsxs(_.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},className:"space-y-2 mb-4",children:[c.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[c.jsx(at,{size:12}),c.jsx("span",{children:"Preguntas sugeridas"})]}),c.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:r.slice(0,4).map((h,p)=>c.jsx(_.button,{onClick:()=>f(h),disabled:t,className:"px-3 py-1.5 text-xs bg-muted hover:bg-[#F0F0F0] active:bg-[#F0F0F0] rounded-full border border-border/50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-left",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:p*.1},whileHover:{scale:1.02},whileTap:{scale:.98},children:h},h))})]})}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("div",{className:"relative flex-1",children:[c.jsx(To,{type:"text",ref:l,onKeyDown:d,onFocus:m,placeholder:"Pregúntame sobre tu jardín...",className:"pr-12",disabled:t||n}),c.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 text-muted-foreground",children:c.jsx(Ph,{size:16})})]}),c.jsx(ne,{"aria-label":"Enviar mensaje",onClick:u,disabled:!a.trim()||t||n,size:"icon",className:"shrink-0",children:t?c.jsx(_.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:c.jsx(at,{size:20})}):c.jsx(Sh,{size:20})})]}),n&&c.jsxs(_.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center justify-center gap-2 text-xs text-muted-foreground",children:[c.jsx(_.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:c.jsx(at,{size:12})}),c.jsx("span",{children:"Analizando tu jardín..."})]})]})})},SR={plants:c.jsx("svg",{viewBox:"0 0 200 150",className:"w-32 h-24 text-primary-300 dark:text-primary-600",children:c.jsxs(_.g,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},children:[c.jsx(_.path,{d:"M60 120 L140 120 L130 100 L70 100 Z",fill:"currentColor",initial:{scaleY:0},animate:{scaleY:1},transition:{delay:.2,duration:.5}}),c.jsx(_.g,{initial:{scale:0,rotate:-10},animate:{scale:1,rotate:0},transition:{delay:.5,duration:.8,type:"spring"},children:c.jsx("path",{d:"M80 100 Q85 80 90 85 Q95 75 85 70 Q75 75 80 100",fill:"currentColor",opacity:"0.8"})}),c.jsx(_.g,{initial:{scale:0,rotate:10},animate:{scale:1,rotate:0},transition:{delay:.7,duration:.8,type:"spring"},children:c.jsx("path",{d:"M100 100 Q105 85 110 90 Q115 80 105 75 Q95 80 100 100",fill:"currentColor",opacity:"0.7"})}),c.jsx(_.g,{initial:{scale:0,rotate:-5},animate:{scale:1,rotate:0},transition:{delay:.9,duration:.8,type:"spring"},children:c.jsx("path",{d:"M120 100 Q125 90 130 95 Q135 85 125 80 Q115 85 120 100",fill:"currentColor",opacity:"0.6"})})]})}),search:c.jsx("svg",{viewBox:"0 0 200 150",className:"w-32 h-24 text-primary-300 dark:text-primary-600",children:c.jsxs(_.g,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8},children:[c.jsx(_.circle,{cx:"80",cy:"70",r:"25",stroke:"currentColor",strokeWidth:"3",fill:"none",initial:{scale:0},animate:{scale:1},transition:{delay:.3,duration:.5,type:"spring"}}),c.jsx(_.line,{x1:"100",y1:"88",x2:"120",y2:"108",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",initial:{scaleX:0},animate:{scaleX:1},transition:{delay:.6,duration:.4}}),c.jsx(_.circle,{cx:"140",cy:"50",r:"2",fill:"currentColor",initial:{scale:0},animate:{scale:1},transition:{delay:1,duration:.3}}),c.jsx(_.circle,{cx:"150",cy:"40",r:"3",fill:"currentColor",initial:{scale:0},animate:{scale:1},transition:{delay:1.2,duration:.3}})]})}),chat:c.jsx("svg",{viewBox:"0 0 200 150",className:"w-32 h-24 text-primary-300 dark:text-primary-600",children:c.jsxs(_.g,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8},children:[c.jsx(_.rect,{x:"50",y:"40",width:"100",height:"60",rx:"20",fill:"currentColor",opacity:"0.8",initial:{scale:0,y:20},animate:{scale:1,y:0},transition:{delay:.2,duration:.6,type:"spring"}}),c.jsx(_.path,{d:"M80 100 L70 115 L95 105 Z",fill:"currentColor",opacity:"0.8",initial:{scale:0},animate:{scale:1},transition:{delay:.5,duration:.4}}),c.jsxs(_.g,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8,duration:.5},children:[c.jsx("circle",{cx:"75",cy:"70",r:"3",fill:"white"}),c.jsx("circle",{cx:"100",cy:"70",r:"3",fill:"white"}),c.jsx("circle",{cx:"125",cy:"70",r:"3",fill:"white"})]})]})}),camera:c.jsx("svg",{viewBox:"0 0 200 150",className:"w-32 h-24 text-primary-300 dark:text-primary-600",children:c.jsxs(_.g,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8},children:[c.jsx(_.rect,{x:"60",y:"60",width:"80",height:"50",rx:"8",fill:"currentColor",opacity:"0.8",initial:{scale:0},animate:{scale:1},transition:{delay:.2,duration:.5,type:"spring"}}),c.jsx(_.rect,{x:"85",y:"45",width:"30",height:"15",rx:"4",fill:"currentColor",opacity:"0.6",initial:{scaleY:0},animate:{scaleY:1},transition:{delay:.4,duration:.3}}),c.jsx(_.circle,{cx:"100",cy:"85",r:"15",stroke:"white",strokeWidth:"2",fill:"none",initial:{scale:0},animate:{scale:1},transition:{delay:.6,duration:.4,type:"spring"}}),c.jsx(_.circle,{cx:"120",cy:"70",r:"3",fill:"currentColor",opacity:"0.9",initial:{scale:0},animate:{scale:[0,1.2,1]},transition:{delay:.8,duration:.5}})]})}),settings:c.jsx("svg",{viewBox:"0 0 200 150",className:"w-32 h-24 text-primary-300 dark:text-primary-600",children:c.jsxs(_.g,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8},children:[c.jsxs(_.g,{animate:{rotate:360},transition:{duration:20,repeat:1/0,ease:"linear"},style:{originX:"100px",originY:"75px"},children:[c.jsx("path",{d:"M100 50 L110 60 L120 50 L120 60 L130 70 L120 80 L120 90 L110 90 L100 100 L90 90 L80 90 L80 80 L70 70 L80 60 L80 50 Z",fill:"currentColor",opacity:"0.7"}),c.jsx("circle",{cx:"100",cy:"75",r:"8",fill:"white"})]}),c.jsxs(_.g,{animate:{rotate:-360},transition:{duration:15,repeat:1/0,ease:"linear"},style:{originX:"140px",originY:"95px"},children:[c.jsx("path",{d:"M140 85 L145 90 L150 85 L150 90 L155 95 L150 100 L150 105 L145 105 L140 110 L135 105 L130 105 L130 100 L125 95 L130 90 L130 85 Z",fill:"currentColor",opacity:"0.5"}),c.jsx("circle",{cx:"140",cy:"95",r:"5",fill:"white"})]})]})})},NR=({icon:e,title:t,description:r,action:n,illustration:a="plants",className:i})=>c.jsxs(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},className:ce("flex flex-col items-center justify-center text-center py-12 px-6 max-w-md mx-auto",i),children:[c.jsx(_.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2,duration:.5,ease:"easeOut"},className:"mb-6",children:e||SR[a]}),c.jsx(_.h3,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4,duration:.5},className:"text-xl font-semibold text-neutral-900 dark:text-neutral-100 mb-3",children:t}),c.jsx(_.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5,duration:.5},className:"text-neutral-600 dark:text-neutral-400 mb-6 leading-relaxed",children:r}),n&&c.jsx(_.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},children:c.jsx(ne,{onClick:n.onClick,variant:"primary",size:"lg",className:"animate-glow",children:n.label})})]}),_R=()=>{const e=kt(),t=dr(h=>h.plants),{messages:r,isLoading:n,isTyping:a,error:i,gardenSummary:o,suggestedQuestions:s,sendMessage:l,clearMessages:u,retryLastMessage:d,refreshGardenData:f}=yR(),m=y.useRef(null);return y.useEffect(()=>{m.current?.scrollIntoView({behavior:"smooth"})},[r,a]),i&&!o?c.jsxs("div",{className:"flex flex-col h-screen bg-background text-foreground",children:[c.jsx(Ws,{gardenSummary:o}),c.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:c.jsxs(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center max-w-md",children:[c.jsx(Wt,{className:"w-16 h-16 text-destructive mx-auto mb-4"}),c.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Error de conexión"}),c.jsx("p",{className:"text-muted-foreground mb-4",children:i}),c.jsxs(ne,{onClick:f,variant:"primary",children:[c.jsx(cn,{className:"w-4 h-4 mr-2"}),"Reintentar"]})]})})]}):o?.totalPlants===0?c.jsxs("div",{className:"flex flex-col h-screen bg-background text-foreground",children:[c.jsx(Ws,{gardenSummary:o}),c.jsx("div",{className:"flex-1 flex items-center justify-center",children:c.jsx(NR,{illustration:"plants",title:"Tu jardín está vacío",description:"Agrega algunas plantas a tu jardín para poder chatear conmigo sobre su cuidado y salud.",action:{label:"Agregar mi primera planta",onClick:()=>e(it.toCamera())}})})]}):c.jsxs("div",{className:"flex flex-col h-screen bg-background text-foreground",children:[c.jsx(Ws,{gardenSummary:o,onClearChat:u,onRefresh:f,isRefreshing:n&&r.length>0}),r.length===0&&t.length>0&&c.jsxs("div",{className:"p-4 border-b border-neutral-200 dark:border-neutral-700",children:[c.jsx("h3",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-3",children:"Chats individuales con tus plantas:"}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.slice(0,4).map(h=>c.jsx(_t,{variant:"glass",size:"sm",interactive:!0,className:"cursor-pointer hover:border-primary-300 dark:hover:border-primary-600",onClick:()=>e(it.toPlantChat(h.id)),children:c.jsx(hr,{className:"p-3",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("div",{className:"w-8 h-8 rounded-lg bg-primary-100 dark:bg-primary-900 flex items-center justify-center",children:c.jsx(Vl,{className:"w-4 h-4 text-primary-600 dark:text-primary-400"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"text-sm font-medium truncate",children:h.nickname||h.name}),c.jsx("p",{className:"text-xs text-neutral-500 truncate",children:h.species})]}),c.jsx(jh,{className:"w-4 h-4 text-neutral-400"})]})})},h.id)),t.length>4&&c.jsx(_t,{variant:"outline",size:"sm",interactive:!0,className:"cursor-pointer",onClick:()=>e(it.toDashboard()),children:c.jsx(hr,{className:"p-3 flex items-center justify-center",children:c.jsxs("span",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:["+",t.length-4," más"]})})})]})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto",style:{paddingBottom:"calc(88px + env(safe-area-inset-bottom))"},children:[c.jsxs("div",{className:"p-4 space-y-4 max-w-4xl mx-auto",children:[c.jsx(pe,{children:r.map(h=>c.jsx(jR,{message:h},h.id))}),a&&c.jsx(_.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:c.jsx(ox,{})}),i&&r.length>0&&c.jsx(_.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex items-center justify-center",children:c.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3 max-w-sm",children:[c.jsxs("div",{className:"flex items-center gap-2 text-red-700 dark:text-red-300 text-sm",children:[c.jsx(Wt,{size:16}),c.jsx("span",{children:i})]}),c.jsxs(ne,{onClick:d,size:"sm",variant:"outline",className:"mt-2 w-full",children:[c.jsx(cn,{size:14,className:"mr-1"}),"Reintentar"]})]})}),c.jsx("div",{ref:m})]}),!1]}),c.jsx(PR,{onSendMessage:l,isTyping:a,suggestedQuestions:s,isLoading:n})]})},kR=y.lazy(()=>Hl(()=>import("./Settings-CxTUh2MP.js"),__vite__mapDeps([0,1,2,3,4,5]))),ER=y.lazy(()=>Hl(()=>import("./Auth-BKhpep5C.js"),__vite__mapDeps([6,1,2,4,5,3]))),AR=new uh({defaultOptions:{queries:{staleTime:Cr.QUERY.STALE_TIME.MEDIUM,gcTime:Cr.QUERY.GC_TIME.MEDIUM,refetchOnWindowFocus:!1,refetchOnReconnect:!1,retry:Cr.QUERY.RETRY.COUNT,retryDelay:e=>Math.min(Cr.QUERY.RETRY.DELAY*2**e,3e4)},mutations:{retry:Cr.QUERY.RETRY.COUNT,retryDelay:Cr.QUERY.RETRY.DELAY}}}),lh=({message:e})=>c.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-background text-foreground",children:[c.jsx(wo,{className:"w-12 h-12 text-green-500 animate-bounce mb-4"}),c.jsx("p",{className:"text-lg text-muted-foreground",children:e})]}),CR=()=>{const{session:e,isInitialized:t,initialize:r}=yr();if(zP(),y.useEffect(()=>{r()},[r]),!t)return c.jsx(lh,{message:"Inicializando..."});const n=()=>c.jsx(Ku,{children:c.jsxs(Zt,{path:"/",element:c.jsx(qS,{}),children:[c.jsx(Zt,{index:!0,element:c.jsx(tN,{})}),c.jsx(Zt,{path:"camera",element:c.jsx(O5,{})}),c.jsx(Zt,{path:"settings",element:c.jsx(kR,{})}),c.jsx(Zt,{path:"garden-chat",element:c.jsx(_R,{})}),c.jsx(Zt,{path:"plant/:plantId",element:c.jsx(_5,{})}),c.jsx(Zt,{path:"plant/:plantId/chat",element:c.jsx(gR,{})}),c.jsx(Zt,{path:"*",element:c.jsx(vs,{to:Le.dashboard,replace:!0})})]})});return c.jsx(dh,{client:AR,children:c.jsx(MP,{children:c.jsx(ZS,{children:c.jsxs(jx,{basename:"/plantitas-app/",future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:[c.jsx(OP,{position:"top-center",richColors:!0}),c.jsx(y.Suspense,{fallback:c.jsx(lh,{message:"Cargando..."}),children:c.jsxs(Ku,{children:[c.jsx(Zt,{path:Le.auth,element:e?c.jsx(vs,{to:Le.dashboard,replace:!0}):c.jsx(ER,{})}),c.jsx(Zt,{path:"/*",element:e?c.jsx(n,{}):c.jsx(vs,{to:Le.auth,replace:!0})})]})})]})})})})},OR=y.createContext(void 0),TR=({children:e,defaultTheme:t="system",storageKey:r="vite-ui-theme"})=>{const[n,a]=y.useState(()=>localStorage.getItem(r)||t),i=y.useMemo(()=>n==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":n,[n]);y.useEffect(()=>{const s=window.document.documentElement;s.classList.remove("light","dark"),s.classList.add(i),localStorage.setItem(r,n)},[i,n,r]);const o={theme:n,setTheme:a,resolvedTheme:i};return c.jsx(OR.Provider,{value:o,children:e})},sx=new uh;function IR(){const{user:e}=yr();return I.useEffect(()=>{e?.id&&sx.prefetchQuery({queryKey:["plants",e.id],queryFn:()=>An.getUserPlantSummaries(e.id),staleTime:1e3*60*5})},[e?.id]),null}qs.createRoot(document.getElementById("root")).render(c.jsx(I.StrictMode,{children:c.jsx(TR,{children:c.jsxs(dh,{client:sx,children:[c.jsx(IR,{}),c.jsx(CR,{})]})})}));export{yr as a,ce as c,HS as u};
