import{j as e}from"./query-D9cK7eLy.js";import{r as s,b as q}from"./vendor-ohv-86MT.js";import{a as A}from"./index-BLobeCTH.js";import{af as D,E as N,l as P,ag as S,a8 as R,m as n,L as V,c as B,A as O,a as T}from"./ui-BaGPRaSD.js";import"./supabase-ChG5PfJU.js";import"./router-Lz5I7iQY.js";const E=q.memo(({type:t,value:j,onChange:r,placeholder:h,icon:c,required:b=!1,autoComplete:u,rightIcon:m,onRightIconClick:g,label:f,id:i,disabled:x=!1})=>{const d=s.useCallback(w=>{r(w.target.value)},[r]);return e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:i,className:"block text-sm font-medium text-stone-700 dark:text-stone-300",children:f}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-stone-400 pointer-events-none",children:c}),e.jsx("input",{id:i,type:t,value:j,onChange:d,disabled:x,className:`
            w-full pl-10 pr-4 py-3.5 
            bg-white dark:bg-stone-800 
            border border-stone-200 dark:border-stone-700 
            rounded-xl 
            text-stone-900 dark:text-stone-100 
            placeholder-stone-500 dark:placeholder-stone-400
            focus:ring-2 focus:ring-nature-500 focus:border-transparent
            disabled:opacity-50 disabled:cursor-not-allowed
            transition-all duration-200
            text-base
            touch-target
          `,placeholder:h,autoComplete:u,required:b,minLength:t==="password"?6:void 0}),m&&e.jsx("button",{type:"button",onClick:g,disabled:x,className:"absolute right-3 top-1/2 -translate-y-1/2 text-stone-400 hover:text-stone-600 dark:hover:text-stone-300 transition-colors touch-target disabled:opacity-50","aria-label":t==="password"?t==="password"?"Mostrar contrase√±a":"Ocultar contrase√±a":void 0,children:m})]})]})});E.displayName="InputField";const Q=()=>{const[t,j]=s.useState("login"),[r,h]=s.useState({email:"",password:"",confirmPassword:"",fullName:""}),[c,b]=s.useState(!1),[u,m]=s.useState(!1),{signIn:g,signUp:f,isLoading:i,error:x,clearError:d,isDevelopmentMode:w}=A(),p=s.useCallback(a=>o=>{h(l=>({...l,[a]:o}))},[]),I=s.useCallback(a=>{j(a),d(),h({email:r.email,password:"",confirmPassword:"",fullName:""}),b(!1),m(!1)},[d,r.email]),k=s.useCallback(()=>{b(a=>!a)},[]),v=s.useCallback(()=>{m(a=>!a)},[]),M=s.useCallback(async a=>{a.preventDefault(),d();const{email:o,password:l,confirmPassword:y,fullName:F}=r;if(t==="login")try{await g({email:o,password:l})}catch{console.log("Login error handled by store")}else{if(l!==y)return;try{await f({email:o,password:l,confirmPassword:y,fullName:F})}catch{console.log("Signup error handled by store")}}},[t,r,g,f,d]);s.useEffect(()=>()=>{d()},[]);const C=s.useMemo(()=>{const{email:a,password:o,confirmPassword:l,fullName:y}=r;return t==="login"?a.length>0&&o.length>=6:a.length>0&&o.length>=6&&l.length>=6&&o===l&&y.length>0},[t,r]),z=s.useMemo(()=>{const a=[{id:"email",type:"email",value:r.email,onChange:p("email"),placeholder:"tu@email.com",icon:e.jsx(D,{size:20}),label:"Correo electr√≥nico",autoComplete:"email",required:!0},{id:"password",type:c?"text":"password",value:r.password,onChange:p("password"),placeholder:"Tu contrase√±a",icon:e.jsx(S,{size:20}),label:"Contrase√±a",autoComplete:t==="login"?"current-password":"new-password",required:!0,rightIcon:c?e.jsx(N,{size:20}):e.jsx(P,{size:20}),onRightIconClick:k}];return t==="signup"&&(a.unshift({id:"fullName",type:"text",value:r.fullName,onChange:p("fullName"),placeholder:"Tu nombre completo",icon:e.jsx(R,{size:20}),label:"Nombre completo",autoComplete:"name",required:!0}),a.push({id:"confirmPassword",type:u?"text":"password",value:r.confirmPassword,onChange:p("confirmPassword"),placeholder:"Confirma tu contrase√±a",icon:e.jsx(S,{size:20}),label:"Confirmar contrase√±a",autoComplete:"new-password",required:!0,rightIcon:u?e.jsx(N,{size:20}):e.jsx(P,{size:20}),onRightIconClick:v})),a},[t,r,c,u,p,k,v]);return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-nature-50 via-stone-50 to-nature-100 dark:from-stone-950 dark:via-stone-900 dark:to-stone-950 flex items-center justify-center p-4 container-adaptive",children:e.jsxs(n.div,{initial:{opacity:0,y:20,scale:.98},animate:{opacity:1,y:0,scale:1},transition:{duration:.4,ease:[.16,1,.3,1]},className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx(n.div,{initial:{scale:.9,rotate:-5},animate:{scale:1,rotate:0},transition:{duration:.5,ease:[.16,1,.3,1],delay:.1},className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-nature-500 to-nature-600 rounded-2xl mb-6 shadow-lg shadow-nature-200/50 dark:shadow-nature-900/30",children:e.jsx(V,{className:"w-8 h-8 text-white"})}),e.jsx(n.h1,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2,duration:.4},className:"text-3xl font-bold bg-gradient-to-r from-nature-600 to-nature-700 bg-clip-text text-transparent mb-2",children:"Plantitas"}),e.jsx(n.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3,duration:.4},className:"text-stone-600 dark:text-stone-400",children:t==="login"?"Bienvenido de vuelta a tu jard√≠n":"√önete a la comunidad de plantas"}),w&&e.jsxs(n.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.4,duration:.3},className:"mt-4 inline-flex items-center gap-2 px-3 py-2 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg text-sm text-blue-700 dark:text-blue-300",children:[e.jsx(B,{className:"w-4 h-4"}),"Modo demo activo"]})]}),e.jsxs(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.4},className:"bg-white/90 dark:bg-stone-900/90 backdrop-blur-xl rounded-3xl p-8 shadow-2xl border border-stone-200/50 dark:border-stone-700/50",children:[e.jsx("div",{className:"flex bg-stone-100 dark:bg-stone-800 rounded-2xl p-1 mb-8",children:["login","signup"].map(a=>e.jsx("button",{onClick:()=>I(a),disabled:i,className:`
                  flex-1 py-3 px-4 rounded-xl font-medium transition-all duration-200 touch-target
                  ${t===a?"bg-white dark:bg-stone-700 text-nature-600 dark:text-nature-400 shadow-sm":"text-stone-600 dark:text-stone-400 hover:text-nature-600 dark:hover:text-nature-400"}
                  disabled:opacity-50 disabled:cursor-not-allowed
                `,children:a==="login"?"Iniciar Sesi√≥n":"Crear Cuenta"},a))}),e.jsx(O,{children:x&&e.jsxs(n.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2},className:"mb-6 p-4 bg-error-50 dark:bg-error-900/20 border border-error-200 dark:border-error-700 rounded-xl flex items-start gap-3",children:[e.jsx(T,{className:"w-5 h-5 text-error-600 dark:text-error-400 flex-shrink-0 mt-0.5"}),e.jsx("span",{className:"text-sm text-error-700 dark:text-error-300",children:x})]})}),e.jsxs("form",{onSubmit:M,className:"space-y-6",children:[z.map((a,o)=>e.jsx(n.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*o,duration:.3},children:e.jsx(E,{...a,disabled:i})},a.id)),w&&t==="login"&&e.jsxs(n.div,{initial:{opacity:0},animate:{opacity:1},className:"p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-800 dark:text-blue-300 mb-2",children:"üß™ Modo Demo - C√≥mo probar:"}),e.jsxs("ul",{className:"text-xs text-blue-700 dark:text-blue-400 space-y-1",children:[e.jsx("li",{children:"‚Ä¢ Email: cualquier email v√°lido"}),e.jsx("li",{children:"‚Ä¢ Contrase√±a: m√≠nimo 6 caracteres"}),e.jsx("li",{children:"‚Ä¢ Ejemplo: demo@plantitas.app / 123456"})]})]}),e.jsx(n.button,{type:"submit",disabled:!C||i,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4,duration:.3},className:`
                w-full py-4 px-6 rounded-xl font-semibold text-base transition-all duration-200 touch-target
                ${C&&!i?"bg-gradient-to-r from-nature-500 to-nature-600 hover:from-nature-600 hover:to-nature-700 text-white shadow-lg shadow-nature-200/50 dark:shadow-nature-900/30 hover:shadow-xl hover:shadow-nature-300/50 dark:hover:shadow-nature-800/40":"bg-stone-200 dark:bg-stone-700 text-stone-500 dark:text-stone-400 cursor-not-allowed"}
                disabled:opacity-50 disabled:cursor-not-allowed
                focus:ring-2 focus:ring-nature-500 focus:ring-offset-2 focus:ring-offset-white dark:focus:ring-offset-stone-900
              `,children:i?e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/20 border-t-white rounded-full animate-spin"}),t==="login"?"Iniciando sesi√≥n...":"Creando cuenta..."]}):t==="login"?"Iniciar Sesi√≥n":"Crear Cuenta"})]})]})]})})};export{Q as default};
