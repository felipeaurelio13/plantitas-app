const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/Settings-BT78ku2m.js","assets/js/query-B3NoLO9S.js","assets/js/vendor-C9vVoIyg.js","assets/js/router-BTofFa1L.js","assets/js/ui-DujOv7i0.js","assets/js/supabase-B6w-t4oo.js","assets/js/Auth-u_jH_Ov6.js"])))=>i.map(i=>d[i]);
var qe=Object.defineProperty;var Ve=(e,t,n)=>t in e?qe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var fe=(e,t,n)=>Ve(e,typeof t!="symbol"?t+"":t,n);import{j as jsxRuntimeExports,u as useQueryClient,a as useMutation,b as useQuery,Q as QueryClient,c as QueryClientProvider}from"./query-B3NoLO9S.js";import{a as reactDomExports,b as React$3,d as ReactDOM,r as reactExports,e as getDefaultExportFromCjs}from"./vendor-C9vVoIyg.js";import{c as createClient,_ as __vitePreload}from"./supabase-B6w-t4oo.js";import{u as useNavigate,a as useLocation,L as Link,O as Outlet,b as useParams,B as BrowserRouter,R as Routes,c as Route,N as Navigate}from"./router-BTofFa1L.js";import{A as AnimatePresence,R as RotateCw,L as Leaf,C as Camera,B as Brain,I as Info,a as CircleAlert,b as CircleX,c as CircleCheckBig,m as motion,X,T as TriangleAlert,d as LoaderCircle,P as Plus,e as Image$1,H as House,f as Bot,S as Settings$1,W as WifiOff,g as Wifi,h as RefreshCw,i as Sparkles,j as Sun,k as Heart,D as Droplets,E as EyeOff,l as Eye,M as MessageCircle,n as Trash2,o as Save,p as Search,q as Download,U as Upload,r as CircleHelp,s as ExternalLink,t as ChevronLeft,u as ChevronRight,v as ArrowRight,w as Wind,x as Calendar,y as Activity,z as useScroll,F as useTransform,G as ArrowLeft,J as EllipsisVertical,K as MapPin,N as TreePine,O as Moon,Q as Thermometer,V as Sprout,Y as Lightbulb,Z as ShieldCheck,_ as BarChart3,$ as TrendingUp,a0 as HeartPulse,a1 as Flower,a2 as ChevronDown,a3 as Slash,a4 as RotateCcw,a5 as CornerDownLeft,a6 as Send,a7 as Wrench,a8 as User,a9 as Target}from"./ui-DujOv7i0.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var client={},m=reactDomExports;client.createRoot=m.createRoot,client.hydrateRoot=m.hydrateRoot;const createStoreImpl=e=>{let t;const n=new Set,a=(u,d)=>{const p=typeof u=="function"?u(t):u;if(!Object.is(p,t)){const f=t;t=(d!=null?d:typeof p!="object"||p===null)?p:Object.assign({},t,p),n.forEach(h=>h(t,f))}},i=()=>t,l={setState:a,getState:i,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u))},c=t=e(a,i,l);return l},createStore$1=e=>e?createStoreImpl(e):createStoreImpl,identity$5=e=>e;function useStore(e,t=identity$5){const n=React$3.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return React$3.useDebugValue(n),n}const createImpl=e=>{const t=createStore$1(e),n=a=>useStore(t,a);return Object.assign(n,t),n},create=e=>e?createImpl(e):createImpl,supabaseUrl=void 0,supabaseAnonKey=void 0;throw new Error("Missing Supabase environment variables");const supabase=createClient(supabaseUrl,supabaseAnonKey,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"},global:{headers:{"X-Client-Info":"plantitas-app"}},realtime:{timeout:1e4}}),supabase$1=Object.freeze(Object.defineProperty({__proto__:null,supabase,supabaseUrl},Symbol.toStringTag,{value:"Module"}));class GardenCacheService{constructor(){fe(this,"cache",new Map);fe(this,"CACHE_DURATIONS",{GARDEN_CONTEXT:5*60*1e3,GARDEN_SUMMARY:3*60*1e3,SUGGESTED_QUESTIONS:10*60*1e3,PLANT_DATA:2*60*1e3})}getCacheKey(t,n){return`${t}:${n}`}isValidCache(t){return t?Date.now()<t.expiresAt:!1}getCachedData(t){const n=this.cache.get(t);return this.isValidCache(n)?n.data:(n&&this.cache.delete(t),null)}setCachedData(t,n,a){const i={data:n,timestamp:Date.now(),expiresAt:Date.now()+a};this.cache.set(t,i),console.log(`[GardenCache] Cache SET for key: ${t}, expires in ${a/1e3}s`)}getGardenContext(t){const n=this.getCacheKey(t,"garden_context");return this.getCachedData(n)}setGardenContext(t,n){const a=this.getCacheKey(t,"garden_context");this.setCachedData(a,n,this.CACHE_DURATIONS.GARDEN_CONTEXT)}getGardenSummary(t){const n=this.getCacheKey(t,"garden_summary");return this.getCachedData(n)}setGardenSummary(t,n){const a=this.getCacheKey(t,"garden_summary");this.setCachedData(a,n,this.CACHE_DURATIONS.GARDEN_SUMMARY)}getSuggestedQuestions(t){const n=this.getCacheKey(t,"suggested_questions");return this.getCachedData(n)}setSuggestedQuestions(t,n){const a=this.getCacheKey(t,"suggested_questions");this.setCachedData(a,n,this.CACHE_DURATIONS.SUGGESTED_QUESTIONS)}getPlantData(t){const n=this.getCacheKey(t,"plant_data");return this.getCachedData(n)}setPlantData(t,n){const a=this.getCacheKey(t,"plant_data");this.setCachedData(a,n,this.CACHE_DURATIONS.PLANT_DATA)}invalidateCache(t,n){n?n.forEach(a=>{const i=this.getCacheKey(t,a);this.cache.delete(i),console.log(`[GardenCache] Invalidated cache for key: ${i}`)}):Array.from(this.cache.keys()).filter(i=>i.startsWith(`${t}:`)).forEach(i=>{this.cache.delete(i),console.log(`[GardenCache] Invalidated cache for key: ${i}`)})}invalidateOnPlantChange(t){console.log("[GardenCache] Plant data changed, invalidating related caches"),this.invalidateCache(t,["garden_context","garden_summary","plant_data","suggested_questions"])}getCacheStats(t){const n=Array.from(this.cache.keys()),a=n.filter(s=>s.startsWith(`${t}:`));let i=0,o=0;return a.forEach(s=>{const l=this.cache.get(s);l&&(this.isValidCache(l)?i++:o++)}),{totalEntries:n.length,userEntries:a.length,validEntries:i,expiredEntries:o}}cleanup(){const t=Date.now(),n=[];this.cache.forEach((a,i)=>{t>=a.expiresAt&&n.push(i)}),n.forEach(a=>{this.cache.delete(a)}),n.length>0&&console.log(`[GardenCache] Cleaned up ${n.length} expired entries`)}clearAll(){this.cache.size,this.cache.clear()}}const gardenCacheService=new GardenCacheService;typeof window!="undefined"&&setInterval(()=>{gardenCacheService.cleanup()},5*60*1e3);function $constructor(e,t,n){var l;function a(c,u){var p,f;var d;Object.defineProperty(c,"_zod",{value:(p=c._zod)!=null?p:{},enumerable:!1}),(f=(d=c._zod).traits)!=null||(d.traits=new Set),c._zod.traits.add(e),t(c,u);for(const h in s.prototype)h in c||Object.defineProperty(c,h,{value:s.prototype[h].bind(c)});c._zod.constr=s,c._zod.def=u}const i=(l=n==null?void 0:n.Parent)!=null?l:Object;class o extends i{}Object.defineProperty(o,"name",{value:e});function s(c){var p;var u;const d=n!=null&&n.Parent?new o:this;a(d,c),(p=(u=d._zod).deferred)!=null||(u.deferred=[]);for(const f of d._zod.deferred)f();return d}return Object.defineProperty(s,"init",{value:a}),Object.defineProperty(s,Symbol.hasInstance,{value:c=>{var u,d;return n!=null&&n.Parent&&c instanceof n.Parent?!0:(d=(u=c==null?void 0:c._zod)==null?void 0:u.traits)==null?void 0:d.has(e)}}),Object.defineProperty(s,"name",{value:e}),s}class $ZodAsyncError extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const globalConfig={};function config$1(e){return globalConfig}function getEnumValues(e){const t=Object.values(e).filter(a=>typeof a=="number");return Object.entries(e).filter(([a,i])=>t.indexOf(+a)===-1).map(([a,i])=>i)}function jsonStringifyReplacer(e,t){return typeof t=="bigint"?t.toString():t}function cached(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function nullish(e){return e==null}function cleanRegex(e){const t=e.startsWith("^")?1:0,n=e.endsWith("$")?e.length-1:e.length;return e.slice(t,n)}function floatSafeRemainder(e,t){const n=(e.toString().split(".")[1]||"").length,a=(t.toString().split(".")[1]||"").length,i=n>a?n:a,o=Number.parseInt(e.toFixed(i).replace(".","")),s=Number.parseInt(t.toFixed(i).replace(".",""));return o%s/10**i}function defineLazy(e,t,n){Object.defineProperty(e,t,{get(){{const a=n();return e[t]=a,a}},set(a){Object.defineProperty(e,t,{value:a})},configurable:!0})}function assignProp(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}function esc(e){return JSON.stringify(e)}const captureStackTrace=Error.captureStackTrace?Error.captureStackTrace:(...e)=>{};function isObject$1(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const allowsEval=cached(()=>{var e;if(typeof navigator!="undefined"&&((e=navigator==null?void 0:navigator.userAgent)!=null&&e.includes("Cloudflare")))return!1;try{const t=Function;return new t(""),!0}catch(t){return!1}});function isPlainObject$3(e){if(isObject$1(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(isObject$1(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}const propertyKeyTypes=new Set(["string","number","symbol"]);function escapeRegex(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function clone$1(e,t,n){const a=new e._zod.constr(t!=null?t:e._zod.def);return(!t||n!=null&&n.parent)&&(a._zod.parent=e),a}function normalizeParams(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if((t==null?void 0:t.message)!==void 0){if((t==null?void 0:t.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function optionalKeys(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const NUMBER_FORMAT_RANGES={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function pick(e,t){const n={},a=e._zod.def;for(const i in t){if(!(i in a.shape))throw new Error(`Unrecognized key: "${i}"`);t[i]&&(n[i]=a.shape[i])}return clone$1(e,{...e._zod.def,shape:n,checks:[]})}function omit(e,t){const n={...e._zod.def.shape},a=e._zod.def;for(const i in t){if(!(i in a.shape))throw new Error(`Unrecognized key: "${i}"`);t[i]&&delete n[i]}return clone$1(e,{...e._zod.def,shape:n,checks:[]})}function extend$1(e,t){if(!isPlainObject$3(t))throw new Error("Invalid input to extend: expected a plain object");const n={...e._zod.def,get shape(){const a={...e._zod.def.shape,...t};return assignProp(this,"shape",a),a},checks:[]};return clone$1(e,n)}function merge(e,t){return clone$1(e,{...e._zod.def,get shape(){const n={...e._zod.def.shape,...t._zod.def.shape};return assignProp(this,"shape",n),n},catchall:t._zod.def.catchall,checks:[]})}function partial(e,t,n){const a=t._zod.def.shape,i={...a};if(n)for(const o in n){if(!(o in a))throw new Error(`Unrecognized key: "${o}"`);n[o]&&(i[o]=e?new e({type:"optional",innerType:a[o]}):a[o])}else for(const o in a)i[o]=e?new e({type:"optional",innerType:a[o]}):a[o];return clone$1(t,{...t._zod.def,shape:i,checks:[]})}function required(e,t,n){const a=t._zod.def.shape,i={...a};if(n)for(const o in n){if(!(o in i))throw new Error(`Unrecognized key: "${o}"`);n[o]&&(i[o]=new e({type:"nonoptional",innerType:a[o]}))}else for(const o in a)i[o]=new e({type:"nonoptional",innerType:a[o]});return clone$1(t,{...t._zod.def,shape:i,checks:[]})}function aborted(e,t=0){var n;for(let a=t;a<e.issues.length;a++)if(((n=e.issues[a])==null?void 0:n.continue)!==!0)return!0;return!1}function prefixIssues(e,t){return t.map(n=>{var i;var a;return(i=(a=n).path)!=null||(a.path=[]),n.path.unshift(e),n})}function unwrapMessage(e){return typeof e=="string"?e:e==null?void 0:e.message}function finalizeIssue(e,t,n){var i,o,s,l,c,u,d,p,f,h,v;const a={...e,path:(i=e.path)!=null?i:[]};if(!e.message){const b=(v=(h=(p=(u=unwrapMessage((l=(s=(o=e.inst)==null?void 0:o._zod.def)==null?void 0:s.error)==null?void 0:l.call(s,e)))!=null?u:unwrapMessage((c=t==null?void 0:t.error)==null?void 0:c.call(t,e)))!=null?p:unwrapMessage((d=n.customError)==null?void 0:d.call(n,e)))!=null?h:unwrapMessage((f=n.localeError)==null?void 0:f.call(n,e)))!=null?v:"Invalid input";a.message=b}return delete a.inst,delete a.continue,t!=null&&t.reportInput||delete a.input,a}function getLengthableOrigin(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function issue(...e){const[t,n,a]=e;return typeof t=="string"?{message:t,code:"custom",input:n,inst:a}:{...t}}const initializer$1=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),Object.defineProperty(e,"message",{get(){return JSON.stringify(t,jsonStringifyReplacer,2)},enumerable:!0}),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},$ZodError=$constructor("$ZodError",initializer$1),$ZodRealError=$constructor("$ZodError",initializer$1,{Parent:Error});function flattenError(e,t=n=>n.message){const n={},a=[];for(const i of e.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(t(i))):a.push(t(i));return{formErrors:a,fieldErrors:n}}function formatError(e,t){const n=t||function(o){return o.message},a={_errors:[]},i=o=>{for(const s of o.issues)if(s.code==="invalid_union"&&s.errors.length)s.errors.map(l=>i({issues:l}));else if(s.code==="invalid_key")i({issues:s.issues});else if(s.code==="invalid_element")i({issues:s.issues});else if(s.path.length===0)a._errors.push(n(s));else{let l=a,c=0;for(;c<s.path.length;){const u=s.path[c];c===s.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(n(s))):l[u]=l[u]||{_errors:[]},l=l[u],c++}}};return i(e),a}const _parse=e=>(t,n,a,i)=>{var l;const o=a?Object.assign(a,{async:!1}):{async:!1},s=t._zod.run({value:n,issues:[]},o);if(s instanceof Promise)throw new $ZodAsyncError;if(s.issues.length){const c=new((l=i==null?void 0:i.Err)!=null?l:e)(s.issues.map(u=>finalizeIssue(u,o,config$1())));throw captureStackTrace(c,i==null?void 0:i.callee),c}return s.value},_parseAsync=e=>async(t,n,a,i)=>{var l;const o=a?Object.assign(a,{async:!0}):{async:!0};let s=t._zod.run({value:n,issues:[]},o);if(s instanceof Promise&&(s=await s),s.issues.length){const c=new((l=i==null?void 0:i.Err)!=null?l:e)(s.issues.map(u=>finalizeIssue(u,o,config$1())));throw captureStackTrace(c,i==null?void 0:i.callee),c}return s.value},_safeParse=e=>(t,n,a)=>{const i=a?{...a,async:!1}:{async:!1},o=t._zod.run({value:n,issues:[]},i);if(o instanceof Promise)throw new $ZodAsyncError;return o.issues.length?{success:!1,error:new(e!=null?e:$ZodError)(o.issues.map(s=>finalizeIssue(s,i,config$1())))}:{success:!0,data:o.value}},safeParse$1=_safeParse($ZodRealError),_safeParseAsync=e=>async(t,n,a)=>{const i=a?Object.assign(a,{async:!0}):{async:!0};let o=t._zod.run({value:n,issues:[]},i);return o instanceof Promise&&(o=await o),o.issues.length?{success:!1,error:new e(o.issues.map(s=>finalizeIssue(s,i,config$1())))}:{success:!0,data:o.value}},safeParseAsync$1=_safeParseAsync($ZodRealError),cuid=/^[cC][^\s-]{8,}$/,cuid2=/^[0-9a-z]+$/,ulid=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,xid=/^[0-9a-vA-V]{20}$/,ksuid=/^[A-Za-z0-9]{27}$/,nanoid$1=/^[a-zA-Z0-9_-]{21}$/,duration$1=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,guid=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,uuid=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,email=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,_emoji$1="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function emoji(){return new RegExp(_emoji$1,"u")}const ipv4=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv6=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,cidrv4=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,cidrv6=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,base64url=/^[A-Za-z0-9_-]*$/,hostname=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/,e164=/^\+(?:[0-9]){6,14}[0-9]$/,dateSource="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",date$4=new RegExp(`^${dateSource}$`);function timeSource(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function time$2(e){return new RegExp(`^${timeSource(e)}$`)}function datetime$1(e){const t=timeSource({precision:e.precision}),n=["Z"];e.local&&n.push(""),e.offset&&n.push("([+-]\\d{2}:\\d{2})");const a=`${t}(?:${n.join("|")})`;return new RegExp(`^${dateSource}T(?:${a})$`)}const string$2=e=>{var n,a;const t=e?`[\\s\\S]{${(n=e==null?void 0:e.minimum)!=null?n:0},${(a=e==null?void 0:e.maximum)!=null?a:""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},integer=/^\d+$/,number$5=/^-?\d+(?:\.\d+)?/i,boolean$1=/true|false/i,lowercase=/^[^A-Z]*$/,uppercase=/^[^a-z]*$/,$ZodCheck=$constructor("$ZodCheck",(e,t)=>{var a,i;var n;(a=e._zod)!=null||(e._zod={}),e._zod.def=t,(i=(n=e._zod).onattach)!=null||(n.onattach=[])}),numericOriginMap={number:"number",bigint:"bigint",object:"date"},$ZodCheckLessThan=$constructor("$ZodCheckLessThan",(e,t)=>{$ZodCheck.init(e,t);const n=numericOriginMap[typeof t.value];e._zod.onattach.push(a=>{var s;const i=a._zod.bag,o=(s=t.inclusive?i.maximum:i.exclusiveMaximum)!=null?s:Number.POSITIVE_INFINITY;t.value<o&&(t.inclusive?i.maximum=t.value:i.exclusiveMaximum=t.value)}),e._zod.check=a=>{(t.inclusive?a.value<=t.value:a.value<t.value)||a.issues.push({origin:n,code:"too_big",maximum:t.value,input:a.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),$ZodCheckGreaterThan=$constructor("$ZodCheckGreaterThan",(e,t)=>{$ZodCheck.init(e,t);const n=numericOriginMap[typeof t.value];e._zod.onattach.push(a=>{var s;const i=a._zod.bag,o=(s=t.inclusive?i.minimum:i.exclusiveMinimum)!=null?s:Number.NEGATIVE_INFINITY;t.value>o&&(t.inclusive?i.minimum=t.value:i.exclusiveMinimum=t.value)}),e._zod.check=a=>{(t.inclusive?a.value>=t.value:a.value>t.value)||a.issues.push({origin:n,code:"too_small",minimum:t.value,input:a.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),$ZodCheckMultipleOf=$constructor("$ZodCheckMultipleOf",(e,t)=>{$ZodCheck.init(e,t),e._zod.onattach.push(n=>{var i;var a;(i=(a=n._zod.bag).multipleOf)!=null||(a.multipleOf=t.value)}),e._zod.check=n=>{if(typeof n.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%t.value===BigInt(0):floatSafeRemainder(n.value,t.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:t.value,input:n.value,inst:e,continue:!t.abort})}}),$ZodCheckNumberFormat=$constructor("$ZodCheckNumberFormat",(e,t)=>{var s;$ZodCheck.init(e,t),t.format=t.format||"float64";const n=(s=t.format)==null?void 0:s.includes("int"),a=n?"int":"number",[i,o]=NUMBER_FORMAT_RANGES[t.format];e._zod.onattach.push(l=>{const c=l._zod.bag;c.format=t.format,c.minimum=i,c.maximum=o,n&&(c.pattern=integer)}),e._zod.check=l=>{const c=l.value;if(n){if(!Number.isInteger(c)){l.issues.push({expected:a,format:t.format,code:"invalid_type",input:c,inst:e});return}if(!Number.isSafeInteger(c)){c>0?l.issues.push({input:c,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:a,continue:!t.abort}):l.issues.push({input:c,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:a,continue:!t.abort});return}}c<i&&l.issues.push({origin:"number",input:c,code:"too_small",minimum:i,inclusive:!0,inst:e,continue:!t.abort}),c>o&&l.issues.push({origin:"number",input:c,code:"too_big",maximum:o,inst:e})}}),$ZodCheckMaxLength=$constructor("$ZodCheckMaxLength",(e,t)=>{var a;var n;$ZodCheck.init(e,t),(a=(n=e._zod.def).when)!=null||(n.when=i=>{const o=i.value;return!nullish(o)&&o.length!==void 0}),e._zod.onattach.push(i=>{var s;const o=(s=i._zod.bag.maximum)!=null?s:Number.POSITIVE_INFINITY;t.maximum<o&&(i._zod.bag.maximum=t.maximum)}),e._zod.check=i=>{const o=i.value;if(o.length<=t.maximum)return;const l=getLengthableOrigin(o);i.issues.push({origin:l,code:"too_big",maximum:t.maximum,inclusive:!0,input:o,inst:e,continue:!t.abort})}}),$ZodCheckMinLength=$constructor("$ZodCheckMinLength",(e,t)=>{var a;var n;$ZodCheck.init(e,t),(a=(n=e._zod.def).when)!=null||(n.when=i=>{const o=i.value;return!nullish(o)&&o.length!==void 0}),e._zod.onattach.push(i=>{var s;const o=(s=i._zod.bag.minimum)!=null?s:Number.NEGATIVE_INFINITY;t.minimum>o&&(i._zod.bag.minimum=t.minimum)}),e._zod.check=i=>{const o=i.value;if(o.length>=t.minimum)return;const l=getLengthableOrigin(o);i.issues.push({origin:l,code:"too_small",minimum:t.minimum,inclusive:!0,input:o,inst:e,continue:!t.abort})}}),$ZodCheckLengthEquals=$constructor("$ZodCheckLengthEquals",(e,t)=>{var a;var n;$ZodCheck.init(e,t),(a=(n=e._zod.def).when)!=null||(n.when=i=>{const o=i.value;return!nullish(o)&&o.length!==void 0}),e._zod.onattach.push(i=>{const o=i._zod.bag;o.minimum=t.length,o.maximum=t.length,o.length=t.length}),e._zod.check=i=>{const o=i.value,s=o.length;if(s===t.length)return;const l=getLengthableOrigin(o),c=s>t.length;i.issues.push({origin:l,...c?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:i.value,inst:e,continue:!t.abort})}}),$ZodCheckStringFormat=$constructor("$ZodCheckStringFormat",(e,t)=>{var i,o;var n,a;$ZodCheck.init(e,t),e._zod.onattach.push(s=>{var c;const l=s._zod.bag;l.format=t.format,t.pattern&&((c=l.patterns)!=null||(l.patterns=new Set),l.patterns.add(t.pattern))}),t.pattern?(i=(n=e._zod).check)!=null||(n.check=s=>{t.pattern.lastIndex=0,!t.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:t.format,input:s.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(o=(a=e._zod).check)!=null||(a.check=()=>{})}),$ZodCheckRegex=$constructor("$ZodCheckRegex",(e,t)=>{$ZodCheckStringFormat.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,!t.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),$ZodCheckLowerCase=$constructor("$ZodCheckLowerCase",(e,t)=>{var n;(n=t.pattern)!=null||(t.pattern=lowercase),$ZodCheckStringFormat.init(e,t)}),$ZodCheckUpperCase=$constructor("$ZodCheckUpperCase",(e,t)=>{var n;(n=t.pattern)!=null||(t.pattern=uppercase),$ZodCheckStringFormat.init(e,t)}),$ZodCheckIncludes=$constructor("$ZodCheckIncludes",(e,t)=>{$ZodCheck.init(e,t);const n=escapeRegex(t.includes),a=new RegExp(typeof t.position=="number"?`^.{${t.position}}${n}`:n);t.pattern=a,e._zod.onattach.push(i=>{var s;const o=i._zod.bag;(s=o.patterns)!=null||(o.patterns=new Set),o.patterns.add(a)}),e._zod.check=i=>{i.value.includes(t.includes,t.position)||i.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:i.value,inst:e,continue:!t.abort})}}),$ZodCheckStartsWith=$constructor("$ZodCheckStartsWith",(e,t)=>{var a;$ZodCheck.init(e,t);const n=new RegExp(`^${escapeRegex(t.prefix)}.*`);(a=t.pattern)!=null||(t.pattern=n),e._zod.onattach.push(i=>{var s;const o=i._zod.bag;(s=o.patterns)!=null||(o.patterns=new Set),o.patterns.add(n)}),e._zod.check=i=>{i.value.startsWith(t.prefix)||i.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:i.value,inst:e,continue:!t.abort})}}),$ZodCheckEndsWith=$constructor("$ZodCheckEndsWith",(e,t)=>{var a;$ZodCheck.init(e,t);const n=new RegExp(`.*${escapeRegex(t.suffix)}$`);(a=t.pattern)!=null||(t.pattern=n),e._zod.onattach.push(i=>{var s;const o=i._zod.bag;(s=o.patterns)!=null||(o.patterns=new Set),o.patterns.add(n)}),e._zod.check=i=>{i.value.endsWith(t.suffix)||i.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:i.value,inst:e,continue:!t.abort})}}),$ZodCheckOverwrite=$constructor("$ZodCheckOverwrite",(e,t)=>{$ZodCheck.init(e,t),e._zod.check=n=>{n.value=t.tx(n.value)}});class Doc{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const a=t.split(`
`).filter(s=>s),i=Math.min(...a.map(s=>s.length-s.trimStart().length)),o=a.map(s=>s.slice(i)).map(s=>" ".repeat(this.indent*2)+s);for(const s of o)this.content.push(s)}compile(){var o;const t=Function,n=this==null?void 0:this.args,i=[...((o=this==null?void 0:this.content)!=null?o:[""]).map(s=>`  ${s}`)];return new t(...n,i.join(`
`))}}const version={major:4,minor:0,patch:5},$ZodType=$constructor("$ZodType",(e,t)=>{var i,o,s;var n;e!=null||(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=version;const a=[...(i=e._zod.def.checks)!=null?i:[]];e._zod.traits.has("$ZodCheck")&&a.unshift(e);for(const l of a)for(const c of l._zod.onattach)c(e);if(a.length===0)(o=(n=e._zod).deferred)!=null||(n.deferred=[]),(s=e._zod.deferred)==null||s.push(()=>{e._zod.run=e._zod.parse});else{const l=(c,u,d)=>{let p=aborted(c),f;for(const h of u){if(h._zod.def.when){if(!h._zod.def.when(c))continue}else if(p)continue;const v=c.issues.length,b=h._zod.check(c);if(b instanceof Promise&&(d==null?void 0:d.async)===!1)throw new $ZodAsyncError;if(f||b instanceof Promise)f=(f!=null?f:Promise.resolve()).then(async()=>{await b,c.issues.length!==v&&(p||(p=aborted(c,v)))});else{if(c.issues.length===v)continue;p||(p=aborted(c,v))}}return f?f.then(()=>c):c};e._zod.run=(c,u)=>{const d=e._zod.parse(c,u);if(d instanceof Promise){if(u.async===!1)throw new $ZodAsyncError;return d.then(p=>l(p,a,u))}return l(d,a,u)}}e["~standard"]={validate:l=>{var c;try{const u=safeParse$1(e,l);return u.success?{value:u.data}:{issues:(c=u.error)==null?void 0:c.issues}}catch(u){return safeParseAsync$1(e,l).then(d=>{var p;return d.success?{value:d.data}:{issues:(p=d.error)==null?void 0:p.issues}})}},vendor:"zod",version:1}}),$ZodString=$constructor("$ZodString",(e,t)=>{var n,a,i;$ZodType.init(e,t),e._zod.pattern=(i=[...(a=(n=e==null?void 0:e._zod.bag)==null?void 0:n.patterns)!=null?a:[]].pop())!=null?i:string$2(e._zod.bag),e._zod.parse=(o,s)=>{if(t.coerce)try{o.value=String(o.value)}catch(l){}return typeof o.value=="string"||o.issues.push({expected:"string",code:"invalid_type",input:o.value,inst:e}),o}}),$ZodStringFormat=$constructor("$ZodStringFormat",(e,t)=>{$ZodCheckStringFormat.init(e,t),$ZodString.init(e,t)}),$ZodGUID=$constructor("$ZodGUID",(e,t)=>{var n;(n=t.pattern)!=null||(t.pattern=guid),$ZodStringFormat.init(e,t)}),$ZodUUID=$constructor("$ZodUUID",(e,t)=>{var n,a;if(t.version){const o={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(o===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);(n=t.pattern)!=null||(t.pattern=uuid(o))}else(a=t.pattern)!=null||(t.pattern=uuid());$ZodStringFormat.init(e,t)}),$ZodEmail=$constructor("$ZodEmail",(e,t)=>{var n;(n=t.pattern)!=null||(t.pattern=email),$ZodStringFormat.init(e,t)}),$ZodURL=$constructor("$ZodURL",(e,t)=>{$ZodStringFormat.init(e,t),e._zod.check=n=>{try{const a=n.value,i=new URL(a),o=i.href;t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(i.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:hostname.source,input:n.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(i.protocol.endsWith(":")?i.protocol.slice(0,-1):i.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:n.value,inst:e,continue:!t.abort})),!a.endsWith("/")&&o.endsWith("/")?n.value=o.slice(0,-1):n.value=o;return}catch(a){n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:e,continue:!t.abort})}}}),$ZodEmoji=$constructor("$ZodEmoji",(e,t)=>{var n;(n=t.pattern)!=null||(t.pattern=emoji()),$ZodStringFormat.init(e,t)}),$ZodNanoID=$constructor("$ZodNanoID",(e,t)=>{var n;(n=t.pattern)!=null||(t.pattern=nanoid$1),$ZodStringFormat.init(e,t)}),$ZodCUID=$constructor("$ZodCUID",(e,t)=>{var n;(n=t.pattern)!=null||(t.pattern=cuid),$ZodStringFormat.init(e,t)}),$ZodCUID2=$constructor("$ZodCUID2",(e,t)=>{var n;(n=t.pattern)!=null||(t.pattern=cuid2),$ZodStringFormat.init(e,t)}),$ZodULID=$constructor("$ZodULID",(e,t)=>{var n;(n=t.pattern)!=null||(t.pattern=ulid),$ZodStringFormat.init(e,t)}),$ZodXID=$constructor("$ZodXID",(e,t)=>{var n;(n=t.pattern)!=null||(t.pattern=xid),$ZodStringFormat.init(e,t)}),$ZodKSUID=$constructor("$ZodKSUID",(e,t)=>{var n;(n=t.pattern)!=null||(t.pattern=ksuid),$ZodStringFormat.init(e,t)}),$ZodISODateTime=$constructor("$ZodISODateTime",(e,t)=>{var n;(n=t.pattern)!=null||(t.pattern=datetime$1(t)),$ZodStringFormat.init(e,t)}),$ZodISODate=$constructor("$ZodISODate",(e,t)=>{var n;(n=t.pattern)!=null||(t.pattern=date$4),$ZodStringFormat.init(e,t)}),$ZodISOTime=$constructor("$ZodISOTime",(e,t)=>{var n;(n=t.pattern)!=null||(t.pattern=time$2(t)),$ZodStringFormat.init(e,t)}),$ZodISODuration=$constructor("$ZodISODuration",(e,t)=>{var n;(n=t.pattern)!=null||(t.pattern=duration$1),$ZodStringFormat.init(e,t)}),$ZodIPv4=$constructor("$ZodIPv4",(e,t)=>{var n;(n=t.pattern)!=null||(t.pattern=ipv4),$ZodStringFormat.init(e,t),e._zod.onattach.push(a=>{const i=a._zod.bag;i.format="ipv4"})}),$ZodIPv6=$constructor("$ZodIPv6",(e,t)=>{var n;(n=t.pattern)!=null||(t.pattern=ipv6),$ZodStringFormat.init(e,t),e._zod.onattach.push(a=>{const i=a._zod.bag;i.format="ipv6"}),e._zod.check=a=>{try{new URL(`http://[${a.value}]`)}catch(i){a.issues.push({code:"invalid_format",format:"ipv6",input:a.value,inst:e,continue:!t.abort})}}}),$ZodCIDRv4=$constructor("$ZodCIDRv4",(e,t)=>{var n;(n=t.pattern)!=null||(t.pattern=cidrv4),$ZodStringFormat.init(e,t)}),$ZodCIDRv6=$constructor("$ZodCIDRv6",(e,t)=>{var n;(n=t.pattern)!=null||(t.pattern=cidrv6),$ZodStringFormat.init(e,t),e._zod.check=a=>{const[i,o]=a.value.split("/");try{if(!o)throw new Error;const s=Number(o);if(`${s}`!==o)throw new Error;if(s<0||s>128)throw new Error;new URL(`http://[${i}]`)}catch(s){a.issues.push({code:"invalid_format",format:"cidrv6",input:a.value,inst:e,continue:!t.abort})}}});function isValidBase64(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch(t){return!1}}const $ZodBase64=$constructor("$ZodBase64",(e,t)=>{var n;(n=t.pattern)!=null||(t.pattern=base64),$ZodStringFormat.init(e,t),e._zod.onattach.push(a=>{a._zod.bag.contentEncoding="base64"}),e._zod.check=a=>{isValidBase64(a.value)||a.issues.push({code:"invalid_format",format:"base64",input:a.value,inst:e,continue:!t.abort})}});function isValidBase64URL(e){if(!base64url.test(e))return!1;const t=e.replace(/[-_]/g,a=>a==="-"?"+":"/"),n=t.padEnd(Math.ceil(t.length/4)*4,"=");return isValidBase64(n)}const $ZodBase64URL=$constructor("$ZodBase64URL",(e,t)=>{var n;(n=t.pattern)!=null||(t.pattern=base64url),$ZodStringFormat.init(e,t),e._zod.onattach.push(a=>{a._zod.bag.contentEncoding="base64url"}),e._zod.check=a=>{isValidBase64URL(a.value)||a.issues.push({code:"invalid_format",format:"base64url",input:a.value,inst:e,continue:!t.abort})}}),$ZodE164=$constructor("$ZodE164",(e,t)=>{var n;(n=t.pattern)!=null||(t.pattern=e164),$ZodStringFormat.init(e,t)});function isValidJWT(e,t=null){try{const n=e.split(".");if(n.length!==3)return!1;const[a]=n;if(!a)return!1;const i=JSON.parse(atob(a));return!("typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||t&&(!("alg"in i)||i.alg!==t))}catch(n){return!1}}const $ZodJWT=$constructor("$ZodJWT",(e,t)=>{$ZodStringFormat.init(e,t),e._zod.check=n=>{isValidJWT(n.value,t.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:e,continue:!t.abort})}}),$ZodNumber=$constructor("$ZodNumber",(e,t)=>{var n;$ZodType.init(e,t),e._zod.pattern=(n=e._zod.bag.pattern)!=null?n:number$5,e._zod.parse=(a,i)=>{if(t.coerce)try{a.value=Number(a.value)}catch(l){}const o=a.value;if(typeof o=="number"&&!Number.isNaN(o)&&Number.isFinite(o))return a;const s=typeof o=="number"?Number.isNaN(o)?"NaN":Number.isFinite(o)?void 0:"Infinity":void 0;return a.issues.push({expected:"number",code:"invalid_type",input:o,inst:e,...s?{received:s}:{}}),a}}),$ZodNumberFormat=$constructor("$ZodNumber",(e,t)=>{$ZodCheckNumberFormat.init(e,t),$ZodNumber.init(e,t)}),$ZodBoolean=$constructor("$ZodBoolean",(e,t)=>{$ZodType.init(e,t),e._zod.pattern=boolean$1,e._zod.parse=(n,a)=>{if(t.coerce)try{n.value=!!n.value}catch(o){}const i=n.value;return typeof i=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:i,inst:e}),n}}),$ZodUnknown=$constructor("$ZodUnknown",(e,t)=>{$ZodType.init(e,t),e._zod.parse=n=>n}),$ZodNever=$constructor("$ZodNever",(e,t)=>{$ZodType.init(e,t),e._zod.parse=(n,a)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:e}),n)}),$ZodDate=$constructor("$ZodDate",(e,t)=>{$ZodType.init(e,t),e._zod.parse=(n,a)=>{if(t.coerce)try{n.value=new Date(n.value)}catch(l){}const i=n.value,o=i instanceof Date;return o&&!Number.isNaN(i.getTime())||n.issues.push({expected:"date",code:"invalid_type",input:i,...o?{received:"Invalid Date"}:{},inst:e}),n}});function handleArrayResult(e,t,n){e.issues.length&&t.issues.push(...prefixIssues(n,e.issues)),t.value[n]=e.value}const $ZodArray=$constructor("$ZodArray",(e,t)=>{$ZodType.init(e,t),e._zod.parse=(n,a)=>{const i=n.value;if(!Array.isArray(i))return n.issues.push({expected:"array",code:"invalid_type",input:i,inst:e}),n;n.value=Array(i.length);const o=[];for(let s=0;s<i.length;s++){const l=i[s],c=t.element._zod.run({value:l,issues:[]},a);c instanceof Promise?o.push(c.then(u=>handleArrayResult(u,n,s))):handleArrayResult(c,n,s)}return o.length?Promise.all(o).then(()=>n):n}});function handleObjectResult(e,t,n){e.issues.length&&t.issues.push(...prefixIssues(n,e.issues)),t.value[n]=e.value}function handleOptionalObjectResult(e,t,n,a){e.issues.length?a[n]===void 0?n in a?t.value[n]=void 0:t.value[n]=e.value:t.issues.push(...prefixIssues(n,e.issues)):e.value===void 0?n in a&&(t.value[n]=void 0):t.value[n]=e.value}const $ZodObject=$constructor("$ZodObject",(e,t)=>{$ZodType.init(e,t);const n=cached(()=>{const p=Object.keys(t.shape);for(const h of p)if(!(t.shape[h]instanceof $ZodType))throw new Error(`Invalid element at key "${h}": expected a Zod schema`);const f=optionalKeys(t.shape);return{shape:t.shape,keys:p,keySet:new Set(p),numKeys:p.length,optionalKeys:new Set(f)}});defineLazy(e._zod,"propValues",()=>{var h;const p=t.shape,f={};for(const v in p){const b=p[v]._zod;if(b.values){(h=f[v])!=null||(f[v]=new Set);for(const g of b.values)f[v].add(g)}}return f});const a=p=>{const f=new Doc(["shape","payload","ctx"]),h=n.value,v=j=>{const w=esc(j);return`shape[${w}]._zod.run({ value: input[${w}], issues: [] }, ctx)`};f.write("const input = payload.value;");const b=Object.create(null);let g=0;for(const j of h.keys)b[j]=`key_${g++}`;f.write("const newResult = {}");for(const j of h.keys)if(h.optionalKeys.has(j)){const w=b[j];f.write(`const ${w} = ${v(j)};`);const S=esc(j);f.write(`
        if (${w}.issues.length) {
          if (input[${S}] === undefined) {
            if (${S} in input) {
              newResult[${S}] = undefined;
            }
          } else {
            payload.issues = payload.issues.concat(
              ${w}.issues.map((iss) => ({
                ...iss,
                path: iss.path ? [${S}, ...iss.path] : [${S}],
              }))
            );
          }
        } else if (${w}.value === undefined) {
          if (${S} in input) newResult[${S}] = undefined;
        } else {
          newResult[${S}] = ${w}.value;
        }
        `)}else{const w=b[j];f.write(`const ${w} = ${v(j)};`),f.write(`
          if (${w}.issues.length) payload.issues = payload.issues.concat(${w}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${esc(j)}, ...iss.path] : [${esc(j)}]
          })));`),f.write(`newResult[${esc(j)}] = ${w}.value`)}f.write("payload.value = newResult;"),f.write("return payload;");const E=f.compile();return(j,w)=>E(p,j,w)};let i;const o=isObject$1,s=!globalConfig.jitless,c=s&&allowsEval.value,u=t.catchall;let d;e._zod.parse=(p,f)=>{d!=null||(d=n.value);const h=p.value;if(!o(h))return p.issues.push({expected:"object",code:"invalid_type",input:h,inst:e}),p;const v=[];if(s&&c&&(f==null?void 0:f.async)===!1&&f.jitless!==!0)i||(i=a(t.shape)),p=i(p,f);else{p.value={};const w=d.shape;for(const S of d.keys){const A=w[S],R=A._zod.run({value:h[S],issues:[]},f),_=A._zod.optin==="optional"&&A._zod.optout==="optional";R instanceof Promise?v.push(R.then($=>_?handleOptionalObjectResult($,p,S,h):handleObjectResult($,p,S))):_?handleOptionalObjectResult(R,p,S,h):handleObjectResult(R,p,S)}}if(!u)return v.length?Promise.all(v).then(()=>p):p;const b=[],g=d.keySet,E=u._zod,j=E.def.type;for(const w of Object.keys(h)){if(g.has(w))continue;if(j==="never"){b.push(w);continue}const S=E.run({value:h[w],issues:[]},f);S instanceof Promise?v.push(S.then(A=>handleObjectResult(A,p,w))):handleObjectResult(S,p,w)}return b.length&&p.issues.push({code:"unrecognized_keys",keys:b,input:h,inst:e}),v.length?Promise.all(v).then(()=>p):p}});function handleUnionResults(e,t,n,a){for(const i of e)if(i.issues.length===0)return t.value=i.value,t;return t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:e.map(i=>i.issues.map(o=>finalizeIssue(o,a,config$1())))}),t}const $ZodUnion=$constructor("$ZodUnion",(e,t)=>{$ZodType.init(e,t),defineLazy(e._zod,"optin",()=>t.options.some(n=>n._zod.optin==="optional")?"optional":void 0),defineLazy(e._zod,"optout",()=>t.options.some(n=>n._zod.optout==="optional")?"optional":void 0),defineLazy(e._zod,"values",()=>{if(t.options.every(n=>n._zod.values))return new Set(t.options.flatMap(n=>Array.from(n._zod.values)))}),defineLazy(e._zod,"pattern",()=>{if(t.options.every(n=>n._zod.pattern)){const n=t.options.map(a=>a._zod.pattern);return new RegExp(`^(${n.map(a=>cleanRegex(a.source)).join("|")})$`)}}),e._zod.parse=(n,a)=>{let i=!1;const o=[];for(const s of t.options){const l=s._zod.run({value:n.value,issues:[]},a);if(l instanceof Promise)o.push(l),i=!0;else{if(l.issues.length===0)return l;o.push(l)}}return i?Promise.all(o).then(s=>handleUnionResults(s,n,e,a)):handleUnionResults(o,n,e,a)}}),$ZodIntersection=$constructor("$ZodIntersection",(e,t)=>{$ZodType.init(e,t),e._zod.parse=(n,a)=>{const i=n.value,o=t.left._zod.run({value:i,issues:[]},a),s=t.right._zod.run({value:i,issues:[]},a);return o instanceof Promise||s instanceof Promise?Promise.all([o,s]).then(([c,u])=>handleIntersectionResults(n,c,u)):handleIntersectionResults(n,o,s)}});function mergeValues(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(isPlainObject$3(e)&&isPlainObject$3(t)){const n=Object.keys(t),a=Object.keys(e).filter(o=>n.indexOf(o)!==-1),i={...e,...t};for(const o of a){const s=mergeValues(e[o],t[o]);if(!s.valid)return{valid:!1,mergeErrorPath:[o,...s.mergeErrorPath]};i[o]=s.data}return{valid:!0,data:i}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let a=0;a<e.length;a++){const i=e[a],o=t[a],s=mergeValues(i,o);if(!s.valid)return{valid:!1,mergeErrorPath:[a,...s.mergeErrorPath]};n.push(s.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function handleIntersectionResults(e,t,n){if(t.issues.length&&e.issues.push(...t.issues),n.issues.length&&e.issues.push(...n.issues),aborted(e))return e;const a=mergeValues(t.value,n.value);if(!a.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(a.mergeErrorPath)}`);return e.value=a.data,e}const $ZodEnum=$constructor("$ZodEnum",(e,t)=>{$ZodType.init(e,t);const n=getEnumValues(t.entries);e._zod.values=new Set(n),e._zod.pattern=new RegExp(`^(${n.filter(a=>propertyKeyTypes.has(typeof a)).map(a=>typeof a=="string"?escapeRegex(a):a.toString()).join("|")})$`),e._zod.parse=(a,i)=>{const o=a.value;return e._zod.values.has(o)||a.issues.push({code:"invalid_value",values:n,input:o,inst:e}),a}}),$ZodTransform=$constructor("$ZodTransform",(e,t)=>{$ZodType.init(e,t),e._zod.parse=(n,a)=>{const i=t.transform(n.value,n);if(a.async)return(i instanceof Promise?i:Promise.resolve(i)).then(s=>(n.value=s,n));if(i instanceof Promise)throw new $ZodAsyncError;return n.value=i,n}}),$ZodOptional=$constructor("$ZodOptional",(e,t)=>{$ZodType.init(e,t),e._zod.optin="optional",e._zod.optout="optional",defineLazy(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),defineLazy(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${cleanRegex(n.source)})?$`):void 0}),e._zod.parse=(n,a)=>t.innerType._zod.optin==="optional"?t.innerType._zod.run(n,a):n.value===void 0?n:t.innerType._zod.run(n,a)}),$ZodNullable=$constructor("$ZodNullable",(e,t)=>{$ZodType.init(e,t),defineLazy(e._zod,"optin",()=>t.innerType._zod.optin),defineLazy(e._zod,"optout",()=>t.innerType._zod.optout),defineLazy(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${cleanRegex(n.source)}|null)$`):void 0}),defineLazy(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(n,a)=>n.value===null?n:t.innerType._zod.run(n,a)}),$ZodDefault=$constructor("$ZodDefault",(e,t)=>{$ZodType.init(e,t),e._zod.optin="optional",defineLazy(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,a)=>{if(n.value===void 0)return n.value=t.defaultValue,n;const i=t.innerType._zod.run(n,a);return i instanceof Promise?i.then(o=>handleDefaultResult(o,t)):handleDefaultResult(i,t)}});function handleDefaultResult(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const $ZodPrefault=$constructor("$ZodPrefault",(e,t)=>{$ZodType.init(e,t),e._zod.optin="optional",defineLazy(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,a)=>(n.value===void 0&&(n.value=t.defaultValue),t.innerType._zod.run(n,a))}),$ZodNonOptional=$constructor("$ZodNonOptional",(e,t)=>{$ZodType.init(e,t),defineLazy(e._zod,"values",()=>{const n=t.innerType._zod.values;return n?new Set([...n].filter(a=>a!==void 0)):void 0}),e._zod.parse=(n,a)=>{const i=t.innerType._zod.run(n,a);return i instanceof Promise?i.then(o=>handleNonOptionalResult(o,e)):handleNonOptionalResult(i,e)}});function handleNonOptionalResult(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const $ZodCatch=$constructor("$ZodCatch",(e,t)=>{$ZodType.init(e,t),e._zod.optin="optional",defineLazy(e._zod,"optout",()=>t.innerType._zod.optout),defineLazy(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,a)=>{const i=t.innerType._zod.run(n,a);return i instanceof Promise?i.then(o=>(n.value=o.value,o.issues.length&&(n.value=t.catchValue({...n,error:{issues:o.issues.map(s=>finalizeIssue(s,a,config$1()))},input:n.value}),n.issues=[]),n)):(n.value=i.value,i.issues.length&&(n.value=t.catchValue({...n,error:{issues:i.issues.map(o=>finalizeIssue(o,a,config$1()))},input:n.value}),n.issues=[]),n)}}),$ZodPipe=$constructor("$ZodPipe",(e,t)=>{$ZodType.init(e,t),defineLazy(e._zod,"values",()=>t.in._zod.values),defineLazy(e._zod,"optin",()=>t.in._zod.optin),defineLazy(e._zod,"optout",()=>t.out._zod.optout),defineLazy(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(n,a)=>{const i=t.in._zod.run(n,a);return i instanceof Promise?i.then(o=>handlePipeResult(o,t,a)):handlePipeResult(i,t,a)}});function handlePipeResult(e,t,n){return aborted(e)?e:t.out._zod.run({value:e.value,issues:e.issues},n)}const $ZodReadonly=$constructor("$ZodReadonly",(e,t)=>{$ZodType.init(e,t),defineLazy(e._zod,"propValues",()=>t.innerType._zod.propValues),defineLazy(e._zod,"values",()=>t.innerType._zod.values),defineLazy(e._zod,"optin",()=>t.innerType._zod.optin),defineLazy(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(n,a)=>{const i=t.innerType._zod.run(n,a);return i instanceof Promise?i.then(handleReadonlyResult):handleReadonlyResult(i)}});function handleReadonlyResult(e){return e.value=Object.freeze(e.value),e}const $ZodCustom=$constructor("$ZodCustom",(e,t)=>{$ZodCheck.init(e,t),$ZodType.init(e,t),e._zod.parse=(n,a)=>n,e._zod.check=n=>{const a=n.value,i=t.fn(a);if(i instanceof Promise)return i.then(o=>handleRefineResult(o,n,a,e));handleRefineResult(i,n,a,e)}});function handleRefineResult(e,t,n,a){var i;if(!e){const o={code:"custom",input:n,inst:a,path:[...(i=a._zod.def.path)!=null?i:[]],continue:!a._zod.def.abort};a._zod.def.params&&(o.params=a._zod.def.params),t.issues.push(issue(o))}}class $ZodRegistry{constructor(){this._map=new Map,this._idmap=new Map}add(t,...n){const a=n[0];if(this._map.set(t,a),a&&typeof a=="object"&&"id"in a){if(this._idmap.has(a.id))throw new Error(`ID ${a.id} already exists in the registry`);this._idmap.set(a.id,t)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(t){const n=this._map.get(t);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(t),this}get(t){var a;const n=t._zod.parent;if(n){const i={...(a=this.get(n))!=null?a:{}};return delete i.id,{...i,...this._map.get(t)}}return this._map.get(t)}has(t){return this._map.has(t)}}function registry(){return new $ZodRegistry}const globalRegistry=registry();function _string(e,t){return new e({type:"string",...normalizeParams(t)})}function _email(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...normalizeParams(t)})}function _guid(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...normalizeParams(t)})}function _uuid(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...normalizeParams(t)})}function _uuidv4(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...normalizeParams(t)})}function _uuidv6(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...normalizeParams(t)})}function _uuidv7(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...normalizeParams(t)})}function _url(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...normalizeParams(t)})}function _emoji(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...normalizeParams(t)})}function _nanoid(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...normalizeParams(t)})}function _cuid(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...normalizeParams(t)})}function _cuid2(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...normalizeParams(t)})}function _ulid(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...normalizeParams(t)})}function _xid(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...normalizeParams(t)})}function _ksuid(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...normalizeParams(t)})}function _ipv4(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...normalizeParams(t)})}function _ipv6(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...normalizeParams(t)})}function _cidrv4(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...normalizeParams(t)})}function _cidrv6(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...normalizeParams(t)})}function _base64(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...normalizeParams(t)})}function _base64url(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...normalizeParams(t)})}function _e164(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...normalizeParams(t)})}function _jwt(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...normalizeParams(t)})}function _isoDateTime(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...normalizeParams(t)})}function _isoDate(e,t){return new e({type:"string",format:"date",check:"string_format",...normalizeParams(t)})}function _isoTime(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...normalizeParams(t)})}function _isoDuration(e,t){return new e({type:"string",format:"duration",check:"string_format",...normalizeParams(t)})}function _number(e,t){return new e({type:"number",checks:[],...normalizeParams(t)})}function _coercedNumber(e,t){return new e({type:"number",coerce:!0,checks:[],...normalizeParams(t)})}function _int(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...normalizeParams(t)})}function _boolean(e,t){return new e({type:"boolean",...normalizeParams(t)})}function _unknown(e){return new e({type:"unknown"})}function _never(e,t){return new e({type:"never",...normalizeParams(t)})}function _date(e,t){return new e({type:"date",...normalizeParams(t)})}function _lt(e,t){return new $ZodCheckLessThan({check:"less_than",...normalizeParams(t),value:e,inclusive:!1})}function _lte(e,t){return new $ZodCheckLessThan({check:"less_than",...normalizeParams(t),value:e,inclusive:!0})}function _gt(e,t){return new $ZodCheckGreaterThan({check:"greater_than",...normalizeParams(t),value:e,inclusive:!1})}function _gte(e,t){return new $ZodCheckGreaterThan({check:"greater_than",...normalizeParams(t),value:e,inclusive:!0})}function _multipleOf(e,t){return new $ZodCheckMultipleOf({check:"multiple_of",...normalizeParams(t),value:e})}function _maxLength(e,t){return new $ZodCheckMaxLength({check:"max_length",...normalizeParams(t),maximum:e})}function _minLength(e,t){return new $ZodCheckMinLength({check:"min_length",...normalizeParams(t),minimum:e})}function _length(e,t){return new $ZodCheckLengthEquals({check:"length_equals",...normalizeParams(t),length:e})}function _regex(e,t){return new $ZodCheckRegex({check:"string_format",format:"regex",...normalizeParams(t),pattern:e})}function _lowercase(e){return new $ZodCheckLowerCase({check:"string_format",format:"lowercase",...normalizeParams(e)})}function _uppercase(e){return new $ZodCheckUpperCase({check:"string_format",format:"uppercase",...normalizeParams(e)})}function _includes(e,t){return new $ZodCheckIncludes({check:"string_format",format:"includes",...normalizeParams(t),includes:e})}function _startsWith(e,t){return new $ZodCheckStartsWith({check:"string_format",format:"starts_with",...normalizeParams(t),prefix:e})}function _endsWith(e,t){return new $ZodCheckEndsWith({check:"string_format",format:"ends_with",...normalizeParams(t),suffix:e})}function _overwrite(e){return new $ZodCheckOverwrite({check:"overwrite",tx:e})}function _normalize(e){return _overwrite(t=>t.normalize(e))}function _trim(){return _overwrite(e=>e.trim())}function _toLowerCase(){return _overwrite(e=>e.toLowerCase())}function _toUpperCase(){return _overwrite(e=>e.toUpperCase())}function _array(e,t,n){return new e({type:"array",element:t,...normalizeParams(n)})}function _refine(e,t,n){return new e({type:"custom",check:"custom",fn:t,...normalizeParams(n)})}const ZodISODateTime=$constructor("ZodISODateTime",(e,t)=>{$ZodISODateTime.init(e,t),ZodStringFormat.init(e,t)});function datetime(e){return _isoDateTime(ZodISODateTime,e)}const ZodISODate=$constructor("ZodISODate",(e,t)=>{$ZodISODate.init(e,t),ZodStringFormat.init(e,t)});function date$3(e){return _isoDate(ZodISODate,e)}const ZodISOTime=$constructor("ZodISOTime",(e,t)=>{$ZodISOTime.init(e,t),ZodStringFormat.init(e,t)});function time$1(e){return _isoTime(ZodISOTime,e)}const ZodISODuration=$constructor("ZodISODuration",(e,t)=>{$ZodISODuration.init(e,t),ZodStringFormat.init(e,t)});function duration(e){return _isoDuration(ZodISODuration,e)}const initializer=(e,t)=>{$ZodError.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:n=>formatError(e,n)},flatten:{value:n=>flattenError(e,n)},addIssue:{value:n=>e.issues.push(n)},addIssues:{value:n=>e.issues.push(...n)},isEmpty:{get(){return e.issues.length===0}}})},ZodError=$constructor("ZodError",initializer),ZodRealError=$constructor("ZodError",initializer,{Parent:Error}),parse=_parse(ZodRealError),parseAsync=_parseAsync(ZodRealError),safeParse=_safeParse(ZodRealError),safeParseAsync=_safeParseAsync(ZodRealError),ZodType=$constructor("ZodType",(e,t)=>($ZodType.init(e,t),e.def=t,Object.defineProperty(e,"_def",{value:t}),e.check=(...n)=>{var a;return e.clone({...t,checks:[...(a=t.checks)!=null?a:[],...n.map(i=>typeof i=="function"?{_zod:{check:i,def:{check:"custom"},onattach:[]}}:i)]})},e.clone=(n,a)=>clone$1(e,n,a),e.brand=()=>e,e.register=(n,a)=>(n.add(e,a),e),e.parse=(n,a)=>parse(e,n,a,{callee:e.parse}),e.safeParse=(n,a)=>safeParse(e,n,a),e.parseAsync=async(n,a)=>parseAsync(e,n,a,{callee:e.parseAsync}),e.safeParseAsync=async(n,a)=>safeParseAsync(e,n,a),e.spa=e.safeParseAsync,e.refine=(n,a)=>e.check(refine(n,a)),e.superRefine=n=>e.check(superRefine(n)),e.overwrite=n=>e.check(_overwrite(n)),e.optional=()=>optional(e),e.nullable=()=>nullable(e),e.nullish=()=>optional(nullable(e)),e.nonoptional=n=>nonoptional(e,n),e.array=()=>array$1(e),e.or=n=>union([e,n]),e.and=n=>intersection(e,n),e.transform=n=>pipe(e,transform(n)),e.default=n=>_default(e,n),e.prefault=n=>prefault(e,n),e.catch=n=>_catch(e,n),e.pipe=n=>pipe(e,n),e.readonly=()=>readonly(e),e.describe=n=>{const a=e.clone();return globalRegistry.add(a,{description:n}),a},Object.defineProperty(e,"description",{get(){var n;return(n=globalRegistry.get(e))==null?void 0:n.description},configurable:!0}),e.meta=(...n)=>{if(n.length===0)return globalRegistry.get(e);const a=e.clone();return globalRegistry.add(a,n[0]),a},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),_ZodString=$constructor("_ZodString",(e,t)=>{var a,i,o;$ZodString.init(e,t),ZodType.init(e,t);const n=e._zod.bag;e.format=(a=n.format)!=null?a:null,e.minLength=(i=n.minimum)!=null?i:null,e.maxLength=(o=n.maximum)!=null?o:null,e.regex=(...s)=>e.check(_regex(...s)),e.includes=(...s)=>e.check(_includes(...s)),e.startsWith=(...s)=>e.check(_startsWith(...s)),e.endsWith=(...s)=>e.check(_endsWith(...s)),e.min=(...s)=>e.check(_minLength(...s)),e.max=(...s)=>e.check(_maxLength(...s)),e.length=(...s)=>e.check(_length(...s)),e.nonempty=(...s)=>e.check(_minLength(1,...s)),e.lowercase=s=>e.check(_lowercase(s)),e.uppercase=s=>e.check(_uppercase(s)),e.trim=()=>e.check(_trim()),e.normalize=(...s)=>e.check(_normalize(...s)),e.toLowerCase=()=>e.check(_toLowerCase()),e.toUpperCase=()=>e.check(_toUpperCase())}),ZodString=$constructor("ZodString",(e,t)=>{$ZodString.init(e,t),_ZodString.init(e,t),e.email=n=>e.check(_email(ZodEmail,n)),e.url=n=>e.check(_url(ZodURL,n)),e.jwt=n=>e.check(_jwt(ZodJWT,n)),e.emoji=n=>e.check(_emoji(ZodEmoji,n)),e.guid=n=>e.check(_guid(ZodGUID,n)),e.uuid=n=>e.check(_uuid(ZodUUID,n)),e.uuidv4=n=>e.check(_uuidv4(ZodUUID,n)),e.uuidv6=n=>e.check(_uuidv6(ZodUUID,n)),e.uuidv7=n=>e.check(_uuidv7(ZodUUID,n)),e.nanoid=n=>e.check(_nanoid(ZodNanoID,n)),e.guid=n=>e.check(_guid(ZodGUID,n)),e.cuid=n=>e.check(_cuid(ZodCUID,n)),e.cuid2=n=>e.check(_cuid2(ZodCUID2,n)),e.ulid=n=>e.check(_ulid(ZodULID,n)),e.base64=n=>e.check(_base64(ZodBase64,n)),e.base64url=n=>e.check(_base64url(ZodBase64URL,n)),e.xid=n=>e.check(_xid(ZodXID,n)),e.ksuid=n=>e.check(_ksuid(ZodKSUID,n)),e.ipv4=n=>e.check(_ipv4(ZodIPv4,n)),e.ipv6=n=>e.check(_ipv6(ZodIPv6,n)),e.cidrv4=n=>e.check(_cidrv4(ZodCIDRv4,n)),e.cidrv6=n=>e.check(_cidrv6(ZodCIDRv6,n)),e.e164=n=>e.check(_e164(ZodE164,n)),e.datetime=n=>e.check(datetime(n)),e.date=n=>e.check(date$3(n)),e.time=n=>e.check(time$1(n)),e.duration=n=>e.check(duration(n))});function string$1(e){return _string(ZodString,e)}const ZodStringFormat=$constructor("ZodStringFormat",(e,t)=>{$ZodStringFormat.init(e,t),_ZodString.init(e,t)}),ZodEmail=$constructor("ZodEmail",(e,t)=>{$ZodEmail.init(e,t),ZodStringFormat.init(e,t)}),ZodGUID=$constructor("ZodGUID",(e,t)=>{$ZodGUID.init(e,t),ZodStringFormat.init(e,t)}),ZodUUID=$constructor("ZodUUID",(e,t)=>{$ZodUUID.init(e,t),ZodStringFormat.init(e,t)}),ZodURL=$constructor("ZodURL",(e,t)=>{$ZodURL.init(e,t),ZodStringFormat.init(e,t)}),ZodEmoji=$constructor("ZodEmoji",(e,t)=>{$ZodEmoji.init(e,t),ZodStringFormat.init(e,t)}),ZodNanoID=$constructor("ZodNanoID",(e,t)=>{$ZodNanoID.init(e,t),ZodStringFormat.init(e,t)}),ZodCUID=$constructor("ZodCUID",(e,t)=>{$ZodCUID.init(e,t),ZodStringFormat.init(e,t)}),ZodCUID2=$constructor("ZodCUID2",(e,t)=>{$ZodCUID2.init(e,t),ZodStringFormat.init(e,t)}),ZodULID=$constructor("ZodULID",(e,t)=>{$ZodULID.init(e,t),ZodStringFormat.init(e,t)}),ZodXID=$constructor("ZodXID",(e,t)=>{$ZodXID.init(e,t),ZodStringFormat.init(e,t)}),ZodKSUID=$constructor("ZodKSUID",(e,t)=>{$ZodKSUID.init(e,t),ZodStringFormat.init(e,t)}),ZodIPv4=$constructor("ZodIPv4",(e,t)=>{$ZodIPv4.init(e,t),ZodStringFormat.init(e,t)}),ZodIPv6=$constructor("ZodIPv6",(e,t)=>{$ZodIPv6.init(e,t),ZodStringFormat.init(e,t)}),ZodCIDRv4=$constructor("ZodCIDRv4",(e,t)=>{$ZodCIDRv4.init(e,t),ZodStringFormat.init(e,t)}),ZodCIDRv6=$constructor("ZodCIDRv6",(e,t)=>{$ZodCIDRv6.init(e,t),ZodStringFormat.init(e,t)}),ZodBase64=$constructor("ZodBase64",(e,t)=>{$ZodBase64.init(e,t),ZodStringFormat.init(e,t)}),ZodBase64URL=$constructor("ZodBase64URL",(e,t)=>{$ZodBase64URL.init(e,t),ZodStringFormat.init(e,t)}),ZodE164=$constructor("ZodE164",(e,t)=>{$ZodE164.init(e,t),ZodStringFormat.init(e,t)}),ZodJWT=$constructor("ZodJWT",(e,t)=>{$ZodJWT.init(e,t),ZodStringFormat.init(e,t)}),ZodNumber=$constructor("ZodNumber",(e,t)=>{var a,i,o,s,l,c,u,d,p;$ZodNumber.init(e,t),ZodType.init(e,t),e.gt=(f,h)=>e.check(_gt(f,h)),e.gte=(f,h)=>e.check(_gte(f,h)),e.min=(f,h)=>e.check(_gte(f,h)),e.lt=(f,h)=>e.check(_lt(f,h)),e.lte=(f,h)=>e.check(_lte(f,h)),e.max=(f,h)=>e.check(_lte(f,h)),e.int=f=>e.check(int(f)),e.safe=f=>e.check(int(f)),e.positive=f=>e.check(_gt(0,f)),e.nonnegative=f=>e.check(_gte(0,f)),e.negative=f=>e.check(_lt(0,f)),e.nonpositive=f=>e.check(_lte(0,f)),e.multipleOf=(f,h)=>e.check(_multipleOf(f,h)),e.step=(f,h)=>e.check(_multipleOf(f,h)),e.finite=()=>e;const n=e._zod.bag;e.minValue=(o=Math.max((a=n.minimum)!=null?a:Number.NEGATIVE_INFINITY,(i=n.exclusiveMinimum)!=null?i:Number.NEGATIVE_INFINITY))!=null?o:null,e.maxValue=(c=Math.min((s=n.maximum)!=null?s:Number.POSITIVE_INFINITY,(l=n.exclusiveMaximum)!=null?l:Number.POSITIVE_INFINITY))!=null?c:null,e.isInt=((u=n.format)!=null?u:"").includes("int")||Number.isSafeInteger((d=n.multipleOf)!=null?d:.5),e.isFinite=!0,e.format=(p=n.format)!=null?p:null});function number$4(e){return _number(ZodNumber,e)}const ZodNumberFormat=$constructor("ZodNumberFormat",(e,t)=>{$ZodNumberFormat.init(e,t),ZodNumber.init(e,t)});function int(e){return _int(ZodNumberFormat,e)}const ZodBoolean=$constructor("ZodBoolean",(e,t)=>{$ZodBoolean.init(e,t),ZodType.init(e,t)});function boolean(e){return _boolean(ZodBoolean,e)}const ZodUnknown=$constructor("ZodUnknown",(e,t)=>{$ZodUnknown.init(e,t),ZodType.init(e,t)});function unknown(){return _unknown(ZodUnknown)}const ZodNever=$constructor("ZodNever",(e,t)=>{$ZodNever.init(e,t),ZodType.init(e,t)});function never(e){return _never(ZodNever,e)}const ZodDate=$constructor("ZodDate",(e,t)=>{$ZodDate.init(e,t),ZodType.init(e,t),e.min=(a,i)=>e.check(_gte(a,i)),e.max=(a,i)=>e.check(_lte(a,i));const n=e._zod.bag;e.minDate=n.minimum?new Date(n.minimum):null,e.maxDate=n.maximum?new Date(n.maximum):null});function date$2(e){return _date(ZodDate,e)}const ZodArray=$constructor("ZodArray",(e,t)=>{$ZodArray.init(e,t),ZodType.init(e,t),e.element=t.element,e.min=(n,a)=>e.check(_minLength(n,a)),e.nonempty=n=>e.check(_minLength(1,n)),e.max=(n,a)=>e.check(_maxLength(n,a)),e.length=(n,a)=>e.check(_length(n,a)),e.unwrap=()=>e.element});function array$1(e,t){return _array(ZodArray,e,t)}const ZodObject=$constructor("ZodObject",(e,t)=>{$ZodObject.init(e,t),ZodType.init(e,t),defineLazy(e,"shape",()=>t.shape),e.keyof=()=>_enum(Object.keys(e._zod.def.shape)),e.catchall=n=>e.clone({...e._zod.def,catchall:n}),e.passthrough=()=>e.clone({...e._zod.def,catchall:unknown()}),e.loose=()=>e.clone({...e._zod.def,catchall:unknown()}),e.strict=()=>e.clone({...e._zod.def,catchall:never()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=n=>extend$1(e,n),e.merge=n=>merge(e,n),e.pick=n=>pick(e,n),e.omit=n=>omit(e,n),e.partial=(...n)=>partial(ZodOptional,e,n[0]),e.required=(...n)=>required(ZodNonOptional,e,n[0])});function object$1(e,t){const n={type:"object",get shape(){return assignProp(this,"shape",{...e}),this.shape},...normalizeParams(t)};return new ZodObject(n)}const ZodUnion=$constructor("ZodUnion",(e,t)=>{$ZodUnion.init(e,t),ZodType.init(e,t),e.options=t.options});function union(e,t){return new ZodUnion({type:"union",options:e,...normalizeParams(t)})}const ZodIntersection=$constructor("ZodIntersection",(e,t)=>{$ZodIntersection.init(e,t),ZodType.init(e,t)});function intersection(e,t){return new ZodIntersection({type:"intersection",left:e,right:t})}const ZodEnum=$constructor("ZodEnum",(e,t)=>{$ZodEnum.init(e,t),ZodType.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const n=new Set(Object.keys(t.entries));e.extract=(a,i)=>{const o={};for(const s of a)if(n.has(s))o[s]=t.entries[s];else throw new Error(`Key ${s} not found in enum`);return new ZodEnum({...t,checks:[],...normalizeParams(i),entries:o})},e.exclude=(a,i)=>{const o={...t.entries};for(const s of a)if(n.has(s))delete o[s];else throw new Error(`Key ${s} not found in enum`);return new ZodEnum({...t,checks:[],...normalizeParams(i),entries:o})}});function _enum(e,t){const n=Array.isArray(e)?Object.fromEntries(e.map(a=>[a,a])):e;return new ZodEnum({type:"enum",entries:n,...normalizeParams(t)})}const ZodTransform=$constructor("ZodTransform",(e,t)=>{$ZodTransform.init(e,t),ZodType.init(e,t),e._zod.parse=(n,a)=>{n.addIssue=o=>{var s,l,c,u;if(typeof o=="string")n.issues.push(issue(o,n.value,t));else{const d=o;d.fatal&&(d.continue=!1),(s=d.code)!=null||(d.code="custom"),(l=d.input)!=null||(d.input=n.value),(c=d.inst)!=null||(d.inst=e),(u=d.continue)!=null||(d.continue=!0),n.issues.push(issue(d))}};const i=t.transform(n.value,n);return i instanceof Promise?i.then(o=>(n.value=o,n)):(n.value=i,n)}});function transform(e){return new ZodTransform({type:"transform",transform:e})}const ZodOptional=$constructor("ZodOptional",(e,t)=>{$ZodOptional.init(e,t),ZodType.init(e,t),e.unwrap=()=>e._zod.def.innerType});function optional(e){return new ZodOptional({type:"optional",innerType:e})}const ZodNullable=$constructor("ZodNullable",(e,t)=>{$ZodNullable.init(e,t),ZodType.init(e,t),e.unwrap=()=>e._zod.def.innerType});function nullable(e){return new ZodNullable({type:"nullable",innerType:e})}const ZodDefault=$constructor("ZodDefault",(e,t)=>{$ZodDefault.init(e,t),ZodType.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function _default(e,t){return new ZodDefault({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const ZodPrefault=$constructor("ZodPrefault",(e,t)=>{$ZodPrefault.init(e,t),ZodType.init(e,t),e.unwrap=()=>e._zod.def.innerType});function prefault(e,t){return new ZodPrefault({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const ZodNonOptional=$constructor("ZodNonOptional",(e,t)=>{$ZodNonOptional.init(e,t),ZodType.init(e,t),e.unwrap=()=>e._zod.def.innerType});function nonoptional(e,t){return new ZodNonOptional({type:"nonoptional",innerType:e,...normalizeParams(t)})}const ZodCatch=$constructor("ZodCatch",(e,t)=>{$ZodCatch.init(e,t),ZodType.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function _catch(e,t){return new ZodCatch({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const ZodPipe=$constructor("ZodPipe",(e,t)=>{$ZodPipe.init(e,t),ZodType.init(e,t),e.in=t.in,e.out=t.out});function pipe(e,t){return new ZodPipe({type:"pipe",in:e,out:t})}const ZodReadonly=$constructor("ZodReadonly",(e,t)=>{$ZodReadonly.init(e,t),ZodType.init(e,t)});function readonly(e){return new ZodReadonly({type:"readonly",innerType:e})}const ZodCustom=$constructor("ZodCustom",(e,t)=>{$ZodCustom.init(e,t),ZodType.init(e,t)});function check(e){const t=new $ZodCheck({check:"custom"});return t._zod.check=e,t}function refine(e,t={}){return _refine(ZodCustom,e,t)}function superRefine(e){const t=check(n=>(n.addIssue=a=>{var i,o,s,l;if(typeof a=="string")n.issues.push(issue(a,n.value,t._zod.def));else{const c=a;c.fatal&&(c.continue=!1),(i=c.code)!=null||(c.code="custom"),(o=c.input)!=null||(c.input=n.value),(s=c.inst)!=null||(c.inst=t),(l=c.continue)!=null||(c.continue=!t._zod.def.abort),n.issues.push(issue(c))}},e(n.value,n)));return t}function number$3(e){return _coercedNumber(ZodNumber,e)}const HealthIssueSchema=object$1({type:_enum(["overwatering","underwatering","pest","disease","nutrient","light","other"]),severity:_enum(["low","medium","high"]),description:string$1().min(1),treatment:string$1().min(1)}),HealthAnalysisSchema$1=object$1({overallHealth:_enum(["excellent","good","fair","poor"]),issues:array$1(HealthIssueSchema),recommendations:array$1(string$1()),moistureLevel:number$3().min(0).max(100),growthStage:_enum(["seedling","juvenile","mature","flowering","dormant"]),confidence:number$3().min(0).max(100)}),CareProfileSchema$1=object$1({wateringFrequency:number$3().positive(),sunlightRequirement:_enum(["low","medium","high"]),humidityPreference:_enum(["low","medium","high"]),temperatureRange:object$1({min:number$3(),max:number$3()}),fertilizingFrequency:number$3().positive(),soilType:string$1().min(1),specialCare:array$1(string$1()).optional()}),PlantPersonalitySchema$1=object$1({traits:array$1(string$1()).min(1),communicationStyle:_enum(["cheerful","wise","dramatic","calm","playful"]),catchphrases:array$1(string$1()),moodFactors:object$1({health:number$3().min(0).max(1),care:number$3().min(0).max(1),attention:number$3().min(0).max(1)})}),AIAnalysisResponseSchema=object$1({species:string$1(),commonName:string$1(),variety:string$1().nullable().optional(),confidence:number$3().min(0).max(100),generalDescription:string$1().min(20),funFacts:array$1(string$1()),plantEnvironment:_enum(["interior","exterior","ambos"]),lightRequirements:_enum(["poca_luz","luz_indirecta","luz_directa_parcial","pleno_sol"]),health:HealthAnalysisSchema$1,careProfile:CareProfileSchema$1,personality:PlantPersonalitySchema$1}),InsightSchema=object$1({type:_enum(["info","warning","tip","alert"]),title:string$1(),message:string$1()}),InsightResponseSchema$1=array$1(InsightSchema),AiSchemas=Object.freeze(Object.defineProperty({__proto__:null,AIAnalysisResponseSchema,CareProfileSchema:CareProfileSchema$1,HealthAnalysisSchema:HealthAnalysisSchema$1,HealthIssueSchema,InsightResponseSchema:InsightResponseSchema$1,InsightSchema,PlantPersonalitySchema:PlantPersonalitySchema$1},Symbol.toStringTag,{value:"Module"})),{HealthAnalysisSchema,CareProfileSchema,PlantPersonalitySchema,InsightResponseSchema}=AiSchemas,PlantImageSchema=object$1({id:string$1().min(1,"Image ID is required"),url:string$1().url("Must be a valid URL"),timestamp:date$2(),healthAnalysis:HealthAnalysisSchema.optional(),isProfileImage:boolean()}),ChatMessageSchema=object$1({id:string$1().min(1,"Message ID is required"),sender:_enum(["user","plant","system"]),content:string$1().min(1,"Message content cannot be empty"),timestamp:date$2(),emotion:_enum(["alegre","triste","enojado","neutral","juguetón","agradecido","happy","sad","excited","worried","grateful"]).optional(),context:object$1({insights:array$1(object$1({type:_enum(["tip","warning","observation","recommendation"]),title:string$1(),description:string$1(),affectedPlants:array$1(string$1()).optional()})).optional(),suggestedActions:array$1(object$1({action:string$1(),priority:_enum(["low","medium","high"]),plantIds:array$1(string$1()).optional()})).optional()}).optional()}),PlantNotificationSchema=object$1({id:string$1().min(1,"Notification ID is required"),type:_enum(["watering","fertilizing","health_check","general"]),title:string$1().min(1,"Title is required"),message:string$1().min(1,"Message is required"),priority:_enum(["low","medium","high"]),scheduledFor:date$2(),completed:boolean()}),PlantSchema=object$1({id:string$1().uuid(),name:string$1(),species:string$1(),variety:string$1().optional(),nickname:string$1().optional(),description:string$1().optional(),funFacts:array$1(string$1()).optional(),location:string$1(),plantEnvironment:_enum(["interior","exterior","ambos"]).optional(),lightRequirements:_enum(["poca_luz","luz_indirecta","luz_directa_parcial","pleno_sol"]).optional(),dateAdded:date$2(),lastWatered:date$2().optional(),lastFertilized:date$2().optional(),images:array$1(PlantImageSchema),healthScore:number$4().min(0).max(100),careProfile:CareProfileSchema,personality:PlantPersonalitySchema,chatHistory:array$1(ChatMessageSchema),notifications:array$1(PlantNotificationSchema)}),PlantSummarySchema=object$1({id:string$1().min(1,"Plant ID is required"),name:string$1().min(1,"Plant name is required"),nickname:string$1().optional(),species:string$1().min(1,"Species is required"),location:string$1().min(1,"Location is required"),plantEnvironment:_enum(["interior","exterior","ambos"]).optional(),lightRequirements:_enum(["poca_luz","luz_indirecta","luz_directa_parcial","pleno_sol"]).optional(),healthScore:number$4().min(0).max(100),profileImageUrl:string$1().url().optional(),lastWatered:date$2().optional(),wateringFrequency:number$4().positive().optional()});object$1({content:string$1(),emotion:_enum(["alegre","triste","enojado","neutral","juguetón","agradecido","happy","sad","excited","worried","grateful"]),mood:string$1().optional()});object$1({changes:array$1(string$1()),healthImprovement:number$4(),recommendations:array$1(string$1()),newHealthScore:number$4().min(0).max(100)});PlantSchema.omit({id:!0,dateAdded:!0,chatHistory:!0,notifications:!0}).partial({images:!0,healthScore:!0,careProfile:!0,personality:!0});const SignUpSchema=object$1({fullName:string$1().min(3,"El nombre debe tener al menos 3 caracteres"),email:string$1().email("Email inválido"),password:string$1().min(6,"La contraseña debe tener al menos 6 caracteres"),confirmPassword:string$1().min(6)}).refine(e=>e.password===e.confirmPassword,{message:"Las contraseñas no coinciden",path:["confirmPassword"]}),SignInSchema=object$1({email:string$1().email(),password:string$1().min(1,"Password is required")}),GardenChatMessageSchema=object$1({id:string$1().min(1,"Message ID is required"),sender:_enum(["user","ai"]),content:string$1().min(1,"Message content cannot be empty"),timestamp:date$2(),context:object$1({plantsAnalyzed:array$1(string$1()).optional(),queryType:_enum(["general","health_analysis","care_comparison","disease_prevention","growth_tracking"]).optional(),insights:array$1(object$1({type:_enum(["tip","warning","observation","recommendation"]),title:string$1(),description:string$1(),affectedPlants:array$1(string$1()).optional()})).optional(),suggestedActions:array$1(object$1({action:string$1(),priority:_enum(["low","medium","high"]),plantIds:array$1(string$1()).optional()})).optional()}).optional()}),GardenAnalysisContextSchema=object$1({totalPlants:number$4(),plantsData:array$1(PlantSummarySchema),averageHealthScore:number$4(),commonIssues:array$1(string$1()),careScheduleSummary:object$1({needsWatering:array$1(string$1()),needsFertilizing:array$1(string$1()),healthConcerns:array$1(string$1())}),environmentalFactors:object$1({locations:array$1(string$1()),lightConditions:array$1(string$1()),humidityNeeds:array$1(string$1())})});object$1({id:string$1().uuid(),userId:string$1().uuid(),messages:array$1(GardenChatMessageSchema),createdAt:date$2(),updatedAt:date$2(),context:GardenAnalysisContextSchema.optional()});object$1({content:string$1().min(1),insights:array$1(object$1({type:_enum(["tip","warning","observation","recommendation"]),title:string$1(),description:string$1(),affectedPlants:array$1(string$1()).optional()})).optional(),suggestedActions:array$1(object$1({action:string$1(),priority:_enum(["low","medium","high"]),plantIds:array$1(string$1()).optional()})).optional()});let authListener=null;const useAuthStore=create((e,t)=>({user:null,profile:null,session:null,isLoading:!1,error:null,isInitialized:!1,initialize:async()=>{var a;authListener!=null&&authListener.subscription&&authListener.subscription.unsubscribe();try{const i=supabase.auth.getSession(),o=new Promise((c,u)=>setTimeout(()=>u(new Error("Session timeout after 8 seconds")),8e3)),{data:{session:s},error:l}=await Promise.race([i,o]);if(l&&console.warn("Session error:",l.message),e({session:s,user:(a=s==null?void 0:s.user)!=null?a:null}),s!=null&&s.user)try{const c=supabase.from("profiles").select("*").eq("id",s.user.id).single(),u=new Promise((f,h)=>setTimeout(()=>h(new Error("Profile timeout")),5e3)),{data:d,error:p}=await Promise.race([c,u]);p?console.warn("Profile fetch error:",p.message):e({profile:d})}catch(c){console.warn("Profile fetch failed:",c.message)}else e({profile:null})}catch(i){console.warn("Auth initialization failed, continuing without session:",i.message),e({session:null,user:null,profile:null,error:null})}finally{e({isInitialized:!0})}const{data:n}=supabase.auth.onAuthStateChange(async(i,o)=>{var s;if(e({session:o,user:(s=o==null?void 0:o.user)!=null?s:null,isLoading:!1}),i==="SIGNED_OUT"){e({profile:null});return}if(o!=null&&o.user)try{const{data:l,error:c}=await supabase.from("profiles").select("*").eq("id",o.user.id).single();if(c)throw c;e({profile:l})}catch(l){console.error("Error fetching profile on auth change:",l)}});authListener=n},signIn:async n=>{e({isLoading:!0,error:null});try{const{email:a,password:i}=SignInSchema.parse(n),{error:o}=await supabase.auth.signInWithPassword({email:a,password:i});if(o)throw o}catch(a){const i=a.message.includes("Invalid login credentials")?"Credenciales inválidas.":"Error al iniciar sesión.";throw e({error:i}),console.error(a),a}finally{e({isLoading:!1})}},signUp:async n=>{e({isLoading:!0,error:null});try{const{email:a,password:i,fullName:o}=SignUpSchema.parse(n),{error:s}=await supabase.auth.signUp({email:a,password:i,options:{data:{full_name:o}}});if(s)throw s}catch(a){const i=a.message.includes("already registered")?"El usuario ya está registrado.":"Error al registrarse.";throw e({error:i}),console.error(a),a}finally{e({isLoading:!1})}},signOut:async()=>{e({isLoading:!0}),gardenCacheService.clearAll();const{error:n}=await supabase.auth.signOut();n&&(console.error("Error signing out:",n),e({error:"Error al cerrar sesión.",isLoading:!1})),e({session:null,user:null,profile:null,isLoading:!1})},clearError:()=>e({error:null})}));function __insertCSS(e){if(typeof document=="undefined")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}const getAsset=e=>{switch(e){case"success":return SuccessIcon;case"info":return InfoIcon;case"warning":return WarningIcon;case"error":return ErrorIcon;default:return null}},bars=Array(12).fill(0),Loader=({visible:e,className:t})=>React$3.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},React$3.createElement("div",{className:"sonner-spinner"},bars.map((n,a)=>React$3.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${a}`})))),SuccessIcon=React$3.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},React$3.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),WarningIcon=React$3.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},React$3.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),InfoIcon=React$3.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},React$3.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),ErrorIcon=React$3.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},React$3.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),CloseIcon=React$3.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},React$3.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),React$3.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),useIsDocumentHidden=()=>{const[e,t]=React$3.useState(document.hidden);return React$3.useEffect(()=>{const n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e};let toastsCounter=1;class Observer{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const n=this.subscribers.indexOf(t);this.subscribers.splice(n,1)}),this.publish=t=>{this.subscribers.forEach(n=>n(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var n;const{message:a,...i}=t,o=typeof(t==null?void 0:t.id)=="number"||((n=t.id)==null?void 0:n.length)>0?t.id:toastsCounter++,s=this.toasts.find(c=>c.id===o),l=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),s?this.toasts=this.toasts.map(c=>c.id===o?(this.publish({...c,...t,id:o,title:a}),{...c,...t,id:o,dismissible:l,title:a}):c):this.addToast({title:a,...i,dismissible:l,id:o}),o},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:t,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(a=>a({id:n.id,dismiss:!0}))}),t),this.message=(t,n)=>this.create({...n,message:t}),this.error=(t,n)=>this.create({...n,message:t,type:"error"}),this.success=(t,n)=>this.create({...n,type:"success",message:t}),this.info=(t,n)=>this.create({...n,type:"info",message:t}),this.warning=(t,n)=>this.create({...n,type:"warning",message:t}),this.loading=(t,n)=>this.create({...n,type:"loading",message:t}),this.promise=(t,n)=>{if(!n)return;let a;n.loading!==void 0&&(a=this.create({...n,promise:t,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const i=Promise.resolve(t instanceof Function?t():t);let o=a!==void 0,s;const l=i.then(async u=>{if(s=["resolve",u],React$3.isValidElement(u))o=!1,this.create({id:a,type:"default",message:u});else if(isHttpResponse(u)&&!u.ok){o=!1;const p=typeof n.error=="function"?await n.error(`HTTP error! status: ${u.status}`):n.error,f=typeof n.description=="function"?await n.description(`HTTP error! status: ${u.status}`):n.description,v=typeof p=="object"&&!React$3.isValidElement(p)?p:{message:p};this.create({id:a,type:"error",description:f,...v})}else if(u instanceof Error){o=!1;const p=typeof n.error=="function"?await n.error(u):n.error,f=typeof n.description=="function"?await n.description(u):n.description,v=typeof p=="object"&&!React$3.isValidElement(p)?p:{message:p};this.create({id:a,type:"error",description:f,...v})}else if(n.success!==void 0){o=!1;const p=typeof n.success=="function"?await n.success(u):n.success,f=typeof n.description=="function"?await n.description(u):n.description,v=typeof p=="object"&&!React$3.isValidElement(p)?p:{message:p};this.create({id:a,type:"success",description:f,...v})}}).catch(async u=>{if(s=["reject",u],n.error!==void 0){o=!1;const d=typeof n.error=="function"?await n.error(u):n.error,p=typeof n.description=="function"?await n.description(u):n.description,h=typeof d=="object"&&!React$3.isValidElement(d)?d:{message:d};this.create({id:a,type:"error",description:p,...h})}}).finally(()=>{o&&(this.dismiss(a),a=void 0),n.finally==null||n.finally.call(n)}),c=()=>new Promise((u,d)=>l.then(()=>s[0]==="reject"?d(s[1]):u(s[1])).catch(d));return typeof a!="string"&&typeof a!="number"?{unwrap:c}:Object.assign(a,{unwrap:c})},this.custom=(t,n)=>{const a=(n==null?void 0:n.id)||toastsCounter++;return this.create({jsx:t(a),id:a,...n}),a},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const ToastState=new Observer,toastFunction=(e,t)=>{const n=(t==null?void 0:t.id)||toastsCounter++;return ToastState.addToast({title:e,...t,id:n}),n},isHttpResponse=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",basicToast=toastFunction,getHistory=()=>ToastState.toasts,getToasts=()=>ToastState.getActiveToasts(),toast=Object.assign(basicToast,{success:ToastState.success,info:ToastState.info,warning:ToastState.warning,error:ToastState.error,custom:ToastState.custom,message:ToastState.message,promise:ToastState.promise,dismiss:ToastState.dismiss,loading:ToastState.loading},{getHistory,getToasts});__insertCSS("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function isAction$1(e){return e.label!==void 0}const VISIBLE_TOASTS_AMOUNT=3,VIEWPORT_OFFSET="24px",MOBILE_VIEWPORT_OFFSET="16px",TOAST_LIFETIME=4e3,TOAST_WIDTH=356,GAP=14,SWIPE_THRESHOLD=45,TIME_BEFORE_UNMOUNT=200;function cn$1(...e){return e.filter(Boolean).join(" ")}function getDefaultSwipeDirections(e){const[t,n]=e.split("-"),a=[];return t&&a.push(t),n&&a.push(n),a}const Toast=e=>{var t,n,a,i,o,s,l,c,u;const{invert:d,toast:p,unstyled:f,interacting:h,setHeights:v,visibleToasts:b,heights:g,index:E,toasts:j,expanded:w,removeToast:S,defaultRichColors:A,closeButton:R,style:_,cancelButtonStyle:$,actionButtonStyle:C,className:O="",descriptionClassName:N="",duration:T,position:L,gap:B,expandByDefault:I,classNames:z,icons:F,closeButtonAriaLabel:Z="Close toast"}=e,[U,Q]=React$3.useState(null),[W,D]=React$3.useState(null),[H,J]=React$3.useState(!1),[ee,Y]=React$3.useState(!1),[ye,xe]=React$3.useState(!1),[M,K]=React$3.useState(!1),[V,k]=React$3.useState(!1),[ae,G]=React$3.useState(0),[se,ie]=React$3.useState(0),le=React$3.useRef(p.duration||T||TOAST_LIFETIME),we=React$3.useRef(null),he=React$3.useRef(null),Me=E===0,Le=E+1<=b,ce=p.type,be=p.dismissible!==!1,ze=p.className||"",Fe=p.descriptionClassName||"",Ae=React$3.useMemo(()=>g.findIndex(q=>q.toastId===p.id)||0,[g,p.id]),Be=React$3.useMemo(()=>{var q;return(q=p.closeButton)!=null?q:R},[p.closeButton,R]),Ce=React$3.useMemo(()=>p.duration||T||TOAST_LIFETIME,[p.duration,T]),_e=React$3.useRef(0),Ee=React$3.useRef(0),Ne=React$3.useRef(0),je=React$3.useRef(null),[We,Ue]=L.split("-"),Te=React$3.useMemo(()=>g.reduce((q,te,oe)=>oe>=Ae?q:q+te.height,0),[g,Ae]),ke=useIsDocumentHidden(),Ze=p.invert||d,$e=ce==="loading";Ee.current=React$3.useMemo(()=>Ae*B+Te,[Ae,Te]),React$3.useEffect(()=>{le.current=Ce},[Ce]),React$3.useEffect(()=>{J(!0)},[]),React$3.useEffect(()=>{const q=he.current;if(q){const te=q.getBoundingClientRect().height;return ie(te),v(oe=>[{toastId:p.id,height:te,position:p.position},...oe]),()=>v(oe=>oe.filter(ue=>ue.toastId!==p.id))}},[v,p.id]),React$3.useLayoutEffect(()=>{if(!H)return;const q=he.current,te=q.style.height;q.style.height="auto";const oe=q.getBoundingClientRect().height;q.style.height=te,ie(oe),v(ue=>ue.find(ne=>ne.toastId===p.id)?ue.map(ne=>ne.toastId===p.id?{...ne,height:oe}:ne):[{toastId:p.id,height:oe,position:p.position},...ue])},[H,p.title,p.description,v,p.id,p.jsx,p.action,p.cancel]);const ge=React$3.useCallback(()=>{Y(!0),G(Ee.current),v(q=>q.filter(te=>te.toastId!==p.id)),setTimeout(()=>{S(p)},TIME_BEFORE_UNMOUNT)},[p,S,v,Ee]);React$3.useEffect(()=>{if(p.promise&&ce==="loading"||p.duration===1/0||p.type==="loading")return;let q;return w||h||ke?(()=>{if(Ne.current<_e.current){const ue=new Date().getTime()-_e.current;le.current=le.current-ue}Ne.current=new Date().getTime()})():(()=>{le.current!==1/0&&(_e.current=new Date().getTime(),q=setTimeout(()=>{p.onAutoClose==null||p.onAutoClose.call(p,p),ge()},le.current))})(),()=>clearTimeout(q)},[w,h,p,ce,ke,ge]),React$3.useEffect(()=>{p.delete&&(ge(),p.onDismiss==null||p.onDismiss.call(p,p))},[ge,p.delete]);function He(){var q;if(F!=null&&F.loading){var te;return React$3.createElement("div",{className:cn$1(z==null?void 0:z.loader,p==null||(te=p.classNames)==null?void 0:te.loader,"sonner-loader"),"data-visible":ce==="loading"},F.loading)}return React$3.createElement(Loader,{className:cn$1(z==null?void 0:z.loader,p==null||(q=p.classNames)==null?void 0:q.loader),visible:ce==="loading"})}const Ke=p.icon||(F==null?void 0:F[ce])||getAsset(ce);var Oe,Ie;return React$3.createElement("li",{tabIndex:0,ref:he,className:cn$1(O,ze,z==null?void 0:z.toast,p==null||(t=p.classNames)==null?void 0:t.toast,z==null?void 0:z.default,z==null?void 0:z[ce],p==null||(n=p.classNames)==null?void 0:n[ce]),"data-sonner-toast":"","data-rich-colors":(Oe=p.richColors)!=null?Oe:A,"data-styled":!(p.jsx||p.unstyled||f),"data-mounted":H,"data-promise":!!p.promise,"data-swiped":V,"data-removed":ee,"data-visible":Le,"data-y-position":We,"data-x-position":Ue,"data-index":E,"data-front":Me,"data-swiping":ye,"data-dismissible":be,"data-type":ce,"data-invert":Ze,"data-swipe-out":M,"data-swipe-direction":W,"data-expanded":!!(w||I&&H),style:{"--index":E,"--toasts-before":E,"--z-index":j.length-E,"--offset":`${ee?ae:Ee.current}px`,"--initial-height":I?"auto":`${se}px`,..._,...p.style},onDragEnd:()=>{xe(!1),Q(null),je.current=null},onPointerDown:q=>{q.button!==2&&($e||!be||(we.current=new Date,G(Ee.current),q.target.setPointerCapture(q.pointerId),q.target.tagName!=="BUTTON"&&(xe(!0),je.current={x:q.clientX,y:q.clientY})))},onPointerUp:()=>{var q,te,oe;if(M||!be)return;je.current=null;const ue=Number(((q=he.current)==null?void 0:q.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Pe=Number(((te=he.current)==null?void 0:te.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),ne=new Date().getTime()-((oe=we.current)==null?void 0:oe.getTime()),de=U==="x"?ue:Pe,Re=Math.abs(de)/ne;if(Math.abs(de)>=SWIPE_THRESHOLD||Re>.11){G(Ee.current),p.onDismiss==null||p.onDismiss.call(p,p),D(U==="x"?ue>0?"right":"left":Pe>0?"down":"up"),ge(),K(!0);return}else{var me,pe;(me=he.current)==null||me.style.setProperty("--swipe-amount-x","0px"),(pe=he.current)==null||pe.style.setProperty("--swipe-amount-y","0px")}k(!1),xe(!1),Q(null)},onPointerMove:q=>{var te,oe,ue;if(!je.current||!be||((te=window.getSelection())==null?void 0:te.toString().length)>0)return;const ne=q.clientY-je.current.y,de=q.clientX-je.current.x;var Re;const me=(Re=e.swipeDirections)!=null?Re:getDefaultSwipeDirections(L);!U&&(Math.abs(de)>1||Math.abs(ne)>1)&&Q(Math.abs(de)>Math.abs(ne)?"x":"y");let pe={x:0,y:0};const De=ve=>1/(1.5+Math.abs(ve)/20);if(U==="y"){if(me.includes("top")||me.includes("bottom"))if(me.includes("top")&&ne<0||me.includes("bottom")&&ne>0)pe.y=ne;else{const ve=ne*De(ne);pe.y=Math.abs(ve)<Math.abs(ne)?ve:ne}}else if(U==="x"&&(me.includes("left")||me.includes("right")))if(me.includes("left")&&de<0||me.includes("right")&&de>0)pe.x=de;else{const ve=de*De(de);pe.x=Math.abs(ve)<Math.abs(de)?ve:de}(Math.abs(pe.x)>0||Math.abs(pe.y)>0)&&k(!0),(oe=he.current)==null||oe.style.setProperty("--swipe-amount-x",`${pe.x}px`),(ue=he.current)==null||ue.style.setProperty("--swipe-amount-y",`${pe.y}px`)}},Be&&!p.jsx&&ce!=="loading"?React$3.createElement("button",{"aria-label":Z,"data-disabled":$e,"data-close-button":!0,onClick:$e||!be?()=>{}:()=>{ge(),p.onDismiss==null||p.onDismiss.call(p,p)},className:cn$1(z==null?void 0:z.closeButton,p==null||(a=p.classNames)==null?void 0:a.closeButton)},(Ie=F==null?void 0:F.close)!=null?Ie:CloseIcon):null,(ce||p.icon||p.promise)&&p.icon!==null&&((F==null?void 0:F[ce])!==null||p.icon)?React$3.createElement("div",{"data-icon":"",className:cn$1(z==null?void 0:z.icon,p==null||(i=p.classNames)==null?void 0:i.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||He():null,p.type!=="loading"?Ke:null):null,React$3.createElement("div",{"data-content":"",className:cn$1(z==null?void 0:z.content,p==null||(o=p.classNames)==null?void 0:o.content)},React$3.createElement("div",{"data-title":"",className:cn$1(z==null?void 0:z.title,p==null||(s=p.classNames)==null?void 0:s.title)},p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title),p.description?React$3.createElement("div",{"data-description":"",className:cn$1(N,Fe,z==null?void 0:z.description,p==null||(l=p.classNames)==null?void 0:l.description)},typeof p.description=="function"?p.description():p.description):null),React$3.isValidElement(p.cancel)?p.cancel:p.cancel&&isAction$1(p.cancel)?React$3.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||$,onClick:q=>{isAction$1(p.cancel)&&be&&(p.cancel.onClick==null||p.cancel.onClick.call(p.cancel,q),ge())},className:cn$1(z==null?void 0:z.cancelButton,p==null||(c=p.classNames)==null?void 0:c.cancelButton)},p.cancel.label):null,React$3.isValidElement(p.action)?p.action:p.action&&isAction$1(p.action)?React$3.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||C,onClick:q=>{isAction$1(p.action)&&(p.action.onClick==null||p.action.onClick.call(p.action,q),!q.defaultPrevented&&ge())},className:cn$1(z==null?void 0:z.actionButton,p==null||(u=p.classNames)==null?void 0:u.actionButton)},p.action.label):null)};function getDocumentDirection(){if(typeof window=="undefined"||typeof document=="undefined")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function assignOffset(e,t){const n={};return[e,t].forEach((a,i)=>{const o=i===1,s=o?"--mobile-offset":"--offset",l=o?MOBILE_VIEWPORT_OFFSET:VIEWPORT_OFFSET;function c(u){["top","right","bottom","left"].forEach(d=>{n[`${s}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof a=="number"||typeof a=="string"?c(a):typeof a=="object"?["top","right","bottom","left"].forEach(u=>{a[u]===void 0?n[`${s}-${u}`]=l:n[`${s}-${u}`]=typeof a[u]=="number"?`${a[u]}px`:a[u]}):c(l)}),n}const Toaster=React$3.forwardRef(function(t,n){const{invert:a,position:i="bottom-right",hotkey:o=["altKey","KeyT"],expand:s,closeButton:l,className:c,offset:u,mobileOffset:d,theme:p="light",richColors:f,duration:h,style:v,visibleToasts:b=VISIBLE_TOASTS_AMOUNT,toastOptions:g,dir:E=getDocumentDirection(),gap:j=GAP,icons:w,containerAriaLabel:S="Notifications"}=t,[A,R]=React$3.useState([]),_=React$3.useMemo(()=>Array.from(new Set([i].concat(A.filter(W=>W.position).map(W=>W.position)))),[A,i]),[$,C]=React$3.useState([]),[O,N]=React$3.useState(!1),[T,L]=React$3.useState(!1),[B,I]=React$3.useState(p!=="system"?p:typeof window!="undefined"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),z=React$3.useRef(null),F=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),Z=React$3.useRef(null),U=React$3.useRef(!1),Q=React$3.useCallback(W=>{R(D=>{var H;return(H=D.find(J=>J.id===W.id))!=null&&H.delete||ToastState.dismiss(W.id),D.filter(({id:J})=>J!==W.id)})},[]);return React$3.useEffect(()=>ToastState.subscribe(W=>{if(W.dismiss){requestAnimationFrame(()=>{R(D=>D.map(H=>H.id===W.id?{...H,delete:!0}:H))});return}setTimeout(()=>{ReactDOM.flushSync(()=>{R(D=>{const H=D.findIndex(J=>J.id===W.id);return H!==-1?[...D.slice(0,H),{...D[H],...W},...D.slice(H+1)]:[W,...D]})})})}),[A]),React$3.useEffect(()=>{if(p!=="system"){I(p);return}if(p==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?I("dark"):I("light")),typeof window=="undefined")return;const W=window.matchMedia("(prefers-color-scheme: dark)");try{W.addEventListener("change",({matches:D})=>{I(D?"dark":"light")})}catch(D){W.addListener(({matches:H})=>{try{I(H?"dark":"light")}catch(J){console.error(J)}})}},[p]),React$3.useEffect(()=>{A.length<=1&&N(!1)},[A]),React$3.useEffect(()=>{const W=D=>{var H;if(o.every(Y=>D[Y]||D.code===Y)){var ee;N(!0),(ee=z.current)==null||ee.focus()}D.code==="Escape"&&(document.activeElement===z.current||(H=z.current)!=null&&H.contains(document.activeElement))&&N(!1)};return document.addEventListener("keydown",W),()=>document.removeEventListener("keydown",W)},[o]),React$3.useEffect(()=>{if(z.current)return()=>{Z.current&&(Z.current.focus({preventScroll:!0}),Z.current=null,U.current=!1)}},[z.current]),React$3.createElement("section",{ref:n,"aria-label":`${S} ${F}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},_.map((W,D)=>{var H;const[J,ee]=W.split("-");return A.length?React$3.createElement("ol",{key:W,dir:E==="auto"?getDocumentDirection():E,tabIndex:-1,ref:z,className:c,"data-sonner-toaster":!0,"data-sonner-theme":B,"data-y-position":J,"data-x-position":ee,style:{"--front-toast-height":`${((H=$[0])==null?void 0:H.height)||0}px`,"--width":`${TOAST_WIDTH}px`,"--gap":`${j}px`,...v,...assignOffset(u,d)},onBlur:Y=>{U.current&&!Y.currentTarget.contains(Y.relatedTarget)&&(U.current=!1,Z.current&&(Z.current.focus({preventScroll:!0}),Z.current=null))},onFocus:Y=>{Y.target instanceof HTMLElement&&Y.target.dataset.dismissible==="false"||U.current||(U.current=!0,Z.current=Y.relatedTarget)},onMouseEnter:()=>N(!0),onMouseMove:()=>N(!0),onMouseLeave:()=>{T||N(!1)},onDragEnd:()=>N(!1),onPointerDown:Y=>{Y.target instanceof HTMLElement&&Y.target.dataset.dismissible==="false"||L(!0)},onPointerUp:()=>L(!1)},A.filter(Y=>!Y.position&&D===0||Y.position===W).map((Y,ye)=>{var xe,M;return React$3.createElement(Toast,{key:Y.id,icons:w,index:ye,toast:Y,defaultRichColors:f,duration:(xe=g==null?void 0:g.duration)!=null?xe:h,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:a,visibleToasts:b,closeButton:(M=g==null?void 0:g.closeButton)!=null?M:l,interacting:T,position:W,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,closeButtonAriaLabel:g==null?void 0:g.closeButtonAriaLabel,removeToast:Q,toasts:A.filter(K=>K.position==Y.position),heights:$.filter(K=>K.position==Y.position),setHeights:C,expandByDefault:s,gap:j,expanded:O,swipeDirections:t.swipeDirections})})):null}))}),ToastContext$1=reactExports.createContext(void 0),iconMap$1={success:CircleCheckBig,error:CircleX,warning:CircleAlert,info:Info,ai:Brain,camera:Camera,plant:Leaf,sync:RotateCw},styleMap={success:{bg:"bg-green-50 dark:bg-green-900/20",border:"border-green-200 dark:border-green-800",icon:"text-green-500",title:"text-green-800 dark:text-green-200",message:"text-green-700 dark:text-green-300"},error:{bg:"bg-red-50 dark:bg-red-900/20",border:"border-red-200 dark:border-red-800",icon:"text-red-500",title:"text-red-800 dark:text-red-200",message:"text-red-700 dark:text-red-300"},warning:{bg:"bg-amber-50 dark:bg-amber-900/20",border:"border-amber-200 dark:border-amber-800",icon:"text-amber-500",title:"text-amber-800 dark:text-amber-200",message:"text-amber-700 dark:text-amber-300"},info:{bg:"bg-blue-50 dark:bg-blue-900/20",border:"border-blue-200 dark:border-blue-800",icon:"text-blue-500",title:"text-blue-800 dark:text-blue-200",message:"text-blue-700 dark:text-blue-300"},ai:{bg:"bg-purple-50 dark:bg-purple-900/20",border:"border-purple-200 dark:border-purple-800",icon:"text-purple-500",title:"text-purple-800 dark:text-purple-200",message:"text-purple-700 dark:text-purple-300"},camera:{bg:"bg-indigo-50 dark:bg-indigo-900/20",border:"border-indigo-200 dark:border-indigo-800",icon:"text-indigo-500",title:"text-indigo-800 dark:text-indigo-200",message:"text-indigo-700 dark:text-indigo-300"},plant:{bg:"bg-green-50 dark:bg-green-900/20",border:"border-green-200 dark:border-green-800",icon:"text-green-500",title:"text-green-800 dark:text-green-200",message:"text-green-700 dark:text-green-300"},sync:{bg:"bg-gray-50 dark:bg-gray-900/20",border:"border-gray-200 dark:border-gray-800",icon:"text-gray-500",title:"text-gray-800 dark:text-gray-200",message:"text-gray-700 dark:text-gray-300"}},ToastProvider$1=({children:e})=>{const[t,n]=reactExports.useState([]),a=()=>Math.random().toString(36).substring(2,9),i=reactExports.useCallback(h=>{const v=a(),b={id:v,duration:5e3,...h};return n(g=>[...g,b]),!b.persistent&&b.duration&&b.duration>0&&setTimeout(()=>{o(v)},b.duration),v},[]),o=reactExports.useCallback(h=>{n(v=>v.filter(b=>b.id!==h))},[]),s=reactExports.useCallback(()=>{n([])},[]),l=reactExports.useCallback((h,v,b)=>i({type:"success",title:h,message:v,...b}),[i]),c=reactExports.useCallback((h,v,b)=>i({type:"error",title:h,message:v,duration:8e3,...b}),[i]),u=reactExports.useCallback((h,v,b)=>i({type:"warning",title:h,message:v,duration:6e3,...b}),[i]),d=reactExports.useCallback((h,v,b)=>i({type:"info",title:h,message:v,...b}),[i]),p=reactExports.useCallback((h,v,b)=>i({type:"ai",title:h,message:v,...b}),[i]),f={toasts:t,addToast:i,removeToast:o,clearAll:s,showSuccess:l,showError:c,showWarning:u,showInfo:d,showAI:p};return jsxRuntimeExports.jsxs(ToastContext$1.Provider,{value:f,children:[e,jsxRuntimeExports.jsx(ToastContainer$1,{})]})},ToastContainer$1=()=>{const e=reactExports.useContext(ToastContext$1);if(!e)return null;const{toasts:t,removeToast:n}=e;return jsxRuntimeExports.jsx("div",{className:"fixed top-4 right-4 z-[9999] space-y-2 max-w-sm w-full",children:jsxRuntimeExports.jsx(AnimatePresence,{children:t.map(a=>jsxRuntimeExports.jsx(ToastItem,{toast:a,onRemove:n},a.id))})})},ToastItem=({toast:e,onRemove:t})=>{const n=e.icon||iconMap$1[e.type],a=styleMap[e.type];return jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,x:300,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:300,scale:.95},transition:{duration:.2,ease:"easeOut"},className:`
        ${a.bg} ${a.border}
        border rounded-lg p-4 shadow-lg backdrop-blur-sm
        max-w-sm w-full
      `,children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx("div",{className:`${a.icon} flex-shrink-0 mt-0.5`,children:jsxRuntimeExports.jsx(n,{className:"w-5 h-5"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("h4",{className:`${a.title} text-sm font-medium mb-1`,children:e.title}),e.message&&jsxRuntimeExports.jsx("p",{className:`${a.message} text-sm leading-relaxed`,children:e.message}),e.actions&&e.actions.length>0&&jsxRuntimeExports.jsx("div",{className:"flex gap-2 mt-3",children:e.actions.map((i,o)=>jsxRuntimeExports.jsx("button",{onClick:()=>{i.onClick(),t(e.id)},className:`
                    text-xs font-medium px-2 py-1 rounded transition-colors
                    ${i.variant==="primary"?`${a.icon} bg-white/20 hover:bg-white/30`:`${a.message} hover:${a.title}`}
                  `,children:i.label},o))})]}),jsxRuntimeExports.jsx("button",{onClick:()=>t(e.id),className:`${a.icon} hover:opacity-70 transition-opacity flex-shrink-0`,"aria-label":"Cerrar notificación",children:jsxRuntimeExports.jsx(X,{className:"w-4 h-4"})})]})})},useToast$1=()=>{const e=reactExports.useContext(ToastContext$1);if(!e)throw new Error("useToast must be used within a ToastProvider");return e};class ToastService{constructor(){fe(this,"listeners",new Set)}subscribe(t){return this.listeners.add(t),()=>{this.listeners.delete(t)}}emit(t){this.listeners.forEach(n=>n(t))}success(t,n,a){this.emit({type:"success",title:t,message:n,duration:a})}error(t,n,a){this.emit({type:"error",title:t,message:n,duration:a})}warning(t,n,a){this.emit({type:"warning",title:t,message:n,duration:a})}info(t,n,a){this.emit({type:"info",title:t,message:n,duration:a})}}const toastService=new ToastService,ToastContext=reactExports.createContext(void 0),useToast=()=>{const e=reactExports.useContext(ToastContext);if(!e)throw new Error("useToast must be used within a ToastProvider");return e},getToastIcon=e=>{switch(e){case"success":return jsxRuntimeExports.jsx(CircleCheckBig,{size:20,className:"text-green-500"});case"error":return jsxRuntimeExports.jsx(CircleAlert,{size:20,className:"text-red-500"});case"warning":return jsxRuntimeExports.jsx(TriangleAlert,{size:20,className:"text-yellow-500"});case"info":return jsxRuntimeExports.jsx(Info,{size:20,className:"text-blue-500"})}},getToastStyles=e=>{switch(e){case"success":return"border-green-200 bg-green-50 dark:bg-green-900/20 dark:border-green-800";case"error":return"border-red-200 bg-red-50 dark:bg-red-900/20 dark:border-red-800";case"warning":return"border-yellow-200 bg-yellow-50 dark:bg-yellow-900/20 dark:border-yellow-800";case"info":return"border-blue-200 bg-blue-50 dark:bg-blue-900/20 dark:border-blue-800"}},ToastProvider=({children:e})=>{const[t,n]=reactExports.useState([]),a=reactExports.useCallback(s=>{const l=`toast-${Date.now()}-${Math.random()}`,c={id:l,duration:5e3,...s};n(u=>[...u,c]),c.duration!==0&&setTimeout(()=>{i(l)},c.duration)},[]);reactExports.useEffect(()=>toastService.subscribe(l=>{a(l)}),[a]);const i=reactExports.useCallback(s=>{n(l=>l.filter(c=>c.id!==s))},[]),o=reactExports.useCallback(()=>{n([])},[]);return jsxRuntimeExports.jsxs(ToastContext.Provider,{value:{toasts:t,addToast:a,removeToast:i,clearToasts:o},children:[e,jsxRuntimeExports.jsx(ToastContainer,{})]})},ToastContainer=()=>{const{toasts:e,removeToast:t}=useToast();return jsxRuntimeExports.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:jsxRuntimeExports.jsx(AnimatePresence,{children:e.map(n=>jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,x:300,scale:.8},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:300,scale:.8},transition:{type:"spring",damping:25,stiffness:300},className:`max-w-sm w-full rounded-lg border p-4 shadow-lg ${getToastStyles(n.type)}`,role:"alert","aria-live":"assertive",tabIndex:0,children:jsxRuntimeExports.jsxs("div",{className:"flex items-start space-x-3",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0 mt-0.5",children:getToastIcon(n.type)}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:n.title}),n.message&&jsxRuntimeExports.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:n.message})]}),jsxRuntimeExports.jsx("button",{onClick:()=>t(n.id),className:"flex-shrink-0 ml-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors","aria-label":"Cerrar notificación",children:jsxRuntimeExports.jsx(X,{size:16})})]})},n.id))})})},PERFORMANCE_CONFIG={QUERY:{STALE_TIME:{MEDIUM:1e3*60*15},GC_TIME:{MEDIUM:1e3*60*30,LONG:1e3*60*60},RETRY:{COUNT:1,DELAY:1e3}}},performanceUtils={measureTime:async(e,t)=>typeof t=="function"?await t():t,markStart:e=>{},markEnd:e=>{},debounce:(e,t)=>{let n;return(...a)=>{clearTimeout(n),n=setTimeout(()=>e.apply(void 0,a),t)}},throttle:(e,t)=>{let n;return(...a)=>{n||(e.apply(void 0,a),n=!0,setTimeout(()=>n=!1,t))}}},usePerformanceMonitoring=()=>(reactExports.useEffect(()=>{},[]),{measureTime:performanceUtils.measureTime,markStart:performanceUtils.markStart,markEnd:performanceUtils.markEnd,debounce:performanceUtils.debounce,throttle:performanceUtils.throttle}),initViewportFix=()=>{var t;const e=()=>{const n=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${n}px`),typeof CSS!="undefined"&&CSS.supports&&CSS.supports("padding","env(safe-area-inset-top)")?(document.documentElement.style.setProperty("--safe-area-top","env(safe-area-inset-top)"),document.documentElement.style.setProperty("--safe-area-bottom","env(safe-area-inset-bottom)"),document.documentElement.style.setProperty("--safe-area-left","env(safe-area-inset-left)"),document.documentElement.style.setProperty("--safe-area-right","env(safe-area-inset-right)")):(document.documentElement.style.setProperty("--safe-area-top","0px"),document.documentElement.style.setProperty("--safe-area-bottom","0px"),document.documentElement.style.setProperty("--safe-area-left","0px"),document.documentElement.style.setProperty("--safe-area-right","0px"))};return e(),window.addEventListener("resize",e),window.addEventListener("orientationchange",()=>{setTimeout(e,100)}),"visualViewport"in window&&((t=window.visualViewport)==null||t.addEventListener("resize",e)),()=>{var n;window.removeEventListener("resize",e),window.removeEventListener("orientationchange",e),"visualViewport"in window&&((n=window.visualViewport)==null||n.removeEventListener("resize",e))}},isIOS=()=>/iPad|iPhone|iPod/.test(navigator.userAgent),isSafari=()=>/^((?!chrome|android).)*safari/i.test(navigator.userAgent),isIOSSafari=()=>isIOS()&&isSafari(),getMobileDeviceInfo=()=>({userAgent:navigator.userAgent,platform:navigator.platform,isIOS:isIOS(),isSafari:isSafari(),isIOSSafari:isIOSSafari(),viewport:{width:window.innerWidth,height:window.innerHeight,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth},safeArea:{top:getComputedStyle(document.documentElement).getPropertyValue("--safe-area-top"),bottom:getComputedStyle(document.documentElement).getPropertyValue("--safe-area-bottom"),left:getComputedStyle(document.documentElement).getPropertyValue("--safe-area-left"),right:getComputedStyle(document.documentElement).getPropertyValue("--safe-area-right")}}),useNetworkStatus=()=>{const[e,t]=reactExports.useState({isOnline:navigator.onLine});return reactExports.useEffect(()=>{const n=()=>{const l=navigator.connection||navigator.mozConnection||navigator.webkitConnection;t({isOnline:navigator.onLine,connectionType:l==null?void 0:l.type,effectiveType:l==null?void 0:l.effectiveType,downlink:l==null?void 0:l.downlink,rtt:l==null?void 0:l.rtt})},a=()=>{console.log("[Network] Connection restored"),n()},i=()=>{console.log("[Network] Connection lost"),n()},o=()=>{console.log("[Network] Connection changed"),n()};n(),window.addEventListener("online",a),window.addEventListener("offline",i);const s=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return s&&s.addEventListener("change",o),()=>{window.removeEventListener("online",a),window.removeEventListener("offline",i),s&&s.removeEventListener("change",o)}},[]),e},useConnectionQuality=()=>{const e=useNetworkStatus();return{...e,quality:(()=>{if(!e.isOnline)return"offline";if(e.effectiveType)switch(e.effectiveType){case"4g":return"fast";case"3g":return"slow";case"2g":return"slow";case"slow-2g":return"slow";default:return"fast"}return e.downlink!==void 0?e.downlink>1.5?"fast":"slow":"fast"})()}},MobileDebugPanel=()=>{const[e,t]=reactExports.useState(!1);useConnectionQuality();const{session:n,isInitialized:a}=useAuthStore();return null},initAdvancedMobileDebug=()=>{},logCriticalError=(e,t)=>{console.error(`[CRITICAL][${e}]`,t),console.warn("Production error detected:",{context:e,error:t})},runCompatibilityTests=()=>{console.log("[COMPAT] Running compatibility tests..."),console.log("[COMPAT] ES Modules support:","noModule"in HTMLScriptElement.prototype?"✅":"❌");try{eval("(async () => {})()"),console.log("[COMPAT] Async/await support: ✅")}catch(e){console.log("[COMPAT] Async/await support: ❌")}console.log("[COMPAT] Fetch API:",typeof fetch!="undefined"?"✅":"❌"),console.log("[COMPAT] CSS custom properties:",CSS&&CSS.supports&&CSS.supports("--test","value")?"✅":"❌"),console.log("[COMPAT] IntersectionObserver:",typeof IntersectionObserver!="undefined"?"✅":"❌"),console.log("[COMPAT] Compatibility tests completed")};function r(e){var t,n,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=r(e[t]))&&(a&&(a+=" "),a+=n)}else for(n in e)e[n]&&(a&&(a+=" "),a+=n);return a}function clsx(){for(var e,t,n=0,a="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=r(e))&&(a&&(a+=" "),a+=t);return a}const CLASS_PART_SEPARATOR="-",createClassGroupUtils=e=>{const t=createClassMap(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:a}=e;return{getClassGroupId:s=>{const l=s.split(CLASS_PART_SEPARATOR);return l[0]===""&&l.length!==1&&l.shift(),getGroupRecursive(l,t)||getGroupIdForArbitraryProperty(s)},getConflictingClassGroupIds:(s,l)=>{const c=n[s]||[];return l&&a[s]?[...c,...a[s]]:c}}},getGroupRecursive=(e,t)=>{var s;if(e.length===0)return t.classGroupId;const n=e[0],a=t.nextPart.get(n),i=a?getGroupRecursive(e.slice(1),a):void 0;if(i)return i;if(t.validators.length===0)return;const o=e.join(CLASS_PART_SEPARATOR);return(s=t.validators.find(({validator:l})=>l(o)))==null?void 0:s.classGroupId},arbitraryPropertyRegex=/^\[(.+)\]$/,getGroupIdForArbitraryProperty=e=>{if(arbitraryPropertyRegex.test(e)){const t=arbitraryPropertyRegex.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},createClassMap=e=>{const{theme:t,prefix:n}=e,a={nextPart:new Map,validators:[]};return getPrefixedClassGroupEntries(Object.entries(e.classGroups),n).forEach(([o,s])=>{processClassesRecursively(s,a,o,t)}),a},processClassesRecursively=(e,t,n,a)=>{e.forEach(i=>{if(typeof i=="string"){const o=i===""?t:getPart(t,i);o.classGroupId=n;return}if(typeof i=="function"){if(isThemeGetter(i)){processClassesRecursively(i(a),t,n,a);return}t.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([o,s])=>{processClassesRecursively(s,getPart(t,o),n,a)})})},getPart=(e,t)=>{let n=e;return t.split(CLASS_PART_SEPARATOR).forEach(a=>{n.nextPart.has(a)||n.nextPart.set(a,{nextPart:new Map,validators:[]}),n=n.nextPart.get(a)}),n},isThemeGetter=e=>e.isThemeGetter,getPrefixedClassGroupEntries=(e,t)=>t?e.map(([n,a])=>{const i=a.map(o=>typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([s,l])=>[t+s,l])):o);return[n,i]}):e,createLruCache=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,a=new Map;const i=(o,s)=>{n.set(o,s),t++,t>e&&(t=0,a=n,n=new Map)};return{get(o){let s=n.get(o);if(s!==void 0)return s;if((s=a.get(o))!==void 0)return i(o,s),s},set(o,s){n.has(o)?n.set(o,s):i(o,s)}}},IMPORTANT_MODIFIER="!",createParseClassName=e=>{const{separator:t,experimentalParseClassName:n}=e,a=t.length===1,i=t[0],o=t.length,s=l=>{const c=[];let u=0,d=0,p;for(let g=0;g<l.length;g++){let E=l[g];if(u===0){if(E===i&&(a||l.slice(g,g+o)===t)){c.push(l.slice(d,g)),d=g+o;continue}if(E==="/"){p=g;continue}}E==="["?u++:E==="]"&&u--}const f=c.length===0?l:l.substring(d),h=f.startsWith(IMPORTANT_MODIFIER),v=h?f.substring(1):f,b=p&&p>d?p-d:void 0;return{modifiers:c,hasImportantModifier:h,baseClassName:v,maybePostfixModifierPosition:b}};return n?l=>n({className:l,parseClassName:s}):s},sortModifiers=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(a=>{a[0]==="["?(t.push(...n.sort(),a),n=[]):n.push(a)}),t.push(...n.sort()),t},createConfigUtils=e=>({cache:createLruCache(e.cacheSize),parseClassName:createParseClassName(e),...createClassGroupUtils(e)}),SPLIT_CLASSES_REGEX=/\s+/,mergeClassList=(e,t)=>{const{parseClassName:n,getClassGroupId:a,getConflictingClassGroupIds:i}=t,o=[],s=e.trim().split(SPLIT_CLASSES_REGEX);let l="";for(let c=s.length-1;c>=0;c-=1){const u=s[c],{modifiers:d,hasImportantModifier:p,baseClassName:f,maybePostfixModifierPosition:h}=n(u);let v=!!h,b=a(v?f.substring(0,h):f);if(!b){if(!v){l=u+(l.length>0?" "+l:l);continue}if(b=a(f),!b){l=u+(l.length>0?" "+l:l);continue}v=!1}const g=sortModifiers(d).join(":"),E=p?g+IMPORTANT_MODIFIER:g,j=E+b;if(o.includes(j))continue;o.push(j);const w=i(b,v);for(let S=0;S<w.length;++S){const A=w[S];o.push(E+A)}l=u+(l.length>0?" "+l:l)}return l};function twJoin(){let e=0,t,n,a="";for(;e<arguments.length;)(t=arguments[e++])&&(n=toValue(t))&&(a&&(a+=" "),a+=n);return a}const toValue=e=>{if(typeof e=="string")return e;let t,n="";for(let a=0;a<e.length;a++)e[a]&&(t=toValue(e[a]))&&(n&&(n+=" "),n+=t);return n};function createTailwindMerge(e,...t){let n,a,i,o=s;function s(c){const u=t.reduce((d,p)=>p(d),e());return n=createConfigUtils(u),a=n.cache.get,i=n.cache.set,o=l,l(c)}function l(c){const u=a(c);if(u)return u;const d=mergeClassList(c,n);return i(c,d),d}return function(){return o(twJoin.apply(null,arguments))}}const fromTheme=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},arbitraryValueRegex=/^\[(?:([a-z-]+):)?(.+)\]$/i,fractionRegex=/^\d+\/\d+$/,stringLengths=new Set(["px","full","screen"]),tshirtUnitRegex=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,lengthUnitRegex=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,colorFunctionRegex=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,shadowRegex=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,imageRegex=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,isLength$1=e=>isNumber$1(e)||stringLengths.has(e)||fractionRegex.test(e),isArbitraryLength=e=>getIsArbitraryValue(e,"length",isLengthOnly),isNumber$1=e=>!!e&&!Number.isNaN(Number(e)),isArbitraryNumber=e=>getIsArbitraryValue(e,"number",isNumber$1),isInteger=e=>!!e&&Number.isInteger(Number(e)),isPercent$1=e=>e.endsWith("%")&&isNumber$1(e.slice(0,-1)),isArbitraryValue=e=>arbitraryValueRegex.test(e),isTshirtSize=e=>tshirtUnitRegex.test(e),sizeLabels=new Set(["length","size","percentage"]),isArbitrarySize=e=>getIsArbitraryValue(e,sizeLabels,isNever),isArbitraryPosition=e=>getIsArbitraryValue(e,"position",isNever),imageLabels=new Set(["image","url"]),isArbitraryImage=e=>getIsArbitraryValue(e,imageLabels,isImage),isArbitraryShadow=e=>getIsArbitraryValue(e,"",isShadow),isAny=()=>!0,getIsArbitraryValue=(e,t,n)=>{const a=arbitraryValueRegex.exec(e);return a?a[1]?typeof t=="string"?a[1]===t:t.has(a[1]):n(a[2]):!1},isLengthOnly=e=>lengthUnitRegex.test(e)&&!colorFunctionRegex.test(e),isNever=()=>!1,isShadow=e=>shadowRegex.test(e),isImage=e=>imageRegex.test(e),getDefaultConfig=()=>{const e=fromTheme("colors"),t=fromTheme("spacing"),n=fromTheme("blur"),a=fromTheme("brightness"),i=fromTheme("borderColor"),o=fromTheme("borderRadius"),s=fromTheme("borderSpacing"),l=fromTheme("borderWidth"),c=fromTheme("contrast"),u=fromTheme("grayscale"),d=fromTheme("hueRotate"),p=fromTheme("invert"),f=fromTheme("gap"),h=fromTheme("gradientColorStops"),v=fromTheme("gradientColorStopPositions"),b=fromTheme("inset"),g=fromTheme("margin"),E=fromTheme("opacity"),j=fromTheme("padding"),w=fromTheme("saturate"),S=fromTheme("scale"),A=fromTheme("sepia"),R=fromTheme("skew"),_=fromTheme("space"),$=fromTheme("translate"),C=()=>["auto","contain","none"],O=()=>["auto","hidden","clip","visible","scroll"],N=()=>["auto",isArbitraryValue,t],T=()=>[isArbitraryValue,t],L=()=>["",isLength$1,isArbitraryLength],B=()=>["auto",isNumber$1,isArbitraryValue],I=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],z=()=>["solid","dashed","dotted","double","none"],F=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Z=()=>["start","end","center","between","around","evenly","stretch"],U=()=>["","0",isArbitraryValue],Q=()=>["auto","avoid","all","avoid-page","page","left","right","column"],W=()=>[isNumber$1,isArbitraryValue];return{cacheSize:500,separator:":",theme:{colors:[isAny],spacing:[isLength$1,isArbitraryLength],blur:["none","",isTshirtSize,isArbitraryValue],brightness:W(),borderColor:[e],borderRadius:["none","","full",isTshirtSize,isArbitraryValue],borderSpacing:T(),borderWidth:L(),contrast:W(),grayscale:U(),hueRotate:W(),invert:U(),gap:T(),gradientColorStops:[e],gradientColorStopPositions:[isPercent$1,isArbitraryLength],inset:N(),margin:N(),opacity:W(),padding:T(),saturate:W(),scale:W(),sepia:U(),skew:W(),space:T(),translate:T()},classGroups:{aspect:[{aspect:["auto","square","video",isArbitraryValue]}],container:["container"],columns:[{columns:[isTshirtSize]}],"break-after":[{"break-after":Q()}],"break-before":[{"break-before":Q()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...I(),isArbitraryValue]}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[b]}],"inset-x":[{"inset-x":[b]}],"inset-y":[{"inset-y":[b]}],start:[{start:[b]}],end:[{end:[b]}],top:[{top:[b]}],right:[{right:[b]}],bottom:[{bottom:[b]}],left:[{left:[b]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",isInteger,isArbitraryValue]}],basis:[{basis:N()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",isArbitraryValue]}],grow:[{grow:U()}],shrink:[{shrink:U()}],order:[{order:["first","last","none",isInteger,isArbitraryValue]}],"grid-cols":[{"grid-cols":[isAny]}],"col-start-end":[{col:["auto",{span:["full",isInteger,isArbitraryValue]},isArbitraryValue]}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":[isAny]}],"row-start-end":[{row:["auto",{span:[isInteger,isArbitraryValue]},isArbitraryValue]}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",isArbitraryValue]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",isArbitraryValue]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...Z()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Z(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Z(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[j]}],px:[{px:[j]}],py:[{py:[j]}],ps:[{ps:[j]}],pe:[{pe:[j]}],pt:[{pt:[j]}],pr:[{pr:[j]}],pb:[{pb:[j]}],pl:[{pl:[j]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[_]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[_]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",isArbitraryValue,t]}],"min-w":[{"min-w":[isArbitraryValue,t,"min","max","fit"]}],"max-w":[{"max-w":[isArbitraryValue,t,"none","full","min","max","fit","prose",{screen:[isTshirtSize]},isTshirtSize]}],h:[{h:[isArbitraryValue,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[isArbitraryValue,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[isArbitraryValue,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[isArbitraryValue,t,"auto","min","max","fit"]}],"font-size":[{text:["base",isTshirtSize,isArbitraryLength]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",isArbitraryNumber]}],"font-family":[{font:[isAny]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",isArbitraryValue]}],"line-clamp":[{"line-clamp":["none",isNumber$1,isArbitraryNumber]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",isLength$1,isArbitraryValue]}],"list-image":[{"list-image":["none",isArbitraryValue]}],"list-style-type":[{list:["none","disc","decimal",isArbitraryValue]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[E]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[E]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...z(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",isLength$1,isArbitraryLength]}],"underline-offset":[{"underline-offset":["auto",isLength$1,isArbitraryValue]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:T()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",isArbitraryValue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",isArbitraryValue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[E]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...I(),isArbitraryPosition]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",isArbitrarySize]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},isArbitraryImage]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[h]}],"gradient-via":[{via:[h]}],"gradient-to":[{to:[h]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[E]}],"border-style":[{border:[...z(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[E]}],"divide-style":[{divide:z()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...z()]}],"outline-offset":[{"outline-offset":[isLength$1,isArbitraryValue]}],"outline-w":[{outline:[isLength$1,isArbitraryLength]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:L()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[E]}],"ring-offset-w":[{"ring-offset":[isLength$1,isArbitraryLength]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",isTshirtSize,isArbitraryShadow]}],"shadow-color":[{shadow:[isAny]}],opacity:[{opacity:[E]}],"mix-blend":[{"mix-blend":[...F(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":F()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[a]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",isTshirtSize,isArbitraryValue]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[p]}],saturate:[{saturate:[w]}],sepia:[{sepia:[A]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[a]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[E]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[A]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[s]}],"border-spacing-x":[{"border-spacing-x":[s]}],"border-spacing-y":[{"border-spacing-y":[s]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",isArbitraryValue]}],duration:[{duration:W()}],ease:[{ease:["linear","in","out","in-out",isArbitraryValue]}],delay:[{delay:W()}],animate:[{animate:["none","spin","ping","pulse","bounce",isArbitraryValue]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[isInteger,isArbitraryValue]}],"translate-x":[{"translate-x":[$]}],"translate-y":[{"translate-y":[$]}],"skew-x":[{"skew-x":[R]}],"skew-y":[{"skew-y":[R]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",isArbitraryValue]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",isArbitraryValue]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":T()}],"scroll-mx":[{"scroll-mx":T()}],"scroll-my":[{"scroll-my":T()}],"scroll-ms":[{"scroll-ms":T()}],"scroll-me":[{"scroll-me":T()}],"scroll-mt":[{"scroll-mt":T()}],"scroll-mr":[{"scroll-mr":T()}],"scroll-mb":[{"scroll-mb":T()}],"scroll-ml":[{"scroll-ml":T()}],"scroll-p":[{"scroll-p":T()}],"scroll-px":[{"scroll-px":T()}],"scroll-py":[{"scroll-py":T()}],"scroll-ps":[{"scroll-ps":T()}],"scroll-pe":[{"scroll-pe":T()}],"scroll-pt":[{"scroll-pt":T()}],"scroll-pr":[{"scroll-pr":T()}],"scroll-pb":[{"scroll-pb":T()}],"scroll-pl":[{"scroll-pl":T()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",isArbitraryValue]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[isLength$1,isArbitraryLength,isArbitraryNumber]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},twMerge=createTailwindMerge(getDefaultConfig);function cn(...e){return twMerge(clsx(e))}const routes={auth:"/auth",dashboard:"/",camera:"/camera",settings:"/settings",gardenChat:"/garden-chat",plantDetail:e=>`/plant/${e}`,plantChat:e=>`/plant/${e}/chat`},navigation={toDashboard:()=>routes.dashboard,toCamera:()=>routes.camera,toSettings:()=>routes.settings,toGardenChat:()=>routes.gardenChat,toPlantDetail:e=>routes.plantDetail(e),toPlantChat:e=>routes.plantChat(e),toAuth:()=>routes.auth},isActiveRoute=(e,t)=>e===t?!0:t===routes.dashboard?e==="/"||e.startsWith("/plant/"):t===routes.gardenChat?e===routes.gardenChat||e.includes("/chat")||e.includes("/garden-chat"):t===routes.settings?e.startsWith("/settings"):!1;var NOTHING=Symbol.for("immer-nothing"),DRAFTABLE=Symbol.for("immer-draftable"),DRAFT_STATE=Symbol.for("immer-state");function die(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var getPrototypeOf=Object.getPrototypeOf;function isDraft(e){return!!e&&!!e[DRAFT_STATE]}function isDraftable(e){var t;return e?isPlainObject$2(e)||Array.isArray(e)||!!e[DRAFTABLE]||!!((t=e.constructor)!=null&&t[DRAFTABLE])||isMap(e)||isSet(e):!1}var objectCtorString=Object.prototype.constructor.toString();function isPlainObject$2(e){if(!e||typeof e!="object")return!1;const t=getPrototypeOf(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===objectCtorString}function each(e,t){getArchtype(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,a)=>t(a,n,e))}function getArchtype(e){const t=e[DRAFT_STATE];return t?t.type_:Array.isArray(e)?1:isMap(e)?2:isSet(e)?3:0}function has$1(e,t){return getArchtype(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function set(e,t,n){const a=getArchtype(e);a===2?e.set(t,n):a===3?e.add(n):e[t]=n}function is$3(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function isMap(e){return e instanceof Map}function isSet(e){return e instanceof Set}function latest(e){return e.copy_||e.base_}function shallowCopy(e,t){if(isMap(e))return new Map(e);if(isSet(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=isPlainObject$2(e);if(t===!0||t==="class_only"&&!n){const a=Object.getOwnPropertyDescriptors(e);delete a[DRAFT_STATE];let i=Reflect.ownKeys(a);for(let o=0;o<i.length;o++){const s=i[o],l=a[s];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(a[s]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[s]})}return Object.create(getPrototypeOf(e),a)}else{const a=getPrototypeOf(e);if(a!==null&&n)return{...e};const i=Object.create(a);return Object.assign(i,e)}}function freeze(e,t=!1){return isFrozen(e)||isDraft(e)||!isDraftable(e)||(getArchtype(e)>1&&(e.set=e.add=e.clear=e.delete=dontMutateFrozenCollections),Object.freeze(e),t&&Object.entries(e).forEach(([n,a])=>freeze(a,!0))),e}function dontMutateFrozenCollections(){die(2)}function isFrozen(e){return Object.isFrozen(e)}var plugins={};function getPlugin(e){const t=plugins[e];return t||die(0,e),t}var currentScope;function getCurrentScope(){return currentScope}function createScope(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function usePatchesInScope(e,t){t&&(getPlugin("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function revokeScope(e){leaveScope(e),e.drafts_.forEach(revokeDraft),e.drafts_=null}function leaveScope(e){e===currentScope&&(currentScope=e.parent_)}function enterScope(e){return currentScope=createScope(currentScope,e)}function revokeDraft(e){const t=e[DRAFT_STATE];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function processResult(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[DRAFT_STATE].modified_&&(revokeScope(t),die(4)),isDraftable(e)&&(e=finalize(t,e),t.parent_||maybeFreeze(t,e)),t.patches_&&getPlugin("Patches").generateReplacementPatches_(n[DRAFT_STATE].base_,e,t.patches_,t.inversePatches_)):e=finalize(t,n,[]),revokeScope(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==NOTHING?e:void 0}function finalize(e,t,n){if(isFrozen(t))return t;const a=t[DRAFT_STATE];if(!a)return each(t,(i,o)=>finalizeProperty(e,a,t,i,o,n)),t;if(a.scope_!==e)return t;if(!a.modified_)return maybeFreeze(e,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const i=a.copy_;let o=i,s=!1;a.type_===3&&(o=new Set(i),i.clear(),s=!0),each(o,(l,c)=>finalizeProperty(e,a,i,l,c,n,s)),maybeFreeze(e,i,!1),n&&e.patches_&&getPlugin("Patches").generatePatches_(a,n,e.patches_,e.inversePatches_)}return a.copy_}function finalizeProperty(e,t,n,a,i,o,s){if(isDraft(i)){const l=o&&t&&t.type_!==3&&!has$1(t.assigned_,a)?o.concat(a):void 0,c=finalize(e,i,l);if(set(n,a,c),isDraft(c))e.canAutoFreeze_=!1;else return}else s&&n.add(i);if(isDraftable(i)&&!isFrozen(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;finalize(e,i),(!t||!t.scope_.parent_)&&typeof a!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,a)&&maybeFreeze(e,i)}}function maybeFreeze(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&freeze(t,n)}function createProxyProxy(e,t){const n=Array.isArray(e),a={type_:n?1:0,scope_:t?t.scope_:getCurrentScope(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=a,o=objectTraps;n&&(i=[a],o=arrayTraps);const{revoke:s,proxy:l}=Proxy.revocable(i,o);return a.draft_=l,a.revoke_=s,l}var objectTraps={get(e,t){if(t===DRAFT_STATE)return e;const n=latest(e);if(!has$1(n,t))return readPropFromProto(e,n,t);const a=n[t];return e.finalized_||!isDraftable(a)?a:a===peek(e.base_,t)?(prepareCopy(e),e.copy_[t]=createProxy(a,e)):a},has(e,t){return t in latest(e)},ownKeys(e){return Reflect.ownKeys(latest(e))},set(e,t,n){const a=getDescriptorFromProto(latest(e),t);if(a!=null&&a.set)return a.set.call(e.draft_,n),!0;if(!e.modified_){const i=peek(latest(e),t),o=i==null?void 0:i[DRAFT_STATE];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(is$3(n,i)&&(n!==void 0||has$1(e.base_,t)))return!0;prepareCopy(e),markChanged(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return peek(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,prepareCopy(e),markChanged(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=latest(e),a=Reflect.getOwnPropertyDescriptor(n,t);return a&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:a.enumerable,value:n[t]}},defineProperty(){die(11)},getPrototypeOf(e){return getPrototypeOf(e.base_)},setPrototypeOf(){die(12)}},arrayTraps={};each(objectTraps,(e,t)=>{arrayTraps[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});arrayTraps.deleteProperty=function(e,t){return arrayTraps.set.call(this,e,t,void 0)};arrayTraps.set=function(e,t,n){return objectTraps.set.call(this,e[0],t,n,e[0])};function peek(e,t){const n=e[DRAFT_STATE];return(n?latest(n):e)[t]}function readPropFromProto(e,t,n){var i;const a=getDescriptorFromProto(t,n);return a?"value"in a?a.value:(i=a.get)==null?void 0:i.call(e.draft_):void 0}function getDescriptorFromProto(e,t){if(!(t in e))return;let n=getPrototypeOf(e);for(;n;){const a=Object.getOwnPropertyDescriptor(n,t);if(a)return a;n=getPrototypeOf(n)}}function markChanged(e){e.modified_||(e.modified_=!0,e.parent_&&markChanged(e.parent_))}function prepareCopy(e){e.copy_||(e.copy_=shallowCopy(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Immer2=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,a)=>{if(typeof t=="function"&&typeof n!="function"){const o=n;n=t;const s=this;return function(c=o,...u){return s.produce(c,d=>n.call(this,d,...u))}}typeof n!="function"&&die(6),a!==void 0&&typeof a!="function"&&die(7);let i;if(isDraftable(t)){const o=enterScope(this),s=createProxy(t,void 0);let l=!0;try{i=n(s),l=!1}finally{l?revokeScope(o):leaveScope(o)}return usePatchesInScope(o,a),processResult(i,o)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===NOTHING&&(i=void 0),this.autoFreeze_&&freeze(i,!0),a){const o=[],s=[];getPlugin("Patches").generateReplacementPatches_(t,i,o,s),a(o,s)}return i}else die(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(s,...l)=>this.produceWithPatches(s,c=>t(c,...l));let a,i;return[this.produce(t,n,(s,l)=>{a=s,i=l}),a,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){isDraftable(e)||die(8),isDraft(e)&&(e=current(e));const t=enterScope(this),n=createProxy(e,void 0);return n[DRAFT_STATE].isManual_=!0,leaveScope(t),n}finishDraft(e,t){const n=e&&e[DRAFT_STATE];(!n||!n.isManual_)&&die(9);const{scope_:a}=n;return usePatchesInScope(a,t),processResult(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const a=getPlugin("Patches").applyPatches_;return isDraft(e)?a(e,t):this.produce(e,i=>a(i,t))}};function createProxy(e,t){const n=isMap(e)?getPlugin("MapSet").proxyMap_(e,t):isSet(e)?getPlugin("MapSet").proxySet_(e,t):createProxyProxy(e,t);return(t?t.scope_:getCurrentScope()).drafts_.push(n),n}function current(e){return isDraft(e)||die(10,e),currentImpl(e)}function currentImpl(e){if(!isDraftable(e)||isFrozen(e))return e;const t=e[DRAFT_STATE];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=shallowCopy(e,t.scope_.immer_.useStrictShallowCopy_)}else n=shallowCopy(e,!0);return each(n,(a,i)=>{set(n,a,currentImpl(i))}),t&&(t.finalized_=!1),n}var immer=new Immer2,produce=immer.produce;immer.produceWithPatches.bind(immer);immer.setAutoFreeze.bind(immer);immer.setUseStrictShallowCopy.bind(immer);immer.applyPatches.bind(immer);immer.createDraft.bind(immer);immer.finishDraft.bind(immer);function castDraft(e){return e}let getRandomValues;const rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}const byteToHex=[];for(let e=0;e<256;++e)byteToHex.push((e+256).toString(16).slice(1));function unsafeStringify(e,t=0){return byteToHex[e[t+0]]+byteToHex[e[t+1]]+byteToHex[e[t+2]]+byteToHex[e[t+3]]+"-"+byteToHex[e[t+4]]+byteToHex[e[t+5]]+"-"+byteToHex[e[t+6]]+byteToHex[e[t+7]]+"-"+byteToHex[e[t+8]]+byteToHex[e[t+9]]+"-"+byteToHex[e[t+10]]+byteToHex[e[t+11]]+byteToHex[e[t+12]]+byteToHex[e[t+13]]+byteToHex[e[t+14]]+byteToHex[e[t+15]]}const randomUUID=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),native={randomUUID};function v4(e,t,n){if(native.randomUUID&&!e)return native.randomUUID();e=e||{};const a=e.random||(e.rng||rng)();return a[6]=a[6]&15|64,a[8]=a[8]&63|128,unsafeStringify(a)}const MAX_IMAGE_SIZE_MB=5,MAX_IMAGE_SIZE_BYTES=MAX_IMAGE_SIZE_MB*1024*1024,validateImageSize=e=>{if(!e||typeof e!="string")throw new Error("URL de imagen inválida");const t=e.split(",")[1];if(!t)throw new Error("Formato de imagen inválido");const n=t.length*3/4;if(n>MAX_IMAGE_SIZE_BYTES){const a=(n/1048576).toFixed(1);throw new Error(`La imagen es demasiado grande (${a}MB). El límite máximo es ${MAX_IMAGE_SIZE_MB}MB. Por favor, usa una imagen más pequeña.`)}console.log(`[imageService] Image size validation passed: ${(n/(1024*1024)).toFixed(2)}MB`)},dataURLtoBlob=e=>{if(!e||typeof e!="string")throw new Error("Invalid data URL: input is not a string");if(!e.startsWith("data:"))throw new Error('Invalid data URL: does not start with "data:"');const t=e.split(",");if(t.length!==2)throw new Error("Invalid data URL: incorrect format");const n=t[0].match(/:(.*?);/);if(!n)throw new Error("Invalid data URL: could not extract MIME type");const a=n[1];if(!a.startsWith("image/"))throw new Error(`Invalid data URL: not an image MIME type (${a})`);try{const i=atob(t[1]);let o=i.length;const s=new Uint8Array(o);for(;o--;)s[o]=i.charCodeAt(o);return new Blob([s],{type:a})}catch(i){throw new Error(`Invalid data URL: failed to decode base64 data - ${i instanceof Error?i.message:"Unknown error"}`)}},uploadImage=async(e,t,n)=>{try{validateImageSize(e);const a=dataURLtoBlob(e),i=a.type.split("/")[1],o=`${n}/${v4()}.${i}`,{error:s}=await supabase.storage.from(t).upload(o,a,{cacheControl:"3600",upsert:!1});if(s)throw console.error("Error uploading image to Supabase Storage:",s),new Error(`Storage error: ${s.message}`);const{data:l}=supabase.storage.from(t).getPublicUrl(o);if(!l||!l.publicUrl)throw new Error("Could not get public URL for uploaded image.");return l.publicUrl}catch(a){throw console.error("Failed to upload image:",a),a instanceof Error?new Error(`Image upload failed: ${a.message}`):new Error("An unknown error occurred during image upload.")}},generateInsights=async e=>{try{const{data:{session:t},error:n}=await supabase.auth.getSession();if(n||!(t!=null&&t.access_token))throw console.error("User session not available:",n),new Error("Usuario no autenticado. Por favor inicia sesión nuevamente.");const{data:a,error:i}=await supabase.functions.invoke("generate-plant-insights",{body:{plant:e},headers:{Authorization:`Bearer ${t.access_token}`}});if(i)throw new Error(`Failed to generate insights: ${i.message}`);return InsightResponseSchema.parse(a)}catch(t){throw console.error("[insightService] Error generating insights:",t),t instanceof ZodError?new Error(`Invalid data structure for insights: ${t.message}`):t}},analyzeImage=async e=>{var o,s,l;validateImageSize(e);const{data:{session:t},error:n}=await supabase.auth.getSession();if(n||!t)throw new Error("User must be authenticated to analyze images");const{data:a,error:i}=await supabase.functions.invoke("analyze-image",{body:{imageDataUrl:e},headers:{Authorization:`Bearer ${t.access_token}`}});if(i){if(console.error("Error invoking analyze-image function:",i),(o=i.message)!=null&&o.includes("unsupported image"))throw new Error("La imagen no es válida. Por favor, asegúrate de que sea una foto clara de una planta.");if((s=i.message)!=null&&s.includes("OpenAI API key"))throw new Error("Servicio de análisis temporalmente no disponible. Intenta de nuevo más tarde.");const c=(l=i.context)!=null&&l.msg?JSON.parse(i.context.msg).error:i.message;throw new Error(`Failed to analyze image: ${c}`)}if(a&&a.error)throw console.error("Image analysis failed with a specific error:",a.error),new Error(a.error);return a},generatePlantResponse=async(e,t)=>{const n="cálido, simpático, motivador, y con un toque de humor ligero",a=(e.images||[]).map(f=>({url:f.url,timestamp:f.timestamp instanceof Date?f.timestamp.toISOString():f.timestamp,...f.healthAnalysis?{healthAnalysis:f.healthAnalysis}:{}})).sort((f,h)=>new Date(f.timestamp).getTime()-new Date(h.timestamp).getTime());let i=[];try{i=await generateInsights(e)}catch(f){console.warn("[generatePlantResponse] No se pudieron generar insights para la planta:",f),i=[]}const o={...e,images:a},{data:{session:s},error:l}=await supabase.auth.getSession();if(l||!(s!=null&&s.access_token))throw console.error("User session not available:",l),new Error("Usuario no autenticado. Por favor inicia sesión nuevamente.");const{data:c,error:u}=await supabase.functions.invoke("generate-plant-response",{body:{plant:o,userMessage:t,tonePersona:n,insights:i},headers:{Authorization:`Bearer ${s.access_token}`}});if(u)throw console.error("Error calling generate-plant-response function:",u),new Error("Failed to generate plant response: "+u.message);const d=((c==null?void 0:c.content)||"").toLowerCase();return(!(c!=null&&c.content)||d.includes("no sé")||d.includes("no tengo información")||d.includes("no puedo ayudarte")||d.length<20)&&toastService.warning("Respuesta genérica","La respuesta de la planta fue muy genérica o poco útil. Intenta preguntar de otra forma o proporciona más detalles."),{...c,insights:(c==null?void 0:c.insights)||i||[],suggestedActions:(c==null?void 0:c.suggestedActions)||[]}},completePlantInfo=async(e,t)=>{const{data:{session:n},error:a}=await supabase.auth.getSession();if(a||!(n!=null&&n.access_token))throw console.error("User session not available:",a),new Error("Usuario no autenticado. Por favor inicia sesión nuevamente.");const{data:i,error:o}=await supabase.functions.invoke("complete-plant-info",{body:{species:e,commonName:t},headers:{Authorization:`Bearer ${n.access_token}`}});if(o)throw console.error("💥 [API] Error en complete-plant-info function:",o),new Error("Failed to complete plant info: "+o.message);const s=["interior","exterior","ambos"],l=["poca_luz","luz_indirecta","luz_directa_parcial","pleno_sol"];return{plantEnvironment:s.includes(i.plantEnvironment)?i.plantEnvironment:"interior",lightRequirements:l.includes(i.lightRequirements)?i.lightRequirements:"luz_indirecta",description:i.description||void 0,funFacts:Array.isArray(i.funFacts)?i.funFacts:void 0}},transformDBPlantToPlant=(e,t,n,a)=>({id:e.id,name:e.name,species:e.species,variety:e.variety||void 0,nickname:e.nickname||void 0,description:e.description||void 0,funFacts:e.fun_facts||[],location:e.location,plantEnvironment:e.plant_environment,lightRequirements:e.light_requirements,dateAdded:new Date(e.date_added),lastWatered:e.last_watered?new Date(e.last_watered):void 0,lastFertilized:e.last_fertilized?new Date(e.last_fertilized):void 0,images:t,healthScore:e.health_score||85,careProfile:e.care_profile,personality:e.personality,chatHistory:n,notifications:a});class PlantService{constructor(t=supabase){fe(this,"supabase");this.supabase=t}async getUserPlantSummaries(t){try{const{data:n,error:a}=await this.supabase.from("plants").select(`
          id,
          name,
          nickname,
          species,
          location,
          plant_environment,
          light_requirements,
          health_score,
          last_watered,
          care_profile
        `).eq("user_id",t).order("created_at",{ascending:!1});if(a)throw a;let i=new Map;if(n.length>0){const s=n.map(u=>u.id),{data:l,error:c}=await this.supabase.from("plant_images").select("plant_id, url").in("plant_id",s).eq("is_profile_image",!0);c?console.warn("[plantService] Error fetching profile images:",c):i=new Map((l||[]).map(u=>[u.plant_id,u.url]))}return n.map(s=>{var l;return{id:s.id,name:s.name,nickname:s.nickname||void 0,species:s.species,location:s.location,plantEnvironment:s.plant_environment,lightRequirements:s.light_requirements,healthScore:s.health_score||85,profileImageUrl:i.get(s.id),lastWatered:s.last_watered?new Date(s.last_watered):void 0,wateringFrequency:(l=s.care_profile)==null?void 0:l.wateringFrequency}})}catch(n){throw console.error("Error fetching plant summaries:",n),n}}async getUserPlants(t){try{const{data:n,error:a}=await this.supabase.from("plants").select(`
          *,
          plant_images ( * ),
          chat_messages ( * ),
          plant_notifications ( * )
        `).eq("user_id",t).order("created_at",{ascending:!1});if(a)throw a;return n.map(o=>{const s=(o.plant_images||[]).map(u=>({id:u.id,url:u.url,timestamp:new Date(u.created_at),healthAnalysis:u.health_analysis,isProfileImage:u.is_profile_image||!1})),l=(o.chat_messages||[]).map(u=>({id:u.id,sender:u.sender,content:u.content,timestamp:new Date(u.created_at),emotion:u.emotion})),c=(o.plant_notifications||[]).map(u=>({id:u.id,type:u.type,title:u.title,message:u.message,priority:u.priority||"medium",scheduledFor:new Date(u.scheduled_for),completed:u.completed||!1}));return transformDBPlantToPlant(o,s,l,c)})}catch(n){throw console.error("Error fetching plants:",n),n}}async getPlantById(t,n){try{const{data:a,error:i}=await this.supabase.from("plants").select(`
          *,
          plant_images ( * ),
          chat_messages ( * ),
          plant_notifications ( * )
        `).eq("id",t).eq("user_id",n).single();if(i){if(i.code==="PGRST116")return null;throw i}if(!a)return null;const o=(a.plant_images||[]).map(c=>({id:c.id,url:c.url,timestamp:new Date(c.created_at),healthAnalysis:c.health_analysis,isProfileImage:c.is_profile_image||!1})),s=(a.chat_messages||[]).map(c=>({id:c.id,sender:c.sender,content:c.content,timestamp:new Date(c.created_at),emotion:c.emotion})),l=(a.plant_notifications||[]).map(c=>({id:c.id,type:c.type,title:c.title,message:c.message,priority:c.priority||"medium",scheduledFor:new Date(c.scheduled_for),completed:c.completed||!1}));return transformDBPlantToPlant(a,o,s,l)}catch(a){throw console.error("Error fetching plant by ID:",a),a}}async addPlantFromAnalysis(t,n,a){var i;try{console.log("[PlantService] Iniciando análisis IA...");const o=await analyzeImage(n);console.log("[PlantService] Resultado IA:",o);const s={name:o.commonName,species:o.species,description:o.generalDescription,funFacts:o.funFacts,variety:(i=o.variety)!=null?i:void 0,nickname:o.commonName,location:a,plantEnvironment:o.plantEnvironment,lightRequirements:o.lightRequirements,dateAdded:new Date,healthScore:o.health.confidence,careProfile:o.careProfile,personality:o.personality};console.log("[PlantService] Payload a createPlant:",s);const l=await this.createPlant(s,t);return console.log("[PlantService] Planta creada:",l),(async()=>{let c=!1,u=!1;try{console.log(`[PlantService] Starting image upload for plant ${l.id}`);const d=await uploadImage(n,"plant-images",`${t}/${l.id}`);console.log("[PlantService] Imagen subida:",d),await this.addPlantImage(l.id,{url:d,timestamp:new Date,isProfileImage:!0,healthAnalysis:o.health},t),c=!0,console.log(`[PlantService] Image upload completed for plant ${l.id}`)}catch(d){console.error(`[PlantService] Image upload failed for plant ${l.id}:`,d),alert("Error subiendo imagen: "+(d instanceof Error?d.message:JSON.stringify(d)))}try{console.log(`[PlantService] Starting chat initialization for plant ${l.id}`);const d=await generatePlantResponse(l,"¡Hola! Acabo de llegar. ¿Cómo te llamas?");console.log("[PlantService] Respuesta IA chat:",d),await this.addChatMessage(l.id,{sender:"plant",content:d.content,timestamp:new Date,emotion:d.emotion},t),u=!0,console.log(`[PlantService] Chat initialization completed for plant ${l.id}`)}catch(d){console.error(`[PlantService] Chat initialization failed for plant ${l.id}:`,d),alert("Error inicializando chat: "+(d instanceof Error?d.message:JSON.stringify(d)))}c&&u?console.log(`[PlantService] All background tasks for plant ${l.id} completed successfully.`):(c||u)&&console.log(`[PlantService] Background tasks for plant ${l.id} partially completed.`)})().catch(c=>{console.error(`[PlantService] Error during background tasks for plant ${l.id}:`,c),alert("Error en tareas de fondo: "+(c instanceof Error?c.message:JSON.stringify(c)))}),l}catch(o){throw console.error("Error adding plant from analysis:",o),alert("Error creando planta: "+(o instanceof Error?o.message:JSON.stringify(o))),o}}async createPlant(t,n){try{const a={user_id:n,name:t.name,species:t.species,variety:t.variety||null,nickname:t.nickname||null,description:t.description||null,fun_facts:t.funFacts||null,location:t.location,plant_environment:t.plantEnvironment||null,light_requirements:t.lightRequirements||null,date_added:t.dateAdded.toISOString(),last_watered:null,last_fertilized:null,health_score:t.healthScore,care_profile:t.careProfile,personality:t.personality,updated_at:null};console.log("[PlantService] Payload a Supabase:",a);const{data:i,error:o}=await this.supabase.from("plants").insert(a).select("*").single();if(console.log("[PlantService] Respuesta Supabase:",i,o),o)throw console.error("Supabase error:",{message:o.message,details:o.details,code:o.code}),alert("Error Supabase: "+o.message),new Error(`Supabase error creating plant: ${o.message}`);if(!i)throw alert("No se pudo crear la planta en la base de datos, no se devolvieron datos."),new Error("Failed to create plant in the database, no data returned.");return transformDBPlantToPlant(i,[],[],[])}catch(a){throw console.error("Error creating plant:",a),alert("Error creando planta: "+(a instanceof Error?a.message:JSON.stringify(a))),a}}async updatePlantInfo(t,n,a){try{const i={};a.plantEnvironment!==void 0&&(i.plant_environment=a.plantEnvironment),a.lightRequirements!==void 0&&(i.light_requirements=a.lightRequirements),a.description!==void 0&&(i.description=a.description),a.funFacts!==void 0&&(i.fun_facts=a.funFacts);const{data:o,error:s}=await this.supabase.from("plants").update(i).eq("id",t).eq("user_id",n).select("*").single();if(s)throw console.error("Supabase error updating plant:",s),new Error(`Error updating plant: ${s.message}`);if(!o)throw new Error("Plant not found or not updated.");return transformDBPlantToPlant(o,[],[],[])}catch(i){throw console.error("Error updating plant info:",i),i}}async updatePlantHealthScore(t,n,a,i,o){try{console.log("🏥 [DB] Actualizando health score en BD:",{plantId:t,healthScore:a,hasAnalysis:!!i});const{error:s}=await this.supabase.from("plants").update({health_score:a}).eq("id",t).eq("user_id",n);if(s)throw console.error("💥 [DB] Error actualizando health score:",s),new Error(`Error updating plant health score: ${s.message}`);if(i&&o){console.log("📸 [DB] Actualizando análisis de salud en imagen:",o);const{error:l}=await this.supabase.from("plant_images").update({health_analysis:i}).eq("id",o).eq("user_id",n);l&&console.warn("⚠️ [DB] Error actualizando análisis en imagen:",l)}console.log("✅ [DB] Health score actualizado exitosamente")}catch(s){throw console.error("💥 [DB] Error en updatePlantHealthScore:",s),s}}async updatePlant(t,n){var a,i;try{const o={name:t.name,species:t.species,variety:t.variety,nickname:t.nickname,description:t.description,fun_facts:t.funFacts,location:t.location,health_score:t.healthScore,care_profile:t.careProfile,personality:t.personality,last_watered:(a=t.lastWatered)==null?void 0:a.toISOString(),last_fertilized:(i=t.lastFertilized)==null?void 0:i.toISOString()},{data:s,error:l}=await this.supabase.from("plants").update(o).eq("id",t.id).eq("user_id",n).select().single();if(l)throw l;return transformDBPlantToPlant(s,t.images,t.chatHistory,t.notifications)}catch(o){throw console.error("Error updating plant:",o),o}}async deletePlant(t,n){try{const{error:a}=await this.supabase.from("plants").delete().eq("id",t).eq("user_id",n);if(a)throw a}catch(a){throw console.error("Error deleting plant:",a),a}}async sendChatMessageAndGetResponse(t,n,a){const i=await this.addChatMessage(t.id,n,a),o=await generatePlantResponse(t,n.content),s={};o.insights&&(s.insights=o.insights),o.suggestedActions&&(s.suggestedActions=o.suggestedActions);const l={sender:"plant",content:o.content,emotion:o.emotion,timestamp:new Date,...Object.keys(s).length>0?{context:s}:{}},c=await this.addChatMessage(t.id,l,a);return[i,c]}async addChatMessage(t,n,a){try{const i={plant_id:t,user_id:a,sender:n.sender,content:n.content,emotion:n.emotion||null};n.context&&(i.context=n.context);const{data:o,error:s}=await this.supabase.from("chat_messages").insert(i).select().single();if(s)throw console.error("❌ Supabase error:",s),s;return{id:o.id,sender:o.sender,content:o.content,timestamp:new Date(o.created_at),emotion:o.emotion,context:o.context||void 0}}catch(i){throw console.error("Error adding chat message:",i),i}}async addPlantImage(t,n,a){try{const i=n.url;let o="";try{const u=new URL(i).pathname.split("/"),d=u.findIndex(p=>p==="object");d!==-1&&d+2<u.length&&(o=u.slice(d+2).join("/"))}catch(c){console.warn("Could not extract storage path from URL:",i),o=`${a}/${t}/${Date.now()}.jpg`}const{data:s,error:l}=await this.supabase.from("plant_images").insert({plant_id:t,user_id:a,url:i,storage_path:o,is_profile_image:n.isProfileImage,health_analysis:n.healthAnalysis}).select().single();if(l)throw l;if(!s.url)throw new Error("Image URL not returned from database.");return{id:s.id,url:s.url,timestamp:new Date(s.created_at),isProfileImage:s.is_profile_image||!1,healthAnalysis:s.health_analysis}}catch(i){throw console.error("Error adding plant image:",i),new Error(`Image upload failed: ${i instanceof Error?i.message:"Unknown error"}`)}}async setProfileImage(t,n,a){try{await this.supabase.from("plant_images").update({is_profile_image:!1}).eq("plant_id",t).eq("user_id",a);const{error:i}=await this.supabase.from("plant_images").update({is_profile_image:!0}).eq("id",n).eq("user_id",a);if(i)throw i}catch(i){throw console.error("Error setting profile image:",i),i}}async deleteImage(t,n){try{const{data:a,error:i}=await this.supabase.from("plant_images").select("storage_path").eq("id",t).eq("user_id",n).single();if(i)throw i;a!=null&&a.storage_path&&await this.supabase.storage.from("plant-images").remove([a.storage_path]);const{error:o}=await this.supabase.from("plant_images").delete().eq("id",t).eq("user_id",n);if(o)throw o}catch(a){throw console.error("Error deleting image:",a),a}}}const plantService$2=new PlantService(supabase),plantService$1=new PlantService,usePlantStore=create((e,t)=>({plants:[],isLoading:!1,error:null,selectedPlantId:null,getPlantById:n=>t().plants.find(a=>a.id===n),setPlant:n=>{e(produce(a=>{const i=a.plants.findIndex(o=>o.id===n.id);i!==-1?a.plants[i]=n:a.plants.push(n)}))},addPlant:async(n,a,i)=>{try{const o=await plantService$1.addPlantFromAnalysis(i,n,a);return e(produce(s=>{s.plants.unshift(o)})),gardenCacheService.invalidateOnPlantChange(i),o}catch(o){throw console.error(o),o}},updatePlant:async(n,a)=>{try{const i=await plantService$1.updatePlant(n,a);e(produce(o=>{const s=o.plants.findIndex(l=>l.id===i.id);s!==-1&&(o.plants[s]=i)})),gardenCacheService.invalidateOnPlantChange(a)}catch(i){throw console.error(i),i}},deletePlant:async(n,a)=>{try{await plantService$1.deletePlant(n,a),e(produce(i=>{i.plants=i.plants.filter(o=>o.id!==n)})),gardenCacheService.invalidateOnPlantChange(a)}catch(i){throw console.error(i),i}},addChatMessage:async(n,a,i)=>{e({isLoading:!0,error:null});const o=t().getPlantById(n);if(!o){e({isLoading:!1,error:"Plant not found to add message"});return}const s={id:`temp-user-${Date.now()}`,sender:"user",content:a,timestamp:new Date};e(produce(l=>{var c;(c=l.plants.find(u=>u.id===n))==null||c.chatHistory.push(s)}));try{const[l,c]=await plantService$1.sendChatMessageAndGetResponse(o,{sender:"user",content:a,timestamp:s.timestamp},i);e(produce(u=>{const d=u.plants.find(p=>p.id===n);d&&(d.chatHistory=[...d.chatHistory.filter(p=>p.id!==s.id),l,c]),u.isLoading=!1}))}catch(l){const c=l instanceof Error?l.message:"Failed to send message";console.error(c),e({isLoading:!1,error:c})}},addPlantImage:async(n,a,i)=>{try{const o=await plantService$1.addPlantImage(n,{url:a,timestamp:new Date,isProfileImage:!1},i);e(produce(s=>{const l=s.plants.find(c=>c.id===n);l&&l.images.push(o)}))}catch(o){throw console.error(o),o}},selectPlant:n=>e({selectedPlantId:n}),clearError:()=>{},clearPlants:()=>e({plants:[],selectedPlantId:null})}));class HealthDiagnosisService{async updatePlantHealthDiagnosis(t){var o,s;if(!t.images||t.images.length===0)throw new Error("Esta planta no tiene imágenes para analizar. Toma una foto primero.");const n=[...t.images].sort((l,c)=>c.timestamp.getTime()-l.timestamp.getTime())[0],{data:{session:a},error:i}=await supabase.auth.getSession();if(i||!(a!=null&&a.access_token))throw console.error("💥 [Health] User session not available:",i),new Error("Usuario no autenticado. Por favor inicia sesión nuevamente.");try{const l=await fetch(n.url,{method:"HEAD"});if(!l.ok)throw new Error(`Imagen no accesible: ${l.status}`)}catch(l){throw console.error("💥 [Health] Error verificando acceso a imagen:",l),new Error("La imagen de la planta no está disponible. Intenta tomar una nueva foto.")}console.log("🔬 [Health] Llamando a update-health-diagnosis...");try{const{data:l,error:c}=await supabase.functions.invoke("update-health-diagnosis",{body:{imageUrl:n.url,plantName:t.name,species:t.species},headers:{Authorization:`Bearer ${a.access_token}`}});if(c)throw console.error("💥 [Health] Error en función update-health-diagnosis:",c),new Error(`Error en análisis: ${c.message}`);if(!l||!l.overallHealth)throw console.error("💥 [Health] Datos incompletos del análisis:",l),new Error("El análisis no devolvió información de salud válida.");console.log("🎯 [Health] Análisis de salud completado exitosamente:",{overallHealth:l.overallHealth,confidence:l.confidence,issuesCount:((o=l.issues)==null?void 0:o.length)||0,recommendationsCount:((s=l.recommendations)==null?void 0:s.length)||0});const d={excellent:95,good:80,fair:60,poor:30}[l.overallHealth]||l.confidence||60;return console.log("📊 [Health] Nuevo score de salud calculado:",{overallHealth:l.overallHealth,numericScore:d,confidence:l.confidence}),{healthScore:d,healthAnalysis:l,updatedImage:{...n,healthAnalysis:l}}}catch(l){console.error("💥 [Health] Error en diagnóstico primario:",l),console.log("🔄 [Health] Intentando análisis de fallback...");try{if(n.healthAnalysis&&n.healthAnalysis.overallHealth){console.log("🎯 [Health] Usando análisis existente de la imagen");const c=n.healthAnalysis;return{healthScore:{excellent:95,good:80,fair:60,poor:30}[c.overallHealth]||60,healthAnalysis:c,updatedImage:n}}}catch(c){console.error("💥 [Health] Error en fallback:",c)}throw new Error("No se pudo actualizar el diagnóstico de salud. Verifica tu conexión a internet e intenta nuevamente.")}}async updatePlantHealthScore(t,n,a,i,o){try{console.log("🏥 [DB] Actualizando health score en BD:",{plantId:t,healthScore:a,hasAnalysis:!!i});const{error:s}=await supabase.from("plants").update({health_score:a}).eq("id",t).eq("user_id",n);if(s)throw console.error("💥 [DB] Error actualizando health score:",s),new Error(`Error updating plant health score: ${s.message}`);if(i&&o){console.log("📸 [DB] Actualizando análisis de salud en imagen:",o);const{error:l}=await supabase.from("plant_images").update({health_analysis:i}).eq("id",o).eq("user_id",n);l&&console.warn("⚠️ [DB] Error actualizando análisis en imagen:",l)}console.log("✅ [DB] Health score actualizado exitosamente")}catch(s){throw console.error("💥 [DB] Error en updatePlantHealthScore:",s),s}}}const healthDiagnosisService=new HealthDiagnosisService,usePlantMutations=()=>{const e=useQueryClient(),{addPlant:t,updatePlant:n,deletePlant:a}=usePlantStore.getState(),i=useAuthStore(p=>p.user),o=i==null?void 0:i.id,{addToast:s}=useToast(),l=useMutation({mutationFn:p=>{if(!o)throw new Error("User not authenticated");const{imageDataUrl:f,location:h}=p;return t(f,h,o)},onSuccess:p=>{e.invalidateQueries({queryKey:["plants",o]})},onError:p=>{console.error("Failed to create plant:",p)}}),c=useMutation({mutationFn:p=>{if(!o)throw new Error("User not authenticated");return n(p,o)},onMutate:async p=>{await e.cancelQueries({queryKey:["plants",o]});const f=e.getQueryData(["plants",o]);return f&&e.setQueryData(["plants",o],f.map(h=>h.id===p.id?p:h)),{previousPlants:f}},onError:(p,f,h)=>{h!=null&&h.previousPlants&&e.setQueryData(["plants",o],h.previousPlants)},onSettled:p=>{e.invalidateQueries({queryKey:["plants",o]})}}),u=useMutation({mutationFn:async({plant:p,userId:f})=>{console.log("🩺 [Mutation] Iniciando actualización de diagnóstico...");const h=await healthDiagnosisService.updatePlantHealthDiagnosis(p);return await healthDiagnosisService.updatePlantHealthScore(p.id,f,h.healthScore,h.healthAnalysis,h.updatedImage.id),console.log("✅ [Mutation] Diagnóstico actualizado exitosamente"),h},onSuccess:(p,{plant:f})=>{e.invalidateQueries({queryKey:["plants"]}),e.invalidateQueries({queryKey:["plant",f.id]}),s({type:"success",title:"Diagnóstico Actualizado",message:`Nuevo estado de salud: ${p.healthScore}%`})},onError:p=>{console.error("💥 [Mutation] Error actualizando diagnóstico:",p),s({type:"error",title:"Error en Diagnóstico",message:p.message})}}),d=useMutation({mutationFn:p=>{if(!o)throw new Error("User not authenticated");return a(p,o)},onMutate:async p=>{await e.cancelQueries({queryKey:["plants",o]});const f=e.getQueryData(["plants",o]);return f&&e.setQueryData(["plants",o],f.filter(h=>h.id!==p)),{previousPlants:f}},onError:(p,f,h)=>{h!=null&&h.previousPlants&&e.setQueryData(["plants",o],h.previousPlants)},onSettled:()=>{e.invalidateQueries({queryKey:["plants",o]})}});return{createPlant:l.mutate,isCreatingPlant:l.isPending,updatePlant:c.mutate,isUpdatingPlant:c.isPending,updatePlantHealthMutation:u.mutate,isUpdatingPlantHealth:u.isPending,deletePlant:d.mutate,isDeletingPlant:d.isPending}},AddPlantMenu=()=>{const[e,t]=reactExports.useState(!1),n=useNavigate(),{createPlant:a,isCreatingPlant:i}=usePlantMutations();reactExports.useEffect(()=>{const l=c=>{c.key==="Escape"&&t(!1)};return e&&document.addEventListener("keydown",l),()=>{document.removeEventListener("keydown",l)}},[e]);const o=[{id:"camera",icon:Camera,label:"Tomar Foto",color:"bg-blue-500",action:()=>{t(!1),n(navigation.toCamera())}},{id:"gallery",icon:Image$1,label:"Galería",color:"bg-purple-500",action:()=>s()}],s=reactExports.useCallback(()=>{const l=document.createElement("input");l.type="file",l.accept="image/*",l.onchange=async c=>{var d;const u=(d=c.target.files)==null?void 0:d[0];if(u){const p=new FileReader;p.onload=async f=>{var v;const h=(v=f.target)==null?void 0:v.result;if(h){t(!1);const b=new Promise((g,E)=>{a({imageDataUrl:h,location:"Interior"},{onSuccess:j=>{j!=null&&j.id&&n(navigation.toPlantDetail(j.id)),g(j)},onError:j=>{console.error("Failed to create plant:",j),E(j)}})});toast.promise(b,{loading:"Analizando imagen... La IA está trabajando.",success:g=>`¡Planta "${g.name}" creada con éxito!`,error:g=>`Error: ${g.message}`})}},p.readAsDataURL(u)}},l.click()},[a,n]);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"relative flex items-center",children:[jsxRuntimeExports.jsx(motion.button,{onClick:()=>t(!e),className:"w-12 h-12 bg-primary-500 hover:bg-primary-600 disabled:bg-primary-300 text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-200 flex items-center justify-center disabled:cursor-not-allowed",whileHover:{scale:i?1:1.05},whileTap:{scale:i?1:.95},disabled:i,"aria-label":e?"Cerrar menú":"Agregar planta","aria-expanded":e,children:jsxRuntimeExports.jsx(AnimatePresence,{mode:"wait",children:i?jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},children:jsxRuntimeExports.jsx(LoaderCircle,{className:"w-6 h-6 animate-spin"})},"loading"):jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,rotate:-180},animate:{opacity:1,rotate:e?45:0},exit:{opacity:0,rotate:180},transition:{duration:.2},children:jsxRuntimeExports.jsx(Plus,{className:"w-6 h-6"})},"plus")})}),e&&jsxRuntimeExports.jsx(motion.span,{initial:{opacity:0,x:10},animate:{opacity:1,x:16},exit:{opacity:0,x:10},transition:{duration:.2},className:"ml-3 px-3 py-1 rounded-full bg-primary-100 text-primary-700 text-xs font-medium shadow-md whitespace-nowrap z-50",children:"Agregar planta"})]}),jsxRuntimeExports.jsx(AnimatePresence,{children:e&&jsxRuntimeExports.jsx(motion.div,{className:"absolute bottom-16 right-0 flex flex-col gap-3",initial:"closed",animate:"open",exit:"closed",variants:{open:{transition:{staggerChildren:.1,delayChildren:.1}},closed:{transition:{staggerChildren:.05,staggerDirection:-1}}},children:o.map((l,c)=>jsxRuntimeExports.jsxs(motion.button,{onClick:l.action,className:`w-12 h-12 ${l.color} hover:scale-105 text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-200 flex items-center justify-center group relative`,variants:{open:{opacity:1,scale:1,y:0,transition:{delay:c*.1}},closed:{opacity:0,scale:.3,y:20,transition:{delay:(o.length-c)*.05}}},whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":l.label,children:[jsxRuntimeExports.jsx(l.icon,{className:"w-5 h-5"}),jsxRuntimeExports.jsx("div",{className:"absolute right-full mr-3 opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none",children:jsxRuntimeExports.jsxs("div",{className:"bg-gray-900 text-white text-xs px-2 py-1 rounded-lg whitespace-nowrap",children:[l.label,jsxRuntimeExports.jsx("div",{className:"absolute left-full top-1/2 -translate-y-1/2 w-0 h-0 border-l-4 border-r-0 border-t-2 border-b-2 border-transparent border-l-gray-900"})]})})]},l.id))})}),jsxRuntimeExports.jsx(AnimatePresence,{children:e&&jsxRuntimeExports.jsx(motion.div,{className:"fixed inset-0 z-[-1]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>t(!1)})})]})},navItems=[{icon:House,path:routes.dashboard,label:"Inicio",description:"Tu jardín personal"},{icon:Bot,path:routes.gardenChat,label:"Chat IA",description:"Asistente de plantas"},{icon:Settings$1,path:routes.settings,label:"Ajustes",description:"Configuración"}],BottomNavigation=()=>{const e=useLocation(),t=e.pathname.startsWith("/plant/");return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("nav",{className:"safe-bottom fixed bottom-0 left-0 right-0 z-50 glass-enhanced border-t border-contrast","data-tour":"bottom-navigation",children:jsxRuntimeExports.jsx("div",{className:"flex justify-around items-center h-20 max-w-lg mx-auto px-2",children:navItems.map(n=>{const a=isActiveRoute(e.pathname,n.path);return jsxRuntimeExports.jsx(motion.div,{className:"relative flex-1 h-full",whileTap:{scale:.92},whileHover:{scale:1.02},children:jsxRuntimeExports.jsxs(Link,{to:n.path,className:cn("touch-target relative flex flex-col items-center justify-center w-full h-full rounded-2xl transition-all duration-200","focus-contrast",a?"text-primary-700 dark:text-primary-400":"text-neutral-700 dark:text-neutral-300 hover:text-primary-600 dark:hover:text-primary-400"),"aria-label":`${n.label} - ${n.description}`,...a?{"aria-current":"page"}:{},...n.path===routes.gardenChat?{"data-tour":"chat-tab"}:{},children:[jsxRuntimeExports.jsx(AnimatePresence,{children:a&&jsxRuntimeExports.jsx(motion.div,{layoutId:"nav-background",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{type:"spring",stiffness:400,damping:30},className:"absolute inset-1 bg-primary-500/10 dark:bg-primary-400/10 rounded-xl"})}),jsxRuntimeExports.jsx(motion.div,{animate:{scale:a?1.1:1,y:a?-2:0},transition:{duration:.2},className:cn("relative z-10",a?"text-[#2A7F3E]":"text-[#888]"),children:jsxRuntimeExports.jsx(n.icon,{size:24,strokeWidth:a?2.5:2,className:"drop-shadow-sm"})}),jsxRuntimeExports.jsx(motion.span,{animate:{scale:a?1.05:1,fontWeight:a?600:500},transition:{duration:.2},className:"text-xs mt-1 relative z-10",children:n.label}),jsxRuntimeExports.jsx(AnimatePresence,{children:a&&jsxRuntimeExports.jsx(motion.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},transition:{delay:.1},className:"absolute left-1/2 -translate-x-1/2 w-1 h-1 bg-primary-500 dark:bg-primary-400 rounded-full mt-1.5"})})]})},n.path)})})}),!t&&jsxRuntimeExports.jsx("div",{className:"fixed bottom-20 sm:bottom-24 right-4 sm:right-6 z-40","data-tour":"add-plant-fab",children:jsxRuntimeExports.jsx(AddPlantMenu,{})})]})},useOfflineStatus=()=>{const[e,t]=reactExports.useState(navigator.onLine);return reactExports.useEffect(()=>{const n=()=>t(!0),a=()=>t(!1);return window.addEventListener("online",n),window.addEventListener("offline",a),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",a)}},[]),e},OfflineIndicator=()=>{const e=useOfflineStatus();return jsxRuntimeExports.jsxs(AnimatePresence,{children:[!e&&jsxRuntimeExports.jsx(motion.div,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},exit:{y:-100,opacity:0},className:"fixed top-0 left-0 right-0 z-50 safe-area-top",children:jsxRuntimeExports.jsx("div",{className:"bg-red-500 text-white px-4 py-2 text-center text-sm font-medium",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[jsxRuntimeExports.jsx(WifiOff,{size:16}),jsxRuntimeExports.jsx("span",{children:"Sin conexión - Modo offline"})]})})}),e&&jsxRuntimeExports.jsx(motion.div,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},exit:{y:-100,opacity:0},className:"fixed top-0 left-0 right-0 z-50 safe-area-top",onAnimationComplete:()=>{setTimeout(()=>{const t=document.querySelector("[data-online-indicator]");t&&t.remove()},2e3)},children:jsxRuntimeExports.jsx("div",{className:"bg-green-500 text-white px-4 py-2 text-center text-sm font-medium","data-online-indicator":!0,children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[jsxRuntimeExports.jsx(Wifi,{size:16}),jsxRuntimeExports.jsx("span",{children:"Conexión restaurada"})]})})})]})};function createJSONStorage(e,t){let n;try{n=e()}catch(i){return}return{getItem:i=>{var o;const s=c=>c===null?null:JSON.parse(c,void 0),l=(o=n.getItem(i))!=null?o:null;return l instanceof Promise?l.then(s):s(l)},setItem:(i,o)=>n.setItem(i,JSON.stringify(o,void 0)),removeItem:i=>n.removeItem(i)}}const toThenable=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(a){return toThenable(a)(n)},catch(a){return this}}}catch(n){return{then(a){return this},catch(a){return toThenable(a)(n)}}}},persistImpl=(e,t)=>(n,a,i)=>{let o={storage:createJSONStorage(()=>localStorage),partialize:b=>b,version:0,merge:(b,g)=>({...g,...b}),...t},s=!1;const l=new Set,c=new Set;let u=o.storage;if(!u)return e((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...b)},a,i);const d=()=>{const b=o.partialize({...a()});return u.setItem(o.name,{state:b,version:o.version})},p=i.setState;i.setState=(b,g)=>{p(b,g),d()};const f=e((...b)=>{n(...b),d()},a,i);i.getInitialState=()=>f;let h;const v=()=>{var b,g;if(!u)return;s=!1,l.forEach(j=>{var w;return j((w=a())!=null?w:f)});const E=((g=o.onRehydrateStorage)==null?void 0:g.call(o,(b=a())!=null?b:f))||void 0;return toThenable(u.getItem.bind(u))(o.name).then(j=>{if(j)if(typeof j.version=="number"&&j.version!==o.version){if(o.migrate){const w=o.migrate(j.state,j.version);return w instanceof Promise?w.then(S=>[!0,S]):[!0,w]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,j.state];return[!1,void 0]}).then(j=>{var w;const[S,A]=j;if(h=o.merge(A,(w=a())!=null?w:f),n(h,!0),S)return d()}).then(()=>{E==null||E(h,void 0),h=a(),s=!0,c.forEach(j=>j(h))}).catch(j=>{E==null||E(void 0,j)})};return i.persist={setOptions:b=>{o={...o,...b},b.storage&&(u=b.storage)},clearStorage:()=>{u==null||u.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>v(),hasHydrated:()=>s,onHydrate:b=>(l.add(b),()=>{l.delete(b)}),onFinishHydration:b=>(c.add(b),()=>{c.delete(b)})},o.skipHydration||v(),h||f},persist=persistImpl,useThemeStore=create()(persist((e,t)=>({isDark:typeof window!="undefined"?window.matchMedia("(prefers-color-scheme: dark)").matches:!1,toggleTheme:()=>{const{isDark:n}=t(),a=!n;e({isDark:a}),updateDOMTheme(a),"vibrate"in navigator&&navigator.vibrate(50)},setTheme:n=>{e({isDark:n}),updateDOMTheme(n)}}),{name:"theme-storage",onRehydrateStorage:()=>e=>{e&&updateDOMTheme(e.isDark)}})),updateDOMTheme=e=>{if(typeof window=="undefined")return;const t=e?"dark":"light";document.documentElement.setAttribute("data-theme",t),e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},Layout=()=>{const e=useLocation(),{isDark:t}=useThemeStore(),n=e.pathname==="/camera",a=()=>{const o={"/":"Página de inicio - Tu jardín personal","/camera":"Cámara - Agregar nueva planta","/chat":"Chat con IA - Asistente de plantas","/garden-chat":"Chat del jardín - Consultas generales","/settings":"Configuración - Ajustes de la aplicación"},s=e.pathname.includes("/plant/")?"/plant":e.pathname,l=o[s]||o[e.pathname]||"Página",c=document.createElement("div");c.setAttribute("aria-live","polite"),c.setAttribute("aria-atomic","true"),c.setAttribute("class","sr-only"),c.textContent=`Navegando a ${l}`,document.body.appendChild(c),setTimeout(()=>{document.body.removeChild(c)},1e3)};reactExports.useEffect(()=>{a()},[e.pathname]),reactExports.useEffect(()=>{const o=t?"dark":"light";document.documentElement.setAttribute("data-theme",o)},[t]);const i=()=>jsxRuntimeExports.jsx("a",{href:"#main-content",className:"sr-only focus:not-sr-only fixed top-4 left-4 z-50 bg-primary-600 text-white px-4 py-2 rounded-md font-medium transition-all duration-200 focus:shadow-lg",onFocus:o=>{o.currentTarget.scrollIntoView({behavior:"smooth"})},children:"Saltar al contenido principal"});return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-background text-text-primary",children:[jsxRuntimeExports.jsx(i,{}),jsxRuntimeExports.jsx("h1",{className:"sr-only",children:"Plantitas - Aplicación de cuidado de plantas"}),jsxRuntimeExports.jsx("main",{id:"main-content",role:"main","aria-label":"Contenido principal",className:"pb-28 min-h-screen focus:outline-none",tabIndex:-1,children:jsxRuntimeExports.jsx(AnimatePresence,{mode:"wait",children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15,ease:"easeOut"},className:"w-full h-full",children:jsxRuntimeExports.jsx(Outlet,{})},e.pathname)})}),jsxRuntimeExports.jsx("aside",{role:"complementary","aria-label":"Información de estado",children:jsxRuntimeExports.jsx(OfflineIndicator,{})}),!n&&jsxRuntimeExports.jsx("nav",{role:"navigation","aria-label":"Navegación inferior",children:jsxRuntimeExports.jsx(BottomNavigation,{})}),jsxRuntimeExports.jsx("style",{children:`
        @media (prefers-contrast: high) {
          :root {
            --color-background: #000000;
            --color-surface: #111111;
            --color-text-primary: #ffffff;
            --color-text-secondary: #ffffff;
            --color-border: #ffffff;
            --color-accent: #00ff00;
          }
        }

        @media (prefers-reduced-motion: reduce) {
          * {
            animation-duration: 0.01ms !important;
            animation-iteration-count: 1 !important;
            transition-duration: 0.01ms !important;
          }
        }

        /* Screen reader only utility */
        .sr-only {
          position: absolute;
          width: 1px;
          height: 1px;
          padding: 0;
          margin: -1px;
          overflow: hidden;
          clip: rect(0, 0, 0, 0);
          white-space: nowrap;
          border: 0;
        }

        .sr-only.focus\\:not-sr-only:focus {
          position: static;
          width: auto;
          height: auto;
          padding: inherit;
          margin: inherit;
          overflow: visible;
          clip: auto;
          white-space: normal;
        }

        /* Enhanced focus indicators */
        *:focus-visible {
          outline: 3px solid var(--color-accent) !important;
          outline-offset: 2px !important;
          border-radius: 4px;
        }

        /* High contrast focus ring */
        @media (prefers-contrast: high) {
          *:focus-visible {
            outline: 4px solid #00ff00 !important;
            outline-offset: 3px !important;
          }
        }
      `})]})};class ErrorBoundary extends reactExports.Component{constructor(n){super(n);fe(this,"handleReload",()=>{window.location.reload()});fe(this,"handleGoHome",()=>{window.location.href="/plantitas-app/"});this.state={hasError:!1}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,a){this.setState({error:n,errorInfo:a});const i={userAgent:navigator.userAgent,platform:navigator.platform,isOnline:navigator.onLine,viewport:{width:window.innerWidth,height:window.innerHeight},url:window.location.href,timestamp:new Date().toISOString()};console.error("[ErrorBoundary] Error caught:",{error:n.message,stack:n.stack,errorInfo:a,mobileInfo:i}),console.warn("[ErrorBoundary] Production error detected:",{message:n.message,mobile:i})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-4",children:jsxRuntimeExports.jsx("div",{className:"max-w-md w-full",children:jsxRuntimeExports.jsxs("div",{className:"glass-effect rounded-2xl p-8 text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center",children:jsxRuntimeExports.jsx(TriangleAlert,{size:32,className:"text-red-500"})}),jsxRuntimeExports.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"¡Oops! Algo salió mal"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Ha ocurrido un error inesperado. No te preocupes, tus plantas están seguras."}),!1,jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("button",{onClick:this.handleReload,className:"w-full px-4 py-3 bg-primary-500 text-white rounded-xl font-medium ios-button flex items-center justify-center space-x-2",children:[jsxRuntimeExports.jsx(RefreshCw,{size:18}),jsxRuntimeExports.jsx("span",{children:"Recargar Página"})]}),jsxRuntimeExports.jsxs("button",{onClick:this.handleGoHome,className:"w-full px-4 py-3 bg-gray-600 text-white rounded-xl font-medium ios-button flex items-center justify-center space-x-2",children:[jsxRuntimeExports.jsx(House,{size:18}),jsxRuntimeExports.jsx("span",{children:"Ir al Inicio"})]})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-4",children:"Si el problema persiste, intenta limpiar el caché del navegador."})]})})}):this.props.children}}const usePlantsQuery=()=>{const e=useAuthStore(t=>t.user);return useQuery({queryKey:["plants",e==null?void 0:e.id],queryFn:async()=>e?plantService$2.getUserPlantSummaries(e.id):Promise.resolve([]),enabled:!!e,staleTime:PERFORMANCE_CONFIG.QUERY.STALE_TIME.MEDIUM,gcTime:PERFORMANCE_CONFIG.QUERY.GC_TIME.LONG,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!0,placeholderData:[]})},falsyToString=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,cx=clsx,cva=(e,t)=>n=>{var a;if((t==null?void 0:t.variants)==null)return cx(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:o}=t,s=Object.keys(i).map(u=>{const d=n==null?void 0:n[u],p=o==null?void 0:o[u];if(d===null)return null;const f=falsyToString(d)||falsyToString(p);return i[u][f]}),l=n&&Object.entries(n).reduce((u,d)=>{let[p,f]=d;return f===void 0||(u[p]=f),u},{}),c=t==null||(a=t.compoundVariants)===null||a===void 0?void 0:a.reduce((u,d)=>{let{class:p,className:f,...h}=d;return Object.entries(h).every(v=>{let[b,g]=v;return Array.isArray(g)?g.includes({...o,...l}[b]):{...o,...l}[b]===g})?[...u,p,f]:u},[]);return cx(e,s,c,n==null?void 0:n.class,n==null?void 0:n.className)},cardVariants=cva("overflow-hidden transition-all duration-300",{variants:{variant:{default:["bg-white/90 border border-neutral-200","dark:bg-neutral-900/90 dark:border-neutral-700","shadow-md hover:shadow-lg"],glass:["glass","hover:shadow-glass-lg","border-neutral-200/50 dark:border-neutral-700/50"],elevated:["bg-white border border-neutral-100","dark:bg-neutral-800 dark:border-neutral-700","shadow-lg hover:shadow-xl"],outline:["bg-transparent border-2 border-neutral-200","dark:border-neutral-700","hover:border-primary-300 dark:hover:border-primary-600"],ghost:["bg-transparent border-none","hover:bg-neutral-50 dark:hover:bg-neutral-900/50"]},size:{sm:"p-4",default:"p-6",lg:"p-8",xl:"p-10"},radius:{none:"rounded-none",sm:"rounded-lg",default:"rounded-xl",lg:"rounded-2xl",full:"rounded-3xl"},interactive:{true:"cursor-pointer",false:""}},defaultVariants:{variant:"default",size:"default",radius:"default",interactive:!1}}),Card=React$3.forwardRef(({className:e,variant:t,size:n,radius:a,interactive:i,hover:o=!1,loading:s=!1,children:l,ariaLabel:c,...u},d)=>jsxRuntimeExports.jsx(motion.div,{whileHover:i&&!s?{scale:o?1.02:1.01,y:o?-4:-2}:void 0,whileTap:i&&!s?{scale:.98}:void 0,transition:{duration:.2,ease:[.4,0,.2,1]},className:cn(cardVariants({variant:t,size:n,radius:a,interactive:i}),s&&"animate-pulse",e),ref:d,...u,children:s?jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"h-4 bg-neutral-200 dark:bg-neutral-700 rounded animate-shimmer"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("div",{className:"h-3 bg-neutral-200 dark:bg-neutral-700 rounded animate-shimmer"}),jsxRuntimeExports.jsx("div",{className:"h-3 bg-neutral-200 dark:bg-neutral-700 rounded w-4/5 animate-shimmer"})]})]}):l}));Card.displayName="Card";const CardHeader=React$3.forwardRef(({className:e,...t},n)=>jsxRuntimeExports.jsx("div",{ref:n,className:cn("flex flex-col space-y-1.5 pb-4",e),...t}));CardHeader.displayName="CardHeader";const CardTitle=React$3.forwardRef(({className:e,...t},n)=>jsxRuntimeExports.jsx("h3",{ref:n,className:cn("text-xl font-semibold leading-tight text-neutral-900 dark:text-neutral-100",e),...t}));CardTitle.displayName="CardTitle";const CardDescription=React$3.forwardRef(({className:e,...t},n)=>jsxRuntimeExports.jsx("p",{ref:n,className:cn("text-sm text-neutral-600 dark:text-neutral-400 leading-relaxed",e),...t}));CardDescription.displayName="CardDescription";const CardContent=React$3.forwardRef(({className:e,...t},n)=>jsxRuntimeExports.jsx("div",{ref:n,className:cn("",e),...t}));CardContent.displayName="CardContent";const CardFooter=React$3.forwardRef(({className:e,...t},n)=>jsxRuntimeExports.jsx("div",{ref:n,className:cn("flex items-center pt-4 mt-4 border-t border-neutral-200 dark:border-neutral-700",e),...t}));CardFooter.displayName="CardFooter";const imageCache=new Set,preloadedImages=new Map,LazyImage=({src:e,alt:t,className:n="",fallback:a,onLoad:i,onError:o,priority:s=!1,sizes:l="(max-width: 768px) 100vw, 50vw"})=>{const[c,u]=reactExports.useState(()=>imageCache.has(e)),[d,p]=reactExports.useState(!1),f=reactExports.useRef(null);reactExports.useEffect(()=>{if(s&&!imageCache.has(e)&&!preloadedImages.has(e)){const b=new Image;b.src=e,b.onload=()=>{imageCache.add(e),preloadedImages.set(e,b)},b.onerror=()=>{preloadedImages.delete(e)},preloadedImages.set(e,b)}},[e,s]);const h=reactExports.useCallback(()=>{imageCache.add(e),u(!0),i==null||i()},[i,e]),v=reactExports.useCallback(()=>{imageCache.delete(e),p(!0),o==null||o()},[o,e]);return d&&a?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:a}):d?jsxRuntimeExports.jsx("div",{className:`bg-gray-200 dark:bg-gray-700 flex items-center justify-center ${n}`,children:jsxRuntimeExports.jsx("span",{className:"text-gray-400 text-sm",children:"No image"})}):jsxRuntimeExports.jsxs("div",{className:`relative overflow-hidden ${n}`,children:[jsxRuntimeExports.jsx(AnimatePresence,{children:!c&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"absolute inset-0 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 dark:from-gray-700 dark:via-gray-600 dark:to-gray-700 animate-pulse"})}),jsxRuntimeExports.jsx(motion.img,{ref:f,src:e,alt:t,className:`w-full h-full object-cover ${c?"opacity-100":"opacity-0"}`,loading:s?"eager":"lazy",decoding:"async",fetchPriority:s?"high":"low",sizes:l,onLoad:h,onError:v,initial:{opacity:0},animate:{opacity:c?1:0},transition:{duration:.15}})]})},PlantHealthIndicator=reactExports.memo(({score:e})=>{const t=reactExports.useMemo(()=>e>=80?{color:"bg-green-400",textColor:"text-green-600 dark:text-green-400",icon:jsxRuntimeExports.jsx(Sparkles,{className:"w-4 h-4 mr-1 text-green-400"}),status:"Excelente"}:e>=60?{color:"bg-yellow-300",textColor:"text-yellow-600 dark:text-yellow-400",icon:jsxRuntimeExports.jsx(Sun,{className:"w-4 h-4 mr-1 text-yellow-400"}),status:"Buena"}:{color:"bg-red-300",textColor:"text-red-600 dark:text-red-400",icon:jsxRuntimeExports.jsx(TriangleAlert,{className:"w-4 h-4 mr-1 text-red-400"}),status:"Atención"},[e]);return jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 w-full",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[jsxRuntimeExports.jsx("div",{className:"relative w-24 h-2 bg-neutral-100 dark:bg-neutral-800 rounded-full overflow-hidden",children:jsxRuntimeExports.jsx(motion.div,{className:`absolute top-0 left-0 h-full rounded-full ${t.color}`,initial:{width:0},animate:{width:`${e}%`},transition:{duration:.5,ease:"easeOut"}})}),jsxRuntimeExports.jsxs("span",{className:"text-xs font-semibold text-neutral-500 dark:text-neutral-400",children:[e,"%"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 text-xs px-2 py-0.5 rounded-full bg-neutral-50 dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-700",children:[t.icon,jsxRuntimeExports.jsx("span",{className:t.textColor,children:t.status})]})]})});PlantHealthIndicator.displayName="PlantHealthIndicator";const PlantCard=reactExports.memo(({plant:e,index:t})=>{const n=useNavigate(),a=useQueryClient(),{needsWatering:i,isFavorite:o}=reactExports.useMemo(()=>{const d=e.lastWatered&&e.wateringFrequency?new Date().getTime()-new Date(e.lastWatered).getTime()>e.wateringFrequency*24*60*60*1e3:!e.lastWatered,p=e.healthScore>=80;return{needsWatering:d,isFavorite:p}},[e.lastWatered,e.wateringFrequency,e.healthScore]),s=()=>{a.prefetchQuery({queryKey:["plant",e.id],queryFn:async()=>{var v,b,g,E,j;const{supabase:d}=await __vitePreload(async()=>{const{supabase:w}=await Promise.resolve().then(()=>supabase$1);return{supabase:w}},void 0),{data:p,error:f}=await d.from("plants").select(`
            *,
            plant_images(*)
          `).eq("id",e.id).single();if(f)throw f.code==="PGRST116"?new Error("Planta no encontrada."):new Error("Error al cargar la información de la planta.");const h=p;return{id:h.id,name:h.name,species:h.species,description:(v=h.description)!=null?v:void 0,funFacts:(b=h.fun_facts)!=null?b:void 0,variety:(g=h.variety)!=null?g:void 0,nickname:(E=h.nickname)!=null?E:void 0,location:h.location,plantEnvironment:h.plant_environment,lightRequirements:h.light_requirements,dateAdded:new Date(h.date_added),lastWatered:h.last_watered?new Date(h.last_watered):void 0,lastFertilized:h.last_fertilized?new Date(h.last_fertilized):void 0,healthScore:(j=h.health_score)!=null?j:0,careProfile:h.care_profile,personality:h.personality,images:h.plant_images.map(w=>{var S,A;return{id:w.id,url:(S=w.url)!=null?S:"",timestamp:new Date(w.created_at),isProfileImage:(A=w.is_profile_image)!=null?A:!1,healthAnalysis:w.health_analysis}}),chatHistory:[],notifications:[]}},staleTime:1e3*60*5})},l=()=>n(navigation.toPlantDetail(e.id)),c=Math.min(t,4),u=t<8;return jsxRuntimeExports.jsx(motion.div,{initial:u?{opacity:0,y:10}:{opacity:1,y:0},animate:{opacity:1,y:0},transition:u?{delay:c*.02,duration:.2,ease:"easeOut"}:{duration:0},whileHover:{y:-1},className:"group",children:jsxRuntimeExports.jsxs(Card,{variant:"glass",size:"sm",radius:"lg",interactive:!0,hover:!0,onClick:l,onMouseEnter:s,className:"overflow-hidden border-2 hover:border-primary-300 dark:hover:border-primary-600 transition-all duration-200 p-4 mb-4",children:[jsxRuntimeExports.jsx(CardHeader,{className:"pb-2 flex-shrink-0 space-y-0",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"relative w-20 h-20 rounded-[8px] overflow-hidden bg-gradient-to-br from-primary-50 to-primary-100 dark:from-primary-950 dark:to-primary-900 flex-shrink-0 border border-primary-200 dark:border-primary-800",children:[e.profileImageUrl?jsxRuntimeExports.jsx(LazyImage,{src:e.profileImageUrl,alt:e.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200",priority:t<4,sizes:"(max-width: 768px) 20vw, 10vw"}):jsxRuntimeExports.jsx("div",{className:"w-full h-full flex items-center justify-center text-primary-400 dark:text-primary-600",children:jsxRuntimeExports.jsx(Sun,{size:24})}),jsxRuntimeExports.jsx(AnimatePresence,{children:o&&jsxRuntimeExports.jsx(motion.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},transition:{duration:.2},className:"absolute -top-1 -right-1 w-6 h-6 bg-error-500 rounded-full flex items-center justify-center shadow-lg",children:jsxRuntimeExports.jsx(Heart,{size:12,className:"text-white fill-current"})})}),jsxRuntimeExports.jsx(AnimatePresence,{children:i&&jsxRuntimeExports.jsx(motion.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},transition:{duration:.2},className:"absolute -bottom-1 -right-1 w-6 h-6 bg-warning-500 rounded-full flex items-center justify-center shadow-lg",children:jsxRuntimeExports.jsx(motion.div,{animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},children:jsxRuntimeExports.jsx(Droplets,{size:12,className:"text-white"})})})})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:[jsxRuntimeExports.jsx(CardTitle,{className:"text-2xl font-bold text-neutral-900 dark:text-neutral-100 truncate mb-0 group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors",title:e.nickname||e.name,children:e.nickname||e.name}),jsxRuntimeExports.jsx("p",{className:"text-xs text-[#555] truncate mb-[6px]",title:e.species,children:e.species}),jsxRuntimeExports.jsx("div",{className:"flex items-center text-xs text-neutral-500 dark:text-neutral-500",children:jsxRuntimeExports.jsxs("span",{className:"px-2 py-1 bg-neutral-100 dark:bg-neutral-800 rounded-md",children:["📍 ",e.location]})})]})]})}),jsxRuntimeExports.jsxs(CardContent,{className:"pt-2 pb-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 w-full",children:[jsxRuntimeExports.jsx("div",{className:"relative w-24 h-[6px] bg-[#EEE] rounded-full overflow-hidden flex-shrink-0",children:jsxRuntimeExports.jsx(motion.div,{className:`absolute top-0 left-0 h-full rounded-full ${e.healthScore>=80?"bg-green-400":e.healthScore>=60?"bg-yellow-300":"bg-red-300"}`,initial:{width:0},animate:{width:`${e.healthScore}%`},transition:{duration:.5,ease:"easeOut"}})}),jsxRuntimeExports.jsxs("span",{className:"text-xs font-semibold text-neutral-500 dark:text-neutral-400 ml-1 min-w-[32px] text-right",children:[e.healthScore,"%"]}),jsxRuntimeExports.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-semibold ml-auto ${e.healthScore>=80?"bg-green-500/10 text-green-700":e.healthScore>=60?"bg-yellow-400/10 text-yellow-700":"bg-red-400/10 text-red-700"}`,style:{padding:"4px 8px"},children:[e.healthScore>=80?jsxRuntimeExports.jsx(Sparkles,{className:"w-4 h-4 mr-1 text-green-400"}):e.healthScore>=60?jsxRuntimeExports.jsx(Sun,{className:"w-4 h-4 mr-1 text-yellow-400"}):jsxRuntimeExports.jsx(TriangleAlert,{className:"w-4 h-4 mr-1 text-red-400"}),jsxRuntimeExports.jsx("span",{children:e.healthScore>=80?"Excelente":e.healthScore>=60?"Buena":"Atención"})]})]}),e.healthScore<40&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 bg-error-100 text-error-700 dark:bg-error-900/30 dark:text-error-300 rounded-full text-xs font-semibold",children:[jsxRuntimeExports.jsx(TriangleAlert,{className:"w-3 h-3 mr-1","aria-label":"Atención"}),"¡Atención!"]}),jsxRuntimeExports.jsx("span",{className:"text-xs text-error-600 dark:text-error-300",children:"Salud muy baja"})]})]}),jsxRuntimeExports.jsx(motion.div,{className:"absolute inset-0 bg-gradient-to-t from-primary-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none",initial:!1})]})})});PlantCard.displayName="PlantCard";function Skeleton({className:e,...t}){return jsxRuntimeExports.jsx("div",{className:cn("animate-shimmer rounded-md","bg-[linear-gradient(110deg,var(--color-neutral-200)_8%,var(--color-neutral-300)_18%,var(--color-neutral-200)_33%)]","dark:bg-[linear-gradient(110deg,var(--color-neutral-800)_8%,var(--color-neutral-700)_18%,var(--color-neutral-800)_33%)]","bg-[length:200%_100%]",e),...t})}const PlantCardSkeleton=()=>jsxRuntimeExports.jsxs(Card,{variant:"elevated",size:"default",className:"overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start p-4 space-x-4",children:[jsxRuntimeExports.jsx(Skeleton,{className:"w-20 h-20 rounded-lg flex-shrink-0"}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsxs(CardHeader,{className:"p-0",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-6 w-3/4"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-1/2 mt-2"})]}),jsxRuntimeExports.jsx(CardContent,{className:"p-0 mt-3",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Skeleton,{className:"w-16 h-1.5"}),jsxRuntimeExports.jsx(Skeleton,{className:"w-8 h-3"})]})})]})]}),jsxRuntimeExports.jsx(CardFooter,{className:"bg-neutral-50 dark:bg-neutral-800/50 p-2 border-t border-subtle",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center w-full",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-1/3"}),jsxRuntimeExports.jsx(Skeleton,{className:"w-8 h-8 rounded"})]})})]}),buttonVariants=cva("touch-target inline-flex items-center justify-center font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{primary:["bg-primary-600 text-white","hover:bg-primary-700","active:bg-primary-800","focus-visible:ring-primary-500/30","shadow-md hover:shadow-lg","disabled:bg-neutral-300 disabled:text-neutral-500","dark:bg-primary-500 dark:hover:bg-primary-400"],secondary:["bg-neutral-100 text-neutral-800 border border-neutral-300","hover:bg-neutral-200 hover:border-neutral-400","active:bg-neutral-300","focus-visible:ring-neutral-500/30","dark:bg-neutral-800 dark:text-neutral-100 dark:border-neutral-600","dark:hover:bg-neutral-700 dark:hover:border-neutral-500","shadow-sm hover:shadow-md"],outline:["bg-white text-neutral-800 border-2 border-neutral-800","hover:bg-neutral-50 hover:text-neutral-900","active:bg-neutral-100","focus-visible:ring-primary-500/30","dark:bg-neutral-950 dark:text-neutral-100 dark:border-neutral-200","dark:hover:bg-neutral-900 dark:hover:text-neutral-50"],ghost:["bg-transparent text-neutral-700 border border-transparent","hover:bg-neutral-100 hover:text-neutral-800","active:bg-neutral-200","focus-visible:ring-neutral-500/30","dark:text-neutral-300 dark:hover:bg-neutral-800 dark:hover:text-neutral-200","dark:active:bg-neutral-700"],destructive:["bg-error-600 text-white","hover:bg-error-700","active:bg-error-800","focus-visible:ring-error-500/30","shadow-md hover:shadow-lg","dark:bg-error-500 dark:text-black"],success:["bg-success-600 text-white","hover:bg-success-700","active:bg-success-800","focus-visible:ring-success-500/30","shadow-md hover:shadow-lg","dark:bg-success-500 dark:text-black"],warning:["bg-warning-600 text-white","hover:bg-warning-700","active:bg-warning-800","focus-visible:ring-warning-500/30","shadow-md hover:shadow-lg","dark:bg-warning-500 dark:text-black"],glass:["glass-enhanced text-neutral-800 border border-contrast","hover:backdrop-blur-xl hover:bg-contrast-surface","active:scale-[0.98]","focus-visible:ring-primary-500/30","dark:text-neutral-100"]},size:{xs:"h-8 px-3 text-xs rounded-md",sm:"h-10 px-4 text-sm rounded-lg",default:"h-11 px-6 text-base rounded-xl",lg:"h-12 px-8 text-lg rounded-xl",xl:"h-14 px-10 text-xl rounded-2xl",icon:"h-11 w-11 rounded-xl","icon-sm":"h-10 w-10 rounded-lg","icon-lg":"h-12 w-12 rounded-xl"},fullWidth:{true:"w-full",false:"w-auto"}},defaultVariants:{variant:"primary",size:"default",fullWidth:!1}}),Button=React$3.forwardRef(({className:e,variant:t,size:n,fullWidth:a,loading:i=!1,leftIcon:o,rightIcon:s,children:l,disabled:c,...u},d)=>{const p=c||i;return jsxRuntimeExports.jsxs(motion.button,{whileTap:p?void 0:{scale:.96},whileHover:p?void 0:{scale:1.02},transition:{duration:.15,ease:[.4,0,.2,1]},className:cn(buttonVariants({variant:t,size:n,fullWidth:a,className:e})),disabled:p,ref:d,...u,children:[i&&jsxRuntimeExports.jsx(motion.div,{className:"mr-2",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:jsxRuntimeExports.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",children:[jsxRuntimeExports.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeDasharray:"32",strokeDashoffset:"32",opacity:"0.3"}),jsxRuntimeExports.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeDasharray:"8",strokeDashoffset:"8"})]})}),o&&!i&&jsxRuntimeExports.jsx("span",{className:"mr-2 -ml-1",children:o}),jsxRuntimeExports.jsx("span",{className:cn("flex items-center justify-center",i&&"opacity-70"),"aria-hidden":i?"true":void 0,children:Array.isArray(l)?l.filter(f=>typeof f=="string"||typeof f=="number"||React$3.isValidElement(f)):typeof l=="string"||typeof l=="number"||React$3.isValidElement(l)?l:null}),s&&jsxRuntimeExports.jsx("span",{className:"ml-2 -mr-1",children:s})]})});Button.displayName="Button";const inputVariants=cva("w-full transition-all duration-200 outline-none disabled:cursor-not-allowed disabled:opacity-50",{variants:{variant:{default:["bg-white border border-neutral-300","dark:bg-neutral-900 dark:border-neutral-600","focus:border-primary-500 dark:focus:border-primary-400","focus:ring-2 focus:ring-primary-500/20"],filled:["bg-neutral-100 border border-transparent","dark:bg-neutral-800 dark:border-transparent","focus:bg-white focus:border-primary-500","dark:focus:bg-neutral-900 dark:focus:border-primary-400","focus:ring-2 focus:ring-primary-500/20"],glass:["glass border-neutral-200/50","dark:border-neutral-700/50","focus:border-primary-500/70 dark:focus:border-primary-400/70","focus:ring-2 focus:ring-primary-500/20"]},size:{sm:"h-10 px-3 text-sm rounded-lg",default:"h-12 px-4 text-base rounded-xl",lg:"h-14 px-5 text-lg rounded-xl"},state:{default:"",error:"border-error-500 focus:border-error-500 focus:ring-error-500/20",success:"border-success-500 focus:border-success-500 focus:ring-success-500/20",warning:"border-warning-500 focus:border-warning-500 focus:ring-warning-500/20"}},defaultVariants:{variant:"default",size:"default",state:"default"}}),Input=React$3.forwardRef(({className:e,variant:t,size:n,state:a,label:i,helperText:o,errorMessage:s,successMessage:l,leftIcon:c,rightIcon:u,loading:d=!1,showPasswordToggle:p=!1,floatingLabel:f=!1,type:h,disabled:v,value:b,defaultValue:g,...E},j)=>{const[w,S]=reactExports.useState(!1),[A,R]=reactExports.useState(!1),[_,$]=reactExports.useState(b||g||""),C=reactExports.useRef(null),O=reactExports.useCallback(Z=>{C.current=Z,typeof j=="function"?j(Z):j&&(j.current=Z)},[j]),N=s?"error":l?"success":a,T=!!_||w,L=p?A?"text":"password":h;reactExports.useEffect(()=>{b!==void 0&&$(b)},[b]);const B=Z=>{var U;S(!0),(U=E.onFocus)==null||U.call(E,Z)},I=Z=>{var U;S(!1),(U=E.onBlur)==null||U.call(E,Z)},z=Z=>{var U;$(Z.target.value),(U=E.onChange)==null||U.call(E,Z)},F=()=>{var Z;(Z=C.current)==null||Z.focus()};return jsxRuntimeExports.jsxs("div",{className:"w-full",children:[jsxRuntimeExports.jsxs("div",{className:"relative",children:[i&&!f&&jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-2",children:i}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[c&&jsxRuntimeExports.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-neutral-500 dark:text-neutral-400 pointer-events-none z-10",children:c}),i&&f&&jsxRuntimeExports.jsx(motion.label,{onClick:F,animate:{scale:T?.85:1,y:T?-24:0,x:T?4:c?36:16},transition:{duration:.2,ease:[.4,0,.2,1]},className:cn("absolute left-0 top-1/2 -translate-y-1/2 text-neutral-500 dark:text-neutral-400 pointer-events-none z-10 origin-left",T&&"text-primary-600 dark:text-primary-400","cursor-text"),children:i}),jsxRuntimeExports.jsx("input",{ref:O,type:L,value:_,disabled:v||d,className:cn(inputVariants({variant:t,size:n,state:N}),c&&"pl-10",(u||p||d)&&"pr-10",f&&T&&"pt-6 pb-2",(!n||n==="default")&&"py-[12px]","placeholder-[#777]",e),style:{...E.style},onFocus:B,onBlur:I,onChange:z,...E}),jsxRuntimeExports.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex items-center space-x-1",children:[d&&jsxRuntimeExports.jsx(motion.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-4 h-4 text-neutral-500",children:jsxRuntimeExports.jsx("svg",{viewBox:"0 0 24 24",fill:"none",className:"w-full h-full",children:jsxRuntimeExports.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeDasharray:"8",strokeDashoffset:"8"})})}),!d&&N==="error"&&jsxRuntimeExports.jsx(CircleAlert,{className:"w-4 h-4 text-error-500"}),!d&&N==="success"&&jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-4 h-4 text-success-500"}),p&&!d&&jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>R(!A),className:"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-200 transition-colors",tabIndex:-1,children:A?jsxRuntimeExports.jsx(EyeOff,{className:"w-4 h-4"}):jsxRuntimeExports.jsx(Eye,{className:"w-4 h-4"})}),u&&!d&&jsxRuntimeExports.jsx("div",{className:"text-neutral-500 dark:text-neutral-400",children:u})]})]}),jsxRuntimeExports.jsx(AnimatePresence,{children:w&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.15},className:cn("absolute inset-0 rounded-xl pointer-events-none",N==="error"&&"ring-2 ring-error-500/20",N==="success"&&"ring-2 ring-success-500/20",N==="default"&&"ring-2 ring-primary-500/20")})})]}),jsxRuntimeExports.jsx(AnimatePresence,{mode:"wait",children:(o||s||l)&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:-8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.2},className:"mt-2 text-sm flex items-center space-x-1",children:[s&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CircleAlert,{className:"w-4 h-4 text-error-500 flex-shrink-0"}),jsxRuntimeExports.jsx("span",{className:"text-error-600 dark:text-error-400",children:s})]}),l&&!s&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-4 h-4 text-success-500 flex-shrink-0"}),jsxRuntimeExports.jsx("span",{className:"text-success-600 dark:text-success-400",children:l})]}),o&&!s&&!l&&jsxRuntimeExports.jsx("span",{className:"text-neutral-600 dark:text-neutral-400",children:o})]})})]})});Input.displayName="Input";const iconMap={default:LoaderCircle,ai:Brain,camera:Camera,upload:Upload,download:Download,sync:RotateCw,search:Search,save:Save,delete:Trash2,chat:MessageCircle},sizeMap={sm:{icon:"w-4 h-4",text:"text-sm",gap:"gap-2"},md:{icon:"w-5 h-5",text:"text-base",gap:"gap-3"},lg:{icon:"w-6 h-6",text:"text-lg",gap:"gap-4"}},LoadingState=({message:e,type:t="default",size:n="md",className:a=""})=>{const i=iconMap[t],o=sizeMap[n];return jsxRuntimeExports.jsxs("div",{className:`flex items-center justify-center ${o.gap} ${a}`,children:[jsxRuntimeExports.jsx(motion.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"flex-shrink-0",children:jsxRuntimeExports.jsx(i,{className:`${o.icon} text-primary-500`})}),jsxRuntimeExports.jsx("span",{className:`${o.text} text-gray-600 dark:text-gray-400 font-medium`,children:e})]})},LoadingStates={LoadingPlants:e=>jsxRuntimeExports.jsx(LoadingState,{message:"Cargando tu jardín...",type:"default",...e})},Tooltip$1=({children:e,content:t,position:n="top",delay:a=300,disabled:i=!1,className:o=""})=>{const[s,l]=reactExports.useState(!1),[c,u]=reactExports.useState({x:0,y:0}),d=reactExports.useRef(null),p=reactExports.useRef(),f=()=>{i||(p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{if(d.current){const g=d.current.getBoundingClientRect(),E=window.pageYOffset||document.documentElement.scrollTop,j=window.pageXOffset||document.documentElement.scrollLeft;let w,S;switch(n){case"top":w=g.left+j+g.width/2,S=g.top+E-8;break;case"bottom":w=g.left+j+g.width/2,S=g.bottom+E+8;break;case"left":w=g.left+j-8,S=g.top+E+g.height/2;break;case"right":w=g.right+j+8,S=g.top+E+g.height/2;break;default:w=g.left+j+g.width/2,S=g.top+E-8}u({x:w,y:S}),l(!0)}},a))},h=()=>{p.current&&clearTimeout(p.current),l(!1)};reactExports.useEffect(()=>()=>{p.current&&clearTimeout(p.current)},[]);const v=()=>{const g="absolute z-[9999] px-2 py-1 text-xs font-medium text-white bg-gray-900 dark:bg-gray-700 rounded-md shadow-lg pointer-events-none max-w-xs";switch(n){case"top":return`${g} -translate-x-1/2 -translate-y-full`;case"bottom":return`${g} -translate-x-1/2`;case"left":return`${g} -translate-x-full -translate-y-1/2`;case"right":return`${g} -translate-y-1/2`;default:return`${g} -translate-x-1/2 -translate-y-full`}},b=()=>{const g="absolute w-2 h-2 bg-gray-900 dark:bg-gray-700 transform rotate-45";switch(n){case"top":return`${g} left-1/2 -translate-x-1/2 top-full -translate-y-1/2`;case"bottom":return`${g} left-1/2 -translate-x-1/2 -top-1`;case"left":return`${g} top-1/2 -translate-y-1/2 left-full -translate-x-1/2`;case"right":return`${g} top-1/2 -translate-y-1/2 -left-1`;default:return`${g} left-1/2 -translate-x-1/2 top-full -translate-y-1/2`}};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{ref:d,onMouseEnter:f,onMouseLeave:h,onFocus:f,onBlur:h,className:`inline-block ${o}`,children:e}),typeof document!="undefined"&&reactDomExports.createPortal(jsxRuntimeExports.jsx(AnimatePresence,{children:s&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.15},className:v(),style:{left:c.x,top:c.y},children:[t,jsxRuntimeExports.jsx("div",{className:b()})]})}),document.body)]})},errorConfig={network:{icon:Wifi,color:"text-orange-500",bgColor:"bg-orange-50 dark:bg-orange-900/20",borderColor:"border-orange-200 dark:border-orange-800",defaultActions:[{label:"Reintentar",action:"retry"},{label:"Verificar conexión",action:"help"}]},validation:{icon:TriangleAlert,color:"text-amber-500",bgColor:"bg-amber-50 dark:bg-amber-900/20",borderColor:"border-amber-200 dark:border-amber-800",defaultActions:[{label:"Corregir",action:"retry"}]},server:{icon:TriangleAlert,color:"text-red-500",bgColor:"bg-red-50 dark:bg-red-900/20",borderColor:"border-red-200 dark:border-red-800",defaultActions:[{label:"Reintentar",action:"retry"},{label:"Reportar problema",action:"help"}]},unknown:{icon:CircleHelp,color:"text-gray-500",bgColor:"bg-gray-50 dark:bg-gray-900/20",borderColor:"border-gray-200 dark:border-gray-800",defaultActions:[{label:"Reintentar",action:"retry"}]}},ErrorMessage=({title:e,message:t,type:n="unknown",onRetry:a,onDismiss:i,actions:o,className:s=""})=>{const l=errorConfig[n],c=l.icon,u=p=>{switch(p){case"retry":a==null||a();break;case"help":console.log("Help requested for error type:",n);break}},d=()=>o?o.map((p,f)=>jsxRuntimeExports.jsx(Button,{variant:p.variant||"outline",size:"sm",onClick:p.onClick,children:p.label},f)):l.defaultActions.map((p,f)=>jsxRuntimeExports.jsxs(Button,{variant:f===0?"primary":"outline",size:"sm",onClick:()=>u(p.action),disabled:p.action==="retry"&&!a,children:[p.action==="retry"&&jsxRuntimeExports.jsx(RefreshCw,{className:"w-4 h-4 mr-1"}),p.action==="help"&&jsxRuntimeExports.jsx(ExternalLink,{className:"w-4 h-4 mr-1"}),p.label]},f));return jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:`
        ${l.bgColor} 
        ${l.borderColor} 
        border rounded-lg p-4 
        ${s}
      `,children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx("div",{className:`${l.color} flex-shrink-0 mt-0.5`,children:jsxRuntimeExports.jsx(c,{className:"w-5 h-5"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-1",children:e}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:t}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:d()})]}),i&&jsxRuntimeExports.jsx("button",{onClick:i,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors p-1 flex-shrink-0","aria-label":"Cerrar error",children:jsxRuntimeExports.jsx(X,{className:"w-4 h-4"})})]})})},ErrorMessages={LoadingPlantsError:e=>jsxRuntimeExports.jsx(ErrorMessage,{type:"server",title:"Error al Cargar Plantas",message:"No se pudieron cargar tus plantas. Intenta refrescar la página.",...e})},OnboardingTour=({isOpen:e,onComplete:t,onSkip:n,steps:a})=>{const[i,o]=reactExports.useState(0),[s,l]=reactExports.useState(null),[c,u]=reactExports.useState({x:0,y:0}),d=a[i],p=i===a.length-1,f=i===0;reactExports.useEffect(()=>{if(!e||!(d!=null&&d.target))return;const g=document.querySelector(d.target);if(g){l(g);const E=g.getBoundingClientRect(),j=window.pageYOffset||document.documentElement.scrollTop,w=window.pageXOffset||document.documentElement.scrollLeft;let S,A;switch(d.position){case"top":S=E.left+w+E.width/2,A=E.top+j-20;break;case"bottom":S=E.left+w+E.width/2,A=E.bottom+j+20;break;case"left":S=E.left+w-20,A=E.top+j+E.height/2;break;case"right":S=E.right+w+20,A=E.top+j+E.height/2;break;default:S=window.innerWidth/2,A=window.innerHeight/2}u({x:S,y:A}),g.scrollIntoView({behavior:"smooth",block:"center"})}else l(null),u({x:window.innerWidth/2,y:window.innerHeight/2})},[e,d,i]);const h=()=>{p?t():o(g=>g+1)},v=()=>{f||o(g=>g-1)},b=()=>{if(!(d!=null&&d.position)||d.position==="center")return"-translate-x-1/2 -translate-y-1/2";switch(d.position){case"top":return"-translate-x-1/2 -translate-y-full";case"bottom":return"-translate-x-1/2";case"left":return"-translate-x-full -translate-y-1/2";case"right":return"-translate-y-1/2";default:return"-translate-x-1/2 -translate-y-1/2"}};return e?jsxRuntimeExports.jsx(AnimatePresence,{children:jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 z-[9999]",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/60"}),s&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute pointer-events-none",style:{left:s.getBoundingClientRect().left+window.pageXOffset,top:s.getBoundingClientRect().top+window.pageYOffset,width:s.getBoundingClientRect().width,height:s.getBoundingClientRect().height,boxShadow:"0 0 0 9999px rgba(0, 0, 0, 0.6), 0 0 20px rgba(34, 197, 94, 0.5)",borderRadius:"8px"}}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:`absolute bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 max-w-sm ${b()}`,style:{left:c.x,top:c.y},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Sparkles,{className:"w-5 h-5 text-green-500"}),jsxRuntimeExports.jsxs("span",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:["Paso ",i+1," de ",a.length]})]}),jsxRuntimeExports.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors","aria-label":"Omitir tour",children:jsxRuntimeExports.jsx(X,{className:"w-4 h-4"})})]}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:d.title}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm leading-relaxed",children:d.description})]}),d.action&&jsxRuntimeExports.jsx("div",{className:"mb-4",children:jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:d.action.onClick,className:"w-full",children:d.action.label})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs(Button,{variant:"ghost",size:"sm",onClick:v,disabled:f,className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(ChevronLeft,{className:"w-4 h-4"}),"Anterior"]}),jsxRuntimeExports.jsx("div",{className:"flex gap-1",children:a.map((g,E)=>jsxRuntimeExports.jsx("div",{className:`w-2 h-2 rounded-full transition-colors ${E===i?"bg-green-500":E<i?"bg-green-300":"bg-gray-300"}`},E))}),jsxRuntimeExports.jsxs(Button,{size:"sm",onClick:h,className:"flex items-center gap-1",children:[p?"Finalizar":"Siguiente",!p&&jsxRuntimeExports.jsx(ChevronRight,{className:"w-4 h-4"})]})]}),jsxRuntimeExports.jsx("div",{className:"mt-4 text-center",children:jsxRuntimeExports.jsx("button",{onClick:n,className:"text-xs text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 transition-colors",children:"Omitir tour"})})]})]})}):null},ONBOARDING_VERSION="1.0.0",STORAGE_KEY="plantitas-onboarding-state",useOnboarding=()=>{const e=useNavigate(),[t,n]=reactExports.useState(()=>{try{const d=localStorage.getItem(STORAGE_KEY);if(d){const p=JSON.parse(d);return p.currentVersion!==ONBOARDING_VERSION?{hasCompletedTour:!1,hasAddedFirstPlant:!1,hasUsedChat:!1,currentVersion:ONBOARDING_VERSION}:p}}catch(d){console.warn("Error loading onboarding state:",d)}return{hasCompletedTour:!1,hasAddedFirstPlant:!1,hasUsedChat:!1,currentVersion:ONBOARDING_VERSION}});reactExports.useEffect(()=>{try{localStorage.setItem(STORAGE_KEY,JSON.stringify(t))}catch(d){console.warn("Error saving onboarding state:",d)}},[t]);const a=d=>{n(p=>({...p,...d}))};return{state:t,shouldShowTour:()=>!t.hasCompletedTour,completeTour:()=>{a({hasCompletedTour:!0})},markFirstPlantAdded:()=>{a({hasAddedFirstPlant:!0})},markChatUsed:()=>{a({hasUsedChat:!0})},resetOnboarding:()=>{n({hasCompletedTour:!1,hasAddedFirstPlant:!1,hasUsedChat:!1,currentVersion:ONBOARDING_VERSION})},getTourSteps:()=>[{id:"welcome",title:"¡Bienvenido a Plantitas! 🌱",description:"Tu asistente personal para el cuidado de plantas. Te ayudaremos a mantener tus plantas saludables y felices.",position:"center"},{id:"add-plant",title:"Agrega tu primera planta",description:"Usa el botón flotante para tomar una foto de tu planta. Nuestra IA la identificará automáticamente.",target:'[data-tour="add-plant-fab"]',position:"left",action:{label:"Ir a cámara",onClick:()=>e(navigation.toCamera())}},{id:"navigation",title:"Navegación principal",description:"Usa la navegación inferior para moverte entre el jardín, chat IA y configuraciones.",target:'[data-tour="bottom-navigation"]',position:"top"},{id:"chat-ai",title:"Chat con IA experta",description:"Haz preguntas sobre cuidado de plantas, identificación o cualquier duda que tengas.",target:'[data-tour="chat-tab"]',position:"top",action:{label:"Probar chat",onClick:()=>e(navigation.toGardenChat())}},{id:"search-filter",title:"Busca y organiza",description:"Usa la búsqueda y filtros para encontrar rápidamente tus plantas cuando tengas muchas.",target:'[data-tour="search-input"]',position:"bottom"},{id:"complete",title:"¡Listo para empezar! 🎉",description:"Ya conoces lo básico. ¡Comienza agregando tu primera planta y explorando todas las funciones!",position:"center"}]}},AIFeatureHighlight=({type:e,title:t,message:n,onDismiss:a,autoHide:i=!1,duration:o=8e3,actions:s})=>{const[l,c]=reactExports.useState(!0),u=useNavigate();reactExports.useEffect(()=>{if(i&&o>0){const v=setTimeout(()=>{c(!1),a==null||a()},o);return()=>clearTimeout(v)}},[i,o,a]);const d=()=>{c(!1),a==null||a()};if(!l)return null;const f={suggestion:{bg:"bg-purple-50 dark:bg-purple-900/20",border:"border-purple-200 dark:border-purple-800",accent:"text-purple-600 dark:text-purple-400",icon:Brain},tip:{bg:"bg-blue-50 dark:bg-blue-900/20",border:"border-blue-200 dark:border-blue-800",accent:"text-blue-600 dark:text-blue-400",icon:Sparkles},welcome:{bg:"bg-green-50 dark:bg-green-900/20",border:"border-green-200 dark:border-green-800",accent:"text-green-600 dark:text-green-400",icon:MessageCircle}}[e],h=f.icon;return jsxRuntimeExports.jsx(AnimatePresence,{children:jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},transition:{duration:.3,ease:"easeOut"},className:`
          ${f.bg} ${f.border}
          border rounded-lg p-4 shadow-md backdrop-blur-sm
          relative overflow-hidden
        `,children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 opacity-10",children:jsxRuntimeExports.jsx(h,{className:"w-full h-full"})}),jsxRuntimeExports.jsxs("div",{className:"relative flex items-start gap-3",children:[jsxRuntimeExports.jsx("div",{className:`${f.accent} flex-shrink-0 mt-0.5`,children:jsxRuntimeExports.jsx(h,{className:"w-5 h-5"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("h3",{className:`${f.accent} text-sm font-semibold mb-1`,children:t}),jsxRuntimeExports.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm leading-relaxed mb-3",children:n}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:s?s.map((v,b)=>jsxRuntimeExports.jsx(Button,{size:"sm",variant:v.variant||"outline",onClick:v.onClick,className:"text-xs",children:v.label},b)):jsxRuntimeExports.jsxs(Button,{size:"sm",variant:"outline",onClick:()=>u(navigation.toGardenChat()),className:"text-xs flex items-center gap-1",children:["Probar Chat IA",jsxRuntimeExports.jsx(ArrowRight,{className:"w-3 h-3"})]})})]}),a&&jsxRuntimeExports.jsx("button",{onClick:d,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors p-1 flex-shrink-0","aria-label":"Cerrar sugerencia",children:jsxRuntimeExports.jsx(X,{className:"w-4 h-4"})})]}),i&&o>0&&jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-black/10 dark:bg-white/10",children:jsxRuntimeExports.jsx(motion.div,{initial:{width:"100%"},animate:{width:"0%"},transition:{duration:o/1e3,ease:"linear"},className:`h-full ${f.accent.replace("text-","bg-")}`})})]})})},useAIHighlights=()=>{const[e,t]=reactExports.useState(()=>{try{const o=localStorage.getItem("dismissed-ai-highlights");return o?JSON.parse(o):[]}catch(o){return[]}});return{dismissHighlight:o=>{const s=[...e,o];t(s);try{localStorage.setItem("dismissed-ai-highlights",JSON.stringify(s))}catch(l){console.warn("Error saving dismissed highlights:",l)}},shouldShowHighlight:o=>!e.includes(o),resetHighlights:()=>{t([]);try{localStorage.removeItem("dismissed-ai-highlights")}catch(o){console.warn("Error resetting highlights:",o)}}}},EmptyState$1=()=>{const e=useNavigate();return jsxRuntimeExports.jsxs(motion.div,{className:"flex flex-col items-center justify-center text-center py-16 px-6 max-w-lg mx-auto",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5,ease:"easeOut"},children:[jsxRuntimeExports.jsxs(motion.div,{className:"relative w-32 h-32 mb-8",initial:{rotate:-15},animate:{rotate:[15,-10,10,-5,5,0]},transition:{duration:1,ease:"easeInOut"},children:[jsxRuntimeExports.jsx(Wind,{className:"absolute top-2 left-2 w-10 h-10 text-sky-400 opacity-60"}),jsxRuntimeExports.jsx(Leaf,{className:"w-32 h-32 text-green-500"}),jsxRuntimeExports.jsx(Droplets,{className:"absolute bottom-2 right-2 w-12 h-12 text-blue-400 opacity-70"})]}),jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100 mb-3",children:"¡Comienza tu jardín digital!"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6 text-lg leading-relaxed",children:"Añade tu primera planta tomando una foto y deja que nuestra IA la identifique y te ayude a cuidarla."}),jsxRuntimeExports.jsxs("div",{className:"mb-8 space-y-3 text-left",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 text-gray-600 dark:text-gray-400",children:[jsxRuntimeExports.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full flex-shrink-0"}),jsxRuntimeExports.jsx("span",{children:"Identificación automática con IA"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 text-gray-600 dark:text-gray-400",children:[jsxRuntimeExports.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full flex-shrink-0"}),jsxRuntimeExports.jsx("span",{children:"Recordatorios de riego personalizados"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 text-gray-600 dark:text-gray-400",children:[jsxRuntimeExports.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full flex-shrink-0"}),jsxRuntimeExports.jsx("span",{children:"Chat con asistente experto en plantas"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full",children:[jsxRuntimeExports.jsxs(Button,{size:"lg",onClick:()=>e(navigation.toCamera()),className:"flex-1",children:[jsxRuntimeExports.jsx(Plus,{className:"mr-2"}),"Tomar Foto"]}),jsxRuntimeExports.jsx(Tooltip$1,{content:"Explora las funciones de chat IA para aprender sobre plantas",children:jsxRuntimeExports.jsxs(Button,{size:"lg",variant:"outline",onClick:()=>e(navigation.toGardenChat()),className:"flex-1",children:[jsxRuntimeExports.jsx(MessageCircle,{className:"mr-2"}),"Explorar Chat IA"]})})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-6",children:"💡 Tip: Toma fotos con buena iluminación para mejores resultados"})]})},Dashboard=()=>{const{data:e=[],isLoading:t,error:n}=usePlantsQuery(),[a,i]=reactExports.useState(""),[o,s]=reactExports.useState("name"),{shouldShowTour:l,completeTour:c,getTourSteps:u}=useOnboarding(),{shouldShowHighlight:d,dismissHighlight:p}=useAIHighlights(),f=reactExports.useMemo(()=>[...e].filter(h=>h.name.toLowerCase().includes(a.toLowerCase())||h.species.toLowerCase().includes(a.toLowerCase())).sort((h,v)=>{var b,g;switch(o){case"health":return(v.healthScore||0)-(h.healthScore||0);case"lastWatered":return(((b=v.lastWatered)==null?void 0:b.getTime())||0)-(((g=h.lastWatered)==null?void 0:g.getTime())||0);default:return h.name.localeCompare(v.name)}}),[e,a,o]);return t?jsxRuntimeExports.jsxs("div",{className:"p-4 sm:p-6 space-y-6",children:[jsxRuntimeExports.jsxs("header",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:"Mi Jardín"}),jsxRuntimeExports.jsx(LoadingStates.LoadingPlants,{size:"sm"})]}),jsxRuntimeExports.jsx(Skeleton,{className:"h-10 w-10 rounded-full"})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:Array.from({length:8}).map((h,v)=>jsxRuntimeExports.jsx(PlantCardSkeleton,{},v))})]}):n?jsxRuntimeExports.jsx("div",{className:"flex justify-center items-center min-h-[50vh] p-4",children:jsxRuntimeExports.jsx(ErrorMessages.LoadingPlantsError,{onRetry:()=>window.location.reload(),className:"max-w-md"})}):jsxRuntimeExports.jsxs("div",{className:"container-spacing element-spacing bg-white",style:{paddingBottom:"calc(88px + env(safe-area-inset-bottom))"},children:[jsxRuntimeExports.jsx("header",{className:"flex items-center justify-between border-b-2 border-[#E0F2E9] bg-white pb-2 mb-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(Tooltip$1,{content:"Tu jardín personal de plantas",children:jsxRuntimeExports.jsx(Leaf,{size:20,strokeWidth:2,className:"text-[#2A7F3E] flex-shrink-0"})}),jsxRuntimeExports.jsx("h1",{className:"font-semibold text-[28px] leading-[1.2] text-[#222]",children:"Mi Jardín"}),jsxRuntimeExports.jsx(Tooltip$1,{content:`Tienes ${e.length} ${e.length===1?"planta registrada":"plantas registradas"} en tu jardín`,children:jsxRuntimeExports.jsxs("span",{className:"ml-2 bg-[#E0F2E9]/50 text-[#2A7F3E] text-sm font-medium rounded-full px-[6px] py-[2px] cursor-help",children:[e.length," ",e.length===1?"planta":"plantas"]})})]})}),e.length>0&&d("dashboard-ai-welcome")&&jsxRuntimeExports.jsx("div",{className:"mb-4",children:jsxRuntimeExports.jsx(AIFeatureHighlight,{type:"welcome",title:"¡Tu asistente IA está disponible!",message:"Haz preguntas sobre el cuidado de tus plantas, identifica problemas o descubre nuevos consejos.",onDismiss:()=>p("dashboard-ai-welcome"),autoHide:!0,duration:1e4})}),e.length>=3&&d("dashboard-ai-tips")&&jsxRuntimeExports.jsx("div",{className:"mb-4",children:jsxRuntimeExports.jsx(AIFeatureHighlight,{type:"tip",title:"Consejo del jardinero experto",message:"Con varias plantas, puedes preguntarme sobre rutinas de cuidado personalizadas para optimizar tu tiempo.",onDismiss:()=>p("dashboard-ai-tips"),autoHide:!0,duration:12e3})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-3 mt-6 mb-6",children:[jsxRuntimeExports.jsx(Input,{type:"text",placeholder:"Buscar por nombre o especie...",value:a,onChange:h=>i(h.target.value),className:"max-w-md w-full mx-auto","data-tour":"search-input"}),jsxRuntimeExports.jsxs("div",{className:"relative w-full max-w-xs",children:[jsxRuntimeExports.jsxs("select",{value:o,onChange:h=>s(h.target.value),className:"appearance-none bg-white border border-green-300 rounded-[8px] px-4 py-2 h-10 text-green-700 font-medium shadow-sm focus:ring-2 focus:ring-green-400 focus:border-green-400 transition-colors duration-150 w-full pr-8",style:{borderWidth:"1px"},children:[jsxRuntimeExports.jsx("option",{value:"name",children:"Ordenar por Nombre"}),jsxRuntimeExports.jsx("option",{value:"health",children:"Ordenar por Salud"}),jsxRuntimeExports.jsx("option",{value:"lastWatered",children:"Ordenar por Riego"})]}),jsxRuntimeExports.jsx("span",{className:"pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 text-green-400 text-base",children:"▼"})]})]}),jsxRuntimeExports.jsx(AnimatePresence,{children:f.length>0?jsxRuntimeExports.jsx(motion.div,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 element-spacing",initial:"hidden",animate:"visible",variants:{visible:{transition:{staggerChildren:.01,delayChildren:0}}},children:f.map((h,v)=>jsxRuntimeExports.jsx(PlantCard,{plant:h,index:Math.min(v,8)},h.id))}):jsxRuntimeExports.jsx(EmptyState$1,{})}),jsxRuntimeExports.jsx(OnboardingTour,{isOpen:l()&&e.length===0,onComplete:c,onSkip:c,steps:u()})]})};function _typeof(e){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(e)}function requiredArgs(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function toDate(e){requiredArgs(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||_typeof(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console!="undefined"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}var defaultOptions={};function getDefaultOptions(){return defaultOptions}function getTimezoneOffsetInMilliseconds(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function startOfDay(e){requiredArgs(1,arguments);var t=toDate(e);return t.setHours(0,0,0,0),t}var MILLISECONDS_IN_DAY=864e5;function differenceInCalendarDays(e,t){requiredArgs(2,arguments);var n=startOfDay(e),a=startOfDay(t),i=n.getTime()-getTimezoneOffsetInMilliseconds(n),o=a.getTime()-getTimezoneOffsetInMilliseconds(a);return Math.round((i-o)/MILLISECONDS_IN_DAY)}function compareAsc(e,t){requiredArgs(2,arguments);var n=toDate(e),a=toDate(t),i=n.getTime()-a.getTime();return i<0?-1:i>0?1:i}function differenceInCalendarMonths(e,t){requiredArgs(2,arguments);var n=toDate(e),a=toDate(t),i=n.getFullYear()-a.getFullYear(),o=n.getMonth()-a.getMonth();return i*12+o}function compareLocalAsc(e,t){var n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function differenceInDays(e,t){requiredArgs(2,arguments);var n=toDate(e),a=toDate(t),i=compareLocalAsc(n,a),o=Math.abs(differenceInCalendarDays(n,a));n.setDate(n.getDate()-i*o);var s=+(compareLocalAsc(n,a)===-i),l=i*(o-s);return l===0?0:l}function differenceInMilliseconds(e,t){return requiredArgs(2,arguments),toDate(e).getTime()-toDate(t).getTime()}var roundingMap={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function e(t){return t<0?Math.ceil(t):Math.floor(t)}},defaultRoundingMethod="trunc";function getRoundingMethod(e){return roundingMap[defaultRoundingMethod]}function endOfDay(e){requiredArgs(1,arguments);var t=toDate(e);return t.setHours(23,59,59,999),t}function endOfMonth(e){requiredArgs(1,arguments);var t=toDate(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function isLastDayOfMonth(e){requiredArgs(1,arguments);var t=toDate(e);return endOfDay(t).getTime()===endOfMonth(t).getTime()}function differenceInMonths(e,t){requiredArgs(2,arguments);var n=toDate(e),a=toDate(t),i=compareAsc(n,a),o=Math.abs(differenceInCalendarMonths(n,a)),s;if(o<1)s=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-i*o);var l=compareAsc(n,a)===-i;isLastDayOfMonth(toDate(e))&&o===1&&compareAsc(e,a)===1&&(l=!1),s=i*(o-Number(l))}return s===0?0:s}function differenceInSeconds(e,t,n){requiredArgs(2,arguments);var a=differenceInMilliseconds(e,t)/1e3;return getRoundingMethod()(a)}var formatDistanceLocale$1={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},formatDistance$2=function e(t,n,a){var i,o=formatDistanceLocale$1[t];return typeof o=="string"?i=o:n===1?i=o.one:i=o.other.replace("{{count}}",n.toString()),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?"in "+i:i+" ago":i};function buildFormatLongFn(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth,a=e.formats[n]||e.formats[e.defaultWidth];return a}}var dateFormats$1={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},timeFormats$1={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats$1={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},formatLong$1={date:buildFormatLongFn({formats:dateFormats$1,defaultWidth:"full"}),time:buildFormatLongFn({formats:timeFormats$1,defaultWidth:"full"}),dateTime:buildFormatLongFn({formats:dateTimeFormats$1,defaultWidth:"full"})},formatRelativeLocale$1={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},formatRelative$1=function e(t,n,a,i){return formatRelativeLocale$1[t]};function buildLocalizeFn(e){return function(t,n){var a=n!=null&&n.context?String(n.context):"standalone",i;if(a==="formatting"&&e.formattingValues){var o=e.defaultFormattingWidth||e.defaultWidth,s=n!=null&&n.width?String(n.width):o;i=e.formattingValues[s]||e.formattingValues[o]}else{var l=e.defaultWidth,c=n!=null&&n.width?String(n.width):e.defaultWidth;i=e.values[c]||e.values[l]}var u=e.argumentCallback?e.argumentCallback(t):t;return i[u]}}var eraValues$1={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},quarterValues$1={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},monthValues$1={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},dayValues$1={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dayPeriodValues$1={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},formattingDayPeriodValues$1={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ordinalNumber$1=function e(t,n){var a=Number(t),i=a%100;if(i>20||i<10)switch(i%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},localize$1={ordinalNumber:ordinalNumber$1,era:buildLocalizeFn({values:eraValues$1,defaultWidth:"wide"}),quarter:buildLocalizeFn({values:quarterValues$1,defaultWidth:"wide",argumentCallback:function e(t){return t-1}}),month:buildLocalizeFn({values:monthValues$1,defaultWidth:"wide"}),day:buildLocalizeFn({values:dayValues$1,defaultWidth:"wide"}),dayPeriod:buildLocalizeFn({values:dayPeriodValues$1,defaultWidth:"wide",formattingValues:formattingDayPeriodValues$1,defaultFormattingWidth:"wide"})};function buildMatchFn(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.width,i=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],o=t.match(i);if(!o)return null;var s=o[0],l=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?findIndex(l,function(p){return p.test(s)}):findKey(l,function(p){return p.test(s)}),u;u=e.valueCallback?e.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;var d=t.slice(s.length);return{value:u,rest:d}}}function findKey(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}function findIndex(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}function buildMatchPatternFn(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=t.match(e.matchPattern);if(!a)return null;var i=a[0],o=t.match(e.parsePattern);if(!o)return null;var s=e.valueCallback?e.valueCallback(o[0]):o[0];s=n.valueCallback?n.valueCallback(s):s;var l=t.slice(i.length);return{value:s,rest:l}}}var matchOrdinalNumberPattern$1=/^(\d+)(th|st|nd|rd)?/i,parseOrdinalNumberPattern$1=/\d+/i,matchEraPatterns$1={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},parseEraPatterns$1={any:[/^b/i,/^(a|c)/i]},matchQuarterPatterns$1={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},parseQuarterPatterns$1={any:[/1/i,/2/i,/3/i,/4/i]},matchMonthPatterns$1={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},parseMonthPatterns$1={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},matchDayPatterns$1={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},parseDayPatterns$1={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},matchDayPeriodPatterns$1={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},parseDayPeriodPatterns$1={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},match$1={ordinalNumber:buildMatchPatternFn({matchPattern:matchOrdinalNumberPattern$1,parsePattern:parseOrdinalNumberPattern$1,valueCallback:function e(t){return parseInt(t,10)}}),era:buildMatchFn({matchPatterns:matchEraPatterns$1,defaultMatchWidth:"wide",parsePatterns:parseEraPatterns$1,defaultParseWidth:"any"}),quarter:buildMatchFn({matchPatterns:matchQuarterPatterns$1,defaultMatchWidth:"wide",parsePatterns:parseQuarterPatterns$1,defaultParseWidth:"any",valueCallback:function e(t){return t+1}}),month:buildMatchFn({matchPatterns:matchMonthPatterns$1,defaultMatchWidth:"wide",parsePatterns:parseMonthPatterns$1,defaultParseWidth:"any"}),day:buildMatchFn({matchPatterns:matchDayPatterns$1,defaultMatchWidth:"wide",parsePatterns:parseDayPatterns$1,defaultParseWidth:"any"}),dayPeriod:buildMatchFn({matchPatterns:matchDayPeriodPatterns$1,defaultMatchWidth:"any",parsePatterns:parseDayPeriodPatterns$1,defaultParseWidth:"any"})},locale$3={code:"en-US",formatDistance:formatDistance$2,formatLong:formatLong$1,formatRelative:formatRelative$1,localize:localize$1,match:match$1,options:{weekStartsOn:0,firstWeekContainsDate:1}};function assign$1(e,t){if(e==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function cloneObject(e){return assign$1({},e)}var MINUTES_IN_DAY=1440,MINUTES_IN_ALMOST_TWO_DAYS=2520,MINUTES_IN_MONTH=43200,MINUTES_IN_TWO_MONTHS=86400;function formatDistance$1(e,t,n){var a,i;requiredArgs(2,arguments);var o=getDefaultOptions(),s=(a=(i=n==null?void 0:n.locale)!==null&&i!==void 0?i:o.locale)!==null&&a!==void 0?a:locale$3;if(!s.formatDistance)throw new RangeError("locale must contain formatDistance property");var l=compareAsc(e,t);if(isNaN(l))throw new RangeError("Invalid time value");var c=assign$1(cloneObject(n),{addSuffix:!!(n!=null&&n.addSuffix),comparison:l}),u,d;l>0?(u=toDate(t),d=toDate(e)):(u=toDate(e),d=toDate(t));var p=differenceInSeconds(d,u),f=(getTimezoneOffsetInMilliseconds(d)-getTimezoneOffsetInMilliseconds(u))/1e3,h=Math.round((p-f)/60),v;if(h<2)return n!=null&&n.includeSeconds?p<5?s.formatDistance("lessThanXSeconds",5,c):p<10?s.formatDistance("lessThanXSeconds",10,c):p<20?s.formatDistance("lessThanXSeconds",20,c):p<40?s.formatDistance("halfAMinute",0,c):p<60?s.formatDistance("lessThanXMinutes",1,c):s.formatDistance("xMinutes",1,c):h===0?s.formatDistance("lessThanXMinutes",1,c):s.formatDistance("xMinutes",h,c);if(h<45)return s.formatDistance("xMinutes",h,c);if(h<90)return s.formatDistance("aboutXHours",1,c);if(h<MINUTES_IN_DAY){var b=Math.round(h/60);return s.formatDistance("aboutXHours",b,c)}else{if(h<MINUTES_IN_ALMOST_TWO_DAYS)return s.formatDistance("xDays",1,c);if(h<MINUTES_IN_MONTH){var g=Math.round(h/MINUTES_IN_DAY);return s.formatDistance("xDays",g,c)}else if(h<MINUTES_IN_TWO_MONTHS)return v=Math.round(h/MINUTES_IN_MONTH),s.formatDistance("aboutXMonths",v,c)}if(v=differenceInMonths(d,u),v<12){var E=Math.round(h/MINUTES_IN_MONTH);return s.formatDistance("xMonths",E,c)}else{var j=v%12,w=Math.floor(v/12);return j<3?s.formatDistance("aboutXYears",w,c):j<9?s.formatDistance("overXYears",w,c):s.formatDistance("almostXYears",w+1,c)}}function formatDistanceToNow(e,t){return requiredArgs(1,arguments),formatDistance$1(e,Date.now(),t)}const fetchPlantById=async e=>{var i,o,s,l,c;const{data:t,error:n}=await supabase.from("plants").select(`
      *,
      plant_images(*)
    `).eq("id",e).single();if(n)throw console.error(`Error fetching plant ${e}:`,n),n.code==="PGRST116"?new Error("Planta no encontrada."):new Error("Error al cargar la información de la planta.");const a=t;return{id:a.id,name:a.name,species:a.species,description:(i=a.description)!=null?i:void 0,funFacts:(o=a.fun_facts)!=null?o:void 0,variety:(s=a.variety)!=null?s:void 0,nickname:(l=a.nickname)!=null?l:void 0,location:a.location,plantEnvironment:a.plant_environment,lightRequirements:a.light_requirements,dateAdded:new Date(a.date_added),lastWatered:a.last_watered?new Date(a.last_watered):void 0,lastFertilized:a.last_fertilized?new Date(a.last_fertilized):void 0,healthScore:(c=a.health_score)!=null?c:0,careProfile:a.care_profile,personality:a.personality,images:a.plant_images.map(u=>{var d,p;return{id:u.id,url:(d=u.url)!=null?d:"",timestamp:new Date(u.created_at),isProfileImage:(p=u.is_profile_image)!=null?p:!1,healthAnalysis:u.health_analysis}}),chatHistory:[],notifications:[]}},usePlantDetail=e=>{const{data:t,isLoading:n,error:a}=useQuery({queryKey:["plant",e],queryFn:async()=>fetchPlantById(e),enabled:!!e,staleTime:6e5,gcTime:18e5,refetchOnWindowFocus:!1,refetchOnMount:!1,retry:1}),i=usePlantStore(l=>l.setPlant),o=usePlantStore(l=>l.selectPlant);reactExports.useEffect(()=>(t&&(i(t),o(t.id)),()=>{o(null)}),[t,i,o]);const s=reactExports.useMemo(()=>{if(!t)return[];const l=[];if(!t.images||t.images.length===0)return l;const c=t.images.map(u=>{var d;return((d=u.healthAnalysis)==null?void 0:d.confidence)||null}).filter(u=>u!==null);if(c.length>=3){const u=c.slice(-3);if(u[0]>u[1]&&u[1]>u[2]){const d=u[0]-u[2];l.push({type:"warning",title:"Tendencia de Salud a la Baja",message:`La salud de tu planta ha disminuido un ${d.toFixed(0)}% en las últimas revisiones.`})}}if(t.lastWatered&&t.careProfile){const u=differenceInDays(new Date,new Date(t.lastWatered)),d=t.careProfile.wateringFrequency;u>d&&l.push({type:"tip",title:"Consejo de Riego",message:`Han pasado ${u} días desde el último riego. El intervalo recomendado es de ${d} días.`})}return l},[t]);return{plant:t,insights:s,loading:n,error:(a==null?void 0:a.message)||null}},usePlantImageMutations=()=>{const e=useQueryClient(),t=useAuthStore(l=>l.user),n=t==null?void 0:t.id,{addToast:a}=useToast(),i=useMutation({mutationFn:async({plantId:l,imageDataUrl:c,note:u})=>{var h;if(!n)throw new Error("User not authenticated");console.log("🖼️ [Image] Iniciando proceso de subida de imagen..."),console.log("🔬 [Image] Analizando imagen con IA...");const d=await analyzeImage(c);console.log("☁️ [Image] Subiendo imagen a Storage...");const p=await uploadImage(c,"plant-images",`${n}/${l}`);console.log("💾 [Image] Guardando registro en base de datos...");const f=await plantService$2.addPlantImage(l,{url:p,timestamp:new Date,isProfileImage:!1,healthAnalysis:d.health},n);return(h=d.health)!=null&&h.confidence&&(console.log("🏥 [Image] Actualizando health score de la planta..."),await plantService$2.updatePlantHealthScore(l,n,d.health.confidence,d.health,f.id)),console.log("✅ [Image] Proceso completado exitosamente"),{image:f,analysis:d,note:u}},onSuccess:(l,c)=>{var p,f,h;e.invalidateQueries({queryKey:["plants"]}),e.invalidateQueries({queryKey:["plant",c.plantId]});const{setPlant:u}=usePlantStore.getState(),d=usePlantStore.getState().getPlantById(c.plantId);if(d){const v={...d,images:[...d.images,l.image],healthScore:((p=l.analysis.health)==null?void 0:p.confidence)||d.healthScore};u(v)}a({type:"success",title:"Nueva imagen añadida",message:`Análisis completado. Salud actual: ${((h=(f=l.analysis.health)==null?void 0:f.confidence)==null?void 0:h.toFixed(0))||"N/A"}%`})},onError:l=>{console.error("💥 [Image] Error en proceso de subida:",l),a({type:"error",title:"Error al agregar imagen",message:l.message})}}),o=useMutation({mutationFn:async({plantId:l,imageId:c})=>{if(!n)throw new Error("User not authenticated");return console.log("🖼️ [Profile] Cambiando imagen de perfil..."),await plantService$2.setProfileImage(l,c,n),{plantId:l,imageId:c}},onSuccess:l=>{e.invalidateQueries({queryKey:["plants"]}),e.invalidateQueries({queryKey:["plant",l.plantId]}),a({type:"success",title:"Imagen de perfil actualizada",message:"La imagen principal de la planta ha sido cambiada"})},onError:l=>{a({type:"error",title:"Error al cambiar imagen de perfil",message:l.message})}}),s=useMutation({mutationFn:async({plantId:l,imageId:c})=>{if(!n)throw new Error("User not authenticated");return console.log("🗑️ [Image] Eliminando imagen..."),await plantService$2.deleteImage(c,n),{plantId:l,imageId:c}},onSuccess:l=>{e.invalidateQueries({queryKey:["plants"]}),e.invalidateQueries({queryKey:["plant",l.plantId]}),a({type:"success",title:"Imagen eliminada",message:"La imagen ha sido eliminada de tu planta"})},onError:l=>{a({type:"error",title:"Error al eliminar imagen",message:l.message})}});return{addPlantImage:i.mutate,isAddingImage:i.isPending,setProfileImage:o.mutate,isSettingProfileImage:o.isPending,deleteImage:s.mutate,isDeletingImage:s.isPending}};function ImageGallery({images:e}){const[t,n]=reactExports.useState(null);if(!e||e.length===0)return jsxRuntimeExports.jsx(Card,{className:"mt-4",children:jsxRuntimeExports.jsx(CardContent,{className:"pt-6",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[jsxRuntimeExports.jsx(Camera,{className:"w-12 h-12 text-muted-foreground mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground",children:"No hay imágenes para esta planta todavía."}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground/70 mt-2",children:"¡Agrega algunas fotos para seguir su progreso!"})]})})});const a=[...e].sort((c,u)=>new Date(u.timestamp).getTime()-new Date(c.timestamp).getTime()),i=c=>{n(c)},o=()=>{n(null)},s=c=>{if(t===null)return;const u=c==="prev"?(t-1+a.length)%a.length:(t+1)%a.length;n(u)},l=c=>(c instanceof Date?c:new Date(c)).toLocaleDateString("es-ES",{day:"numeric",month:"short",year:"numeric"});return jsxRuntimeExports.jsxs("div",{className:"mt-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsxs("h2",{className:"text-xl font-bold tracking-tight flex items-center",children:[jsxRuntimeExports.jsx(Camera,{className:"w-5 h-5 mr-2 text-primary"}),"Galería de Imágenes"]}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-muted-foreground",children:[a.length," foto",a.length!==1?"s":""]})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:a.map((c,u)=>jsxRuntimeExports.jsxs(motion.div,{className:"aspect-square relative rounded-[8px] overflow-hidden cursor-pointer group w-[80px] h-[80px]",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>i(u),children:[jsxRuntimeExports.jsx(LazyImage,{src:c.url,alt:`Imagen de planta del ${l(c.timestamp)}`,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110 rounded-[8px]"}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-3",children:jsxRuntimeExports.jsx("div",{className:"flex items-center text-white text-xs gap-2",children:jsxRuntimeExports.jsxs("span",{className:"flex items-center",children:[jsxRuntimeExports.jsx(Calendar,{className:"w-3 h-3 mr-1"}),l(c.timestamp)]})})})}),c.isProfileImage&&jsxRuntimeExports.jsx("div",{className:"absolute top-2 right-2 bg-primary text-primary-foreground text-xs px-2 py-1 rounded-full font-medium",children:"Principal"})]},c.id))}),jsxRuntimeExports.jsx(AnimatePresence,{children:t!==null&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-4",onClick:o,children:jsxRuntimeExports.jsxs(motion.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:"relative max-w-4xl max-h-full",onClick:c=>c.stopPropagation(),children:[jsxRuntimeExports.jsx("button",{onClick:o,className:"absolute top-4 right-4 z-10 bg-black/50 text-white p-2 rounded-full hover:bg-black/70 transition-colors",children:jsxRuntimeExports.jsx(X,{className:"w-6 h-6"})}),a.length>1&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{onClick:()=>s("prev"),className:"absolute left-4 top-1/2 -translate-y-1/2 z-10 bg-black/50 text-white p-2 rounded-full hover:bg-black/70 transition-colors",children:jsxRuntimeExports.jsx(ChevronLeft,{className:"w-6 h-6"})}),jsxRuntimeExports.jsx("button",{onClick:()=>s("next"),className:"absolute right-4 top-1/2 -translate-y-1/2 z-10 bg-black/50 text-white p-2 rounded-full hover:bg-black/70 transition-colors",children:jsxRuntimeExports.jsx(ChevronRight,{className:"w-6 h-6"})})]}),jsxRuntimeExports.jsx("img",{src:a[t].url,alt:`Imagen de planta del ${l(a[t].timestamp)}`,className:"max-w-full max-h-full object-contain rounded-lg"}),jsxRuntimeExports.jsxs("div",{className:"absolute bottom-4 left-4 right-4 bg-black/50 text-white p-4 rounded-lg backdrop-blur-sm",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(Calendar,{className:"w-4 h-4 mr-2"}),jsxRuntimeExports.jsx("span",{className:"text-sm",children:l(a[t].timestamp)})]}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-white/70",children:[t+1," de ",a.length]})]}),jsxRuntimeExports.jsx("div",{className:"mt-2 text-sm flex items-center gap-2",children:(()=>{const c=a[t].healthAnalysis;if(!c)return jsxRuntimeExports.jsx("span",{className:"italic text-white/60",children:"Sin análisis"});let u="🌱",d="Excelente";switch(c.overallHealth){case"excellent":u="🌱",d="Excelente";break;case"good":u="🌿",d="Buena";break;case"fair":u="🍃",d="Regular";break;case"poor":u="🥀",d="Baja";break;default:u="🌱",d=c.overallHealth}let p;const f={excellent:95,good:80,fair:60,poor:30};return c.overallHealth&&f[c.overallHealth]?p=f[c.overallHealth]:typeof c.confidence=="number"&&(p=c.confidence<=1?c.confidence*100:c.confidence),jsxRuntimeExports.jsxs("span",{children:["Salud: ",jsxRuntimeExports.jsx("span",{className:"font-semibold",children:d})," ",jsxRuntimeExports.jsx("span",{children:u}),p!==void 0&&jsxRuntimeExports.jsxs("span",{className:"ml-2",children:["(",Math.round(p),"%)"]})]})})()}),a[t].isProfileImage&&jsxRuntimeExports.jsx("div",{className:"mt-2",children:jsxRuntimeExports.jsx("span",{className:"bg-primary text-primary-foreground text-xs px-2 py-1 rounded-full",children:"Imagen Principal"})})]})]})})})]})}const plantService=new PlantService,usePlantInfoCompletion=()=>{const[e,t]=reactExports.useState(!1),n=useQueryClient(),a=useAuthStore(l=>l.user),{addToast:i}=useToast(),o=useMutation({mutationFn:async({plantId:l,species:c,commonName:u})=>{if(!a)throw new Error("User not authenticated");t(!0),i({type:"info",title:"🤖 Completando información",message:`Consultando IA para ${u||c}...`,duration:3e3});try{const d=await completePlantInfo(c,u);return await plantService.updatePlantInfo(l,a.id,{plantEnvironment:d.plantEnvironment,lightRequirements:d.lightRequirements,description:d.description,funFacts:d.funFacts})}catch(d){throw console.error("❌ [COMPLETAR IA] Error durante el proceso:",d),d}finally{t(!1)}},onSuccess:l=>{console.log("🔄 [COMPLETAR IA] Refrescando datos en cache..."),i({type:"success",title:"✅ ¡Información completada!",message:`Se agregaron datos de ambiente y luz para ${l.name}`,duration:5e3}),n.invalidateQueries({queryKey:["plant",l.id]}),n.invalidateQueries({queryKey:["plants"]}),console.log("✅ [COMPLETAR IA] Cache actualizado correctamente")},onError:l=>{console.error("💥 [COMPLETAR IA] Error final en la operación:",l),i({type:"error",title:"❌ Error al completar información",message:"No se pudo obtener los datos de IA. Intenta de nuevo.",duration:7e3}),t(!1)}});return{completeInfo:(l,c,u)=>o.mutate({plantId:l,species:c,commonName:u}),isCompleting:e||o.isPending,error:o.error,isSuccess:o.isSuccess}},ConfirmDialog=({isOpen:e,onClose:t,onConfirm:n,title:a,description:i,confirmText:o="Confirmar",cancelText:s="Cancelar",variant:l="warning",isLoading:c=!1,preview:u})=>{const p={danger:{iconColor:"text-red-500",bgColor:"bg-red-50 dark:bg-red-900/20",confirmColor:"destructive"},warning:{iconColor:"text-amber-500",bgColor:"bg-amber-50 dark:bg-amber-900/20",confirmColor:"warning"},info:{iconColor:"text-blue-500",bgColor:"bg-blue-50 dark:bg-blue-900/20",confirmColor:"primary"}}[l];return jsxRuntimeExports.jsx(AnimatePresence,{children:e&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},onClick:f=>f.stopPropagation(),className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl max-w-md w-full max-h-[90vh] overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"p-6 pb-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4",children:[jsxRuntimeExports.jsx("div",{className:`${p.bgColor} p-3 rounded-full flex-shrink-0`,children:jsxRuntimeExports.jsx(TriangleAlert,{className:`w-6 h-6 ${p.iconColor}`})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:a}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm leading-relaxed",children:i})]}),jsxRuntimeExports.jsx("button",{onClick:t,disabled:c,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors p-1","aria-label":"Cerrar diálogo",children:jsxRuntimeExports.jsx(X,{className:"w-5 h-5"})})]})}),u&&jsxRuntimeExports.jsx("div",{className:"px-6 pb-4",children:jsxRuntimeExports.jsx("div",{className:"border dark:border-gray-700 rounded-lg p-3 bg-gray-50 dark:bg-gray-900/50",children:u})}),jsxRuntimeExports.jsxs("div",{className:"px-6 pb-6 flex gap-3 justify-end",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:t,disabled:c,className:"min-w-[80px]",children:s}),jsxRuntimeExports.jsx(Button,{variant:p.confirmColor,onClick:n,disabled:c,loading:c,className:"min-w-[80px]",children:o})]})]})})})})},UpdateHealthDiagnosisButton=({plant:e,variant:t="primary",size:n="sm",showLabel:a=!0,className:i=""})=>{const{updatePlantHealthMutation:o,isUpdatingPlantHealth:s}=usePlantMutations(),l=useAuthStore(h=>h.user),{addToast:c}=useToast(),{plant:u}=usePlantDetail(e.id),d=async()=>{if(!(l!=null&&l.id)){c({type:"error",title:"Error",message:"Debes estar logueado para actualizar el diagnóstico"});return}if(!u){c({type:"error",title:"Error",message:"No se pudieron cargar los datos de la planta"});return}console.log("🩺 [Button] Actualizando diagnóstico para:",e.name),o({plant:u,userId:l.id})},p=jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[s?jsxRuntimeExports.jsx(motion.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:jsxRuntimeExports.jsx(RefreshCw,{size:n.includes("icon")?16:14})}):jsxRuntimeExports.jsx(Activity,{size:n.includes("icon")?16:14}),a&&!n.includes("icon")&&jsxRuntimeExports.jsx("span",{className:"ml-2 text-xs",children:s?"Analizando...":"Analizar"})]}),f=n.includes("icon");return jsxRuntimeExports.jsx(Button,{onClick:d,disabled:s||!u,size:n,variant:t,className:i,"aria-label":f?`Actualizar diagnóstico de salud para ${e.name}`:void 0,title:f?`Actualizar diagnóstico de salud para ${e.name}`:void 0,children:p})},PlantDetailHeader=({plant:e})=>{var T,L,B;const t=useNavigate(),[n,a]=reactExports.useState(!1),[i,o]=reactExports.useState(!1),{deletePlant:s,isDeletingPlant:l}=usePlantMutations(),{completeInfo:c,isCompleting:u}=usePlantInfoCompletion(),{scrollY:d}=useScroll(),p=useTransform(d,[0,300],[0,150]),f=useTransform(d,[0,200],[1,.3]),h=((T=e.images)==null?void 0:T.find(I=>I.isProfileImage))||((L=e.images)==null?void 0:L[0]),v=!e.plantEnvironment||!e.lightRequirements,b=()=>{o(!0),a(!1)},g=()=>{s(e.id,{onSuccess:()=>{t("/")}})},E=()=>{console.log("🎯 [UI] Usuario solicitó completar información con IA"),console.log("🌱 [UI] Datos de la planta:",{id:e.id,nombre:e.name,especie:e.species,ambienteActual:e.plantEnvironment||"No especificado",luzActual:e.lightRequirements||"No especificado"}),a(!1),o(!0)},j=()=>{console.log("✅ [UI] Usuario confirmó el completado automático"),o(!1),c(e.id,e.species,e.name)},w=()=>{console.log("❌ [UI] Usuario canceló el completado automático"),o(!1)},S=I=>(I instanceof Date?I:new Date(I)).toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"}),A=I=>{switch(I){case"interior":return jsxRuntimeExports.jsx(House,{className:"w-4 h-4 mr-2"});case"exterior":return jsxRuntimeExports.jsx(TreePine,{className:"w-4 h-4 mr-2"});case"ambos":return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(House,{className:"w-3 h-3 mr-1"}),jsxRuntimeExports.jsx(TreePine,{className:"w-3 h-3 mr-1"})]});default:return null}},R=I=>{switch(I){case"interior":return"Interior";case"exterior":return"Exterior";case"ambos":return"Interior/Exterior";default:return null}},_=I=>{switch(I){case"poca_luz":return jsxRuntimeExports.jsx(Moon,{className:"w-4 h-4 mr-2"});case"luz_indirecta":return jsxRuntimeExports.jsx(Sun,{className:"w-4 h-4 mr-2 opacity-60"});case"luz_directa_parcial":return jsxRuntimeExports.jsx(Sun,{className:"w-4 h-4 mr-2 opacity-80"});case"pleno_sol":return jsxRuntimeExports.jsx(Sun,{className:"w-4 h-4 mr-2"});default:return null}},$=I=>{switch(I){case"poca_luz":return"Poca luz";case"luz_indirecta":return"Luz indirecta";case"luz_directa_parcial":return"Sol parcial";case"pleno_sol":return"Pleno sol";default:return null}},C={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.2,delayChildren:.1}}},O={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",damping:25,stiffness:120}}},N={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.6}}};return reactExports.useEffect(()=>{const I=()=>a(!1);if(n)return document.addEventListener("click",I),()=>document.removeEventListener("click",I)},[n]),jsxRuntimeExports.jsxs(motion.div,{className:"relative h-96 w-full overflow-hidden",variants:C,initial:"hidden",animate:"visible",children:[jsxRuntimeExports.jsx(motion.div,{className:"absolute inset-0 scale-110",style:{y:p,opacity:f},children:h?jsxRuntimeExports.jsx(LazyImage,{src:h.url,alt:e.name,className:"h-full w-full object-cover"}):jsxRuntimeExports.jsx("div",{className:"h-full w-full bg-gradient-to-br from-green-400 via-green-500 to-green-600",children:jsxRuntimeExports.jsx("div",{className:"absolute inset-0 opacity-30",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Ccircle cx='7' cy='7' r='2'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})})}),jsxRuntimeExports.jsxs(motion.div,{className:"absolute inset-0",variants:N,children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[rgba(0,0,0,0.6)] to-transparent"}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-transparent via-transparent to-black/30"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-background/60 to-transparent"})]}),jsxRuntimeExports.jsx("div",{className:"absolute top-0 left-0 right-0 p-4 pt-safe-top z-20",children:jsxRuntimeExports.jsxs(motion.div,{className:"flex items-center justify-between",variants:O,children:[jsxRuntimeExports.jsx(Button,{"aria-label":"Volver atrás",variant:"ghost",size:"icon",onClick:()=>t("/"),className:"bg-black/30 text-white backdrop-blur-lg rounded-full border border-white/20 hover:bg-black/50 transition-all duration-300",children:jsxRuntimeExports.jsx(ArrowLeft,{size:20})}),jsxRuntimeExports.jsx("div",{className:"flex items-center space-x-2",children:jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Button,{"aria-label":"Más opciones",variant:"ghost",size:"icon",onClick:I=>{I.stopPropagation(),a(z=>!z)},className:"bg-neutral-800/90 text-white backdrop-blur-lg rounded-full border border-neutral-600 hover:bg-neutral-700 transition-all duration-300 dark:bg-neutral-200/90 dark:text-neutral-900 dark:border-neutral-400 dark:hover:bg-neutral-300",children:jsxRuntimeExports.jsx(EllipsisVertical,{size:20})}),jsxRuntimeExports.jsx(AnimatePresence,{children:n&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},transition:{duration:.15},className:"absolute right-0 mt-2 w-48 origin-top-right rounded-xl bg-background/95 backdrop-blur-lg shadow-xl ring-1 ring-black/10 focus:outline-none z-30 border border-border/50",onClick:I=>I.stopPropagation(),children:jsxRuntimeExports.jsxs("div",{className:"py-2",children:[v&&jsxRuntimeExports.jsxs("button",{onClick:E,disabled:u,className:"flex w-full items-center px-4 py-3 text-sm text-contrast-high hover:bg-contrast-surface transition-colors rounded-lg mx-2",children:[u?jsxRuntimeExports.jsx(LoaderCircle,{className:"mr-3 h-4 w-4 animate-spin"}):jsxRuntimeExports.jsx(Sparkles,{className:"mr-3 h-4 w-4"}),jsxRuntimeExports.jsx("span",{children:u?"Completando...":"Completar con IA"})]}),jsxRuntimeExports.jsx("div",{className:"flex w-full items-center px-2 py-1",children:jsxRuntimeExports.jsx(UpdateHealthDiagnosisButton,{plant:e,variant:"outline",size:"sm",showLabel:!0,className:"w-full"})}),jsxRuntimeExports.jsxs("button",{onClick:b,disabled:l,className:"flex w-full items-center px-4 py-3 text-sm text-error-600 dark:text-error-500 hover:bg-error-50 dark:hover:bg-error-900/20 transition-colors rounded-lg mx-2 font-medium",children:[l?jsxRuntimeExports.jsx(LoaderCircle,{className:"mr-3 h-4 w-4 animate-spin"}):jsxRuntimeExports.jsx(Trash2,{className:"mr-3 h-4 w-4"}),jsxRuntimeExports.jsx("span",{children:l?"Eliminando...":"Eliminar planta"})]})]})})})]})})]})}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-6 pb-safe-bottom z-10",children:jsxRuntimeExports.jsxs(motion.div,{className:"space-y-4",variants:O,children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(motion.h1,{className:"text-[24px] font-bold text-white drop-shadow-lg",variants:O,children:e.nickname||e.name}),jsxRuntimeExports.jsx(motion.p,{className:"text-[16px] text-white/90 font-medium",variants:O,children:e.species})]}),jsxRuntimeExports.jsxs(motion.div,{className:"flex flex-wrap gap-2 pt-2 max-h-32 overflow-y-auto",variants:O,children:[e.location&&jsxRuntimeExports.jsxs("div",{className:"flex items-center text-white/80 bg-black/30 backdrop-blur-sm px-3 py-2 rounded-full border border-white/20",children:[jsxRuntimeExports.jsx(MapPin,{className:"w-4 h-4 mr-2"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",children:e.location})]}),e.dateAdded&&jsxRuntimeExports.jsxs("div",{className:"flex items-center text-white/80 bg-black/30 backdrop-blur-sm px-3 py-2 rounded-full border border-white/20",children:[jsxRuntimeExports.jsx(Calendar,{className:"w-4 h-4 mr-2"}),jsxRuntimeExports.jsxs("span",{className:"text-sm font-medium",children:["Desde ",S(e.dateAdded)]})]}),e.plantEnvironment&&R(e.plantEnvironment)&&jsxRuntimeExports.jsxs("div",{className:"flex items-center text-white/80 bg-black/30 backdrop-blur-sm px-3 py-2 rounded-full border border-white/20",children:[A(e.plantEnvironment),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",children:R(e.plantEnvironment)})]}),e.lightRequirements&&$(e.lightRequirements)&&jsxRuntimeExports.jsxs("div",{className:"flex items-center text-white/80 bg-black/30 backdrop-blur-sm px-3 py-2 rounded-full border border-white/20",children:[_(e.lightRequirements),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",children:$(e.lightRequirements)})]}),e.images&&e.images.length>0&&jsxRuntimeExports.jsx("div",{className:"flex items-center text-white/80 bg-black/30 backdrop-blur-sm px-3 py-2 rounded-full border border-white/20",children:jsxRuntimeExports.jsxs("span",{className:"text-sm font-medium",children:[e.images.length," foto",e.images.length!==1?"s":""]})})]})]})}),jsxRuntimeExports.jsx(AnimatePresence,{children:i&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:w,children:jsxRuntimeExports.jsxs(motion.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},onClick:I=>I.stopPropagation(),className:"bg-white dark:bg-gray-900 rounded-2xl p-6 max-w-md w-full mx-4 shadow-xl",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center",children:jsxRuntimeExports.jsx(Sparkles,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Completar con IA"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Información automática"})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3 mb-6",children:[jsxRuntimeExports.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"¿Quieres que la IA complete la información faltante de esta planta?"}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-3 space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("span",{className:"text-2xl",children:"🌱"}),jsxRuntimeExports.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:e.name})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("span",{className:"text-2xl",children:"🔬"}),jsxRuntimeExports.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:e.species})]})]}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[jsxRuntimeExports.jsx("p",{className:"font-medium mb-1",children:"La IA agregará:"}),jsxRuntimeExports.jsxs("ul",{className:"space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"• Ambiente recomendado (interior/exterior)"}),jsxRuntimeExports.jsx("li",{children:"• Necesidades de luz específicas"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-3",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:w,className:"flex-1",disabled:u,children:"Cancelar"}),jsxRuntimeExports.jsx(Button,{onClick:j,className:"flex-1 bg-green-600 hover:bg-green-700 text-white",disabled:u,children:u?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"w-4 h-4 mr-2 animate-spin"}),"Completando..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Sparkles,{className:"w-4 h-4 mr-2"}),"Completar"]})})]})]})})}),jsxRuntimeExports.jsx(ConfirmDialog,{isOpen:i,onClose:()=>o(!1),onConfirm:g,title:"Eliminar Planta",description:`¿Estás seguro de que quieres eliminar "${e.nickname||e.name}"? Esta acción es irreversible y se perderán todos los datos, fotos y mensajes de chat asociados.`,confirmText:"Eliminar Definitivamente",cancelText:"Cancelar",variant:"danger",isLoading:l,preview:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[h&&jsxRuntimeExports.jsx("img",{src:h.url,alt:e.name,className:"w-12 h-12 rounded-lg object-cover"}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-sm text-gray-900 dark:text-gray-100 truncate",children:e.nickname||e.name}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:[e.species," • ",((B=e.images)==null?void 0:B.length)||0," fotos"]})]})]})})]})},PlantCharacteristics=({plant:e})=>{const{careProfile:t,personality:n}=e;if(!t)return jsxRuntimeExports.jsx("div",{className:"bg-background p-6 rounded-lg shadow-lg w-full text-center",children:jsxRuntimeExports.jsx("p",{className:"text-muted-foreground",children:"No hay perfil de cuidados disponible para esta planta."})});const a=[{icon:jsxRuntimeExports.jsx(Droplets,{size:20,strokeWidth:2,color:"#555"}),label:"RIEGO",value:`Cada ${t.wateringFrequency} días`},{icon:jsxRuntimeExports.jsx(Sun,{size:20,strokeWidth:2,color:"#555"}),label:"LUZ SOLAR",value:t.sunlightRequirement},{icon:jsxRuntimeExports.jsx(Wind,{size:20,strokeWidth:2,color:"#555"}),label:"HUMEDAD",value:t.humidityPreference},{icon:jsxRuntimeExports.jsx(Thermometer,{size:20,strokeWidth:2,color:"#555"}),label:"TEMPERATURA IDEAL",value:`${t.temperatureRange.min}°C - ${t.temperatureRange.max}°C`},{icon:jsxRuntimeExports.jsx(Sparkles,{size:20,strokeWidth:2,color:"#555"}),label:"FERTILIZACIÓN",value:`Cada ${t.fertilizingFrequency} días`},{icon:jsxRuntimeExports.jsx(Sprout,{size:20,strokeWidth:2,color:"#555"}),label:"TIPO DE SUELO",value:t.soilType}];return jsxRuntimeExports.jsxs("div",{className:"w-full",style:{lineHeight:"1.4"},children:[jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 gap-x-4 gap-y-6 mb-4",style:{gap:"24px 16px"},children:a.map((i,o)=>jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-start",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center mb-1",children:[i.icon,jsxRuntimeExports.jsx("span",{className:"ml-2 text-[12px] uppercase tracking-[0.4px] text-[#777] font-medium",children:i.label})]}),jsxRuntimeExports.jsx("span",{className:"text-[15px] font-semibold text-[#333] mt-1",children:i.value})]},o))}),t.specialCare&&t.specialCare.length>0&&jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-[14px] text-[#333] mt-4 mb-2",children:"Cuidados Especiales"}),jsxRuntimeExports.jsx("ul",{className:"list-none pl-0 ml-4",style:{lineHeight:"1.5"},children:t.specialCare.map((i,o)=>jsxRuntimeExports.jsxs("li",{className:"flex items-start mb-1",children:[jsxRuntimeExports.jsx("span",{className:"mr-2 text-[#2A7F3E] font-bold",style:{fontSize:18,lineHeight:"1"},children:"•"}),jsxRuntimeExports.jsx("span",{className:"text-[14px] text-[#444]",children:i})]},o))})]}),jsxRuntimeExports.jsx("hr",{className:"my-6",style:{border:"none",borderTop:"1px solid #EEE",margin:"24px 0"}}),n&&jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center mb-3",children:[jsxRuntimeExports.jsx(Bot,{size:20,strokeWidth:2,color:"#555",className:"mr-2"}),jsxRuntimeExports.jsx("span",{className:"text-[18px] font-semibold text-[#333]",children:"Personalidad de la Planta"})]}),n.communicationStyle&&jsxRuntimeExports.jsx("div",{className:Array.isArray(n.communicationStyle)&&n.communicationStyle.length>1?"grid grid-cols-2 gap-x-4 mb-3":"flex justify-center mb-3",children:(Array.isArray(n.communicationStyle)?n.communicationStyle:[n.communicationStyle]).map((i,o)=>jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-start mb-2",children:[jsxRuntimeExports.jsx("span",{className:"text-[12px] uppercase tracking-[0.4px] text-[#777] font-medium",children:"ESTILO"}),jsxRuntimeExports.jsx("span",{className:"text-[15px] font-semibold text-[#333] mt-1",children:i})]},o))}),n.catchphrases&&n.catchphrases.length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-[14px] text-[#333] mb-2",children:"Frases Típicas"}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:n.catchphrases.map((i,o)=>jsxRuntimeExports.jsx("span",{className:"inline-block bg-[#F0FDF6] text-[#046A38] text-[14px] px-2 py-1 rounded-[4px] font-medium",style:{padding:"4px 8px",marginRight:8,marginBottom:8},children:i},o))})]})]})]})},DescriptionCard=({funFacts:e})=>{const t={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{staggerChildren:.1}}},n={hidden:{opacity:0,y:10},visible:{opacity:1,y:0}};return jsxRuntimeExports.jsxs(motion.div,{className:"bg-white/0 dark:bg-transparent p-3 sm:p-4 w-full",variants:t,initial:"hidden",animate:"visible",children:[e&&e.length>0&&jsxRuntimeExports.jsxs(motion.div,{variants:n,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center mb-6",children:[jsxRuntimeExports.jsx("div",{className:"p-3 bg-yellow-500/10 rounded-full mr-4",children:jsxRuntimeExports.jsx(Sparkles,{className:"w-6 h-6 text-yellow-500"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl font-bold text-foreground",children:"Datos Curiosos"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground",children:"Descubre cosas increíbles sobre esta planta"})]})]}),jsxRuntimeExports.jsx("div",{className:"grid gap-4",children:e.map((a,i)=>jsxRuntimeExports.jsxs(motion.div,{className:"group flex items-start bg-yellow-500/5 hover:bg-yellow-500/10 border border-yellow-500/20 rounded-xl p-4 transition-all duration-300 hover:shadow-md",variants:n,whileHover:{scale:1.02},whileTap:{scale:.98},children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0 mr-4 mt-1",children:jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Lightbulb,{className:"w-5 h-5 text-yellow-500 group-hover:text-yellow-600 transition-colors"}),jsxRuntimeExports.jsx("div",{className:"absolute -inset-2 bg-yellow-500/20 rounded-full opacity-0 group-hover:opacity-100 transition-opacity pulse"})]})}),jsxRuntimeExports.jsx("p",{className:"text-foreground/90 leading-relaxed font-medium group-hover:text-foreground transition-colors",children:a})]},i))})]}),(!e||e.length===0)&&jsxRuntimeExports.jsx(motion.div,{className:"mt-8 flex items-center justify-center p-6 bg-muted/30 rounded-xl border border-dashed border-muted-foreground/20",variants:n,children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx(Sparkles,{className:"w-6 h-6 text-yellow-400 mx-auto mb-2"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground font-medium",children:"No hay datos curiosos disponibles"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground/70 mt-1",children:"¡Pronto agregaremos información interesante!"})]})})]})},getIssueIcon=()=>jsxRuntimeExports.jsx(Leaf,{className:"w-5 h-5 text-[#EF9A9A]","aria-label":"Problema de hoja seca"}),HealthAnalysisCard=({analysis:e})=>{if(!e)return null;const t=e.issues&&e.issues.length>0;return jsxRuntimeExports.jsxs("div",{className:"w-full",role:"region","aria-label":"Análisis de salud de la planta",style:{lineHeight:"1.4"},children:[t?jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-[16px] text-[#333] mt-3",children:"Problemas Detectados"}),jsxRuntimeExports.jsxs("p",{className:"mb-2 text-[14px] text-[#D32F2F] font-medium",style:{marginTop:12,marginBottom:8},children:[e.issues.length," problema",e.issues.length!==1?"s":""," detectado",e.issues.length!==1?"s":""]}),jsxRuntimeExports.jsx("ul",{className:"",children:e.issues.map((n,a)=>jsxRuntimeExports.jsxs("li",{className:"flex items-start",style:{marginBottom:a<e.issues.length-1?16:0,paddingBottom:a<e.issues.length-1?16:0,borderBottom:a<e.issues.length-1?"1px solid #EEE":"none"},children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0 w-5 h-5 flex items-center justify-center mt-1",children:getIssueIcon()}),jsxRuntimeExports.jsxs("div",{className:"ml-4",children:[jsxRuntimeExports.jsx("p",{className:"font-semibold text-[15px] text-[#333]",children:n.type}),jsxRuntimeExports.jsx("p",{className:"text-[14px] text-[#555] mt-1",children:n.description})]})]},a))}),jsxRuntimeExports.jsxs("div",{className:"mt-4",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-[14px] text-[#333] mt-4 mb-2",children:"Tratamientos Sugeridos"}),jsxRuntimeExports.jsx("ul",{className:"list-none pl-0 ml-3",style:{lineHeight:"1.5"},children:e.issues.map((n,a)=>jsxRuntimeExports.jsxs("li",{className:"flex items-start mb-1",children:[jsxRuntimeExports.jsx("span",{className:"mr-2 text-[#2A7F3E] font-bold",style:{fontSize:18,lineHeight:"1"},children:"•"}),jsxRuntimeExports.jsx("span",{className:"text-[14px] text-[#444]",children:n.treatment})]},a))})]})]}):jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center text-center p-6 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[jsxRuntimeExports.jsx("span",{className:"text-4xl mb-2",role:"img","aria-label":"Planta saludable",children:"🌱"}),jsxRuntimeExports.jsx(ShieldCheck,{className:"w-12 h-12 text-green-500 mb-3","aria-label":"Todo en orden"}),jsxRuntimeExports.jsxs("h4",{className:"font-semibold text-lg text-green-700 dark:text-green-300 flex items-center gap-2",children:["¡Todo en orden!",jsxRuntimeExports.jsx("span",{className:"text-base","aria-hidden":"true",children:"🌱"})]}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground",children:"El análisis inicial no detectó problemas de salud significativos."})]}),e.recommendations&&e.recommendations.length>0&&jsxRuntimeExports.jsxs("div",{className:"mt-4",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-[14px] text-[#333] mt-4 mb-2",children:"Recomendaciones Adicionales"}),jsxRuntimeExports.jsx("ul",{className:"list-none pl-0 ml-3",style:{lineHeight:"1.5"},children:e.recommendations.map((n,a)=>jsxRuntimeExports.jsxs("li",{className:"flex items-start mb-1",children:[jsxRuntimeExports.jsx("span",{className:"mr-2 text-[#2A7F3E] font-bold",style:{fontSize:18,lineHeight:"1"},children:"•"}),jsxRuntimeExports.jsx("span",{className:"text-[14px] text-[#444]",children:n})]},a))})]})]})};var get$2={},isUnsafeProperty={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==="__proto__"}e.isUnsafeProperty=t})(isUnsafeProperty);var isDeepKey={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=t})(isDeepKey);var toKey={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){var a;return typeof n=="string"||typeof n=="symbol"?n:Object.is((a=n==null?void 0:n.valueOf)==null?void 0:a.call(n),-0)?"-0":String(n)}e.toKey=t})(toKey);var toPath={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){const a=[],i=n.length;if(i===0)return a;let o=0,s="",l="",c=!1;for(n.charCodeAt(0)===46&&(a.push(""),o++);o<i;){const u=n[o];l?u==="\\"&&o+1<i?(o++,s+=n[o]):u===l?l="":s+=u:c?u==='"'||u==="'"?l=u:u==="]"?(c=!1,a.push(s),s=""):s+=u:u==="["?(c=!0,s&&(a.push(s),s="")):u==="."?s&&(a.push(s),s=""):s+=u,o++}return s&&a.push(s),a}e.toPath=t})(toPath);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=isUnsafeProperty,n=isDeepKey,a=toKey,i=toPath;function o(l,c,u){if(l==null)return u;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?n.isDeepKey(c)?o(l,i.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=a.toKey(c));const d=l[c];return d===void 0?u:d}default:{if(Array.isArray(c))return s(l,c,u);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?u:d}}}function s(l,c,u){if(c.length===0)return u;let d=l;for(let p=0;p<c.length;p++){if(d==null||t.isUnsafeProperty(c[p]))return u;d=d[c[p]]}return d===void 0?u:d}e.get=o})(get$2);var get=get$2.get;const get$1=getDefaultExportFromCjs(get);var reactIs={exports:{}},reactIs_production={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var REACT_ELEMENT_TYPE=Symbol.for("react.transitional.element"),REACT_PORTAL_TYPE=Symbol.for("react.portal"),REACT_FRAGMENT_TYPE=Symbol.for("react.fragment"),REACT_STRICT_MODE_TYPE=Symbol.for("react.strict_mode"),REACT_PROFILER_TYPE=Symbol.for("react.profiler"),REACT_CONSUMER_TYPE=Symbol.for("react.consumer"),REACT_CONTEXT_TYPE=Symbol.for("react.context"),REACT_FORWARD_REF_TYPE=Symbol.for("react.forward_ref"),REACT_SUSPENSE_TYPE=Symbol.for("react.suspense"),REACT_SUSPENSE_LIST_TYPE=Symbol.for("react.suspense_list"),REACT_MEMO_TYPE=Symbol.for("react.memo"),REACT_LAZY_TYPE=Symbol.for("react.lazy"),REACT_VIEW_TRANSITION_TYPE=Symbol.for("react.view_transition"),REACT_CLIENT_REFERENCE=Symbol.for("react.client.reference");function typeOf(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case REACT_ELEMENT_TYPE:switch(e=e.type,e){case REACT_FRAGMENT_TYPE:case REACT_PROFILER_TYPE:case REACT_STRICT_MODE_TYPE:case REACT_SUSPENSE_TYPE:case REACT_SUSPENSE_LIST_TYPE:case REACT_VIEW_TRANSITION_TYPE:return e;default:switch(e=e&&e.$$typeof,e){case REACT_CONTEXT_TYPE:case REACT_FORWARD_REF_TYPE:case REACT_LAZY_TYPE:case REACT_MEMO_TYPE:return e;case REACT_CONSUMER_TYPE:return e;default:return t}}case REACT_PORTAL_TYPE:return t}}}reactIs_production.ContextConsumer=REACT_CONSUMER_TYPE;reactIs_production.ContextProvider=REACT_CONTEXT_TYPE;reactIs_production.Element=REACT_ELEMENT_TYPE;reactIs_production.ForwardRef=REACT_FORWARD_REF_TYPE;reactIs_production.Fragment=REACT_FRAGMENT_TYPE;reactIs_production.Lazy=REACT_LAZY_TYPE;reactIs_production.Memo=REACT_MEMO_TYPE;reactIs_production.Portal=REACT_PORTAL_TYPE;reactIs_production.Profiler=REACT_PROFILER_TYPE;reactIs_production.StrictMode=REACT_STRICT_MODE_TYPE;reactIs_production.Suspense=REACT_SUSPENSE_TYPE;reactIs_production.SuspenseList=REACT_SUSPENSE_LIST_TYPE;reactIs_production.isContextConsumer=function(e){return typeOf(e)===REACT_CONSUMER_TYPE};reactIs_production.isContextProvider=function(e){return typeOf(e)===REACT_CONTEXT_TYPE};reactIs_production.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===REACT_ELEMENT_TYPE};reactIs_production.isForwardRef=function(e){return typeOf(e)===REACT_FORWARD_REF_TYPE};reactIs_production.isFragment=function(e){return typeOf(e)===REACT_FRAGMENT_TYPE};reactIs_production.isLazy=function(e){return typeOf(e)===REACT_LAZY_TYPE};reactIs_production.isMemo=function(e){return typeOf(e)===REACT_MEMO_TYPE};reactIs_production.isPortal=function(e){return typeOf(e)===REACT_PORTAL_TYPE};reactIs_production.isProfiler=function(e){return typeOf(e)===REACT_PROFILER_TYPE};reactIs_production.isStrictMode=function(e){return typeOf(e)===REACT_STRICT_MODE_TYPE};reactIs_production.isSuspense=function(e){return typeOf(e)===REACT_SUSPENSE_TYPE};reactIs_production.isSuspenseList=function(e){return typeOf(e)===REACT_SUSPENSE_LIST_TYPE};reactIs_production.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===REACT_FRAGMENT_TYPE||e===REACT_PROFILER_TYPE||e===REACT_STRICT_MODE_TYPE||e===REACT_SUSPENSE_TYPE||e===REACT_SUSPENSE_LIST_TYPE||typeof e=="object"&&e!==null&&(e.$$typeof===REACT_LAZY_TYPE||e.$$typeof===REACT_MEMO_TYPE||e.$$typeof===REACT_CONTEXT_TYPE||e.$$typeof===REACT_CONSUMER_TYPE||e.$$typeof===REACT_FORWARD_REF_TYPE||e.$$typeof===REACT_CLIENT_REFERENCE||e.getModuleId!==void 0)};reactIs_production.typeOf=typeOf;reactIs.exports=reactIs_production;var reactIsExports=reactIs.exports,mathSign=e=>e===0?0:e>0?1:-1,isNan=e=>typeof e=="number"&&e!=+e,isPercent=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,isNumber=e=>(typeof e=="number"||e instanceof Number)&&!isNan(e),isNumOrStr=e=>isNumber(e)||typeof e=="string",idCounter=0,uniqueId=e=>{var t=++idCounter;return"".concat(e||"").concat(t)},getPercentValue=function e(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!isNumber(t)&&typeof t!="string")return a;var o;if(isPercent(t)){if(n==null)return a;var s=t.indexOf("%");o=n*parseFloat(t.slice(0,s))/100}else o=+t;return isNan(o)&&(o=a),i&&n!=null&&o>n&&(o=n),o},hasDuplicate=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},a=0;a<t;a++)if(!n[e[a]])n[e[a]]=!0;else return!0;return!1},interpolateNumber$1=(e,t)=>isNumber(e)&&isNumber(t)?n=>e+n*(t-e):()=>t;function findEntryInArray(e,t,n){if(!(!e||!e.length))return e.find(a=>a&&(typeof t=="function"?t(a):get$1(a,t))===n)}var isNullish=e=>e===null||typeof e=="undefined",upperFirst=e=>isNullish(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),SVGContainerPropKeys=["viewBox","children"],SVGElementPropKeys=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],PolyElementKeys=["points","pathLength"],FilteredElementKeyMap={svg:SVGContainerPropKeys,polygon:PolyElementKeys,polyline:PolyElementKeys},EventKeys=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],adaptEventHandlers=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(reactExports.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var a={};return Object.keys(n).forEach(i=>{EventKeys.includes(i)&&(a[i]=o=>n[i](n,o))}),a},getEventHandlerOfChild=(e,t,n)=>a=>(e(t,n,a),null),adaptEventsOfChild=(e,t,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var a=null;return Object.keys(e).forEach(i=>{var o=e[i];EventKeys.includes(i)&&typeof o=="function"&&(a||(a={}),a[i]=getEventHandlerOfChild(o,t,n))}),a},getDisplayName=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",lastChildren=null,lastResult=null,toArray$1=e=>{if(e===lastChildren&&Array.isArray(lastResult))return lastResult;var t=[];return reactExports.Children.forEach(e,n=>{isNullish(n)||(reactIsExports.isFragment(n)?t=t.concat(toArray$1(n.props.children)):t.push(n))}),lastResult=t,lastChildren=e,t};function findAllByType(e,t){var n=[],a=[];return Array.isArray(t)?a=t.map(i=>getDisplayName(i)):a=[getDisplayName(t)],toArray$1(e).forEach(i=>{var o=get$1(i,"type.displayName")||get$1(i,"type.name");a.indexOf(o)!==-1&&n.push(i)}),n}var isClipDot=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,isValidSpreadableProp=(e,t,n,a)=>{var i,o=(i=a&&(FilteredElementKeyMap==null?void 0:FilteredElementKeyMap[a]))!==null&&i!==void 0?i:[];return t.startsWith("data-")||typeof e!="function"&&(a&&o.includes(t)||SVGElementPropKeys.includes(t))||n&&EventKeys.includes(t)},filterProps=(e,t,n)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var a=e;if(reactExports.isValidElement(e)&&(a=e.props),typeof a!="object"&&typeof a!="function")return null;var i={};return Object.keys(a).forEach(o=>{var s;isValidSpreadableProp((s=a)===null||s===void 0?void 0:s[o],o,t,n)&&(i[o]=a[o])}),i},_excluded$g=["children","width","height","viewBox","className","style","title","desc"];function _extends$k(){return _extends$k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},_extends$k.apply(null,arguments)}function _objectWithoutProperties$g(e,t){if(e==null)return{};var n,a,i=_objectWithoutPropertiesLoose$g(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function _objectWithoutPropertiesLoose$g(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var Surface=reactExports.forwardRef((e,t)=>{var{children:n,width:a,height:i,viewBox:o,className:s,style:l,title:c,desc:u}=e,d=_objectWithoutProperties$g(e,_excluded$g),p=o||{width:a,height:i,x:0,y:0},f=clsx("recharts-surface",s);return reactExports.createElement("svg",_extends$k({},filterProps(d,!0,"svg"),{className:f,width:a,height:i,style:l,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height),ref:t}),reactExports.createElement("title",null,c),reactExports.createElement("desc",null,u),n)}),_excluded$f=["children","className"];function _extends$j(){return _extends$j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},_extends$j.apply(null,arguments)}function _objectWithoutProperties$f(e,t){if(e==null)return{};var n,a,i=_objectWithoutPropertiesLoose$f(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function _objectWithoutPropertiesLoose$f(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var Layer=reactExports.forwardRef((e,t)=>{var{children:n,className:a}=e,i=_objectWithoutProperties$f(e,_excluded$f),o=clsx("recharts-layer",a);return reactExports.createElement("g",_extends$j({className:o},filterProps(i,!0),{ref:t}),n)}),LegendPortalContext=reactExports.createContext(null);function constant$1(e){return function(){return e}}const pi=Math.PI,tau=2*pi,epsilon=1e-6,tauEpsilon=tau-epsilon;function append(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function appendRound(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return append;const n=10**t;return function(a){this._+=a[0];for(let i=1,o=a.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+a[i]}}class Path{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?append:appendRound(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,a,i){this._append`Q${+t},${+n},${this._x1=+a},${this._y1=+i}`}bezierCurveTo(t,n,a,i,o,s){this._append`C${+t},${+n},${+a},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(t,n,a,i,o){if(t=+t,n=+n,a=+a,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,l=this._y1,c=a-t,u=i-n,d=s-t,p=l-n,f=d*d+p*p;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(f>epsilon)if(!(Math.abs(p*c-u*d)>epsilon)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let h=a-s,v=i-l,b=c*c+u*u,g=h*h+v*v,E=Math.sqrt(b),j=Math.sqrt(f),w=o*Math.tan((pi-Math.acos((b+f-g)/(2*E*j)))/2),S=w/j,A=w/E;Math.abs(S-1)>epsilon&&this._append`L${t+S*d},${n+S*p}`,this._append`A${o},${o},0,0,${+(p*h>d*v)},${this._x1=t+A*c},${this._y1=n+A*u}`}}arc(t,n,a,i,o,s){if(t=+t,n=+n,a=+a,s=!!s,a<0)throw new Error(`negative radius: ${a}`);let l=a*Math.cos(i),c=a*Math.sin(i),u=t+l,d=n+c,p=1^s,f=s?i-o:o-i;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>epsilon||Math.abs(this._y1-d)>epsilon)&&this._append`L${u},${d}`,a&&(f<0&&(f=f%tau+tau),f>tauEpsilon?this._append`A${a},${a},0,1,${p},${t-l},${n-c}A${a},${a},0,1,${p},${this._x1=u},${this._y1=d}`:f>epsilon&&this._append`A${a},${a},0,${+(f>=pi)},${p},${this._x1=t+a*Math.cos(o)},${this._y1=n+a*Math.sin(o)}`)}rect(t,n,a,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${a=+a}v${+i}h${-a}Z`}toString(){return this._}}function withPath(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const a=Math.floor(n);if(!(a>=0))throw new RangeError(`invalid digits: ${n}`);t=a}return e},()=>new Path(t)}function array(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Linear(e){this._context=e}Linear.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function curveLinear(e){return new Linear(e)}function x(e){return e[0]}function y(e){return e[1]}function shapeLine(e,t){var n=constant$1(!0),a=null,i=curveLinear,o=null,s=withPath(l);e=typeof e=="function"?e:e===void 0?x:constant$1(e),t=typeof t=="function"?t:t===void 0?y:constant$1(t);function l(c){var u,d=(c=array(c)).length,p,f=!1,h;for(a==null&&(o=i(h=s())),u=0;u<=d;++u)!(u<d&&n(p=c[u],u,c))===f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+e(p,u,c),+t(p,u,c));if(h)return o=null,h+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:constant$1(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:constant$1(+c),l):t},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:constant$1(!!c),l):n},l.curve=function(c){return arguments.length?(i=c,a!=null&&(o=i(a)),l):i},l.context=function(c){return arguments.length?(c==null?a=o=null:o=i(a=c),l):a},l}function shapeArea(e,t,n){var a=null,i=constant$1(!0),o=null,s=curveLinear,l=null,c=withPath(u);e=typeof e=="function"?e:e===void 0?x:constant$1(+e),t=typeof t=="function"?t:constant$1(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?y:constant$1(+n);function u(p){var f,h,v,b=(p=array(p)).length,g,E=!1,j,w=new Array(b),S=new Array(b);for(o==null&&(l=s(j=c())),f=0;f<=b;++f){if(!(f<b&&i(g=p[f],f,p))===E)if(E=!E)h=f,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),v=f-1;v>=h;--v)l.point(w[v],S[v]);l.lineEnd(),l.areaEnd()}E&&(w[f]=+e(g,f,p),S[f]=+t(g,f,p),l.point(a?+a(g,f,p):w[f],n?+n(g,f,p):S[f]))}if(j)return l=null,j+""||null}function d(){return shapeLine().defined(i).curve(s).context(o)}return u.x=function(p){return arguments.length?(e=typeof p=="function"?p:constant$1(+p),a=null,u):e},u.x0=function(p){return arguments.length?(e=typeof p=="function"?p:constant$1(+p),u):e},u.x1=function(p){return arguments.length?(a=p==null?null:typeof p=="function"?p:constant$1(+p),u):a},u.y=function(p){return arguments.length?(t=typeof p=="function"?p:constant$1(+p),n=null,u):t},u.y0=function(p){return arguments.length?(t=typeof p=="function"?p:constant$1(+p),u):t},u.y1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:constant$1(+p),u):n},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(n)},u.lineX1=function(){return d().x(a).y(t)},u.defined=function(p){return arguments.length?(i=typeof p=="function"?p:constant$1(!!p),u):i},u.curve=function(p){return arguments.length?(s=p,o!=null&&(l=s(o)),u):s},u.context=function(p){return arguments.length?(p==null?o=l=null:l=s(o=p),u):o},u}class Bump{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function bumpX(e){return new Bump(e,!0)}function bumpY(e){return new Bump(e,!1)}function noop$6(){}function point$2(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Basis(e){this._context=e}Basis.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:point$2(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:point$2(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function curveBasis(e){return new Basis(e)}function BasisClosed(e){this._context=e}BasisClosed.prototype={areaStart:noop$6,areaEnd:noop$6,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:point$2(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function curveBasisClosed(e){return new BasisClosed(e)}function BasisOpen(e){this._context=e}BasisOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,a):this._context.moveTo(n,a);break;case 3:this._point=4;default:point$2(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function curveBasisOpen(e){return new BasisOpen(e)}function LinearClosed(e){this._context=e}LinearClosed.prototype={areaStart:noop$6,areaEnd:noop$6,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function curveLinearClosed(e){return new LinearClosed(e)}function sign(e){return e<0?-1:1}function slope3(e,t,n){var a=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(a||i<0&&-0),s=(n-e._y1)/(i||a<0&&-0),l=(o*i+s*a)/(a+i);return(sign(o)+sign(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(l))||0}function slope2(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function point$1(e,t,n){var a=e._x0,i=e._y0,o=e._x1,s=e._y1,l=(o-a)/3;e._context.bezierCurveTo(a+l,i+l*t,o-l,s-l*n,o,s)}function MonotoneX(e){this._context=e}MonotoneX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:point$1(this,this._t0,slope2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,point$1(this,slope2(this,n=slope3(this,e,t)),n);break;default:point$1(this,this._t0,n=slope3(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function MonotoneY(e){this._context=new ReflectContext(e)}(MonotoneY.prototype=Object.create(MonotoneX.prototype)).point=function(e,t){MonotoneX.prototype.point.call(this,t,e)};function ReflectContext(e){this._context=e}ReflectContext.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,a,i,o){this._context.bezierCurveTo(t,e,a,n,o,i)}};function monotoneX(e){return new MonotoneX(e)}function monotoneY(e){return new MonotoneY(e)}function Natural(e){this._context=e}Natural.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var a=controlPoints(e),i=controlPoints(t),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(a[0][o],i[0][o],a[1][o],i[1][o],e[s],t[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function controlPoints(e){var t,n=e.length-1,a,i=new Array(n),o=new Array(n),s=new Array(n);for(i[0]=0,o[0]=2,s[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,o[t]=4,s[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,o[n-1]=7,s[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)a=i[t]/o[t-1],o[t]-=a,s[t]-=a*s[t-1];for(i[n-1]=s[n-1]/o[n-1],t=n-2;t>=0;--t)i[t]=(s[t]-i[t+1])/o[t];for(o[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function curveNatural(e){return new Natural(e)}function Step(e,t){this._context=e,this._t=t}Step.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function curveStep(e){return new Step(e,.5)}function stepBefore(e){return new Step(e,0)}function stepAfter(e){return new Step(e,1)}function stackOffsetNone(e,t){if((s=e.length)>1)for(var n=1,a,i,o=e[t[0]],s,l=o.length;n<s;++n)for(i=o,o=e[t[n]],a=0;a<l;++a)o[a][1]+=o[a][0]=isNaN(i[a][1])?i[a][0]:i[a][1]}function stackOrderNone(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function stackValue(e,t){return e[t]}function stackSeries(e){const t=[];return t.key=e,t}function shapeStack(){var e=constant$1([]),t=stackOrderNone,n=stackOffsetNone,a=stackValue;function i(o){var s=Array.from(e.apply(this,arguments),stackSeries),l,c=s.length,u=-1,d;for(const p of o)for(l=0,++u;l<c;++l)(s[l][u]=[0,+a(p,s[l].key,u,o)]).data=p;for(l=0,d=array(t(s));l<c;++l)s[d[l]].index=l;return n(s,d),s}return i.keys=function(o){return arguments.length?(e=typeof o=="function"?o:constant$1(Array.from(o)),i):e},i.value=function(o){return arguments.length?(a=typeof o=="function"?o:constant$1(+o),i):a},i.order=function(o){return arguments.length?(t=o==null?stackOrderNone:typeof o=="function"?o:constant$1(Array.from(o)),i):t},i.offset=function(o){return arguments.length?(n=o==null?stackOffsetNone:o,i):n},i}function stackOffsetExpand(e,t){if((a=e.length)>0){for(var n,a,i=0,o=e[0].length,s;i<o;++i){for(s=n=0;n<a;++n)s+=e[n][i][1]||0;if(s)for(n=0;n<a;++n)e[n][i][1]/=s}stackOffsetNone(e,t)}}function stackOffsetSilhouette(e,t){if((i=e.length)>0){for(var n=0,a=e[t[0]],i,o=a.length;n<o;++n){for(var s=0,l=0;s<i;++s)l+=e[s][n][1]||0;a[n][1]+=a[n][0]=-l/2}stackOffsetNone(e,t)}}function stackOffsetWiggle(e,t){if(!(!((s=e.length)>0)||!((o=(i=e[t[0]]).length)>0))){for(var n=0,a=1,i,o,s;a<o;++a){for(var l=0,c=0,u=0;l<s;++l){for(var d=e[t[l]],p=d[a][1]||0,f=d[a-1][1]||0,h=(p-f)/2,v=0;v<l;++v){var b=e[t[v]],g=b[a][1]||0,E=b[a-1][1]||0;h+=g-E}c+=p,u+=h*p}i[a-1][1]+=i[a-1][0]=n,c&&(n-=u/c)}i[a-1][1]+=i[a-1][0]=n,stackOffsetNone(e,t)}}var uniqBy$3={},uniqBy$2={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,a){const i=new Map;for(let o=0;o<n.length;o++){const s=n[o],l=a(s);i.has(l)||i.set(l,s)}return Array.from(i.values())}e.uniqBy=t})(uniqBy$2);var identity$4={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n}e.identity=t})(identity$4);var isArrayLikeObject={},isArrayLike={},isLength={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=t})(isLength);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=isLength;function n(a){return a!=null&&typeof a!="function"&&t.isLength(a.length)}e.isArrayLike=n})(isArrayLike);var isObjectLike={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="object"&&n!==null}e.isObjectLike=t})(isObjectLike);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=isArrayLike,n=isObjectLike;function a(i){return n.isObjectLike(i)&&t.isArrayLike(i)}e.isArrayLikeObject=a})(isArrayLikeObject);var iteratee={},property={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=get$2;function n(a){return function(i){return t.get(i,a)}}e.property=n})(property);var matches={},isMatch={},isMatchWith={},isObject={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=t})(isObject);var isPrimitive={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=t})(isPrimitive);var eq={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,a){return n===a||Number.isNaN(n)&&Number.isNaN(a)}e.eq=t})(eq);var hasRequiredIsMatchWith;function requireIsMatchWith(){return hasRequiredIsMatchWith||(hasRequiredIsMatchWith=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireIsMatch(),n=isObject,a=isPrimitive,i=eq;function o(p,f,h){return typeof h!="function"?t.isMatch(p,f):s(p,f,function v(b,g,E,j,w,S){const A=h(b,g,E,j,w,S);return A!==void 0?!!A:s(b,g,v,S)},new Map)}function s(p,f,h,v){if(f===p)return!0;switch(typeof f){case"object":return l(p,f,h,v);case"function":return Object.keys(f).length>0?s(p,{...f},h,v):i.eq(p,f);default:return n.isObject(p)?typeof f=="string"?f==="":!0:i.eq(p,f)}}function l(p,f,h,v){if(f==null)return!0;if(Array.isArray(f))return u(p,f,h,v);if(f instanceof Map)return c(p,f,h,v);if(f instanceof Set)return d(p,f,h,v);const b=Object.keys(f);if(p==null)return b.length===0;if(b.length===0)return!0;if(v&&v.has(f))return v.get(f)===p;v&&v.set(f,p);try{for(let g=0;g<b.length;g++){const E=b[g];if(!a.isPrimitive(p)&&!(E in p)||f[E]===void 0&&p[E]!==void 0||f[E]===null&&p[E]!==null||!h(p[E],f[E],E,p,f,v))return!1}return!0}finally{v&&v.delete(f)}}function c(p,f,h,v){if(f.size===0)return!0;if(!(p instanceof Map))return!1;for(const[b,g]of f.entries()){const E=p.get(b);if(h(E,g,b,p,f,v)===!1)return!1}return!0}function u(p,f,h,v){if(f.length===0)return!0;if(!Array.isArray(p))return!1;const b=new Set;for(let g=0;g<f.length;g++){const E=f[g];let j=!1;for(let w=0;w<p.length;w++){if(b.has(w))continue;const S=p[w];let A=!1;if(h(S,E,g,p,f,v)&&(A=!0),A){b.add(w),j=!0;break}}if(!j)return!1}return!0}function d(p,f,h,v){return f.size===0?!0:p instanceof Set?u([...p],[...f],h,v):!1}e.isMatchWith=o,e.isSetMatch=d}(isMatchWith)),isMatchWith}var hasRequiredIsMatch;function requireIsMatch(){return hasRequiredIsMatch||(hasRequiredIsMatch=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireIsMatchWith();function n(a,i){return t.isMatchWith(a,i,()=>{})}e.isMatch=n}(isMatch)),isMatch}var cloneDeep$1={},cloneDeepWith$1={},getSymbols={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Object.getOwnPropertySymbols(n).filter(a=>Object.prototype.propertyIsEnumerable.call(n,a))}e.getSymbols=t})(getSymbols);var getTag={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=t})(getTag);var tags={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",n="[object String]",a="[object Number]",i="[object Boolean]",o="[object Arguments]",s="[object Symbol]",l="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",p="[object Function]",f="[object ArrayBuffer]",h="[object Object]",v="[object Error]",b="[object DataView]",g="[object Uint8Array]",E="[object Uint8ClampedArray]",j="[object Uint16Array]",w="[object Uint32Array]",S="[object BigUint64Array]",A="[object Int8Array]",R="[object Int16Array]",_="[object Int32Array]",$="[object BigInt64Array]",C="[object Float32Array]",O="[object Float64Array]";e.argumentsTag=o,e.arrayBufferTag=f,e.arrayTag=d,e.bigInt64ArrayTag=$,e.bigUint64ArrayTag=S,e.booleanTag=i,e.dataViewTag=b,e.dateTag=l,e.errorTag=v,e.float32ArrayTag=C,e.float64ArrayTag=O,e.functionTag=p,e.int16ArrayTag=R,e.int32ArrayTag=_,e.int8ArrayTag=A,e.mapTag=c,e.numberTag=a,e.objectTag=h,e.regexpTag=t,e.setTag=u,e.stringTag=n,e.symbolTag=s,e.uint16ArrayTag=j,e.uint32ArrayTag=w,e.uint8ArrayTag=g,e.uint8ClampedArrayTag=E})(tags);var isTypedArray={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=t})(isTypedArray);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=getSymbols,n=getTag,a=tags,i=isPrimitive,o=isTypedArray;function s(d,p){return l(d,void 0,d,new Map,p)}function l(d,p,f,h=new Map,v=void 0){const b=v==null?void 0:v(d,p,f,h);if(b!=null)return b;if(i.isPrimitive(d))return d;if(h.has(d))return h.get(d);if(Array.isArray(d)){const g=new Array(d.length);h.set(d,g);for(let E=0;E<d.length;E++)g[E]=l(d[E],E,f,h,v);return Object.hasOwn(d,"index")&&(g.index=d.index),Object.hasOwn(d,"input")&&(g.input=d.input),g}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const g=new RegExp(d.source,d.flags);return g.lastIndex=d.lastIndex,g}if(d instanceof Map){const g=new Map;h.set(d,g);for(const[E,j]of d)g.set(E,l(j,E,f,h,v));return g}if(d instanceof Set){const g=new Set;h.set(d,g);for(const E of d)g.add(l(E,void 0,f,h,v));return g}if(typeof Buffer!="undefined"&&Buffer.isBuffer(d))return d.subarray();if(o.isTypedArray(d)){const g=new(Object.getPrototypeOf(d)).constructor(d.length);h.set(d,g);for(let E=0;E<d.length;E++)g[E]=l(d[E],E,f,h,v);return g}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer!="undefined"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const g=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return h.set(d,g),c(g,d,f,h,v),g}if(typeof File!="undefined"&&d instanceof File){const g=new File([d],d.name,{type:d.type});return h.set(d,g),c(g,d,f,h,v),g}if(d instanceof Blob){const g=new Blob([d],{type:d.type});return h.set(d,g),c(g,d,f,h,v),g}if(d instanceof Error){const g=new d.constructor;return h.set(d,g),g.message=d.message,g.name=d.name,g.stack=d.stack,g.cause=d.cause,c(g,d,f,h,v),g}if(typeof d=="object"&&u(d)){const g=Object.create(Object.getPrototypeOf(d));return h.set(d,g),c(g,d,f,h,v),g}return d}function c(d,p,f=d,h,v){const b=[...Object.keys(p),...t.getSymbols(p)];for(let g=0;g<b.length;g++){const E=b[g],j=Object.getOwnPropertyDescriptor(d,E);(j==null||j.writable)&&(d[E]=l(p[E],E,f,h,v))}}function u(d){switch(n.getTag(d)){case a.argumentsTag:case a.arrayTag:case a.arrayBufferTag:case a.dataViewTag:case a.booleanTag:case a.dateTag:case a.float32ArrayTag:case a.float64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.mapTag:case a.numberTag:case a.objectTag:case a.regexpTag:case a.setTag:case a.stringTag:case a.symbolTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=s,e.cloneDeepWithImpl=l,e.copyProperties=c})(cloneDeepWith$1);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cloneDeepWith$1;function n(a){return t.cloneDeepWithImpl(a,void 0,a,new Map,void 0)}e.cloneDeep=n})(cloneDeep$1);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireIsMatch(),n=cloneDeep$1;function a(i){return i=n.cloneDeep(i),o=>t.isMatch(o,i)}e.matches=a})(matches);var matchesProperty={},cloneDeep={},cloneDeepWith={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cloneDeepWith$1,n=tags;function a(i,o){return t.cloneDeepWith(i,(s,l,c,u)=>{const d=o==null?void 0:o(s,l,c,u);if(d!=null)return d;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const p=new i.constructor(i==null?void 0:i.valueOf());return t.copyProperties(p,i),p}case n.argumentsTag:{const p={};return t.copyProperties(p,i),p.length=i.length,p[Symbol.iterator]=i[Symbol.iterator],p}default:return}})}e.cloneDeepWith=a})(cloneDeepWith);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cloneDeepWith;function n(a){return t.cloneDeepWith(a)}e.cloneDeep=n})(cloneDeep);var has={},isIndex={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function n(a,i=Number.MAX_SAFE_INTEGER){switch(typeof a){case"number":return Number.isInteger(a)&&a>=0&&a<i;case"symbol":return!1;case"string":return t.test(a)}}e.isIndex=n})(isIndex);var isArguments={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=getTag;function n(a){return a!==null&&typeof a=="object"&&t.getTag(a)==="[object Arguments]"}e.isArguments=n})(isArguments);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=isDeepKey,n=isIndex,a=isArguments,i=toPath;function o(s,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&t.isDeepKey(l)&&(s==null?void 0:s[l])==null?c=i.toPath(l):c=[l],c.length===0)return!1;let u=s;for(let d=0;d<c.length;d++){const p=c[d];if((u==null||!Object.hasOwn(u,p))&&!((Array.isArray(u)||a.isArguments(u))&&n.isIndex(p)&&p<u.length))return!1;u=u[p]}return!0}e.has=o})(has);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireIsMatch(),n=toKey,a=cloneDeep,i=get$2,o=has;function s(l,c){switch(typeof l){case"object":{Object.is(l==null?void 0:l.valueOf(),-0)&&(l="-0");break}case"number":{l=n.toKey(l);break}}return c=a.cloneDeep(c),function(u){const d=i.get(u,l);return d===void 0?o.has(u,l):c===void 0?d===void 0:t.isMatch(d,c)}}e.matchesProperty=s})(matchesProperty);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=identity$4,n=property,a=matches,i=matchesProperty;function o(s){if(s==null)return t.identity;switch(typeof s){case"function":return s;case"object":return Array.isArray(s)&&s.length===2?i.matchesProperty(s[0],s[1]):a.matches(s);case"string":case"symbol":case"number":return n.property(s)}}e.iteratee=o})(iteratee);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uniqBy$2,n=identity$4,a=isArrayLikeObject,i=iteratee;function o(s,l=n.identity){return a.isArrayLikeObject(s)?t.uniqBy(Array.from(s),i.iteratee(l)):[]}e.uniqBy=o})(uniqBy$3);var uniqBy=uniqBy$3.uniqBy;const uniqBy$1=getDefaultExportFromCjs(uniqBy);function getUniqPayload(e,t,n){return t===!0?uniqBy$1(e,n):typeof t=="function"?uniqBy$1(e,t):e}var withSelector={exports:{}},withSelector_production={},shim$2={exports:{}},useSyncExternalStoreShim_production={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var React$2=reactExports;function is$2(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var objectIs$2=typeof Object.is=="function"?Object.is:is$2,useState=React$2.useState,useEffect$2=React$2.useEffect,useLayoutEffect=React$2.useLayoutEffect,useDebugValue$2=React$2.useDebugValue;function useSyncExternalStore$2(e,t){var n=t(),a=useState({inst:{value:n,getSnapshot:t}}),i=a[0].inst,o=a[1];return useLayoutEffect(function(){i.value=n,i.getSnapshot=t,checkIfSnapshotChanged(i)&&o({inst:i})},[e,n,t]),useEffect$2(function(){return checkIfSnapshotChanged(i)&&o({inst:i}),e(function(){checkIfSnapshotChanged(i)&&o({inst:i})})},[e]),useDebugValue$2(n),n}function checkIfSnapshotChanged(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!objectIs$2(e,n)}catch(a){return!0}}function useSyncExternalStore$1$1(e,t){return t()}var shim$1=typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"?useSyncExternalStore$1$1:useSyncExternalStore$2;useSyncExternalStoreShim_production.useSyncExternalStore=React$2.useSyncExternalStore!==void 0?React$2.useSyncExternalStore:shim$1;shim$2.exports=useSyncExternalStoreShim_production;var shimExports=shim$2.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var React$1=reactExports,shim=shimExports;function is$1(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var objectIs$1=typeof Object.is=="function"?Object.is:is$1,useSyncExternalStore$1=shim.useSyncExternalStore,useRef$1=React$1.useRef,useEffect$1=React$1.useEffect,useMemo$1=React$1.useMemo,useDebugValue$1=React$1.useDebugValue;withSelector_production.useSyncExternalStoreWithSelector=function(e,t,n,a,i){var o=useRef$1(null);if(o.current===null){var s={hasValue:!1,value:null};o.current=s}else s=o.current;o=useMemo$1(function(){function c(h){if(!u){if(u=!0,d=h,h=a(h),i!==void 0&&s.hasValue){var v=s.value;if(i(v,h))return p=v}return p=h}if(v=p,objectIs$1(d,h))return v;var b=a(h);return i!==void 0&&i(v,b)?(d=h,v):(d=h,p=b)}var u=!1,d,p,f=n===void 0?null:n;return[function(){return c(t())},f===null?void 0:function(){return c(f())}]},[t,n,a,i]);var l=useSyncExternalStore$1(e,o[0],o[1]);return useEffect$1(function(){s.hasValue=!0,s.value=l},[l]),useDebugValue$1(l),l};withSelector.exports=withSelector_production;var withSelectorExports=withSelector.exports,RechartsReduxContext=reactExports.createContext(null),noopDispatch=e=>e,useAppDispatch=()=>{var e=reactExports.useContext(RechartsReduxContext);return e?e.store.dispatch:noopDispatch},noop$5=()=>{},addNestedSubNoop=()=>noop$5,refEquality=(e,t)=>e===t;function useAppSelector(e){var t=reactExports.useContext(RechartsReduxContext);return withSelectorExports.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:addNestedSubNoop,t?t.store.getState:noop$5,t?t.store.getState:noop$5,t?e:noop$5,refEquality)}function assertIsFunction(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function assertIsObject(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function assertIsArrayOfFunctions(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(a=>typeof a=="function"?`function ${a.name||"unnamed"}()`:typeof a).join(", ");throw new TypeError(`${t}[${n}]`)}}var ensureIsArray=e=>Array.isArray(e)?e:[e];function getDependencies(e){const t=Array.isArray(e[0])?e[0]:e;return assertIsArrayOfFunctions(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function collectInputSelectorResults(e,t){const n=[],{length:a}=e;for(let i=0;i<a;i++)n.push(e[i].apply(null,t));return n}var StrongRef=class{constructor(e){this.value=e}deref(){return this.value}},Ref=typeof WeakRef!="undefined"?WeakRef:StrongRef,UNTERMINATED=0,TERMINATED=1;function createCacheNode(){return{s:UNTERMINATED,v:void 0,o:null,p:null}}function weakMapMemoize(e,t={}){let n=createCacheNode();const{resultEqualityCheck:a}=t;let i,o=0;function s(){var p,f;let l=n;const{length:c}=arguments;for(let h=0,v=c;h<v;h++){const b=arguments[h];if(typeof b=="function"||typeof b=="object"&&b!==null){let g=l.o;g===null&&(l.o=g=new WeakMap);const E=g.get(b);E===void 0?(l=createCacheNode(),g.set(b,l)):l=E}else{let g=l.p;g===null&&(l.p=g=new Map);const E=g.get(b);E===void 0?(l=createCacheNode(),g.set(b,l)):l=E}}const u=l;let d;if(l.s===TERMINATED)d=l.v;else if(d=e.apply(null,arguments),o++,a){const h=(f=(p=i==null?void 0:i.deref)==null?void 0:p.call(i))!=null?f:i;h!=null&&a(h,d)&&(d=h,o!==0&&o--),i=typeof d=="object"&&d!==null||typeof d=="function"?new Ref(d):d}return u.s=TERMINATED,u.v=d,d}return s.clearCache=()=>{n=createCacheNode(),s.resetResultsCount()},s.resultsCount=()=>o,s.resetResultsCount=()=>{o=0},s}function createSelectorCreator(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,a=(...i)=>{let o=0,s=0,l,c={},u=i.pop();typeof u=="object"&&(c=u,u=i.pop()),assertIsFunction(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...n,...c},{memoize:p,memoizeOptions:f=[],argsMemoize:h=weakMapMemoize,argsMemoizeOptions:v=[]}=d,b=ensureIsArray(f),g=ensureIsArray(v),E=getDependencies(i),j=p(function(){return o++,u.apply(null,arguments)},...b),w=h(function(){s++;const A=collectInputSelectorResults(E,arguments);return l=j.apply(null,A),l},...g);return Object.assign(w,{resultFunc:u,memoizedResultFunc:j,dependencies:E,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>l,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:p,argsMemoize:h})};return Object.assign(a,{withTypes:()=>a}),a}var createSelector=createSelectorCreator(weakMapMemoize),createStructuredSelector=Object.assign((e,t=createSelector)=>{assertIsObject(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),a=n.map(o=>e[o]);return t(a,(...o)=>o.reduce((s,l,c)=>(s[n[c]]=l,s),{}))},{withTypes:()=>createStructuredSelector}),sortBy$2={},orderBy={},compareValues={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return typeof a=="symbol"?1:a===null?2:a===void 0?3:a!==a?4:0}const n=(a,i,o)=>{if(a!==i){const s=t(a),l=t(i);if(s===l&&s===0){if(a<i)return o==="desc"?1:-1;if(a>i)return o==="desc"?-1:1}return o==="desc"?l-s:s-l}return 0};e.compareValues=n})(compareValues);var isKey={},isSymbol={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=t})(isSymbol);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=isSymbol,n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function i(o,s){return Array.isArray(o)?!1:typeof o=="number"||typeof o=="boolean"||o==null||t.isSymbol(o)?!0:typeof o=="string"&&(a.test(o)||!n.test(o))||s!=null&&Object.hasOwn(s,o)}e.isKey=i})(isKey);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=compareValues,n=isKey,a=toPath;function i(o,s,l,c){if(o==null)return[];l=c?void 0:l,Array.isArray(o)||(o=Object.values(o)),Array.isArray(s)||(s=s==null?[null]:[s]),s.length===0&&(s=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(h=>String(h));const u=(h,v)=>{let b=h;for(let g=0;g<v.length&&b!=null;++g)b=b[v[g]];return b},d=(h,v)=>v==null||h==null?v:typeof h=="object"&&"key"in h?Object.hasOwn(v,h.key)?v[h.key]:u(v,h.path):typeof h=="function"?h(v):Array.isArray(h)?u(v,h):typeof v=="object"?v[h]:v,p=s.map(h=>(Array.isArray(h)&&h.length===1&&(h=h[0]),h==null||typeof h=="function"||Array.isArray(h)||n.isKey(h)?h:{key:h,path:a.toPath(h)}));return o.map(h=>({original:h,criteria:p.map(v=>d(v,h))})).slice().sort((h,v)=>{for(let b=0;b<p.length;b++){const g=t.compareValues(h.criteria[b],v.criteria[b],l[b]);if(g!==0)return g}return 0}).map(h=>h.original)}e.orderBy=i})(orderBy);var flatten={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,a=1){const i=[],o=Math.floor(a),s=(l,c)=>{for(let u=0;u<l.length;u++){const d=l[u];Array.isArray(d)&&c<o?s(d,c+1):i.push(d)}};return s(n,0),i}e.flatten=t})(flatten);var isIterateeCall={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=isIndex,n=isArrayLike,a=isObject,i=eq;function o(s,l,c){return a.isObject(c)&&(typeof l=="number"&&n.isArrayLike(c)&&t.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?i.eq(c[l],s):!1}e.isIterateeCall=o})(isIterateeCall);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=orderBy,n=flatten,a=isIterateeCall;function i(o,...s){const l=s.length;return l>1&&a.isIterateeCall(o,s[0],s[1])?s=[]:l>2&&a.isIterateeCall(s[0],s[1],s[2])&&(s=[s[0]]),t.orderBy(o,n.flatten(s),["asc"])}e.sortBy=i})(sortBy$2);var sortBy=sortBy$2.sortBy;const sortBy$1=getDefaultExportFromCjs(sortBy);var selectLegendSettings=e=>e.legend.settings,selectLegendSize=e=>e.legend.size,selectAllLegendPayload2DArray=e=>e.legend.payload;createSelector([selectAllLegendPayload2DArray,selectLegendSettings],(e,t)=>{var{itemSorter:n}=t,a=e.flat(1);return n?sortBy$1(a,n):a});var EPS$1=1;function useElementOffset(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,n]=reactExports.useState({height:0,left:0,top:0,width:0}),a=reactExports.useCallback(i=>{if(i!=null){var o=i.getBoundingClientRect(),s={height:o.height,left:o.left,top:o.top,width:o.width};(Math.abs(s.height-t.height)>EPS$1||Math.abs(s.left-t.left)>EPS$1||Math.abs(s.top-t.top)>EPS$1||Math.abs(s.width-t.width)>EPS$1)&&n({height:s.height,left:s.left,top:s.top,width:s.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,a]}function formatProdErrorMessage$1(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var $$observable=typeof Symbol=="function"&&Symbol.observable||"@@observable",symbol_observable_default=$$observable,randomString=()=>Math.random().toString(36).substring(7).split("").join("."),ActionTypes={INIT:`@@redux/INIT${randomString()}`,REPLACE:`@@redux/REPLACE${randomString()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${randomString()}`},actionTypes_default=ActionTypes;function isPlainObject$1(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function createStore(e,t,n){if(typeof e!="function")throw new Error(formatProdErrorMessage$1(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(formatProdErrorMessage$1(0));if(typeof t=="function"&&typeof n=="undefined"&&(n=t,t=void 0),typeof n!="undefined"){if(typeof n!="function")throw new Error(formatProdErrorMessage$1(1));return n(createStore)(e,t)}let a=e,i=t,o=new Map,s=o,l=0,c=!1;function u(){s===o&&(s=new Map,o.forEach((g,E)=>{s.set(E,g)}))}function d(){if(c)throw new Error(formatProdErrorMessage$1(3));return i}function p(g){if(typeof g!="function")throw new Error(formatProdErrorMessage$1(4));if(c)throw new Error(formatProdErrorMessage$1(5));let E=!0;u();const j=l++;return s.set(j,g),function(){if(E){if(c)throw new Error(formatProdErrorMessage$1(6));E=!1,u(),s.delete(j),o=null}}}function f(g){if(!isPlainObject$1(g))throw new Error(formatProdErrorMessage$1(7));if(typeof g.type=="undefined")throw new Error(formatProdErrorMessage$1(8));if(typeof g.type!="string")throw new Error(formatProdErrorMessage$1(17));if(c)throw new Error(formatProdErrorMessage$1(9));try{c=!0,i=a(i,g)}finally{c=!1}return(o=s).forEach(j=>{j()}),g}function h(g){if(typeof g!="function")throw new Error(formatProdErrorMessage$1(10));a=g,f({type:actionTypes_default.REPLACE})}function v(){const g=p;return{subscribe(E){if(typeof E!="object"||E===null)throw new Error(formatProdErrorMessage$1(11));function j(){const S=E;S.next&&S.next(d())}return j(),{unsubscribe:g(j)}},[symbol_observable_default](){return this}}}return f({type:actionTypes_default.INIT}),{dispatch:f,subscribe:p,getState:d,replaceReducer:h,[symbol_observable_default]:v}}function assertReducerShape(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:actionTypes_default.INIT})=="undefined")throw new Error(formatProdErrorMessage$1(12));if(typeof n(void 0,{type:actionTypes_default.PROBE_UNKNOWN_ACTION()})=="undefined")throw new Error(formatProdErrorMessage$1(13))})}function combineReducers(e){const t=Object.keys(e),n={};for(let o=0;o<t.length;o++){const s=t[o];typeof e[s]=="function"&&(n[s]=e[s])}const a=Object.keys(n);let i;try{assertReducerShape(n)}catch(o){i=o}return function(s={},l){if(i)throw i;let c=!1;const u={};for(let d=0;d<a.length;d++){const p=a[d],f=n[p],h=s[p],v=f(h,l);if(typeof v=="undefined")throw l&&l.type,new Error(formatProdErrorMessage$1(14));u[p]=v,c=c||v!==h}return c=c||a.length!==Object.keys(s).length,c?u:s}}function compose$1(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...a)=>t(n(...a)))}function applyMiddleware(...e){return t=>(n,a)=>{const i=t(n,a);let o=()=>{throw new Error(formatProdErrorMessage$1(15))};const s={getState:i.getState,dispatch:(c,...u)=>o(c,...u)},l=e.map(c=>c(s));return o=compose$1(...l)(i.dispatch),{...i,dispatch:o}}}function isAction(e){return isPlainObject$1(e)&&"type"in e&&typeof e.type=="string"}function createThunkMiddleware(e){return({dispatch:n,getState:a})=>i=>o=>typeof o=="function"?o(n,a,e):i(o)}var thunk=createThunkMiddleware(),withExtraArgument=createThunkMiddleware,composeWithDevTools=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?compose$1:compose$1.apply(null,arguments)};function createAction(e,t){function n(...a){if(t){let i=t(...a);if(!i)throw new Error(formatProdErrorMessage(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:a[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=a=>isAction(a)&&a.type===e,n}var Tuple=class Se extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Se.prototype)}static get[Symbol.species](){return Se}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Se(...t[0].concat(this)):new Se(...t.concat(this))}};function freezeDraftable(e){return isDraftable(e)?produce(e,()=>{}):e}function getOrInsertComputed(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function isBoolean(e){return typeof e=="boolean"}var buildGetDefaultMiddleware=()=>function(t){const{thunk:n=!0,immutableCheck:a=!0,serializableCheck:i=!0,actionCreatorCheck:o=!0}=t!=null?t:{};let s=new Tuple;return n&&(isBoolean(n)?s.push(thunk):s.push(withExtraArgument(n.extraArgument))),s},SHOULD_AUTOBATCH="RTK_autoBatch",createQueueWithTimer=e=>t=>{setTimeout(t,e)},autoBatchEnhancer=(e={type:"raf"})=>t=>(...n)=>{const a=t(...n);let i=!0,o=!1,s=!1;const l=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window!="undefined"&&window.requestAnimationFrame?window.requestAnimationFrame:createQueueWithTimer(10):e.type==="callback"?e.queueNotification:createQueueWithTimer(e.timeout),u=()=>{s=!1,o&&(o=!1,l.forEach(d=>d()))};return Object.assign({},a,{subscribe(d){const p=()=>i&&d(),f=a.subscribe(p);return l.add(d),()=>{f(),l.delete(d)}},dispatch(d){var p;try{return i=!((p=d==null?void 0:d.meta)!=null&&p[SHOULD_AUTOBATCH]),o=!i,o&&(s||(s=!0,c(u))),a.dispatch(d)}finally{i=!0}}})},buildGetDefaultEnhancers=e=>function(n){const{autoBatch:a=!0}=n!=null?n:{};let i=new Tuple(e);return a&&i.push(autoBatchEnhancer(typeof a=="object"?a:void 0)),i};function configureStore(e){const t=buildGetDefaultMiddleware(),{reducer:n=void 0,middleware:a,devTools:i=!0,preloadedState:o=void 0,enhancers:s=void 0}=e||{};let l;if(typeof n=="function")l=n;else if(isPlainObject$1(n))l=combineReducers(n);else throw new Error(formatProdErrorMessage(1));let c;typeof a=="function"?c=a(t):c=t();let u=compose$1;i&&(u=composeWithDevTools({trace:!1,...typeof i=="object"&&i}));const d=applyMiddleware(...c),p=buildGetDefaultEnhancers(d);let f=typeof s=="function"?s(p):p();const h=u(...f);return createStore(l,o,h)}function executeReducerBuilderCallback(e){const t={},n=[];let a;const i={addCase(o,s){const l=typeof o=="string"?o:o.type;if(!l)throw new Error(formatProdErrorMessage(28));if(l in t)throw new Error(formatProdErrorMessage(29));return t[l]=s,i},addMatcher(o,s){return n.push({matcher:o,reducer:s}),i},addDefaultCase(o){return a=o,i}};return e(i),[t,n,a]}function isStateFunction(e){return typeof e=="function"}function createReducer(e,t){let[n,a,i]=executeReducerBuilderCallback(t),o;if(isStateFunction(e))o=()=>freezeDraftable(e());else{const l=freezeDraftable(e);o=()=>l}function s(l=o(),c){let u=[n[c.type],...a.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[i]),u.reduce((d,p)=>{if(p)if(isDraft(d)){const h=p(d,c);return h===void 0?d:h}else{if(isDraftable(d))return produce(d,f=>p(f,c));{const f=p(d,c);if(f===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return f}}return d},l)}return s.getInitialState=o,s}var urlAlphabet="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",nanoid=(e=21)=>{let t="",n=e;for(;n--;)t+=urlAlphabet[Math.random()*64|0];return t},asyncThunkSymbol=Symbol.for("rtk-slice-createasyncthunk");function getType(e,t){return`${e}/${t}`}function buildCreateSlice({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[asyncThunkSymbol];return function(i){const{name:o,reducerPath:s=o}=i;if(!o)throw new Error(formatProdErrorMessage(11));const l=(typeof i.reducers=="function"?i.reducers(buildReducerCreators()):i.reducers)||{},c=Object.keys(l),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(S,A){const R=typeof S=="string"?S:S.type;if(!R)throw new Error(formatProdErrorMessage(12));if(R in u.sliceCaseReducersByType)throw new Error(formatProdErrorMessage(13));return u.sliceCaseReducersByType[R]=A,d},addMatcher(S,A){return u.sliceMatchers.push({matcher:S,reducer:A}),d},exposeAction(S,A){return u.actionCreators[S]=A,d},exposeCaseReducer(S,A){return u.sliceCaseReducersByName[S]=A,d}};c.forEach(S=>{const A=l[S],R={reducerName:S,type:getType(o,S),createNotation:typeof i.reducers=="function"};isAsyncThunkSliceReducerDefinition(A)?handleThunkCaseReducerDefinition(R,A,d,t):handleNormalReducerDefinition(R,A,d)});function p(){const[S={},A=[],R=void 0]=typeof i.extraReducers=="function"?executeReducerBuilderCallback(i.extraReducers):[i.extraReducers],_={...S,...u.sliceCaseReducersByType};return createReducer(i.initialState,$=>{for(let C in _)$.addCase(C,_[C]);for(let C of u.sliceMatchers)$.addMatcher(C.matcher,C.reducer);for(let C of A)$.addMatcher(C.matcher,C.reducer);R&&$.addDefaultCase(R)})}const f=S=>S,h=new Map,v=new WeakMap;let b;function g(S,A){return b||(b=p()),b(S,A)}function E(){return b||(b=p()),b.getInitialState()}function j(S,A=!1){function R($){let C=$[S];return typeof C=="undefined"&&A&&(C=getOrInsertComputed(v,R,E)),C}function _($=f){const C=getOrInsertComputed(h,A,()=>new WeakMap);return getOrInsertComputed(C,$,()=>{var N;const O={};for(const[T,L]of Object.entries((N=i.selectors)!=null?N:{}))O[T]=wrapSelector(L,$,()=>getOrInsertComputed(v,$,E),A);return O})}return{reducerPath:S,getSelectors:_,get selectors(){return _(R)},selectSlice:R}}const w={name:o,reducer:g,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:E,...j(s),injectInto(S,{reducerPath:A,...R}={}){const _=A!=null?A:s;return S.inject({reducerPath:_,reducer:g},R),{...w,...j(_,!0)}}};return w}}function wrapSelector(e,t,n,a){function i(o,...s){let l=t(o);return typeof l=="undefined"&&a&&(l=n()),e(l,...s)}return i.unwrapped=e,i}var createSlice=buildCreateSlice();function buildReducerCreators(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function handleNormalReducerDefinition({type:e,reducerName:t,createNotation:n},a,i){let o,s;if("reducer"in a){if(n&&!isCaseReducerWithPrepareDefinition(a))throw new Error(formatProdErrorMessage(17));o=a.reducer,s=a.prepare}else o=a;i.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,s?createAction(e,s):createAction(e))}function isAsyncThunkSliceReducerDefinition(e){return e._reducerDefinitionType==="asyncThunk"}function isCaseReducerWithPrepareDefinition(e){return e._reducerDefinitionType==="reducerWithPrepare"}function handleThunkCaseReducerDefinition({type:e,reducerName:t},n,a,i){if(!i)throw new Error(formatProdErrorMessage(18));const{payloadCreator:o,fulfilled:s,pending:l,rejected:c,settled:u,options:d}=n,p=i(e,o,d);a.exposeAction(t,p),s&&a.addCase(p.fulfilled,s),l&&a.addCase(p.pending,l),c&&a.addCase(p.rejected,c),u&&a.addMatcher(p.settled,u),a.exposeCaseReducer(t,{fulfilled:s||noop$4,pending:l||noop$4,rejected:c||noop$4,settled:u||noop$4})}function noop$4(){}var task="task",listener="listener",completed="completed",cancelled="cancelled",taskCancelled=`task-${cancelled}`,taskCompleted=`task-${completed}`,listenerCancelled=`${listener}-${cancelled}`,listenerCompleted=`${listener}-${completed}`,TaskAbortError=class{constructor(e){fe(this,"name","TaskAbortError");fe(this,"message");this.code=e,this.message=`${task} ${cancelled} (reason: ${e})`}},assertFunction=(e,t)=>{if(typeof e!="function")throw new TypeError(formatProdErrorMessage(32))},noop2=()=>{},catchRejection=(e,t=noop2)=>(e.catch(t),e),addAbortSignalListener=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),abortControllerWithReason=(e,t)=>{const n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},validateActive=e=>{if(e.aborted){const{reason:t}=e;throw new TaskAbortError(t)}};function raceWithSignal(e,t){let n=noop2;return new Promise((a,i)=>{const o=()=>i(new TaskAbortError(e.reason));if(e.aborted){o();return}n=addAbortSignalListener(e,o),t.finally(()=>n()).then(a,i)}).finally(()=>{n=noop2})}var runTask=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof TaskAbortError?"cancelled":"rejected",error:n}}finally{t==null||t()}},createPause=e=>t=>catchRejection(raceWithSignal(e,t).then(n=>(validateActive(e),n))),createDelay=e=>{const t=createPause(e);return n=>t(new Promise(a=>setTimeout(a,n)))},{assign}=Object,INTERNAL_NIL_TOKEN={},alm="listenerMiddleware",createFork=(e,t)=>{const n=a=>addAbortSignalListener(e,()=>abortControllerWithReason(a,e.reason));return(a,i)=>{assertFunction(a);const o=new AbortController;n(o);const s=runTask(async()=>{validateActive(e),validateActive(o.signal);const l=await a({pause:createPause(o.signal),delay:createDelay(o.signal),signal:o.signal});return validateActive(o.signal),l},()=>abortControllerWithReason(o,taskCompleted));return i!=null&&i.autoJoin&&t.push(s.catch(noop2)),{result:createPause(e)(s),cancel(){abortControllerWithReason(o,taskCancelled)}}}},createTakePattern=(e,t)=>{const n=async(a,i)=>{validateActive(t);let o=()=>{};const l=[new Promise((c,u)=>{let d=e({predicate:a,effect:(p,f)=>{f.unsubscribe(),c([p,f.getState(),f.getOriginalState()])}});o=()=>{d(),u()}})];i!=null&&l.push(new Promise(c=>setTimeout(c,i,null)));try{const c=await raceWithSignal(t,Promise.race(l));return validateActive(t),c}finally{o()}};return(a,i)=>catchRejection(n(a,i))},getListenerEntryPropsFrom=e=>{let{type:t,actionCreator:n,matcher:a,predicate:i,effect:o}=e;if(t)i=createAction(t).match;else if(n)t=n.type,i=n.match;else if(a)i=a;else if(!i)throw new Error(formatProdErrorMessage(21));return assertFunction(o),{predicate:i,type:t,effect:o}},createListenerEntry=assign(e=>{const{type:t,predicate:n,effect:a}=getListenerEntryPropsFrom(e);return{id:nanoid(),effect:a,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(formatProdErrorMessage(22))}}},{withTypes:()=>createListenerEntry}),findListenerEntry=(e,t)=>{const{type:n,effect:a,predicate:i}=getListenerEntryPropsFrom(t);return Array.from(e.values()).find(o=>(typeof n=="string"?o.type===n:o.predicate===i)&&o.effect===a)},cancelActiveListeners=e=>{e.pending.forEach(t=>{abortControllerWithReason(t,listenerCancelled)})},createClearListenerMiddleware=e=>()=>{e.forEach(cancelActiveListeners),e.clear()},safelyNotifyError=(e,t,n)=>{try{e(t,n)}catch(a){setTimeout(()=>{throw a},0)}},addListener=assign(createAction(`${alm}/add`),{withTypes:()=>addListener}),clearAllListeners=createAction(`${alm}/removeAll`),removeListener=assign(createAction(`${alm}/remove`),{withTypes:()=>removeListener}),defaultErrorHandler=(...e)=>{console.error(`${alm}/error`,...e)},createListenerMiddleware=(e={})=>{const t=new Map,{extra:n,onError:a=defaultErrorHandler}=e;assertFunction(a);const i=d=>(d.unsubscribe=()=>t.delete(d.id),t.set(d.id,d),p=>{d.unsubscribe(),p!=null&&p.cancelActive&&cancelActiveListeners(d)}),o=d=>{var f;const p=(f=findListenerEntry(t,d))!=null?f:createListenerEntry(d);return i(p)};assign(o,{withTypes:()=>o});const s=d=>{const p=findListenerEntry(t,d);return p&&(p.unsubscribe(),d.cancelActive&&cancelActiveListeners(p)),!!p};assign(s,{withTypes:()=>s});const l=async(d,p,f,h)=>{const v=new AbortController,b=createTakePattern(o,v.signal),g=[];try{d.pending.add(v),await Promise.resolve(d.effect(p,assign({},f,{getOriginalState:h,condition:(E,j)=>b(E,j).then(Boolean),take:b,delay:createDelay(v.signal),pause:createPause(v.signal),extra:n,signal:v.signal,fork:createFork(v.signal,g),unsubscribe:d.unsubscribe,subscribe:()=>{t.set(d.id,d)},cancelActiveListeners:()=>{d.pending.forEach((E,j,w)=>{E!==v&&(abortControllerWithReason(E,listenerCancelled),w.delete(E))})},cancel:()=>{abortControllerWithReason(v,listenerCancelled),d.pending.delete(v)},throwIfCancelled:()=>{validateActive(v.signal)}})))}catch(E){E instanceof TaskAbortError||safelyNotifyError(a,E,{raisedBy:"effect"})}finally{await Promise.all(g),abortControllerWithReason(v,listenerCompleted),d.pending.delete(v)}},c=createClearListenerMiddleware(t);return{middleware:d=>p=>f=>{if(!isAction(f))return p(f);if(addListener.match(f))return o(f.payload);if(clearAllListeners.match(f)){c();return}if(removeListener.match(f))return s(f.payload);let h=d.getState();const v=()=>{if(h===INTERNAL_NIL_TOKEN)throw new Error(formatProdErrorMessage(23));return h};let b;try{if(b=p(f),t.size>0){const g=d.getState(),E=Array.from(t.values());for(const j of E){let w=!1;try{w=j.predicate(f,g,h)}catch(S){w=!1,safelyNotifyError(a,S,{raisedBy:"predicate"})}w&&l(j,f,d,v)}}}finally{h=INTERNAL_NIL_TOKEN}return b},startListening:o,stopListening:s,clearListeners:c}};function formatProdErrorMessage(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var initialState$9={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},chartLayoutSlice=createSlice({name:"chartLayout",initialState:initialState$9,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin,setLayout,setChartSize,setScale}=chartLayoutSlice.actions,chartLayoutReducer=chartLayoutSlice.reducer;function ownKeys$s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function _objectSpread$s(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$s(Object(n),!0).forEach(function(a){_defineProperty$w(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$s(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function _defineProperty$w(e,t,n){return(t=_toPropertyKey$w(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$w(e){var t=_toPrimitive$w(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$w(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var RADIAN=Math.PI/180,radianToDegree=e=>e*180/Math.PI,polarToCartesian=(e,t,n,a)=>({x:e+Math.cos(-RADIAN*a)*n,y:t+Math.sin(-RADIAN*a)*n}),getMaxRadius=function e(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(a.left||0)-(a.right||0)),Math.abs(n-(a.top||0)-(a.bottom||0)))/2},distanceBetweenPoints=(e,t)=>{var{x:n,y:a}=e,{x:i,y:o}=t;return Math.sqrt((n-i)**2+(a-o)**2)},getAngleOfPoint=(e,t)=>{var{x:n,y:a}=e,{cx:i,cy:o}=t,s=distanceBetweenPoints({x:n,y:a},{x:i,y:o});if(s<=0)return{radius:s,angle:0};var l=(n-i)/s,c=Math.acos(l);return a>o&&(c=2*Math.PI-c),{radius:s,angle:radianToDegree(c),angleInRadian:c}},formatAngleOfSector=e=>{var{startAngle:t,endAngle:n}=e,a=Math.floor(t/360),i=Math.floor(n/360),o=Math.min(a,i);return{startAngle:t-o*360,endAngle:n-o*360}},reverseFormatAngleOfSector=(e,t)=>{var{startAngle:n,endAngle:a}=t,i=Math.floor(n/360),o=Math.floor(a/360),s=Math.min(i,o);return e+s*360},inRangeOfSector=(e,t)=>{var{x:n,y:a}=e,{radius:i,angle:o}=getAngleOfPoint({x:n,y:a},t),{innerRadius:s,outerRadius:l}=t;if(i<s||i>l||i===0)return null;var{startAngle:c,endAngle:u}=formatAngleOfSector(t),d=o,p;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;p=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;p=d>=u&&d<=c}return p?_objectSpread$s(_objectSpread$s({},t),{},{radius:i,angle:reverseFormatAngleOfSector(d,t)}):null};function ownKeys$r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function _objectSpread$r(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$r(Object(n),!0).forEach(function(a){_defineProperty$v(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$r(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function _defineProperty$v(e,t,n){return(t=_toPropertyKey$v(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$v(e){var t=_toPrimitive$v(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$v(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function getValueByDataKey(e,t,n){return isNullish(e)||isNullish(t)?n:isNumOrStr(t)?get$1(e,t,n):typeof t=="function"?t(e):n}var calculateActiveTickIndex=(e,t,n,a,i)=>{var o,s=-1,l=(o=t==null?void 0:t.length)!==null&&o!==void 0?o:0;if(l<=1||e==null)return 0;if(a==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var c=0;c<l;c++){var u=c>0?n[c-1].coordinate:n[l-1].coordinate,d=n[c].coordinate,p=c>=l-1?n[0].coordinate:n[c+1].coordinate,f=void 0;if(mathSign(d-u)!==mathSign(p-d)){var h=[];if(mathSign(p-d)===mathSign(i[1]-i[0])){f=p;var v=d+i[1]-i[0];h[0]=Math.min(v,(v+u)/2),h[1]=Math.max(v,(v+u)/2)}else{f=u;var b=p+i[1]-i[0];h[0]=Math.min(d,(b+d)/2),h[1]=Math.max(d,(b+d)/2)}var g=[Math.min(d,(f+d)/2),Math.max(d,(f+d)/2)];if(e>g[0]&&e<=g[1]||e>=h[0]&&e<=h[1]){({index:s}=n[c]);break}}else{var E=Math.min(u,p),j=Math.max(u,p);if(e>(E+d)/2&&e<=(j+d)/2){({index:s}=n[c]);break}}}else if(t){for(var w=0;w<l;w++)if(w===0&&e<=(t[w].coordinate+t[w+1].coordinate)/2||w>0&&w<l-1&&e>(t[w].coordinate+t[w-1].coordinate)/2&&e<=(t[w].coordinate+t[w+1].coordinate)/2||w===l-1&&e>(t[w].coordinate+t[w-1].coordinate)/2){({index:s}=t[w]);break}}return s},appendOffsetOfLegend=(e,t,n)=>{if(t&&n){var{width:a,height:i}=n,{align:o,verticalAlign:s,layout:l}=t;if((l==="vertical"||l==="horizontal"&&s==="middle")&&o!=="center"&&isNumber(e[o]))return _objectSpread$r(_objectSpread$r({},e),{},{[o]:e[o]+(a||0)});if((l==="horizontal"||l==="vertical"&&o==="center")&&s!=="middle"&&isNumber(e[s]))return _objectSpread$r(_objectSpread$r({},e),{},{[s]:e[s]+(i||0)})}return e},isCategoricalAxis=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",getCoordinatesOfGrid=(e,t,n,a)=>{if(a)return e.map(l=>l.coordinate);var i,o,s=e.map(l=>(l.coordinate===t&&(i=!0),l.coordinate===n&&(o=!0),l.coordinate));return i||s.push(t),o||s.push(n),s},getTicksOfAxis=(e,t,n)=>{if(!e)return null;var{duplicateDomain:a,type:i,range:o,scale:s,realScaleType:l,isCategorical:c,categoricalDomain:u,tickCount:d,ticks:p,niceTicks:f,axisType:h}=e;if(!s)return null;var v=l==="scaleBand"&&s.bandwidth?s.bandwidth()/2:2,b=i==="category"&&s.bandwidth?s.bandwidth()/v:0;if(b=h==="angleAxis"&&o&&o.length>=2?mathSign(o[0]-o[1])*2*b:b,p||f){var g=(p||f||[]).map((E,j)=>{var w=a?a.indexOf(E):E;return{coordinate:s(w)+b,value:E,offset:b,index:j}});return g.filter(E=>!isNan(E.coordinate))}return c&&u?u.map((E,j)=>({coordinate:s(E)+b,value:E,index:j,offset:b})):s.ticks&&d!=null?s.ticks(d).map((E,j)=>({coordinate:s(E)+b,value:E,offset:b,index:j})):s.domain().map((E,j)=>({coordinate:s(E)+b,value:a?a[E]:E,index:j,offset:b}))},EPS=1e-4,checkDomainOfScale=e=>{var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,a=e.range(),i=Math.min(a[0],a[1])-EPS,o=Math.max(a[0],a[1])+EPS,s=e(t[0]),l=e(t[n-1]);(s<i||s>o||l<i||l>o)&&e.domain([t[0],t[n-1]])}},offsetSign=e=>{var t=e.length;if(!(t<=0))for(var n=0,a=e[0].length;n<a;++n)for(var i=0,o=0,s=0;s<t;++s){var l=isNan(e[s][n][1])?e[s][n][0]:e[s][n][1];l>=0?(e[s][n][0]=i,e[s][n][1]=i+l,i=e[s][n][1]):(e[s][n][0]=o,e[s][n][1]=o+l,o=e[s][n][1])}},offsetPositive=e=>{var t=e.length;if(!(t<=0))for(var n=0,a=e[0].length;n<a;++n)for(var i=0,o=0;o<t;++o){var s=isNan(e[o][n][1])?e[o][n][0]:e[o][n][1];s>=0?(e[o][n][0]=i,e[o][n][1]=i+s,i=e[o][n][1]):(e[o][n][0]=0,e[o][n][1]=0)}},STACK_OFFSET_MAP={sign:offsetSign,expand:stackOffsetExpand,none:stackOffsetNone,silhouette:stackOffsetSilhouette,wiggle:stackOffsetWiggle,positive:offsetPositive},getStackedData=(e,t,n)=>{var a=STACK_OFFSET_MAP[n],i=shapeStack().keys(t).value((o,s)=>+getValueByDataKey(o,s,0)).order(stackOrderNone).offset(a);return i(e)};function getNormalizedStackId(e){return e==null?void 0:String(e)}function getCateCoordinateOfLine(e){var{axis:t,ticks:n,bandSize:a,entry:i,index:o,dataKey:s}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!isNullish(i[t.dataKey])){var l=findEntryInArray(n,"value",i[t.dataKey]);if(l)return l.coordinate+a/2}return n[o]?n[o].coordinate+a/2:null}var c=getValueByDataKey(i,isNullish(s)?t.dataKey:s);return isNullish(c)?null:t.scale(c)}var getDomainOfSingle=e=>{var t=e.flat(2).filter(isNumber);return[Math.min(...t),Math.max(...t)]},makeDomainFinite=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],getDomainOfStackGroups=(e,t,n)=>{if(e!=null)return makeDomainFinite(Object.keys(e).reduce((a,i)=>{var o=e[i],{stackedData:s}=o,l=s.reduce((c,u)=>{var d=getDomainOfSingle(u.slice(t,n+1));return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);return[Math.min(l[0],a[0]),Math.max(l[1],a[1])]},[1/0,-1/0]))},MIN_VALUE_REG=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,MAX_VALUE_REG=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,getBandSizeOfAxis=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var a=e.scale.bandwidth();if(!n||a>0)return a}if(e&&t&&t.length>=2){for(var i=sortBy$1(t,d=>d.coordinate),o=1/0,s=1,l=i.length;s<l;s++){var c=i[s],u=i[s-1];o=Math.min((c.coordinate||0)-(u.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0};function getTooltipEntry(e){var{tooltipEntrySettings:t,dataKey:n,payload:a,value:i,name:o}=e;return _objectSpread$r(_objectSpread$r({},t),{},{dataKey:n,payload:a,value:i,name:o})}function getTooltipNameProp(e,t){if(e)return String(e);if(typeof t=="string")return t}function inRange(e,t,n,a,i){if(n==="horizontal"||n==="vertical"){var o=e>=i.left&&e<=i.left+i.width&&t>=i.top&&t<=i.top+i.height;return o?{x:e,y:t}:null}return a?inRangeOfSector({x:e,y:t},a):null}var getActiveCoordinate=(e,t,n,a)=>{var i=t.find(u=>u&&u.index===n);if(i){if(e==="horizontal")return{x:i.coordinate,y:a.y};if(e==="vertical")return{x:a.x,y:i.coordinate};if(e==="centric"){var o=i.coordinate,{radius:s}=a;return _objectSpread$r(_objectSpread$r(_objectSpread$r({},a),polarToCartesian(a.cx,a.cy,s,o)),{},{angle:o,radius:s})}var l=i.coordinate,{angle:c}=a;return _objectSpread$r(_objectSpread$r(_objectSpread$r({},a),polarToCartesian(a.cx,a.cy,l,c)),{},{angle:c,radius:l})}return{x:0,y:0}},calculateTooltipPos=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,selectChartWidth=e=>e.layout.width,selectChartHeight=e=>e.layout.height,selectContainerScale=e=>e.layout.scale,selectMargin=e=>e.layout.margin,selectAllXAxes=createSelector(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),selectAllYAxes=createSelector(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),DATA_ITEM_INDEX_ATTRIBUTE_NAME="data-recharts-item-index",DATA_ITEM_DATAKEY_ATTRIBUTE_NAME="data-recharts-item-data-key",DEFAULT_Y_AXIS_WIDTH=60;function ownKeys$q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function _objectSpread$q(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$q(Object(n),!0).forEach(function(a){_defineProperty$u(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$q(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function _defineProperty$u(e,t,n){return(t=_toPropertyKey$u(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$u(e){var t=_toPrimitive$u(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$u(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var selectBrushHeight=e=>e.brush.height,selectChartOffsetInternal=createSelector([selectChartWidth,selectChartHeight,selectMargin,selectBrushHeight,selectAllXAxes,selectAllYAxes,selectLegendSettings,selectLegendSize],(e,t,n,a,i,o,s,l)=>{var c=o.reduce((v,b)=>{var{orientation:g}=b;if(!b.mirror&&!b.hide){var E=typeof b.width=="number"?b.width:DEFAULT_Y_AXIS_WIDTH;return _objectSpread$q(_objectSpread$q({},v),{},{[g]:v[g]+E})}return v},{left:n.left||0,right:n.right||0}),u=i.reduce((v,b)=>{var{orientation:g}=b;return!b.mirror&&!b.hide?_objectSpread$q(_objectSpread$q({},v),{},{[g]:get$1(v,"".concat(g))+b.height}):v},{top:n.top||0,bottom:n.bottom||0}),d=_objectSpread$q(_objectSpread$q({},u),c),p=d.bottom;d.bottom+=a,d=appendOffsetOfLegend(d,s,l);var f=e-d.left-d.right,h=t-d.top-d.bottom;return _objectSpread$q(_objectSpread$q({brushBottom:p},d),{},{width:Math.max(f,0),height:Math.max(h,0)})}),selectChartViewBox=createSelector(selectChartOffsetInternal,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),selectAxisViewBox=createSelector(selectChartWidth,selectChartHeight,(e,t)=>({x:0,y:0,width:e,height:t})),PanoramaContext=reactExports.createContext(null),useIsPanorama=()=>reactExports.useContext(PanoramaContext)!=null,selectBrushSettings=e=>e.brush,selectBrushDimensions=createSelector([selectBrushSettings,selectChartOffsetInternal,selectMargin],(e,t,n)=>({height:e.height,x:isNumber(e.x)?e.x:t.left,y:isNumber(e.y)?e.y:t.top+t.height+t.brushBottom-((n==null?void 0:n.bottom)||0),width:isNumber(e.width)?e.width:t.width})),useViewBox=()=>{var e,t=useIsPanorama(),n=useAppSelector(selectChartViewBox),a=useAppSelector(selectBrushDimensions),i=(e=useAppSelector(selectBrushSettings))===null||e===void 0?void 0:e.padding;return!t||!a||!i?n:{width:a.width-i.left-i.right,height:a.height-i.top-i.bottom,x:i.left,y:i.top}},manyComponentsThrowErrorsIfOffsetIsUndefined={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},useOffsetInternal=()=>{var e;return(e=useAppSelector(selectChartOffsetInternal))!==null&&e!==void 0?e:manyComponentsThrowErrorsIfOffsetIsUndefined},useChartWidth=()=>useAppSelector(selectChartWidth),useChartHeight=()=>useAppSelector(selectChartHeight),selectChartLayout=e=>e.layout.layoutType,useChartLayout=()=>useAppSelector(selectChartLayout),initialState$8={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},legendSlice=createSlice({name:"legend",initialState:initialState$8,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var n=current(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)}}}),{setLegendSize,setLegendSettings,addLegendPayload,removeLegendPayload}=legendSlice.actions,legendReducer=legendSlice.reducer;function _extends$i(){return _extends$i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},_extends$i.apply(null,arguments)}function ownKeys$p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function _objectSpread$p(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$p(Object(n),!0).forEach(function(a){_defineProperty$t(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$p(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function _defineProperty$t(e,t,n){return(t=_toPropertyKey$t(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$t(e){var t=_toPrimitive$t(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$t(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function defaultFormatter(e){return Array.isArray(e)&&isNumOrStr(e[0])&&isNumOrStr(e[1])?e.join(" ~ "):e}var DefaultTooltipContent=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:a={},labelStyle:i={},payload:o,formatter:s,itemSorter:l,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:p,accessibilityLayer:f=!1}=e,h=()=>{if(o&&o.length){var A={padding:0,margin:0},R=(l?sortBy$1(o,l):o).map((_,$)=>{if(_.type==="none")return null;var C=_.formatter||s||defaultFormatter,{value:O,name:N}=_,T=O,L=N;if(C){var B=C(O,N,_,$,o);if(Array.isArray(B))[T,L]=B;else if(B!=null)T=B;else return null}var I=_objectSpread$p({display:"block",paddingTop:4,paddingBottom:4,color:_.color||"#000"},a);return reactExports.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat($),style:I},isNumOrStr(L)?reactExports.createElement("span",{className:"recharts-tooltip-item-name"},L):null,isNumOrStr(L)?reactExports.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,reactExports.createElement("span",{className:"recharts-tooltip-item-value"},T),reactExports.createElement("span",{className:"recharts-tooltip-item-unit"},_.unit||""))});return reactExports.createElement("ul",{className:"recharts-tooltip-item-list",style:A},R)}return null},v=_objectSpread$p({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),b=_objectSpread$p({margin:0},i),g=!isNullish(d),E=g?d:"",j=clsx("recharts-default-tooltip",c),w=clsx("recharts-tooltip-label",u);g&&p&&o!==void 0&&o!==null&&(E=p(d,o));var S=f?{role:"status","aria-live":"assertive"}:{};return reactExports.createElement("div",_extends$i({className:j,style:v},S),reactExports.createElement("p",{className:w,style:b},reactExports.isValidElement(E)?E:"".concat(E)),h())},CSS_CLASS_PREFIX="recharts-tooltip-wrapper",TOOLTIP_HIDDEN={visibility:"hidden"};function getTooltipCSSClassName(e){var{coordinate:t,translateX:n,translateY:a}=e;return clsx(CSS_CLASS_PREFIX,{["".concat(CSS_CLASS_PREFIX,"-right")]:isNumber(n)&&t&&isNumber(t.x)&&n>=t.x,["".concat(CSS_CLASS_PREFIX,"-left")]:isNumber(n)&&t&&isNumber(t.x)&&n<t.x,["".concat(CSS_CLASS_PREFIX,"-bottom")]:isNumber(a)&&t&&isNumber(t.y)&&a>=t.y,["".concat(CSS_CLASS_PREFIX,"-top")]:isNumber(a)&&t&&isNumber(t.y)&&a<t.y})}function getTooltipTranslateXY(e){var{allowEscapeViewBox:t,coordinate:n,key:a,offsetTopLeft:i,position:o,reverseDirection:s,tooltipDimension:l,viewBox:c,viewBoxDimension:u}=e;if(o&&isNumber(o[a]))return o[a];var d=n[a]-l-(i>0?i:0),p=n[a]+i;if(t[a])return s[a]?d:p;var f=c[a];if(f==null)return 0;if(s[a]){var h=d,v=f;return h<v?Math.max(p,f):Math.max(d,f)}if(u==null)return 0;var b=p+l,g=f+u;return b>g?Math.max(d,f):Math.max(p,f)}function getTransformStyle(e){var{translateX:t,translateY:n,useTranslate3d:a}=e;return{transform:a?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function getTooltipTranslate(e){var{allowEscapeViewBox:t,coordinate:n,offsetTopLeft:a,position:i,reverseDirection:o,tooltipBox:s,useTranslate3d:l,viewBox:c}=e,u,d,p;return s.height>0&&s.width>0&&n?(d=getTooltipTranslateXY({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:a,position:i,reverseDirection:o,tooltipDimension:s.width,viewBox:c,viewBoxDimension:c.width}),p=getTooltipTranslateXY({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:a,position:i,reverseDirection:o,tooltipDimension:s.height,viewBox:c,viewBoxDimension:c.height}),u=getTransformStyle({translateX:d,translateY:p,useTranslate3d:l})):u=TOOLTIP_HIDDEN,{cssProperties:u,cssClasses:getTooltipCSSClassName({translateX:d,translateY:p,coordinate:n})}}function ownKeys$o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function _objectSpread$o(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$o(Object(n),!0).forEach(function(a){_defineProperty$s(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$o(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function _defineProperty$s(e,t,n){return(t=_toPropertyKey$s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$s(e){var t=_toPrimitive$s(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$s(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class TooltipBoundingBox extends reactExports.PureComponent{constructor(){super(...arguments),_defineProperty$s(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),_defineProperty$s(this,"handleKeyDown",t=>{if(t.key==="Escape"){var n,a,i,o;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==null&&n!==void 0?n:0,y:(i=(o=this.props.coordinate)===null||o===void 0?void 0:o.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,n;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:n,animationDuration:a,animationEasing:i,children:o,coordinate:s,hasPayload:l,isAnimationActive:c,offset:u,position:d,reverseDirection:p,useTranslate3d:f,viewBox:h,wrapperStyle:v,lastBoundingBox:b,innerRef:g,hasPortalFromProps:E}=this.props,{cssClasses:j,cssProperties:w}=getTooltipTranslate({allowEscapeViewBox:n,coordinate:s,offsetTopLeft:u,position:d,reverseDirection:p,tooltipBox:{height:b.height,width:b.width},useTranslate3d:f,viewBox:h}),S=E?{}:_objectSpread$o(_objectSpread$o({transition:c&&t?"transform ".concat(a,"ms ").concat(i):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&l?"visible":"hidden",position:"absolute",top:0,left:0}),A=_objectSpread$o(_objectSpread$o({},S),{},{visibility:!this.state.dismissed&&t&&l?"visible":"hidden"},v);return reactExports.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:j,style:A,ref:g},o)}}var parseIsSsrByDefault=()=>!(typeof window!="undefined"&&window.document&&window.document.createElement&&window.setTimeout),Global={isSsr:parseIsSsrByDefault()},useAccessibilityLayer=()=>useAppSelector(e=>e.rootProps.accessibilityLayer);function isWellBehavedNumber(e){return Number.isFinite(e)}function isPositiveNumber(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function _extends$h(){return _extends$h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},_extends$h.apply(null,arguments)}function ownKeys$n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function _objectSpread$n(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$n(Object(n),!0).forEach(function(a){_defineProperty$r(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$n(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function _defineProperty$r(e,t,n){return(t=_toPropertyKey$r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$r(e){var t=_toPrimitive$r(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$r(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var CURVE_FACTORIES={curveBasisClosed,curveBasisOpen,curveBasis,curveBumpX:bumpX,curveBumpY:bumpY,curveLinearClosed,curveLinear,curveMonotoneX:monotoneX,curveMonotoneY:monotoneY,curveNatural,curveStep,curveStepAfter:stepAfter,curveStepBefore:stepBefore},defined=e=>isWellBehavedNumber(e.x)&&isWellBehavedNumber(e.y),getX=e=>e.x,getY=e=>e.y,getCurveFactory=(e,t)=>{if(typeof e=="function")return e;var n="curve".concat(upperFirst(e));return(n==="curveMonotone"||n==="curveBump")&&t?CURVE_FACTORIES["".concat(n).concat(t==="vertical"?"Y":"X")]:CURVE_FACTORIES[n]||curveLinear},getPath$1=e=>{var{type:t="linear",points:n=[],baseLine:a,layout:i,connectNulls:o=!1}=e,s=getCurveFactory(t,i),l=o?n.filter(defined):n,c;if(Array.isArray(a)){var u=o?a.filter(p=>defined(p)):a,d=l.map((p,f)=>_objectSpread$n(_objectSpread$n({},p),{},{base:u[f]}));return i==="vertical"?c=shapeArea().y(getY).x1(getX).x0(p=>p.base.x):c=shapeArea().x(getX).y1(getY).y0(p=>p.base.y),c.defined(defined).curve(s),c(d)}return i==="vertical"&&isNumber(a)?c=shapeArea().y(getY).x1(getX).x0(a):isNumber(a)?c=shapeArea().x(getX).y1(getY).y0(a):c=shapeLine().x(getX).y(getY),c.defined(defined).curve(s),c(l)},Curve=e=>{var{className:t,points:n,path:a,pathRef:i}=e;if((!n||!n.length)&&!a)return null;var o=n&&n.length?getPath$1(e):a;return reactExports.createElement("path",_extends$h({},filterProps(e,!1),adaptEventHandlers(e),{className:clsx("recharts-curve",t),d:o===null?void 0:o,ref:i}))},_excluded$e=["x","y","top","left","width","height","className"];function _extends$g(){return _extends$g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},_extends$g.apply(null,arguments)}function ownKeys$m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function _objectSpread$m(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$m(Object(n),!0).forEach(function(a){_defineProperty$q(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$m(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function _defineProperty$q(e,t,n){return(t=_toPropertyKey$q(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$q(e){var t=_toPrimitive$q(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$q(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _objectWithoutProperties$e(e,t){if(e==null)return{};var n,a,i=_objectWithoutPropertiesLoose$e(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function _objectWithoutPropertiesLoose$e(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var getPath=(e,t,n,a,i,o)=>"M".concat(e,",").concat(i,"v").concat(a,"M").concat(o,",").concat(t,"h").concat(n),Cross=e=>{var{x:t=0,y:n=0,top:a=0,left:i=0,width:o=0,height:s=0,className:l}=e,c=_objectWithoutProperties$e(e,_excluded$e),u=_objectSpread$m({x:t,y:n,top:a,left:i,width:o,height:s},c);return!isNumber(t)||!isNumber(n)||!isNumber(o)||!isNumber(s)||!isNumber(a)||!isNumber(i)?null:reactExports.createElement("path",_extends$g({},filterProps(u,!0),{className:clsx("recharts-cross",l),d:getPath(t,n,o,s,a,i)}))};function getCursorRectangle(e,t,n,a){var i=a/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-i,width:e==="horizontal"?a:n.width-1,height:e==="horizontal"?n.height-1:a}}function ownKeys$l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function _objectSpread$l(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$l(Object(n),!0).forEach(function(a){_defineProperty$p(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$l(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function _defineProperty$p(e,t,n){return(t=_toPropertyKey$p(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$p(e){var t=_toPrimitive$p(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$p(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function resolveDefaultProps(e,t){var n=_objectSpread$l({},e),a=t,i=Object.keys(t),o=i.reduce((s,l)=>(s[l]===void 0&&a[l]!==void 0&&(s[l]=a[l]),s),n);return o}var isEqual$2={},isEqualWith={},isPlainObject={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(!n||typeof n!="object")return!1;const a=Object.getPrototypeOf(n);return a===null||a===Object.prototype||Object.getPrototypeOf(a)===null?Object.prototype.toString.call(n)==="[object Object]":!1}e.isPlainObject=t})(isPlainObject);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=isPlainObject,n=getSymbols,a=getTag,i=tags,o=eq;function s(u,d,p){return l(u,d,void 0,void 0,void 0,void 0,p)}function l(u,d,p,f,h,v,b){const g=b(u,d,p,f,h,v);if(g!==void 0)return g;if(typeof u==typeof d)switch(typeof u){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return u===d;case"number":return u===d||Object.is(u,d);case"function":return u===d;case"object":return c(u,d,v,b)}return c(u,d,v,b)}function c(u,d,p,f){if(Object.is(u,d))return!0;let h=a.getTag(u),v=a.getTag(d);if(h===i.argumentsTag&&(h=i.objectTag),v===i.argumentsTag&&(v=i.objectTag),h!==v)return!1;switch(h){case i.stringTag:return u.toString()===d.toString();case i.numberTag:{const E=u.valueOf(),j=d.valueOf();return o.eq(E,j)}case i.booleanTag:case i.dateTag:case i.symbolTag:return Object.is(u.valueOf(),d.valueOf());case i.regexpTag:return u.source===d.source&&u.flags===d.flags;case i.functionTag:return u===d}p=p!=null?p:new Map;const b=p.get(u),g=p.get(d);if(b!=null&&g!=null)return b===d;p.set(u,d),p.set(d,u);try{switch(h){case i.mapTag:{if(u.size!==d.size)return!1;for(const[E,j]of u.entries())if(!d.has(E)||!l(j,d.get(E),E,u,d,p,f))return!1;return!0}case i.setTag:{if(u.size!==d.size)return!1;const E=Array.from(u.values()),j=Array.from(d.values());for(let w=0;w<E.length;w++){const S=E[w],A=j.findIndex(R=>l(S,R,void 0,u,d,p,f));if(A===-1)return!1;j.splice(A,1)}return!0}case i.arrayTag:case i.uint8ArrayTag:case i.uint8ClampedArrayTag:case i.uint16ArrayTag:case i.uint32ArrayTag:case i.bigUint64ArrayTag:case i.int8ArrayTag:case i.int16ArrayTag:case i.int32ArrayTag:case i.bigInt64ArrayTag:case i.float32ArrayTag:case i.float64ArrayTag:{if(typeof Buffer!="undefined"&&Buffer.isBuffer(u)!==Buffer.isBuffer(d)||u.length!==d.length)return!1;for(let E=0;E<u.length;E++)if(!l(u[E],d[E],E,u,d,p,f))return!1;return!0}case i.arrayBufferTag:return u.byteLength!==d.byteLength?!1:c(new Uint8Array(u),new Uint8Array(d),p,f);case i.dataViewTag:return u.byteLength!==d.byteLength||u.byteOffset!==d.byteOffset?!1:c(new Uint8Array(u),new Uint8Array(d),p,f);case i.errorTag:return u.name===d.name&&u.message===d.message;case i.objectTag:{if(!(c(u.constructor,d.constructor,p,f)||t.isPlainObject(u)&&t.isPlainObject(d)))return!1;const j=[...Object.keys(u),...n.getSymbols(u)],w=[...Object.keys(d),...n.getSymbols(d)];if(j.length!==w.length)return!1;for(let S=0;S<j.length;S++){const A=j[S],R=u[A];if(!Object.hasOwn(d,A))return!1;const _=d[A];if(!l(R,_,A,u,d,p,f))return!1}return!0}default:return!1}}finally{p.delete(u),p.delete(d)}}e.isEqualWith=s})(isEqualWith);var noop$3={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(){}e.noop=t})(noop$3);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=isEqualWith,n=noop$3;function a(i,o){return t.isEqualWith(i,o,n.noop)}e.isEqual=a})(isEqual$2);var isEqual=isEqual$2.isEqual;const isEqual$1=getDefaultExportFromCjs(isEqual);function createAnimateManager(e){var t={},n=()=>null,a=!1,i=null,o=s=>{if(!a){if(Array.isArray(s)){if(!s.length)return;var l=s,[c,...u]=l;if(typeof c=="number"){i=e.setTimeout(o.bind(null,u),c);return}o(c),i=e.setTimeout(o.bind(null,u));return}typeof s=="object"&&(t=s,n(t)),typeof s=="function"&&s()}};return{stop:()=>{a=!0},start:s=>{a=!1,i&&(i(),i=null),o(s)},subscribe:s=>(n=s,()=>{n=()=>null}),getTimeoutController:()=>e}}var ACCURACY=1e-4,cubicBezierFactor=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],evaluatePolynomial=(e,t)=>e.map((n,a)=>n*t**a).reduce((n,a)=>n+a),cubicBezier=(e,t)=>n=>{var a=cubicBezierFactor(e,t);return evaluatePolynomial(a,n)},derivativeCubicBezier=(e,t)=>n=>{var a=cubicBezierFactor(e,t),i=[...a.map((o,s)=>o*s).slice(1),0];return evaluatePolynomial(i,n)},configBezier=function e(){for(var t,n,a,i,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];if(s.length===1)switch(s[0]){case"linear":[t,a,n,i]=[0,0,1,1];break;case"ease":[t,a,n,i]=[.25,.1,.25,1];break;case"ease-in":[t,a,n,i]=[.42,0,1,1];break;case"ease-out":[t,a,n,i]=[.42,0,.58,1];break;case"ease-in-out":[t,a,n,i]=[0,0,.58,1];break;default:{var c=s[0].split("(");c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4&&([t,a,n,i]=c[1].split(")")[0].split(",").map(v=>parseFloat(v)))}}else s.length===4&&([t,a,n,i]=s);var u=cubicBezier(t,n),d=cubicBezier(a,i),p=derivativeCubicBezier(t,n),f=v=>v>1?1:v<0?0:v,h=v=>{for(var b=v>1?1:v,g=b,E=0;E<8;++E){var j=u(g)-b,w=p(g);if(Math.abs(j-b)<ACCURACY||w<ACCURACY)return d(g);g=f(g-j/w)}return d(g)};return h.isStepper=!1,h},configSpring=function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:a=8,dt:i=17}=t,o=(s,l,c)=>{var u=-(s-l)*n,d=c*a,p=c+(u-d)*i/1e3,f=c*i/1e3+s;return Math.abs(f-l)<ACCURACY&&Math.abs(p)<ACCURACY?[l,0]:[f,p]};return o.isStepper=!0,o.dt=i,o},configEasing=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return configBezier(e);case"spring":return configSpring();default:if(e.split("(")[0]==="cubic-bezier")return configBezier(e)}return typeof e=="function"?e:null};function ownKeys$k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function _objectSpread$k(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$k(Object(n),!0).forEach(function(a){_defineProperty$o(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$k(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function _defineProperty$o(e,t,n){return(t=_toPropertyKey$o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$o(e){var t=_toPrimitive$o(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$o(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var getDashCase=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),getTransitionVal=(e,t,n)=>e.map(a=>"".concat(getDashCase(a)," ").concat(t,"ms ").concat(n)).join(","),getIntersectionKeys=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((n,a)=>n.filter(i=>a.includes(i))),mapObject=(e,t)=>Object.keys(t).reduce((n,a)=>_objectSpread$k(_objectSpread$k({},n),{},{[a]:e(a,t[a])}),{});function ownKeys$j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function _objectSpread$j(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$j(Object(n),!0).forEach(function(a){_defineProperty$n(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$j(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function _defineProperty$n(e,t,n){return(t=_toPropertyKey$n(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$n(e){var t=_toPrimitive$n(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$n(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var alpha=(e,t,n)=>e+(t-e)*n,needContinue=e=>{var{from:t,to:n}=e;return t!==n},calStepperVals=(e,t,n)=>{var a=mapObject((i,o)=>{if(needContinue(o)){var[s,l]=e(o.from,o.to,o.velocity);return _objectSpread$j(_objectSpread$j({},o),{},{from:s,velocity:l})}return o},t);return n<1?mapObject((i,o)=>needContinue(o)?_objectSpread$j(_objectSpread$j({},o),{},{velocity:alpha(o.velocity,a[i].velocity,n),from:alpha(o.from,a[i].from,n)}):o,t):calStepperVals(e,a,n-1)};function createStepperUpdate(e,t,n,a,i,o){var s,l=a.reduce((f,h)=>_objectSpread$j(_objectSpread$j({},f),{},{[h]:{from:e[h],velocity:0,to:t[h]}}),{}),c=()=>mapObject((f,h)=>h.from,l),u=()=>!Object.values(l).filter(needContinue).length,d=null,p=f=>{s||(s=f);var h=f-s,v=h/n.dt;l=calStepperVals(n,l,v),i(_objectSpread$j(_objectSpread$j(_objectSpread$j({},e),t),c())),s=f,u()||(d=o.setTimeout(p))};return()=>(d=o.setTimeout(p),()=>{d()})}function createTimingUpdate(e,t,n,a,i,o,s){var l=null,c=i.reduce((p,f)=>_objectSpread$j(_objectSpread$j({},p),{},{[f]:[e[f],t[f]]}),{}),u,d=p=>{u||(u=p);var f=(p-u)/a,h=mapObject((b,g)=>alpha(...g,n(f)),c);if(o(_objectSpread$j(_objectSpread$j(_objectSpread$j({},e),t),h)),f<1)l=s.setTimeout(d);else{var v=mapObject((b,g)=>alpha(...g,n(1)),c);o(_objectSpread$j(_objectSpread$j(_objectSpread$j({},e),t),v))}};return()=>(l=s.setTimeout(d),()=>{l()})}const configUpdate=(e,t,n,a,i,o)=>{var s=getIntersectionKeys(e,t);return n.isStepper===!0?createStepperUpdate(e,t,n,s,i,o):createTimingUpdate(e,t,n,a,s,i,o)};class RequestAnimationFrameTimeoutController{setTimeout(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=performance.now(),i=null,o=s=>{s-a>=n?t(s):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(o))};return i=requestAnimationFrame(o),()=>{cancelAnimationFrame(i)}}}var _excluded$d=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function _extends$f(){return _extends$f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},_extends$f.apply(null,arguments)}function _objectWithoutProperties$d(e,t){if(e==null)return{};var n,a,i=_objectWithoutPropertiesLoose$d(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function _objectWithoutPropertiesLoose$d(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function ownKeys$i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function _objectSpread$i(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$i(Object(n),!0).forEach(function(a){_defineProperty$m(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$i(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function _defineProperty$m(e,t,n){return(t=_toPropertyKey$m(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$m(e){var t=_toPrimitive$m(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$m(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function createDefaultAnimationManager(){return createAnimateManager(new RequestAnimationFrameTimeoutController)}class AnimateImpl extends reactExports.PureComponent{constructor(t,n){super(t,n),_defineProperty$m(this,"mounted",!1),_defineProperty$m(this,"manager",null),_defineProperty$m(this,"stopJSAnimation",null),_defineProperty$m(this,"unSubscribe",null);var{isActive:a,attributeName:i,from:o,to:s,children:l,duration:c,animationManager:u}=this.props;if(this.manager=u,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!a||c<=0){this.state={style:{}},typeof l=="function"&&(this.state={style:s});return}if(o){if(typeof l=="function"){this.state={style:o};return}this.state={style:i?{[i]:o}:o}}else this.state={style:{}}}componentDidMount(){var{isActive:t,canBegin:n}=this.props;this.mounted=!0,!(!t||!n)&&this.runAnimation(this.props)}componentDidUpdate(t){var{isActive:n,canBegin:a,attributeName:i,shouldReAnimate:o,to:s,from:l}=this.props,{style:c}=this.state;if(a){if(!n){var u={style:i?{[i]:s}:s};this.state&&c&&(i&&c[i]!==s||!i&&c!==s)&&this.setState(u);return}if(!(isEqual$1(t.to,s)&&t.canBegin&&t.isActive)){var d=!t.canBegin||!t.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var p=d||o?l:t.to;if(this.state&&c){var f={style:i?{[i]:p}:p};(i&&c[i]!==p||!i&&c!==p)&&this.setState(f)}this.runAnimation(_objectSpread$i(_objectSpread$i({},this.props),{},{from:p,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:t}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}handleStyleChange(t){this.changeStyle(t)}changeStyle(t){this.mounted&&this.setState({style:t})}runJSAnimation(t){var{from:n,to:a,duration:i,easing:o,begin:s,onAnimationEnd:l,onAnimationStart:c}=t,u=configUpdate(n,a,configEasing(o),i,this.changeStyle,this.manager.getTimeoutController()),d=()=>{this.stopJSAnimation=u()};this.manager.start([c,s,d,i,l])}runAnimation(t){var{begin:n,duration:a,attributeName:i,to:o,easing:s,onAnimationStart:l,onAnimationEnd:c,children:u}=t;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof s=="function"||typeof u=="function"||s==="spring"){this.runJSAnimation(t);return}var d=i?{[i]:o}:o,p=getTransitionVal(Object.keys(d),a,s);this.manager.start([l,n,_objectSpread$i(_objectSpread$i({},d),{},{transition:p}),a,c])}render(){var t=this.props,{children:n,begin:a,duration:i,attributeName:o,easing:s,isActive:l,from:c,to:u,canBegin:d,onAnimationEnd:p,shouldReAnimate:f,onAnimationReStart:h,animationManager:v}=t,b=_objectWithoutProperties$d(t,_excluded$d),g=reactExports.Children.count(n),E=this.state.style;if(typeof n=="function")return n(E);if(!l||g===0||i<=0)return n;var j=w=>{var{style:S={},className:A}=w.props,R=reactExports.cloneElement(w,_objectSpread$i(_objectSpread$i({},b),{},{style:_objectSpread$i(_objectSpread$i({},S),E),className:A}));return R};return g===1?j(reactExports.Children.only(n)):reactExports.createElement("div",null,reactExports.Children.map(n,w=>j(w)))}}_defineProperty$m(AnimateImpl,"displayName","Animate");_defineProperty$m(AnimateImpl,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});var AnimationManagerContext=reactExports.createContext(null);function Animate(e){var t,n,a=reactExports.useContext(AnimationManagerContext);return reactExports.createElement(AnimateImpl,_extends$f({},e,{animationManager:(t=(n=e.animationManager)!==null&&n!==void 0?n:a)!==null&&t!==void 0?t:createDefaultAnimationManager()}))}function _extends$e(){return _extends$e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},_extends$e.apply(null,arguments)}var getRectanglePath=(e,t,n,a,i)=>{var o=Math.min(Math.abs(n)/2,Math.abs(a)/2),s=a>=0?1:-1,l=n>=0?1:-1,c=a>=0&&n>=0||a<0&&n<0?1:0,u;if(o>0&&i instanceof Array){for(var d=[0,0,0,0],p=0,f=4;p<f;p++)d[p]=i[p]>o?o:i[p];u="M".concat(e,",").concat(t+s*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+l*d[0],",").concat(t)),u+="L ".concat(e+n-l*d[1],",").concat(t),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(e+n,",").concat(t+s*d[1])),u+="L ".concat(e+n,",").concat(t+a-s*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(e+n-l*d[2],",").concat(t+a)),u+="L ".concat(e+l*d[3],",").concat(t+a),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+a-s*d[3])),u+="Z"}else if(o>0&&i===+i&&i>0){var h=Math.min(o,i);u="M ".concat(e,",").concat(t+s*h,`
            A `).concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+l*h,",").concat(t,`
            L `).concat(e+n-l*h,",").concat(t,`
            A `).concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+n,",").concat(t+s*h,`
            L `).concat(e+n,",").concat(t+a-s*h,`
            A `).concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+n-l*h,",").concat(t+a,`
            L `).concat(e+l*h,",").concat(t+a,`
            A `).concat(h,",").concat(h,",0,0,").concat(c,",").concat(e,",").concat(t+a-s*h," Z")}else u="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return u},defaultProps$3={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Rectangle=e=>{var t=resolveDefaultProps(e,defaultProps$3),n=reactExports.useRef(null),[a,i]=reactExports.useState(-1);reactExports.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var E=n.current.getTotalLength();E&&i(E)}catch(j){}},[]);var{x:o,y:s,width:l,height:c,radius:u,className:d}=t,{animationEasing:p,animationDuration:f,animationBegin:h,isAnimationActive:v,isUpdateAnimationActive:b}=t;if(o!==+o||s!==+s||l!==+l||c!==+c||l===0||c===0)return null;var g=clsx("recharts-rectangle",d);return b?reactExports.createElement(Animate,{canBegin:a>0,from:{width:l,height:c,x:o,y:s},to:{width:l,height:c,x:o,y:s},duration:f,animationEasing:p,isActive:b},E=>{var{width:j,height:w,x:S,y:A}=E;return reactExports.createElement(Animate,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:h,duration:f,isActive:v,easing:p},reactExports.createElement("path",_extends$e({},filterProps(t,!0),{className:g,d:getRectanglePath(S,A,j,w,u),ref:n})))}):reactExports.createElement("path",_extends$e({},filterProps(t,!0),{className:g,d:getRectanglePath(o,s,l,c,u)}))};function getRadialCursorPoints(e){var{cx:t,cy:n,radius:a,startAngle:i,endAngle:o}=e,s=polarToCartesian(t,n,a,i),l=polarToCartesian(t,n,a,o);return{points:[s,l],cx:t,cy:n,radius:a,startAngle:i,endAngle:o}}function _extends$d(){return _extends$d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},_extends$d.apply(null,arguments)}var getDeltaAngle$1=(e,t)=>{var n=mathSign(t-e),a=Math.min(Math.abs(t-e),359.999);return n*a},getTangentCircle=e=>{var{cx:t,cy:n,radius:a,angle:i,sign:o,isExternal:s,cornerRadius:l,cornerIsExternal:c}=e,u=l*(s?1:-1)+a,d=Math.asin(l/u)/RADIAN,p=c?i:i+o*d,f=polarToCartesian(t,n,u,p),h=polarToCartesian(t,n,a,p),v=c?i-o*d:i,b=polarToCartesian(t,n,u*Math.cos(d*RADIAN),v);return{center:f,circleTangency:h,lineTangency:b,theta:d}},getSectorPath=e=>{var{cx:t,cy:n,innerRadius:a,outerRadius:i,startAngle:o,endAngle:s}=e,l=getDeltaAngle$1(o,s),c=o+l,u=polarToCartesian(t,n,i,o),d=polarToCartesian(t,n,i,c),p="M ".concat(u.x,",").concat(u.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(o>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(a>0){var f=polarToCartesian(t,n,a,o),h=polarToCartesian(t,n,a,c);p+="L ".concat(h.x,",").concat(h.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(o<=c),`,
            `).concat(f.x,",").concat(f.y," Z")}else p+="L ".concat(t,",").concat(n," Z");return p},getSectorWithCorner=e=>{var{cx:t,cy:n,innerRadius:a,outerRadius:i,cornerRadius:o,forceCornerRadius:s,cornerIsExternal:l,startAngle:c,endAngle:u}=e,d=mathSign(u-c),{circleTangency:p,lineTangency:f,theta:h}=getTangentCircle({cx:t,cy:n,radius:i,angle:c,sign:d,cornerRadius:o,cornerIsExternal:l}),{circleTangency:v,lineTangency:b,theta:g}=getTangentCircle({cx:t,cy:n,radius:i,angle:u,sign:-d,cornerRadius:o,cornerIsExternal:l}),E=l?Math.abs(c-u):Math.abs(c-u)-h-g;if(E<0)return s?"M ".concat(f.x,",").concat(f.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):getSectorPath({cx:t,cy:n,innerRadius:a,outerRadius:i,startAngle:c,endAngle:u});var j="M ".concat(f.x,",").concat(f.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(E>180),",").concat(+(d<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(b.x,",").concat(b.y,`
  `);if(a>0){var{circleTangency:w,lineTangency:S,theta:A}=getTangentCircle({cx:t,cy:n,radius:a,angle:c,sign:d,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),{circleTangency:R,lineTangency:_,theta:$}=getTangentCircle({cx:t,cy:n,radius:a,angle:u,sign:-d,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),C=l?Math.abs(c-u):Math.abs(c-u)-A-$;if(C<0&&o===0)return"".concat(j,"L").concat(t,",").concat(n,"Z");j+="L".concat(_.x,",").concat(_.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(R.x,",").concat(R.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(C>180),",").concat(+(d>0),",").concat(w.x,",").concat(w.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(S.x,",").concat(S.y,"Z")}else j+="L".concat(t,",").concat(n,"Z");return j},defaultProps$2={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Sector=e=>{var t=resolveDefaultProps(e,defaultProps$2),{cx:n,cy:a,innerRadius:i,outerRadius:o,cornerRadius:s,forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d,className:p}=t;if(o<i||u===d)return null;var f=clsx("recharts-sector",p),h=o-i,v=getPercentValue(s,h,0,!0),b;return v>0&&Math.abs(u-d)<360?b=getSectorWithCorner({cx:n,cy:a,innerRadius:i,outerRadius:o,cornerRadius:Math.min(v,h/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):b=getSectorPath({cx:n,cy:a,innerRadius:i,outerRadius:o,startAngle:u,endAngle:d}),reactExports.createElement("path",_extends$d({},filterProps(t,!0),{className:f,d:b}))};function getCursorPoints(e,t,n){var a,i,o,s;if(e==="horizontal")a=t.x,o=a,i=n.top,s=n.top+n.height;else if(e==="vertical")i=t.y,s=i,a=n.left,o=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:l,cy:c,innerRadius:u,outerRadius:d,angle:p}=t,f=polarToCartesian(l,c,u,p),h=polarToCartesian(l,c,d,p);a=f.x,i=f.y,o=h.x,s=h.y}else return getRadialCursorPoints(t);return[{x:a,y:i},{x:o,y:s}]}var range$4={},toFinite={},toNumber={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=isSymbol;function n(a){return t.isSymbol(a)?NaN:Number(a)}e.toNumber=n})(toNumber);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=toNumber;function n(a){return a?(a=t.toNumber(a),a===1/0||a===-1/0?(a<0?-1:1)*Number.MAX_VALUE:a===a?a:0):a===0?a:0}e.toFinite=n})(toFinite);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=isIterateeCall,n=toFinite;function a(i,o,s){s&&typeof s!="number"&&t.isIterateeCall(i,o,s)&&(o=s=void 0),i=n.toFinite(i),o===void 0?(o=i,i=0):o=n.toFinite(o),s=s===void 0?i<o?1:-1:n.toFinite(s);const l=Math.max(Math.ceil((o-i)/(s||1)),0),c=new Array(l);for(let u=0;u<l;u++)c[u]=i,i+=s;return c}e.range=a})(range$4);var range$2=range$4.range;const range$3=getDefaultExportFromCjs(range$2);function ascending(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function descending(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function bisector(e){let t,n,a;e.length!==2?(t=ascending,n=(l,c)=>ascending(e(l),c),a=(l,c)=>e(l)-c):(t=e===ascending||e===descending?e:zero$1,n=e,a=e);function i(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const p=u+d>>>1;n(l[p],c)<0?u=p+1:d=p}while(u<d)}return u}function o(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const p=u+d>>>1;n(l[p],c)<=0?u=p+1:d=p}while(u<d)}return u}function s(l,c,u=0,d=l.length){const p=i(l,c,u,d-1);return p>u&&a(l[p-1],c)>-a(l[p],c)?p-1:p}return{left:i,center:s,right:o}}function zero$1(){return 0}function number$2(e){return e===null?NaN:+e}function*numbers(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const ascendingBisect=bisector(ascending),bisectRight=ascendingBisect.right;bisector(number$2).center;class InternMap extends Map{constructor(t,n=keyof){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[a,i]of t)this.set(a,i)}get(t){return super.get(intern_get(this,t))}has(t){return super.has(intern_get(this,t))}set(t,n){return super.set(intern_set(this,t),n)}delete(t){return super.delete(intern_delete(this,t))}}function intern_get({_intern:e,_key:t},n){const a=t(n);return e.has(a)?e.get(a):n}function intern_set({_intern:e,_key:t},n){const a=t(n);return e.has(a)?e.get(a):(e.set(a,n),n)}function intern_delete({_intern:e,_key:t},n){const a=t(n);return e.has(a)&&(n=e.get(a),e.delete(a)),n}function keyof(e){return e!==null&&typeof e=="object"?e.valueOf():e}function compareDefined(e=ascending){if(e===ascending)return ascendingDefined;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const a=e(t,n);return a||a===0?a:(e(n,n)===0)-(e(t,t)===0)}}function ascendingDefined(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function tickSpec(e,t,n){const a=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(a)),o=a/Math.pow(10,i),s=o>=e10?10:o>=e5?5:o>=e2?2:1;let l,c,u;return i<0?(u=Math.pow(10,-i)/s,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,i)*s,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=n&&n<2?tickSpec(e,t,n*2):[l,c,u]}function ticks(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const a=t<e,[i,o,s]=a?tickSpec(t,e,n):tickSpec(e,t,n);if(!(o>=i))return[];const l=o-i+1,c=new Array(l);if(a)if(s<0)for(let u=0;u<l;++u)c[u]=(o-u)/-s;else for(let u=0;u<l;++u)c[u]=(o-u)*s;else if(s<0)for(let u=0;u<l;++u)c[u]=(i+u)/-s;else for(let u=0;u<l;++u)c[u]=(i+u)*s;return c}function tickIncrement(e,t,n){return t=+t,e=+e,n=+n,tickSpec(e,t,n)[2]}function tickStep(e,t,n){t=+t,e=+e,n=+n;const a=t<e,i=a?tickIncrement(t,e,n):tickIncrement(e,t,n);return(a?-1:1)*(i<0?1/-i:i)}function max(e,t){let n;for(const a of e)a!=null&&(n<a||n===void 0&&a>=a)&&(n=a);return n}function min(e,t){let n;for(const a of e)a!=null&&(n>a||n===void 0&&a>=a)&&(n=a);return n}function quickselect(e,t,n=0,a=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),a=Math.floor(Math.min(e.length-1,a)),!(n<=t&&t<=a))return e;for(i=i===void 0?ascendingDefined:compareDefined(i);a>n;){if(a-n>600){const c=a-n+1,u=t-n+1,d=Math.log(c),p=.5*Math.exp(2*d/3),f=.5*Math.sqrt(d*p*(c-p)/c)*(u-c/2<0?-1:1),h=Math.max(n,Math.floor(t-u*p/c+f)),v=Math.min(a,Math.floor(t+(c-u)*p/c+f));quickselect(e,t,h,v,i)}const o=e[t];let s=n,l=a;for(swap(e,n,t),i(e[a],o)>0&&swap(e,n,a);s<l;){for(swap(e,s,l),++s,--l;i(e[s],o)<0;)++s;for(;i(e[l],o)>0;)--l}i(e[n],o)===0?swap(e,n,l):(++l,swap(e,l,a)),l<=t&&(n=l+1),t<=l&&(a=l-1)}return e}function swap(e,t,n){const a=e[t];e[t]=e[n],e[n]=a}function quantile$1(e,t,n){if(e=Float64Array.from(numbers(e)),!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return min(e);if(t>=1)return max(e);var a,i=(a-1)*t,o=Math.floor(i),s=max(quickselect(e,o).subarray(0,o+1)),l=min(e.subarray(o+1));return s+(l-s)*(i-o)}}function quantileSorted(e,t,n=number$2){if(!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return+n(e[0],0,e);if(t>=1)return+n(e[a-1],a-1,e);var a,i=(a-1)*t,o=Math.floor(i),s=+n(e[o],o,e),l=+n(e[o+1],o+1,e);return s+(l-s)*(i-o)}}function range$1(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var a=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++a<i;)o[a]=e+a*n;return o}function initRange(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function initInterpolator(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const implicit=Symbol("implicit");function ordinal(){var e=new InternMap,t=[],n=[],a=implicit;function i(o){let s=e.get(o);if(s===void 0){if(a!==implicit)return a;e.set(o,s=t.push(o)-1)}return n[s%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new InternMap;for(const s of o)e.has(s)||e.set(s,t.push(s)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(a=o,i):a},i.copy=function(){return ordinal(t,n).unknown(a)},initRange.apply(i,arguments),i}function band(){var e=ordinal().unknown(void 0),t=e.domain,n=e.range,a=0,i=1,o,s,l=!1,c=0,u=0,d=.5;delete e.unknown;function p(){var f=t().length,h=i<a,v=h?i:a,b=h?a:i;o=(b-v)/Math.max(1,f-c+u*2),l&&(o=Math.floor(o)),v+=(b-v-o*(f-c))*d,s=o*(1-c),l&&(v=Math.round(v),s=Math.round(s));var g=range$1(f).map(function(E){return v+o*E});return n(h?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),p()):t()},e.range=function(f){return arguments.length?([a,i]=f,a=+a,i=+i,p()):[a,i]},e.rangeRound=function(f){return[a,i]=f,a=+a,i=+i,l=!0,p()},e.bandwidth=function(){return s},e.step=function(){return o},e.round=function(f){return arguments.length?(l=!!f,p()):l},e.padding=function(f){return arguments.length?(c=Math.min(1,u=+f),p()):c},e.paddingInner=function(f){return arguments.length?(c=Math.min(1,f),p()):c},e.paddingOuter=function(f){return arguments.length?(u=+f,p()):u},e.align=function(f){return arguments.length?(d=Math.max(0,Math.min(1,f)),p()):d},e.copy=function(){return band(t(),[a,i]).round(l).paddingInner(c).paddingOuter(u).align(d)},initRange.apply(p(),arguments)}function pointish(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return pointish(t())},e}function point(){return pointish(band.apply(null,arguments).paddingInner(1))}function define(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function extend(e,t){var n=Object.create(e.prototype);for(var a in t)n[a]=t[a];return n}function Color(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color,color,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=reHex.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?rgbn(t):n===3?new Rgb(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?rgba(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?rgba(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=reRgbInteger.exec(e))?new Rgb(t[1],t[2],t[3],1):(t=reRgbPercent.exec(e))?new Rgb(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=reRgbaInteger.exec(e))?rgba(t[1],t[2],t[3],t[4]):(t=reRgbaPercent.exec(e))?rgba(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=reHslPercent.exec(e))?hsla(t[1],t[2]/100,t[3]/100,1):(t=reHslaPercent.exec(e))?hsla(t[1],t[2]/100,t[3]/100,t[4]):named.hasOwnProperty(e)?rgbn(named[e]):e==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(e){return new Rgb(e>>16&255,e>>8&255,e&255,1)}function rgba(e,t,n,a){return a<=0&&(e=t=n=NaN),new Rgb(e,t,n,a)}function rgbConvert(e){return e instanceof Color||(e=color(e)),e?(e=e.rgb(),new Rgb(e.r,e.g,e.b,e.opacity)):new Rgb}function rgb$1(e,t,n,a){return arguments.length===1?rgbConvert(e):new Rgb(e,t,n,a==null?1:a)}function Rgb(e,t,n,a){this.r=+e,this.g=+t,this.b=+n,this.opacity=+a}define(Rgb,rgb$1,extend(Color,{brighter(e){return e=e==null?brighter:Math.pow(brighter,e),new Rgb(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?darker:Math.pow(darker,e),new Rgb(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const e=clampa(this.opacity);return`${e===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${e===1?")":`, ${e})`}`}function clampa(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function clampi(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function hex(e){return e=clampi(e),(e<16?"0":"")+e.toString(16)}function hsla(e,t,n,a){return a<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Hsl(e,t,n,a)}function hslConvert(e){if(e instanceof Hsl)return new Hsl(e.h,e.s,e.l,e.opacity);if(e instanceof Color||(e=color(e)),!e)return new Hsl;if(e instanceof Hsl)return e;e=e.rgb();var t=e.r/255,n=e.g/255,a=e.b/255,i=Math.min(t,n,a),o=Math.max(t,n,a),s=NaN,l=o-i,c=(o+i)/2;return l?(t===o?s=(n-a)/l+(n<a)*6:n===o?s=(a-t)/l+2:s=(t-n)/l+4,l/=c<.5?o+i:2-o-i,s*=60):l=c>0&&c<1?0:s,new Hsl(s,l,c,e.opacity)}function hsl(e,t,n,a){return arguments.length===1?hslConvert(e):new Hsl(e,t,n,a==null?1:a)}function Hsl(e,t,n,a){this.h=+e,this.s=+t,this.l=+n,this.opacity=+a}define(Hsl,hsl,extend(Color,{brighter(e){return e=e==null?brighter:Math.pow(brighter,e),new Hsl(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?darker:Math.pow(darker,e),new Hsl(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,a=n+(n<.5?n:1-n)*t,i=2*n-a;return new Rgb(hsl2rgb(e>=240?e-240:e+120,i,a),hsl2rgb(e,i,a),hsl2rgb(e<120?e+240:e-120,i,a),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=clampa(this.opacity);return`${e===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function clamph(e){return e=(e||0)%360,e<0?e+360:e}function clampt(e){return Math.max(0,Math.min(1,e||0))}function hsl2rgb(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const constant=e=>()=>e;function linear$1(e,t){return function(n){return e+n*t}}function exponential(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(a){return Math.pow(e+a*t,n)}}function gamma(e){return(e=+e)==1?nogamma:function(t,n){return n-t?exponential(t,n,e):constant(isNaN(t)?n:t)}}function nogamma(e,t){var n=t-e;return n?linear$1(e,n):constant(isNaN(e)?t:e)}const rgb=function e(t){var n=gamma(t);function a(i,o){var s=n((i=rgb$1(i)).r,(o=rgb$1(o)).r),l=n(i.g,o.g),c=n(i.b,o.b),u=nogamma(i.opacity,o.opacity);return function(d){return i.r=s(d),i.g=l(d),i.b=c(d),i.opacity=u(d),i+""}}return a.gamma=e,a}(1);function numberArray(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,a=t.slice(),i;return function(o){for(i=0;i<n;++i)a[i]=e[i]*(1-o)+t[i]*o;return a}}function isNumberArray(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function genericArray(e,t){var n=t?t.length:0,a=e?Math.min(n,e.length):0,i=new Array(a),o=new Array(n),s;for(s=0;s<a;++s)i[s]=interpolate(e[s],t[s]);for(;s<n;++s)o[s]=t[s];return function(l){for(s=0;s<a;++s)o[s]=i[s](l);return o}}function date$1(e,t){var n=new Date;return e=+e,t=+t,function(a){return n.setTime(e*(1-a)+t*a),n}}function interpolateNumber(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function object(e,t){var n={},a={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=interpolate(e[i],t[i]):a[i]=t[i];return function(o){for(i in n)a[i]=n[i](o);return a}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(e){return function(){return e}}function one(e){return function(t){return e(t)+""}}function string(e,t){var n=reA.lastIndex=reB.lastIndex=0,a,i,o,s=-1,l=[],c=[];for(e=e+"",t=t+"";(a=reA.exec(e))&&(i=reB.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),l[s]?l[s]+=o:l[++s]=o),(a=a[0])===(i=i[0])?l[s]?l[s]+=i:l[++s]=i:(l[++s]=null,c.push({i:s,x:interpolateNumber(a,i)})),n=reB.lastIndex;return n<t.length&&(o=t.slice(n),l[s]?l[s]+=o:l[++s]=o),l.length<2?c[0]?one(c[0].x):zero(t):(t=c.length,function(u){for(var d=0,p;d<t;++d)l[(p=c[d]).i]=p.x(u);return l.join("")})}function interpolate(e,t){var n=typeof t,a;return t==null||n==="boolean"?constant(t):(n==="number"?interpolateNumber:n==="string"?(a=color(t))?(t=a,rgb):string:t instanceof color?rgb:t instanceof Date?date$1:isNumberArray(t)?numberArray:Array.isArray(t)?genericArray:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?object:interpolateNumber)(e,t)}function interpolateRound(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function piecewise(e,t){t===void 0&&(t=e,e=interpolate);for(var n=0,a=t.length-1,i=t[0],o=new Array(a<0?0:a);n<a;)o[n]=e(i,i=t[++n]);return function(s){var l=Math.max(0,Math.min(a-1,Math.floor(s*=a)));return o[l](s-l)}}function constants(e){return function(){return e}}function number$1(e){return+e}var unit=[0,1];function identity$3(e){return e}function normalize(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:constants(isNaN(t)?NaN:.5)}function clamper(e,t){var n;return e>t&&(n=e,e=t,t=n),function(a){return Math.max(e,Math.min(t,a))}}function bimap(e,t,n){var a=e[0],i=e[1],o=t[0],s=t[1];return i<a?(a=normalize(i,a),o=n(s,o)):(a=normalize(a,i),o=n(o,s)),function(l){return o(a(l))}}function polymap(e,t,n){var a=Math.min(e.length,t.length)-1,i=new Array(a),o=new Array(a),s=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<a;)i[s]=normalize(e[s],e[s+1]),o[s]=n(t[s],t[s+1]);return function(l){var c=bisectRight(e,l,1,a)-1;return o[c](i[c](l))}}function copy$1(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function transformer$2(){var e=unit,t=unit,n=interpolate,a,i,o,s=identity$3,l,c,u;function d(){var f=Math.min(e.length,t.length);return s!==identity$3&&(s=clamper(e[0],e[f-1])),l=f>2?polymap:bimap,c=u=null,p}function p(f){return f==null||isNaN(f=+f)?o:(c||(c=l(e.map(a),t,n)))(a(s(f)))}return p.invert=function(f){return s(i((u||(u=l(t,e.map(a),interpolateNumber)))(f)))},p.domain=function(f){return arguments.length?(e=Array.from(f,number$1),d()):e.slice()},p.range=function(f){return arguments.length?(t=Array.from(f),d()):t.slice()},p.rangeRound=function(f){return t=Array.from(f),n=interpolateRound,d()},p.clamp=function(f){return arguments.length?(s=f?!0:identity$3,d()):s!==identity$3},p.interpolate=function(f){return arguments.length?(n=f,d()):n},p.unknown=function(f){return arguments.length?(o=f,p):o},function(f,h){return a=f,i=h,d()}}function continuous(){return transformer$2()(identity$3,identity$3)}function formatDecimal(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function formatDecimalParts(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,a=e.slice(0,n);return[a.length>1?a[0]+a.slice(2):a,+e.slice(n+1)]}function exponent(e){return e=formatDecimalParts(Math.abs(e)),e?e[1]:NaN}function formatGroup(e,t){return function(n,a){for(var i=n.length,o=[],s=0,l=e[0],c=0;i>0&&l>0&&(c+l+1>a&&(l=Math.max(1,a-c)),o.push(n.substring(i-=l,i+l)),!((c+=l+1)>a));)l=e[s=(s+1)%e.length];return o.reverse().join(t)}}function formatNumerals(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(e){if(!(t=re.exec(e)))throw new Error("invalid format: "+e);var t;return new FormatSpecifier({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}formatSpecifier.prototype=FormatSpecifier.prototype;function FormatSpecifier(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function formatTrim(e){e:for(var t=e.length,n=1,a=-1,i;n<t;++n)switch(e[n]){case".":a=i=n;break;case"0":a===0&&(a=n),i=n;break;default:if(!+e[n])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(i+1):e}var prefixExponent;function formatPrefixAuto(e,t){var n=formatDecimalParts(e,t);if(!n)return e+"";var a=n[0],i=n[1],o=i-(prefixExponent=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=a.length;return o===s?a:o>s?a+new Array(o-s+1).join("0"):o>0?a.slice(0,o)+"."+a.slice(o):"0."+new Array(1-o).join("0")+formatDecimalParts(e,Math.max(0,t+o-1))[0]}function formatRounded(e,t){var n=formatDecimalParts(e,t);if(!n)return e+"";var a=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+a:a.length>i+1?a.slice(0,i+1)+"."+a.slice(i+1):a+new Array(i-a.length+2).join("0")}const formatTypes={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:formatDecimal,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>formatRounded(e*100,t),r:formatRounded,s:formatPrefixAuto,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function identity$2(e){return e}var map$1=Array.prototype.map,prefixes=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function formatLocale$1(e){var t=e.grouping===void 0||e.thousands===void 0?identity$2:formatGroup(map$1.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?identity$2:formatNumerals(map$1.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"−":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(p){p=formatSpecifier(p);var f=p.fill,h=p.align,v=p.sign,b=p.symbol,g=p.zero,E=p.width,j=p.comma,w=p.precision,S=p.trim,A=p.type;A==="n"?(j=!0,A="g"):formatTypes[A]||(w===void 0&&(w=12),S=!0,A="g"),(g||f==="0"&&h==="=")&&(g=!0,f="0",h="=");var R=b==="$"?n:b==="#"&&/[boxX]/.test(A)?"0"+A.toLowerCase():"",_=b==="$"?a:/[%p]/.test(A)?s:"",$=formatTypes[A],C=/[defgprs%]/.test(A);w=w===void 0?6:/[gprs]/.test(A)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function O(N){var T=R,L=_,B,I,z;if(A==="c")L=$(N)+L,N="";else{N=+N;var F=N<0||1/N<0;if(N=isNaN(N)?c:$(Math.abs(N),w),S&&(N=formatTrim(N)),F&&+N==0&&v!=="+"&&(F=!1),T=(F?v==="("?v:l:v==="-"||v==="("?"":v)+T,L=(A==="s"?prefixes[8+prefixExponent/3]:"")+L+(F&&v==="("?")":""),C){for(B=-1,I=N.length;++B<I;)if(z=N.charCodeAt(B),48>z||z>57){L=(z===46?i+N.slice(B+1):N.slice(B))+L,N=N.slice(0,B);break}}}j&&!g&&(N=t(N,1/0));var Z=T.length+N.length+L.length,U=Z<E?new Array(E-Z+1).join(f):"";switch(j&&g&&(N=t(U+N,U.length?E-L.length:1/0),U=""),h){case"<":N=T+N+L+U;break;case"=":N=T+U+N+L;break;case"^":N=U.slice(0,Z=U.length>>1)+T+N+L+U.slice(Z);break;default:N=U+T+N+L;break}return o(N)}return O.toString=function(){return p+""},O}function d(p,f){var h=u((p=formatSpecifier(p),p.type="f",p)),v=Math.max(-8,Math.min(8,Math.floor(exponent(f)/3)))*3,b=Math.pow(10,-v),g=prefixes[8+v/3];return function(E){return h(b*E)+g}}return{format:u,formatPrefix:d}}var locale$2,format,formatPrefix;defaultLocale$1({thousands:",",grouping:[3],currency:["$",""]});function defaultLocale$1(e){return locale$2=formatLocale$1(e),format=locale$2.format,formatPrefix=locale$2.formatPrefix,locale$2}function precisionFixed(e){return Math.max(0,-exponent(Math.abs(e)))}function precisionPrefix(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(exponent(t)/3)))*3-exponent(Math.abs(e)))}function precisionRound(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,exponent(t)-exponent(e))+1}function tickFormat(e,t,n,a){var i=tickStep(e,t,n),o;switch(a=formatSpecifier(a==null?",f":a),a.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return a.precision==null&&!isNaN(o=precisionPrefix(i,s))&&(a.precision=o),formatPrefix(a,s)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(o=precisionRound(i,Math.max(Math.abs(e),Math.abs(t))))&&(a.precision=o-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(o=precisionFixed(i))&&(a.precision=o-(a.type==="%")*2);break}}return format(a)}function linearish(e){var t=e.domain;return e.ticks=function(n){var a=t();return ticks(a[0],a[a.length-1],n==null?10:n)},e.tickFormat=function(n,a){var i=t();return tickFormat(i[0],i[i.length-1],n==null?10:n,a)},e.nice=function(n){n==null&&(n=10);var a=t(),i=0,o=a.length-1,s=a[i],l=a[o],c,u,d=10;for(l<s&&(u=s,s=l,l=u,u=i,i=o,o=u);d-- >0;){if(u=tickIncrement(s,l,n),u===c)return a[i]=s,a[o]=l,t(a);if(u>0)s=Math.floor(s/u)*u,l=Math.ceil(l/u)*u;else if(u<0)s=Math.ceil(s*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function linear(){var e=continuous();return e.copy=function(){return copy$1(e,linear())},initRange.apply(e,arguments),linearish(e)}function identity$1(e){var t;function n(a){return a==null||isNaN(a=+a)?t:a}return n.invert=n,n.domain=n.range=function(a){return arguments.length?(e=Array.from(a,number$1),n):e.slice()},n.unknown=function(a){return arguments.length?(t=a,n):t},n.copy=function(){return identity$1(e).unknown(t)},e=arguments.length?Array.from(e,number$1):[0,1],linearish(n)}function nice(e,t){e=e.slice();var n=0,a=e.length-1,i=e[n],o=e[a],s;return o<i&&(s=n,n=a,a=s,s=i,i=o,o=s),e[n]=t.floor(i),e[a]=t.ceil(o),e}function transformLog(e){return Math.log(e)}function transformExp(e){return Math.exp(e)}function transformLogn(e){return-Math.log(-e)}function transformExpn(e){return-Math.exp(-e)}function pow10(e){return isFinite(e)?+("1e"+e):e<0?0:e}function powp(e){return e===10?pow10:e===Math.E?Math.exp:t=>Math.pow(e,t)}function logp(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function reflect(e){return(t,n)=>-e(-t,n)}function loggish(e){const t=e(transformLog,transformExp),n=t.domain;let a=10,i,o;function s(){return i=logp(a),o=powp(a),n()[0]<0?(i=reflect(i),o=reflect(o),e(transformLogn,transformExpn)):e(transformLog,transformExp),t}return t.base=function(l){return arguments.length?(a=+l,s()):a},t.domain=function(l){return arguments.length?(n(l),s()):n()},t.ticks=l=>{const c=n();let u=c[0],d=c[c.length-1];const p=d<u;p&&([u,d]=[d,u]);let f=i(u),h=i(d),v,b;const g=l==null?10:+l;let E=[];if(!(a%1)&&h-f<g){if(f=Math.floor(f),h=Math.ceil(h),u>0){for(;f<=h;++f)for(v=1;v<a;++v)if(b=f<0?v/o(-f):v*o(f),!(b<u)){if(b>d)break;E.push(b)}}else for(;f<=h;++f)for(v=a-1;v>=1;--v)if(b=f>0?v/o(-f):v*o(f),!(b<u)){if(b>d)break;E.push(b)}E.length*2<g&&(E=ticks(u,d,g))}else E=ticks(f,h,Math.min(h-f,g)).map(o);return p?E.reverse():E},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=a===10?"s":","),typeof c!="function"&&(!(a%1)&&(c=formatSpecifier(c)).precision==null&&(c.trim=!0),c=format(c)),l===1/0)return c;const u=Math.max(1,a*l/t.ticks().length);return d=>{let p=d/o(Math.round(i(d)));return p*a<a-.5&&(p*=a),p<=u?c(d):""}},t.nice=()=>n(nice(n(),{floor:l=>o(Math.floor(i(l))),ceil:l=>o(Math.ceil(i(l)))})),t}function log(){const e=loggish(transformer$2()).domain([1,10]);return e.copy=()=>copy$1(e,log()).base(e.base()),initRange.apply(e,arguments),e}function transformSymlog(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function transformSymexp(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function symlogish(e){var t=1,n=e(transformSymlog(t),transformSymexp(t));return n.constant=function(a){return arguments.length?e(transformSymlog(t=+a),transformSymexp(t)):t},linearish(n)}function symlog(){var e=symlogish(transformer$2());return e.copy=function(){return copy$1(e,symlog()).constant(e.constant())},initRange.apply(e,arguments)}function transformPow(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function transformSqrt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function transformSquare(e){return e<0?-e*e:e*e}function powish(e){var t=e(identity$3,identity$3),n=1;function a(){return n===1?e(identity$3,identity$3):n===.5?e(transformSqrt,transformSquare):e(transformPow(n),transformPow(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,a()):n},linearish(t)}function pow(){var e=powish(transformer$2());return e.copy=function(){return copy$1(e,pow()).exponent(e.exponent())},initRange.apply(e,arguments),e}function sqrt(){return pow.apply(null,arguments).exponent(.5)}function square(e){return Math.sign(e)*e*e}function unsquare(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function radial(){var e=continuous(),t=[0,1],n=!1,a;function i(o){var s=unsquare(e(o));return isNaN(s)?a:n?Math.round(s):s}return i.invert=function(o){return e.invert(square(o))},i.domain=function(o){return arguments.length?(e.domain(o),i):e.domain()},i.range=function(o){return arguments.length?(e.range((t=Array.from(o,number$1)).map(square)),i):t.slice()},i.rangeRound=function(o){return i.range(o).round(!0)},i.round=function(o){return arguments.length?(n=!!o,i):n},i.clamp=function(o){return arguments.length?(e.clamp(o),i):e.clamp()},i.unknown=function(o){return arguments.length?(a=o,i):a},i.copy=function(){return radial(e.domain(),t).round(n).clamp(e.clamp()).unknown(a)},initRange.apply(i,arguments),linearish(i)}function quantile(){var e=[],t=[],n=[],a;function i(){var s=0,l=Math.max(1,t.length);for(n=new Array(l-1);++s<l;)n[s-1]=quantileSorted(e,s/l);return o}function o(s){return s==null||isNaN(s=+s)?a:t[bisectRight(n,s)]}return o.invertExtent=function(s){var l=t.indexOf(s);return l<0?[NaN,NaN]:[l>0?n[l-1]:e[0],l<n.length?n[l]:e[e.length-1]]},o.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let l of s)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(ascending),i()},o.range=function(s){return arguments.length?(t=Array.from(s),i()):t.slice()},o.unknown=function(s){return arguments.length?(a=s,o):a},o.quantiles=function(){return n.slice()},o.copy=function(){return quantile().domain(e).range(t).unknown(a)},initRange.apply(o,arguments)}function quantize(){var e=0,t=1,n=1,a=[.5],i=[0,1],o;function s(c){return c!=null&&c<=c?i[bisectRight(a,c,0,n)]:o}function l(){var c=-1;for(a=new Array(n);++c<n;)a[c]=((c+1)*t-(c-n)*e)/(n+1);return s}return s.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},s.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,l()):i.slice()},s.invertExtent=function(c){var u=i.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,a[0]]:u>=n?[a[n-1],t]:[a[u-1],a[u]]},s.unknown=function(c){return arguments.length&&(o=c),s},s.thresholds=function(){return a.slice()},s.copy=function(){return quantize().domain([e,t]).range(i).unknown(o)},initRange.apply(linearish(s),arguments)}function threshold(){var e=[.5],t=[0,1],n,a=1;function i(o){return o!=null&&o<=o?t[bisectRight(e,o,0,a)]:n}return i.domain=function(o){return arguments.length?(e=Array.from(o),a=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(o){return arguments.length?(t=Array.from(o),a=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(o){var s=t.indexOf(o);return[e[s-1],e[s]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return threshold().domain(e).range(t).unknown(n)},initRange.apply(i,arguments)}const t0=new Date,t1=new Date;function timeInterval(e,t,n,a){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{const s=i(o),l=i.ceil(o);return o-s<l-o?s:l},i.offset=(o,s)=>(t(o=new Date(+o),s==null?1:Math.floor(s)),o),i.range=(o,s,l)=>{const c=[];if(o=i.ceil(o),l=l==null?1:Math.floor(l),!(o<s)||!(l>0))return c;let u;do c.push(u=new Date(+o)),t(o,l),e(o);while(u<o&&o<s);return c},i.filter=o=>timeInterval(s=>{if(s>=s)for(;e(s),!o(s);)s.setTime(s-1)},(s,l)=>{if(s>=s)if(l<0)for(;++l<=0;)for(;t(s,-1),!o(s););else for(;--l>=0;)for(;t(s,1),!o(s););}),n&&(i.count=(o,s)=>(t0.setTime(+o),t1.setTime(+s),e(t0),e(t1),Math.floor(n(t0,t1))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(a?s=>a(s)%o===0:s=>i.count(0,s)%o===0):i)),i}const millisecond=timeInterval(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);millisecond.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?timeInterval(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):millisecond);millisecond.range;const durationSecond=1e3,durationMinute=durationSecond*60,durationHour=durationMinute*60,durationDay=durationHour*24,durationWeek=durationDay*7,durationMonth=durationDay*30,durationYear=durationDay*365,second=timeInterval(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*durationSecond)},(e,t)=>(t-e)/durationSecond,e=>e.getUTCSeconds());second.range;const timeMinute=timeInterval(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*durationSecond)},(e,t)=>{e.setTime(+e+t*durationMinute)},(e,t)=>(t-e)/durationMinute,e=>e.getMinutes());timeMinute.range;const utcMinute=timeInterval(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*durationMinute)},(e,t)=>(t-e)/durationMinute,e=>e.getUTCMinutes());utcMinute.range;const timeHour=timeInterval(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*durationSecond-e.getMinutes()*durationMinute)},(e,t)=>{e.setTime(+e+t*durationHour)},(e,t)=>(t-e)/durationHour,e=>e.getHours());timeHour.range;const utcHour=timeInterval(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*durationHour)},(e,t)=>(t-e)/durationHour,e=>e.getUTCHours());utcHour.range;const timeDay=timeInterval(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*durationMinute)/durationDay,e=>e.getDate()-1);timeDay.range;const utcDay=timeInterval(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/durationDay,e=>e.getUTCDate()-1);utcDay.range;const unixDay=timeInterval(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/durationDay,e=>Math.floor(e/durationDay));unixDay.range;function timeWeekday(e){return timeInterval(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*durationMinute)/durationWeek)}const timeSunday=timeWeekday(0),timeMonday=timeWeekday(1),timeTuesday=timeWeekday(2),timeWednesday=timeWeekday(3),timeThursday=timeWeekday(4),timeFriday=timeWeekday(5),timeSaturday=timeWeekday(6);timeSunday.range;timeMonday.range;timeTuesday.range;timeWednesday.range;timeThursday.range;timeFriday.range;timeSaturday.range;function utcWeekday(e){return timeInterval(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/durationWeek)}const utcSunday=utcWeekday(0),utcMonday=utcWeekday(1),utcTuesday=utcWeekday(2),utcWednesday=utcWeekday(3),utcThursday=utcWeekday(4),utcFriday=utcWeekday(5),utcSaturday=utcWeekday(6);utcSunday.range;utcMonday.range;utcTuesday.range;utcWednesday.range;utcThursday.range;utcFriday.range;utcSaturday.range;const timeMonth=timeInterval(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());timeMonth.range;const utcMonth=timeInterval(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());utcMonth.range;const timeYear=timeInterval(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());timeYear.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:timeInterval(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});timeYear.range;const utcYear=timeInterval(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());utcYear.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:timeInterval(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});utcYear.range;function ticker(e,t,n,a,i,o){const s=[[second,1,durationSecond],[second,5,5*durationSecond],[second,15,15*durationSecond],[second,30,30*durationSecond],[o,1,durationMinute],[o,5,5*durationMinute],[o,15,15*durationMinute],[o,30,30*durationMinute],[i,1,durationHour],[i,3,3*durationHour],[i,6,6*durationHour],[i,12,12*durationHour],[a,1,durationDay],[a,2,2*durationDay],[n,1,durationWeek],[t,1,durationMonth],[t,3,3*durationMonth],[e,1,durationYear]];function l(u,d,p){const f=d<u;f&&([u,d]=[d,u]);const h=p&&typeof p.range=="function"?p:c(u,d,p),v=h?h.range(u,+d+1):[];return f?v.reverse():v}function c(u,d,p){const f=Math.abs(d-u)/p,h=bisector(([,,g])=>g).right(s,f);if(h===s.length)return e.every(tickStep(u/durationYear,d/durationYear,p));if(h===0)return millisecond.every(Math.max(tickStep(u,d,p),1));const[v,b]=s[f/s[h-1][2]<s[h][2]/f?h-1:h];return v.every(b)}return[l,c]}const[utcTicks,utcTickInterval]=ticker(utcYear,utcMonth,utcSunday,unixDay,utcHour,utcMinute),[timeTicks,timeTickInterval]=ticker(timeYear,timeMonth,timeSunday,timeDay,timeHour,timeMinute);function localDate(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function utcDate(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function newDate(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function formatLocale(e){var t=e.dateTime,n=e.date,a=e.time,i=e.periods,o=e.days,s=e.shortDays,l=e.months,c=e.shortMonths,u=formatRe(i),d=formatLookup(i),p=formatRe(o),f=formatLookup(o),h=formatRe(s),v=formatLookup(s),b=formatRe(l),g=formatLookup(l),E=formatRe(c),j=formatLookup(c),w={a:F,A:Z,b:U,B:Q,c:null,d:formatDayOfMonth,e:formatDayOfMonth,f:formatMicroseconds,g:formatYearISO,G:formatFullYearISO,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:W,q:D,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatSeconds,u:formatWeekdayNumberMonday,U:formatWeekNumberSunday,V:formatWeekNumberISO,w:formatWeekdayNumberSunday,W:formatWeekNumberMonday,x:null,X:null,y:formatYear,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent},S={a:H,A:J,b:ee,B:Y,c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:formatUTCMicroseconds,g:formatUTCYearISO,G:formatUTCFullYearISO,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:ye,q:xe,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatUTCSeconds,u:formatUTCWeekdayNumberMonday,U:formatUTCWeekNumberSunday,V:formatUTCWeekNumberISO,w:formatUTCWeekdayNumberSunday,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent},A={a:O,A:N,b:T,B:L,c:B,d:parseDayOfMonth,e:parseDayOfMonth,f:parseMicroseconds,g:parseYear,G:parseFullYear,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:C,q:parseQuarter,Q:parseUnixTimestamp,s:parseUnixTimestampSeconds,S:parseSeconds,u:parseWeekdayNumberMonday,U:parseWeekNumberSunday,V:parseWeekNumberISO,w:parseWeekdayNumberSunday,W:parseWeekNumberMonday,x:I,X:z,y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};w.x=R(n,w),w.X=R(a,w),w.c=R(t,w),S.x=R(n,S),S.X=R(a,S),S.c=R(t,S);function R(M,K){return function(V){var k=[],ae=-1,G=0,se=M.length,ie,le,we;for(V instanceof Date||(V=new Date(+V));++ae<se;)M.charCodeAt(ae)===37&&(k.push(M.slice(G,ae)),(le=pads[ie=M.charAt(++ae)])!=null?ie=M.charAt(++ae):le=ie==="e"?" ":"0",(we=K[ie])&&(ie=we(V,le)),k.push(ie),G=ae+1);return k.push(M.slice(G,ae)),k.join("")}}function _(M,K){return function(V){var k=newDate(1900,void 0,1),ae=$(k,M,V+="",0),G,se;if(ae!=V.length)return null;if("Q"in k)return new Date(k.Q);if("s"in k)return new Date(k.s*1e3+("L"in k?k.L:0));if(K&&!("Z"in k)&&(k.Z=0),"p"in k&&(k.H=k.H%12+k.p*12),k.m===void 0&&(k.m="q"in k?k.q:0),"V"in k){if(k.V<1||k.V>53)return null;"w"in k||(k.w=1),"Z"in k?(G=utcDate(newDate(k.y,0,1)),se=G.getUTCDay(),G=se>4||se===0?utcMonday.ceil(G):utcMonday(G),G=utcDay.offset(G,(k.V-1)*7),k.y=G.getUTCFullYear(),k.m=G.getUTCMonth(),k.d=G.getUTCDate()+(k.w+6)%7):(G=localDate(newDate(k.y,0,1)),se=G.getDay(),G=se>4||se===0?timeMonday.ceil(G):timeMonday(G),G=timeDay.offset(G,(k.V-1)*7),k.y=G.getFullYear(),k.m=G.getMonth(),k.d=G.getDate()+(k.w+6)%7)}else("W"in k||"U"in k)&&("w"in k||(k.w="u"in k?k.u%7:"W"in k?1:0),se="Z"in k?utcDate(newDate(k.y,0,1)).getUTCDay():localDate(newDate(k.y,0,1)).getDay(),k.m=0,k.d="W"in k?(k.w+6)%7+k.W*7-(se+5)%7:k.w+k.U*7-(se+6)%7);return"Z"in k?(k.H+=k.Z/100|0,k.M+=k.Z%100,utcDate(k)):localDate(k)}}function $(M,K,V,k){for(var ae=0,G=K.length,se=V.length,ie,le;ae<G;){if(k>=se)return-1;if(ie=K.charCodeAt(ae++),ie===37){if(ie=K.charAt(ae++),le=A[ie in pads?K.charAt(ae++):ie],!le||(k=le(M,V,k))<0)return-1}else if(ie!=V.charCodeAt(k++))return-1}return k}function C(M,K,V){var k=u.exec(K.slice(V));return k?(M.p=d.get(k[0].toLowerCase()),V+k[0].length):-1}function O(M,K,V){var k=h.exec(K.slice(V));return k?(M.w=v.get(k[0].toLowerCase()),V+k[0].length):-1}function N(M,K,V){var k=p.exec(K.slice(V));return k?(M.w=f.get(k[0].toLowerCase()),V+k[0].length):-1}function T(M,K,V){var k=E.exec(K.slice(V));return k?(M.m=j.get(k[0].toLowerCase()),V+k[0].length):-1}function L(M,K,V){var k=b.exec(K.slice(V));return k?(M.m=g.get(k[0].toLowerCase()),V+k[0].length):-1}function B(M,K,V){return $(M,t,K,V)}function I(M,K,V){return $(M,n,K,V)}function z(M,K,V){return $(M,a,K,V)}function F(M){return s[M.getDay()]}function Z(M){return o[M.getDay()]}function U(M){return c[M.getMonth()]}function Q(M){return l[M.getMonth()]}function W(M){return i[+(M.getHours()>=12)]}function D(M){return 1+~~(M.getMonth()/3)}function H(M){return s[M.getUTCDay()]}function J(M){return o[M.getUTCDay()]}function ee(M){return c[M.getUTCMonth()]}function Y(M){return l[M.getUTCMonth()]}function ye(M){return i[+(M.getUTCHours()>=12)]}function xe(M){return 1+~~(M.getUTCMonth()/3)}return{format:function(M){var K=R(M+="",w);return K.toString=function(){return M},K},parse:function(M){var K=_(M+="",!1);return K.toString=function(){return M},K},utcFormat:function(M){var K=R(M+="",S);return K.toString=function(){return M},K},utcParse:function(M){var K=_(M+="",!0);return K.toString=function(){return M},K}}}var pads={"-":"",_:" ",0:"0"},numberRe=/^\s*\d+/,percentRe=/^%/,requoteRe=/[\\^$*+?|[\]().{}]/g;function pad(e,t,n){var a=e<0?"-":"",i=(a?-e:e)+"",o=i.length;return a+(o<n?new Array(n-o+1).join(t)+i:i)}function requote(e){return e.replace(requoteRe,"\\$&")}function formatRe(e){return new RegExp("^(?:"+e.map(requote).join("|")+")","i")}function formatLookup(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function parseWeekdayNumberSunday(e,t,n){var a=numberRe.exec(t.slice(n,n+1));return a?(e.w=+a[0],n+a[0].length):-1}function parseWeekdayNumberMonday(e,t,n){var a=numberRe.exec(t.slice(n,n+1));return a?(e.u=+a[0],n+a[0].length):-1}function parseWeekNumberSunday(e,t,n){var a=numberRe.exec(t.slice(n,n+2));return a?(e.U=+a[0],n+a[0].length):-1}function parseWeekNumberISO(e,t,n){var a=numberRe.exec(t.slice(n,n+2));return a?(e.V=+a[0],n+a[0].length):-1}function parseWeekNumberMonday(e,t,n){var a=numberRe.exec(t.slice(n,n+2));return a?(e.W=+a[0],n+a[0].length):-1}function parseFullYear(e,t,n){var a=numberRe.exec(t.slice(n,n+4));return a?(e.y=+a[0],n+a[0].length):-1}function parseYear(e,t,n){var a=numberRe.exec(t.slice(n,n+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),n+a[0].length):-1}function parseZone(e,t,n){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),n+a[0].length):-1}function parseQuarter(e,t,n){var a=numberRe.exec(t.slice(n,n+1));return a?(e.q=a[0]*3-3,n+a[0].length):-1}function parseMonthNumber(e,t,n){var a=numberRe.exec(t.slice(n,n+2));return a?(e.m=a[0]-1,n+a[0].length):-1}function parseDayOfMonth(e,t,n){var a=numberRe.exec(t.slice(n,n+2));return a?(e.d=+a[0],n+a[0].length):-1}function parseDayOfYear(e,t,n){var a=numberRe.exec(t.slice(n,n+3));return a?(e.m=0,e.d=+a[0],n+a[0].length):-1}function parseHour24(e,t,n){var a=numberRe.exec(t.slice(n,n+2));return a?(e.H=+a[0],n+a[0].length):-1}function parseMinutes(e,t,n){var a=numberRe.exec(t.slice(n,n+2));return a?(e.M=+a[0],n+a[0].length):-1}function parseSeconds(e,t,n){var a=numberRe.exec(t.slice(n,n+2));return a?(e.S=+a[0],n+a[0].length):-1}function parseMilliseconds(e,t,n){var a=numberRe.exec(t.slice(n,n+3));return a?(e.L=+a[0],n+a[0].length):-1}function parseMicroseconds(e,t,n){var a=numberRe.exec(t.slice(n,n+6));return a?(e.L=Math.floor(a[0]/1e3),n+a[0].length):-1}function parseLiteralPercent(e,t,n){var a=percentRe.exec(t.slice(n,n+1));return a?n+a[0].length:-1}function parseUnixTimestamp(e,t,n){var a=numberRe.exec(t.slice(n));return a?(e.Q=+a[0],n+a[0].length):-1}function parseUnixTimestampSeconds(e,t,n){var a=numberRe.exec(t.slice(n));return a?(e.s=+a[0],n+a[0].length):-1}function formatDayOfMonth(e,t){return pad(e.getDate(),t,2)}function formatHour24(e,t){return pad(e.getHours(),t,2)}function formatHour12(e,t){return pad(e.getHours()%12||12,t,2)}function formatDayOfYear(e,t){return pad(1+timeDay.count(timeYear(e),e),t,3)}function formatMilliseconds(e,t){return pad(e.getMilliseconds(),t,3)}function formatMicroseconds(e,t){return formatMilliseconds(e,t)+"000"}function formatMonthNumber(e,t){return pad(e.getMonth()+1,t,2)}function formatMinutes(e,t){return pad(e.getMinutes(),t,2)}function formatSeconds(e,t){return pad(e.getSeconds(),t,2)}function formatWeekdayNumberMonday(e){var t=e.getDay();return t===0?7:t}function formatWeekNumberSunday(e,t){return pad(timeSunday.count(timeYear(e)-1,e),t,2)}function dISO(e){var t=e.getDay();return t>=4||t===0?timeThursday(e):timeThursday.ceil(e)}function formatWeekNumberISO(e,t){return e=dISO(e),pad(timeThursday.count(timeYear(e),e)+(timeYear(e).getDay()===4),t,2)}function formatWeekdayNumberSunday(e){return e.getDay()}function formatWeekNumberMonday(e,t){return pad(timeMonday.count(timeYear(e)-1,e),t,2)}function formatYear(e,t){return pad(e.getFullYear()%100,t,2)}function formatYearISO(e,t){return e=dISO(e),pad(e.getFullYear()%100,t,2)}function formatFullYear(e,t){return pad(e.getFullYear()%1e4,t,4)}function formatFullYearISO(e,t){var n=e.getDay();return e=n>=4||n===0?timeThursday(e):timeThursday.ceil(e),pad(e.getFullYear()%1e4,t,4)}function formatZone(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+pad(t/60|0,"0",2)+pad(t%60,"0",2)}function formatUTCDayOfMonth(e,t){return pad(e.getUTCDate(),t,2)}function formatUTCHour24(e,t){return pad(e.getUTCHours(),t,2)}function formatUTCHour12(e,t){return pad(e.getUTCHours()%12||12,t,2)}function formatUTCDayOfYear(e,t){return pad(1+utcDay.count(utcYear(e),e),t,3)}function formatUTCMilliseconds(e,t){return pad(e.getUTCMilliseconds(),t,3)}function formatUTCMicroseconds(e,t){return formatUTCMilliseconds(e,t)+"000"}function formatUTCMonthNumber(e,t){return pad(e.getUTCMonth()+1,t,2)}function formatUTCMinutes(e,t){return pad(e.getUTCMinutes(),t,2)}function formatUTCSeconds(e,t){return pad(e.getUTCSeconds(),t,2)}function formatUTCWeekdayNumberMonday(e){var t=e.getUTCDay();return t===0?7:t}function formatUTCWeekNumberSunday(e,t){return pad(utcSunday.count(utcYear(e)-1,e),t,2)}function UTCdISO(e){var t=e.getUTCDay();return t>=4||t===0?utcThursday(e):utcThursday.ceil(e)}function formatUTCWeekNumberISO(e,t){return e=UTCdISO(e),pad(utcThursday.count(utcYear(e),e)+(utcYear(e).getUTCDay()===4),t,2)}function formatUTCWeekdayNumberSunday(e){return e.getUTCDay()}function formatUTCWeekNumberMonday(e,t){return pad(utcMonday.count(utcYear(e)-1,e),t,2)}function formatUTCYear(e,t){return pad(e.getUTCFullYear()%100,t,2)}function formatUTCYearISO(e,t){return e=UTCdISO(e),pad(e.getUTCFullYear()%100,t,2)}function formatUTCFullYear(e,t){return pad(e.getUTCFullYear()%1e4,t,4)}function formatUTCFullYearISO(e,t){var n=e.getUTCDay();return e=n>=4||n===0?utcThursday(e):utcThursday.ceil(e),pad(e.getUTCFullYear()%1e4,t,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}function formatUnixTimestamp(e){return+e}function formatUnixTimestampSeconds(e){return Math.floor(+e/1e3)}var locale$1,timeFormat,utcFormat;defaultLocale({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function defaultLocale(e){return locale$1=formatLocale(e),timeFormat=locale$1.format,locale$1.parse,utcFormat=locale$1.utcFormat,locale$1.utcParse,locale$1}function date(e){return new Date(e)}function number(e){return e instanceof Date?+e:+new Date(+e)}function calendar(e,t,n,a,i,o,s,l,c,u){var d=continuous(),p=d.invert,f=d.domain,h=u(".%L"),v=u(":%S"),b=u("%I:%M"),g=u("%I %p"),E=u("%a %d"),j=u("%b %d"),w=u("%B"),S=u("%Y");function A(R){return(c(R)<R?h:l(R)<R?v:s(R)<R?b:o(R)<R?g:a(R)<R?i(R)<R?E:j:n(R)<R?w:S)(R)}return d.invert=function(R){return new Date(p(R))},d.domain=function(R){return arguments.length?f(Array.from(R,number)):f().map(date)},d.ticks=function(R){var _=f();return e(_[0],_[_.length-1],R==null?10:R)},d.tickFormat=function(R,_){return _==null?A:u(_)},d.nice=function(R){var _=f();return(!R||typeof R.range!="function")&&(R=t(_[0],_[_.length-1],R==null?10:R)),R?f(nice(_,R)):d},d.copy=function(){return copy$1(d,calendar(e,t,n,a,i,o,s,l,c,u))},d}function time(){return initRange.apply(calendar(timeTicks,timeTickInterval,timeYear,timeMonth,timeSunday,timeDay,timeHour,timeMinute,second,timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function utcTime(){return initRange.apply(calendar(utcTicks,utcTickInterval,utcYear,utcMonth,utcSunday,utcDay,utcHour,utcMinute,second,utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function transformer$1(){var e=0,t=1,n,a,i,o,s=identity$3,l=!1,c;function u(p){return p==null||isNaN(p=+p)?c:s(i===0?.5:(p=(o(p)-n)*i,l?Math.max(0,Math.min(1,p)):p))}u.domain=function(p){return arguments.length?([e,t]=p,n=o(e=+e),a=o(t=+t),i=n===a?0:1/(a-n),u):[e,t]},u.clamp=function(p){return arguments.length?(l=!!p,u):l},u.interpolator=function(p){return arguments.length?(s=p,u):s};function d(p){return function(f){var h,v;return arguments.length?([h,v]=f,s=p(h,v),u):[s(0),s(1)]}}return u.range=d(interpolate),u.rangeRound=d(interpolateRound),u.unknown=function(p){return arguments.length?(c=p,u):c},function(p){return o=p,n=p(e),a=p(t),i=n===a?0:1/(a-n),u}}function copy(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function sequential(){var e=linearish(transformer$1()(identity$3));return e.copy=function(){return copy(e,sequential())},initInterpolator.apply(e,arguments)}function sequentialLog(){var e=loggish(transformer$1()).domain([1,10]);return e.copy=function(){return copy(e,sequentialLog()).base(e.base())},initInterpolator.apply(e,arguments)}function sequentialSymlog(){var e=symlogish(transformer$1());return e.copy=function(){return copy(e,sequentialSymlog()).constant(e.constant())},initInterpolator.apply(e,arguments)}function sequentialPow(){var e=powish(transformer$1());return e.copy=function(){return copy(e,sequentialPow()).exponent(e.exponent())},initInterpolator.apply(e,arguments)}function sequentialSqrt(){return sequentialPow.apply(null,arguments).exponent(.5)}function sequentialQuantile(){var e=[],t=identity$3;function n(a){if(a!=null&&!isNaN(a=+a))return t((bisectRight(e,a,1)-1)/(e.length-1))}return n.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let i of a)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(ascending),n},n.interpolator=function(a){return arguments.length?(t=a,n):t},n.range=function(){return e.map((a,i)=>t(i/(e.length-1)))},n.quantiles=function(a){return Array.from({length:a+1},(i,o)=>quantile$1(e,o/a))},n.copy=function(){return sequentialQuantile(t).domain(e)},initInterpolator.apply(n,arguments)}function transformer(){var e=0,t=.5,n=1,a=1,i,o,s,l,c,u=identity$3,d,p=!1,f;function h(b){return isNaN(b=+b)?f:(b=.5+((b=+d(b))-o)*(a*b<a*o?l:c),u(p?Math.max(0,Math.min(1,b)):b))}h.domain=function(b){return arguments.length?([e,t,n]=b,i=d(e=+e),o=d(t=+t),s=d(n=+n),l=i===o?0:.5/(o-i),c=o===s?0:.5/(s-o),a=o<i?-1:1,h):[e,t,n]},h.clamp=function(b){return arguments.length?(p=!!b,h):p},h.interpolator=function(b){return arguments.length?(u=b,h):u};function v(b){return function(g){var E,j,w;return arguments.length?([E,j,w]=g,u=piecewise(b,[E,j,w]),h):[u(0),u(.5),u(1)]}}return h.range=v(interpolate),h.rangeRound=v(interpolateRound),h.unknown=function(b){return arguments.length?(f=b,h):f},function(b){return d=b,i=b(e),o=b(t),s=b(n),l=i===o?0:.5/(o-i),c=o===s?0:.5/(s-o),a=o<i?-1:1,h}}function diverging(){var e=linearish(transformer()(identity$3));return e.copy=function(){return copy(e,diverging())},initInterpolator.apply(e,arguments)}function divergingLog(){var e=loggish(transformer()).domain([.1,1,10]);return e.copy=function(){return copy(e,divergingLog()).base(e.base())},initInterpolator.apply(e,arguments)}function divergingSymlog(){var e=symlogish(transformer());return e.copy=function(){return copy(e,divergingSymlog()).constant(e.constant())},initInterpolator.apply(e,arguments)}function divergingPow(){var e=powish(transformer());return e.copy=function(){return copy(e,divergingPow()).exponent(e.exponent())},initInterpolator.apply(e,arguments)}function divergingSqrt(){return divergingPow.apply(null,arguments).exponent(.5)}const d3Scales=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:band,scaleDiverging:diverging,scaleDivergingLog:divergingLog,scaleDivergingPow:divergingPow,scaleDivergingSqrt:divergingSqrt,scaleDivergingSymlog:divergingSymlog,scaleIdentity:identity$1,scaleImplicit:implicit,scaleLinear:linear,scaleLog:log,scaleOrdinal:ordinal,scalePoint:point,scalePow:pow,scaleQuantile:quantile,scaleQuantize:quantize,scaleRadial:radial,scaleSequential:sequential,scaleSequentialLog:sequentialLog,scaleSequentialPow:sequentialPow,scaleSequentialQuantile:sequentialQuantile,scaleSequentialSqrt:sequentialSqrt,scaleSequentialSymlog:sequentialSymlog,scaleSqrt:sqrt,scaleSymlog:symlog,scaleThreshold:threshold,scaleTime:time,scaleUtc:utcTime,tickFormat},Symbol.toStringTag,{value:"Module"}));var selectChartDataWithIndexes=e=>e.chartData,selectChartDataAndAlwaysIgnoreIndexes=createSelector([selectChartDataWithIndexes],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),selectChartDataWithIndexesIfNotInPanorama=(e,t,n,a)=>a?selectChartDataAndAlwaysIgnoreIndexes(e):selectChartDataWithIndexes(e);function isWellFormedNumberDomain(e){if(Array.isArray(e)&&e.length===2){var[t,n]=e;if(isWellBehavedNumber(t)&&isWellBehavedNumber(n))return!0}return!1}function extendDomain(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function numericalDomainSpecifiedWithoutRequiringData(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,a]=e,i,o;if(isWellBehavedNumber(n))i=n;else if(typeof n=="function")return;if(isWellBehavedNumber(a))o=a;else if(typeof a=="function")return;var s=[i,o];if(isWellFormedNumberDomain(s))return s}}function parseNumericalUserDomain(e,t,n){if(!(!n&&t==null)){if(typeof e=="function"&&t!=null)try{var a=e(t,n);if(isWellFormedNumberDomain(a))return extendDomain(a,t,n)}catch(h){}if(Array.isArray(e)&&e.length===2){var[i,o]=e,s,l;if(i==="auto")t!=null&&(s=Math.min(...t));else if(isNumber(i))s=i;else if(typeof i=="function")try{t!=null&&(s=i(t==null?void 0:t[0]))}catch(h){}else if(typeof i=="string"&&MIN_VALUE_REG.test(i)){var c=MIN_VALUE_REG.exec(i);if(c==null||t==null)s=void 0;else{var u=+c[1];s=t[0]-u}}else s=t==null?void 0:t[0];if(o==="auto")t!=null&&(l=Math.max(...t));else if(isNumber(o))l=o;else if(typeof o=="function")try{t!=null&&(l=o(t==null?void 0:t[1]))}catch(h){}else if(typeof o=="string"&&MAX_VALUE_REG.test(o)){var d=MAX_VALUE_REG.exec(o);if(d==null||t==null)l=void 0;else{var p=+d[1];l=t[1]+p}}else l=t==null?void 0:t[1];var f=[s,l];if(isWellFormedNumberDomain(f))return t==null?f:extendDomain(f,t,n)}}}var MAX_DIGITS=1e9,defaults={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Decimal,external=!0,decimalError="[DecimalError] ",invalidArgument=decimalError+"Invalid argument: ",exponentOutOfRange=decimalError+"Exponent out of range: ",mathfloor=Math.floor,mathpow=Math.pow,isDecimal=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ONE,BASE=1e7,LOG_BASE=7,MAX_SAFE_INTEGER=9007199254740991,MAX_E=mathfloor(MAX_SAFE_INTEGER/LOG_BASE),P={};P.absoluteValue=P.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};P.comparedTo=P.cmp=function(e){var t,n,a,i,o=this;if(e=new o.constructor(e),o.s!==e.s)return o.s||-e.s;if(o.e!==e.e)return o.e>e.e^o.s<0?1:-1;for(a=o.d.length,i=e.d.length,t=0,n=a<i?a:i;t<n;++t)if(o.d[t]!==e.d[t])return o.d[t]>e.d[t]^o.s<0?1:-1;return a===i?0:a>i^o.s<0?1:-1};P.decimalPlaces=P.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*LOG_BASE;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};P.dividedBy=P.div=function(e){return divide(this,new this.constructor(e))};P.dividedToIntegerBy=P.idiv=function(e){var t=this,n=t.constructor;return round(divide(t,new n(e),0,1),n.precision)};P.equals=P.eq=function(e){return!this.cmp(e)};P.exponent=function(){return getBase10Exponent(this)};P.greaterThan=P.gt=function(e){return this.cmp(e)>0};P.greaterThanOrEqualTo=P.gte=function(e){return this.cmp(e)>=0};P.isInteger=P.isint=function(){return this.e>this.d.length-2};P.isNegative=P.isneg=function(){return this.s<0};P.isPositive=P.ispos=function(){return this.s>0};P.isZero=function(){return this.s===0};P.lessThan=P.lt=function(e){return this.cmp(e)<0};P.lessThanOrEqualTo=P.lte=function(e){return this.cmp(e)<1};P.logarithm=P.log=function(e){var t,n=this,a=n.constructor,i=a.precision,o=i+5;if(e===void 0)e=new a(10);else if(e=new a(e),e.s<1||e.eq(ONE))throw Error(decimalError+"NaN");if(n.s<1)throw Error(decimalError+(n.s?"NaN":"-Infinity"));return n.eq(ONE)?new a(0):(external=!1,t=divide(ln(n,o),ln(e,o),o),external=!0,round(t,i))};P.minus=P.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?subtract(t,e):add(t,(e.s=-e.s,e))};P.modulo=P.mod=function(e){var t,n=this,a=n.constructor,i=a.precision;if(e=new a(e),!e.s)throw Error(decimalError+"NaN");return n.s?(external=!1,t=divide(n,e,0,1).times(e),external=!0,n.minus(t)):round(new a(n),i)};P.naturalExponential=P.exp=function(){return exp(this)};P.naturalLogarithm=P.ln=function(){return ln(this)};P.negated=P.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};P.plus=P.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?add(t,e):subtract(t,(e.s=-e.s,e))};P.precision=P.sd=function(e){var t,n,a,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(invalidArgument+e);if(t=getBase10Exponent(i)+1,a=i.d.length-1,n=a*LOG_BASE+1,a=i.d[a],a){for(;a%10==0;a/=10)n--;for(a=i.d[0];a>=10;a/=10)n++}return e&&t>n?t:n};P.squareRoot=P.sqrt=function(){var e,t,n,a,i,o,s,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(decimalError+"NaN")}for(e=getBase10Exponent(l),external=!1,i=Math.sqrt(+l),i==0||i==1/0?(t=digitsToString(l.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=mathfloor((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),a=new c(t)):a=new c(i.toString()),n=c.precision,i=s=n+3;;)if(o=a,a=o.plus(divide(l,o,s+2)).times(.5),digitsToString(o.d).slice(0,s)===(t=digitsToString(a.d)).slice(0,s)){if(t=t.slice(s-3,s+1),i==s&&t=="4999"){if(round(o,n+1,0),o.times(o).eq(l)){a=o;break}}else if(t!="9999")break;s+=4}return external=!0,round(a,n)};P.times=P.mul=function(e){var t,n,a,i,o,s,l,c,u,d=this,p=d.constructor,f=d.d,h=(e=new p(e)).d;if(!d.s||!e.s)return new p(0);for(e.s*=d.s,n=d.e+e.e,c=f.length,u=h.length,c<u&&(o=f,f=h,h=o,s=c,c=u,u=s),o=[],s=c+u,a=s;a--;)o.push(0);for(a=u;--a>=0;){for(t=0,i=c+a;i>a;)l=o[i]+h[a]*f[i-a-1]+t,o[i--]=l%BASE|0,t=l/BASE|0;o[i]=(o[i]+t)%BASE|0}for(;!o[--s];)o.pop();return t?++n:o.shift(),e.d=o,e.e=n,external?round(e,p.precision):e};P.toDecimalPlaces=P.todp=function(e,t){var n=this,a=n.constructor;return n=new a(n),e===void 0?n:(checkInt32(e,0,MAX_DIGITS),t===void 0?t=a.rounding:checkInt32(t,0,8),round(n,e+getBase10Exponent(n)+1,t))};P.toExponential=function(e,t){var n,a=this,i=a.constructor;return e===void 0?n=toString(a,!0):(checkInt32(e,0,MAX_DIGITS),t===void 0?t=i.rounding:checkInt32(t,0,8),a=round(new i(a),e+1,t),n=toString(a,!0,e+1)),n};P.toFixed=function(e,t){var n,a,i=this,o=i.constructor;return e===void 0?toString(i):(checkInt32(e,0,MAX_DIGITS),t===void 0?t=o.rounding:checkInt32(t,0,8),a=round(new o(i),e+getBase10Exponent(i)+1,t),n=toString(a.abs(),!1,e+getBase10Exponent(a)+1),i.isneg()&&!i.isZero()?"-"+n:n)};P.toInteger=P.toint=function(){var e=this,t=e.constructor;return round(new t(e),getBase10Exponent(e)+1,t.rounding)};P.toNumber=function(){return+this};P.toPower=P.pow=function(e){var t,n,a,i,o,s,l=this,c=l.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(ONE);if(l=new c(l),!l.s){if(e.s<1)throw Error(decimalError+"Infinity");return l}if(l.eq(ONE))return l;if(a=c.precision,e.eq(ONE))return round(l,a);if(t=e.e,n=e.d.length-1,s=t>=n,o=l.s,s){if((n=d<0?-d:d)<=MAX_SAFE_INTEGER){for(i=new c(ONE),t=Math.ceil(a/LOG_BASE+4),external=!1;n%2&&(i=i.times(l),truncate(i.d,t)),n=mathfloor(n/2),n!==0;)l=l.times(l),truncate(l.d,t);return external=!0,e.s<0?new c(ONE).div(i):round(i,a)}}else if(o<0)throw Error(decimalError+"NaN");return o=o<0&&e.d[Math.max(t,n)]&1?-1:1,l.s=1,external=!1,i=e.times(ln(l,a+u)),external=!0,i=exp(i),i.s=o,i};P.toPrecision=function(e,t){var n,a,i=this,o=i.constructor;return e===void 0?(n=getBase10Exponent(i),a=toString(i,n<=o.toExpNeg||n>=o.toExpPos)):(checkInt32(e,1,MAX_DIGITS),t===void 0?t=o.rounding:checkInt32(t,0,8),i=round(new o(i),e,t),n=getBase10Exponent(i),a=toString(i,e<=n||n<=o.toExpNeg,e)),a};P.toSignificantDigits=P.tosd=function(e,t){var n=this,a=n.constructor;return e===void 0?(e=a.precision,t=a.rounding):(checkInt32(e,1,MAX_DIGITS),t===void 0?t=a.rounding:checkInt32(t,0,8)),round(new a(n),e,t)};P.toString=P.valueOf=P.val=P.toJSON=P[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=getBase10Exponent(e),n=e.constructor;return toString(e,t<=n.toExpNeg||t>=n.toExpPos)};function add(e,t){var n,a,i,o,s,l,c,u,d=e.constructor,p=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),external?round(t,p):t;if(c=e.d,u=t.d,s=e.e,i=t.e,c=c.slice(),o=s-i,o){for(o<0?(a=c,o=-o,l=u.length):(a=u,i=s,l=c.length),s=Math.ceil(p/LOG_BASE),l=s>l?s+1:l+1,o>l&&(o=l,a.length=1),a.reverse();o--;)a.push(0);a.reverse()}for(l=c.length,o=u.length,l-o<0&&(o=l,a=u,u=c,c=a),n=0;o;)n=(c[--o]=c[o]+u[o]+n)/BASE|0,c[o]%=BASE;for(n&&(c.unshift(n),++i),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=i,external?round(t,p):t}function checkInt32(e,t,n){if(e!==~~e||e<t||e>n)throw Error(invalidArgument+e)}function digitsToString(e){var t,n,a,i=e.length-1,o="",s=e[0];if(i>0){for(o+=s,t=1;t<i;t++)a=e[t]+"",n=LOG_BASE-a.length,n&&(o+=getZeroString(n)),o+=a;s=e[t],a=s+"",n=LOG_BASE-a.length,n&&(o+=getZeroString(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return o+s}var divide=function(){function e(a,i){var o,s=0,l=a.length;for(a=a.slice();l--;)o=a[l]*i+s,a[l]=o%BASE|0,s=o/BASE|0;return s&&a.unshift(s),a}function t(a,i,o,s){var l,c;if(o!=s)c=o>s?1:-1;else for(l=c=0;l<o;l++)if(a[l]!=i[l]){c=a[l]>i[l]?1:-1;break}return c}function n(a,i,o){for(var s=0;o--;)a[o]-=s,s=a[o]<i[o]?1:0,a[o]=s*BASE+a[o]-i[o];for(;!a[0]&&a.length>1;)a.shift()}return function(a,i,o,s){var l,c,u,d,p,f,h,v,b,g,E,j,w,S,A,R,_,$,C=a.constructor,O=a.s==i.s?1:-1,N=a.d,T=i.d;if(!a.s)return new C(a);if(!i.s)throw Error(decimalError+"Division by zero");for(c=a.e-i.e,_=T.length,A=N.length,h=new C(O),v=h.d=[],u=0;T[u]==(N[u]||0);)++u;if(T[u]>(N[u]||0)&&--c,o==null?j=o=C.precision:s?j=o+(getBase10Exponent(a)-getBase10Exponent(i))+1:j=o,j<0)return new C(0);if(j=j/LOG_BASE+2|0,u=0,_==1)for(d=0,T=T[0],j++;(u<A||d)&&j--;u++)w=d*BASE+(N[u]||0),v[u]=w/T|0,d=w%T|0;else{for(d=BASE/(T[0]+1)|0,d>1&&(T=e(T,d),N=e(N,d),_=T.length,A=N.length),S=_,b=N.slice(0,_),g=b.length;g<_;)b[g++]=0;$=T.slice(),$.unshift(0),R=T[0],T[1]>=BASE/2&&++R;do d=0,l=t(T,b,_,g),l<0?(E=b[0],_!=g&&(E=E*BASE+(b[1]||0)),d=E/R|0,d>1?(d>=BASE&&(d=BASE-1),p=e(T,d),f=p.length,g=b.length,l=t(p,b,f,g),l==1&&(d--,n(p,_<f?$:T,f))):(d==0&&(l=d=1),p=T.slice()),f=p.length,f<g&&p.unshift(0),n(b,p,g),l==-1&&(g=b.length,l=t(T,b,_,g),l<1&&(d++,n(b,_<g?$:T,g))),g=b.length):l===0&&(d++,b=[0]),v[u++]=d,l&&b[0]?b[g++]=N[S]||0:(b=[N[S]],g=1);while((S++<A||b[0]!==void 0)&&j--)}return v[0]||v.shift(),h.e=c,round(h,s?o+getBase10Exponent(h)+1:o)}}();function exp(e,t){var n,a,i,o,s,l,c=0,u=0,d=e.constructor,p=d.precision;if(getBase10Exponent(e)>16)throw Error(exponentOutOfRange+getBase10Exponent(e));if(!e.s)return new d(ONE);for(external=!1,l=p,s=new d(.03125);e.abs().gte(.1);)e=e.times(s),u+=5;for(a=Math.log(mathpow(2,u))/Math.LN10*2+5|0,l+=a,n=i=o=new d(ONE),d.precision=l;;){if(i=round(i.times(e),l),n=n.times(++c),s=o.plus(divide(i,n,l)),digitsToString(s.d).slice(0,l)===digitsToString(o.d).slice(0,l)){for(;u--;)o=round(o.times(o),l);return d.precision=p,t==null?(external=!0,round(o,p)):o}o=s}}function getBase10Exponent(e){for(var t=e.e*LOG_BASE,n=e.d[0];n>=10;n/=10)t++;return t}function getLn10(e,t,n){if(t>e.LN10.sd())throw external=!0,n&&(e.precision=n),Error(decimalError+"LN10 precision limit exceeded");return round(new e(e.LN10),t)}function getZeroString(e){for(var t="";e--;)t+="0";return t}function ln(e,t){var n,a,i,o,s,l,c,u,d,p=1,f=10,h=e,v=h.d,b=h.constructor,g=b.precision;if(h.s<1)throw Error(decimalError+(h.s?"NaN":"-Infinity"));if(h.eq(ONE))return new b(0);if(t==null?(external=!1,u=g):u=t,h.eq(10))return t==null&&(external=!0),getLn10(b,u);if(u+=f,b.precision=u,n=digitsToString(v),a=n.charAt(0),o=getBase10Exponent(h),Math.abs(o)<15e14){for(;a<7&&a!=1||a==1&&n.charAt(1)>3;)h=h.times(e),n=digitsToString(h.d),a=n.charAt(0),p++;o=getBase10Exponent(h),a>1?(h=new b("0."+n),o++):h=new b(a+"."+n.slice(1))}else return c=getLn10(b,u+2,g).times(o+""),h=ln(new b(a+"."+n.slice(1)),u-f).plus(c),b.precision=g,t==null?(external=!0,round(h,g)):h;for(l=s=h=divide(h.minus(ONE),h.plus(ONE),u),d=round(h.times(h),u),i=3;;){if(s=round(s.times(d),u),c=l.plus(divide(s,new b(i),u)),digitsToString(c.d).slice(0,u)===digitsToString(l.d).slice(0,u))return l=l.times(2),o!==0&&(l=l.plus(getLn10(b,u+2,g).times(o+""))),l=divide(l,new b(p),u),b.precision=g,t==null?(external=!0,round(l,g)):l;l=c,i+=2}}function parseDecimal(e,t){var n,a,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(n<0&&(n=a),n+=+t.slice(a+1),t=t.substring(0,a)):n<0&&(n=t.length),a=0;t.charCodeAt(a)===48;)++a;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(a,i),t){if(i-=a,n=n-a-1,e.e=mathfloor(n/LOG_BASE),e.d=[],a=(n+1)%LOG_BASE,n<0&&(a+=LOG_BASE),a<i){for(a&&e.d.push(+t.slice(0,a)),i-=LOG_BASE;a<i;)e.d.push(+t.slice(a,a+=LOG_BASE));t=t.slice(a),a=LOG_BASE-t.length}else a-=i;for(;a--;)t+="0";if(e.d.push(+t),external&&(e.e>MAX_E||e.e<-MAX_E))throw Error(exponentOutOfRange+n)}else e.s=0,e.e=0,e.d=[0];return e}function round(e,t,n){var a,i,o,s,l,c,u,d,p=e.d;for(s=1,o=p[0];o>=10;o/=10)s++;if(a=t-s,a<0)a+=LOG_BASE,i=t,u=p[d=0];else{if(d=Math.ceil((a+1)/LOG_BASE),o=p.length,d>=o)return e;for(u=o=p[d],s=1;o>=10;o/=10)s++;a%=LOG_BASE,i=a-LOG_BASE+s}if(n!==void 0&&(o=mathpow(10,s-i-1),l=u/o%10|0,c=t<0||p[d+1]!==void 0||u%o,c=n<4?(l||c)&&(n==0||n==(e.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(a>0?i>0?u/mathpow(10,s-i):0:p[d-1])%10&1||n==(e.s<0?8:7))),t<1||!p[0])return c?(o=getBase10Exponent(e),p.length=1,t=t-o-1,p[0]=mathpow(10,(LOG_BASE-t%LOG_BASE)%LOG_BASE),e.e=mathfloor(-t/LOG_BASE)||0):(p.length=1,p[0]=e.e=e.s=0),e;if(a==0?(p.length=d,o=1,d--):(p.length=d+1,o=mathpow(10,LOG_BASE-a),p[d]=i>0?(u/mathpow(10,s-i)%mathpow(10,i)|0)*o:0),c)for(;;)if(d==0){(p[0]+=o)==BASE&&(p[0]=1,++e.e);break}else{if(p[d]+=o,p[d]!=BASE)break;p[d--]=0,o=1}for(a=p.length;p[--a]===0;)p.pop();if(external&&(e.e>MAX_E||e.e<-MAX_E))throw Error(exponentOutOfRange+getBase10Exponent(e));return e}function subtract(e,t){var n,a,i,o,s,l,c,u,d,p,f=e.constructor,h=f.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new f(e),external?round(t,h):t;if(c=e.d,p=t.d,a=t.e,u=e.e,c=c.slice(),s=u-a,s){for(d=s<0,d?(n=c,s=-s,l=p.length):(n=p,a=u,l=c.length),i=Math.max(Math.ceil(h/LOG_BASE),l)+2,s>i&&(s=i,n.length=1),n.reverse(),i=s;i--;)n.push(0);n.reverse()}else{for(i=c.length,l=p.length,d=i<l,d&&(l=i),i=0;i<l;i++)if(c[i]!=p[i]){d=c[i]<p[i];break}s=0}for(d&&(n=c,c=p,p=n,t.s=-t.s),l=c.length,i=p.length-l;i>0;--i)c[l++]=0;for(i=p.length;i>s;){if(c[--i]<p[i]){for(o=i;o&&c[--o]===0;)c[o]=BASE-1;--c[o],c[i]+=BASE}c[i]-=p[i]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--a;return c[0]?(t.d=c,t.e=a,external?round(t,h):t):new f(0)}function toString(e,t,n){var a,i=getBase10Exponent(e),o=digitsToString(e.d),s=o.length;return t?(n&&(a=n-s)>0?o=o.charAt(0)+"."+o.slice(1)+getZeroString(a):s>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+getZeroString(-i-1)+o,n&&(a=n-s)>0&&(o+=getZeroString(a))):i>=s?(o+=getZeroString(i+1-s),n&&(a=n-i-1)>0&&(o=o+"."+getZeroString(a))):((a=i+1)<s&&(o=o.slice(0,a)+"."+o.slice(a)),n&&(a=n-s)>0&&(i+1===s&&(o+="."),o+=getZeroString(a))),e.s<0?"-"+o:o}function truncate(e,t){if(e.length>t)return e.length=t,!0}function clone(e){var t,n,a;function i(o){var s=this;if(!(s instanceof i))return new i(o);if(s.constructor=i,o instanceof i){s.s=o.s,s.e=o.e,s.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(invalidArgument+o);if(o>0)s.s=1;else if(o<0)o=-o,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(o===~~o&&o<1e7){s.e=0,s.d=[o];return}return parseDecimal(s,o.toString())}else if(typeof o!="string")throw Error(invalidArgument+o);if(o.charCodeAt(0)===45?(o=o.slice(1),s.s=-1):s.s=1,isDecimal.test(o))parseDecimal(s,o);else throw Error(invalidArgument+o)}if(i.prototype=P,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=clone,i.config=i.set=config,e===void 0&&(e={}),e)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<a.length;)e.hasOwnProperty(n=a[t++])||(e[n]=this[n]);return i.config(e),i}function config(e){if(!e||typeof e!="object")throw Error(decimalError+"Object expected");var t,n,a,i=["precision",1,MAX_DIGITS,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((a=e[n=i[t]])!==void 0)if(mathfloor(a)===a&&a>=i[t+1]&&a<=i[t+2])this[n]=a;else throw Error(invalidArgument+n+": "+a);if((a=e[n="LN10"])!==void 0)if(a==Math.LN10)this[n]=new this(a);else throw Error(invalidArgument+n+": "+a);return this}var Decimal=clone(defaults);ONE=new Decimal(1);const Decimal$1=Decimal;var identity=e=>e,PLACE_HOLDER={},isPlaceHolder=e=>e===PLACE_HOLDER,curry0=e=>function t(){return arguments.length===0||arguments.length===1&&isPlaceHolder(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},curryN=(e,t)=>e===1?t:curry0(function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var o=a.filter(s=>s!==PLACE_HOLDER).length;return o>=e?t(...a):curryN(e-o,curry0(function(){for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];var u=a.map(d=>isPlaceHolder(d)?l.shift():d);return t(...u,...l)}))}),curry=e=>curryN(e.length,e),range=(e,t)=>{for(var n=[],a=e;a<t;++a)n[a-e]=a;return n},map=curry((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(n=>t[n]).map(e)),compose=function e(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];if(!n.length)return identity;var i=n.reverse(),o=i[0],s=i.slice(1);return function(){return s.reduce((l,c)=>c(l),o(...arguments))}},reverse=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),memoize=e=>{var t=null,n=null;return function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return t&&i.every((s,l)=>{var c;return s===((c=t)===null||c===void 0?void 0:c[l])})||(t=i,n=e(...i)),n}};function getDigitCount(e){var t;return e===0?t=1:t=Math.floor(new Decimal$1(e).abs().log(10).toNumber())+1,t}function rangeStep(e,t,n){for(var a=new Decimal$1(e),i=0,o=[];a.lt(t)&&i<1e5;)o.push(a.toNumber()),a=a.add(n),i++;return o}curry((e,t,n)=>{var a=+e,i=+t;return a+n*(i-a)});curry((e,t,n)=>{var a=t-+e;return a=a||1/0,(n-e)/a});curry((e,t,n)=>{var a=t-+e;return a=a||1/0,Math.max(0,Math.min(1,(n-e)/a))});var getValidInterval=e=>{var[t,n]=e,[a,i]=[t,n];return t>n&&([a,i]=[n,t]),[a,i]},getFormatStep=(e,t,n)=>{if(e.lte(0))return new Decimal$1(0);var a=getDigitCount(e.toNumber()),i=new Decimal$1(10).pow(a),o=e.div(i),s=a!==1?.05:.1,l=new Decimal$1(Math.ceil(o.div(s).toNumber())).add(n).mul(s),c=l.mul(i);return t?new Decimal$1(c.toNumber()):new Decimal$1(Math.ceil(c.toNumber()))},getTickOfSingleValue=(e,t,n)=>{var a=new Decimal$1(1),i=new Decimal$1(e);if(!i.isint()&&n){var o=Math.abs(e);o<1?(a=new Decimal$1(10).pow(getDigitCount(e)-1),i=new Decimal$1(Math.floor(i.div(a).toNumber())).mul(a)):o>1&&(i=new Decimal$1(Math.floor(e)))}else e===0?i=new Decimal$1(Math.floor((t-1)/2)):n||(i=new Decimal$1(Math.floor(e)));var s=Math.floor((t-1)/2),l=compose(map(c=>i.add(new Decimal$1(c-s).mul(a)).toNumber()),range);return l(0,t)},_calculateStep=function e(t,n,a,i){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-t)/(a-1)))return{step:new Decimal$1(0),tickMin:new Decimal$1(0),tickMax:new Decimal$1(0)};var s=getFormatStep(new Decimal$1(n).sub(t).div(a-1),i,o),l;t<=0&&n>=0?l=new Decimal$1(0):(l=new Decimal$1(t).add(n).div(2),l=l.sub(new Decimal$1(l).mod(s)));var c=Math.ceil(l.sub(t).div(s).toNumber()),u=Math.ceil(new Decimal$1(n).sub(l).div(s).toNumber()),d=c+u+1;return d>a?_calculateStep(t,n,a,i,o+1):(d<a&&(u=n>0?u+(a-d):u,c=n>0?c:c+(a-d)),{step:s,tickMin:l.sub(new Decimal$1(c).mul(s)),tickMax:l.add(new Decimal$1(u).mul(s))})};function getNiceTickValuesFn(e){var[t,n]=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),[s,l]=getValidInterval([t,n]);if(s===-1/0||l===1/0){var c=l===1/0?[s,...range(0,a-1).map(()=>1/0)]:[...range(0,a-1).map(()=>-1/0),l];return t>n?reverse(c):c}if(s===l)return getTickOfSingleValue(s,a,i);var{step:u,tickMin:d,tickMax:p}=_calculateStep(s,l,o,i,0),f=rangeStep(d,p.add(new Decimal$1(.1).mul(u)),u);return t>n?reverse(f):f}function getTickValuesFixedDomainFn(e,t){var[n,a]=e,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,s]=getValidInterval([n,a]);if(o===-1/0||s===1/0)return[n,a];if(o===s)return[o];var l=Math.max(t,2),c=getFormatStep(new Decimal$1(s).sub(o).div(l-1),i,0),u=[...rangeStep(new Decimal$1(o),new Decimal$1(s),c),s];return i===!1&&(u=u.map(d=>Math.round(d))),n>a?reverse(u):u}var getNiceTickValues=memoize(getNiceTickValuesFn),getTickValuesFixedDomain=memoize(getTickValuesFixedDomainFn),selectBarCategoryGap=e=>e.rootProps.barCategoryGap,selectStackOffsetType=e=>e.rootProps.stackOffset,selectChartName=e=>e.options.chartName,selectSyncId=e=>e.rootProps.syncId,selectSyncMethod=e=>e.rootProps.syncMethod,selectEventEmitter=e=>e.options.eventEmitter,defaultPolarAngleAxisProps={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},defaultPolarRadiusAxisProps={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},combineAxisRangeWithReverse=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},implicitAngleAxis={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:defaultPolarAngleAxisProps.angleAxisId,includeHidden:!1,name:void 0,reversed:defaultPolarAngleAxisProps.reversed,scale:defaultPolarAngleAxisProps.scale,tick:defaultPolarAngleAxisProps.tick,tickCount:void 0,ticks:void 0,type:defaultPolarAngleAxisProps.type,unit:void 0},implicitRadiusAxis={allowDataOverflow:defaultPolarRadiusAxisProps.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:defaultPolarRadiusAxisProps.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:defaultPolarRadiusAxisProps.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:defaultPolarRadiusAxisProps.scale,tick:defaultPolarRadiusAxisProps.tick,tickCount:defaultPolarRadiusAxisProps.tickCount,ticks:void 0,type:defaultPolarRadiusAxisProps.type,unit:void 0},implicitRadialBarAngleAxis={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:defaultPolarAngleAxisProps.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:defaultPolarAngleAxisProps.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:defaultPolarAngleAxisProps.scale,tick:defaultPolarAngleAxisProps.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},implicitRadialBarRadiusAxis={allowDataOverflow:defaultPolarRadiusAxisProps.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:defaultPolarRadiusAxisProps.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:defaultPolarRadiusAxisProps.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:defaultPolarRadiusAxisProps.scale,tick:defaultPolarRadiusAxisProps.tick,tickCount:defaultPolarRadiusAxisProps.tickCount,ticks:void 0,type:"category",unit:void 0},selectAngleAxis=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?implicitRadialBarAngleAxis:implicitAngleAxis,selectRadiusAxis=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?implicitRadialBarRadiusAxis:implicitRadiusAxis,selectPolarOptions=e=>e.polarOptions,selectMaxRadius=createSelector([selectChartWidth,selectChartHeight,selectChartOffsetInternal],getMaxRadius),selectInnerRadius=createSelector([selectPolarOptions,selectMaxRadius],(e,t)=>{if(e!=null)return getPercentValue(e.innerRadius,t,0)}),selectOuterRadius=createSelector([selectPolarOptions,selectMaxRadius],(e,t)=>{if(e!=null)return getPercentValue(e.outerRadius,t,t*.8)}),combineAngleAxisRange=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]},selectAngleAxisRange=createSelector([selectPolarOptions],combineAngleAxisRange);createSelector([selectAngleAxis,selectAngleAxisRange],combineAxisRangeWithReverse);var selectRadiusAxisRange=createSelector([selectMaxRadius,selectInnerRadius,selectOuterRadius],(e,t,n)=>{if(!(e==null||t==null||n==null))return[t,n]});createSelector([selectRadiusAxis,selectRadiusAxisRange],combineAxisRangeWithReverse);var selectPolarViewBox=createSelector([selectChartLayout,selectPolarOptions,selectInnerRadius,selectOuterRadius,selectChartWidth,selectChartHeight],(e,t,n,a,i,o)=>{if(!(e!=="centric"&&e!=="radial"||t==null||n==null||a==null)){var{cx:s,cy:l,startAngle:c,endAngle:u}=t;return{cx:getPercentValue(s,i,i/2),cy:getPercentValue(l,o,o/2),innerRadius:n,outerRadius:a,startAngle:c,endAngle:u,clockWise:!1}}}),pickAxisType=(e,t)=>t,pickAxisId=(e,t,n)=>n;function ownKeys$h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function _objectSpread$h(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$h(Object(n),!0).forEach(function(a){_defineProperty$l(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$h(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function _defineProperty$l(e,t,n){return(t=_toPropertyKey$l(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$l(e){var t=_toPrimitive$l(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$l(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var defaultNumericDomain=[0,"auto"],implicitXAxis={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},selectXAxisSettings=(e,t)=>{var n=e.cartesianAxis.xAxis[t];return n==null?implicitXAxis:n},implicitYAxis={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:defaultNumericDomain,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:DEFAULT_Y_AXIS_WIDTH},selectYAxisSettings=(e,t)=>{var n=e.cartesianAxis.yAxis[t];return n==null?implicitYAxis:n},implicitZAxis={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},selectZAxisSettings=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return n==null?implicitZAxis:n},selectBaseAxis=(e,t,n)=>{switch(t){case"xAxis":return selectXAxisSettings(e,n);case"yAxis":return selectYAxisSettings(e,n);case"zAxis":return selectZAxisSettings(e,n);case"angleAxis":return selectAngleAxis(e,n);case"radiusAxis":return selectRadiusAxis(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},selectCartesianAxisSettings=(e,t,n)=>{switch(t){case"xAxis":return selectXAxisSettings(e,n);case"yAxis":return selectYAxisSettings(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},selectAxisSettings=(e,t,n)=>{switch(t){case"xAxis":return selectXAxisSettings(e,n);case"yAxis":return selectYAxisSettings(e,n);case"angleAxis":return selectAngleAxis(e,n);case"radiusAxis":return selectRadiusAxis(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},selectHasBar=e=>e.graphicalItems.countOfBars>0;function itemAxisPredicate(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var selectUnfilteredCartesianItems=e=>e.graphicalItems.cartesianItems,selectAxisPredicate=createSelector([pickAxisType,pickAxisId],itemAxisPredicate),combineGraphicalItemsSettings=(e,t,n)=>e.filter(n).filter(a=>(t==null?void 0:t.includeHidden)===!0?!0:!a.hide),selectCartesianItemsSettings=createSelector([selectUnfilteredCartesianItems,selectBaseAxis,selectAxisPredicate],combineGraphicalItemsSettings),filterGraphicalNotStackedItems=e=>e.filter(t=>t.stackId===void 0),selectCartesianItemsSettingsExceptStacked=createSelector([selectCartesianItemsSettings],filterGraphicalNotStackedItems),combineGraphicalItemsData=e=>e.map(t=>t.data).filter(Boolean).flat(1),selectCartesianGraphicalItemsData=createSelector([selectCartesianItemsSettings],combineGraphicalItemsData),combineDisplayedData=(e,t)=>{var{chartData:n=[],dataStartIndex:a,dataEndIndex:i}=t;return e.length>0?e:n.slice(a,i+1)},selectDisplayedData=createSelector([selectCartesianGraphicalItemsData,selectChartDataWithIndexesIfNotInPanorama],combineDisplayedData),combineAppliedValues=(e,t,n)=>(t==null?void 0:t.dataKey)!=null?e.map(a=>({value:getValueByDataKey(a,t.dataKey)})):n.length>0?n.map(a=>a.dataKey).flatMap(a=>e.map(i=>({value:getValueByDataKey(i,a)}))):e.map(a=>({value:a})),selectAllAppliedValues=createSelector([selectDisplayedData,selectBaseAxis,selectCartesianItemsSettings],combineAppliedValues);function isErrorBarRelevantForAxisType(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function onlyAllowNumbers(e){return e.filter(t=>isNumOrStr(t)||t instanceof Date).map(Number).filter(t=>isNan(t)===!1)}function getErrorDomainByDataKey(e,t,n){return!n||typeof t!="number"||isNan(t)?[]:n.length?onlyAllowNumbers(n.flatMap(a=>{var i=getValueByDataKey(e,a.dataKey),o,s;if(Array.isArray(i)?[o,s]=i:o=s=i,!(!isWellBehavedNumber(o)||!isWellBehavedNumber(s)))return[t-o,t+s]})):[]}var combineStackGroups=(e,t,n)=>{var a={},i=t.reduce((o,s)=>(s.stackId==null||(o[s.stackId]==null&&(o[s.stackId]=[]),o[s.stackId].push(s)),o),a);return Object.fromEntries(Object.entries(i).map(o=>{var[s,l]=o,c=l.map(u=>u.dataKey);return[s,{stackedData:getStackedData(e,c,n),graphicalItems:l}]}))},selectStackGroups=createSelector([selectDisplayedData,selectCartesianItemsSettings,selectStackOffsetType],combineStackGroups),combineDomainOfStackGroups=(e,t,n)=>{var{dataStartIndex:a,dataEndIndex:i}=t;if(n!=="zAxis"){var o=getDomainOfStackGroups(e,a,i);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},selectDomainOfStackGroups=createSelector([selectStackGroups,selectChartDataWithIndexes,pickAxisType],combineDomainOfStackGroups),combineAppliedNumericalValuesIncludingErrorValues=(e,t,n,a)=>n.length>0?e.flatMap(i=>n.flatMap(o=>{var s,l,c=(s=o.errorBars)===null||s===void 0?void 0:s.filter(d=>isErrorBarRelevantForAxisType(a,d)),u=getValueByDataKey(i,(l=t.dataKey)!==null&&l!==void 0?l:o.dataKey);return{value:u,errorDomain:getErrorDomainByDataKey(i,u,c)}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(i=>({value:getValueByDataKey(i,t.dataKey),errorDomain:[]})):e.map(i=>({value:i,errorDomain:[]})),selectAllAppliedNumericalValuesIncludingErrorValues=createSelector(selectDisplayedData,selectBaseAxis,selectCartesianItemsSettingsExceptStacked,pickAxisType,combineAppliedNumericalValuesIncludingErrorValues);function onlyAllowNumbersAndStringsAndDates(e){var{value:t}=e;if(isNumOrStr(t)||t instanceof Date)return t}var computeNumericalDomain=e=>{var t=e.flatMap(a=>[a.value,a.errorDomain]).flat(1),n=onlyAllowNumbers(t);if(n.length!==0)return[Math.min(...n),Math.max(...n)]},computeDomainOfTypeCategory=(e,t,n)=>{var a=e.map(onlyAllowNumbersAndStringsAndDates).filter(i=>i!=null);return n&&(t.dataKey==null||t.allowDuplicatedCategory&&hasDuplicate(a))?range$3(0,e.length):t.allowDuplicatedCategory?a:Array.from(new Set(a))},getDomainDefinition=e=>{var t;if(e==null||!("domain"in e))return defaultNumericDomain;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var n=onlyAllowNumbers(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:defaultNumericDomain},mergeDomains=function e(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var i=n.filter(Boolean);if(i.length!==0){var o=i.flat(),s=Math.min(...o),l=Math.max(...o);return[s,l]}},selectReferenceDots=e=>e.referenceElements.dots,filterReferenceElements=(e,t,n)=>e.filter(a=>a.ifOverflow==="extendDomain").filter(a=>t==="xAxis"?a.xAxisId===n:a.yAxisId===n),selectReferenceDotsByAxis=createSelector([selectReferenceDots,pickAxisType,pickAxisId],filterReferenceElements),selectReferenceAreas=e=>e.referenceElements.areas,selectReferenceAreasByAxis=createSelector([selectReferenceAreas,pickAxisType,pickAxisId],filterReferenceElements),selectReferenceLines=e=>e.referenceElements.lines,selectReferenceLinesByAxis=createSelector([selectReferenceLines,pickAxisType,pickAxisId],filterReferenceElements),combineDotsDomain=(e,t)=>{var n=onlyAllowNumbers(e.map(a=>t==="xAxis"?a.x:a.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},selectReferenceDotsDomain=createSelector(selectReferenceDotsByAxis,pickAxisType,combineDotsDomain),combineAreasDomain=(e,t)=>{var n=onlyAllowNumbers(e.flatMap(a=>[t==="xAxis"?a.x1:a.y1,t==="xAxis"?a.x2:a.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},selectReferenceAreasDomain=createSelector([selectReferenceAreasByAxis,pickAxisType],combineAreasDomain),combineLinesDomain=(e,t)=>{var n=onlyAllowNumbers(e.map(a=>t==="xAxis"?a.x:a.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},selectReferenceLinesDomain=createSelector(selectReferenceLinesByAxis,pickAxisType,combineLinesDomain),selectReferenceElementsDomain=createSelector(selectReferenceDotsDomain,selectReferenceLinesDomain,selectReferenceAreasDomain,(e,t,n)=>mergeDomains(e,n,t)),selectDomainDefinition=createSelector([selectBaseAxis],getDomainDefinition),combineNumericalDomain=(e,t,n,a,i)=>{var o=numericalDomainSpecifiedWithoutRequiringData(t,e.allowDataOverflow);return o!=null?o:parseNumericalUserDomain(t,mergeDomains(n,i,computeNumericalDomain(a)),e.allowDataOverflow)},selectNumericalDomain=createSelector([selectBaseAxis,selectDomainDefinition,selectDomainOfStackGroups,selectAllAppliedNumericalValuesIncludingErrorValues,selectReferenceElementsDomain],combineNumericalDomain),expandDomain=[0,1],combineAxisDomain=(e,t,n,a,i,o,s)=>{if(!(e==null||n==null||n.length===0)){var{dataKey:l,type:c}=e,u=isCategoricalAxis(t,o);return u&&l==null?range$3(0,n.length):c==="category"?computeDomainOfTypeCategory(a,e,u):i==="expand"?expandDomain:s}},selectAxisDomain=createSelector([selectBaseAxis,selectChartLayout,selectDisplayedData,selectAllAppliedValues,selectStackOffsetType,pickAxisType,selectNumericalDomain],combineAxisDomain),combineRealScaleType=(e,t,n,a,i)=>{if(e!=null){var{scale:o,type:s}=e;if(o==="auto")return t==="radial"&&i==="radiusAxis"?"band":t==="radial"&&i==="angleAxis"?"linear":s==="category"&&a&&(a.indexOf("LineChart")>=0||a.indexOf("AreaChart")>=0||a.indexOf("ComposedChart")>=0&&!n)?"point":s==="category"?"band":"linear";if(typeof o=="string"){var l="scale".concat(upperFirst(o));return l in d3Scales?l:"point"}}},selectRealScaleType=createSelector([selectBaseAxis,selectChartLayout,selectHasBar,selectChartName,pickAxisType],combineRealScaleType);function getD3ScaleFromType(e){if(e!=null){if(e in d3Scales)return d3Scales[e]();var t="scale".concat(upperFirst(e));if(t in d3Scales)return d3Scales[t]()}}function combineScaleFunction(e,t,n,a){if(!(n==null||a==null)){if(typeof e.scale=="function")return e.scale.copy().domain(n).range(a);var i=getD3ScaleFromType(t);if(i!=null){var o=i.domain(n).range(a);return checkDomainOfScale(o),o}}}var combineNiceTicks=(e,t,n)=>{var a=getDomainDefinition(t);if(!(n!=="auto"&&n!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(a)&&(a[0]==="auto"||a[1]==="auto")&&isWellFormedNumberDomain(e))return getNiceTickValues(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&isWellFormedNumberDomain(e))return getTickValuesFixedDomain(e,t.tickCount,t.allowDecimals)}},selectNiceTicks=createSelector([selectAxisDomain,selectAxisSettings,selectRealScaleType],combineNiceTicks),combineAxisDomainWithNiceTicks=(e,t,n,a)=>{if(a!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&isWellFormedNumberDomain(t)&&Array.isArray(n)&&n.length>0){var i=t[0],o=n[0],s=t[1],l=n[n.length-1];return[Math.min(i,o),Math.max(s,l)]}return t},selectAxisDomainIncludingNiceTicks=createSelector([selectBaseAxis,selectAxisDomain,selectNiceTicks,pickAxisType],combineAxisDomainWithNiceTicks),selectSmallestDistanceBetweenValues=createSelector(selectAllAppliedValues,selectBaseAxis,(e,t)=>{if(!(!t||t.type!=="number")){var n=1/0,a=Array.from(onlyAllowNumbers(e.map(l=>l.value))).sort((l,c)=>l-c);if(a.length<2)return 1/0;var i=a[a.length-1]-a[0];if(i===0)return 1/0;for(var o=0;o<a.length-1;o++){var s=a[o+1]-a[o];n=Math.min(n,s)}return n/i}}),selectCalculatedPadding=createSelector(selectSmallestDistanceBetweenValues,selectChartLayout,selectBarCategoryGap,selectChartOffsetInternal,(e,t,n,a)=>a,(e,t,n,a,i)=>{if(!isWellBehavedNumber(e))return 0;var o=t==="vertical"?a.height:a.width;if(i==="gap")return e*o/2;if(i==="no-gap"){var s=getPercentValue(n,e*o),l=e*o/2;return l-s-(l-s)/o*s}return 0}),selectCalculatedXAxisPadding=(e,t)=>{var n=selectXAxisSettings(e,t);return n==null||typeof n.padding!="string"?0:selectCalculatedPadding(e,"xAxis",t,n.padding)},selectCalculatedYAxisPadding=(e,t)=>{var n=selectYAxisSettings(e,t);return n==null||typeof n.padding!="string"?0:selectCalculatedPadding(e,"yAxis",t,n.padding)},selectXAxisPadding=createSelector(selectXAxisSettings,selectCalculatedXAxisPadding,(e,t)=>{var n,a;if(e==null)return{left:0,right:0};var{padding:i}=e;return typeof i=="string"?{left:t,right:t}:{left:((n=i.left)!==null&&n!==void 0?n:0)+t,right:((a=i.right)!==null&&a!==void 0?a:0)+t}}),selectYAxisPadding=createSelector(selectYAxisSettings,selectCalculatedYAxisPadding,(e,t)=>{var n,a;if(e==null)return{top:0,bottom:0};var{padding:i}=e;return typeof i=="string"?{top:t,bottom:t}:{top:((n=i.top)!==null&&n!==void 0?n:0)+t,bottom:((a=i.bottom)!==null&&a!==void 0?a:0)+t}}),combineXAxisRange=createSelector([selectChartOffsetInternal,selectXAxisPadding,selectBrushDimensions,selectBrushSettings,(e,t,n)=>n],(e,t,n,a,i)=>{var{padding:o}=a;return i?[o.left,n.width-o.right]:[e.left+t.left,e.left+e.width-t.right]}),combineYAxisRange=createSelector([selectChartOffsetInternal,selectChartLayout,selectYAxisPadding,selectBrushDimensions,selectBrushSettings,(e,t,n)=>n],(e,t,n,a,i,o)=>{var{padding:s}=i;return o?[a.height-s.bottom,s.top]:t==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),selectAxisRange=(e,t,n,a)=>{var i;switch(t){case"xAxis":return combineXAxisRange(e,n,a);case"yAxis":return combineYAxisRange(e,n,a);case"zAxis":return(i=selectZAxisSettings(e,n))===null||i===void 0?void 0:i.range;case"angleAxis":return selectAngleAxisRange(e);case"radiusAxis":return selectRadiusAxisRange(e,n);default:return}},selectAxisRangeWithReverse=createSelector([selectBaseAxis,selectAxisRange],combineAxisRangeWithReverse),selectAxisScale=createSelector([selectBaseAxis,selectRealScaleType,selectAxisDomainIncludingNiceTicks,selectAxisRangeWithReverse],combineScaleFunction);createSelector(selectCartesianItemsSettings,pickAxisType,(e,t)=>e.flatMap(n=>{var a;return(a=n.errorBars)!==null&&a!==void 0?a:[]}).filter(n=>isErrorBarRelevantForAxisType(t,n)));function compareIds(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var pickAxisOrientation=(e,t)=>t,pickMirror=(e,t,n)=>n,selectAllXAxesWithOffsetType=createSelector(selectAllXAxes,pickAxisOrientation,pickMirror,(e,t,n)=>e.filter(a=>a.orientation===t).filter(a=>a.mirror===n).sort(compareIds)),selectAllYAxesWithOffsetType=createSelector(selectAllYAxes,pickAxisOrientation,pickMirror,(e,t,n)=>e.filter(a=>a.orientation===t).filter(a=>a.mirror===n).sort(compareIds)),getXAxisSize=(e,t)=>({width:e.width,height:t.height}),getYAxisSize=(e,t)=>{var n=typeof t.width=="number"?t.width:DEFAULT_Y_AXIS_WIDTH;return{width:n,height:e.height}},selectXAxisSize=createSelector(selectChartOffsetInternal,selectXAxisSettings,getXAxisSize),combineXAxisPositionStartingPoint=(e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},combineYAxisPositionStartingPoint=(e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}},selectAllXAxesOffsetSteps=createSelector(selectChartHeight,selectChartOffsetInternal,selectAllXAxesWithOffsetType,pickAxisOrientation,pickMirror,(e,t,n,a,i)=>{var o={},s;return n.forEach(l=>{var c=getXAxisSize(t,l);s==null&&(s=combineXAxisPositionStartingPoint(t,a,e));var u=a==="top"&&!i||a==="bottom"&&i;o[l.id]=s-Number(u)*c.height,s+=(u?-1:1)*c.height}),o}),selectAllYAxesOffsetSteps=createSelector(selectChartWidth,selectChartOffsetInternal,selectAllYAxesWithOffsetType,pickAxisOrientation,pickMirror,(e,t,n,a,i)=>{var o={},s;return n.forEach(l=>{var c=getYAxisSize(t,l);s==null&&(s=combineYAxisPositionStartingPoint(t,a,e));var u=a==="left"&&!i||a==="right"&&i;o[l.id]=s-Number(u)*c.width,s+=(u?-1:1)*c.width}),o}),selectXAxisPosition=(e,t)=>{var n=selectChartOffsetInternal(e),a=selectXAxisSettings(e,t);if(a!=null){var i=selectAllXAxesOffsetSteps(e,a.orientation,a.mirror),o=i[t];return o==null?{x:n.left,y:0}:{x:n.left,y:o}}},selectYAxisPosition=(e,t)=>{var n=selectChartOffsetInternal(e),a=selectYAxisSettings(e,t);if(a!=null){var i=selectAllYAxesOffsetSteps(e,a.orientation,a.mirror),o=i[t];return o==null?{x:0,y:n.top}:{x:o,y:n.top}}},selectYAxisSize=createSelector(selectChartOffsetInternal,selectYAxisSettings,(e,t)=>{var n=typeof t.width=="number"?t.width:DEFAULT_Y_AXIS_WIDTH;return{width:n,height:e.height}}),combineDuplicateDomain=(e,t,n,a)=>{if(n!=null){var{allowDuplicatedCategory:i,type:o,dataKey:s}=n,l=isCategoricalAxis(e,a),c=t.map(u=>u.value);if(s&&l&&o==="category"&&i&&hasDuplicate(c))return c}},selectDuplicateDomain=createSelector([selectChartLayout,selectAllAppliedValues,selectBaseAxis,pickAxisType],combineDuplicateDomain),combineCategoricalDomain=(e,t,n,a)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:o}=n,s=isCategoricalAxis(e,a);if(s&&(i==="number"||o!=="auto"))return t.map(l=>l.value)}},selectCategoricalDomain=createSelector([selectChartLayout,selectAllAppliedValues,selectAxisSettings,pickAxisType],combineCategoricalDomain),selectAxisPropsNeededForCartesianGridTicksGenerator=createSelector([selectChartLayout,selectCartesianAxisSettings,selectRealScaleType,selectAxisScale,selectDuplicateDomain,selectCategoricalDomain,selectAxisRange,selectNiceTicks,pickAxisType],(e,t,n,a,i,o,s,l,c)=>{if(t==null)return null;var u=isCategoricalAxis(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:o,duplicateDomain:i,isCategorical:u,niceTicks:l,range:s,realScaleType:n,scale:a}}),combineAxisTicks=(e,t,n,a,i,o,s,l,c)=>{if(!(t==null||a==null)){var u=isCategoricalAxis(e,c),{type:d,ticks:p,tickCount:f}=t,h=n==="scaleBand"&&typeof a.bandwidth=="function"?a.bandwidth()/2:2,v=d==="category"&&a.bandwidth?a.bandwidth()/h:0;v=c==="angleAxis"&&o!=null&&o.length>=2?mathSign(o[0]-o[1])*2*v:v;var b=p||i;if(b){var g=b.map((E,j)=>{var w=s?s.indexOf(E):E;return{index:j,coordinate:a(w)+v,value:E,offset:v}});return g.filter(E=>!isNan(E.coordinate))}return u&&l?l.map((E,j)=>({coordinate:a(E)+v,value:E,index:j,offset:v})):a.ticks?a.ticks(f).map(E=>({coordinate:a(E)+v,value:E,offset:v})):a.domain().map((E,j)=>({coordinate:a(E)+v,value:s?s[E]:E,index:j,offset:v}))}},selectTicksOfAxis=createSelector([selectChartLayout,selectAxisSettings,selectRealScaleType,selectAxisScale,selectNiceTicks,selectAxisRange,selectDuplicateDomain,selectCategoricalDomain,pickAxisType],combineAxisTicks),combineGraphicalItemTicks=(e,t,n,a,i,o,s)=>{if(!(t==null||n==null||a==null||a[0]===a[1])){var l=isCategoricalAxis(e,s),{tickCount:c}=t,u=0;return u=s==="angleAxis"&&(a==null?void 0:a.length)>=2?mathSign(a[0]-a[1])*2*u:u,l&&o?o.map((d,p)=>({coordinate:n(d)+u,value:d,index:p,offset:u})):n.ticks?n.ticks(c).map(d=>({coordinate:n(d)+u,value:d,offset:u})):n.domain().map((d,p)=>({coordinate:n(d)+u,value:i?i[d]:d,index:p,offset:u}))}},selectTicksOfGraphicalItem=createSelector([selectChartLayout,selectAxisSettings,selectAxisScale,selectAxisRange,selectDuplicateDomain,selectCategoricalDomain,pickAxisType],combineGraphicalItemTicks),selectAxisWithScale=createSelector(selectBaseAxis,selectAxisScale,(e,t)=>{if(!(e==null||t==null))return _objectSpread$h(_objectSpread$h({},e),{},{scale:t})}),selectZAxisScale=createSelector([selectBaseAxis,selectRealScaleType,selectAxisDomain,selectAxisRangeWithReverse],combineScaleFunction);createSelector((e,t,n)=>selectZAxisSettings(e,n),selectZAxisScale,(e,t)=>{if(!(e==null||t==null))return _objectSpread$h(_objectSpread$h({},e),{},{scale:t})});var selectChartDirection=createSelector([selectChartLayout,selectAllXAxes,selectAllYAxes],(e,t,n)=>{switch(e){case"horizontal":return t.some(a=>a.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(a=>a.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),selectDefaultTooltipEventType=e=>e.options.defaultTooltipEventType,selectValidateTooltipEventTypes=e=>e.options.validateTooltipEventTypes;function combineTooltipEventType(e,t,n){if(e==null)return t;var a=e?"axis":"item";return n==null?t:n.includes(a)?a:t}function selectTooltipEventType$1(e,t){var n=selectDefaultTooltipEventType(e),a=selectValidateTooltipEventTypes(e);return combineTooltipEventType(t,n,a)}function useTooltipEventType(e){return useAppSelector(t=>selectTooltipEventType$1(t,e))}var combineActiveLabel=(e,t)=>{var n,a=Number(t);if(!(isNan(a)||t==null))return a>=0?e==null||(n=e[a])===null||n===void 0?void 0:n.value:void 0},selectTooltipSettings=e=>e.tooltip.settings,noInteraction={active:!1,index:null,dataKey:void 0,coordinate:void 0},initialState$7={itemInteraction:{click:noInteraction,hover:noInteraction},axisInteraction:{click:noInteraction,hover:noInteraction},keyboardInteraction:noInteraction,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},tooltipSlice=createSlice({name:"tooltip",initialState:initialState$7,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var n=current(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings,removeTooltipEntrySettings,setTooltipSettingsState,setActiveMouseOverItemIndex,mouseLeaveItem,mouseLeaveChart,setActiveClickItemIndex,setMouseOverAxisIndex,setMouseClickAxisIndex,setSyncInteraction,setKeyboardInteraction}=tooltipSlice.actions,tooltipReducer=tooltipSlice.reducer;function ownKeys$g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function _objectSpread$g(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$g(Object(n),!0).forEach(function(a){_defineProperty$k(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$g(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function _defineProperty$k(e,t,n){return(t=_toPropertyKey$k(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$k(e){var t=_toPrimitive$k(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$k(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function chooseAppropriateMouseInteraction(e,t,n){return t==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function hasBeenActivePreviously(e){return e.index!=null}var combineTooltipInteractionState=(e,t,n,a)=>{if(t==null)return noInteraction;var i=chooseAppropriateMouseInteraction(e,t,n);if(i==null)return noInteraction;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var o=e.settings.active===!0;if(hasBeenActivePreviously(i)){if(o)return _objectSpread$g(_objectSpread$g({},i),{},{active:!0})}else if(a!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:a};return _objectSpread$g(_objectSpread$g({},noInteraction),{},{coordinate:i.coordinate})},combineActiveTooltipIndex=(e,t)=>{var n=e==null?void 0:e.index;if(n==null)return null;var a=Number(n);if(!isWellBehavedNumber(a))return n;var i=0,o=1/0;return t.length>0&&(o=t.length-1),String(Math.max(i,Math.min(a,o)))},combineCoordinateForDefaultIndex=(e,t,n,a,i,o,s,l)=>{if(!(o==null||l==null)){var c=s[0],u=c==null?void 0:l(c.positions,o);if(u!=null)return u;var d=i==null?void 0:i[Number(o)];if(d)switch(n){case"horizontal":return{x:d.coordinate,y:(a.top+t)/2};default:return{x:(a.left+e)/2,y:d.coordinate}}}},combineTooltipPayloadConfigurations=(e,t,n,a)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var i;return n==="hover"?i=e.itemInteraction.hover.dataKey:i=e.itemInteraction.click.dataKey,i==null&&a!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(o=>{var s;return((s=o.settings)===null||s===void 0?void 0:s.dataKey)===i})},selectTooltipPayloadSearcher=e=>e.options.tooltipPayloadSearcher,selectTooltipState=e=>e.tooltip;function ownKeys$f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function _objectSpread$f(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$f(Object(n),!0).forEach(function(a){_defineProperty$j(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$f(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function _defineProperty$j(e,t,n){return(t=_toPropertyKey$j(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$j(e){var t=_toPrimitive$j(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$j(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function getSliced(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function selectFinalData(e,t){return e!=null?e:t}var combineTooltipPayload=(e,t,n,a,i,o,s)=>{if(!(t==null||o==null)){var{chartData:l,computedData:c,dataStartIndex:u,dataEndIndex:d}=n,p=[];return e.reduce((f,h)=>{var v,{dataDefinedOnItem:b,settings:g}=h,E=selectFinalData(b,l),j=getSliced(E,u,d),w=(v=g==null?void 0:g.dataKey)!==null&&v!==void 0?v:a==null?void 0:a.dataKey,S=g==null?void 0:g.nameKey,A;if(a!=null&&a.dataKey&&Array.isArray(j)&&!Array.isArray(j[0])&&s==="axis"?A=findEntryInArray(j,a.dataKey,i):A=o(j,t,c,S),Array.isArray(A))A.forEach(_=>{var $=_objectSpread$f(_objectSpread$f({},g),{},{name:_.name,unit:_.unit,color:void 0,fill:void 0});f.push(getTooltipEntry({tooltipEntrySettings:$,dataKey:_.dataKey,payload:_.payload,value:getValueByDataKey(_.payload,_.dataKey),name:_.name}))});else{var R;f.push(getTooltipEntry({tooltipEntrySettings:g,dataKey:w,payload:A,value:getValueByDataKey(A,w),name:(R=getValueByDataKey(A,S))!==null&&R!==void 0?R:g==null?void 0:g.name}))}return f},p)}},selectTooltipAxisType=e=>{var t=selectChartLayout(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},selectTooltipAxisId=e=>e.tooltip.settings.axisId,selectTooltipAxis=e=>{var t=selectTooltipAxisType(e),n=selectTooltipAxisId(e);return selectAxisSettings(e,t,n)},selectTooltipAxisRealScaleType=createSelector([selectTooltipAxis,selectChartLayout,selectHasBar,selectChartName,selectTooltipAxisType],combineRealScaleType),selectAllUnfilteredGraphicalItems=createSelector([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),selectTooltipAxisPredicate=createSelector([selectTooltipAxisType,selectTooltipAxisId],itemAxisPredicate),selectAllGraphicalItemsSettings=createSelector([selectAllUnfilteredGraphicalItems,selectTooltipAxis,selectTooltipAxisPredicate],combineGraphicalItemsSettings),selectTooltipGraphicalItemsData=createSelector([selectAllGraphicalItemsSettings],combineGraphicalItemsData),selectTooltipDisplayedData=createSelector([selectTooltipGraphicalItemsData,selectChartDataWithIndexes],combineDisplayedData),selectAllTooltipAppliedValues=createSelector([selectTooltipDisplayedData,selectTooltipAxis,selectAllGraphicalItemsSettings],combineAppliedValues),selectTooltipAxisDomainDefinition=createSelector([selectTooltipAxis],getDomainDefinition),selectTooltipStackGroups=createSelector([selectTooltipDisplayedData,selectAllGraphicalItemsSettings,selectStackOffsetType],combineStackGroups),selectTooltipDomainOfStackGroups=createSelector([selectTooltipStackGroups,selectChartDataWithIndexes,selectTooltipAxisType],combineDomainOfStackGroups),selectTooltipItemsSettingsExceptStacked=createSelector([selectAllGraphicalItemsSettings],filterGraphicalNotStackedItems),selectTooltipAllAppliedNumericalValuesIncludingErrorValues=createSelector([selectTooltipDisplayedData,selectTooltipAxis,selectTooltipItemsSettingsExceptStacked,selectTooltipAxisType],combineAppliedNumericalValuesIncludingErrorValues),selectReferenceDotsByTooltipAxis=createSelector([selectReferenceDots,selectTooltipAxisType,selectTooltipAxisId],filterReferenceElements),selectTooltipReferenceDotsDomain=createSelector([selectReferenceDotsByTooltipAxis,selectTooltipAxisType],combineDotsDomain),selectReferenceAreasByTooltipAxis=createSelector([selectReferenceAreas,selectTooltipAxisType,selectTooltipAxisId],filterReferenceElements),selectTooltipReferenceAreasDomain=createSelector([selectReferenceAreasByTooltipAxis,selectTooltipAxisType],combineAreasDomain),selectReferenceLinesByTooltipAxis=createSelector([selectReferenceLines,selectTooltipAxisType,selectTooltipAxisId],filterReferenceElements),selectTooltipReferenceLinesDomain=createSelector([selectReferenceLinesByTooltipAxis,selectTooltipAxisType],combineLinesDomain),selectTooltipReferenceElementsDomain=createSelector([selectTooltipReferenceDotsDomain,selectTooltipReferenceLinesDomain,selectTooltipReferenceAreasDomain],mergeDomains),selectTooltipNumericalDomain=createSelector([selectTooltipAxis,selectTooltipAxisDomainDefinition,selectTooltipDomainOfStackGroups,selectTooltipAllAppliedNumericalValuesIncludingErrorValues,selectTooltipReferenceElementsDomain],combineNumericalDomain),selectTooltipAxisDomain=createSelector([selectTooltipAxis,selectChartLayout,selectTooltipDisplayedData,selectAllTooltipAppliedValues,selectStackOffsetType,selectTooltipAxisType,selectTooltipNumericalDomain],combineAxisDomain),selectTooltipNiceTicks=createSelector([selectTooltipAxisDomain,selectTooltipAxis,selectTooltipAxisRealScaleType],combineNiceTicks),selectTooltipAxisDomainIncludingNiceTicks=createSelector([selectTooltipAxis,selectTooltipAxisDomain,selectTooltipNiceTicks,selectTooltipAxisType],combineAxisDomainWithNiceTicks),selectTooltipAxisRange=e=>{var t=selectTooltipAxisType(e),n=selectTooltipAxisId(e),a=!1;return selectAxisRange(e,t,n,a)},selectTooltipAxisRangeWithReverse=createSelector([selectTooltipAxis,selectTooltipAxisRange],combineAxisRangeWithReverse),selectTooltipAxisScale=createSelector([selectTooltipAxis,selectTooltipAxisRealScaleType,selectTooltipAxisDomainIncludingNiceTicks,selectTooltipAxisRangeWithReverse],combineScaleFunction),selectTooltipDuplicateDomain=createSelector([selectChartLayout,selectAllTooltipAppliedValues,selectTooltipAxis,selectTooltipAxisType],combineDuplicateDomain),selectTooltipCategoricalDomain=createSelector([selectChartLayout,selectAllTooltipAppliedValues,selectTooltipAxis,selectTooltipAxisType],combineCategoricalDomain),combineTicksOfTooltipAxis=(e,t,n,a,i,o,s,l)=>{if(t){var{type:c}=t,u=isCategoricalAxis(e,l);if(a){var d=n==="scaleBand"&&a.bandwidth?a.bandwidth()/2:2,p=c==="category"&&a.bandwidth?a.bandwidth()/d:0;return p=l==="angleAxis"&&i!=null&&(i==null?void 0:i.length)>=2?mathSign(i[0]-i[1])*2*p:p,u&&s?s.map((f,h)=>({coordinate:a(f)+p,value:f,index:h,offset:p})):a.domain().map((f,h)=>({coordinate:a(f)+p,value:o?o[f]:f,index:h,offset:p}))}}},selectTooltipAxisTicks=createSelector([selectChartLayout,selectTooltipAxis,selectTooltipAxisRealScaleType,selectTooltipAxisScale,selectTooltipAxisRange,selectTooltipDuplicateDomain,selectTooltipCategoricalDomain,selectTooltipAxisType],combineTicksOfTooltipAxis),selectTooltipEventType=createSelector([selectDefaultTooltipEventType,selectValidateTooltipEventTypes,selectTooltipSettings],(e,t,n)=>combineTooltipEventType(n.shared,e,t)),selectTooltipTrigger=e=>e.tooltip.settings.trigger,selectDefaultIndex=e=>e.tooltip.settings.defaultIndex,selectTooltipInteractionState$1=createSelector([selectTooltipState,selectTooltipEventType,selectTooltipTrigger,selectDefaultIndex],combineTooltipInteractionState),selectActiveTooltipIndex=createSelector([selectTooltipInteractionState$1,selectTooltipDisplayedData],combineActiveTooltipIndex),selectActiveLabel$1=createSelector([selectTooltipAxisTicks,selectActiveTooltipIndex],combineActiveLabel),selectActiveTooltipDataKey=createSelector([selectTooltipInteractionState$1],e=>{if(e)return e.dataKey}),selectTooltipPayloadConfigurations$1=createSelector([selectTooltipState,selectTooltipEventType,selectTooltipTrigger,selectDefaultIndex],combineTooltipPayloadConfigurations),selectTooltipCoordinateForDefaultIndex=createSelector([selectChartWidth,selectChartHeight,selectChartLayout,selectChartOffsetInternal,selectTooltipAxisTicks,selectDefaultIndex,selectTooltipPayloadConfigurations$1,selectTooltipPayloadSearcher],combineCoordinateForDefaultIndex),selectActiveTooltipCoordinate=createSelector([selectTooltipInteractionState$1,selectTooltipCoordinateForDefaultIndex],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),selectIsTooltipActive$1=createSelector([selectTooltipInteractionState$1],e=>e.active),selectActiveTooltipPayload=createSelector([selectTooltipPayloadConfigurations$1,selectActiveTooltipIndex,selectChartDataWithIndexes,selectTooltipAxis,selectActiveLabel$1,selectTooltipPayloadSearcher,selectTooltipEventType],combineTooltipPayload),selectActiveTooltipDataPoints=createSelector([selectActiveTooltipPayload],e=>{if(e!=null){var t=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(t))}});function ownKeys$e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function _objectSpread$e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$e(Object(n),!0).forEach(function(a){_defineProperty$i(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$e(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function _defineProperty$i(e,t,n){return(t=_toPropertyKey$i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$i(e){var t=_toPrimitive$i(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$i(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var useTooltipAxis=()=>useAppSelector(selectTooltipAxis),useTooltipAxisBandSize=()=>{var e=useTooltipAxis(),t=useAppSelector(selectTooltipAxisTicks),n=useAppSelector(selectTooltipAxisScale);return getBandSizeOfAxis(_objectSpread$e(_objectSpread$e({},e),{},{scale:n}),t)},useChartName=()=>useAppSelector(selectChartName),pickTooltipEventType=(e,t)=>t,pickTrigger=(e,t,n)=>n,pickDefaultIndex=(e,t,n,a)=>a,selectOrderedTooltipTicks=createSelector(selectTooltipAxisTicks,e=>sortBy$1(e,t=>t.coordinate)),selectTooltipInteractionState=createSelector([selectTooltipState,pickTooltipEventType,pickTrigger,pickDefaultIndex],combineTooltipInteractionState),selectActiveIndex=createSelector([selectTooltipInteractionState,selectTooltipDisplayedData],combineActiveTooltipIndex),selectTooltipDataKey=(e,t,n)=>{if(t!=null){var a=selectTooltipState(e);return t==="axis"?n==="hover"?a.axisInteraction.hover.dataKey:a.axisInteraction.click.dataKey:n==="hover"?a.itemInteraction.hover.dataKey:a.itemInteraction.click.dataKey}},selectTooltipPayloadConfigurations=createSelector([selectTooltipState,pickTooltipEventType,pickTrigger,pickDefaultIndex],combineTooltipPayloadConfigurations),selectCoordinateForDefaultIndex=createSelector([selectChartWidth,selectChartHeight,selectChartLayout,selectChartOffsetInternal,selectTooltipAxisTicks,pickDefaultIndex,selectTooltipPayloadConfigurations,selectTooltipPayloadSearcher],combineCoordinateForDefaultIndex),selectActiveCoordinate=createSelector([selectTooltipInteractionState,selectCoordinateForDefaultIndex],(e,t)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:t}),selectActiveLabel=createSelector(selectTooltipAxisTicks,selectActiveIndex,combineActiveLabel),selectTooltipPayload=createSelector([selectTooltipPayloadConfigurations,selectActiveIndex,selectChartDataWithIndexes,selectTooltipAxis,selectActiveLabel,selectTooltipPayloadSearcher,pickTooltipEventType],combineTooltipPayload),selectIsTooltipActive=createSelector([selectTooltipInteractionState],e=>({isActive:e.active,activeIndex:e.index})),combineActiveProps=(e,t,n,a,i,o,s,l)=>{if(!(!e||!t||!a||!i||!o)){var c=inRange(e.chartX,e.chartY,t,n,l);if(c){var u=calculateTooltipPos(c,t),d=calculateActiveTickIndex(u,s,o,a,i),p=getActiveCoordinate(t,o,d,c);return{activeIndex:String(d),activeCoordinate:p}}}};function _extends$c(){return _extends$c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},_extends$c.apply(null,arguments)}function ownKeys$d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function _objectSpread$d(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$d(Object(n),!0).forEach(function(a){_defineProperty$h(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$d(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function _defineProperty$h(e,t,n){return(t=_toPropertyKey$h(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$h(e){var t=_toPrimitive$h(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$h(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function CursorInternal(e){var{coordinate:t,payload:n,index:a,offset:i,tooltipAxisBandSize:o,layout:s,cursor:l,tooltipEventType:c,chartName:u}=e,d=t,p=n,f=a;if(!l||!d||u!=="ScatterChart"&&c!=="axis")return null;var h,v;if(u==="ScatterChart")h=d,v=Cross;else if(u==="BarChart")h=getCursorRectangle(s,d,i,o),v=Rectangle;else if(s==="radial"){var{cx:b,cy:g,radius:E,startAngle:j,endAngle:w}=getRadialCursorPoints(d);h={cx:b,cy:g,startAngle:j,endAngle:w,innerRadius:E,outerRadius:E},v=Sector}else h={points:getCursorPoints(s,d,i)},v=Curve;var S=typeof l=="object"&&"className"in l?l.className:void 0,A=_objectSpread$d(_objectSpread$d(_objectSpread$d(_objectSpread$d({stroke:"#ccc",pointerEvents:"none"},i),h),filterProps(l,!1)),{},{payload:p,payloadIndex:f,className:clsx("recharts-tooltip-cursor",S)});return reactExports.isValidElement(l)?reactExports.cloneElement(l,A):reactExports.createElement(v,A)}function Cursor(e){var t=useTooltipAxisBandSize(),n=useOffsetInternal(),a=useChartLayout(),i=useChartName();return reactExports.createElement(CursorInternal,_extends$c({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:n,layout:a,tooltipAxisBandSize:t,chartName:i}))}var TooltipPortalContext=reactExports.createContext(null),useTooltipPortal=()=>reactExports.useContext(TooltipPortalContext),eventemitter3={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(n=!1));function i(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function o(c,u,d,p,f){if(typeof d!="function")throw new TypeError("The listener must be a function");var h=new i(d,p||c,f),v=n?n+u:u;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],h]:c._events[v].push(h):(c._events[v]=h,c._eventsCount++),c}function s(c,u){--c._eventsCount===0?c._events=new a:delete c._events[u]}function l(){this._events=new a,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,p;if(this._eventsCount===0)return u;for(p in d=this._events)t.call(d,p)&&u.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=n?n+u:u,p=this._events[d];if(!p)return[];if(p.fn)return[p.fn];for(var f=0,h=p.length,v=new Array(h);f<h;f++)v[f]=p[f].fn;return v},l.prototype.listenerCount=function(u){var d=n?n+u:u,p=this._events[d];return p?p.fn?1:p.length:0},l.prototype.emit=function(u,d,p,f,h,v){var b=n?n+u:u;if(!this._events[b])return!1;var g=this._events[b],E=arguments.length,j,w;if(g.fn){switch(g.once&&this.removeListener(u,g.fn,void 0,!0),E){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,d),!0;case 3:return g.fn.call(g.context,d,p),!0;case 4:return g.fn.call(g.context,d,p,f),!0;case 5:return g.fn.call(g.context,d,p,f,h),!0;case 6:return g.fn.call(g.context,d,p,f,h,v),!0}for(w=1,j=new Array(E-1);w<E;w++)j[w-1]=arguments[w];g.fn.apply(g.context,j)}else{var S=g.length,A;for(w=0;w<S;w++)switch(g[w].once&&this.removeListener(u,g[w].fn,void 0,!0),E){case 1:g[w].fn.call(g[w].context);break;case 2:g[w].fn.call(g[w].context,d);break;case 3:g[w].fn.call(g[w].context,d,p);break;case 4:g[w].fn.call(g[w].context,d,p,f);break;default:if(!j)for(A=1,j=new Array(E-1);A<E;A++)j[A-1]=arguments[A];g[w].fn.apply(g[w].context,j)}}return!0},l.prototype.on=function(u,d,p){return o(this,u,d,p,!1)},l.prototype.once=function(u,d,p){return o(this,u,d,p,!0)},l.prototype.removeListener=function(u,d,p,f){var h=n?n+u:u;if(!this._events[h])return this;if(!d)return s(this,h),this;var v=this._events[h];if(v.fn)v.fn===d&&(!f||v.once)&&(!p||v.context===p)&&s(this,h);else{for(var b=0,g=[],E=v.length;b<E;b++)(v[b].fn!==d||f&&!v[b].once||p&&v[b].context!==p)&&g.push(v[b]);g.length?this._events[h]=g.length===1?g[0]:g:s(this,h)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&s(this,d)):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l})(eventemitter3);var eventemitter3Exports=eventemitter3.exports;const EventEmitter=getDefaultExportFromCjs(eventemitter3Exports);var eventCenter=new EventEmitter,TOOLTIP_SYNC_EVENT="recharts.syncEvent.tooltip",BRUSH_SYNC_EVENT="recharts.syncEvent.brush";function arrayTooltipSearcher(e,t){if(t){var n=Number.parseInt(t,10);if(!isNan(n))return e==null?void 0:e[n]}}var initialState$6={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},optionsSlice=createSlice({name:"options",initialState:initialState$6,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),optionsReducer=optionsSlice.reducer,{createEventEmitter}=optionsSlice.actions;function selectSynchronisedTooltipState(e){return e.tooltip.syncInteraction}var initialChartDataState={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},chartDataSlice=createSlice({name:"chartData",initialState:initialChartDataState,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:a}=t.payload;n!=null&&(e.dataStartIndex=n),a!=null&&(e.dataEndIndex=a)}}}),{setChartData,setDataStartEndIndexes,setComputedData}=chartDataSlice.actions,chartDataReducer=chartDataSlice.reducer,noop$2=()=>{};function useTooltipSyncEventsListener(){var e=useAppSelector(selectSyncId),t=useAppSelector(selectEventEmitter),n=useAppDispatch(),a=useAppSelector(selectSyncMethod),i=useAppSelector(selectTooltipAxisTicks),o=useChartLayout(),s=useViewBox(),l=useAppSelector(c=>c.rootProps.className);reactExports.useEffect(()=>{if(e==null)return noop$2;var c=(u,d,p)=>{if(t!==p&&e===u){if(a==="index"){n(d);return}if(i!=null){var f;if(typeof a=="function"){var h={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},v=a(i,h);f=i[v]}else a==="value"&&(f=i.find(R=>String(R.value)===d.payload.label));var{coordinate:b}=d.payload;if(f==null||d.payload.active===!1||b==null||s==null){n(setSyncInteraction({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:g,y:E}=b,j=Math.min(g,s.x+s.width),w=Math.min(E,s.y+s.height),S={x:o==="horizontal"?f.coordinate:j,y:o==="horizontal"?w:f.coordinate},A=setSyncInteraction({active:d.payload.active,coordinate:S,dataKey:d.payload.dataKey,index:String(f.index),label:d.payload.label});n(A)}}};return eventCenter.on(TOOLTIP_SYNC_EVENT,c),()=>{eventCenter.off(TOOLTIP_SYNC_EVENT,c)}},[l,n,t,e,a,i,o,s])}function useBrushSyncEventsListener(){var e=useAppSelector(selectSyncId),t=useAppSelector(selectEventEmitter),n=useAppDispatch();reactExports.useEffect(()=>{if(e==null)return noop$2;var a=(i,o,s)=>{t!==s&&e===i&&n(setDataStartEndIndexes(o))};return eventCenter.on(BRUSH_SYNC_EVENT,a),()=>{eventCenter.off(BRUSH_SYNC_EVENT,a)}},[n,t,e])}function useSynchronisedEventsFromOtherCharts(){var e=useAppDispatch();reactExports.useEffect(()=>{e(createEventEmitter())},[e]),useTooltipSyncEventsListener(),useBrushSyncEventsListener()}function useTooltipChartSynchronisation(e,t,n,a,i,o){var s=useAppSelector(f=>selectTooltipDataKey(f,e,t)),l=useAppSelector(selectEventEmitter),c=useAppSelector(selectSyncId),u=useAppSelector(selectSyncMethod),d=useAppSelector(selectSynchronisedTooltipState),p=d==null?void 0:d.active;reactExports.useEffect(()=>{if(!p&&c!=null&&l!=null){var f=setSyncInteraction({active:o,coordinate:n,dataKey:s,index:i,label:typeof a=="number"?String(a):a});eventCenter.emit(TOOLTIP_SYNC_EVENT,c,f,l)}},[p,n,s,i,a,l,c,u,o])}function ownKeys$c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function _objectSpread$c(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$c(Object(n),!0).forEach(function(a){_defineProperty$g(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$c(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function _defineProperty$g(e,t,n){return(t=_toPropertyKey$g(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$g(e){var t=_toPrimitive$g(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$g(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function defaultUniqBy(e){return e.dataKey}function renderContent(e,t){return reactExports.isValidElement(e)?reactExports.cloneElement(e,t):typeof e=="function"?reactExports.createElement(e,t):reactExports.createElement(DefaultTooltipContent,t)}var emptyPayload=[],defaultTooltipProps={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Global.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Tooltip(e){var t=resolveDefaultProps(e,defaultTooltipProps),{active:n,allowEscapeViewBox:a,animationDuration:i,animationEasing:o,content:s,filterNull:l,isAnimationActive:c,offset:u,payloadUniqBy:d,position:p,reverseDirection:f,useTranslate3d:h,wrapperStyle:v,cursor:b,shared:g,trigger:E,defaultIndex:j,portal:w,axisId:S}=t,A=useAppDispatch(),R=typeof j=="number"?String(j):j;reactExports.useEffect(()=>{A(setTooltipSettingsState({shared:g,trigger:E,axisId:S,active:n,defaultIndex:R}))},[A,g,E,S,n,R]);var _=useViewBox(),$=useAccessibilityLayer(),C=useTooltipEventType(g),{activeIndex:O,isActive:N}=useAppSelector(ee=>selectIsTooltipActive(ee,C,E,R)),T=useAppSelector(ee=>selectTooltipPayload(ee,C,E,R)),L=useAppSelector(ee=>selectActiveLabel(ee,C,E,R)),B=useAppSelector(ee=>selectActiveCoordinate(ee,C,E,R)),I=T,z=useTooltipPortal(),F=n!=null?n:N,[Z,U]=useElementOffset([I,F]),Q=C==="axis"?L:void 0;useTooltipChartSynchronisation(C,E,B,Q,O,F);var W=w!=null?w:z;if(W==null)return null;var D=I!=null?I:emptyPayload;F||(D=emptyPayload),l&&D.length&&(D=getUniqPayload(I.filter(ee=>ee.value!=null&&(ee.hide!==!0||t.includeHidden)),d,defaultUniqBy));var H=D.length>0,J=reactExports.createElement(TooltipBoundingBox,{allowEscapeViewBox:a,animationDuration:i,animationEasing:o,isAnimationActive:c,active:F,coordinate:B,hasPayload:H,offset:u,position:p,reverseDirection:f,useTranslate3d:h,viewBox:_,wrapperStyle:v,lastBoundingBox:Z,innerRef:U,hasPortalFromProps:!!w},renderContent(s,_objectSpread$c(_objectSpread$c({},t),{},{payload:D,label:Q,active:F,coordinate:B,accessibilityLayer:$})));return reactExports.createElement(reactExports.Fragment,null,reactDomExports.createPortal(J,W),F&&reactExports.createElement(Cursor,{cursor:b,tooltipEventType:C,coordinate:B,payload:I,index:O}))}var throttle$2={},debounce={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,a=0,i={}){typeof i!="object"&&(i={});let o=null,s=null,l=null,c=0,u=null,d;const{leading:p=!1,trailing:f=!0,maxWait:h}=i,v="maxWait"in i,b=v?Math.max(Number(h)||0,a):0,g=_=>(o!==null&&(d=n.apply(s,o)),o=s=null,c=_,d),E=_=>(c=_,u=setTimeout(A,a),p&&o!==null?g(_):d),j=_=>(u=null,f&&o!==null?g(_):d),w=_=>{if(l===null)return!0;const $=_-l,C=$>=a||$<0,O=v&&_-c>=b;return C||O},S=_=>{const $=l===null?0:_-l,C=a-$,O=b-(_-c);return v?Math.min(C,O):C},A=()=>{const _=Date.now();if(w(_))return j(_);u=setTimeout(A,S(_))},R=function(..._){const $=Date.now(),C=w($);if(o=_,s=this,l=$,C){if(u===null)return E($);if(v)return clearTimeout(u),u=setTimeout(A,a),g($)}return u===null&&(u=setTimeout(A,a)),d};return R.cancel=()=>{u!==null&&clearTimeout(u),c=0,l=o=s=u=null},R.flush=()=>u===null?d:j(Date.now()),R}e.debounce=t})(debounce);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=debounce;function n(a,i=0,o={}){const{leading:s=!0,trailing:l=!0}=o;return t.debounce(a,i,{leading:s,maxWait:i,trailing:l})}e.throttle=n})(throttle$2);var throttle=throttle$2.throttle;const throttle$1=getDefaultExportFromCjs(throttle);var warn=function e(t,n){for(var a=arguments.length,i=new Array(a>2?a-2:0),o=2;o<a;o++)i[o-2]=arguments[o]};function ownKeys$b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function _objectSpread$b(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$b(Object(n),!0).forEach(function(a){_defineProperty$f(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$b(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function _defineProperty$f(e,t,n){return(t=_toPropertyKey$f(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$f(e){var t=_toPrimitive$f(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$f(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ResponsiveContainer=reactExports.forwardRef((e,t)=>{var{aspect:n,initialDimension:a={width:-1,height:-1},width:i="100%",height:o="100%",minWidth:s=0,minHeight:l,maxHeight:c,children:u,debounce:d=0,id:p,className:f,onResize:h,style:v={}}=e,b=reactExports.useRef(null),g=reactExports.useRef();g.current=h,reactExports.useImperativeHandle(t,()=>b.current);var[E,j]=reactExports.useState({containerWidth:a.width,containerHeight:a.height}),w=reactExports.useCallback((A,R)=>{j(_=>{var $=Math.round(A),C=Math.round(R);return _.containerWidth===$&&_.containerHeight===C?_:{containerWidth:$,containerHeight:C}})},[]);reactExports.useEffect(()=>{var A=C=>{var O,{width:N,height:T}=C[0].contentRect;w(N,T),(O=g.current)===null||O===void 0||O.call(g,N,T)};d>0&&(A=throttle$1(A,d,{trailing:!0,leading:!1}));var R=new ResizeObserver(A),{width:_,height:$}=b.current.getBoundingClientRect();return w(_,$),R.observe(b.current),()=>{R.disconnect()}},[w,d]);var S=reactExports.useMemo(()=>{var{containerWidth:A,containerHeight:R}=E;if(A<0||R<0)return null;warn(isPercent(i)||isPercent(o),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,o),warn(!n||n>0,"The aspect(%s) must be greater than zero.",n);var _=isPercent(i)?A:i,$=isPercent(o)?R:o;return n&&n>0&&(_?$=_/n:$&&(_=$*n),c&&$>c&&($=c)),warn(_>0||$>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,_,$,i,o,s,l,n),reactExports.Children.map(u,C=>reactExports.cloneElement(C,{width:_,height:$,style:_objectSpread$b({width:_,height:$},C.props.style)}))},[n,u,o,c,l,s,E,i]);return reactExports.createElement("div",{id:p?"".concat(p):void 0,className:clsx("recharts-responsive-container",f),style:_objectSpread$b(_objectSpread$b({},v),{},{width:i,height:o,minWidth:s,minHeight:l,maxHeight:c}),ref:b},reactExports.createElement("div",{style:{width:0,height:0,overflow:"visible"}},S))});function ownKeys$a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function _objectSpread$a(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$a(Object(n),!0).forEach(function(a){_defineProperty$e(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$a(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function _defineProperty$e(e,t,n){return(t=_toPropertyKey$e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$e(e){var t=_toPrimitive$e(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var stringCache={widthCache:{},cacheCount:0},MAX_CACHE_NUM=2e3,SPAN_STYLE={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},MEASUREMENT_SPAN_ID="recharts_measurement_span";function removeInvalidKeys(e){var t=_objectSpread$a({},e);return Object.keys(t).forEach(n=>{t[n]||delete t[n]}),t}var getStringSize=function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Global.isSsr)return{width:0,height:0};var a=removeInvalidKeys(n),i=JSON.stringify({text:t,copyStyle:a});if(stringCache.widthCache[i])return stringCache.widthCache[i];try{var o=document.getElementById(MEASUREMENT_SPAN_ID);o||(o=document.createElement("span"),o.setAttribute("id",MEASUREMENT_SPAN_ID),o.setAttribute("aria-hidden","true"),document.body.appendChild(o));var s=_objectSpread$a(_objectSpread$a({},SPAN_STYLE),a);Object.assign(o.style,s),o.textContent="".concat(t);var l=o.getBoundingClientRect(),c={width:l.width,height:l.height};return stringCache.widthCache[i]=c,++stringCache.cacheCount>MAX_CACHE_NUM&&(stringCache.cacheCount=0,stringCache.widthCache={}),c}catch(u){return{width:0,height:0}}},MULTIPLY_OR_DIVIDE_REGEX=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,ADD_OR_SUBTRACT_REGEX=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,CSS_LENGTH_UNIT_REGEX=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,NUM_SPLIT_REGEX=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,CONVERSION_RATES={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},FIXED_CSS_LENGTH_UNITS=Object.keys(CONVERSION_RATES),STR_NAN="NaN";function convertToPx(e,t){return e*CONVERSION_RATES[t]}class DecimalCSS{static parse(t){var n,[,a,i]=(n=NUM_SPLIT_REGEX.exec(t))!==null&&n!==void 0?n:[];return new DecimalCSS(parseFloat(a),i!=null?i:"")}constructor(t,n){this.num=t,this.unit=n,this.num=t,this.unit=n,isNan(t)&&(this.unit=""),n!==""&&!CSS_LENGTH_UNIT_REGEX.test(n)&&(this.num=NaN,this.unit=""),FIXED_CSS_LENGTH_UNITS.includes(n)&&(this.num=convertToPx(t,n),this.unit="px")}add(t){return this.unit!==t.unit?new DecimalCSS(NaN,""):new DecimalCSS(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new DecimalCSS(NaN,""):new DecimalCSS(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new DecimalCSS(NaN,""):new DecimalCSS(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new DecimalCSS(NaN,""):new DecimalCSS(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return isNan(this.num)}}function calculateArithmetic(e){if(e.includes(STR_NAN))return STR_NAN;for(var t=e;t.includes("*")||t.includes("/");){var n,[,a,i,o]=(n=MULTIPLY_OR_DIVIDE_REGEX.exec(t))!==null&&n!==void 0?n:[],s=DecimalCSS.parse(a!=null?a:""),l=DecimalCSS.parse(o!=null?o:""),c=i==="*"?s.multiply(l):s.divide(l);if(c.isNaN())return STR_NAN;t=t.replace(MULTIPLY_OR_DIVIDE_REGEX,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,d,p,f]=(u=ADD_OR_SUBTRACT_REGEX.exec(t))!==null&&u!==void 0?u:[],h=DecimalCSS.parse(d!=null?d:""),v=DecimalCSS.parse(f!=null?f:""),b=p==="+"?h.add(v):h.subtract(v);if(b.isNaN())return STR_NAN;t=t.replace(ADD_OR_SUBTRACT_REGEX,b.toString())}return t}var PARENTHESES_REGEX=/\(([^()]*)\)/;function calculateParentheses(e){for(var t=e,n;(n=PARENTHESES_REGEX.exec(t))!=null;){var[,a]=n;t=t.replace(PARENTHESES_REGEX,calculateArithmetic(a))}return t}function evaluateExpression(e){var t=e.replace(/\s+/g,"");return t=calculateParentheses(t),t=calculateArithmetic(t),t}function safeEvaluateExpression(e){try{return evaluateExpression(e)}catch(t){return STR_NAN}}function reduceCSSCalc(e){var t=safeEvaluateExpression(e.slice(5,-1));return t===STR_NAN?"":t}var _excluded$c=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],_excluded2$6=["dx","dy","angle","className","breakAll"];function _extends$b(){return _extends$b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},_extends$b.apply(null,arguments)}function _objectWithoutProperties$c(e,t){if(e==null)return{};var n,a,i=_objectWithoutPropertiesLoose$c(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function _objectWithoutPropertiesLoose$c(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var BREAKING_SPACES=/[ \f\n\r\t\v\u2028\u2029]+/,calculateWordWidths=e=>{var{children:t,breakAll:n,style:a}=e;try{var i=[];isNullish(t)||(n?i=t.toString().split(""):i=t.toString().split(BREAKING_SPACES));var o=i.map(l=>({word:l,width:getStringSize(l,a).width})),s=n?0:getStringSize(" ",a).width;return{wordsWithComputedWidth:o,spaceWidth:s}}catch(l){return null}},calculateWordsByLines=(e,t,n,a,i)=>{var{maxLines:o,children:s,style:l,breakAll:c}=e,u=isNumber(o),d=s,p=function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return N.reduce((T,L)=>{var{word:B,width:I}=L,z=T[T.length-1];if(z&&(a==null||i||z.width+I+n<Number(a)))z.words.push(B),z.width+=I+n;else{var F={words:[B],width:I};T.push(F)}return T},[])},f=p(t),h=O=>O.reduce((N,T)=>N.width>T.width?N:T);if(!u||i)return f;var v=f.length>o||h(f).width>Number(a);if(!v)return f;for(var b="…",g=O=>{var N=d.slice(0,O),T=calculateWordWidths({breakAll:c,style:l,children:N+b}).wordsWithComputedWidth,L=p(T),B=L.length>o||h(L).width>Number(a);return[B,L]},E=0,j=d.length-1,w=0,S;E<=j&&w<=d.length-1;){var A=Math.floor((E+j)/2),R=A-1,[_,$]=g(R),[C]=g(A);if(!_&&!C&&(E=A+1),_&&C&&(j=A-1),!_&&C){S=$;break}w++}return S||f},getWordsWithoutCalculate=e=>{var t=isNullish(e)?[]:e.toString().split(BREAKING_SPACES);return[{words:t}]},getWordsByLines=e=>{var{width:t,scaleToFit:n,children:a,style:i,breakAll:o,maxLines:s}=e;if((t||n)&&!Global.isSsr){var l,c,u=calculateWordWidths({breakAll:o,children:a,style:i});if(u){var{wordsWithComputedWidth:d,spaceWidth:p}=u;l=d,c=p}else return getWordsWithoutCalculate(a);return calculateWordsByLines({breakAll:o,children:a,maxLines:s,style:i},l,c,t,n)}return getWordsWithoutCalculate(a)},DEFAULT_FILL="#808080",Text=reactExports.forwardRef((e,t)=>{var{x:n=0,y:a=0,lineHeight:i="1em",capHeight:o="0.71em",scaleToFit:s=!1,textAnchor:l="start",verticalAnchor:c="end",fill:u=DEFAULT_FILL}=e,d=_objectWithoutProperties$c(e,_excluded$c),p=reactExports.useMemo(()=>getWordsByLines({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:s,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,s,d.style,d.width]),{dx:f,dy:h,angle:v,className:b,breakAll:g}=d,E=_objectWithoutProperties$c(d,_excluded2$6);if(!isNumOrStr(n)||!isNumOrStr(a))return null;var j=n+(isNumber(f)?f:0),w=a+(isNumber(h)?h:0),S;switch(c){case"start":S=reduceCSSCalc("calc(".concat(o,")"));break;case"middle":S=reduceCSSCalc("calc(".concat((p.length-1)/2," * -").concat(i," + (").concat(o," / 2))"));break;default:S=reduceCSSCalc("calc(".concat(p.length-1," * -").concat(i,")"));break}var A=[];if(s){var R=p[0].width,{width:_}=d;A.push("scale(".concat(isNumber(_)?_/R:1,")"))}return v&&A.push("rotate(".concat(v,", ").concat(j,", ").concat(w,")")),A.length&&(E.transform=A.join(" ")),reactExports.createElement("text",_extends$b({},filterProps(E,!0),{ref:t,x:j,y:w,className:clsx("recharts-text",b),textAnchor:l,fill:u.includes("url")?DEFAULT_FILL:u}),p.map(($,C)=>{var O=$.words.join(g?"":" ");return reactExports.createElement("tspan",{x:j,dy:C===0?S:i,key:"".concat(O,"-").concat(C)},O)}))});Text.displayName="Text";var _excluded$b=["offset"],_excluded2$5=["labelRef"];function _objectWithoutProperties$b(e,t){if(e==null)return{};var n,a,i=_objectWithoutPropertiesLoose$b(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function _objectWithoutPropertiesLoose$b(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function ownKeys$9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function _objectSpread$9(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$9(Object(n),!0).forEach(function(a){_defineProperty$d(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$9(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function _defineProperty$d(e,t,n){return(t=_toPropertyKey$d(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$d(e){var t=_toPrimitive$d(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$d(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _extends$a(){return _extends$a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},_extends$a.apply(null,arguments)}var getLabel=e=>{var{value:t,formatter:n}=e,a=isNullish(e.children)?t:e.children;return typeof n=="function"?n(a):a},isLabelContentAFunction=e=>e!=null&&typeof e=="function",getDeltaAngle=(e,t)=>{var n=mathSign(t-e),a=Math.min(Math.abs(t-e),360);return n*a},renderRadialLabel=(e,t,n)=>{var{position:a,viewBox:i,offset:o,className:s}=e,{cx:l,cy:c,innerRadius:u,outerRadius:d,startAngle:p,endAngle:f,clockWise:h}=i,v=(u+d)/2,b=getDeltaAngle(p,f),g=b>=0?1:-1,E,j;a==="insideStart"?(E=p+g*o,j=h):a==="insideEnd"?(E=f-g*o,j=!h):a==="end"&&(E=f+g*o,j=h),j=b<=0?j:!j;var w=polarToCartesian(l,c,v,E),S=polarToCartesian(l,c,v,E+(j?1:-1)*359),A="M".concat(w.x,",").concat(w.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(j?0:1,`,
    `).concat(S.x,",").concat(S.y),R=isNullish(e.id)?uniqueId("recharts-radial-line-"):e.id;return reactExports.createElement("text",_extends$a({},n,{dominantBaseline:"central",className:clsx("recharts-radial-bar-label",s)}),reactExports.createElement("defs",null,reactExports.createElement("path",{id:R,d:A})),reactExports.createElement("textPath",{xlinkHref:"#".concat(R)},t))},getAttrsOfPolarLabel=e=>{var{viewBox:t,offset:n,position:a}=e,{cx:i,cy:o,innerRadius:s,outerRadius:l,startAngle:c,endAngle:u}=t,d=(c+u)/2;if(a==="outside"){var{x:p,y:f}=polarToCartesian(i,o,l+n,d);return{x:p,y:f,textAnchor:p>=i?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:i,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:i,y:o,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:i,y:o,textAnchor:"middle",verticalAnchor:"end"};var h=(s+l)/2,{x:v,y:b}=polarToCartesian(i,o,h,d);return{x:v,y:b,textAnchor:"middle",verticalAnchor:"middle"}},getAttrsOfCartesianLabel=(e,t)=>{var{parentViewBox:n,offset:a,position:i}=e,{x:o,y:s,width:l,height:c}=t,u=c>=0?1:-1,d=u*a,p=u>0?"end":"start",f=u>0?"start":"end",h=l>=0?1:-1,v=h*a,b=h>0?"end":"start",g=h>0?"start":"end";if(i==="top"){var E={x:o+l/2,y:s-u*a,textAnchor:"middle",verticalAnchor:p};return _objectSpread$9(_objectSpread$9({},E),n?{height:Math.max(s-n.y,0),width:l}:{})}if(i==="bottom"){var j={x:o+l/2,y:s+c+d,textAnchor:"middle",verticalAnchor:f};return _objectSpread$9(_objectSpread$9({},j),n?{height:Math.max(n.y+n.height-(s+c),0),width:l}:{})}if(i==="left"){var w={x:o-v,y:s+c/2,textAnchor:b,verticalAnchor:"middle"};return _objectSpread$9(_objectSpread$9({},w),n?{width:Math.max(w.x-n.x,0),height:c}:{})}if(i==="right"){var S={x:o+l+v,y:s+c/2,textAnchor:g,verticalAnchor:"middle"};return _objectSpread$9(_objectSpread$9({},S),n?{width:Math.max(n.x+n.width-S.x,0),height:c}:{})}var A=n?{width:l,height:c}:{};return i==="insideLeft"?_objectSpread$9({x:o+v,y:s+c/2,textAnchor:g,verticalAnchor:"middle"},A):i==="insideRight"?_objectSpread$9({x:o+l-v,y:s+c/2,textAnchor:b,verticalAnchor:"middle"},A):i==="insideTop"?_objectSpread$9({x:o+l/2,y:s+d,textAnchor:"middle",verticalAnchor:f},A):i==="insideBottom"?_objectSpread$9({x:o+l/2,y:s+c-d,textAnchor:"middle",verticalAnchor:p},A):i==="insideTopLeft"?_objectSpread$9({x:o+v,y:s+d,textAnchor:g,verticalAnchor:f},A):i==="insideTopRight"?_objectSpread$9({x:o+l-v,y:s+d,textAnchor:b,verticalAnchor:f},A):i==="insideBottomLeft"?_objectSpread$9({x:o+v,y:s+c-d,textAnchor:g,verticalAnchor:p},A):i==="insideBottomRight"?_objectSpread$9({x:o+l-v,y:s+c-d,textAnchor:b,verticalAnchor:p},A):i&&typeof i=="object"&&(isNumber(i.x)||isPercent(i.x))&&(isNumber(i.y)||isPercent(i.y))?_objectSpread$9({x:o+getPercentValue(i.x,l),y:s+getPercentValue(i.y,c),textAnchor:"end",verticalAnchor:"end"},A):_objectSpread$9({x:o+l/2,y:s+c/2,textAnchor:"middle",verticalAnchor:"middle"},A)},isPolar=e=>"cx"in e&&isNumber(e.cx);function Label(e){var{offset:t=5}=e,n=_objectWithoutProperties$b(e,_excluded$b),a=_objectSpread$9({offset:t},n),{viewBox:i,position:o,value:s,children:l,content:c,className:u="",textBreakAll:d,labelRef:p}=a,f=useViewBox(),h=i||f;if(!h||isNullish(s)&&isNullish(l)&&!reactExports.isValidElement(c)&&typeof c!="function")return null;if(reactExports.isValidElement(c)){var{labelRef:v}=a,b=_objectWithoutProperties$b(a,_excluded2$5);return reactExports.cloneElement(c,b)}var g;if(typeof c=="function"){if(g=reactExports.createElement(c,a),reactExports.isValidElement(g))return g}else g=getLabel(a);var E=isPolar(h),j=filterProps(a,!0);if(E&&(o==="insideStart"||o==="insideEnd"||o==="end"))return renderRadialLabel(a,g,j);var w=E?getAttrsOfPolarLabel(a):getAttrsOfCartesianLabel(a,h);return reactExports.createElement(Text,_extends$a({ref:p,className:clsx("recharts-label",u)},j,w,{breakAll:d}),g)}Label.displayName="Label";var parseViewBox=e=>{var{cx:t,cy:n,angle:a,startAngle:i,endAngle:o,r:s,radius:l,innerRadius:c,outerRadius:u,x:d,y:p,top:f,left:h,width:v,height:b,clockWise:g,labelViewBox:E}=e;if(E)return E;if(isNumber(v)&&isNumber(b)){if(isNumber(d)&&isNumber(p))return{x:d,y:p,width:v,height:b};if(isNumber(f)&&isNumber(h))return{x:f,y:h,width:v,height:b}}if(isNumber(d)&&isNumber(p))return{x:d,y:p,width:0,height:0};if(isNumber(t)&&isNumber(n))return{cx:t,cy:n,startAngle:i||a||0,endAngle:o||a||0,innerRadius:c||0,outerRadius:u||l||s||0,clockWise:g};if(e.viewBox)return e.viewBox},parseLabel=(e,t,n)=>{if(!e)return null;var a={viewBox:t,labelRef:n};return e===!0?reactExports.createElement(Label,_extends$a({key:"label-implicit"},a)):isNumOrStr(e)?reactExports.createElement(Label,_extends$a({key:"label-implicit",value:e},a)):reactExports.isValidElement(e)?e.type===Label?reactExports.cloneElement(e,_objectSpread$9({key:"label-implicit"},a)):reactExports.createElement(Label,_extends$a({key:"label-implicit",content:e},a)):isLabelContentAFunction(e)?reactExports.createElement(Label,_extends$a({key:"label-implicit",content:e},a)):e&&typeof e=="object"?reactExports.createElement(Label,_extends$a({},e,{key:"label-implicit"},a)):null},renderCallByParent$1=function e(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&a&&!t.label)return null;var{children:i,labelRef:o}=t,s=parseViewBox(t),l=findAllByType(i,Label).map((u,d)=>reactExports.cloneElement(u,{viewBox:n||s,key:"label-".concat(d)}));if(!a)return l;var c=parseLabel(t.label,n||s,o);return[c,...l]};Label.parseViewBox=parseViewBox;Label.renderCallByParent=renderCallByParent$1;var last$3={},last$2={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n[n.length-1]}e.last=t})(last$2);var toArray={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=t})(toArray);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=last$2,n=toArray,a=isArrayLike;function i(o){if(a.isArrayLike(o))return t.last(n.toArray(o))}e.last=i})(last$3);var last=last$3.last;const last$1=getDefaultExportFromCjs(last);var _excluded$a=["valueAccessor"],_excluded2$4=["data","dataKey","clockWise","id","textBreakAll"];function _extends$9(){return _extends$9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},_extends$9.apply(null,arguments)}function ownKeys$8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function _objectSpread$8(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$8(Object(n),!0).forEach(function(a){_defineProperty$c(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$8(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function _defineProperty$c(e,t,n){return(t=_toPropertyKey$c(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$c(e){var t=_toPrimitive$c(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$c(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _objectWithoutProperties$a(e,t){if(e==null)return{};var n,a,i=_objectWithoutPropertiesLoose$a(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function _objectWithoutPropertiesLoose$a(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var defaultAccessor=e=>Array.isArray(e.value)?last$1(e.value):e.value;function LabelList(e){var{valueAccessor:t=defaultAccessor}=e,n=_objectWithoutProperties$a(e,_excluded$a),{data:a,dataKey:i,clockWise:o,id:s,textBreakAll:l}=n,c=_objectWithoutProperties$a(n,_excluded2$4);return!a||!a.length?null:reactExports.createElement(Layer,{className:"recharts-label-list"},a.map((u,d)=>{var p=isNullish(i)?t(u,d):getValueByDataKey(u&&u.payload,i),f=isNullish(s)?{}:{id:"".concat(s,"-").concat(d)};return reactExports.createElement(Label,_extends$9({},filterProps(u,!0),c,f,{parentViewBox:u.parentViewBox,value:p,textBreakAll:l,viewBox:Label.parseViewBox(isNullish(o)?u:_objectSpread$8(_objectSpread$8({},u),{},{clockWise:o})),key:"label-".concat(d),index:d}))}))}LabelList.displayName="LabelList";function parseLabelList(e,t){return e?e===!0?reactExports.createElement(LabelList,{key:"labelList-implicit",data:t}):reactExports.isValidElement(e)||isLabelContentAFunction(e)?reactExports.createElement(LabelList,{key:"labelList-implicit",data:t,content:e}):typeof e=="object"?reactExports.createElement(LabelList,_extends$9({data:t},e,{key:"labelList-implicit"})):null:null}function renderCallByParent(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var{children:a}=e,i=findAllByType(a,LabelList).map((s,l)=>reactExports.cloneElement(s,{data:t,key:"labelList-".concat(l)}));if(!n)return i;var o=parseLabelList(e.label,t);return[o,...i]}LabelList.renderCallByParent=renderCallByParent;function _extends$8(){return _extends$8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},_extends$8.apply(null,arguments)}var Dot=e=>{var{cx:t,cy:n,r:a,className:i}=e,o=clsx("recharts-dot",i);return t===+t&&n===+n&&a===+a?reactExports.createElement("circle",_extends$8({},filterProps(e,!1),adaptEventHandlers(e),{className:o,cx:t,cy:n,r:a})):null},initialState$5={radiusAxis:{},angleAxis:{}},polarAxisSlice=createSlice({name:"polarAxis",initialState:initialState$5,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis,removeRadiusAxis,addAngleAxis,removeAngleAxis}=polarAxisSlice.actions,polarAxisReducer=polarAxisSlice.reducer,initialState$4={countOfBars:0,cartesianItems:[],polarItems:[]},graphicalItemsSlice=createSlice({name:"graphicalItems",initialState:initialState$4,reducers:{addBar(e){e.countOfBars+=1},removeBar(e){e.countOfBars-=1},addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:n,next:a}=t.payload,i=current(e).cartesianItems.indexOf(n);i>-1&&(e.cartesianItems[i]=a)},removeCartesianGraphicalItem(e,t){var n=current(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var n=current(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)}}}),{addBar,removeBar,addCartesianGraphicalItem,replaceCartesianGraphicalItem,removeCartesianGraphicalItem,addPolarGraphicalItem,removePolarGraphicalItem}=graphicalItemsSlice.actions,graphicalItemsReducer=graphicalItemsSlice.reducer;function ownKeys$7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function _objectSpread$7(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$7(Object(n),!0).forEach(function(a){_defineProperty$b(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$7(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function _defineProperty$b(e,t,n){return(t=_toPropertyKey$b(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$b(e){var t=_toPrimitive$b(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$b(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function SetCartesianGraphicalItem(e){var t=useAppDispatch(),n=reactExports.useRef(null);return reactExports.useEffect(()=>{var a=_objectSpread$7(_objectSpread$7({},e),{},{stackId:getNormalizedStackId(e.stackId)});n.current===null?t(addCartesianGraphicalItem(a)):n.current!==a&&t(replaceCartesianGraphicalItem({prev:n.current,next:a})),n.current=a},[t,e]),reactExports.useEffect(()=>()=>{n.current&&(t(removeCartesianGraphicalItem(n.current)),n.current=null)},[t]),null}function SetTooltipEntrySettings(e){var{fn:t,args:n}=e,a=useAppDispatch(),i=useIsPanorama();return reactExports.useEffect(()=>{if(!i){var o=t(n);return a(addTooltipEntrySettings(o)),()=>{a(removeTooltipEntrySettings(o))}}},[t,n,a,i]),null}var noop$1=()=>{};function SetLegendPayload(e){var{legendPayload:t}=e,n=useAppDispatch(),a=useIsPanorama();return reactExports.useEffect(()=>a?noop$1:(n(addLegendPayload(t)),()=>{n(removeLegendPayload(t))}),[n,a,t]),null}function useAnimationId(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=reactExports.useRef(uniqueId(t)),a=reactExports.useRef(e);return a.current!==e&&(n.current=uniqueId(t),a.current=e),n.current}var selectChartOffset=createSelector([selectChartOffsetInternal],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),selectPlotArea=createSelector([selectChartOffset,selectChartWidth,selectChartHeight],(e,t,n)=>{if(!(!e||t==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),useXAxis=e=>{var t=useIsPanorama();return useAppSelector(n=>selectAxisWithScale(n,"xAxis",e,t))},useYAxis=e=>{var t=useIsPanorama();return useAppSelector(n=>selectAxisWithScale(n,"yAxis",e,t))},usePlotArea=()=>useAppSelector(selectPlotArea),useActiveTooltipDataPoints=()=>useAppSelector(selectActiveTooltipDataPoints);function ownKeys$6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function _objectSpread$6(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$6(Object(n),!0).forEach(function(a){_defineProperty$a(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$6(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function _defineProperty$a(e,t,n){return(t=_toPropertyKey$a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$a(e){var t=_toPrimitive$a(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$a(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var renderActivePoint=e=>{var{point:t,childIndex:n,mainColor:a,activeDot:i,dataKey:o}=e;if(i===!1||t.x==null||t.y==null)return null;var s=_objectSpread$6(_objectSpread$6({index:n,dataKey:o,cx:t.x,cy:t.y,r:4,fill:a!=null?a:"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},filterProps(i,!1)),adaptEventHandlers(i)),l;return reactExports.isValidElement(i)?l=reactExports.cloneElement(i,s):typeof i=="function"?l=i(s):l=reactExports.createElement(Dot,s),reactExports.createElement(Layer,{className:"recharts-active-dot"},l)};function ActivePoints(e){var{points:t,mainColor:n,activeDot:a,itemDataKey:i}=e,o=useAppSelector(selectActiveTooltipIndex),s=useActiveTooltipDataPoints();if(t==null||s==null)return null;var l=t.find(c=>s.includes(c.payload));return isNullish(l)?null:renderActivePoint({point:l,childIndex:Number(o),mainColor:n,dataKey:i,activeDot:a})}var _excluded$9=["children"];function _objectWithoutProperties$9(e,t){if(e==null)return{};var n,a,i=_objectWithoutPropertiesLoose$9(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function _objectWithoutPropertiesLoose$9(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var noop=()=>{},ErrorBarDirectionDispatchContext=reactExports.createContext({addErrorBar:noop,removeErrorBar:noop}),initialContextState={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},ErrorBarContext=reactExports.createContext(initialContextState);function SetErrorBarContext(e){var{children:t}=e,n=_objectWithoutProperties$9(e,_excluded$9);return reactExports.createElement(ErrorBarContext.Provider,{value:n},t)}var useErrorBarContext=()=>reactExports.useContext(ErrorBarContext),CartesianGraphicalItemContext=e=>{var{children:t,xAxisId:n,yAxisId:a,zAxisId:i,dataKey:o,data:s,stackId:l,hide:c,type:u,barSize:d}=e,[p,f]=reactExports.useState([]),h=reactExports.useCallback(g=>{f(E=>[...E,g])},[f]),v=reactExports.useCallback(g=>{f(E=>E.filter(j=>j!==g))},[f]),b=useIsPanorama();return reactExports.createElement(ErrorBarDirectionDispatchContext.Provider,{value:{addErrorBar:h,removeErrorBar:v}},reactExports.createElement(SetCartesianGraphicalItem,{type:u,data:s,xAxisId:n,yAxisId:a,zAxisId:i,dataKey:o,errorBars:p,stackId:l,hide:c,barSize:d,isPanorama:b}),t)};function ReportErrorBarSettings(e){var{addErrorBar:t,removeErrorBar:n}=reactExports.useContext(ErrorBarDirectionDispatchContext);return reactExports.useEffect(()=>(t(e),()=>{n(e)}),[t,n,e]),null}var _excluded$8=["direction","width","dataKey","isAnimationActive","animationBegin","animationDuration","animationEasing"];function _defineProperty$9(e,t,n){return(t=_toPropertyKey$9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$9(e){var t=_toPrimitive$9(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _extends$7(){return _extends$7=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},_extends$7.apply(null,arguments)}function _objectWithoutProperties$8(e,t){if(e==null)return{};var n,a,i=_objectWithoutPropertiesLoose$8(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function _objectWithoutPropertiesLoose$8(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function ErrorBarImpl(e){var{direction:t,width:n,dataKey:a,isAnimationActive:i,animationBegin:o,animationDuration:s,animationEasing:l}=e,c=_objectWithoutProperties$8(e,_excluded$8),u=filterProps(c,!1),{data:d,dataPointFormatter:p,xAxisId:f,yAxisId:h,errorBarOffset:v}=useErrorBarContext(),b=useXAxis(f),g=useYAxis(h);if((b==null?void 0:b.scale)==null||(g==null?void 0:g.scale)==null||d==null||t==="x"&&b.type!=="number")return null;var E=d.map(j=>{var{x:w,y:S,value:A,errorVal:R}=p(j,a,t);if(!R)return null;var _=[],$,C;if(Array.isArray(R)?[$,C]=R:$=C=R,t==="x"){var{scale:O}=b,N=S+v,T=N+n,L=N-n,B=O(A-$),I=O(A+C);_.push({x1:I,y1:T,x2:I,y2:L}),_.push({x1:B,y1:N,x2:I,y2:N}),_.push({x1:B,y1:T,x2:B,y2:L})}else if(t==="y"){var{scale:z}=g,F=w+v,Z=F-n,U=F+n,Q=z(A-$),W=z(A+C);_.push({x1:Z,y1:W,x2:U,y2:W}),_.push({x1:F,y1:Q,x2:F,y2:W}),_.push({x1:Z,y1:Q,x2:U,y2:Q})}var D="".concat(w+v,"px ").concat(S+v,"px");return reactExports.createElement(Layer,_extends$7({className:"recharts-errorBar",key:"bar-".concat(_.map(H=>"".concat(H.x1,"-").concat(H.x2,"-").concat(H.y1,"-").concat(H.y2)))},u),_.map(H=>{var J=i?{transformOrigin:"".concat(H.x1-5,"px")}:void 0;return reactExports.createElement(Animate,{from:{transform:"scaleY(0)",transformOrigin:D},to:{transform:"scaleY(1)",transformOrigin:D},begin:o,easing:l,isActive:i,duration:s,key:"line-".concat(H.x1,"-").concat(H.x2,"-").concat(H.y1,"-").concat(H.y2),style:{transformOrigin:D}},reactExports.createElement("line",_extends$7({},H,{style:J})))}))});return reactExports.createElement(Layer,{className:"recharts-errorBars"},E)}var ErrorBarPreferredDirection=reactExports.createContext(void 0);function useErrorBarDirection(e){var t=reactExports.useContext(ErrorBarPreferredDirection);return e!=null?e:t!=null?t:"x"}function SetErrorBarPreferredDirection(e){var{direction:t,children:n}=e;return reactExports.createElement(ErrorBarPreferredDirection.Provider,{value:t},n)}var errorBarDefaultProps={stroke:"black",strokeWidth:1.5,width:5,offset:0,isAnimationActive:!0,animationBegin:0,animationDuration:400,animationEasing:"ease-in-out"};function ErrorBarInternal(e){var t=useErrorBarDirection(e.direction),{width:n,isAnimationActive:a,animationBegin:i,animationDuration:o,animationEasing:s}=resolveDefaultProps(e,errorBarDefaultProps);return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(ReportErrorBarSettings,{dataKey:e.dataKey,direction:t}),reactExports.createElement(ErrorBarImpl,_extends$7({},e,{direction:t,width:n,isAnimationActive:a,animationBegin:i,animationDuration:o,animationEasing:s})))}class ErrorBar extends reactExports.Component{render(){return reactExports.createElement(ErrorBarInternal,this.props)}}_defineProperty$9(ErrorBar,"defaultProps",errorBarDefaultProps);_defineProperty$9(ErrorBar,"displayName","ErrorBar");function useNeedsClip(e,t){var n,a,i=useAppSelector(u=>selectXAxisSettings(u,e)),o=useAppSelector(u=>selectYAxisSettings(u,t)),s=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:implicitXAxis.allowDataOverflow,l=(a=o==null?void 0:o.allowDataOverflow)!==null&&a!==void 0?a:implicitYAxis.allowDataOverflow,c=s||l;return{needClip:c,needClipX:s,needClipY:l}}function GraphicalItemClipPath(e){var{xAxisId:t,yAxisId:n,clipPathId:a}=e,i=usePlotArea(),{needClipX:o,needClipY:s,needClip:l}=useNeedsClip(t,n);if(!l)return null;var{x:c,y:u,width:d,height:p}=i;return reactExports.createElement("clipPath",{id:"clipPath-".concat(a)},reactExports.createElement("rect",{x:o?c:c-d/2,y:s?u:u-p/2,width:o?d:d*2,height:s?p:p*2}))}var ChartDataContextProvider=e=>{var{chartData:t}=e,n=useAppDispatch(),a=useIsPanorama();return reactExports.useEffect(()=>a?()=>{}:(n(setChartData(t)),()=>{n(setChartData(void 0))}),[t,n,a]),null},initialState$3={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},brushSlice=createSlice({name:"brush",initialState:initialState$3,reducers:{setBrushSettings(e,t){return t.payload==null?initialState$3:t.payload}}}),{setBrushSettings}=brushSlice.actions,brushReducer=brushSlice.reducer;function _defineProperty$8(e,t,n){return(t=_toPropertyKey$8(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$8(e){var t=_toPrimitive$8(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$8(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class ScaleHelper{static create(t){return new ScaleHelper(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:n,position:a}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(a)switch(a){case"start":return this.scale(t);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(t)+o}default:return this.scale(t)}if(n){var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}return this.scale(t)}}isInRange(t){var n=this.range(),a=n[0],i=n[n.length-1];return a<=i?t>=a&&t<=i:t>=i&&t<=a}}_defineProperty$8(ScaleHelper,"EPS",1e-4);function normalizeAngle(e){return(e%180+180)%180}var getAngledRectangleWidth=function e(t){var{width:n,height:a}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=normalizeAngle(i),s=o*Math.PI/180,l=Math.atan(a/n),c=s>l&&s<Math.PI-l?a/Math.sin(s):n/Math.cos(s);return Math.abs(c)},initialState$2={dots:[],areas:[],lines:[]},referenceElementsSlice=createSlice({name:"referenceElements",initialState:initialState$2,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=current(e).dots.findIndex(a=>a===t.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=current(e).areas.findIndex(a=>a===t.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=current(e).lines.findIndex(a=>a===t.payload);n!==-1&&e.lines.splice(n,1)}}}),{addDot,removeDot,addArea,removeArea,addLine,removeLine}=referenceElementsSlice.actions,referenceElementsReducer=referenceElementsSlice.reducer,ClipPathIdContext=reactExports.createContext(void 0),ClipPathProvider=e=>{var{children:t}=e,[n]=reactExports.useState("".concat(uniqueId("recharts"),"-clip")),a=usePlotArea();if(a==null)return null;var{x:i,y:o,width:s,height:l}=a;return reactExports.createElement(ClipPathIdContext.Provider,{value:n},reactExports.createElement("defs",null,reactExports.createElement("clipPath",{id:n},reactExports.createElement("rect",{x:i,y:o,height:l,width:s}))),t)};function shallowEqual(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var a in t)if({}.hasOwnProperty.call(t,a)&&!{}.hasOwnProperty.call(e,a))return!1;return!0}function getEveryNthWithCondition(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var a=[],i=0;i<e.length;i+=t)a.push(e[i]);return a}function getAngledTickWidth(e,t,n){var a={width:e.width+t.width,height:e.height+t.height};return getAngledRectangleWidth(a,n)}function getTickBoundaries(e,t,n){var a=n==="width",{x:i,y:o,width:s,height:l}=e;return t===1?{start:a?i:o,end:a?i+s:o+l}:{start:a?i+s:o+l,end:a?i:o}}function isVisible(e,t,n,a,i){if(e*t<e*a||e*t>e*i)return!1;var o=n();return e*(t-e*o/2-a)>=0&&e*(t+e*o/2-i)<=0}function getNumberIntervalTicks(e,t){return getEveryNthWithCondition(e,t+1)}function getEquidistantTicks(e,t,n,a,i){for(var o=(a||[]).slice(),{start:s,end:l}=t,c=0,u=1,d=s,p=function(){var v=a==null?void 0:a[c];if(v===void 0)return{v:getEveryNthWithCondition(a,u)};var b=c,g,E=()=>(g===void 0&&(g=n(v,b)),g),j=v.coordinate,w=c===0||isVisible(e,j,E,d,l);w||(c=0,d=s,u+=1),w&&(d=j+e*(E()/2+i),c+=u)},f;u<=o.length;)if(f=p(),f)return f.v;return[]}function ownKeys$5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function _objectSpread$5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$5(Object(n),!0).forEach(function(a){_defineProperty$7(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$5(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function _defineProperty$7(e,t,n){return(t=_toPropertyKey$7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$7(e){var t=_toPrimitive$7(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function getTicksEnd(e,t,n,a,i){for(var o=(a||[]).slice(),s=o.length,{start:l}=t,{end:c}=t,u=function(f){var h=o[f],v,b=()=>(v===void 0&&(v=n(h,f)),v);if(f===s-1){var g=e*(h.coordinate+e*b()/2-c);o[f]=h=_objectSpread$5(_objectSpread$5({},h),{},{tickCoord:g>0?h.coordinate-g*e:h.coordinate})}else o[f]=h=_objectSpread$5(_objectSpread$5({},h),{},{tickCoord:h.coordinate});var E=isVisible(e,h.tickCoord,b,l,c);E&&(c=h.tickCoord-e*(b()/2+i),o[f]=_objectSpread$5(_objectSpread$5({},h),{},{isShow:!0}))},d=s-1;d>=0;d--)u(d);return o}function getTicksStart(e,t,n,a,i,o){var s=(a||[]).slice(),l=s.length,{start:c,end:u}=t;if(o){var d=a[l-1],p=n(d,l-1),f=e*(d.coordinate+e*p/2-u);s[l-1]=d=_objectSpread$5(_objectSpread$5({},d),{},{tickCoord:f>0?d.coordinate-f*e:d.coordinate});var h=isVisible(e,d.tickCoord,()=>p,c,u);h&&(u=d.tickCoord-e*(p/2+i),s[l-1]=_objectSpread$5(_objectSpread$5({},d),{},{isShow:!0}))}for(var v=o?l-1:l,b=function(j){var w=s[j],S,A=()=>(S===void 0&&(S=n(w,j)),S);if(j===0){var R=e*(w.coordinate-e*A()/2-c);s[j]=w=_objectSpread$5(_objectSpread$5({},w),{},{tickCoord:R<0?w.coordinate-R*e:w.coordinate})}else s[j]=w=_objectSpread$5(_objectSpread$5({},w),{},{tickCoord:w.coordinate});var _=isVisible(e,w.tickCoord,A,c,u);_&&(c=w.tickCoord+e*(A()/2+i),s[j]=_objectSpread$5(_objectSpread$5({},w),{},{isShow:!0}))},g=0;g<v;g++)b(g);return s}function getTicks(e,t,n){var{tick:a,ticks:i,viewBox:o,minTickGap:s,orientation:l,interval:c,tickFormatter:u,unit:d,angle:p}=e;if(!i||!i.length||!a)return[];if(isNumber(c)||Global.isSsr){var f;return(f=getNumberIntervalTicks(i,isNumber(c)?c:0))!==null&&f!==void 0?f:[]}var h=[],v=l==="top"||l==="bottom"?"width":"height",b=d&&v==="width"?getStringSize(d,{fontSize:t,letterSpacing:n}):{width:0,height:0},g=(w,S)=>{var A=typeof u=="function"?u(w.value,S):w.value;return v==="width"?getAngledTickWidth(getStringSize(A,{fontSize:t,letterSpacing:n}),b,p):getStringSize(A,{fontSize:t,letterSpacing:n})[v]},E=i.length>=2?mathSign(i[1].coordinate-i[0].coordinate):1,j=getTickBoundaries(o,E,v);return c==="equidistantPreserveStart"?getEquidistantTicks(E,j,g,i,s):(c==="preserveStart"||c==="preserveStartEnd"?h=getTicksStart(E,j,g,i,s,c==="preserveStartEnd"):h=getTicksEnd(E,j,g,i,s),h.filter(w=>w.isShow))}var _excluded$7=["viewBox"],_excluded2$3=["viewBox"];function _extends$6(){return _extends$6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},_extends$6.apply(null,arguments)}function ownKeys$4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function _objectSpread$4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$4(Object(n),!0).forEach(function(a){_defineProperty$6(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$4(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function _objectWithoutProperties$7(e,t){if(e==null)return{};var n,a,i=_objectWithoutPropertiesLoose$7(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function _objectWithoutPropertiesLoose$7(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function _defineProperty$6(e,t,n){return(t=_toPropertyKey$6(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$6(e){var t=_toPrimitive$6(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$6(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class CartesianAxis extends reactExports.Component{constructor(t){super(t),this.tickRefs=reactExports.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,n){var{viewBox:a}=t,i=_objectWithoutProperties$7(t,_excluded$7),o=this.props,{viewBox:s}=o,l=_objectWithoutProperties$7(o,_excluded2$3);return!shallowEqual(a,s)||!shallowEqual(i,l)||!shallowEqual(n,this.state)}getTickLineCoord(t){var{x:n,y:a,width:i,height:o,orientation:s,tickSize:l,mirror:c,tickMargin:u}=this.props,d,p,f,h,v,b,g=c?-1:1,E=t.tickSize||l,j=isNumber(t.tickCoord)?t.tickCoord:t.coordinate;switch(s){case"top":d=p=t.coordinate,h=a+ +!c*o,f=h-g*E,b=f-g*u,v=j;break;case"left":f=h=t.coordinate,p=n+ +!c*i,d=p-g*E,v=d-g*u,b=j;break;case"right":f=h=t.coordinate,p=n+ +c*i,d=p+g*E,v=d+g*u,b=j;break;default:d=p=t.coordinate,h=a+ +c*o,f=h+g*E,b=f+g*u,v=j;break}return{line:{x1:d,y1:f,x2:p,y2:h},tick:{x:v,y:b}}}getTickTextAnchor(){var{orientation:t,mirror:n}=this.props,a;switch(t){case"left":a=n?"start":"end";break;case"right":a=n?"end":"start";break;default:a="middle";break}return a}getTickVerticalAnchor(){var{orientation:t,mirror:n}=this.props;switch(t){case"left":case"right":return"middle";case"top":return n?"start":"end";default:return n?"end":"start"}}renderAxisLine(){var{x:t,y:n,width:a,height:i,orientation:o,mirror:s,axisLine:l}=this.props,c=_objectSpread$4(_objectSpread$4(_objectSpread$4({},filterProps(this.props,!1)),filterProps(l,!1)),{},{fill:"none"});if(o==="top"||o==="bottom"){var u=+(o==="top"&&!s||o==="bottom"&&s);c=_objectSpread$4(_objectSpread$4({},c),{},{x1:t,y1:n+u*i,x2:t+a,y2:n+u*i})}else{var d=+(o==="left"&&!s||o==="right"&&s);c=_objectSpread$4(_objectSpread$4({},c),{},{x1:t+d*a,y1:n,x2:t+d*a,y2:n+i})}return reactExports.createElement("line",_extends$6({},c,{className:clsx("recharts-cartesian-axis-line",get$1(l,"className"))}))}static renderTickItem(t,n,a){var i,o=clsx(n.className,"recharts-cartesian-axis-tick-value");if(reactExports.isValidElement(t))i=reactExports.cloneElement(t,_objectSpread$4(_objectSpread$4({},n),{},{className:o}));else if(typeof t=="function")i=t(_objectSpread$4(_objectSpread$4({},n),{},{className:o}));else{var s="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(s=clsx(s,t.className)),i=reactExports.createElement(Text,_extends$6({},n,{className:s}),a)}return i}renderTicks(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:i,stroke:o,tick:s,tickFormatter:l,unit:c}=this.props,u=getTicks(_objectSpread$4(_objectSpread$4({},this.props),{},{ticks:a}),t,n),d=this.getTickTextAnchor(),p=this.getTickVerticalAnchor(),f=filterProps(this.props,!1),h=filterProps(s,!1),v=_objectSpread$4(_objectSpread$4({},f),{},{fill:"none"},filterProps(i,!1)),b=u.map((g,E)=>{var{line:j,tick:w}=this.getTickLineCoord(g),S=_objectSpread$4(_objectSpread$4(_objectSpread$4(_objectSpread$4({textAnchor:d,verticalAnchor:p},f),{},{stroke:"none",fill:o},h),w),{},{index:E,payload:g,visibleTicksCount:u.length,tickFormatter:l});return reactExports.createElement(Layer,_extends$6({className:"recharts-cartesian-axis-tick",key:"tick-".concat(g.value,"-").concat(g.coordinate,"-").concat(g.tickCoord)},adaptEventsOfChild(this.props,g,E)),i&&reactExports.createElement("line",_extends$6({},v,j,{className:clsx("recharts-cartesian-axis-tick-line",get$1(i,"className"))})),s&&CartesianAxis.renderTickItem(s,S,"".concat(typeof l=="function"?l(g.value,E):g.value).concat(c||"")))});return b.length>0?reactExports.createElement("g",{className:"recharts-cartesian-axis-ticks"},b):null}render(){var{axisLine:t,width:n,height:a,className:i,hide:o}=this.props;if(o)return null;var{ticks:s}=this.props;return n!=null&&n<=0||a!=null&&a<=0?null:reactExports.createElement(Layer,{className:clsx("recharts-cartesian-axis",i),ref:l=>{if(l){var c=l.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(c);var u=c[0];if(u){var d=window.getComputedStyle(u).fontSize,p=window.getComputedStyle(u).letterSpacing;(d!==this.state.fontSize||p!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(u).fontSize,letterSpacing:window.getComputedStyle(u).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,s),Label.renderCallByParent(this.props))}}_defineProperty$6(CartesianAxis,"displayName","CartesianAxis");_defineProperty$6(CartesianAxis,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var _excluded$6=["x1","y1","x2","y2","key"],_excluded2$2=["offset"],_excluded3=["xAxisId","yAxisId"],_excluded4=["xAxisId","yAxisId"];function ownKeys$3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function _objectSpread$3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$3(Object(n),!0).forEach(function(a){_defineProperty$5(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$3(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function _defineProperty$5(e,t,n){return(t=_toPropertyKey$5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$5(e){var t=_toPrimitive$5(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _extends$5(){return _extends$5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},_extends$5.apply(null,arguments)}function _objectWithoutProperties$6(e,t){if(e==null)return{};var n,a,i=_objectWithoutPropertiesLoose$6(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function _objectWithoutPropertiesLoose$6(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var Background=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:n,x:a,y:i,width:o,height:s,ry:l}=e;return reactExports.createElement("rect",{x:a,y:i,ry:l,width:o,height:s,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function renderLineItem(e,t){var n;if(reactExports.isValidElement(e))n=reactExports.cloneElement(e,t);else if(typeof e=="function")n=e(t);else{var{x1:a,y1:i,x2:o,y2:s,key:l}=t,c=_objectWithoutProperties$6(t,_excluded$6),u=filterProps(c,!1),{offset:d}=u,p=_objectWithoutProperties$6(u,_excluded2$2);n=reactExports.createElement("line",_extends$5({},p,{x1:a,y1:i,x2:o,y2:s,fill:"none",key:l}))}return n}function HorizontalGridLines(e){var{x:t,width:n,horizontal:a=!0,horizontalPoints:i}=e;if(!a||!i||!i.length)return null;var{xAxisId:o,yAxisId:s}=e,l=_objectWithoutProperties$6(e,_excluded3),c=i.map((u,d)=>{var p=_objectSpread$3(_objectSpread$3({},l),{},{x1:t,y1:u,x2:t+n,y2:u,key:"line-".concat(d),index:d});return renderLineItem(a,p)});return reactExports.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function VerticalGridLines(e){var{y:t,height:n,vertical:a=!0,verticalPoints:i}=e;if(!a||!i||!i.length)return null;var{xAxisId:o,yAxisId:s}=e,l=_objectWithoutProperties$6(e,_excluded4),c=i.map((u,d)=>{var p=_objectSpread$3(_objectSpread$3({},l),{},{x1:u,y1:t,x2:u,y2:t+n,key:"line-".concat(d),index:d});return renderLineItem(a,p)});return reactExports.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function HorizontalStripes(e){var{horizontalFill:t,fillOpacity:n,x:a,y:i,width:o,height:s,horizontalPoints:l,horizontal:c=!0}=e;if(!c||!t||!t.length)return null;var u=l.map(p=>Math.round(p+i-i)).sort((p,f)=>p-f);i!==u[0]&&u.unshift(0);var d=u.map((p,f)=>{var h=!u[f+1],v=h?i+s-p:u[f+1]-p;if(v<=0)return null;var b=f%t.length;return reactExports.createElement("rect",{key:"react-".concat(f),y:p,x:a,height:v,width:o,stroke:"none",fill:t[b],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return reactExports.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function VerticalStripes(e){var{vertical:t=!0,verticalFill:n,fillOpacity:a,x:i,y:o,width:s,height:l,verticalPoints:c}=e;if(!t||!n||!n.length)return null;var u=c.map(p=>Math.round(p+i-i)).sort((p,f)=>p-f);i!==u[0]&&u.unshift(0);var d=u.map((p,f)=>{var h=!u[f+1],v=h?i+s-p:u[f+1]-p;if(v<=0)return null;var b=f%n.length;return reactExports.createElement("rect",{key:"react-".concat(f),x:p,y:o,width:v,height:l,stroke:"none",fill:n[b],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return reactExports.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var defaultVerticalCoordinatesGenerator=(e,t)=>{var{xAxis:n,width:a,height:i,offset:o}=e;return getCoordinatesOfGrid(getTicks(_objectSpread$3(_objectSpread$3(_objectSpread$3({},CartesianAxis.defaultProps),n),{},{ticks:getTicksOfAxis(n),viewBox:{x:0,y:0,width:a,height:i}})),o.left,o.left+o.width,t)},defaultHorizontalCoordinatesGenerator=(e,t)=>{var{yAxis:n,width:a,height:i,offset:o}=e;return getCoordinatesOfGrid(getTicks(_objectSpread$3(_objectSpread$3(_objectSpread$3({},CartesianAxis.defaultProps),n),{},{ticks:getTicksOfAxis(n),viewBox:{x:0,y:0,width:a,height:i}})),o.top,o.top+o.height,t)},defaultProps$1={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function CartesianGrid(e){var t=useChartWidth(),n=useChartHeight(),a=useOffsetInternal(),i=_objectSpread$3(_objectSpread$3({},resolveDefaultProps(e,defaultProps$1)),{},{x:isNumber(e.x)?e.x:a.left,y:isNumber(e.y)?e.y:a.top,width:isNumber(e.width)?e.width:a.width,height:isNumber(e.height)?e.height:a.height}),{xAxisId:o,yAxisId:s,x:l,y:c,width:u,height:d,syncWithTicks:p,horizontalValues:f,verticalValues:h}=i,v=useIsPanorama(),b=useAppSelector(C=>selectAxisPropsNeededForCartesianGridTicksGenerator(C,"xAxis",o,v)),g=useAppSelector(C=>selectAxisPropsNeededForCartesianGridTicksGenerator(C,"yAxis",s,v));if(!isNumber(u)||u<=0||!isNumber(d)||d<=0||!isNumber(l)||l!==+l||!isNumber(c)||c!==+c)return null;var E=i.verticalCoordinatesGenerator||defaultVerticalCoordinatesGenerator,j=i.horizontalCoordinatesGenerator||defaultHorizontalCoordinatesGenerator,{horizontalPoints:w,verticalPoints:S}=i;if((!w||!w.length)&&typeof j=="function"){var A=f&&f.length,R=j({yAxis:g?_objectSpread$3(_objectSpread$3({},g),{},{ticks:A?f:g.ticks}):void 0,width:t,height:n,offset:a},A?!0:p);warn(Array.isArray(R),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof R,"]")),Array.isArray(R)&&(w=R)}if((!S||!S.length)&&typeof E=="function"){var _=h&&h.length,$=E({xAxis:b?_objectSpread$3(_objectSpread$3({},b),{},{ticks:_?h:b.ticks}):void 0,width:t,height:n,offset:a},_?!0:p);warn(Array.isArray($),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof $,"]")),Array.isArray($)&&(S=$)}return reactExports.createElement("g",{className:"recharts-cartesian-grid"},reactExports.createElement(Background,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),reactExports.createElement(HorizontalStripes,_extends$5({},i,{horizontalPoints:w})),reactExports.createElement(VerticalStripes,_extends$5({},i,{verticalPoints:S})),reactExports.createElement(HorizontalGridLines,_extends$5({},i,{offset:a,horizontalPoints:w,xAxis:b,yAxis:g})),reactExports.createElement(VerticalGridLines,_extends$5({},i,{offset:a,verticalPoints:S,xAxis:b,yAxis:g})))}CartesianGrid.displayName="CartesianGrid";var selectXAxisWithScale=(e,t,n,a)=>selectAxisWithScale(e,"xAxis",t,a),selectXAxisTicks=(e,t,n,a)=>selectTicksOfGraphicalItem(e,"xAxis",t,a),selectYAxisWithScale=(e,t,n,a)=>selectAxisWithScale(e,"yAxis",n,a),selectYAxisTicks=(e,t,n,a)=>selectTicksOfGraphicalItem(e,"yAxis",n,a),selectBandSize=createSelector([selectChartLayout,selectXAxisWithScale,selectYAxisWithScale,selectXAxisTicks,selectYAxisTicks],(e,t,n,a,i)=>isCategoricalAxis(e,"xAxis")?getBandSizeOfAxis(t,a,!1):getBandSizeOfAxis(n,i,!1)),pickLineSettings=(e,t,n,a,i)=>i,selectSynchronisedLineSettings=createSelector([selectUnfilteredCartesianItems,pickLineSettings],(e,t)=>{if(e.some(n=>n.type==="line"&&t.dataKey===n.dataKey&&t.data===n.data))return t}),selectLinePoints=createSelector([selectChartLayout,selectXAxisWithScale,selectYAxisWithScale,selectXAxisTicks,selectYAxisTicks,selectSynchronisedLineSettings,selectBandSize,selectChartDataWithIndexesIfNotInPanorama],(e,t,n,a,i,o,s,l)=>{var{chartData:c,dataStartIndex:u,dataEndIndex:d}=l;if(!(o==null||t==null||n==null||a==null||i==null||a.length===0||i.length===0||s==null)){var{dataKey:p,data:f}=o,h;if(f!=null&&f.length>0?h=f:h=c==null?void 0:c.slice(u,d+1),h!=null)return computeLinePoints({layout:e,xAxis:t,yAxis:n,xAxisTicks:a,yAxisTicks:i,dataKey:p,bandSize:s,displayedData:h})}}),_excluded$5=["type","layout","connectNulls","needClip"],_excluded2$1=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId"];function _objectWithoutProperties$5(e,t){if(e==null)return{};var n,a,i=_objectWithoutPropertiesLoose$5(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function _objectWithoutPropertiesLoose$5(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function ownKeys$2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function _objectSpread$2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$2(Object(n),!0).forEach(function(a){_defineProperty$4(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$2(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function _defineProperty$4(e,t,n){return(t=_toPropertyKey$4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$4(e){var t=_toPrimitive$4(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _extends$4(){return _extends$4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},_extends$4.apply(null,arguments)}var computeLegendPayloadFromAreaData=e=>{var{dataKey:t,name:n,stroke:a,legendType:i,hide:o}=e;return[{inactive:o,dataKey:t,type:i,color:a,value:getTooltipNameProp(n,t),payload:e}]};function getTooltipEntrySettings(e){var{dataKey:t,data:n,stroke:a,strokeWidth:i,fill:o,name:s,hide:l,unit:c}=e;return{dataDefinedOnItem:n,positions:void 0,settings:{stroke:a,strokeWidth:i,fill:o,dataKey:t,nameKey:void 0,name:getTooltipNameProp(s,t),hide:l,type:e.tooltipType,color:e.stroke,unit:c}}}var generateSimpleStrokeDasharray=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function repeat(e,t){for(var n=e.length%2!==0?[...e,0]:e,a=[],i=0;i<t;++i)a=[...a,...n];return a}var getStrokeDasharray=(e,t,n)=>{var a=n.reduce((p,f)=>p+f);if(!a)return generateSimpleStrokeDasharray(t,e);for(var i=Math.floor(e/a),o=e%a,s=t-e,l=[],c=0,u=0;c<n.length;u+=n[c],++c)if(u+n[c]>o){l=[...n.slice(0,c),o-u];break}var d=l.length%2===0?[0,s]:[s];return[...repeat(n,i),...l,...d].map(p=>"".concat(p,"px")).join(", ")};function renderDotItem(e,t){var n;if(reactExports.isValidElement(e))n=reactExports.cloneElement(e,t);else if(typeof e=="function")n=e(t);else{var a=clsx("recharts-line-dot",typeof e!="boolean"?e.className:"");n=reactExports.createElement(Dot,_extends$4({},t,{className:a}))}return n}function shouldRenderDots(e,t){return e==null?!1:t?!0:e.length===1}function Dots(e){var{clipPathId:t,points:n,props:a}=e,{dot:i,dataKey:o,needClip:s}=a;if(!shouldRenderDots(n,i))return null;var l=isClipDot(i),c=filterProps(a,!1),u=filterProps(i,!0),d=n.map((f,h)=>{var v=_objectSpread$2(_objectSpread$2(_objectSpread$2({key:"dot-".concat(h),r:3},c),u),{},{index:h,cx:f.x,cy:f.y,dataKey:o,value:f.value,payload:f.payload,points:n});return renderDotItem(i,v)}),p={clipPath:s?"url(#clipPath-".concat(l?"":"dots-").concat(t,")"):null};return reactExports.createElement(Layer,_extends$4({className:"recharts-line-dots",key:"dots"},p),d)}function StaticCurve(e){var{clipPathId:t,pathRef:n,points:a,strokeDasharray:i,props:o,showLabels:s}=e,{type:l,layout:c,connectNulls:u,needClip:d}=o,p=_objectWithoutProperties$5(o,_excluded$5),f=_objectSpread$2(_objectSpread$2({},filterProps(p,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:d?"url(#clipPath-".concat(t,")"):null,points:a,type:l,layout:c,connectNulls:u,strokeDasharray:i!=null?i:o.strokeDasharray});return reactExports.createElement(reactExports.Fragment,null,(a==null?void 0:a.length)>1&&reactExports.createElement(Curve,_extends$4({},f,{pathRef:n})),reactExports.createElement(Dots,{points:a,clipPathId:t,props:o}),s&&LabelList.renderCallByParent(o,a))}function getTotalLength(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch(t){return 0}}function CurveWithAnimation(e){var{clipPathId:t,props:n,pathRef:a,previousPointsRef:i,longestAnimatedLengthRef:o}=e,{points:s,strokeDasharray:l,isAnimationActive:c,animationBegin:u,animationDuration:d,animationEasing:p,animateNewValues:f,width:h,height:v,onAnimationEnd:b,onAnimationStart:g}=n,E=i.current,j=useAnimationId(n,"recharts-line-"),[w,S]=reactExports.useState(!1),A=reactExports.useCallback(()=>{typeof b=="function"&&b(),S(!1)},[b]),R=reactExports.useCallback(()=>{typeof g=="function"&&g(),S(!0)},[g]),_=getTotalLength(a.current),$=o.current;return reactExports.createElement(Animate,{begin:u,duration:d,isActive:c,easing:p,from:{t:0},to:{t:1},onAnimationEnd:A,onAnimationStart:R,key:j},C=>{var{t:O}=C,N=interpolateNumber$1($,_+$),T=Math.min(N(O),_),L;if(l){var B="".concat(l).split(/[,\s]+/gim).map(F=>parseFloat(F));L=getStrokeDasharray(T,_,B)}else L=generateSimpleStrokeDasharray(_,T);if(E){var I=E.length/s.length,z=O===1?s:s.map((F,Z)=>{var U=Math.floor(Z*I);if(E[U]){var Q=E[U],W=interpolateNumber$1(Q.x,F.x),D=interpolateNumber$1(Q.y,F.y);return _objectSpread$2(_objectSpread$2({},F),{},{x:W(O),y:D(O)})}if(f){var H=interpolateNumber$1(h*2,F.x),J=interpolateNumber$1(v/2,F.y);return _objectSpread$2(_objectSpread$2({},F),{},{x:H(O),y:J(O)})}return _objectSpread$2(_objectSpread$2({},F),{},{x:F.x,y:F.y})});return i.current=z,reactExports.createElement(StaticCurve,{props:n,points:z,clipPathId:t,pathRef:a,showLabels:!w,strokeDasharray:L})}return O>0&&_>0&&(i.current=s,o.current=T),reactExports.createElement(StaticCurve,{props:n,points:s,clipPathId:t,pathRef:a,showLabels:!w,strokeDasharray:L})})}function RenderCurve(e){var{clipPathId:t,props:n}=e,{points:a,isAnimationActive:i}=n,o=reactExports.useRef(null),s=reactExports.useRef(0),l=reactExports.useRef(null),c=o.current;return i&&a&&a.length&&c!==a?reactExports.createElement(CurveWithAnimation,{props:n,clipPathId:t,previousPointsRef:o,longestAnimatedLengthRef:s,pathRef:l}):reactExports.createElement(StaticCurve,{props:n,points:a,clipPathId:t,pathRef:l,showLabels:!0})}var errorBarDataPointFormatter=(e,t)=>({x:e.x,y:e.y,value:e.value,errorVal:getValueByDataKey(e.payload,t)});class LineWithState extends reactExports.Component{constructor(){super(...arguments),_defineProperty$4(this,"id",uniqueId("recharts-line-"))}render(){var t,{hide:n,dot:a,points:i,className:o,xAxisId:s,yAxisId:l,top:c,left:u,width:d,height:p,id:f,needClip:h,layout:v}=this.props;if(n)return null;var b=clsx("recharts-line",o),g=isNullish(f)?this.id:f,{r:E=3,strokeWidth:j=2}=(t=filterProps(a,!1))!==null&&t!==void 0?t:{r:3,strokeWidth:2},w=isClipDot(a),S=E*2+j;return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(Layer,{className:b},h&&reactExports.createElement("defs",null,reactExports.createElement(GraphicalItemClipPath,{clipPathId:g,xAxisId:s,yAxisId:l}),!w&&reactExports.createElement("clipPath",{id:"clipPath-dots-".concat(g)},reactExports.createElement("rect",{x:u-S/2,y:c-S/2,width:d+S,height:p+S}))),reactExports.createElement(RenderCurve,{props:this.props,clipPathId:g}),reactExports.createElement(SetErrorBarPreferredDirection,{direction:v==="horizontal"?"y":"x"},reactExports.createElement(SetErrorBarContext,{xAxisId:s,yAxisId:l,data:i,dataPointFormatter:errorBarDataPointFormatter,errorBarOffset:0},this.props.children))),reactExports.createElement(ActivePoints,{activeDot:this.props.activeDot,points:i,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var defaultLineProps={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!Global.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function LineImpl(e){var t=resolveDefaultProps(e,defaultLineProps),{activeDot:n,animateNewValues:a,animationBegin:i,animationDuration:o,animationEasing:s,connectNulls:l,dot:c,hide:u,isAnimationActive:d,label:p,legendType:f,xAxisId:h,yAxisId:v}=t,b=_objectWithoutProperties$5(t,_excluded2$1),{needClip:g}=useNeedsClip(h,v),{height:E,width:j,x:w,y:S}=usePlotArea(),A=useChartLayout(),R=useIsPanorama(),_=reactExports.useMemo(()=>({dataKey:e.dataKey,data:e.data}),[e.dataKey,e.data]),$=useAppSelector(C=>selectLinePoints(C,h,v,R,_));return A!=="horizontal"&&A!=="vertical"?null:reactExports.createElement(LineWithState,_extends$4({},b,{connectNulls:l,dot:c,activeDot:n,animateNewValues:a,animationBegin:i,animationDuration:o,animationEasing:s,isAnimationActive:d,hide:u,label:p,legendType:f,xAxisId:h,yAxisId:v,points:$,layout:A,height:E,width:j,left:w,top:S,needClip:g}))}function computeLinePoints(e){var{layout:t,xAxis:n,yAxis:a,xAxisTicks:i,yAxisTicks:o,dataKey:s,bandSize:l,displayedData:c}=e;return c.map((u,d)=>{var p=getValueByDataKey(u,s);return t==="horizontal"?{x:getCateCoordinateOfLine({axis:n,ticks:i,bandSize:l,entry:u,index:d}),y:isNullish(p)?null:a.scale(p),value:p,payload:u}:{x:isNullish(p)?null:n.scale(p),y:getCateCoordinateOfLine({axis:a,ticks:o,bandSize:l,entry:u,index:d}),value:p,payload:u}})}class Line extends reactExports.PureComponent{render(){return reactExports.createElement(CartesianGraphicalItemContext,{type:"line",data:this.props.data,xAxisId:this.props.xAxisId,yAxisId:this.props.yAxisId,zAxisId:0,dataKey:this.props.dataKey,stackId:void 0,hide:this.props.hide,barSize:void 0},reactExports.createElement(SetLegendPayload,{legendPayload:computeLegendPayloadFromAreaData(this.props)}),reactExports.createElement(SetTooltipEntrySettings,{fn:getTooltipEntrySettings,args:this.props}),reactExports.createElement(LineImpl,this.props))}}_defineProperty$4(Line,"displayName","Line");_defineProperty$4(Line,"defaultProps",defaultLineProps);function ownKeys$1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function _objectSpread$1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$1(Object(n),!0).forEach(function(a){_defineProperty$3(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$1(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function _defineProperty$3(e,t,n){return(t=_toPropertyKey$3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$3(e){var t=_toPrimitive$3(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$3(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var initialState$1={xAxis:{},yAxis:{},zAxis:{}},cartesianAxisSlice=createSlice({name:"cartesianAxis",initialState:initialState$1,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:n,width:a}=t.payload;e.yAxis[n]&&(e.yAxis[n]=_objectSpread$1(_objectSpread$1({},e.yAxis[n]),{},{width:a}))}}}),{addXAxis,removeXAxis,addYAxis,removeYAxis,addZAxis,removeZAxis,updateYAxisWidth}=cartesianAxisSlice.actions,cartesianAxisReducer=cartesianAxisSlice.reducer,_excluded$4=["children"],_excluded2=["dangerouslySetInnerHTML","ticks"];function _defineProperty$2(e,t,n){return(t=_toPropertyKey$2(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$2(e){var t=_toPrimitive$2(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$2(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},_extends$3.apply(null,arguments)}function _objectWithoutProperties$4(e,t){if(e==null)return{};var n,a,i=_objectWithoutPropertiesLoose$4(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function _objectWithoutPropertiesLoose$4(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function SetXAxisSettings(e){var t=useAppDispatch(),n=reactExports.useMemo(()=>{var{children:o}=e,s=_objectWithoutProperties$4(e,_excluded$4);return s},[e]),a=useAppSelector(o=>selectXAxisSettings(o,n.id)),i=n===a;return reactExports.useEffect(()=>(t(addXAxis(n)),()=>{t(removeXAxis(n))}),[n,t]),i?e.children:null}var XAxisImpl=e=>{var{xAxisId:t,className:n}=e,a=useAppSelector(selectAxisViewBox),i=useIsPanorama(),o="xAxis",s=useAppSelector(h=>selectAxisScale(h,o,t,i)),l=useAppSelector(h=>selectTicksOfAxis(h,o,t,i)),c=useAppSelector(h=>selectXAxisSize(h,t)),u=useAppSelector(h=>selectXAxisPosition(h,t));if(c==null||u==null)return null;var{dangerouslySetInnerHTML:d,ticks:p}=e,f=_objectWithoutProperties$4(e,_excluded2);return reactExports.createElement(CartesianAxis,_extends$3({},f,{scale:s,x:u.x,y:u.y,width:c.width,height:c.height,className:clsx("recharts-".concat(o," ").concat(o),n),viewBox:a,ticks:l}))},XAxisSettingsDispatcher=e=>{var t,n,a,i,o;return reactExports.createElement(SetXAxisSettings,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(n=e.includeHidden)!==null&&n!==void 0?n:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(a=e.angle)!==null&&a!==void 0?a:0,minTickGap:(i=e.minTickGap)!==null&&i!==void 0?i:5,tick:(o=e.tick)!==null&&o!==void 0?o:!0,tickFormatter:e.tickFormatter},reactExports.createElement(XAxisImpl,e))};class XAxis extends reactExports.Component{render(){return reactExports.createElement(XAxisSettingsDispatcher,this.props)}}_defineProperty$2(XAxis,"displayName","XAxis");_defineProperty$2(XAxis,"defaultProps",{allowDataOverflow:implicitXAxis.allowDataOverflow,allowDecimals:implicitXAxis.allowDecimals,allowDuplicatedCategory:implicitXAxis.allowDuplicatedCategory,height:implicitXAxis.height,hide:!1,mirror:implicitXAxis.mirror,orientation:implicitXAxis.orientation,padding:implicitXAxis.padding,reversed:implicitXAxis.reversed,scale:implicitXAxis.scale,tickCount:implicitXAxis.tickCount,type:implicitXAxis.type,xAxisId:0});var getCalculatedYAxisWidth=e=>{var{ticks:t,label:n,labelGapWithTick:a=5,tickSize:i=0,tickMargin:o=0}=e,s=0;if(t){t.forEach(d=>{if(d){var p=d.getBoundingClientRect();p.width>s&&(s=p.width)}});var l=n?n.getBoundingClientRect().width:0,c=i+o,u=s+c+l+(n?a:0);return Math.round(u)}return 0},_excluded$3=["dangerouslySetInnerHTML","ticks"];function _defineProperty$1(e,t,n){return(t=_toPropertyKey$1(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$1(e){var t=_toPrimitive$1(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$1(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},_extends$2.apply(null,arguments)}function _objectWithoutProperties$3(e,t){if(e==null)return{};var n,a,i=_objectWithoutPropertiesLoose$3(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function _objectWithoutPropertiesLoose$3(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function SetYAxisSettings(e){var t=useAppDispatch();return reactExports.useEffect(()=>(t(addYAxis(e)),()=>{t(removeYAxis(e))}),[e,t]),null}var YAxisImpl=e=>{var t,{yAxisId:n,className:a,width:i,label:o}=e,s=reactExports.useRef(null),l=reactExports.useRef(null),c=useAppSelector(selectAxisViewBox),u=useIsPanorama(),d=useAppDispatch(),p="yAxis",f=useAppSelector(w=>selectAxisScale(w,p,n,u)),h=useAppSelector(w=>selectYAxisSize(w,n)),v=useAppSelector(w=>selectYAxisPosition(w,n)),b=useAppSelector(w=>selectTicksOfAxis(w,p,n,u));if(reactExports.useLayoutEffect(()=>{var w;if(!(i!=="auto"||!h||isLabelContentAFunction(o)||reactExports.isValidElement(o))){var S=s.current,A=S==null||(w=S.tickRefs)===null||w===void 0?void 0:w.current,{tickSize:R,tickMargin:_}=S.props,$=getCalculatedYAxisWidth({ticks:A,label:l.current,labelGapWithTick:5,tickSize:R,tickMargin:_});Math.round(h.width)!==Math.round($)&&d(updateYAxisWidth({id:n,width:$}))}},[s,s==null||(t=s.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,h==null?void 0:h.width,h,d,o,n,i]),h==null||v==null)return null;var{dangerouslySetInnerHTML:g,ticks:E}=e,j=_objectWithoutProperties$3(e,_excluded$3);return reactExports.createElement(CartesianAxis,_extends$2({},j,{ref:s,labelRef:l,scale:f,x:v.x,y:v.y,width:h.width,height:h.height,className:clsx("recharts-".concat(p," ").concat(p),a),viewBox:c,ticks:b}))},YAxisSettingsDispatcher=e=>{var t,n,a,i,o;return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(SetYAxisSettings,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(n=e.includeHidden)!==null&&n!==void 0?n:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(a=e.angle)!==null&&a!==void 0?a:0,minTickGap:(i=e.minTickGap)!==null&&i!==void 0?i:5,tick:(o=e.tick)!==null&&o!==void 0?o:!0,tickFormatter:e.tickFormatter}),reactExports.createElement(YAxisImpl,e))},YAxisDefaultProps={allowDataOverflow:implicitYAxis.allowDataOverflow,allowDecimals:implicitYAxis.allowDecimals,allowDuplicatedCategory:implicitYAxis.allowDuplicatedCategory,hide:!1,mirror:implicitYAxis.mirror,orientation:implicitYAxis.orientation,padding:implicitYAxis.padding,reversed:implicitYAxis.reversed,scale:implicitYAxis.scale,tickCount:implicitYAxis.tickCount,type:implicitYAxis.type,width:implicitYAxis.width,yAxisId:0};class YAxis extends reactExports.Component{render(){return reactExports.createElement(YAxisSettingsDispatcher,this.props)}}_defineProperty$1(YAxis,"displayName","YAxis");_defineProperty$1(YAxis,"defaultProps",YAxisDefaultProps);var useSyncExternalStoreWithSelector_production={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var React=reactExports;function is(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var objectIs=typeof Object.is=="function"?Object.is:is,useSyncExternalStore=React.useSyncExternalStore,useRef=React.useRef,useEffect=React.useEffect,useMemo=React.useMemo,useDebugValue=React.useDebugValue;useSyncExternalStoreWithSelector_production.useSyncExternalStoreWithSelector=function(e,t,n,a,i){var o=useRef(null);if(o.current===null){var s={hasValue:!1,value:null};o.current=s}else s=o.current;o=useMemo(function(){function c(h){if(!u){if(u=!0,d=h,h=a(h),i!==void 0&&s.hasValue){var v=s.value;if(i(v,h))return p=v}return p=h}if(v=p,objectIs(d,h))return v;var b=a(h);return i!==void 0&&i(v,b)?(d=h,v):(d=h,p=b)}var u=!1,d,p,f=n===void 0?null:n;return[function(){return c(t())},f===null?void 0:function(){return c(f())}]},[t,n,a,i]);var l=useSyncExternalStore(e,o[0],o[1]);return useEffect(function(){s.hasValue=!0,s.value=l},[l]),useDebugValue(l),l};function defaultNoopBatch(e){e()}function createListenerCollection(){let e=null,t=null;return{clear(){e=null,t=null},notify(){defaultNoopBatch(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let a=e;for(;a;)n.push(a),a=a.next;return n},subscribe(n){let a=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!a||e===null||(a=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var nullListeners={notify(){},get:()=>[]};function createSubscription(e,t){let n,a=nullListeners,i=0,o=!1;function s(b){d();const g=a.subscribe(b);let E=!1;return()=>{E||(E=!0,g(),p())}}function l(){a.notify()}function c(){v.onStateChange&&v.onStateChange()}function u(){return o}function d(){i++,n||(n=e.subscribe(c),a=createListenerCollection())}function p(){i--,n&&i===0&&(n(),n=void 0,a.clear(),a=nullListeners)}function f(){o||(o=!0,d())}function h(){o&&(o=!1,p())}const v={addNestedSub:s,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:u,trySubscribe:f,tryUnsubscribe:h,getListeners:()=>a};return v}var canUseDOM=()=>typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined",isDOM=canUseDOM(),isRunningInReactNative=()=>typeof navigator!="undefined"&&navigator.product==="ReactNative",isReactNative=isRunningInReactNative(),getUseIsomorphicLayoutEffect=()=>isDOM||isReactNative?reactExports.useLayoutEffect:reactExports.useEffect,useIsomorphicLayoutEffect=getUseIsomorphicLayoutEffect(),ContextKey=Symbol.for("react-redux-context"),gT=typeof globalThis!="undefined"?globalThis:{};function getContext(){var n;if(!reactExports.createContext)return{};const e=(n=gT[ContextKey])!=null?n:gT[ContextKey]=new Map;let t=e.get(reactExports.createContext);return t||(t=reactExports.createContext(null),e.set(reactExports.createContext,t)),t}var ReactReduxContext=getContext();function Provider(e){const{children:t,context:n,serverState:a,store:i}=e,o=reactExports.useMemo(()=>{const c=createSubscription(i);return{store:i,subscription:c,getServerState:a?()=>a:void 0}},[i,a]),s=reactExports.useMemo(()=>i.getState(),[i]);useIsomorphicLayoutEffect(()=>{const{subscription:c}=o;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),s!==i.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[o,s]);const l=n||ReactReduxContext;return reactExports.createElement(l.Provider,{value:o},t)}var Provider_default=Provider,pickChartPointer=(e,t)=>t,selectActivePropsFromChartPointer=createSelector([pickChartPointer,selectChartLayout,selectPolarViewBox,selectTooltipAxisType,selectTooltipAxisRangeWithReverse,selectTooltipAxisTicks,selectOrderedTooltipTicks,selectChartOffsetInternal],combineActiveProps),getChartPointer=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,a=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/a)}},mouseClickAction=createAction("mouseClick"),mouseClickMiddleware=createListenerMiddleware();mouseClickMiddleware.startListening({actionCreator:mouseClickAction,effect:(e,t)=>{var n=e.payload,a=selectActivePropsFromChartPointer(t.getState(),getChartPointer(n));(a==null?void 0:a.activeIndex)!=null&&t.dispatch(setMouseClickAxisIndex({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}});var mouseMoveAction=createAction("mouseMove"),mouseMoveMiddleware=createListenerMiddleware();mouseMoveMiddleware.startListening({actionCreator:mouseMoveAction,effect:(e,t)=>{var n=e.payload,a=t.getState(),i=selectTooltipEventType$1(a,a.tooltip.settings.shared),o=selectActivePropsFromChartPointer(a,getChartPointer(n));i==="axis"&&((o==null?void 0:o.activeIndex)!=null?t.dispatch(setMouseOverAxisIndex({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):t.dispatch(mouseLeaveChart()))}});function reduxDevtoolsJsonStringifyReplacer(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var initialState={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},rootPropsSlice=createSlice({name:"rootProps",initialState,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(n=t.payload.barGap)!==null&&n!==void 0?n:initialState.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),rootPropsReducer=rootPropsSlice.reducer,{updateOptions}=rootPropsSlice.actions,polarOptionsSlice=createSlice({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions}=polarOptionsSlice.actions,polarOptionsReducer=polarOptionsSlice.reducer,keyDownAction=createAction("keyDown"),focusAction=createAction("focus"),keyboardEventsMiddleware=createListenerMiddleware();keyboardEventsMiddleware.startListening({actionCreator:keyDownAction,effect:(e,t)=>{var n=t.getState(),a=n.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:i}=n.tooltip,o=e.payload;if(!(o!=="ArrowRight"&&o!=="ArrowLeft"&&o!=="Enter")){var s=Number(combineActiveTooltipIndex(i,selectTooltipDisplayedData(n))),l=selectTooltipAxisTicks(n);if(o==="Enter"){var c=selectCoordinateForDefaultIndex(n,"axis","hover",String(i.index));t.dispatch(setKeyboardInteraction({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:c}));return}var u=selectChartDirection(n),d=u==="left-to-right"?1:-1,p=o==="ArrowRight"?1:-1,f=s+p*d;if(!(l==null||f>=l.length||f<0)){var h=selectCoordinateForDefaultIndex(n,"axis","hover",String(f));t.dispatch(setKeyboardInteraction({active:!0,activeIndex:f.toString(),activeDataKey:void 0,activeCoordinate:h}))}}}}});keyboardEventsMiddleware.startListening({actionCreator:focusAction,effect:(e,t)=>{var n=t.getState(),a=n.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var o="0",s=selectCoordinateForDefaultIndex(n,"axis","hover",String(o));t.dispatch(setKeyboardInteraction({activeDataKey:void 0,active:!0,activeIndex:o,activeCoordinate:s}))}}}});var externalEventAction=createAction("externalEvent"),externalEventsMiddleware=createListenerMiddleware();externalEventsMiddleware.startListening({actionCreator:externalEventAction,effect:(e,t)=>{if(e.payload.handler!=null){var n=t.getState(),a={activeCoordinate:selectActiveTooltipCoordinate(n),activeDataKey:selectActiveTooltipDataKey(n),activeIndex:selectActiveTooltipIndex(n),activeLabel:selectActiveLabel$1(n),activeTooltipIndex:selectActiveTooltipIndex(n),isTooltipActive:selectIsTooltipActive$1(n)};e.payload.handler(a,e.payload.reactEvent)}}});var selectAllTooltipPayloadConfiguration=createSelector([selectTooltipState],e=>e.tooltipItemPayloads),selectTooltipCoordinate=createSelector([selectAllTooltipPayloadConfiguration,selectTooltipPayloadSearcher,(e,t,n)=>t,(e,t,n)=>n],(e,t,n,a)=>{var i=e.find(l=>l.settings.dataKey===a);if(i!=null){var{positions:o}=i;if(o!=null){var s=t(o,n);return s}}}),touchEventAction=createAction("touchMove"),touchEventMiddleware=createListenerMiddleware();touchEventMiddleware.startListening({actionCreator:touchEventAction,effect:(e,t)=>{var n=e.payload,a=t.getState(),i=selectTooltipEventType$1(a,a.tooltip.settings.shared);if(i==="axis"){var o=selectActivePropsFromChartPointer(a,getChartPointer({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));(o==null?void 0:o.activeIndex)!=null&&t.dispatch(setMouseOverAxisIndex({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if(i==="item"){var s,l=n.touches[0],c=document.elementFromPoint(l.clientX,l.clientY);if(!c||!c.getAttribute)return;var u=c.getAttribute(DATA_ITEM_INDEX_ATTRIBUTE_NAME),d=(s=c.getAttribute(DATA_ITEM_DATAKEY_ATTRIBUTE_NAME))!==null&&s!==void 0?s:void 0,p=selectTooltipCoordinate(t.getState(),u,d);t.dispatch(setActiveMouseOverItemIndex({activeDataKey:d,activeIndex:u,activeCoordinate:p}))}}});var rootReducer=combineReducers({brush:brushReducer,cartesianAxis:cartesianAxisReducer,chartData:chartDataReducer,graphicalItems:graphicalItemsReducer,layout:chartLayoutReducer,legend:legendReducer,options:optionsReducer,polarAxis:polarAxisReducer,polarOptions:polarOptionsReducer,referenceElements:referenceElementsReducer,rootProps:rootPropsReducer,tooltip:tooltipReducer}),createRechartsStore=function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return configureStore({reducer:rootReducer,preloadedState:t,middleware:a=>a({serializableCheck:!1}).concat([mouseClickMiddleware.middleware,mouseMoveMiddleware.middleware,keyboardEventsMiddleware.middleware,externalEventsMiddleware.middleware,touchEventMiddleware.middleware]),devTools:{serialize:{replacer:reduxDevtoolsJsonStringifyReplacer},name:"recharts-".concat(n)}})};function RechartsStoreProvider(e){var{preloadedState:t,children:n,reduxStoreName:a}=e,i=useIsPanorama(),o=reactExports.useRef(null);if(i)return n;o.current==null&&(o.current=createRechartsStore(t,a));var s=RechartsReduxContext;return reactExports.createElement(Provider_default,{context:s,store:o.current},n)}function ReportMainChartProps(e){var{layout:t,width:n,height:a,margin:i}=e,o=useAppDispatch(),s=useIsPanorama();return reactExports.useEffect(()=>{s||(o(setLayout(t)),o(setChartSize({width:n,height:a})),o(setMargin(i)))},[o,s,t,n,a,i]),null}function ReportChartProps(e){var t=useAppDispatch();return reactExports.useEffect(()=>{t(updateOptions(e))},[t,e]),null}var _excluded$2=["children"];function _objectWithoutProperties$2(e,t){if(e==null)return{};var n,a,i=_objectWithoutPropertiesLoose$2(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function _objectWithoutPropertiesLoose$2(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},_extends$1.apply(null,arguments)}var FULL_WIDTH_AND_HEIGHT={width:"100%",height:"100%"},MainChartSurface=reactExports.forwardRef((e,t)=>{var n=useChartWidth(),a=useChartHeight(),i=useAccessibilityLayer();if(!isPositiveNumber(n)||!isPositiveNumber(a))return null;var{children:o,otherAttributes:s,title:l,desc:c}=e,u,d;return typeof s.tabIndex=="number"?u=s.tabIndex:u=i?0:void 0,typeof s.role=="string"?d=s.role:d=i?"application":void 0,reactExports.createElement(Surface,_extends$1({},s,{title:l,desc:c,role:d,tabIndex:u,width:n,height:a,style:FULL_WIDTH_AND_HEIGHT,ref:t}),o)}),BrushPanoramaSurface=e=>{var{children:t}=e,n=useAppSelector(selectBrushDimensions);if(!n)return null;var{width:a,height:i,y:o,x:s}=n;return reactExports.createElement(Surface,{width:a,height:i,x:s,y:o},t)},RootSurface=reactExports.forwardRef((e,t)=>{var{children:n}=e,a=_objectWithoutProperties$2(e,_excluded$2),i=useIsPanorama();return i?reactExports.createElement(BrushPanoramaSurface,null,n):reactExports.createElement(MainChartSurface,_extends$1({ref:t},a),n)});function useReportScale(){var e=useAppDispatch(),[t,n]=reactExports.useState(null),a=useAppSelector(selectContainerScale);return reactExports.useEffect(()=>{if(t!=null){var i=t.getBoundingClientRect(),o=i.width/t.offsetWidth;isWellBehavedNumber(o)&&o!==a&&e(setScale(o))}},[t,e,a]),n}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,a)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(a){_defineProperty(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function _defineProperty(e,t,n){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var RechartsWrapper=reactExports.forwardRef((e,t)=>{var{children:n,className:a,height:i,onClick:o,onContextMenu:s,onDoubleClick:l,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:p,onMouseUp:f,onTouchEnd:h,onTouchMove:v,onTouchStart:b,style:g,width:E}=e,j=useAppDispatch(),[w,S]=reactExports.useState(null),[A,R]=reactExports.useState(null);useSynchronisedEventsFromOtherCharts();var _=useReportScale(),$=reactExports.useCallback(D=>{_(D),typeof t=="function"&&t(D),S(D),R(D)},[_,t,S,R]),C=reactExports.useCallback(D=>{j(mouseClickAction(D)),j(externalEventAction({handler:o,reactEvent:D}))},[j,o]),O=reactExports.useCallback(D=>{j(mouseMoveAction(D)),j(externalEventAction({handler:u,reactEvent:D}))},[j,u]),N=reactExports.useCallback(D=>{j(mouseLeaveChart()),j(externalEventAction({handler:d,reactEvent:D}))},[j,d]),T=reactExports.useCallback(D=>{j(mouseMoveAction(D)),j(externalEventAction({handler:p,reactEvent:D}))},[j,p]),L=reactExports.useCallback(()=>{j(focusAction())},[j]),B=reactExports.useCallback(D=>{j(keyDownAction(D.key))},[j]),I=reactExports.useCallback(D=>{j(externalEventAction({handler:s,reactEvent:D}))},[j,s]),z=reactExports.useCallback(D=>{j(externalEventAction({handler:l,reactEvent:D}))},[j,l]),F=reactExports.useCallback(D=>{j(externalEventAction({handler:c,reactEvent:D}))},[j,c]),Z=reactExports.useCallback(D=>{j(externalEventAction({handler:f,reactEvent:D}))},[j,f]),U=reactExports.useCallback(D=>{j(externalEventAction({handler:b,reactEvent:D}))},[j,b]),Q=reactExports.useCallback(D=>{j(touchEventAction(D)),j(externalEventAction({handler:v,reactEvent:D}))},[j,v]),W=reactExports.useCallback(D=>{j(externalEventAction({handler:h,reactEvent:D}))},[j,h]);return reactExports.createElement(TooltipPortalContext.Provider,{value:w},reactExports.createElement(LegendPortalContext.Provider,{value:A},reactExports.createElement("div",{className:clsx("recharts-wrapper",a),style:_objectSpread({position:"relative",cursor:"default",width:E,height:i},g),onClick:C,onContextMenu:I,onDoubleClick:z,onFocus:L,onKeyDown:B,onMouseDown:F,onMouseEnter:O,onMouseLeave:N,onMouseMove:T,onMouseUp:Z,onTouchEnd:W,onTouchMove:Q,onTouchStart:U,ref:$},n)))}),_excluded$1=["children","className","width","height","style","compact","title","desc"];function _objectWithoutProperties$1(e,t){if(e==null)return{};var n,a,i=_objectWithoutPropertiesLoose$1(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function _objectWithoutPropertiesLoose$1(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var CategoricalChart=reactExports.forwardRef((e,t)=>{var{children:n,className:a,width:i,height:o,style:s,compact:l,title:c,desc:u}=e,d=_objectWithoutProperties$1(e,_excluded$1),p=filterProps(d,!1);return l?reactExports.createElement(RootSurface,{otherAttributes:p,title:c,desc:u},n):reactExports.createElement(RechartsWrapper,{className:a,style:s,width:i,height:o,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},reactExports.createElement(RootSurface,{otherAttributes:p,title:c,desc:u,ref:t},reactExports.createElement(ClipPathProvider,null,n)))}),_excluded=["width","height"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},_extends.apply(null,arguments)}function _objectWithoutProperties(e,t){if(e==null)return{};var n,a,i=_objectWithoutPropertiesLoose(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function _objectWithoutPropertiesLoose(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var defaultMargin={top:5,right:5,bottom:5,left:5},defaultProps={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:defaultMargin,reverseStackOrder:!1,syncMethod:"index"},CartesianChart=reactExports.forwardRef(function e(t,n){var a,i=resolveDefaultProps(t.categoricalChartProps,defaultProps),{width:o,height:s}=i,l=_objectWithoutProperties(i,_excluded);if(!isPositiveNumber(o)||!isPositiveNumber(s))return null;var{chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:p,categoricalChartProps:f}=t,h={chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:p,eventEmitter:void 0};return reactExports.createElement(RechartsStoreProvider,{preloadedState:{options:h},reduxStoreName:(a=f.id)!==null&&a!==void 0?a:c},reactExports.createElement(ChartDataContextProvider,{chartData:f.data}),reactExports.createElement(ReportMainChartProps,{width:o,height:s,layout:i.layout,margin:i.margin}),reactExports.createElement(ReportChartProps,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),reactExports.createElement(CategoricalChart,_extends({},l,{width:o,height:s,ref:n})))}),allowedTooltipTypes=["axis"],LineChart=reactExports.forwardRef((e,t)=>reactExports.createElement(CartesianChart,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:allowedTooltipTypes,tooltipPayloadSearcher:arrayTooltipSearcher,categoricalChartProps:e,ref:t}));function formatDate(e){return(typeof e=="string"?new Date(e):e).toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"2-digit"})}function formatDateTime(e){const t=typeof e=="string"?new Date(e):e;return t.toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"2-digit"})+" "+t.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})}const PlantHealthEvolutionChart=({images:e})=>{const[t,n]=reactExports.useState(!1),a=e.map(s=>{var u,d;let l;const c={excellent:95,good:80,fair:60,poor:30};return(u=s.healthAnalysis)!=null&&u.overallHealth&&c[s.healthAnalysis.overallHealth]?l=c[s.healthAnalysis.overallHealth]:typeof((d=s.healthAnalysis)==null?void 0:d.confidence)=="number"&&(l=s.healthAnalysis.confidence<=1?s.healthAnalysis.confidence*100:s.healthAnalysis.confidence),{id:s.id,date:formatDate(s.timestamp),dateTime:formatDateTime(s.timestamp),rawDate:s.timestamp,score:typeof l=="number"?l:null,url:s.url}}).sort((s,l)=>new Date(s.rawDate).getTime()-new Date(l.rawDate).getTime()),i=a.map(s=>({dateTime:s.dateTime,score:s.score})),o=s=>{const{key:l,cx:c,cy:u}=s;return jsxRuntimeExports.jsx("circle",{cx:c,cy:u,r:4,stroke:"#2A7F3E",strokeWidth:2,fill:"#fff"},l)};return jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsx("h3",{className:"text-base font-semibold text-[#2A7F3E]",children:"Evolución de Salud"}),jsxRuntimeExports.jsx(Button,{size:"sm",variant:"outline",onClick:()=>n(!0),children:"Ampliar"})]}),jsxRuntimeExports.jsx("div",{className:"w-full h-48",children:jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",children:jsxRuntimeExports.jsxs(LineChart,{data:i,margin:{top:10,right:20,left:0,bottom:0},children:[jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3",vertical:!1,stroke:"#F0F8F5"}),jsxRuntimeExports.jsx(XAxis,{dataKey:"dateTime",tick:{fontSize:12,fill:"#888"}}),jsxRuntimeExports.jsx(YAxis,{domain:[0,100],tick:{fontSize:12,fill:"#888"},width:32}),jsxRuntimeExports.jsx(Tooltip,{contentStyle:{fontSize:13,borderRadius:8},labelFormatter:s=>`Fecha: ${s}`,formatter:s=>`${s}%`}),jsxRuntimeExports.jsx(Line,{type:"monotone",dataKey:"score",stroke:"#2A7F3E",strokeWidth:2,dot:o,activeDot:{r:6},connectNulls:!1})]})})}),jsxRuntimeExports.jsx("div",{className:"mt-4 overflow-x-auto",children:jsxRuntimeExports.jsxs("table",{className:"min-w-full text-sm border-separate border-spacing-y-1",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{className:"text-[#666]",children:[jsxRuntimeExports.jsx("th",{className:"text-left font-medium px-2 py-1",children:"Fecha"}),jsxRuntimeExports.jsx("th",{className:"text-left font-medium px-2 py-1",children:"Imagen"}),jsxRuntimeExports.jsx("th",{className:"text-left font-medium px-2 py-1",children:"Salud"})]})}),jsxRuntimeExports.jsx("tbody",{children:a.map(s=>jsxRuntimeExports.jsxs("tr",{className:"bg-[#F9F9F9] hover:bg-[#F0F8F5] transition-colors",children:[jsxRuntimeExports.jsx("td",{className:"px-2 py-1 whitespace-nowrap",children:s.date}),jsxRuntimeExports.jsx("td",{className:"px-2 py-1",children:jsxRuntimeExports.jsx("img",{src:s.url,alt:"miniatura",className:"w-10 h-10 object-cover rounded-md border"})}),jsxRuntimeExports.jsx("td",{className:"px-2 py-1 font-medium text-[#2A7F3E]",children:s.score!==null?`${s.score.toFixed(0)}%`:jsxRuntimeExports.jsx("span",{className:"text-[#bbb]",children:"N/A"})})]},s.id))})]})}),jsxRuntimeExports.jsx(AnimatePresence,{children:t&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 p-2",onClick:()=>n(!1),children:jsxRuntimeExports.jsxs(motion.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-2xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-auto p-6 relative",onClick:s=>s.stopPropagation(),children:[jsxRuntimeExports.jsx(Button,{size:"icon-sm",variant:"ghost",className:"absolute top-2 right-2",onClick:()=>n(!1),children:"×"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold mb-4 text-[#2A7F3E]",children:"Evolución de Salud (Ampliado)"}),jsxRuntimeExports.jsx("div",{className:"w-full h-72 mb-6",children:jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",children:jsxRuntimeExports.jsxs(LineChart,{data:i,margin:{top:10,right:20,left:0,bottom:0},children:[jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3",vertical:!1,stroke:"#F0F8F5"}),jsxRuntimeExports.jsx(XAxis,{dataKey:"dateTime",tick:{fontSize:13,fill:"#888"}}),jsxRuntimeExports.jsx(YAxis,{domain:[0,100],tick:{fontSize:13,fill:"#888"},width:36}),jsxRuntimeExports.jsx(Tooltip,{contentStyle:{fontSize:14,borderRadius:8},labelFormatter:s=>`Fecha: ${s}`,formatter:s=>`${s}%`}),jsxRuntimeExports.jsx(Line,{type:"monotone",dataKey:"score",stroke:"#2A7F3E",strokeWidth:2,dot:o,activeDot:{r:7},connectNulls:!1})]})})}),jsxRuntimeExports.jsx("div",{className:"overflow-x-auto",children:jsxRuntimeExports.jsxs("table",{className:"min-w-full text-sm border-separate border-spacing-y-1",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{className:"text-[#666]",children:[jsxRuntimeExports.jsx("th",{className:"text-left font-medium px-2 py-1",children:"Fecha"}),jsxRuntimeExports.jsx("th",{className:"text-left font-medium px-2 py-1",children:"Imagen"}),jsxRuntimeExports.jsx("th",{className:"text-left font-medium px-2 py-1",children:"Salud"})]})}),jsxRuntimeExports.jsx("tbody",{children:a.map(s=>jsxRuntimeExports.jsxs("tr",{className:"bg-[#F9F9F9] hover:bg-[#F0F8F5] transition-colors",children:[jsxRuntimeExports.jsx("td",{className:"px-2 py-1 whitespace-nowrap",children:s.date}),jsxRuntimeExports.jsx("td",{className:"px-2 py-1",children:jsxRuntimeExports.jsx("img",{src:s.url,alt:"miniatura",className:"w-12 h-12 object-cover rounded-md border"})}),jsxRuntimeExports.jsx("td",{className:"px-2 py-1 font-medium text-[#2A7F3E]",children:s.score!==null?`${s.score.toFixed(0)}%`:jsxRuntimeExports.jsx("span",{className:"text-[#bbb]",children:"N/A"})})]},s.id))})]})})]})})})]})},PlantEvolutionTracker=({plant:e,onAddPhoto:t})=>{const n=reactExports.useMemo(()=>{if(!e.images||e.images.length===0)return[];const o=[...e.images].sort((d,p)=>new Date(d.timestamp).getTime()-new Date(p.timestamp).getTime()),s=[],l=30*24*60*60*1e3;let c=new Date(o[0].timestamp),u=[];return o.forEach((d,p)=>{const f=new Date(d.timestamp);if(f.getTime()-c.getTime()<=l)u.push(d);else{if(u.length>0){const h=u.map(b=>{const g=b.healthAnalysis;if(!g)return;const E={excellent:95,good:80,fair:60,poor:30};if(g.overallHealth&&E[g.overallHealth])return E[g.overallHealth];if(typeof g.confidence=="number")return g.confidence<=1?g.confidence*100:g.confidence}).filter(b=>b!==void 0),v=h.length>0?h.reduce((b,g)=>b+g,0)/h.length:0;s.push({id:`period-${s.length}`,images:[...u],startDate:new Date(u[0].timestamp),endDate:new Date(u[u.length-1].timestamp),avgHealthScore:v,trend:s.length>0?v>s[s.length-1].avgHealthScore?"improving":"declining":"stable",photoCount:u.length})}c=f,u=[d]}if(p===o.length-1&&u.length>0){const h=u.map(b=>{const g=b.healthAnalysis;if(!g)return;const E={excellent:95,good:80,fair:60,poor:30};if(g.overallHealth&&E[g.overallHealth])return E[g.overallHealth];if(typeof g.confidence=="number")return g.confidence<=1?g.confidence*100:g.confidence}).filter(b=>b!==void 0),v=h.length>0?h.reduce((b,g)=>b+g,0)/h.length:0;s.push({id:`period-${s.length}`,images:[...u],startDate:new Date(u[0].timestamp),endDate:new Date(u[u.length-1].timestamp),avgHealthScore:v,trend:s.length>0?v>s[s.length-1].avgHealthScore?"improving":"declining":"stable",photoCount:u.length})}}),s},[e.images]);function a(o){if(o.length<2)return null;const s=o[o.length-1]-o[0];return s>5?{icon:"⬆️",label:"Mejorando",color:"text-green-600 bg-green-50"}:s<-5?{icon:"⬇️",label:"Declive",color:"text-red-600 bg-red-50"}:{icon:"➡️",label:"Estable",color:"text-gray-600 bg-gray-50"}}if(n.length===0)return jsxRuntimeExports.jsxs(Card,{className:"mt-6",children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center",children:[jsxRuntimeExports.jsx(BarChart3,{className:"w-5 h-5 mr-2 text-primary"}),"Evolución de tu Planta"]})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs("div",{className:"text-center py-8",children:[jsxRuntimeExports.jsx(Camera,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold mb-2",children:"¡Comienza a documentar la evolución!"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground mb-4",children:"Agrega más fotos a lo largo del tiempo para ver cómo progresa tu planta."}),jsxRuntimeExports.jsxs(Button,{onClick:t,className:"gap-2",children:[jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4"}),"Agregar Primera Foto"]})]})})]});const i=n.map(o=>{var s;return(s=o.avgHealthScore)!=null?s:0});return a(i),jsxRuntimeExports.jsx(Card,{className:"mt-6",children:jsxRuntimeExports.jsx(CardContent,{className:"mt-4 space-y-6",children:jsxRuntimeExports.jsx(PlantHealthEvolutionChart,{images:e.images||[]})})})},AddPhotoModal=({isOpen:e,onClose:t,onPhotoAdded:n,plantName:a})=>{const[i,o]=reactExports.useState("choose"),[s,l]=reactExports.useState(null),[c,u]=reactExports.useState(""),[d,p]=reactExports.useState(null),[f,h]=reactExports.useState(!1),v=reactExports.useRef(null),{addToast:b}=useToast(),g=reactExports.useCallback(()=>{o("choose"),l(null),u(""),p(null),h(!1)},[]),E=reactExports.useCallback(()=>{g(),t()},[g,t]),j=reactExports.useCallback(L=>{const B=new FileReader;B.onload=I=>{var F;const z=(F=I.target)==null?void 0:F.result;l(z),o("preview")},B.readAsDataURL(L)},[]),w=reactExports.useCallback(()=>{v.current&&v.current.click()},[]),S=reactExports.useCallback(()=>{w()},[w]),A=reactExports.useCallback(L=>{var I;const B=(I=L.target.files)==null?void 0:I[0];if(B){if(!B.type.startsWith("image/")){p("Por favor selecciona un archivo de imagen válido.");return}if(B.size>5*1024*1024){p("La imagen es demasiado grande. Máximo 5MB.");return}j(B)}},[j]),R=reactExports.useCallback(async()=>{if(s)try{o("uploading"),h(!0),await n(s,c.trim()||void 0),o("success"),h(!1),b({type:"success",title:"Foto agregada exitosamente",message:`Nueva imagen añadida a ${a}`}),setTimeout(()=>{E()},1500)}catch(L){p(L instanceof Error?L.message:"Error al subir la imagen"),o("error"),h(!1)}},[s,c,n,a,b,E]),_=()=>(console.log("[AddPhotoModal] Renderizando botón Tomar Foto:",jsxRuntimeExports.jsx(Camera,{className:"w-6 h-6"}),"Tomar Foto"),console.log("[AddPhotoModal] Renderizando botón Elegir de Galería:",jsxRuntimeExports.jsx(Upload,{className:"w-6 h-6"}),"Elegir de Galería"),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"text-center space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Camera,{className:"w-16 h-16 text-primary mx-auto mb-4"}),jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Agregar Nueva Foto"}),jsxRuntimeExports.jsxs("p",{className:"text-muted-foreground",children:["Documenta el progreso de ",jsxRuntimeExports.jsx("span",{className:"font-medium",children:a})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid gap-4",children:[jsxRuntimeExports.jsxs(Button,{variant:"primary",size:"lg",onClick:S,className:"h-16 gap-3 text-primary-foreground",children:[jsxRuntimeExports.jsx(Camera,{className:"w-6 h-6"}),"Tomar Foto"]}),jsxRuntimeExports.jsxs(Button,{variant:"secondary",size:"lg",onClick:w,className:"h-16 gap-3 text-primary-foreground",children:[jsxRuntimeExports.jsx(Upload,{className:"w-6 h-6"}),"Elegir de Galería"]})]}),jsxRuntimeExports.jsx("input",{ref:v,type:"file",accept:"image/*",onChange:A,className:"hidden","data-testid":"file-input"})]})),$=()=>jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Vista Previa"}),jsxRuntimeExports.jsxs("p",{className:"text-muted-foreground",children:["Revisa la imagen antes de agregar a ",a]})]}),s&&jsxRuntimeExports.jsxs("div",{className:"space-y-4 pb-8 sm:pb-0",children:[jsxRuntimeExports.jsx("div",{className:"aspect-video max-h-80 mx-auto rounded-lg overflow-hidden border",children:jsxRuntimeExports.jsx("img",{src:s,alt:"Vista previa",className:"w-full h-full object-cover"})}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium",children:"Nota (opcional)"}),jsxRuntimeExports.jsx("textarea",{value:c,onChange:L=>u(L.target.value),placeholder:"Agrega una nota sobre esta foto...",className:"w-full p-3 border border-neutral-200 rounded-lg resize-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:3,maxLength:200}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[c.length,"/200"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx(Button,{variant:"secondary",onClick:()=>o("choose"),className:"flex-1",children:"Cambiar Imagen"}),jsxRuntimeExports.jsxs(Button,{variant:"primary",onClick:R,className:"flex-1 gap-2",children:[jsxRuntimeExports.jsx(Sparkles,{className:"w-4 h-4"}),"Analizar y Guardar"]})]})]})]}),C=()=>jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center space-y-6 py-8",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"w-16 h-16 text-primary mx-auto animate-spin"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold mb-2",children:f?"Analizando imagen...":"Subiendo foto..."}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground",children:f?"La IA está evaluando la salud de tu planta":"Guardando la nueva imagen en tu jardín"})]})]}),jsxRuntimeExports.jsx("div",{className:"w-full bg-neutral-200 rounded-full h-2",children:jsxRuntimeExports.jsx("div",{className:"bg-primary h-2 rounded-full animate-pulse",style:{width:"70%"}})})]}),O=()=>jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"text-center space-y-6 py-8",children:[jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-16 h-16 text-success-500 mx-auto"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold mb-2",children:"¡Foto agregada!"}),jsxRuntimeExports.jsxs("p",{className:"text-muted-foreground",children:["La nueva imagen ha sido añadida al progreso de ",a]})]})]}),N=()=>jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"text-center space-y-6 py-8",children:[jsxRuntimeExports.jsx(CircleAlert,{className:"w-16 h-16 text-error-500 mx-auto"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Error al subir"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground mb-4",children:d||"Hubo un problema al procesar la imagen"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3 justify-center",children:[jsxRuntimeExports.jsx(Button,{variant:"secondary",onClick:()=>o("choose"),children:"Intentar de Nuevo"}),jsxRuntimeExports.jsx(Button,{variant:"primary",onClick:E,children:"Cerrar"})]})]})]}),T=()=>{switch(i){case"choose":return _();case"preview":return $();case"uploading":return C();case"success":return O();case"error":return N();default:return _()}};return jsxRuntimeExports.jsx(AnimatePresence,{children:e&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",onClick:L=>{L.target===L.currentTarget&&i!=="uploading"&&E()},children:jsxRuntimeExports.jsx(motion.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"w-full max-w-md",children:jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardContent,{className:"p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Image$1,{className:"w-5 h-5 text-primary"}),jsxRuntimeExports.jsx("span",{className:"font-medium text-sm text-muted-foreground",children:"NUEVA FOTO"})]}),i!=="uploading"&&jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"icon-sm",onClick:E,children:jsxRuntimeExports.jsx(X,{className:"w-4 h-4"})})]}),T()]})})})})})},PlantOverviewCard=({plant:e})=>{var v,b,g;const{careProfile:t,healthScore:n,lastWatered:a,dateAdded:i}=e,o=(b=(v=e.images)==null?void 0:v[0])==null?void 0:b.healthAnalysis,s=a?Math.floor((Date.now()-new Date(a).getTime())/(1e3*60*60*24)):null,l=Math.floor((Date.now()-new Date(i).getTime())/(1e3*60*60*24)),u=n>=85?{text:"Excelente",color:"text-green-500",icon:CircleCheckBig,emoji:"🌟"}:n>=70?{text:"Buena",color:"text-green-400",icon:CircleCheckBig,emoji:"✅"}:n>=50?{text:"Regular",color:"text-yellow-500",icon:Info,emoji:"⚠️"}:{text:"Necesita atención",color:"text-red-500",icon:TriangleAlert,emoji:"🆘"},p=(()=>{if(!s||!(t!=null&&t.wateringFrequency))return{text:"Sin datos",color:"text-gray-500",urgent:!1};const E=s>=t.wateringFrequency;return s>t.wateringFrequency+2?{text:"Riego urgente",color:"text-red-500",urgent:!0}:E?{text:"Necesita riego",color:"text-yellow-500",urgent:!0}:{text:"Bien hidratada",color:"text-green-500",urgent:!1}})(),f={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{staggerChildren:.1}}},h={hidden:{opacity:0,y:10},visible:{opacity:1,y:0}};return jsxRuntimeExports.jsx(motion.div,{variants:f,initial:"hidden",animate:"visible",children:jsxRuntimeExports.jsxs(Card,{variant:"glass",className:"content-spacing-sm element-spacing",children:[e.description&&jsxRuntimeExports.jsx("div",{className:"mb-4",children:jsxRuntimeExports.jsx("p",{className:"text-base text-neutral-700 dark:text-neutral-200 leading-relaxed",children:e.description})}),jsxRuntimeExports.jsx(motion.div,{variants:h,className:"w-full mb-3",children:jsxRuntimeExports.jsxs("div",{className:"w-full flex items-center justify-between bg-green-100 dark:bg-green-900/30 rounded-lg px-4 py-2 mb-2",children:[jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-2 text-green-700 text-base font-bold",children:[jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-5 h-5"}),n,"% ",u.text]}),jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1 text-contrast-soft text-sm align-baseline",children:[jsxRuntimeExports.jsx(Calendar,{className:"w-4 h-4"}),"Día ",l]})]})}),jsxRuntimeExports.jsxs(motion.div,{variants:h,className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:cn("flex items-center space-x-3 p-3 rounded-lg",p.urgent?"bg-yellow-50 dark:bg-yellow-900/20":"bg-green-50 dark:bg-green-900/20"),children:[jsxRuntimeExports.jsx(Droplets,{className:cn("w-5 h-5",p.color)}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-contrast-soft",children:"Riego"}),jsxRuntimeExports.jsx("p",{className:cn("font-semibold text-sm",p.color),children:p.text}),s!==null&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-contrast-soft",children:["Hace ",s," día",s!==1?"s":""]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg bg-blue-50 dark:bg-blue-900/20",children:[jsxRuntimeExports.jsx(Sun,{className:"w-5 h-5 text-blue-500"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-contrast-soft",children:"Luz"}),jsxRuntimeExports.jsx("p",{className:"font-semibold text-sm text-blue-600 dark:text-blue-400",children:(t==null?void 0:t.sunlightRequirement)||"No especificado"}),e.lightRequirements&&jsxRuntimeExports.jsx("p",{className:"text-xs text-contrast-soft capitalize",children:e.lightRequirements.replace("_"," ")})]})]}),e.plantEnvironment&&jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg bg-purple-50 dark:bg-purple-900/20",children:[jsxRuntimeExports.jsx(MapPin,{className:"w-5 h-5 text-purple-500"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-contrast-soft",children:"Ambiente"}),jsxRuntimeExports.jsx("p",{className:"font-semibold text-sm text-purple-600 dark:text-purple-400 capitalize",children:e.plantEnvironment==="ambos"?"Interior/Exterior":e.plantEnvironment})]})]}),(t==null?void 0:t.temperatureRange)&&jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg bg-orange-50 dark:bg-orange-900/20",children:[jsxRuntimeExports.jsx(Thermometer,{className:"w-5 h-5 text-orange-500"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-contrast-soft",children:"Temperatura"}),jsxRuntimeExports.jsxs("p",{className:"font-semibold text-sm text-orange-600 dark:text-orange-400",children:[t.temperatureRange.min,"°-",t.temperatureRange.max,"°C"]})]})]})]}),(o==null?void 0:o.issues)&&o.issues.length>0&&jsxRuntimeExports.jsx(motion.div,{variants:h,className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start space-x-3",children:[jsxRuntimeExports.jsx(TriangleAlert,{className:"w-5 h-5 text-red-500 mt-0.5"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:"font-semibold text-red-700 dark:text-red-300 text-sm mb-1",children:[o.issues.length," problema",o.issues.length!==1?"s":""," detectado",o.issues.length!==1?"s":""]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-red-600 dark:text-red-400",children:[o.issues[0].description,o.issues.length>1&&` y ${o.issues.length-1} más...`]})]})]})}),jsxRuntimeExports.jsx("br",{}),((g=e.personality)==null?void 0:g.communicationStyle)&&jsxRuntimeExports.jsx(motion.div,{variants:h,className:"p-4 bg-gradient-to-r from-green-50 to-blue-50 dark:from-green-900/20 dark:to-blue-900/20 rounded-lg border border-green-200 dark:border-green-800",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start space-x-3",children:[jsxRuntimeExports.jsx(Bot,{className:"w-5 h-5 text-green-500 mt-0.5"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:"font-semibold text-green-700 dark:text-green-300 text-sm mb-1",children:["🤖 Personalidad: ",e.personality.communicationStyle]}),e.personality.catchphrases&&e.personality.catchphrases.length>0&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400 italic",children:['"',e.personality.catchphrases[0],'"']})]})]})})]})})},ExpandableInfoSection=({plant:e,onAddPhoto:t})=>{var c,u,d;const[n,a]=reactExports.useState("evolution"),i=(u=(c=e.images)==null?void 0:c[0])==null?void 0:u.healthAnalysis,o=(i==null?void 0:i.issues)&&i.issues.length>0,s=e.images&&e.images.length>1,l=[{id:"evolution",title:"Evolución y Progreso",icon:jsxRuntimeExports.jsx(TrendingUp,{className:"w-5 h-5"}),badge:s?`${((d=e.images)==null?void 0:d.length)||0} fotos`:"Nueva",component:jsxRuntimeExports.jsx(PlantEvolutionTracker,{plant:e,onAddPhoto:t}),priority:1},{id:"health",title:"Análisis de Salud",icon:jsxRuntimeExports.jsx(HeartPulse,{className:"w-5 h-5"}),badge:o?"Atención":"Saludable",component:jsxRuntimeExports.jsx(HealthAnalysisCard,{analysis:i}),priority:o?1:3},{id:"care",title:"Perfil de Cuidados",icon:jsxRuntimeExports.jsx(Flower,{className:"w-5 h-5"}),badge:e.careProfile?"Completo":"Pendiente",component:jsxRuntimeExports.jsx(PlantCharacteristics,{plant:e}),priority:e.careProfile?2:1},...e.funFacts&&e.funFacts.length>0?[{id:"funfacts",title:"Datos Curiosos",icon:jsxRuntimeExports.jsx(Sparkles,{className:"w-5 h-5"}),component:jsxRuntimeExports.jsx(DescriptionCard,{species:e.species,funFacts:e.funFacts}),priority:4}]:[]].filter(p=>p.id==="health"?!!i:!0).sort((p,f)=>p.priority-f.priority);return jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-y-1",children:l.map(p=>{const f=n===p.id,h=p.id==="health";return p.id==="care"?jsxRuntimeExports.jsxs(Card,{variant:"default",radius:"default",className:cn("border border-[#E5E5E5] rounded-[8px] transition-all duration-200","bg-white","p-0 mb-4"),children:[jsxRuntimeExports.jsxs(motion.button,{onClick:()=>a(f?"":p.id),className:cn("w-full flex items-center justify-between px-4 py-3 min-h-12 text-left focus:outline-none","bg-white","rounded-t-[8px]"),style:{position:f?"sticky":"static",top:0,zIndex:2},whileTap:{scale:.98},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center min-w-0 flex-1",children:[jsxRuntimeExports.jsx("span",{className:"flex items-center justify-center mr-2",style:{width:20,height:20},children:p.icon}),jsxRuntimeExports.jsx("span",{className:"font-semibold text-[16px] truncate text-neutral-900 dark:text-neutral-100",children:p.title})]}),jsxRuntimeExports.jsx(motion.div,{animate:{rotate:f?180:0},transition:{duration:.2},className:"flex-shrink-0 ml-2 align-middle",style:{display:"flex",alignItems:"center",marginRight:16,transition:"transform .2s"},children:jsxRuntimeExports.jsx(ChevronDown,{className:"w-6 h-6 text-neutral-600 dark:text-neutral-400"})})]}),jsxRuntimeExports.jsx(AnimatePresence,{children:f&&jsxRuntimeExports.jsx(motion.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:jsxRuntimeExports.jsxs("div",{className:"px-4 pb-3 pt-1 max-h-[60vh] overflow-y-auto",style:{lineHeight:"1.4"},children:[p.component,jsxRuntimeExports.jsx("div",{style:{paddingBottom:8}})]})})})]},p.id):jsxRuntimeExports.jsxs(Card,{variant:"default",radius:"default",className:cn("border border-[#E0E0E0] rounded-[8px] transition-all duration-200",f&&h?"bg-[#FAFAFA]":"bg-white","p-0 mb-4"),children:[jsxRuntimeExports.jsxs(motion.button,{onClick:()=>a(f?"":p.id),className:cn("w-full flex items-center justify-between px-4 py-3 min-h-12 text-left focus:outline-none",f&&h?"bg-[#FAFAFA]":"bg-white","rounded-t-[8px]"),style:{position:f?"sticky":"static",top:0,zIndex:2},whileTap:{scale:.98},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center min-w-0 flex-1",children:[jsxRuntimeExports.jsx("span",{className:"flex items-center justify-center mr-2",style:{width:20,height:20},children:p.icon}),jsxRuntimeExports.jsx("span",{className:"font-semibold text-[16px] truncate text-neutral-900 dark:text-neutral-100",children:p.title})]}),h&&jsxRuntimeExports.jsx("span",{className:"ml-2 px-[6px] py-[2px] text-xs font-medium rounded-[4px] bg-[#E0F2E9] text-[#2A7F3E] align-middle",style:{lineHeight:"1.2"},children:p.badge}),jsxRuntimeExports.jsx(motion.div,{animate:{rotate:f?180:0},transition:{duration:.2},className:"flex-shrink-0 ml-2 align-middle",style:{display:"flex",alignItems:"center",marginRight:16},children:jsxRuntimeExports.jsx(ChevronDown,{className:"w-6 h-6 text-neutral-600 dark:text-neutral-400"})})]}),jsxRuntimeExports.jsx(AnimatePresence,{children:f&&jsxRuntimeExports.jsx(motion.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:jsxRuntimeExports.jsxs("div",{className:"px-4 pb-3 pt-1 max-h-[60vh] overflow-y-auto",style:{lineHeight:"1.4"},children:[p.component,h&&jsxRuntimeExports.jsx("div",{style:{paddingBottom:8}})]})})})]},p.id)})})},PlantDetailFallback=()=>jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsxs("div",{className:"relative h-96 w-full overflow-hidden bg-gradient-to-br from-muted/50 to-muted",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background/80 via-background/20 to-transparent"}),jsxRuntimeExports.jsx("div",{className:"absolute top-0 left-0 right-0 p-4 pt-safe-top",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-10 w-10 rounded-full"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-10 w-10 rounded-full"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-10 w-10 rounded-full"})]})]})}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-6 pb-safe-bottom",children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-8 w-64"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-6 w-48"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-3",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-8 w-24 rounded-full"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-8 w-32 rounded-full"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-8 w-20 rounded-full"})]})]})})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 space-y-6 pb-20",children:[jsxRuntimeExports.jsxs("div",{className:"bg-background p-6 rounded-2xl shadow-lg border border-border/50",children:[jsxRuntimeExports.jsxs("div",{className:"mb-6 flex items-center",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-12 w-12 rounded-full mr-4"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-6 w-48"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-64"})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-full"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-5/6"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-4/5"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-3/4"})]}),jsxRuntimeExports.jsxs("div",{className:"mt-8 space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center mb-4",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-12 w-12 rounded-full mr-4"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-6 w-32"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-56"})]})]}),[1,2,3].map(e=>jsxRuntimeExports.jsxs("div",{className:"flex items-start bg-muted/20 rounded-xl p-4",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-5 w-5 rounded-full mr-4 mt-1"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-full"})]},e))]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-background p-6 rounded-2xl shadow-lg border border-border/50",children:[jsxRuntimeExports.jsxs("div",{className:"mb-4 flex items-center",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-6 w-6 mr-3"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-6 w-48"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-6",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-12 w-12 mx-auto mb-3"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-6 w-32 mx-auto mb-2"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-48 mx-auto"})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-background p-6 rounded-2xl shadow-lg border border-border/50",children:[jsxRuntimeExports.jsxs("div",{className:"mb-4 flex items-center",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-6 w-6 mr-3"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-6 w-40"})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3,4,5,6].map(e=>jsxRuntimeExports.jsxs("div",{className:"bg-muted/50 rounded-lg p-4",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-8 w-8 mb-2"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-16 mb-1"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-5 w-24"})]},e))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-5 w-5 mr-2"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-6 w-32"})]}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-16"})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:[1,2,3,4,5,6].map(e=>jsxRuntimeExports.jsx(Skeleton,{className:"aspect-square rounded-xl"},e))})]})]}),jsxRuntimeExports.jsxs("div",{className:"fixed bottom-4 right-4 z-40 flex flex-col-reverse gap-3",children:[[1,2,3].map(e=>jsxRuntimeExports.jsx(Skeleton,{className:"h-14 w-14 rounded-full"},e)),jsxRuntimeExports.jsx(Skeleton,{className:"h-16 w-16 rounded-full"})]})]}),PlantDetail=()=>{const{plantId:e}=useParams(),t=useNavigate(),{plant:n,loading:a,error:i}=usePlantDetail(e),{addPlantImage:o}=usePlantImageMutations(),[s,l]=reactExports.useState(!1),c=async(u,d)=>{if(!e)throw new Error("Plant ID is required");return new Promise((p,f)=>{o({plantId:e,imageDataUrl:u,note:d},{onSuccess:()=>p(),onError:h=>f(h)})})};return a?jsxRuntimeExports.jsx(PlantDetailFallback,{}):i?jsxRuntimeExports.jsx("main",{className:"flex flex-1 flex-col items-center justify-center p-4 text-center h-screen",children:jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[jsxRuntimeExports.jsx(CircleAlert,{className:"w-16 h-16 text-destructive mx-auto"}),jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-destructive",children:"Ocurrió un Error"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground max-w-md",children:i}),jsxRuntimeExports.jsx(Button,{onClick:()=>window.location.reload(),className:"mt-4",children:"Intentar de nuevo"})]})}):n?jsxRuntimeExports.jsx(reactExports.Suspense,{fallback:jsxRuntimeExports.jsx(PlantDetailFallback,{}),children:jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[jsxRuntimeExports.jsx(PlantDetailHeader,{plant:n}),jsxRuntimeExports.jsxs("main",{className:"p-3 sm:p-4 space-y-3 sm:space-y-4",style:{paddingBottom:"calc(88px + env(safe-area-inset-bottom))"},children:[jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1,duration:.2},children:jsxRuntimeExports.jsx(PlantOverviewCard,{plant:n})}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.15,duration:.2},children:jsxRuntimeExports.jsx(ExpandableInfoSection,{plant:n,onAddPhoto:()=>l(!0)})}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2,duration:.2},children:jsxRuntimeExports.jsx(ImageGallery,{images:n.images})})]}),jsxRuntimeExports.jsxs(motion.div,{className:"fixed bottom-24 right-4 z-40 flex flex-col-reverse gap-3",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.25,duration:.2},children:[jsxRuntimeExports.jsxs(motion.button,{onClick:()=>l(!0),className:"bg-primary hover:bg-primary/90 text-primary-foreground p-2.5 sm:p-3 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 group flex items-center",whileHover:{scale:1.1},whileTap:{scale:.95},title:"Agregar nueva foto",children:[jsxRuntimeExports.jsx(Camera,{className:"w-4 h-4 sm:w-5 sm:h-5"}),jsxRuntimeExports.jsx("span",{className:"ml-2 text-xs font-medium block sm:hidden",children:"Agregar foto"}),jsxRuntimeExports.jsx("span",{className:"absolute right-full mr-3 top-1/2 -translate-y-1/2 tooltip-contrast text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap shadow-lg hidden sm:block",children:"Agregar foto"})]}),jsxRuntimeExports.jsxs(motion.button,{onClick:()=>t(navigation.toPlantChat(n.id)),className:"bg-blue-500 hover:bg-blue-600 text-white p-2.5 sm:p-3 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 group flex items-center",whileHover:{scale:1.1},whileTap:{scale:.95},title:"Chat con la planta",children:[jsxRuntimeExports.jsx(MessageCircle,{className:"w-4 h-4 sm:w-5 sm:h-5"}),jsxRuntimeExports.jsx("span",{className:"ml-2 text-xs font-medium block sm:hidden",children:"Chat"}),jsxRuntimeExports.jsx("span",{className:"absolute right-full mr-3 top-1/2 -translate-y-1/2 tooltip-contrast text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap shadow-lg hidden sm:block",children:"Chat"})]})]}),jsxRuntimeExports.jsx(AddPhotoModal,{isOpen:s,onClose:()=>l(!1),onPhotoAdded:c,plantName:n.nickname||n.name})]})}):jsxRuntimeExports.jsx("main",{className:"flex flex-1 flex-col items-center justify-center p-4 text-center h-screen",children:jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[jsxRuntimeExports.jsx(CircleAlert,{className:"w-16 h-16 text-muted-foreground mx-auto"}),jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold",children:"Planta no encontrada"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground max-w-md",children:"No se pudo encontrar la información de la planta solicitada."}),jsxRuntimeExports.jsx(Button,{onClick:()=>t(navigation.toDashboard()),className:"mt-4",children:"Volver al inicio"})]})})},useCamera=({videoRef:e,canvasRef:t})=>{const[n,a]=reactExports.useState(!1),[i,o]=reactExports.useState(null),[s,l]=reactExports.useState("environment"),[c,u]=reactExports.useState(null),d=reactExports.useRef(null),p=reactExports.useCallback(async()=>{try{d.current&&d.current.getTracks().forEach(E=>E.stop()),u(null);const g=await navigator.mediaDevices.getUserMedia({video:{facingMode:s,width:{ideal:1920},height:{ideal:1080},aspectRatio:16/9}});e.current&&(e.current.srcObject=g,d.current=g)}catch(g){console.error("Error accessing camera:",g),g instanceof Error?g.name==="NotAllowedError"||g.message.includes("Permission dismissed")?u("Permiso de cámara denegado. Por favor, actívalo en los ajustes de tu navegador."):u("No se pudo acceder a la cámara. Revisa los permisos y el dispositivo."):u("Ocurrió un error inesperado al acceder a la cámara.")}},[s,e]);reactExports.useEffect(()=>(p(),()=>{d.current&&d.current.getTracks().forEach(g=>g.stop())}),[p]);const f=reactExports.useCallback(()=>{if(!e.current||!t.current)return;const g=e.current,E=t.current,j=E.getContext("2d");if(!j)return;E.width=g.videoWidth,E.height=g.videoHeight,j.drawImage(g,0,0,g.videoWidth,g.videoHeight);const w=E.toDataURL("image/jpeg",.9);o(w),a(!0),d.current&&d.current.getTracks().forEach(S=>S.stop()),"vibrate"in navigator&&navigator.vibrate(50)},[e,t]),h=reactExports.useCallback(()=>{o(null),a(!1),p()},[p]);return{isCapturing:n,capturedImage:i,cameraError:c,captureImage:f,retakePhoto:h,switchCamera:()=>{l(g=>g==="user"?"environment":"user")},startCamera:p,selectFromGallery:g=>{if(g&&g.type.startsWith("image/")){const E=new FileReader;E.onload=j=>{var S;const w=(S=j.target)==null?void 0:S.result;o(w),a(!0),d.current&&d.current.getTracks().forEach(A=>A.stop())},E.readAsDataURL(g)}}}},CameraErrorState=({error:e,onRetry:t})=>{const n=useNavigate();return jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black flex items-center justify-center p-6",children:jsxRuntimeExports.jsx("div",{className:"bg-gray-900 rounded-2xl p-6 max-w-sm w-full mx-4",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mb-4",children:jsxRuntimeExports.jsx(CircleAlert,{size:32,className:"text-red-400"})}),jsxRuntimeExports.jsx("h3",{className:"text-white text-lg font-semibold mb-2",children:"Camera Access Required"}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 text-sm mb-6 leading-relaxed",children:e}),jsxRuntimeExports.jsxs("div",{className:"space-y-3 w-full",children:[jsxRuntimeExports.jsxs(Button,{onClick:t,children:[jsxRuntimeExports.jsx(RefreshCw,{size:18,className:"mr-2"}),jsxRuntimeExports.jsx("span",{children:"Try Again"})]}),jsxRuntimeExports.jsx(Button,{onClick:()=>n(navigation.toDashboard()),variant:"secondary",children:"Go Back"})]}),jsxRuntimeExports.jsx("div",{className:"mt-4 p-3 bg-gray-800 rounded-lg",children:jsxRuntimeExports.jsxs("p",{className:"text-gray-400 text-xs",children:[jsxRuntimeExports.jsx("strong",{children:"How to enable camera:"}),jsxRuntimeExports.jsx("br",{}),"1. Click the camera icon in your browser's address bar",jsxRuntimeExports.jsx("br",{}),'2. Select "Allow" for camera access',jsxRuntimeExports.jsx("br",{}),'3. Refresh the page or tap "Try Again"']})})]})})})},ImagePreview=({image:e,isAnalyzing:t,onRetake:n,onAnalyze:a})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(motion.img,{src:e,alt:"Captured plant",className:"absolute inset-0 w-full h-full object-cover z-10",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}),jsxRuntimeExports.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-8 safe-area-bottom z-20",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center space-x-6",children:[jsxRuntimeExports.jsx(Button,{onClick:n,variant:"secondary",disabled:t,children:"Retake"}),jsxRuntimeExports.jsx(Button,{onClick:a,disabled:t,children:t?jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),jsxRuntimeExports.jsx("span",{children:"Analyzing..."})]}):"Add Plant"})]}),t&&jsxRuntimeExports.jsx("p",{className:"text-center text-white mt-4 text-sm",children:"AI is identifying your plant and creating a care profile..."})]})]}),CameraCaptureView=({videoRef:e,canvasRef:t,flashEnabled:n,onCapture:a,onSwitchCamera:i,onToggleFlash:o,onSelectFromGallery:s})=>{const l=useNavigate();return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(motion.video,{ref:e,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5}}),jsxRuntimeExports.jsx("canvas",{ref:t,className:"hidden"}),jsxRuntimeExports.jsx("div",{className:"absolute top-0 left-0 right-0 p-4 safe-area-top z-20",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx(Button,{onClick:()=>l(navigation.toDashboard()),variant:"ghost",size:"icon",className:"rounded-full bg-black/50",children:jsxRuntimeExports.jsx(X,{size:20})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-4",children:[jsxRuntimeExports.jsx(Button,{onClick:o,variant:"ghost",size:"icon",className:`rounded-full ${n?"bg-yellow-500 text-black hover:bg-yellow-600":"bg-black/50"}`,children:n?jsxRuntimeExports.jsx(Sparkles,{size:20}):jsxRuntimeExports.jsx(Slash,{size:20})}),jsxRuntimeExports.jsx(Button,{onClick:i,variant:"ghost",size:"icon",className:"rounded-full bg-black/50",children:jsxRuntimeExports.jsx(RotateCcw,{size:20})})]})]})}),jsxRuntimeExports.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-8 safe-area-bottom z-20",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center space-x-8",children:[jsxRuntimeExports.jsx(Button,{onClick:s,size:"icon",variant:"ghost",className:"w-14 h-14 rounded-full bg-black/50",children:jsxRuntimeExports.jsx(Image$1,{size:24})}),jsxRuntimeExports.jsx(motion.button,{onClick:a,className:"w-20 h-20 rounded-full bg-white border-4 border-gray-300 flex items-center justify-center ios-button",whileHover:{scale:1.05},whileTap:{scale:.95},children:jsxRuntimeExports.jsx("div",{className:"w-16 h-16 rounded-full bg-white flex items-center justify-center",children:jsxRuntimeExports.jsx(Camera,{size:24,className:"text-gray-600"})})}),jsxRuntimeExports.jsx("div",{className:"w-14 h-14"})]}),jsxRuntimeExports.jsx("p",{className:"text-center text-white mt-4 text-sm",children:"Position your plant in the frame and tap to capture, or select from gallery"})]}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 pointer-events-none flex items-center justify-center",children:jsxRuntimeExports.jsx("div",{className:"w-64 h-64 border-2 border-white/50 rounded-2xl"})})]})},CameraPage=()=>{const e=useNavigate(),{createPlant:t,isCreatingPlant:n}=usePlantMutations(),a=reactExports.useRef(null),i=reactExports.useRef(null),{isCapturing:o,capturedImage:s,cameraError:l,captureImage:c,retakePhoto:u,switchCamera:d,startCamera:p,selectFromGallery:f}=useCamera({videoRef:a,canvasRef:i}),[h,v]=reactExports.useState(!1),b=reactExports.useRef(null),g=()=>{if(!s)return;const w="Interior",S=new Promise((A,R)=>{t({imageDataUrl:s,location:w},{onSuccess:_=>{_!=null&&_.id?e(navigation.toPlantDetail(_.id)):e(navigation.toDashboard()),A(_)},onError:_=>{R(_)}})});toast.promise(S,{loading:"Analizando imagen con IA...",success:A=>`¡Planta "${A.name}" creada con éxito!`,error:A=>`Error: ${A.message}`})},E=()=>v(w=>!w),j=w=>{var A;const S=(A=w.target.files)==null?void 0:A[0];S&&f(S)};return jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 bg-black z-50",children:[jsxRuntimeExports.jsx("input",{ref:b,type:"file",accept:"image/*",onChange:j,className:"hidden",id:"gallery-input"}),jsxRuntimeExports.jsx(AnimatePresence,{mode:"wait",children:l?jsxRuntimeExports.jsx(CameraErrorState,{error:l,onRetry:p},"error"):o?jsxRuntimeExports.jsx(ImagePreview,{image:s,isAnalyzing:n,onRetake:u,onAnalyze:g},"preview"):jsxRuntimeExports.jsx(CameraCaptureView,{videoRef:a,canvasRef:i,flashEnabled:h,onCapture:c,onSwitchCamera:d,onToggleFlash:E,onSelectFromGallery:()=>{var w;return(w=b.current)==null?void 0:w.click()}},"capture")})]})},useChat=()=>{const{plantId:e}=useParams(),t=useNavigate(),{user:n}=useAuthStore(),a=usePlantStore(u=>u.getPlantById(e||"")),i=usePlantStore(u=>u.addChatMessage),o=usePlantStore(u=>u.isLoading),s=reactExports.useMemo(()=>{if(!a||!a.chatHistory||a.chatHistory.length===0)return!1;const u=a.chatHistory[a.chatHistory.length-1];return o&&u.sender==="user"},[a,o]);return{plant:a,isTyping:s,handleSendMessage:async u=>{if(!(!e||!n||!u.trim()))try{await i(e,u.trim(),n.id)}catch(d){console.error("Failed to send message:",d)}},handleGoBack:()=>{t(`/plant/${e}`)},currentUser:n}},ChatHeader=({plant:e})=>{const t=useNavigate(),n=()=>{const a=e.healthScore/100,i=e.lastWatered?new Date(e.lastWatered).getTime():0,o=i?Math.max(0,1-(Date.now()-i)/(e.careProfile.wateringFrequency*24*60*60*1e3)):0,s=a*.6+o*.4;return s>.8?"radiante":s>.6?"feliz":s>.4?"estable":"necesitada de atención"};return jsxRuntimeExports.jsx("header",{className:"sticky top-0 z-10 bg-background/80 backdrop-blur-sm border-b border-muted",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 p-4 pt-safe-top",children:[jsxRuntimeExports.jsx("button",{onClick:()=>t(navigation.toPlantDetail(e.id)),className:"btn btn-ghost btn-circle",children:jsxRuntimeExports.jsx(ArrowLeft,{size:20})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h1",{className:"font-bold text-foreground truncate",children:e.nickname||e.name}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-neutral-600 dark:text-neutral-400 capitalize",children:["Se siente ",n()]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-green-600 dark:text-green-400",children:[jsxRuntimeExports.jsx(Heart,{className:"w-4 h-4"}),jsxRuntimeExports.jsxs("span",{children:[e.healthScore,"%"]})]})]})})};var formatDistanceLocale={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 día",other:"{{count}} días"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 año",other:"alrededor de {{count}} años"},xYears:{one:"1 año",other:"{{count}} años"},overXYears:{one:"más de 1 año",other:"más de {{count}} años"},almostXYears:{one:"casi 1 año",other:"casi {{count}} años"}},formatDistance=function e(t,n,a){var i,o=formatDistanceLocale[t];return typeof o=="string"?i=o:n===1?i=o.one:i=o.other.replace("{{count}}",n.toString()),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?"en "+i:"hace "+i:i},dateFormats={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},timeFormats={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},dateTimeFormats={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},formatLong={date:buildFormatLongFn({formats:dateFormats,defaultWidth:"full"}),time:buildFormatLongFn({formats:timeFormats,defaultWidth:"full"}),dateTime:buildFormatLongFn({formats:dateTimeFormats,defaultWidth:"full"})},formatRelativeLocale={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'mañana a la' p",nextWeek:"eeee 'a la' p",other:"P"},formatRelativeLocalePlural={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'mañana a las' p",nextWeek:"eeee 'a las' p",other:"P"},formatRelative=function e(t,n,a,i){return n.getUTCHours()!==1?formatRelativeLocalePlural[t]:formatRelativeLocale[t]},eraValues={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","después de cristo"]},quarterValues={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},monthValues={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},dayValues={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","sá"],abbreviated:["dom","lun","mar","mié","jue","vie","sáb"],wide:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},dayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"}},formattingDayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},ordinalNumber=function e(t,n){var a=Number(t);return a+"º"},localize={ordinalNumber,era:buildLocalizeFn({values:eraValues,defaultWidth:"wide"}),quarter:buildLocalizeFn({values:quarterValues,defaultWidth:"wide",argumentCallback:function e(t){return Number(t)-1}}),month:buildLocalizeFn({values:monthValues,defaultWidth:"wide"}),day:buildLocalizeFn({values:dayValues,defaultWidth:"wide"}),dayPeriod:buildLocalizeFn({values:dayPeriodValues,defaultWidth:"wide",formattingValues:formattingDayPeriodValues,defaultFormattingWidth:"wide"})},matchOrdinalNumberPattern=/^(\d+)(º)?/i,parseOrdinalNumberPattern=/\d+/i,matchEraPatterns={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[uú]n|despu[eé]s de cristo|era com[uú]n)/i},parseEraPatterns={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[uú]n)/i,/^(despu[eé]s de cristo|era com[uú]n)/i]},matchQuarterPatterns={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},parseQuarterPatterns={any:[/1/i,/2/i,/3/i,/4/i]},matchMonthPatterns={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},parseMonthPatterns={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},matchDayPatterns={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[áa])/i,abbreviated:/^(dom|lun|mar|mi[ée]|jue|vie|s[áa]b)/i,wide:/^(domingo|lunes|martes|mi[ée]rcoles|jueves|viernes|s[áa]bado)/i},parseDayPatterns={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},matchDayPeriodPatterns={narrow:/^(a|p|mn|md|(de la|a las) (mañana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (mañana|tarde|noche))/i},parseDayPeriodPatterns={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/mañana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},match={ordinalNumber:buildMatchPatternFn({matchPattern:matchOrdinalNumberPattern,parsePattern:parseOrdinalNumberPattern,valueCallback:function e(t){return parseInt(t,10)}}),era:buildMatchFn({matchPatterns:matchEraPatterns,defaultMatchWidth:"wide",parsePatterns:parseEraPatterns,defaultParseWidth:"any"}),quarter:buildMatchFn({matchPatterns:matchQuarterPatterns,defaultMatchWidth:"wide",parsePatterns:parseQuarterPatterns,defaultParseWidth:"any",valueCallback:function e(t){return t+1}}),month:buildMatchFn({matchPatterns:matchMonthPatterns,defaultMatchWidth:"wide",parsePatterns:parseMonthPatterns,defaultParseWidth:"any"}),day:buildMatchFn({matchPatterns:matchDayPatterns,defaultMatchWidth:"wide",parsePatterns:parseDayPatterns,defaultParseWidth:"any"}),dayPeriod:buildMatchFn({matchPatterns:matchDayPeriodPatterns,defaultMatchWidth:"any",parsePatterns:parseDayPeriodPatterns,defaultParseWidth:"any"})},locale={code:"es",formatDistance,formatLong,formatRelative,localize,match,options:{weekStartsOn:1,firstWeekContainsDate:1}};const getEmotionIcon=e=>{switch(e){case"happy":case"excited":return"😊";case"grateful":return"🥰";case"worried":return"😟";case"sad":return"😢";default:return"🌱"}},MessageBubble=({message:e})=>{var a,i;const t=e.sender==="user",n=o=>{toastService.success("¡Gracias por tu feedback!",o?"Nos alegra que la respuesta te haya sido útil.":"Trabajaremos para mejorar las respuestas.")};return jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:cn("flex items-end gap-2",t?"justify-end":"justify-start"),children:[!t&&jsxRuntimeExports.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-muted text-xl",children:getEmotionIcon(e.emotion)}),jsxRuntimeExports.jsxs("div",{className:cn("max-w-xs rounded-2xl px-4 py-2 sm:max-w-sm md:max-w-md shadow-adaptive",t?"rounded-br-lg bg-primary-700 text-white drop-shadow-sm":"rounded-bl-lg bg-contrast-surface text-contrast-medium border border-contrast","rounded-[12px]"),children:[jsxRuntimeExports.jsx("p",{className:"text-sm",children:e.content}),((a=e.context)==null?void 0:a.insights)&&e.context.insights.length>0&&jsxRuntimeExports.jsxs("div",{className:"mt-3 space-y-2",children:[jsxRuntimeExports.jsx("div",{className:"font-semibold text-xs text-green-700 dark:text-green-300",children:"Recomendaciones y observaciones:"}),jsxRuntimeExports.jsx("ul",{className:"space-y-1",children:e.context.insights.map((o,s)=>jsxRuntimeExports.jsxs("li",{className:"text-xs bg-green-50 dark:bg-green-900/20 rounded-lg p-2 border border-green-200 dark:border-green-800",children:[jsxRuntimeExports.jsxs("div",{className:"font-medium",children:[o.type==="warning"&&"⚠️ ",o.type==="tip"&&"💡 ",o.type==="recommendation"&&"🌱 ",o.type==="observation"&&"🔎 ",o.title]}),jsxRuntimeExports.jsx("div",{children:o.description}),o.affectedPlants&&o.affectedPlants.length>0&&jsxRuntimeExports.jsxs("div",{className:"mt-1 text-[11px] text-green-800 dark:text-green-200",children:["Plantas: ",o.affectedPlants.join(", ")]})]},s))})]}),((i=e.context)==null?void 0:i.suggestedActions)&&e.context.suggestedActions.length>0&&jsxRuntimeExports.jsxs("div",{className:"mt-3 space-y-2",children:[jsxRuntimeExports.jsx("div",{className:"font-semibold text-xs text-blue-700 dark:text-blue-300",children:"Acciones sugeridas:"}),jsxRuntimeExports.jsx("ul",{className:"space-y-1",children:e.context.suggestedActions.map((o,s)=>jsxRuntimeExports.jsxs("li",{className:"text-xs bg-blue-50 dark:bg-blue-900/20 rounded-lg p-2 border border-blue-200 dark:border-blue-800",children:[jsxRuntimeExports.jsx("div",{className:"font-medium",children:o.action}),o.priority&&jsxRuntimeExports.jsxs("div",{className:"text-[11px] text-blue-800 dark:text-blue-200",children:["Prioridad: ",o.priority]}),o.plantIds&&o.plantIds.length>0&&jsxRuntimeExports.jsxs("div",{className:"text-[11px] text-blue-800 dark:text-blue-200",children:["Plantas: ",o.plantIds.join(", ")]})]},s))})]}),jsxRuntimeExports.jsx("p",{className:cn("mt-1 text-xs",t?"text-white/80":"text-contrast-soft","text-[#888] text-[12px]"),children:formatDistanceToNow(new Date(e.timestamp),{addSuffix:!0,locale})}),!t&&jsxRuntimeExports.jsxs("div",{className:"flex gap-2 mt-2",children:[jsxRuntimeExports.jsx("button",{"aria-label":"Respuesta útil",className:"text-green-600 hover:text-green-800 text-lg focus:outline-none",onClick:()=>n(!0),children:"👍"}),jsxRuntimeExports.jsx("button",{"aria-label":"Respuesta no útil",className:"text-red-500 hover:text-red-700 text-lg focus:outline-none",onClick:()=>n(!1),children:"👎"})]})]})]})},MessageList=({messages:e})=>jsxRuntimeExports.jsx("div",{className:"space-y-4",children:e.map(t=>jsxRuntimeExports.jsx(MessageBubble,{message:t},t.id))}),quickActions=["¿Cómo te sientes hoy?","¿Necesitas agua?","Cuéntame un dato curioso sobre ti"],ChatInput=({onSendMessage:e,isTyping:t})=>{const[n,a]=reactExports.useState(""),i=reactExports.useRef(null),o=()=>{var c;const l=(c=i.current)==null?void 0:c.value.trim();l&&(e(l),i.current&&(i.current.value=""))},s=l=>{l.key==="Enter"&&!l.shiftKey&&(l.preventDefault(),o())};return jsxRuntimeExports.jsx("footer",{className:"sticky bottom-0 z-10 bg-background/80 backdrop-blur-sm border-t border-border",children:jsxRuntimeExports.jsxs("div",{className:"p-4 pb-safe-bottom space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"relative flex-1",children:[jsxRuntimeExports.jsx(Input,{type:"text",ref:i,onKeyDown:s,placeholder:"Escribe un mensaje...",className:"pr-12",disabled:t}),jsxRuntimeExports.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 text-muted-foreground",children:jsxRuntimeExports.jsx(CornerDownLeft,{size:16})})]}),jsxRuntimeExports.jsx(Button,{"aria-label":"Enviar mensaje",onClick:o,disabled:!n.trim()||t,size:"icon",children:jsxRuntimeExports.jsx(Send,{size:20})})]}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap items-center gap-2 mb-3",children:quickActions.map(l=>jsxRuntimeExports.jsx(Button,{onClick:()=>a(l),disabled:t,variant:"secondary",size:"sm",children:l},l))})]})})},TypingIndicator=()=>{const e={initial:{y:0},animate:{y:[0,-4,0],transition:{duration:1,repeat:1/0,ease:"easeInOut"}}};return jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0},className:"flex items-end gap-2",children:[jsxRuntimeExports.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-muted text-xl",children:"🌱"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 rounded-2xl rounded-bl-lg bg-muted px-4 py-3",children:[jsxRuntimeExports.jsx(motion.div,{variants:e,animate:"animate",style:{transitionDelay:"0s"},className:"h-2 w-2 rounded-full bg-muted-foreground/50"}),jsxRuntimeExports.jsx(motion.div,{variants:e,animate:"animate",style:{transitionDelay:"0.2s"},className:"h-2 w-2 rounded-full bg-muted-foreground/50"}),jsxRuntimeExports.jsx(motion.div,{variants:e,animate:"animate",style:{transitionDelay:"0.4s"},className:"h-2 w-2 rounded-full bg-muted-foreground/50"})]})]})},EmptyChat=({plantName:e})=>jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5,ease:"easeOut"},className:"flex flex-1 flex-col items-center justify-center text-center p-8",children:[jsxRuntimeExports.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-primary/10 mb-4",children:jsxRuntimeExports.jsx(Sparkles,{className:"h-8 w-8 text-primary"})}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-foreground",children:"Inicia una conversación"}),jsxRuntimeExports.jsxs("p",{className:"text-muted-foreground max-w-xs",children:[e," está esperando para charlar. ¡Pregúntale sobre sus cuidados o simplemente saluda!"]})]}),Chat=()=>{const{plantId:e}=useParams(),t=useNavigate(),{loading:n,error:a}=usePlantDetail(e),{plant:i,isTyping:o,handleSendMessage:s}=useChat(),l=reactExports.useRef(null);return reactExports.useEffect(()=>{var c;(c=l.current)==null||c.scrollIntoView({behavior:"smooth"})},[i==null?void 0:i.chatHistory,o]),n?jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-background text-foreground",children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"w-12 h-12 animate-spin text-green-500"}),jsxRuntimeExports.jsx("p",{className:"mt-4 text-lg",children:"Cargando chat..."})]}):a?jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-background text-red-500",children:[jsxRuntimeExports.jsxs("p",{className:"mb-4",children:["Error: ",a]}),jsxRuntimeExports.jsx("button",{onClick:()=>t(-1),className:"btn btn-primary",children:"Volver"})]}):i?jsxRuntimeExports.jsxs("div",{className:"flex flex-col h-screen bg-background text-foreground",children:[jsxRuntimeExports.jsx(ChatHeader,{plant:i}),jsxRuntimeExports.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",style:{paddingBottom:"calc(88px + env(safe-area-inset-bottom))"},children:[jsxRuntimeExports.jsx(AnimatePresence,{children:i.chatHistory.length===0?jsxRuntimeExports.jsx(EmptyChat,{plantName:i.nickname||i.name}):jsxRuntimeExports.jsx(MessageList,{messages:i.chatHistory,plantNickname:i.nickname||i.name})}),o&&jsxRuntimeExports.jsx(TypingIndicator,{}),jsxRuntimeExports.jsx("div",{ref:l})]}),jsxRuntimeExports.jsx(ChatInput,{onSendMessage:s,isTyping:o})]}):jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-background text-foreground",children:[jsxRuntimeExports.jsx("p",{className:"mb-4",children:"Planta no encontrada."}),jsxRuntimeExports.jsx("button",{onClick:()=>t(-1),className:"btn btn-primary",children:"Volver"})]})};class GardenChatService{constructor(t,n){fe(this,"supabase");fe(this,"cache");this.supabase=t,this.cache=n}async sendMessage(t,n,a){try{const{data:{session:i},error:o}=await this.supabase.auth.getSession();if(o||!(i!=null&&i.access_token))throw console.error("User session not available:",o),new Error("Usuario no autenticado. Por favor inicia sesión nuevamente.");const{data:s,error:l}=await this.supabase.functions.invoke("garden-ai-chat",{body:{message:t,sessionId:n,userId:a},headers:{Authorization:`Bearer ${i.access_token}`}});if(l)throw new Error(`Garden AI service error: ${l.message}`);if(!s)throw new Error("No data received from garden AI service");return s}catch(i){throw console.error("Error in garden chat service:",i),i}}async sendMessageToGardenAI(t,n,a){try{const i=await this.buildGardenContext(n),o=a.map(v=>({role:v.sender==="user"?"user":"assistant",content:v.content})),s="amigable, motivador, experto, cálido, y con un toque de humor ligero",{data:{session:l},error:c}=await this.supabase.auth.getSession();if(c||!(l!=null&&l.access_token))throw console.error("User session not available:",c),new Error("Usuario no autenticado. Por favor inicia sesión nuevamente.");const{data:u,error:d}=await this.supabase.functions.invoke("garden-ai-chat",{body:{userMessage:t,gardenContext:i,conversationHistory:o,tonePersona:s},headers:{Authorization:`Bearer ${l.access_token}`}});if(d)throw new Error(`Garden AI service error: ${d.message}`);if(!u)throw new Error("No data received from garden AI service");const p=typeof u=="string"?JSON.parse(u):u,f=(p.content||"").toLowerCase();return(!p.content||f.includes("no sé")||f.includes("no tengo información")||f.includes("no puedo ayudarte")||f.length<30)&&toastService.warning("Respuesta genérica","La respuesta de la IA fue muy genérica o poco útil. Intenta preguntar de otra forma o proporciona más detalles."),{content:p.content||"Lo siento, no pude procesar tu mensaje.",insights:p.insights||[],suggestedActions:p.suggestedActions||[]}}catch(i){throw i}}async verifyFunctionAvailability(){try{const t={userMessage:"ping",gardenContext:{totalPlants:0,plantsData:[],averageHealthScore:0,commonIssues:[],careScheduleSummary:{needsWatering:[],needsFertilizing:[],healthConcerns:[]},environmentalFactors:{locations:["test"]}},conversationHistory:[]},{data:{session:n},error:a}=await this.supabase.auth.getSession();if(a||!(n!=null&&n.access_token))throw console.error("User session not available:",a),new Error("Usuario no autenticado. Por favor inicia sesión nuevamente.");const{data:i,error:o}=await this.supabase.functions.invoke("garden-ai-chat",{body:t,headers:{Authorization:`Bearer ${n.access_token}`}});return o?o.message.includes("404")||o.message.includes("not found")?{available:!1,error:"La función de chat de jardín no está disponible en este momento"}:{available:!1,error:o.message}:i&&typeof i.content=="string"?{available:!0}:{available:!1,error:"Function returned unexpected response format"}}catch(t){return{available:!1,error:t instanceof Error?t.message:"Error desconocido"}}}async getGardenHealthSummary(t){try{const n=this.cache.getGardenSummary(t);if(n)return n;const a=await this.buildGardenContext(t),i=a.plantsData.filter(l=>l.healthScore>=80).length,o=a.careScheduleSummary.needsWatering.length+a.careScheduleSummary.healthConcerns.length,s={totalPlants:a.totalPlants,averageHealth:a.averageHealthScore,urgentActions:o,healthyPlants:i};return this.cache.setGardenSummary(t,s),s}catch(n){throw console.error("Error getting garden health summary:",n),n}}async getSuggestedQuestions(t){try{const n=await this.buildGardenContext(t),a=[];return n.totalPlants===0?(a.push("¿Cómo agrego mi primera planta?"),a.push("¿Qué tipo de planta me recomiendas para empezar?"),a):(a.push("¿Cuántas plantas tengo y cómo están?"),a.push("¿Cuál es la salud promedio de mi jardín?"),n.careScheduleSummary.healthConcerns.length>0&&(a.push("¿Qué plantas necesitan atención especial?"),a.push("¿Qué problemas de salud hay en mi jardín?")),n.plantsData.some(i=>i.healthScore>=80)&&a.push("¿Cuáles de mis plantas están más sanas?"),n.environmentalFactors.locations.length>1&&a.push("¿Cómo afecta la ubicación a mis plantas?"),n.totalPlants>5&&a.push("¿Cómo organizar mejor mi espacio de plantas?"),n.plantsData.some(i=>"lastFertilized"in i&&!!i.lastFertilized)&&a.push("¿Cuándo debo fertilizar mis plantas?"),new Set(n.plantsData.map(i=>i.species)).size>1&&a.push("¿Qué especie de planta es la más resistente en mi jardín?"),a.slice(0,6))}catch(n){return console.error("Error getting suggested questions:",n),["¿Cuántas plantas tengo y cómo están?","¿Cuál es la salud promedio de mi jardín?"]}}async refreshGardenData(t){try{this.invalidateCache(t),await this.buildGardenContext(t),console.log("[GardenChatService] Garden data refreshed for user:",t)}catch(n){throw console.error("Error refreshing garden data:",n),n}}async buildGardenContext(t){try{const n=this.cache.getGardenContext(t);if(n)return n;const{data:a,error:i}=await this.supabase.from("plants").select(`
          id,
          name,
          nickname,
          species,
          location,
          plant_environment,
          light_requirements,
          health_score,
          last_watered,
          last_fertilized,
          care_profile,
          date_added
        `).eq("user_id",t).order("created_at",{ascending:!1});if(i)throw i;const o=a.map(v=>{var b;return{id:v.id,name:v.name,nickname:v.nickname||void 0,species:v.species,location:v.location,plantEnvironment:v.plant_environment,lightRequirements:v.light_requirements,healthScore:v.health_score||85,lastWatered:v.last_watered?new Date(v.last_watered):void 0,wateringFrequency:(b=v.care_profile)==null?void 0:b.wateringFrequency}}),s=o.length,l=s>0?Math.round(o.reduce((v,b)=>v+b.healthScore,0)/s):0,c=new Date,u=[],d=[],p=[];o.forEach(v=>{if(v.lastWatered&&v.wateringFrequency){const b=new Date(v.lastWatered),g=new Date(b);g.setDate(b.getDate()+v.wateringFrequency),c>g&&u.push(v.id)}v.healthScore<70&&p.push(v.id)});const f=[...new Set(o.map(v=>v.location))],h={totalPlants:s,plantsData:o,averageHealthScore:l,commonIssues:[],careScheduleSummary:{needsWatering:u,needsFertilizing:d,healthConcerns:p},environmentalFactors:{locations:f,lightConditions:[],humidityNeeds:[]}};return this.cache.setGardenContext(t,h),h}catch(n){throw console.error("Error building garden context:",n),n}}invalidateCache(t){this.cache.invalidateCache(t),console.log("Cache invalidated for user:",t)}}const gardenChatService=new GardenChatService(supabase,gardenCacheService),useGardenChat=()=>{const{user:e}=useAuthStore(),[t,n]=reactExports.useState([]),[a,i]=reactExports.useState(!1),[o,s]=reactExports.useState(!1),[l,c]=reactExports.useState(null),[u,d]=reactExports.useState(null),[p,f]=reactExports.useState([]),[h,v]=reactExports.useState("");reactExports.useEffect(()=>{e!=null&&e.id&&b()},[e==null?void 0:e.id]);const b=async()=>{if(e!=null&&e.id){i(!0);try{const[R,_]=await Promise.all([gardenChatService.getGardenHealthSummary(e.id),gardenChatService.getSuggestedQuestions(e.id)]);if(d(R),f(_),t.length===0&&R.totalPlants>0){const $={id:`welcome-${Date.now()}`,sender:"ai",content:`¡Hola! Soy tu asistente de jardín 🌱 

Veo que tienes ${R.totalPlants} plantas en tu jardín con una salud promedio de ${R.averageHealth}%. ${R.urgentActions>0?`Hay ${R.urgentActions} acciones que podrían necesitar tu atención.`:"¡Todo parece estar en buen estado!"}

¿En qué puedo ayudarte hoy con tu jardín?`,timestamp:new Date,context:{queryType:"general"}};n([$])}}catch(R){console.error("Error loading initial garden data:",R),c("Error al cargar la información del jardín")}finally{i(!1)}}},g=reactExports.useCallback(async R=>{if(!(e!=null&&e.id)||!R.trim()||o)return;const _=await gardenChatService.verifyFunctionAvailability();if(!_.available){c(`🚧 El chat de jardín no está disponible: ${_.error}`);return}const $={id:`user-${Date.now()}`,sender:"user",content:R.trim(),timestamp:new Date};v(R.trim()),n(C=>[...C,$]),s(!0),c(null);try{const C=await gardenChatService.sendMessageToGardenAI(R.trim(),e.id,t),O={id:`ai-${Date.now()}`,sender:"ai",content:C.content,timestamp:new Date,context:{plantsAnalyzed:extractPlantIdsFromResponse(C),queryType:inferQueryType(R),insights:C.insights||[],suggestedActions:C.suggestedActions||[]}};if(n(N=>[...N,O]),C.suggestedActions&&C.suggestedActions.length>0){const N=await gardenChatService.getGardenHealthSummary(e.id);d(N)}}catch(C){console.error("Error sending message to garden AI:",C);let O="Error al enviar el mensaje. Por favor intenta de nuevo.";C instanceof Error&&(C.message.includes("función de chat de jardín no está disponible")?O="🚧 El chat de jardín está temporalmente no disponible. Estamos trabajando para solucionarlo.":C.message.includes("CORS")?O="🔧 Error de configuración. Por favor contacta al administrador.":C.message.includes("garden-ai-chat no existe")&&(O="⚠️ Servicio no configurado. El chat de jardín necesita configuración adicional.")),c(O),n(N=>N.slice(0,-1))}finally{s(!1)}},[e==null?void 0:e.id,t,o]),E=reactExports.useCallback(async()=>{h&&await g(h)},[h,g]),j=reactExports.useCallback(()=>{n([]),c(null),e!=null&&e.id&&b()},[e==null?void 0:e.id]),w=reactExports.useCallback(async()=>{if(e!=null&&e.id){i(!0);try{await gardenChatService.refreshGardenData(e.id),await b(),console.log("[useGardenChat] Garden data refreshed successfully")}catch(R){console.error("Error refreshing garden data:",R),c("Error al actualizar los datos del jardín")}finally{i(!1)}}},[e==null?void 0:e.id]),S=reactExports.useMemo(()=>a,[a]),A=reactExports.useMemo(()=>{},[e==null?void 0:e.id,u]);return{messages:t,isLoading:S,isTyping:o,error:l,gardenSummary:u,suggestedQuestions:p,sendMessage:g,clearMessages:j,retryLastMessage:E,refreshGardenData:w,cacheStats:A}};function extractPlantIdsFromResponse(e){const t=[];return e.insights&&e.insights.forEach(n=>{n.affectedPlants&&t.push(...n.affectedPlants)}),e.suggestedActions&&e.suggestedActions.forEach(n=>{n.plantIds&&t.push(...n.plantIds)}),[...new Set(t)]}function inferQueryType(e){const t=e.toLowerCase();return t.includes("salud")||t.includes("problema")||t.includes("enferm")?"health_analysis":t.includes("comparar")||t.includes("diferencia")||t.includes("mejor")?"care_comparison":t.includes("hongo")||t.includes("plaga")||t.includes("prevenir")?"disease_prevention":t.includes("crecimiento")||t.includes("progreso")||t.includes("tiempo")?"growth_tracking":"general"}const SystemDiagnostics=({onClose:e})=>{const[t,n]=reactExports.useState([{name:"garden-ai-chat",available:!1}]),[a,i]=reactExports.useState(!1),o=async()=>{i(!0);const c=[],u=await gardenChatService.verifyFunctionAvailability();c.push({name:"garden-ai-chat",available:u.available,error:u.error,lastChecked:new Date}),n(c),i(!1)};reactExports.useEffect(()=>{o()},[]);const s=c=>c.available?jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-5 h-5 text-green-500"}):jsxRuntimeExports.jsx(CircleAlert,{className:"w-5 h-5 text-red-500"}),l=c=>c.available?"Disponible":"No disponible";return jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:e,children:jsxRuntimeExports.jsx(motion.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:c=>c.stopPropagation(),className:"w-full max-w-md",children:jsxRuntimeExports.jsxs(Card,{className:"p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[jsxRuntimeExports.jsx(Wrench,{className:"w-6 h-6 text-blue-500"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold",children:"Diagnóstico del Sistema"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Estado de Funciones Edge"}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:t.map(c=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[s(c),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-sm",children:c.name}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground",children:l(c)})]})]}),c.error&&jsxRuntimeExports.jsxs("div",{className:"text-xs text-red-500 max-w-32 text-right",children:[c.error.substring(0,50),"..."]})]},c.name))})]}),t.some(c=>!c.available)&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-2",children:[jsxRuntimeExports.jsx(CircleAlert,{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400 mt-0.5 flex-shrink-0"}),jsxRuntimeExports.jsxs("div",{className:"text-sm",children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-yellow-800 dark:text-yellow-200",children:"Servicios no disponibles"}),jsxRuntimeExports.jsx("p",{className:"text-yellow-700 dark:text-yellow-300 mt-1",children:"Algunos servicios del chat de jardín no están funcionando. Verifica que las funciones Edge estén desplegadas en Supabase."})]})]})}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3 pt-3",children:[jsxRuntimeExports.jsxs(Button,{onClick:o,disabled:a,variant:"outline",size:"sm",className:"flex-1 gap-2",children:[jsxRuntimeExports.jsx(RefreshCw,{className:`w-4 h-4 ${a?"animate-spin":""}`}),"Verificar Nuevamente"]}),jsxRuntimeExports.jsx(Button,{onClick:e,variant:"secondary",size:"sm",className:"flex-1",children:"Cerrar"})]})]})]})})})},GardenChatHeader=({gardenSummary:e,onClearChat:t,onRefresh:n,isRefreshing:a=!1})=>{const i=useNavigate(),[o,s]=reactExports.useState(!1),l=u=>u>=80?"text-green-500":u>=60?"text-green-400":"text-red-500",c=u=>u>=80?"Excelente":u>=60?"Buena":"Necesita atención";return jsxRuntimeExports.jsxs("header",{className:"sticky top-0 z-10 bg-background/80 backdrop-blur-sm border-b border-muted",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 p-4 pt-safe-top",children:[jsxRuntimeExports.jsx("button",{onClick:()=>i(navigation.toDashboard()),className:"p-2 -ml-2 rounded-full hover:bg-muted transition-colors","aria-label":"Volver al dashboard",children:jsxRuntimeExports.jsx(ArrowLeft,{size:20})}),jsxRuntimeExports.jsx("div",{className:"flex-1",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-full",children:jsxRuntimeExports.jsx(Sprout,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"font-bold text-foreground tracking-[0.2px]",children:"Asistente de Jardín"}),e&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-xs text-neutral-600 dark:text-neutral-400",children:[jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Activity,{size:12}),e.totalPlants," plantas"]}),jsxRuntimeExports.jsx("span",{className:`font-medium ${l(e.averageHealth)} text-xs px-2 py-0.5 rounded-full`,style:{fontSize:"11px",padding:"2px 8px"},children:c(e.averageHealth)}),e.urgentActions>0&&jsxRuntimeExports.jsxs(motion.span,{className:"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300 px-2 py-0.5 rounded-full text-xs font-medium",style:{fontSize:"11px",padding:"2px 8px"},initial:{scale:0},animate:{scale:1},transition:{delay:.2},children:[e.urgentActions," acciones"]})]})]})]})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx("button",{onClick:()=>s(!0),className:"p-2 rounded-full hover:bg-muted transition-colors","aria-label":"Diagnóstico del sistema",children:jsxRuntimeExports.jsx(Wrench,{size:18})}),n&&jsxRuntimeExports.jsx("button",{onClick:n,disabled:a,className:"p-2 rounded-full hover:bg-muted transition-colors disabled:opacity-50","aria-label":"Actualizar datos del jardín",children:jsxRuntimeExports.jsx(motion.div,{animate:a?{rotate:360}:{},transition:a?{duration:1,repeat:1/0,ease:"linear"}:{},children:jsxRuntimeExports.jsx(RefreshCw,{size:18})})}),jsxRuntimeExports.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-muted transition-colors","aria-label":"Opciones del chat",children:jsxRuntimeExports.jsx(EllipsisVertical,{size:20})})]})]}),jsxRuntimeExports.jsx(AnimatePresence,{children:o&&jsxRuntimeExports.jsx(SystemDiagnostics,{onClose:()=>s(!1)})})]})},GardenMessageBubble=({message:e})=>{var i,o,s;const t=e.sender==="user",n=()=>{var l;if(!((l=e.context)!=null&&l.queryType))return jsxRuntimeExports.jsx(Bot,{size:16});switch(e.context.queryType){case"health_analysis":return jsxRuntimeExports.jsx(TriangleAlert,{size:16});case"care_comparison":return jsxRuntimeExports.jsx(Eye,{size:16});case"disease_prevention":return jsxRuntimeExports.jsx(Target,{size:16});case"growth_tracking":return jsxRuntimeExports.jsx(Lightbulb,{size:16});default:return jsxRuntimeExports.jsx(Bot,{size:16})}},a=()=>{var l;if(t)return"text-primary-foreground/70";if(!((l=e.context)!=null&&l.queryType))return"text-green-500";switch(e.context.queryType){case"health_analysis":return"text-red-500";case"care_comparison":return"text-blue-500";case"disease_prevention":return"text-orange-500";case"growth_tracking":return"text-purple-500";default:return"text-green-500"}};return jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:cn("flex items-end gap-2 max-w-[85%]",t?"justify-end ml-auto":"justify-start"),children:[!t&&jsxRuntimeExports.jsx(motion.div,{className:cn("flex h-8 w-8 items-center justify-center rounded-full","bg-gradient-to-br from-green-100 to-green-200 dark:from-green-900/30 dark:to-green-800/30"),initial:{scale:0},animate:{scale:1},transition:{delay:.1},children:jsxRuntimeExports.jsx("div",{className:a(),children:n()})}),jsxRuntimeExports.jsx("div",{className:"flex-1",children:jsxRuntimeExports.jsxs("div",{className:cn("rounded-2xl px-4 py-3 break-words shadow-adaptive",t?"rounded-br-lg bg-primary-700 text-white drop-shadow-sm ml-8":"rounded-bl-lg bg-contrast-surface text-contrast-medium mr-8 border border-contrast","rounded-[12px]"),children:[jsxRuntimeExports.jsx("div",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:e.content}),((i=e.context)==null?void 0:i.insights)&&e.context.insights.length>0&&jsxRuntimeExports.jsxs("div",{className:"mt-3 space-y-2",children:[jsxRuntimeExports.jsx("div",{className:"font-semibold text-xs text-green-700 dark:text-green-300",children:"Recomendaciones y observaciones:"}),jsxRuntimeExports.jsx("ul",{className:"space-y-1",children:e.context.insights.map((l,c)=>jsxRuntimeExports.jsxs("li",{className:"text-xs bg-green-50 dark:bg-green-900/20 rounded-lg p-2 border border-green-200 dark:border-green-800",children:[jsxRuntimeExports.jsxs("div",{className:"font-medium",children:[l.type==="warning"&&"⚠️ ",l.type==="tip"&&"💡 ",l.type==="recommendation"&&"🌱 ",l.type==="observation"&&"🔎 ",l.title]}),jsxRuntimeExports.jsx("div",{children:l.description}),l.affectedPlants&&l.affectedPlants.length>0&&jsxRuntimeExports.jsxs("div",{className:"mt-1 text-[11px] text-green-800 dark:text-green-200",children:["Plantas: ",l.affectedPlants.join(", ")]})]},c))})]}),((o=e.context)==null?void 0:o.suggestedActions)&&e.context.suggestedActions.length>0&&jsxRuntimeExports.jsxs("div",{className:"mt-3 space-y-2",children:[jsxRuntimeExports.jsx("div",{className:"font-semibold text-xs text-blue-700 dark:text-blue-300",children:"Acciones sugeridas:"}),jsxRuntimeExports.jsx("ul",{className:"space-y-1",children:e.context.suggestedActions.map((l,c)=>jsxRuntimeExports.jsxs("li",{className:"text-xs bg-blue-50 dark:bg-blue-900/20 rounded-lg p-2 border border-blue-200 dark:border-blue-800",children:[jsxRuntimeExports.jsx("div",{className:"font-medium",children:l.action}),l.priority&&jsxRuntimeExports.jsxs("div",{className:"text-[11px] text-blue-800 dark:text-blue-200",children:["Prioridad: ",l.priority]}),l.plantIds&&l.plantIds.length>0&&jsxRuntimeExports.jsxs("div",{className:"text-[11px] text-blue-800 dark:text-blue-200",children:["Plantas: ",l.plantIds.join(", ")]})]},c))})]}),!t&&((s=e.context)==null?void 0:s.plantsAnalyzed)&&e.context.plantsAnalyzed.length>0&&jsxRuntimeExports.jsxs(motion.div,{className:"mt-2 flex items-center gap-1 text-xs opacity-70",initial:{opacity:0},animate:{opacity:.7},transition:{delay:.5},children:[jsxRuntimeExports.jsx(Eye,{size:12}),jsxRuntimeExports.jsxs("span",{children:["Analizó ",e.context.plantsAnalyzed.length," planta(s)"]})]}),jsxRuntimeExports.jsx("div",{className:cn("mt-2 text-xs",t?"text-primary-foreground/70":"text-muted-foreground/70","text-[#888] text-[12px]"),children:formatDistanceToNow(new Date(e.timestamp),{addSuffix:!0,locale})})]})}),t&&jsxRuntimeExports.jsx(motion.div,{className:"flex h-8 w-8 items-center justify-center rounded-full bg-primary/10",initial:{scale:0},animate:{scale:1},transition:{delay:.1},children:jsxRuntimeExports.jsx(User,{size:16,className:"text-primary"})})]})},GardenChatInput=({onSendMessage:e,isTyping:t,suggestedQuestions:n,isLoading:a=!1})=>{const[i,o]=reactExports.useState(""),[s,l]=reactExports.useState(!0),c=reactExports.useRef(null),u=async()=>{var v;if(t)return;const h=(v=c.current)==null?void 0:v.value.trim();h&&(l(!1),c.current&&(c.current.value=""),await e(h))},d=h=>{h.key==="Enter"&&!h.shiftKey&&(h.preventDefault(),u())},p=async h=>{o(""),l(!1),await e(h)},f=()=>{n.length>0&&!i&&l(!0)};return jsxRuntimeExports.jsx("footer",{className:"sticky bottom-0 z-10 bg-background/80 backdrop-blur-sm border-t border-border",children:jsxRuntimeExports.jsxs("div",{className:"p-4 pb-safe-bottom space-y-3",children:[jsxRuntimeExports.jsx(AnimatePresence,{children:s&&n.length>0&&!a&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},className:"space-y-2 mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[jsxRuntimeExports.jsx(Sparkles,{size:12}),jsxRuntimeExports.jsx("span",{children:"Preguntas sugeridas"})]}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:n.slice(0,4).map((h,v)=>jsxRuntimeExports.jsx(motion.button,{onClick:()=>p(h),disabled:t,className:"px-3 py-1.5 text-xs bg-muted hover:bg-[#F0F0F0] active:bg-[#F0F0F0] rounded-full border border-border/50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-left",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:v*.1},whileHover:{scale:1.02},whileTap:{scale:.98},children:h},h))})]})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"relative flex-1",children:[jsxRuntimeExports.jsx(Input,{type:"text",ref:c,onKeyDown:d,onFocus:f,placeholder:"Pregúntame sobre tu jardín...",className:"pr-12",disabled:t||a}),jsxRuntimeExports.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 text-muted-foreground",children:jsxRuntimeExports.jsx(CornerDownLeft,{size:16})})]}),jsxRuntimeExports.jsx(Button,{"aria-label":"Enviar mensaje",onClick:u,disabled:!i.trim()||t||a,size:"icon",className:"shrink-0",children:t?jsxRuntimeExports.jsx(motion.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:jsxRuntimeExports.jsx(Sparkles,{size:20})}):jsxRuntimeExports.jsx(Send,{size:20})})]}),a&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center justify-center gap-2 text-xs text-muted-foreground",children:[jsxRuntimeExports.jsx(motion.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:jsxRuntimeExports.jsx(Sparkles,{size:12})}),jsxRuntimeExports.jsx("span",{children:"Analizando tu jardín..."})]})]})})},illustrations={plants:jsxRuntimeExports.jsx("svg",{viewBox:"0 0 200 150",className:"w-32 h-24 text-primary-300 dark:text-primary-600",children:jsxRuntimeExports.jsxs(motion.g,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},children:[jsxRuntimeExports.jsx(motion.path,{d:"M60 120 L140 120 L130 100 L70 100 Z",fill:"currentColor",initial:{scaleY:0},animate:{scaleY:1},transition:{delay:.2,duration:.5}}),jsxRuntimeExports.jsx(motion.g,{initial:{scale:0,rotate:-10},animate:{scale:1,rotate:0},transition:{delay:.5,duration:.8,type:"spring"},children:jsxRuntimeExports.jsx("path",{d:"M80 100 Q85 80 90 85 Q95 75 85 70 Q75 75 80 100",fill:"currentColor",opacity:"0.8"})}),jsxRuntimeExports.jsx(motion.g,{initial:{scale:0,rotate:10},animate:{scale:1,rotate:0},transition:{delay:.7,duration:.8,type:"spring"},children:jsxRuntimeExports.jsx("path",{d:"M100 100 Q105 85 110 90 Q115 80 105 75 Q95 80 100 100",fill:"currentColor",opacity:"0.7"})}),jsxRuntimeExports.jsx(motion.g,{initial:{scale:0,rotate:-5},animate:{scale:1,rotate:0},transition:{delay:.9,duration:.8,type:"spring"},children:jsxRuntimeExports.jsx("path",{d:"M120 100 Q125 90 130 95 Q135 85 125 80 Q115 85 120 100",fill:"currentColor",opacity:"0.6"})})]})}),search:jsxRuntimeExports.jsx("svg",{viewBox:"0 0 200 150",className:"w-32 h-24 text-primary-300 dark:text-primary-600",children:jsxRuntimeExports.jsxs(motion.g,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8},children:[jsxRuntimeExports.jsx(motion.circle,{cx:"80",cy:"70",r:"25",stroke:"currentColor",strokeWidth:"3",fill:"none",initial:{scale:0},animate:{scale:1},transition:{delay:.3,duration:.5,type:"spring"}}),jsxRuntimeExports.jsx(motion.line,{x1:"100",y1:"88",x2:"120",y2:"108",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",initial:{scaleX:0},animate:{scaleX:1},transition:{delay:.6,duration:.4}}),jsxRuntimeExports.jsx(motion.circle,{cx:"140",cy:"50",r:"2",fill:"currentColor",initial:{scale:0},animate:{scale:1},transition:{delay:1,duration:.3}}),jsxRuntimeExports.jsx(motion.circle,{cx:"150",cy:"40",r:"3",fill:"currentColor",initial:{scale:0},animate:{scale:1},transition:{delay:1.2,duration:.3}})]})}),chat:jsxRuntimeExports.jsx("svg",{viewBox:"0 0 200 150",className:"w-32 h-24 text-primary-300 dark:text-primary-600",children:jsxRuntimeExports.jsxs(motion.g,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8},children:[jsxRuntimeExports.jsx(motion.rect,{x:"50",y:"40",width:"100",height:"60",rx:"20",fill:"currentColor",opacity:"0.8",initial:{scale:0,y:20},animate:{scale:1,y:0},transition:{delay:.2,duration:.6,type:"spring"}}),jsxRuntimeExports.jsx(motion.path,{d:"M80 100 L70 115 L95 105 Z",fill:"currentColor",opacity:"0.8",initial:{scale:0},animate:{scale:1},transition:{delay:.5,duration:.4}}),jsxRuntimeExports.jsxs(motion.g,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8,duration:.5},children:[jsxRuntimeExports.jsx("circle",{cx:"75",cy:"70",r:"3",fill:"white"}),jsxRuntimeExports.jsx("circle",{cx:"100",cy:"70",r:"3",fill:"white"}),jsxRuntimeExports.jsx("circle",{cx:"125",cy:"70",r:"3",fill:"white"})]})]})}),camera:jsxRuntimeExports.jsx("svg",{viewBox:"0 0 200 150",className:"w-32 h-24 text-primary-300 dark:text-primary-600",children:jsxRuntimeExports.jsxs(motion.g,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8},children:[jsxRuntimeExports.jsx(motion.rect,{x:"60",y:"60",width:"80",height:"50",rx:"8",fill:"currentColor",opacity:"0.8",initial:{scale:0},animate:{scale:1},transition:{delay:.2,duration:.5,type:"spring"}}),jsxRuntimeExports.jsx(motion.rect,{x:"85",y:"45",width:"30",height:"15",rx:"4",fill:"currentColor",opacity:"0.6",initial:{scaleY:0},animate:{scaleY:1},transition:{delay:.4,duration:.3}}),jsxRuntimeExports.jsx(motion.circle,{cx:"100",cy:"85",r:"15",stroke:"white",strokeWidth:"2",fill:"none",initial:{scale:0},animate:{scale:1},transition:{delay:.6,duration:.4,type:"spring"}}),jsxRuntimeExports.jsx(motion.circle,{cx:"120",cy:"70",r:"3",fill:"currentColor",opacity:"0.9",initial:{scale:0},animate:{scale:[0,1.2,1]},transition:{delay:.8,duration:.5}})]})}),settings:jsxRuntimeExports.jsx("svg",{viewBox:"0 0 200 150",className:"w-32 h-24 text-primary-300 dark:text-primary-600",children:jsxRuntimeExports.jsxs(motion.g,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8},children:[jsxRuntimeExports.jsxs(motion.g,{animate:{rotate:360},transition:{duration:20,repeat:1/0,ease:"linear"},style:{originX:"100px",originY:"75px"},children:[jsxRuntimeExports.jsx("path",{d:"M100 50 L110 60 L120 50 L120 60 L130 70 L120 80 L120 90 L110 90 L100 100 L90 90 L80 90 L80 80 L70 70 L80 60 L80 50 Z",fill:"currentColor",opacity:"0.7"}),jsxRuntimeExports.jsx("circle",{cx:"100",cy:"75",r:"8",fill:"white"})]}),jsxRuntimeExports.jsxs(motion.g,{animate:{rotate:-360},transition:{duration:15,repeat:1/0,ease:"linear"},style:{originX:"140px",originY:"95px"},children:[jsxRuntimeExports.jsx("path",{d:"M140 85 L145 90 L150 85 L150 90 L155 95 L150 100 L150 105 L145 105 L140 110 L135 105 L130 105 L130 100 L125 95 L130 90 L130 85 Z",fill:"currentColor",opacity:"0.5"}),jsxRuntimeExports.jsx("circle",{cx:"140",cy:"95",r:"5",fill:"white"})]})]})})},EmptyState=({icon:e,title:t,description:n,action:a,illustration:i="plants",className:o})=>jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},className:cn("flex flex-col items-center justify-center text-center py-12 px-6 max-w-md mx-auto",o),children:[jsxRuntimeExports.jsx(motion.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2,duration:.5,ease:"easeOut"},className:"mb-6",children:e||illustrations[i]}),jsxRuntimeExports.jsx(motion.h3,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4,duration:.5},className:"text-xl font-semibold text-neutral-900 dark:text-neutral-100 mb-3",children:t}),jsxRuntimeExports.jsx(motion.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5,duration:.5},className:"text-neutral-600 dark:text-neutral-400 mb-6 leading-relaxed",children:n}),a&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},children:jsxRuntimeExports.jsx(Button,{onClick:a.onClick,variant:"primary",size:"lg",className:"animate-glow",children:a.label})})]}),GardenChat=()=>{const e=useNavigate(),t=usePlantStore(h=>h.plants),{messages:n,isLoading:a,isTyping:i,error:o,gardenSummary:s,suggestedQuestions:l,sendMessage:c,clearMessages:u,retryLastMessage:d,refreshGardenData:p}=useGardenChat(),f=reactExports.useRef(null);return reactExports.useEffect(()=>{var h;(h=f.current)==null||h.scrollIntoView({behavior:"smooth"})},[n,i]),o&&!s?jsxRuntimeExports.jsxs("div",{className:"flex flex-col h-screen bg-background text-foreground",children:[jsxRuntimeExports.jsx(GardenChatHeader,{gardenSummary:s}),jsxRuntimeExports.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center max-w-md",children:[jsxRuntimeExports.jsx(CircleAlert,{className:"w-16 h-16 text-destructive mx-auto mb-4"}),jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Error de conexión"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground mb-4",children:o}),jsxRuntimeExports.jsxs(Button,{onClick:p,variant:"primary",children:[jsxRuntimeExports.jsx(RefreshCw,{className:"w-4 h-4 mr-2"}),"Reintentar"]})]})})]}):(s==null?void 0:s.totalPlants)===0?jsxRuntimeExports.jsxs("div",{className:"flex flex-col h-screen bg-background text-foreground",children:[jsxRuntimeExports.jsx(GardenChatHeader,{gardenSummary:s}),jsxRuntimeExports.jsx("div",{className:"flex-1 flex items-center justify-center",children:jsxRuntimeExports.jsx(EmptyState,{illustration:"plants",title:"Tu jardín está vacío",description:"Agrega algunas plantas a tu jardín para poder chatear conmigo sobre su cuidado y salud.",action:{label:"Agregar mi primera planta",onClick:()=>e(navigation.toCamera())}})})]}):jsxRuntimeExports.jsxs("div",{className:"flex flex-col h-screen bg-background text-foreground",children:[jsxRuntimeExports.jsx(GardenChatHeader,{gardenSummary:s,onClearChat:u,onRefresh:p,isRefreshing:a&&n.length>0}),n.length===0&&t.length>0&&jsxRuntimeExports.jsxs("div",{className:"p-4 border-b border-neutral-200 dark:border-neutral-700",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-3",children:"Chats individuales con tus plantas:"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.slice(0,4).map(h=>jsxRuntimeExports.jsx(Card,{variant:"glass",size:"sm",interactive:!0,className:"cursor-pointer hover:border-primary-300 dark:hover:border-primary-600",onClick:()=>e(navigation.toPlantChat(h.id)),children:jsxRuntimeExports.jsx(CardContent,{className:"p-3",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-lg bg-primary-100 dark:bg-primary-900 flex items-center justify-center",children:jsxRuntimeExports.jsx(Sprout,{className:"w-4 h-4 text-primary-600 dark:text-primary-400"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium truncate",children:h.nickname||h.name}),jsxRuntimeExports.jsx("p",{className:"text-xs text-neutral-500 truncate",children:h.species})]}),jsxRuntimeExports.jsx(MessageCircle,{className:"w-4 h-4 text-neutral-400"})]})})},h.id)),t.length>4&&jsxRuntimeExports.jsx(Card,{variant:"outline",size:"sm",interactive:!0,className:"cursor-pointer",onClick:()=>e(navigation.toDashboard()),children:jsxRuntimeExports.jsx(CardContent,{className:"p-3 flex items-center justify-center",children:jsxRuntimeExports.jsxs("span",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:["+",t.length-4," más"]})})})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 overflow-y-auto",style:{paddingBottom:"calc(88px + env(safe-area-inset-bottom))"},children:[jsxRuntimeExports.jsxs("div",{className:"p-4 space-y-4 max-w-4xl mx-auto",children:[jsxRuntimeExports.jsx(AnimatePresence,{children:n.map(h=>jsxRuntimeExports.jsx(GardenMessageBubble,{message:h},h.id))}),i&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:jsxRuntimeExports.jsx(TypingIndicator,{})}),o&&n.length>0&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3 max-w-sm",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-red-700 dark:text-red-300 text-sm",children:[jsxRuntimeExports.jsx(CircleAlert,{size:16}),jsxRuntimeExports.jsx("span",{children:o})]}),jsxRuntimeExports.jsxs(Button,{onClick:d,size:"sm",variant:"outline",className:"mt-2 w-full",children:[jsxRuntimeExports.jsx(RefreshCw,{size:14,className:"mr-1"}),"Reintentar"]})]})}),jsxRuntimeExports.jsx("div",{ref:f})]}),!1]}),jsxRuntimeExports.jsx(GardenChatInput,{onSendMessage:c,isTyping:i,suggestedQuestions:l,isLoading:a})]})},Settings=reactExports.lazy(()=>__vitePreload(()=>import("./Settings-BT78ku2m.js"),__vite__mapDeps([0,1,2,3,4,5]))),AuthPage=reactExports.lazy(()=>__vitePreload(()=>import("./Auth-u_jH_Ov6.js"),__vite__mapDeps([6,1,2,4,5,3]))),queryClient$1=new QueryClient({defaultOptions:{queries:{staleTime:PERFORMANCE_CONFIG.QUERY.STALE_TIME.MEDIUM,gcTime:PERFORMANCE_CONFIG.QUERY.GC_TIME.MEDIUM,refetchOnWindowFocus:!1,refetchOnReconnect:!1,retry:PERFORMANCE_CONFIG.QUERY.RETRY.COUNT,retryDelay:e=>Math.min(PERFORMANCE_CONFIG.QUERY.RETRY.DELAY*2**e,3e4)},mutations:{retry:PERFORMANCE_CONFIG.QUERY.RETRY.COUNT,retryDelay:PERFORMANCE_CONFIG.QUERY.RETRY.DELAY}}}),FullScreenLoader=({message:e})=>jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-background text-foreground",children:[jsxRuntimeExports.jsx(Leaf,{className:"w-12 h-12 text-green-500 animate-bounce mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-lg text-muted-foreground",children:e})]}),getBasename=()=>(console.log("[ROUTER] Detecting basename..."),console.log("[ROUTER] Hostname:",window.location.hostname),console.log("[ROUTER] Pathname:",window.location.pathname),window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?(console.log('[ROUTER] Local development detected, using "/"'),"/"):window.location.pathname.startsWith("/plantitas-app")?(console.log('[ROUTER] GitHub Pages detected, using "/plantitas-app/"'),"/plantitas-app/"):(console.log('[ROUTER] Using fallback basename "/"'),"/")),App=()=>{const{session:e,isInitialized:t,initialize:n}=useAuthStore();if(console.log("[APP] App component mounting..."),console.log("[APP] Session:",!!e),console.log("[APP] Initialized:",t),usePerformanceMonitoring(),reactExports.useEffect(()=>{console.log("[APP] useEffect running...");try{const i=initViewportFix();return console.log("[APP] Calling initialize..."),n(),console.log("[APP] Initialize called"),()=>{console.log("[APP] Cleanup running..."),i()}}catch(i){throw logCriticalError("APP_INITIALIZATION",i),i}},[n]),!t)return console.log("[APP] Not initialized, showing loader..."),jsxRuntimeExports.jsx(FullScreenLoader,{message:"Inicializando..."});console.log("[APP] Initialized, rendering main app...");const a=()=>jsxRuntimeExports.jsx(Routes,{children:jsxRuntimeExports.jsxs(Route,{path:"/",element:jsxRuntimeExports.jsx(Layout,{}),children:[jsxRuntimeExports.jsx(Route,{index:!0,element:jsxRuntimeExports.jsx(Dashboard,{})}),jsxRuntimeExports.jsx(Route,{path:"camera",element:jsxRuntimeExports.jsx(CameraPage,{})}),jsxRuntimeExports.jsx(Route,{path:"settings",element:jsxRuntimeExports.jsx(Settings,{})}),jsxRuntimeExports.jsx(Route,{path:"garden-chat",element:jsxRuntimeExports.jsx(GardenChat,{})}),jsxRuntimeExports.jsx(Route,{path:"plant/:plantId",element:jsxRuntimeExports.jsx(PlantDetail,{})}),jsxRuntimeExports.jsx(Route,{path:"plant/:plantId/chat",element:jsxRuntimeExports.jsx(Chat,{})}),jsxRuntimeExports.jsx(Route,{path:"*",element:jsxRuntimeExports.jsx(Navigate,{to:routes.dashboard,replace:!0})})]})});return jsxRuntimeExports.jsx(QueryClientProvider,{client:queryClient$1,children:jsxRuntimeExports.jsx(ToastProvider$1,{children:jsxRuntimeExports.jsx(ToastProvider,{children:jsxRuntimeExports.jsx(ErrorBoundary,{children:jsxRuntimeExports.jsxs(BrowserRouter,{basename:getBasename(),future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:[jsxRuntimeExports.jsx(Toaster,{position:"top-center",richColors:!0}),jsxRuntimeExports.jsx(MobileDebugPanel,{}),jsxRuntimeExports.jsx(reactExports.Suspense,{fallback:jsxRuntimeExports.jsx(FullScreenLoader,{message:"Cargando..."}),children:jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:routes.auth,element:e?jsxRuntimeExports.jsx(Navigate,{to:routes.dashboard,replace:!0}):jsxRuntimeExports.jsx(AuthPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/*",element:e?jsxRuntimeExports.jsx(a,{}):jsxRuntimeExports.jsx(Navigate,{to:routes.auth,replace:!0})})]})})]})})})})})},ThemeContext=reactExports.createContext(void 0),ThemeProvider=({children:e,defaultTheme:t="system",storageKey:n="vite-ui-theme"})=>{const[a,i]=reactExports.useState(()=>localStorage.getItem(n)||t),o=reactExports.useMemo(()=>a==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":a,[a]);reactExports.useEffect(()=>{const l=window.document.documentElement;l.classList.remove("light","dark"),l.classList.add(o),localStorage.setItem(n,a)},[o,a,n]);const s={theme:a,setTheme:i,resolvedTheme:o};return jsxRuntimeExports.jsx(ThemeContext.Provider,{value:s,children:e})};console.log("[MOBILE] 🚨 Main.tsx loading started");console.log("[MOBILE] Location:",window.location.href);console.log("[MOBILE] Pathname:",window.location.pathname);console.log("[MOBILE] User Agent:",navigator.userAgent);try{initAdvancedMobileDebug(),console.log("[MOBILE] Debug system initialized")}catch(e){console.error("[MOBILE] Debug system failed:",e)}try{runCompatibilityTests()}catch(e){logCriticalError("COMPATIBILITY_TESTS",e)}const queryClient=new QueryClient;function PrefetchOnLogin(){const{user:e}=useAuthStore();return React$3.useEffect(()=>{e!=null&&e.id&&queryClient.prefetchQuery({queryKey:["plants",e.id],queryFn:()=>plantService$2.getUserPlantSummaries(e.id),staleTime:1e3*60*5})},[e==null?void 0:e.id]),null}console.log("[MOBILE] Looking for root container...");const rootElement=document.getElementById("root");if(!rootElement)throw logCriticalError("ROOT_CONTAINER","Root container not found"),new Error("Root container not found");console.log("[MOBILE] Root container found, creating React root...");try{const e=client.createRoot(rootElement);console.log("[MOBILE] React root created, rendering App..."),e.render(jsxRuntimeExports.jsx(React$3.StrictMode,{children:jsxRuntimeExports.jsx(ThemeProvider,{children:jsxRuntimeExports.jsxs(QueryClientProvider,{client:queryClient,children:[jsxRuntimeExports.jsx(PrefetchOnLogin,{}),jsxRuntimeExports.jsx(App,{})]})})})),console.log("[MOBILE] App render called successfully")}catch(e){throw logCriticalError("REACT_RENDER",e),e}export{Button as B,useAuthStore as a,usePlantsQuery as b,cn as c,useToast$1 as d,useThemeStore as u};
