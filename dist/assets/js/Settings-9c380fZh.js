var ae=Object.defineProperty;var oe=(t,e,r)=>e in t?ae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var O=(t,e,r)=>oe(t,typeof e!="symbol"?e+"":e,r);import{j as a}from"./query-D9cK7eLy.js";import{r as u,R as ie,b as ce}from"./vendor-ohv-86MT.js";import{u as le,a as de,c as S,b as ue,d as fe,B as M}from"./index-DiCX6V7o.js";import{u as he}from"./router-Lz5I7iQY.js";import{m as _,u as me,A as ge,q as E,X as pe,aa as xe,ab as be,e as ye,M as we,I as V,ac as ve,r as Se,n as je,ad as ke,O as Ce,j as Ne,ae as Ee,a8 as Ie}from"./ui-BaGPRaSD.js";import"./supabase-ChG5PfJU.js";const I=(t,e)=>e.some(r=>t instanceof r);let A,T;function De(){return A||(A=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Pe(){return T||(T=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const D=new WeakMap,C=new WeakMap,j=new WeakMap;function Be(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",i)},o=()=>{r(w(t.result)),s()},i=()=>{n(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",i)});return j.set(e,t),e}function Re(t){if(D.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",i),t.removeEventListener("abort",i)},o=()=>{r(),s()},i=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",i),t.addEventListener("abort",i)});D.set(t,e)}let P={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return D.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return w(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function U(t){P=t(P)}function Oe(t){return Pe().includes(t)?function(...e){return t.apply(B(this),e),w(this.request)}:function(...e){return w(t.apply(B(this),e))}}function Me(t){return typeof t=="function"?Oe(t):(t instanceof IDBTransaction&&Re(t),I(t,De())?new Proxy(t,P):t)}function w(t){if(t instanceof IDBRequest)return Be(t);if(C.has(t))return C.get(t);const e=Me(t);return e!==t&&(C.set(t,e),j.set(e,t)),e}const B=t=>j.get(t);function Ae(t,e,{blocked:r,upgrade:n,blocking:s,terminated:o}={}){const i=indexedDB.open(t,e),c=w(i);return n&&i.addEventListener("upgradeneeded",d=>{n(w(i.result),d.oldVersion,d.newVersion,w(i.transaction),d)}),r&&i.addEventListener("blocked",d=>r(d.oldVersion,d.newVersion,d)),c.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),c}const Te=["get","getKey","getAll","getAllKeys","count"],Le=["put","add","delete","clear"],N=new Map;function L(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(N.get(e))return N.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=Le.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||Te.includes(r)))return;const o=async function(i,...c){const d=this.transaction(i,s?"readwrite":"readonly");let f=d.store;return n&&(f=f.index(c.shift())),(await Promise.all([f[r](...c),s&&d.done]))[0]};return N.set(e,o),o}U(t=>({...t,get:(e,r,n)=>L(e,r)||t.get(e,r,n),has:(e,r)=>!!L(e,r)||t.has(e,r)}));const $e=["continue","continuePrimaryKey","advance"],$={},R=new WeakMap,H=new WeakMap,ze={get(t,e){if(!$e.includes(e))return t[e];let r=$[e];return r||(r=$[e]=function(...n){R.set(this,H.get(this)[e](...n))}),r}};async function*Fe(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;e=e;const r=new Proxy(e,ze);for(H.set(r,e),j.set(r,B(e));e;)yield r,e=await(R.get(r)||e.continue()),R.delete(r)}function z(t,e){return e===Symbol.asyncIterator&&I(t,[IDBIndex,IDBObjectStore,IDBCursor])||e==="iterate"&&I(t,[IDBIndex,IDBObjectStore])}U(t=>({...t,get(e,r,n){return z(e,r)?Fe:t.get(e,r,n)},has(e,r){return z(e,r)||t.has(e,r)}}));class We{constructor(){O(this,"db",null)}async init(){return this.db?this.db:(this.db=await Ae("PlantCareDB",1,{upgrade(e){const r=e.createObjectStore("plants",{keyPath:"id"});r.createIndex("by-health","healthScore"),r.createIndex("by-date","dateAdded"),e.createObjectStore("images",{keyPath:"id"}),e.createObjectStore("settings",{keyPath:"key"})}}),this.db)}async savePlant(e){await(await this.init()).put("plants",e);const n=await this.getAllPlants();localStorage.setItem("plants",JSON.stringify(n))}async getPlant(e){return await(await this.init()).get("plants",e)}async getAllPlants(){return(await(await this.init()).getAll("plants")).map(n=>({...n,dateAdded:new Date(n.dateAdded),lastWatered:n.lastWatered?new Date(n.lastWatered):void 0,lastFertilized:n.lastFertilized?new Date(n.lastFertilized):void 0,images:n.images.map(s=>({...s,timestamp:new Date(s.timestamp)})),chatHistory:n.chatHistory.map(s=>({...s,timestamp:new Date(s.timestamp)})),notifications:n.notifications.map(s=>({...s,scheduledFor:new Date(s.scheduledFor)}))}))}async deletePlant(e){await(await this.init()).delete("plants",e);const n=await this.getAllPlants();localStorage.setItem("plants",JSON.stringify(n))}async saveImageBlob(e,r,n){await(await this.init()).put("images",{id:e,plantId:r,blob:n,timestamp:new Date})}async getImageBlob(e){return(await(await this.init()).get("images",e))?.blob}async saveSetting(e,r){await(await this.init()).put("settings",{key:e,value:r})}async getSetting(e){return(await(await this.init()).get("settings",e))?.value}async exportData(){const e=await this.getAllPlants(),r={theme:await this.getSetting("theme"),notifications:await this.getSetting("notifications")};return JSON.stringify({plants:e,settings:r,exportDate:new Date().toISOString(),version:"1.0.0"},null,2)}async importData(e){try{const r=JSON.parse(e);if(r.plants)for(const n of r.plants)await this.savePlant(n);if(r.settings)for(const[n,s]of Object.entries(r.settings))s!==void 0&&await this.saveSetting(n,s)}catch{throw new Error("Invalid data format")}}async clearAllData(){const e=await this.init();await e.clear("plants"),await e.clear("images"),await e.clear("settings"),localStorage.removeItem("plants")}}const _e=new We,Ve=()=>{const{isDark:t,toggleTheme:e}=le(),{signOut:r,profile:n}=de(),s=he(),[o,i]=u.useState(!1),c=async()=>{if(window.confirm("¿Estás seguro de que quieres cerrar sesión?"))try{await r(),s("/auth")}catch(l){console.error("Error signing out:",l)}},d=()=>{i(!0)},f=async()=>{if(window.confirm("¿Estás seguro de que quieres eliminar todos tus datos? Esta acción es irreversible."))try{await _e.clearAllData(),await c()}catch(l){console.error("Error clearing data:",l)}};return{settingsSections:u.useMemo(()=>[{title:"Cuenta",items:[{id:"signout",icon:"LogOut",label:"Cerrar sesión",type:"button",onClick:c}]},{title:"Preferencias",items:[{id:"theme",icon:t?"Sun":"Moon",label:"Modo Oscuro",type:"toggle",toggleState:t,onToggleChange:e}]},{title:"Datos",items:[{id:"export",icon:"Download",label:"Exportar mis datos",type:"button",onClick:d,disabled:!n||!1},{id:"delete",icon:"Trash2",label:"Eliminar mis datos",type:"button",onClick:f,disabled:!n||!1}]},{title:"Soporte",items:[]}],[t,n,c,e]),isExportModalOpen:o,setIsExportModalOpen:i}},Ue=({title:t,children:e,delay:r=0})=>a.jsxs(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:r*.1},className:"space-y-3",children:[a.jsx("h2",{className:"text-lg font-bold text-foreground px-4",children:t}),a.jsx("div",{className:"bg-muted/50 rounded-2xl overflow-hidden",children:e})]});function He(t,e,{checkForDefaultPrevented:r=!0}={}){return function(s){if(t?.(s),r===!1||!s.defaultPrevented)return e?.(s)}}function F(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function q(...t){return e=>{let r=!1;const n=t.map(s=>{const o=F(s,e);return!r&&typeof o=="function"&&(r=!0),o});if(r)return()=>{for(let s=0;s<n.length;s++){const o=n[s];typeof o=="function"?o():F(t[s],null)}}}}function J(...t){return u.useCallback(q(...t),t)}function qe(t,e=[]){let r=[];function n(o,i){const c=u.createContext(i),d=r.length;r=[...r,i];const f=l=>{const{scope:h,children:x,...m}=l,b=h?.[t]?.[d]||c,p=u.useMemo(()=>m,Object.values(m));return a.jsx(b.Provider,{value:p,children:x})};f.displayName=o+"Provider";function g(l,h){const x=h?.[t]?.[d]||c,m=u.useContext(x);if(m)return m;if(i!==void 0)return i;throw new Error(`\`${l}\` must be used within \`${o}\``)}return[f,g]}const s=()=>{const o=r.map(i=>u.createContext(i));return function(c){const d=c?.[t]||o;return u.useMemo(()=>({[`__scope${t}`]:{...c,[t]:d}}),[c,d])}};return s.scopeName=t,[n,Je(s,...e)]}function Je(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const i=n.reduce((c,{useScope:d,scopeName:f})=>{const l=d(o)[`__scope${f}`];return{...c,...l}},{});return u.useMemo(()=>({[`__scope${e.scopeName}`]:i}),[i])}};return r.scopeName=e.scopeName,r}var K=globalThis?.document?u.useLayoutEffect:()=>{},Ke=ie[" useInsertionEffect ".trim().toString()]||K;function Ge({prop:t,defaultProp:e,onChange:r=()=>{},caller:n}){const[s,o,i]=Xe({defaultProp:e,onChange:r}),c=t!==void 0,d=c?t:s;{const g=u.useRef(t!==void 0);u.useEffect(()=>{const l=g.current;l!==c&&console.warn(`${n} is changing from ${l?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),g.current=c},[c,n])}const f=u.useCallback(g=>{if(c){const l=Qe(g)?g(t):g;l!==t&&i.current?.(l)}else o(g)},[c,t,o,i]);return[d,f]}function Xe({defaultProp:t,onChange:e}){const[r,n]=u.useState(t),s=u.useRef(r),o=u.useRef(e);return Ke(()=>{o.current=e},[e]),u.useEffect(()=>{s.current!==r&&(o.current?.(r),s.current=r)},[r,s]),[r,n,o]}function Qe(t){return typeof t=="function"}function Ze(t){const e=u.useRef({value:t,previous:t});return u.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}function Ye(t){const[e,r]=u.useState(void 0);return K(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let i,c;if("borderBoxSize"in o){const d=o.borderBoxSize,f=Array.isArray(d)?d[0]:d;i=f.inlineSize,c=f.blockSize}else i=t.offsetWidth,c=t.offsetHeight;r({width:i,height:c})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else r(void 0)},[t]),e}function et(t){const e=tt(t),r=u.forwardRef((n,s)=>{const{children:o,...i}=n,c=u.Children.toArray(o),d=c.find(st);if(d){const f=d.props.children,g=c.map(l=>l===d?u.Children.count(f)>1?u.Children.only(null):u.isValidElement(f)?f.props.children:null:l);return a.jsx(e,{...i,ref:s,children:u.isValidElement(f)?u.cloneElement(f,void 0,g):null})}return a.jsx(e,{...i,ref:s,children:o})});return r.displayName=`${t}.Slot`,r}function tt(t){const e=u.forwardRef((r,n)=>{const{children:s,...o}=r;if(u.isValidElement(s)){const i=at(s),c=nt(o,s.props);return s.type!==u.Fragment&&(c.ref=n?q(n,i):i),u.cloneElement(s,c)}return u.Children.count(s)>1?u.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var rt=Symbol("radix.slottable");function st(t){return u.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===rt}function nt(t,e){const r={...e};for(const n in e){const s=t[n],o=e[n];/^on[A-Z]/.test(n)?s&&o?r[n]=(...c)=>{const d=o(...c);return s(...c),d}:s&&(r[n]=s):n==="style"?r[n]={...s,...o}:n==="className"&&(r[n]=[s,o].filter(Boolean).join(" "))}return{...t,...r}}function at(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var ot=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],G=ot.reduce((t,e)=>{const r=et(`Primitive.${e}`),n=u.forwardRef((s,o)=>{const{asChild:i,...c}=s,d=i?r:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(d,{...c,ref:o})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{}),k="Switch",[it,St]=qe(k),[ct,lt]=it(k),X=u.forwardRef((t,e)=>{const{__scopeSwitch:r,name:n,checked:s,defaultChecked:o,required:i,disabled:c,value:d="on",onCheckedChange:f,form:g,...l}=t,[h,x]=u.useState(null),m=J(e,v=>x(v)),b=u.useRef(!1),p=h?g||!!h.closest("form"):!0,[y,se]=Ge({prop:s,defaultProp:o??!1,onChange:f,caller:k});return a.jsxs(ct,{scope:r,checked:y,disabled:c,children:[a.jsx(G.button,{type:"button",role:"switch","aria-checked":y,"aria-required":i,"data-state":ee(y),"data-disabled":c?"":void 0,disabled:c,value:d,...l,ref:m,onClick:He(t.onClick,v=>{se(ne=>!ne),p&&(b.current=v.isPropagationStopped(),b.current||v.stopPropagation())})}),p&&a.jsx(Y,{control:h,bubbles:!b.current,name:n,value:d,checked:y,required:i,disabled:c,form:g,style:{transform:"translateX(-100%)"}})]})});X.displayName=k;var Q="SwitchThumb",Z=u.forwardRef((t,e)=>{const{__scopeSwitch:r,...n}=t,s=lt(Q,r);return a.jsx(G.span,{"data-state":ee(s.checked),"data-disabled":s.disabled?"":void 0,...n,ref:e})});Z.displayName=Q;var dt="SwitchBubbleInput",Y=u.forwardRef(({__scopeSwitch:t,control:e,checked:r,bubbles:n=!0,...s},o)=>{const i=u.useRef(null),c=J(i,o),d=Ze(r),f=Ye(e);return u.useEffect(()=>{const g=i.current;if(!g)return;const l=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(l,"checked").set;if(d!==r&&x){const m=new Event("click",{bubbles:n});x.call(g,r),g.dispatchEvent(m)}},[d,r,n]),a.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:c,style:{...s.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Y.displayName=dt;function ee(t){return t?"checked":"unchecked"}var te=X,ut=Z;const re=u.forwardRef(({className:t,...e},r)=>a.jsx(te,{className:S("peer inline-flex h-7 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:r,children:a.jsx(ut,{className:S("pointer-events-none block h-6 w-6 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));re.displayName=te.displayName;const W=({icon:t,label:e,value:r,onClick:n,isLast:s=!1,type:o="button",disabled:i=!1,toggleState:c=!1,onToggleChange:d})=>{const f=ce.useId(),g=a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-background",children:a.jsx(t,{size:18,className:"text-muted-foreground"})}),a.jsx("span",{className:"font-medium text-foreground",children:e})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[o==="button"&&a.jsxs(a.Fragment,{children:[r&&a.jsx("span",{className:"text-sm text-muted-foreground",children:r}),a.jsx(me,{size:16,className:"text-muted-foreground/50"})]}),o==="toggle"&&a.jsx(re,{id:f,checked:c,onCheckedChange:d,"aria-label":e})]})]}),l=S("flex w-full items-center justify-between p-3 text-left",!s&&"border-b border-background",n&&"transition-colors hover:bg-background/50");return o==="button"?a.jsx("button",{onClick:n,className:l,disabled:i,children:g}):a.jsx("label",{htmlFor:f,className:S(l,"cursor-pointer"),children:g})},ft=()=>{const[t,e]=u.useState(!1),{data:r=[]}=ue(),n=l=>l.toISOString().split("T")[0],s=l=>{if(l==null)return"";const h=String(l);return h.includes(",")||h.includes('"')||h.includes(`
`)?`"${h.replace(/"/g,'""')}"`:h},o=async l=>{e(!0);try{const h={exportDate:new Date().toISOString(),plantCount:r.length,plants:r.map(m=>({id:m.id,name:m.name,nickname:m.nickname,species:m.species,location:m.location,plantEnvironment:m.plantEnvironment,lightRequirements:m.lightRequirements,healthScore:m.healthScore,lastWatered:m.lastWatered?.toISOString(),...l.includeImages&&{profileImageUrl:m.profileImageUrl},...l.includeChats&&{chatHistory:[]}})),metadata:{version:"1.0.0",source:"Plant Care Companion"}},x=new Blob([JSON.stringify(h,null,2)],{type:"application/json"});c(x,`plantas-backup-${n(new Date)}.json`)}catch(h){throw console.error("Error exporting to JSON:",h),new Error("Failed to export data as JSON")}finally{e(!1)}},i=async l=>{e(!0);try{const h=["ID","Nombre","Apodo","Especie","Ubicación","Ambiente","Luz Requerida","Puntuación Salud","Último Riego"];l.includeImages&&h.push("Imagen Principal");const x=[h.join(",")];r.forEach(p=>{const y=[s(p.id),s(p.name),s(p.nickname||""),s(p.species),s(p.location),s(p.plantEnvironment||""),s(p.lightRequirements||""),s(p.healthScore||""),s(p.lastWatered?n(p.lastWatered):"")];l.includeImages&&y.push(s(p.profileImageUrl||"")),x.push(y.join(","))});const m=x.join(`
`),b=new Blob([m],{type:"text/csv;charset=utf-8;"});c(b,`plantas-${n(new Date)}.csv`)}catch(h){throw console.error("Error exporting to CSV:",h),new Error("Failed to export data as CSV")}finally{e(!1)}},c=(l,h)=>{const x=URL.createObjectURL(l),m=document.createElement("a");m.href=x,m.download=h,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(x)};return{exportData:async l=>{if(r.length===0)throw new Error("No hay plantas para exportar");switch(l.format){case"json":return o(l);case"csv":return i(l);default:throw new Error("Formato de exportación no soportado")}},isExporting:t,getExportSize:()=>{const l=r.length*1024,h=l/(1024*1024);return{plantCount:r.length,estimatedSize:h>1?`${h.toFixed(1)} MB`:`${Math.round(l/1024)} KB`}},createAutoBackup:async()=>{try{const l=localStorage.getItem("last-auto-backup"),h=new Date().getTime(),x=7*24*60*60*1e3;(!l||h-parseInt(l)>x)&&(await o({format:"json",includeImages:!1,includeChats:!1}),localStorage.setItem("last-auto-backup",h.toString()))}catch(l){console.warn("Auto-backup failed:",l)}},availableFormats:["json","csv"]}},ht=({isOpen:t,onClose:e})=>{const[r,n]=u.useState("json"),[s,o]=u.useState(!0),[i,c]=u.useState(!1),{exportData:d,isExporting:f,getExportSize:g}=ft(),{showSuccess:l,showError:h}=fe(),{plantCount:x,estimatedSize:m}=g(),b=async()=>{try{await d({format:r,includeImages:s,includeChats:i}),l("Exportación completada",`Se descargaron los datos de ${x} plantas en formato ${r.toUpperCase()}.`),e()}catch(p){h("Error en la exportación",p instanceof Error?p.message:"No se pudo completar la exportación.")}};return t?a.jsx(ge,{children:a.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:a.jsxs(_.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},onClick:p=>p.stopPropagation(),className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl max-w-lg w-full max-h-[90vh] overflow-hidden",children:[a.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center",children:a.jsx(E,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Exportar Datos"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Descarga una copia de tus datos de plantas"})]})]}),a.jsx("button",{onClick:e,disabled:f,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors p-1","aria-label":"Cerrar modal",children:a.jsx(pe,{className:"w-5 h-5"})})]})}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Plantas a exportar:"}),a.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:x})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm mt-2",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Tamaño estimado:"}),a.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:m})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Formato de archivo"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsx("button",{onClick:()=>n("json"),disabled:f,className:`
                    p-4 rounded-lg border-2 transition-all text-left
                    ${r==="json"?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}
                  `,children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(xe,{className:`w-5 h-5 ${r==="json"?"text-blue-600":"text-gray-500"}`}),a.jsxs("div",{children:[a.jsx("div",{className:`font-medium ${r==="json"?"text-blue-900 dark:text-blue-100":"text-gray-900 dark:text-gray-100"}`,children:"JSON"}),a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Completo, reimportable"})]})]})}),a.jsx("button",{onClick:()=>n("csv"),disabled:f,className:`
                    p-4 rounded-lg border-2 transition-all text-left
                    ${r==="csv"?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}
                  `,children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(be,{className:`w-5 h-5 ${r==="csv"?"text-blue-600":"text-gray-500"}`}),a.jsxs("div",{children:[a.jsx("div",{className:`font-medium ${r==="csv"?"text-blue-900 dark:text-blue-100":"text-gray-900 dark:text-gray-100"}`,children:"CSV"}),a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Para Excel/Sheets"})]})]})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Incluir en la exportación"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:s,onChange:p=>o(p.target.checked),disabled:f,className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),a.jsx(ye,{className:"w-4 h-4 text-gray-500"}),a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Metadatos de imágenes"})]}),a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer opacity-50",children:[a.jsx("input",{type:"checkbox",checked:i,onChange:p=>c(p.target.checked),disabled:!0,className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),a.jsx(we,{className:"w-4 h-4 text-gray-500"}),a.jsx("span",{className:"text-sm text-gray-500",children:"Historial de chat (próximamente)"})]})]})]}),a.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:a.jsxs("div",{className:"flex gap-3",children:[a.jsx(V,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"text-sm",children:[a.jsx("p",{className:"text-blue-800 dark:text-blue-200 font-medium mb-1",children:"Sobre la exportación"}),a.jsx("p",{className:"text-blue-700 dark:text-blue-300 leading-relaxed",children:"Los datos exportados incluyen toda la información de tus plantas: nombres, especies, cuidados, fechas de riego y ubicaciones. Las imágenes se incluyen como referencias URL."})]})]})})]}),a.jsxs("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex gap-3 justify-end",children:[a.jsx(M,{variant:"outline",onClick:e,disabled:f,children:"Cancelar"}),a.jsxs(M,{onClick:b,disabled:f||x===0,loading:f,className:"flex items-center gap-2",children:[a.jsx(E,{className:"w-4 h-4"}),f?"Exportando...":"Exportar Datos"]})]})]})})}):null},mt={User:Ie,LogOut:Ee,Sun:Ne,Moon:Ce,Bell:ke,Download:E,Trash2:je,HelpCircle:Se,Shield:ve,Info:V},jt=()=>{const{settingsSections:t,isExportModalOpen:e,setIsExportModalOpen:r}=Ve();return a.jsxs("div",{className:"p-4 space-y-6",children:[a.jsxs("header",{children:[a.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Configuración"}),a.jsx("p",{className:"text-muted-foreground",children:"Gestiona tu cuenta y preferencias de la app."})]}),t.map((n,s)=>a.jsx(Ue,{title:n.title,delay:s,children:n.items.map((o,i)=>{const c=mt[o.icon],d=i===n.items.length-1;return o.type==="toggle"?a.jsx(W,{icon:c,label:o.label,isLast:d,type:"toggle",toggleState:"toggleState"in o?o.toggleState:!1,onToggleChange:"onToggleChange"in o?o.onToggleChange:void 0},o.id):a.jsx(W,{icon:c,label:o.label,value:"value"in o&&typeof o.value=="string"?o.value:void 0,onClick:"onClick"in o?o.onClick:void 0,isLast:d,type:"button",disabled:"disabled"in o?o.disabled:!1},o.id)})},n.title)),a.jsx(ht,{isOpen:e,onClose:()=>r(!1)})]})};export{jt as default};
