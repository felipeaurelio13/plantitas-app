import{c as r,j as e,a as S,r as v,m as d,M as P,T as y,b as q,d as x}from"./index-CRH81Qhq.js";import{A as I,u as A}from"./usePlantDetail-6tnjXNmv.js";import{C as D,c as E,L as k,D as T,W as L,S as p}from"./skeleton-Dg9MFGaK.js";import{u as V}from"./usePlantMutations-eoVsyAqo.js";import{B as o,A as H}from"./Button-CSly8ce6.js";import{L as F}from"./index-ULWBGHfb.js";import{T as B}from"./trash-2-DtRZNGPx.js";import{S as R}from"./sun-C-cm-VOR.js";import{S as w}from"./sparkles-zAVM6lcE.js";import{C as O}from"./circle-alert-lGm32jjY.js";/**
 * @license lucide-react v0.411.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=r("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.411.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=r("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.411.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=r("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.411.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=r("Flower",[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"M12 16.5A4.5 4.5 0 1 1 7.5 12 4.5 4.5 0 1 1 12 7.5a4.5 4.5 0 1 1 4.5 4.5 4.5 4.5 0 1 1-4.5 4.5",key:"14wa3c"}],["path",{d:"M12 7.5V9",key:"1oy5b0"}],["path",{d:"M7.5 12H9",key:"eltsq1"}],["path",{d:"M16.5 12H15",key:"vk5kw4"}],["path",{d:"M12 16.5V15",key:"k7eayi"}],["path",{d:"m8 8 1.88 1.88",key:"nxy4qf"}],["path",{d:"M14.12 9.88 16 8",key:"1lst6k"}],["path",{d:"m8 16 1.88-1.88",key:"h2eex1"}],["path",{d:"M14.12 14.12 16 16",key:"uqkrx3"}]]);/**
 * @license lucide-react v0.411.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=r("HeartPulse",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"1uw2ng"}]]);/**
 * @license lucide-react v0.411.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=r("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.411.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=r("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.411.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=r("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.411.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=r("Sprout",[["path",{d:"M7 20h10",key:"e6iznv"}],["path",{d:"M10 20c5.5-2.5.8-6.4 3-10",key:"161w41"}],["path",{d:"M9.5 9.4c1.1.8 1.8 2.2 2.3 3.7-2 .4-3.5.4-4.8-.3-1.2-.6-2.3-1.9-3-4.2 2.8-.5 4.4 0 5.5.8z",key:"9gtqwd"}],["path",{d:"M14.1 6a7 7 0 0 0-1.1 4c1.9-.1 3.3-.6 4.3-1.4 1-1 1.6-2.3 1.7-4.6-2.7.1-4 1-4.9 2z",key:"bkxnd2"}]]);/**
 * @license lucide-react v0.411.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=r("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.411.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b=r("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.411.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=r("Syringe",[["path",{d:"m18 2 4 4",key:"22kx64"}],["path",{d:"m17 7 3-3",key:"1w1zoj"}],["path",{d:"M19 9 8.7 19.3c-1 1-2.5 1-3.4 0l-.6-.6c-1-1-1-2.5 0-3.4L15 5",key:"1exhtz"}],["path",{d:"m9 11 4 4",key:"rovt3i"}],["path",{d:"m5 19-3 3",key:"59f2uf"}],["path",{d:"m14 4 6 6",key:"yqp9t2"}]]);/**
 * @license lucide-react v0.411.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=r("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]);function se({images:s}){if(!s||s.length===0)return e.jsx(D,{className:"mt-4",children:e.jsx(E,{className:"pt-6",children:e.jsx("p",{className:"text-center text-muted-foreground",children:"No hay imágenes para esta planta todavía."})})});const a=[...s].sort((t,l)=>new Date(l.timestamp).getTime()-new Date(t.timestamp).getTime());return e.jsxs("div",{className:"mt-4",children:[e.jsx("h2",{className:"text-xl font-bold tracking-tight mb-2",children:"Galería de Imágenes"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:a.map(t=>e.jsxs("div",{className:"aspect-square relative rounded-lg overflow-hidden",children:[e.jsx(k,{src:t.url,alt:`Imagen de planta del ${new Date(t.timestamp).toLocaleDateString()}`,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent p-2",children:e.jsx("p",{className:"text-white text-xs font-semibold",children:new Date(t.timestamp).toLocaleDateString()})})]},t.id))})]})}const ae=({plant:s,onShare:a})=>{var j,f;const t=S(),[l,i]=v.useState(!1),{deletePlant:m,isDeletingPlant:c}=V(),g=((j=s.images)==null?void 0:j.find(u=>u.isProfileImage))||((f=s.images)==null?void 0:f[0]),C=()=>{window.confirm("¿Estás seguro de que quieres eliminar esta planta? Esta acción es irreversible.")&&m(s.id,{onSuccess:()=>{t("/")}})},M=()=>{alert("La funcionalidad de edición aún no está implementada."),i(!1)},z={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},h={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}};return e.jsxs(d.div,{className:"relative h-80 w-full",variants:z,initial:"hidden",animate:"visible",children:[e.jsxs("div",{className:"absolute inset-0",children:[g?e.jsx(k,{src:g.url,alt:s.name,className:"h-full w-full object-cover"}):e.jsx("div",{className:"h-full w-full bg-gradient-to-br from-green-400 to-green-600"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background/80 via-background/20 to-transparent"})]}),e.jsx("div",{className:"absolute top-0 left-0 right-0 p-4 pt-safe-top",children:e.jsxs(d.div,{className:"flex items-center justify-between",variants:h,children:[e.jsx(o,{"aria-label":"Volver atrás",variant:"ghost",size:"icon",onClick:()=>t("/"),className:"bg-background/50 text-foreground/80 backdrop-blur rounded-full",children:e.jsx(I,{size:20})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{"aria-label":"Compartir",variant:"ghost",size:"icon",onClick:a,className:"bg-background/50 text-foreground/80 backdrop-blur rounded-full",children:e.jsx(Q,{size:20})}),e.jsxs("div",{className:"relative",children:[e.jsx(o,{"aria-label":"Más opciones",variant:"ghost",size:"icon",onClick:()=>i(u=>!u),className:"bg-background/50 text-foreground/80 backdrop-blur rounded-full",children:e.jsx(G,{size:20})}),e.jsx(H,{children:l&&e.jsx(d.div,{initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},transition:{duration:.1},className:"absolute right-0 mt-2 w-48 origin-top-right rounded-md bg-background shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-10",children:e.jsxs("div",{className:"py-1",children:[e.jsxs("button",{onClick:M,className:"flex w-full items-center px-4 py-3 text-sm text-foreground hover:bg-muted",children:[e.jsx(Y,{className:"mr-3 h-5 w-5"}),e.jsx("span",{children:"Editar"})]}),e.jsxs("button",{onClick:C,disabled:c,className:"flex w-full items-center px-4 py-3 text-sm text-destructive hover:bg-destructive/10",children:[c?e.jsx(F,{className:"mr-3 h-5 w-5 animate-spin"}):e.jsx(B,{className:"mr-3 h-5 w-5"}),e.jsx("span",{children:c?"Eliminando...":"Eliminar"})]})]})})})]})]})]})}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4 pb-safe-bottom",children:[e.jsx(d.h1,{className:"text-2xl font-bold text-foreground",variants:h,children:s.nickname||s.name}),e.jsxs(d.p,{className:"text-sm text-foreground/70",variants:h,children:[s.species," • ",s.location]})]})]})},n=({icon:s,label:a,value:t})=>e.jsxs("div",{className:"flex items-start space-x-4 p-4 bg-muted/50 rounded-lg",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 flex items-center justify-center text-primary",children:s}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:a}),e.jsx("p",{className:"text-lg font-semibold text-foreground capitalize",children:t})]})]}),te=({plant:s})=>{const{careProfile:a,personality:t}=s;return a?e.jsxs("div",{className:"bg-background p-6 rounded-lg shadow-lg w-full space-y-8",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-2xl font-bold text-foreground mb-4 flex items-center",children:[e.jsx(W,{className:"mr-3 text-primary"})," Perfil de Cuidados"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx(n,{icon:e.jsx(T,{size:24}),label:"Riego",value:`Cada ${a.wateringFrequency} días`}),e.jsx(n,{icon:e.jsx(R,{size:24}),label:"Luz Solar",value:a.sunlightRequirement}),e.jsx(n,{icon:e.jsx(L,{size:24}),label:"Humedad",value:a.humidityPreference}),e.jsx(n,{icon:e.jsx(ee,{size:24}),label:"Temperatura Ideal",value:`${a.temperatureRange.min}°C - ${a.temperatureRange.max}°C`}),e.jsx(n,{icon:e.jsx(w,{size:24}),label:"Fertilización",value:`Cada ${a.fertilizingFrequency} días`}),e.jsx(n,{icon:e.jsx(X,{size:24}),label:"Tipo de Suelo",value:a.soilType})]}),a.specialCare&&a.specialCare.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"font-semibold text-lg mb-2",children:"Cuidados Especiales:"}),e.jsx("ul",{className:"list-disc list-inside space-y-1 text-muted-foreground",children:a.specialCare.map((l,i)=>e.jsx("li",{children:l},i))})]})]}),t&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-2xl font-bold text-foreground mb-4 flex items-center",children:[e.jsx(Z,{className:"mr-3 text-primary"})," Personalidad de la Planta"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx(n,{icon:e.jsx(P,{size:24}),label:"Estilo de Comunicación",value:t.communicationStyle}),e.jsxs("div",{className:"md:col-span-2 lg:col-span-3 bg-muted/50 p-4 rounded-lg",children:[e.jsxs("h4",{className:"font-semibold text-lg mb-2 flex items-center",children:[e.jsx(K,{className:"mr-2"})," Frases Típicas"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.catchphrases.map((l,i)=>e.jsxs("span",{className:"bg-primary/10 text-primary px-3 py-1 rounded-full text-sm",children:['"',l,'"']},i))})]})]})]})]}):e.jsx("div",{className:"bg-background p-6 rounded-lg shadow-lg w-full text-center",children:e.jsx("p",{className:"text-muted-foreground",children:"No hay perfil de cuidados disponible para esta planta."})})},le=({species:s,description:a,funFacts:t})=>e.jsxs("div",{className:"bg-background p-6 rounded-lg shadow-lg w-full",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"text-2xl font-bold text-foreground mb-4 flex items-center",children:[e.jsx($,{className:"mr-3 text-primary"}),"Acerca de ",s]}),e.jsx("p",{className:"text-muted-foreground whitespace-pre-wrap leading-relaxed",children:a||"No hay una descripción disponible para esta planta."})]}),t&&t.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-2xl font-bold text-foreground mb-4 flex items-center",children:[e.jsx(b,{className:"mr-3 text-yellow-500"}),"Datos Curiosos"]}),e.jsx("ul",{className:"space-y-3",children:t.map((l,i)=>e.jsxs("li",{className:"flex items-start",children:[e.jsx(b,{size:16,className:"text-yellow-500 mt-1 mr-3 flex-shrink-0"}),e.jsx("p",{className:"text-muted-foreground",children:l})]},i))})]})]}),re=s=>{switch(s){case"pest":return e.jsx(y,{className:"text-red-500"});case"disease":return e.jsx(_,{className:"text-orange-500"});case"overwatering":case"underwatering":case"light":case"nutrient":return e.jsx(y,{className:"text-yellow-500"});default:return e.jsx(w,{className:"text-blue-500"})}},ie=({analysis:s})=>{if(!s)return null;const a=s.issues&&s.issues.length>0;return e.jsxs("div",{className:"bg-background p-6 rounded-lg shadow-lg w-full",children:[e.jsxs("h3",{className:"text-2xl font-bold text-foreground mb-4 flex items-center",children:[e.jsx(J,{className:"mr-3 text-primary"}),"Análisis de Salud Inicial"]}),a?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-lg mb-3",children:"Problemas Detectados"}),e.jsx("ul",{className:"space-y-4",children:s.issues.map((t,l)=>e.jsxs("li",{className:"flex items-start p-4 bg-muted/50 rounded-lg",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 flex items-center justify-center",children:re(t.type)}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"font-semibold capitalize",children:t.type}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.description})]})]},l))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-lg mb-3",children:"Tratamientos Sugeridos"}),e.jsx("ul",{className:"space-y-3 list-disc list-inside text-muted-foreground",children:s.issues.map((t,l)=>e.jsx("li",{children:t.treatment},l))})]})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center text-center p-6 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[e.jsx(U,{className:"w-12 h-12 text-green-500 mb-3"}),e.jsx("h4",{className:"font-semibold text-lg text-green-700 dark:text-green-300",children:"¡Todo en orden!"}),e.jsx("p",{className:"text-muted-foreground",children:"El análisis inicial no detectó problemas de salud significativos."})]}),s.recommendations&&s.recommendations.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"font-semibold text-lg mb-3",children:"Recomendaciones Adicionales"}),e.jsx("ul",{className:"space-y-3 list-disc list-inside text-muted-foreground",children:s.recommendations.map((t,l)=>e.jsx("li",{children:t},l))})]})]})},N=()=>e.jsx(x,{children:e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx(p,{className:"h-48 w-full"}),e.jsx(p,{className:"h-10 w-full"}),e.jsx(p,{className:"h-64 w-full"})]})}),je=()=>{var m,c;const{plantId:s}=q(),{plant:a,loading:t,error:l}=A(s);if(t)return e.jsx(N,{});if(l)return e.jsx(x,{children:e.jsxs("main",{className:"flex flex-1 flex-col items-center justify-center p-4 text-center h-screen",children:[e.jsx(O,{className:"w-12 h-12 text-destructive mb-4"}),e.jsx("h1",{className:"text-xl font-bold text-destructive",children:"Ocurrió un Error"}),e.jsx("p",{className:"text-muted-foreground",children:l}),e.jsx(o,{onClick:()=>window.location.reload(),className:"mt-4",children:"Intentar de nuevo"})]})});if(!a)return e.jsx(x,{children:e.jsxs("main",{className:"flex flex-1 flex-col items-center justify-center p-4 text-center h-screen",children:[e.jsx("h1",{className:"text-xl font-bold",children:"Planta no encontrada"}),e.jsx("p",{className:"text-muted-foreground",children:"No se pudo encontrar la información de la planta."}),e.jsx(o,{onClick:()=>window.location.assign("/"),className:"mt-4",children:"Volver al inicio"})]})});const i=(c=(m=a.images)==null?void 0:m[0])==null?void 0:c.healthAnalysis;return e.jsx(x,{children:e.jsxs(v.Suspense,{fallback:e.jsx(N,{}),children:[e.jsx(ae,{plant:a,onShare:()=>alert("Compartir funcionalidad no implementada.")}),e.jsxs("main",{className:"p-4 space-y-6",children:[e.jsx(le,{species:a.species,description:a.description,funFacts:a.funFacts}),e.jsx(ie,{analysis:i}),e.jsx(te,{plant:a}),e.jsx(se,{images:a.images})]})]})})};export{je as default};
