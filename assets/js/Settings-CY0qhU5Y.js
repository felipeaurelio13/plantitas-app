var ae=Object.defineProperty;var oe=(t,e,n)=>e in t?ae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var O=(t,e,n)=>oe(t,typeof e!="symbol"?e+"":e,n);import{j as a}from"./query-D9cK7eLy.js";import{r as u,R as ie,b as ce}from"./vendor-ohv-86MT.js";import{u as le,a as de,g as ue,c as S,b as fe,B as M}from"./index-CXrUxsAU.js";import{u as he}from"./router-Lz5I7iQY.js";import{m as _,s as me,A as ge,n as E,X as pe,a9 as xe,aa as be,c as ye,M as we,I as V,ab as ve,p as Se,i as je,ac as Ce,N as ke,f as Ne,ad as Ee,a7 as Ie}from"./ui-BW4tJjqg.js";import"./supabase-ChG5PfJU.js";const I=(t,e)=>e.some(n=>t instanceof n);let A,T;function De(){return A||(A=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Pe(){return T||(T=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const D=new WeakMap,k=new WeakMap,j=new WeakMap;function Be(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",i)},o=()=>{n(w(t.result)),s()},i=()=>{r(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",i)});return j.set(e,t),e}function Re(t){if(D.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",i),t.removeEventListener("abort",i)},o=()=>{n(),s()},i=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",i),t.addEventListener("abort",i)});D.set(t,e)}let P={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return D.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return w(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function U(t){P=t(P)}function Oe(t){return Pe().includes(t)?function(...e){return t.apply(B(this),e),w(this.request)}:function(...e){return w(t.apply(B(this),e))}}function Me(t){return typeof t=="function"?Oe(t):(t instanceof IDBTransaction&&Re(t),I(t,De())?new Proxy(t,P):t)}function w(t){if(t instanceof IDBRequest)return Be(t);if(k.has(t))return k.get(t);const e=Me(t);return e!==t&&(k.set(t,e),j.set(e,t)),e}const B=t=>j.get(t);function Ae(t,e,{blocked:n,upgrade:r,blocking:s,terminated:o}={}){const i=indexedDB.open(t,e),c=w(i);return r&&i.addEventListener("upgradeneeded",d=>{r(w(i.result),d.oldVersion,d.newVersion,w(i.transaction),d)}),n&&i.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),c.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),c}const Te=["get","getKey","getAll","getAllKeys","count"],Le=["put","add","delete","clear"],N=new Map;function L(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(N.get(e))return N.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Le.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Te.includes(n)))return;const o=async function(i,...c){const d=this.transaction(i,s?"readwrite":"readonly");let f=d.store;return r&&(f=f.index(c.shift())),(await Promise.all([f[n](...c),s&&d.done]))[0]};return N.set(e,o),o}U(t=>({...t,get:(e,n,r)=>L(e,n)||t.get(e,n,r),has:(e,n)=>!!L(e,n)||t.has(e,n)}));const Fe=["continue","continuePrimaryKey","advance"],F={},R=new WeakMap,H=new WeakMap,$e={get(t,e){if(!Fe.includes(e))return t[e];let n=F[e];return n||(n=F[e]=function(...r){R.set(this,H.get(this)[e](...r))}),n}};async function*ze(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;e=e;const n=new Proxy(e,$e);for(H.set(n,e),j.set(n,B(e));e;)yield n,e=await(R.get(n)||e.continue()),R.delete(n)}function $(t,e){return e===Symbol.asyncIterator&&I(t,[IDBIndex,IDBObjectStore,IDBCursor])||e==="iterate"&&I(t,[IDBIndex,IDBObjectStore])}U(t=>({...t,get(e,n,r){return $(e,n)?ze:t.get(e,n,r)},has(e,n){return $(e,n)||t.has(e,n)}}));class We{constructor(){O(this,"db",null)}async init(){return this.db?this.db:(this.db=await Ae("PlantCareDB",1,{upgrade(e){const n=e.createObjectStore("plants",{keyPath:"id"});n.createIndex("by-health","healthScore"),n.createIndex("by-date","dateAdded"),e.createObjectStore("images",{keyPath:"id"}),e.createObjectStore("settings",{keyPath:"key"})}}),this.db)}async savePlant(e){await(await this.init()).put("plants",e);const r=await this.getAllPlants();localStorage.setItem("plants",JSON.stringify(r))}async getPlant(e){return await(await this.init()).get("plants",e)}async getAllPlants(){return(await(await this.init()).getAll("plants")).map(r=>({...r,dateAdded:new Date(r.dateAdded),lastWatered:r.lastWatered?new Date(r.lastWatered):void 0,lastFertilized:r.lastFertilized?new Date(r.lastFertilized):void 0,images:r.images.map(s=>({...s,timestamp:new Date(s.timestamp)})),chatHistory:r.chatHistory.map(s=>({...s,timestamp:new Date(s.timestamp)})),notifications:r.notifications.map(s=>({...s,scheduledFor:new Date(s.scheduledFor)}))}))}async deletePlant(e){await(await this.init()).delete("plants",e);const r=await this.getAllPlants();localStorage.setItem("plants",JSON.stringify(r))}async saveImageBlob(e,n,r){await(await this.init()).put("images",{id:e,plantId:n,blob:r,timestamp:new Date})}async getImageBlob(e){return(await(await this.init()).get("images",e))?.blob}async saveSetting(e,n){await(await this.init()).put("settings",{key:e,value:n})}async getSetting(e){return(await(await this.init()).get("settings",e))?.value}async exportData(){const e=await this.getAllPlants(),n={theme:await this.getSetting("theme"),notifications:await this.getSetting("notifications")};return JSON.stringify({plants:e,settings:n,exportDate:new Date().toISOString(),version:"1.0.0"},null,2)}async importData(e){try{const n=JSON.parse(e);if(n.plants)for(const r of n.plants)await this.savePlant(r);if(n.settings)for(const[r,s]of Object.entries(n.settings))s!==void 0&&await this.saveSetting(r,s)}catch{throw new Error("Invalid data format")}}async clearAllData(){const e=await this.init();await e.clear("plants"),await e.clear("images"),await e.clear("settings"),localStorage.removeItem("plants")}}const _e=new We,Ve=()=>{const{isDark:t,toggleTheme:e}=le(),{signOut:n,user:r}=de(),s=he(),[o,i]=u.useState(!1),c=async()=>{if(window.confirm("¿Estás seguro de que quieres cerrar sesión?"))try{await n(),s("/auth")}catch(l){console.error("Error signing out:",l)}},d=()=>{i(!0)},f=async()=>{if(window.confirm("¿Estás seguro de que quieres eliminar todos tus datos? Esta acción es irreversible."))try{await _e.clearAllData(),await c()}catch(l){console.error("Error clearing data:",l)}};return{settingsSections:u.useMemo(()=>[{title:"Cuenta",items:[{id:"signout",icon:"LogOut",label:"Cerrar sesión",type:"button",onClick:c}]},{title:"Preferencias",items:[{id:"theme",icon:t?"Sun":"Moon",label:"Modo Oscuro",type:"toggle",toggleState:t,onToggleChange:e}]},{title:"Datos",items:[{id:"export",icon:"Download",label:"Exportar mis datos",type:"button",onClick:d,disabled:!r||!1},{id:"delete",icon:"Trash2",label:"Eliminar mis datos",type:"button",onClick:f,disabled:!r||!1}]},{title:"Soporte",items:[{id:"about",icon:"Info",label:"Acerca de Plantitas",value:ue(),onClick:()=>{console.log("Show about modal with version info")},type:"button"}]}],[t,r,c,e]),isExportModalOpen:o,setIsExportModalOpen:i}},Ue=({title:t,children:e,delay:n=0})=>a.jsxs(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:n*.1},className:"space-y-3",children:[a.jsx("h2",{className:"text-lg font-bold text-foreground px-4",children:t}),a.jsx("div",{className:"bg-muted/50 rounded-2xl overflow-hidden",children:e})]});function He(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t?.(s),n===!1||!s.defaultPrevented)return e?.(s)}}function z(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function J(...t){return e=>{let n=!1;const r=t.map(s=>{const o=z(s,e);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let s=0;s<r.length;s++){const o=r[s];typeof o=="function"?o():z(t[s],null)}}}}function q(...t){return u.useCallback(J(...t),t)}function Je(t,e=[]){let n=[];function r(o,i){const c=u.createContext(i),d=n.length;n=[...n,i];const f=l=>{const{scope:h,children:x,...m}=l,b=h?.[t]?.[d]||c,p=u.useMemo(()=>m,Object.values(m));return a.jsx(b.Provider,{value:p,children:x})};f.displayName=o+"Provider";function g(l,h){const x=h?.[t]?.[d]||c,m=u.useContext(x);if(m)return m;if(i!==void 0)return i;throw new Error(`\`${l}\` must be used within \`${o}\``)}return[f,g]}const s=()=>{const o=n.map(i=>u.createContext(i));return function(c){const d=c?.[t]||o;return u.useMemo(()=>({[`__scope${t}`]:{...c,[t]:d}}),[c,d])}};return s.scopeName=t,[r,qe(s,...e)]}function qe(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const i=r.reduce((c,{useScope:d,scopeName:f})=>{const l=d(o)[`__scope${f}`];return{...c,...l}},{});return u.useMemo(()=>({[`__scope${e.scopeName}`]:i}),[i])}};return n.scopeName=e.scopeName,n}var K=globalThis?.document?u.useLayoutEffect:()=>{},Ke=ie[" useInsertionEffect ".trim().toString()]||K;function Ge({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,o,i]=Xe({defaultProp:e,onChange:n}),c=t!==void 0,d=c?t:s;{const g=u.useRef(t!==void 0);u.useEffect(()=>{const l=g.current;l!==c&&console.warn(`${r} is changing from ${l?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),g.current=c},[c,r])}const f=u.useCallback(g=>{if(c){const l=Qe(g)?g(t):g;l!==t&&i.current?.(l)}else o(g)},[c,t,o,i]);return[d,f]}function Xe({defaultProp:t,onChange:e}){const[n,r]=u.useState(t),s=u.useRef(n),o=u.useRef(e);return Ke(()=>{o.current=e},[e]),u.useEffect(()=>{s.current!==n&&(o.current?.(n),s.current=n)},[n,s]),[n,r,o]}function Qe(t){return typeof t=="function"}function Ze(t){const e=u.useRef({value:t,previous:t});return u.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}function Ye(t){const[e,n]=u.useState(void 0);return K(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let i,c;if("borderBoxSize"in o){const d=o.borderBoxSize,f=Array.isArray(d)?d[0]:d;i=f.inlineSize,c=f.blockSize}else i=t.offsetWidth,c=t.offsetHeight;n({width:i,height:c})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}function et(t){const e=tt(t),n=u.forwardRef((r,s)=>{const{children:o,...i}=r,c=u.Children.toArray(o),d=c.find(st);if(d){const f=d.props.children,g=c.map(l=>l===d?u.Children.count(f)>1?u.Children.only(null):u.isValidElement(f)?f.props.children:null:l);return a.jsx(e,{...i,ref:s,children:u.isValidElement(f)?u.cloneElement(f,void 0,g):null})}return a.jsx(e,{...i,ref:s,children:o})});return n.displayName=`${t}.Slot`,n}function tt(t){const e=u.forwardRef((n,r)=>{const{children:s,...o}=n;if(u.isValidElement(s)){const i=at(s),c=rt(o,s.props);return s.type!==u.Fragment&&(c.ref=r?J(r,i):i),u.cloneElement(s,c)}return u.Children.count(s)>1?u.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var nt=Symbol("radix.slottable");function st(t){return u.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===nt}function rt(t,e){const n={...e};for(const r in e){const s=t[r],o=e[r];/^on[A-Z]/.test(r)?s&&o?n[r]=(...c)=>{const d=o(...c);return s(...c),d}:s&&(n[r]=s):r==="style"?n[r]={...s,...o}:r==="className"&&(n[r]=[s,o].filter(Boolean).join(" "))}return{...t,...n}}function at(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var ot=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],G=ot.reduce((t,e)=>{const n=et(`Primitive.${e}`),r=u.forwardRef((s,o)=>{const{asChild:i,...c}=s,d=i?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(d,{...c,ref:o})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),C="Switch",[it,Ct]=Je(C),[ct,lt]=it(C),X=u.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:o,required:i,disabled:c,value:d="on",onCheckedChange:f,form:g,...l}=t,[h,x]=u.useState(null),m=q(e,v=>x(v)),b=u.useRef(!1),p=h?g||!!h.closest("form"):!0,[y,se]=Ge({prop:s,defaultProp:o??!1,onChange:f,caller:C});return a.jsxs(ct,{scope:n,checked:y,disabled:c,children:[a.jsx(G.button,{type:"button",role:"switch","aria-checked":y,"aria-required":i,"data-state":ee(y),"data-disabled":c?"":void 0,disabled:c,value:d,...l,ref:m,onClick:He(t.onClick,v=>{se(re=>!re),p&&(b.current=v.isPropagationStopped(),b.current||v.stopPropagation())})}),p&&a.jsx(Y,{control:h,bubbles:!b.current,name:r,value:d,checked:y,required:i,disabled:c,form:g,style:{transform:"translateX(-100%)"}})]})});X.displayName=C;var Q="SwitchThumb",Z=u.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=lt(Q,n);return a.jsx(G.span,{"data-state":ee(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});Z.displayName=Q;var dt="SwitchBubbleInput",Y=u.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:r=!0,...s},o)=>{const i=u.useRef(null),c=q(i,o),d=Ze(n),f=Ye(e);return u.useEffect(()=>{const g=i.current;if(!g)return;const l=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(l,"checked").set;if(d!==n&&x){const m=new Event("click",{bubbles:r});x.call(g,n),g.dispatchEvent(m)}},[d,n,r]),a.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:c,style:{...s.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Y.displayName=dt;function ee(t){return t?"checked":"unchecked"}var te=X,ut=Z;const ne=u.forwardRef(({className:t,...e},n)=>a.jsx(te,{className:S("peer inline-flex h-7 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:a.jsx(ut,{className:S("pointer-events-none block h-6 w-6 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));ne.displayName=te.displayName;const W=({icon:t,label:e,value:n,onClick:r,isLast:s=!1,type:o="button",disabled:i=!1,toggleState:c=!1,onToggleChange:d})=>{const f=ce.useId(),g=a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-background",children:a.jsx(t,{size:18,className:"text-muted-foreground"})}),a.jsx("span",{className:"font-medium text-foreground",children:e})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[o==="button"&&a.jsxs(a.Fragment,{children:[n&&a.jsx("span",{className:"text-sm text-muted-foreground",children:n}),a.jsx(me,{size:16,className:"text-muted-foreground/50"})]}),o==="toggle"&&a.jsx(ne,{id:f,checked:c,onCheckedChange:d,"aria-label":e})]})]}),l=S("flex w-full items-center justify-between p-3 text-left",!s&&"border-b border-background",r&&"transition-colors hover:bg-background/50");return o==="button"?a.jsx("button",{onClick:r,className:l,disabled:i,children:g}):a.jsx("label",{htmlFor:f,className:S(l,"cursor-pointer"),children:g})},ft=()=>{const[t,e]=u.useState(!1),{data:n=[]}=fe(),r=l=>l.toISOString().split("T")[0],s=l=>{if(l==null)return"";const h=String(l);return h.includes(",")||h.includes('"')||h.includes(`
`)?`"${h.replace(/"/g,'""')}"`:h},o=async l=>{e(!0);try{const h={exportDate:new Date().toISOString(),plantCount:n.length,plants:n.map(m=>({id:m.id,name:m.name,nickname:m.nickname,species:m.species,location:m.location,plantEnvironment:m.plantEnvironment,lightRequirements:m.lightRequirements,healthScore:m.healthScore,lastWatered:m.lastWatered?.toISOString(),...l.includeImages&&{profileImageUrl:m.profileImageUrl},...l.includeChats&&{chatHistory:[]}})),metadata:{version:"1.0.0",source:"Plant Care Companion"}},x=new Blob([JSON.stringify(h,null,2)],{type:"application/json"});c(x,`plantas-backup-${r(new Date)}.json`)}catch(h){throw console.error("Error exporting to JSON:",h),new Error("Failed to export data as JSON")}finally{e(!1)}},i=async l=>{e(!0);try{const h=["ID","Nombre","Apodo","Especie","Ubicación","Ambiente","Luz Requerida","Puntuación Salud","Último Riego"];l.includeImages&&h.push("Imagen Principal");const x=[h.join(",")];n.forEach(p=>{const y=[s(p.id),s(p.name),s(p.nickname||""),s(p.species),s(p.location),s(p.plantEnvironment||""),s(p.lightRequirements||""),s(p.healthScore||""),s(p.lastWatered?r(p.lastWatered):"")];l.includeImages&&y.push(s(p.profileImageUrl||"")),x.push(y.join(","))});const m=x.join(`
`),b=new Blob([m],{type:"text/csv;charset=utf-8;"});c(b,`plantas-${r(new Date)}.csv`)}catch(h){throw console.error("Error exporting to CSV:",h),new Error("Failed to export data as CSV")}finally{e(!1)}},c=(l,h)=>{const x=URL.createObjectURL(l),m=document.createElement("a");m.href=x,m.download=h,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(x)};return{exportData:async l=>{if(n.length===0)throw new Error("No hay plantas para exportar");switch(l.format){case"json":return o(l);case"csv":return i(l);default:throw new Error("Formato de exportación no soportado")}},isExporting:t,getExportSize:()=>{const l=n.length*1024,h=l/(1024*1024);return{plantCount:n.length,estimatedSize:h>1?`${h.toFixed(1)} MB`:`${Math.round(l/1024)} KB`}},createAutoBackup:async()=>{try{const l=localStorage.getItem("last-auto-backup"),h=new Date().getTime(),x=7*24*60*60*1e3;(!l||h-parseInt(l)>x)&&(await o({format:"json",includeImages:!1,includeChats:!1}),localStorage.setItem("last-auto-backup",h.toString()))}catch(l){console.warn("Auto-backup failed:",l)}},availableFormats:["json","csv"]}},ht=u.createContext(void 0),mt=()=>{const t=u.useContext(ht);if(!t)throw new Error("useToast must be used within a ToastProvider");return t},gt=({isOpen:t,onClose:e})=>{const[n,r]=u.useState("json"),[s,o]=u.useState(!0),[i,c]=u.useState(!1),{exportData:d,isExporting:f,getExportSize:g}=ft(),{showSuccess:l,showError:h}=mt(),{plantCount:x,estimatedSize:m}=g(),b=async()=>{try{await d({format:n,includeImages:s,includeChats:i}),l("Exportación completada",`Se descargaron los datos de ${x} plantas en formato ${n.toUpperCase()}.`),e()}catch(p){h("Error en la exportación",p instanceof Error?p.message:"No se pudo completar la exportación.")}};return t?a.jsx(ge,{children:a.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:a.jsxs(_.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},onClick:p=>p.stopPropagation(),className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl max-w-lg w-full max-h-[90vh] overflow-hidden",children:[a.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center",children:a.jsx(E,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Exportar Datos"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Descarga una copia de tus datos de plantas"})]})]}),a.jsx("button",{onClick:e,disabled:f,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors p-1","aria-label":"Cerrar modal",children:a.jsx(pe,{className:"w-5 h-5"})})]})}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Plantas a exportar:"}),a.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:x})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm mt-2",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Tamaño estimado:"}),a.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:m})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Formato de archivo"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsx("button",{onClick:()=>r("json"),disabled:f,className:`
                    p-4 rounded-lg border-2 transition-all text-left
                    ${n==="json"?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}
                  `,children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(xe,{className:`w-5 h-5 ${n==="json"?"text-blue-600":"text-gray-500"}`}),a.jsxs("div",{children:[a.jsx("div",{className:`font-medium ${n==="json"?"text-blue-900 dark:text-blue-100":"text-gray-900 dark:text-gray-100"}`,children:"JSON"}),a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Completo, reimportable"})]})]})}),a.jsx("button",{onClick:()=>r("csv"),disabled:f,className:`
                    p-4 rounded-lg border-2 transition-all text-left
                    ${n==="csv"?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}
                  `,children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(be,{className:`w-5 h-5 ${n==="csv"?"text-blue-600":"text-gray-500"}`}),a.jsxs("div",{children:[a.jsx("div",{className:`font-medium ${n==="csv"?"text-blue-900 dark:text-blue-100":"text-gray-900 dark:text-gray-100"}`,children:"CSV"}),a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Para Excel/Sheets"})]})]})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Incluir en la exportación"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:s,onChange:p=>o(p.target.checked),disabled:f,className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),a.jsx(ye,{className:"w-4 h-4 text-gray-500"}),a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Metadatos de imágenes"})]}),a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer opacity-50",children:[a.jsx("input",{type:"checkbox",checked:i,onChange:p=>c(p.target.checked),disabled:!0,className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),a.jsx(we,{className:"w-4 h-4 text-gray-500"}),a.jsx("span",{className:"text-sm text-gray-500",children:"Historial de chat (próximamente)"})]})]})]}),a.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:a.jsxs("div",{className:"flex gap-3",children:[a.jsx(V,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"text-sm",children:[a.jsx("p",{className:"text-blue-800 dark:text-blue-200 font-medium mb-1",children:"Sobre la exportación"}),a.jsx("p",{className:"text-blue-700 dark:text-blue-300 leading-relaxed",children:"Los datos exportados incluyen toda la información de tus plantas: nombres, especies, cuidados, fechas de riego y ubicaciones. Las imágenes se incluyen como referencias URL."})]})]})})]}),a.jsxs("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex gap-3 justify-end",children:[a.jsx(M,{variant:"outline",onClick:e,disabled:f,children:"Cancelar"}),a.jsxs(M,{onClick:b,disabled:f||x===0,loading:f,className:"flex items-center gap-2",children:[a.jsx(E,{className:"w-4 h-4"}),f?"Exportando...":"Exportar Datos"]})]})]})})}):null},pt={User:Ie,LogOut:Ee,Sun:Ne,Moon:ke,Bell:Ce,Download:E,Trash2:je,HelpCircle:Se,Shield:ve,Info:V},kt=()=>{const{settingsSections:t,isExportModalOpen:e,setIsExportModalOpen:n}=Ve();return a.jsxs("div",{className:"p-4 space-y-6",children:[a.jsxs("header",{children:[a.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Configuración"}),a.jsx("p",{className:"text-muted-foreground",children:"Gestiona tu cuenta y preferencias de la app."})]}),t.map((r,s)=>a.jsx(Ue,{title:r.title,delay:s,children:r.items.map((o,i)=>{const c=pt[o.icon],d=i===r.items.length-1;return o.type==="toggle"?a.jsx(W,{icon:c,label:o.label,isLast:d,type:"toggle",toggleState:"toggleState"in o?o.toggleState:!1,onToggleChange:"onToggleChange"in o?o.onToggleChange:void 0},o.id):a.jsx(W,{icon:c,label:o.label,value:"value"in o&&typeof o.value=="string"?o.value:void 0,onClick:"onClick"in o?o.onClick:void 0,isLast:d,type:"button",disabled:"disabled"in o?o.disabled:!1},o.id)})},r.title)),a.jsx(gt,{isOpen:e,onClose:()=>n(!1)})]})};export{kt as default};
