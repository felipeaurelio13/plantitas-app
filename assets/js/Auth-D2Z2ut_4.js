import{j as e}from"./query-DbrUQU2d.js";import{r as s}from"./vendor-DZ-WnDgw.js";import{a as E}from"./index-BihFXoIR.js";import{m as r,u as S,a7 as A,ae as I,af as u,E as q,h as L}from"./ui-DPEBMuFB.js";import"./supabase-pWErzozG.js";import"./router-8pqLaH9a.js";const M={async signInWithPasskey(){throw"PublicKeyCredential"in window?new Error("Passkey backend not configured"):new Error("Passkeys not supported")}},B=()=>{const[a,x]=s.useState("login"),[o,y]=s.useState(""),[i,p]=s.useState(""),[l,h]=s.useState(""),[c,b]=s.useState(""),[d,f]=s.useState(!1),{signIn:w,signUp:j,isLoading:g,error:m,clearError:n}=E(),k=t=>{x(t),n()};s.useEffect(()=>()=>{n?.()},[a,n]);const N=async t=>{t.preventDefault(),n();try{if(a==="login")await w(o,i);else{if(i!==l){console.error("Passwords do not match");return}await j(o,i,l,c)}}catch(P){console.error("Auth error:",P)}},v=typeof window<"u"&&"PublicKeyCredential"in window,C=async()=>{try{await M.signInWithPasskey()}catch(t){console.error("Passkey sign-in failed",t)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-emerald-50 to-teal-100 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center p-4",children:e.jsxs(r.div,{initial:{opacity:0,y:30,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.5,ease:"easeOut"},className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsx(r.div,{initial:{scale:.8,rotate:-10},animate:{scale:1,rotate:0},transition:{duration:.6,ease:"easeOut"},className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-green-400 to-emerald-600 rounded-2xl mb-6 shadow-lg shadow-green-200/50 animate-float",children:e.jsx(S,{className:"w-10 h-10 text-white"})}),e.jsx(r.h1,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2,duration:.5},className:"text-4xl font-bold bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent mb-3",children:"Plantitas"}),e.jsx(r.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3,duration:.5},className:"text-gray-600 dark:text-gray-400 text-lg",children:a==="login"?"Bienvenido de vuelta":"Únete a la comunidad de plantas"})]}),e.jsxs(r.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4,duration:.5},className:"bg-white/80 backdrop-blur-sm dark:bg-gray-800/90 rounded-3xl shadow-2xl shadow-green-100/20 p-8 border border-white/20",children:[v&&e.jsx("div",{className:"mb-4",children:e.jsx("button",{onClick:C,className:"w-full bg-neutral-100 dark:bg-neutral-800 border border-neutral-300 dark:border-neutral-700 rounded-md py-2",children:"Usar passkey (experimental)"})}),e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[a==="signup"&&e.jsxs(r.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre completo"}),e.jsxs("div",{className:"relative",children:[e.jsx(A,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:c,onChange:t=>b(t.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Tu nombre completo",autoComplete:"name",required:a==="signup"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(I,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"email",value:o,onChange:t=>y(t.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"tu@email.com",autoComplete:"email",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Contraseña"}),e.jsxs("div",{className:"relative",children:[e.jsx(u,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),e.jsx("input",{type:d?"text":"password",value:i,onChange:t=>p(t.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"••••••••",autoComplete:a==="login"?"current-password":"new-password",required:!0,minLength:6}),e.jsx("button",{type:"button",onClick:()=>f(!d),className:"absolute right-3 top-3 w-5 h-5 text-gray-400 hover:text-gray-600",children:d?e.jsx(q,{}):e.jsx(L,{})})]}),a==="signup"&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Mínimo 6 caracteres"})]}),a==="signup"&&e.jsxs(r.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirmar Contraseña"}),e.jsxs("div",{className:"relative",children:[e.jsx(u,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"password",value:l,onChange:t=>h(t.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"••••••••",autoComplete:"new-password",required:a==="signup"})]})]}),m&&e.jsx(r.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:m})}),e.jsx("button",{type:"submit",disabled:g,className:"w-full bg-green-500 hover:bg-green-600 disabled:bg-green-300 text-white font-medium py-3 px-4 rounded-lg transition-colors focus:ring-2 focus:ring-green-500 focus:ring-offset-2",children:g?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Procesando..."]}):a==="login"?"Iniciar Sesión":"Crear Cuenta"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[a==="login"?"¿No tienes cuenta?":"¿Ya tienes cuenta?",e.jsx("button",{onClick:()=>k(a==="login"?"signup":"login"),className:"ml-1 text-green-500 hover:text-green-600 font-medium",children:a==="login"?"Regístrate":"Inicia sesión"})]})}),e.jsx("div",{className:"text-center mt-8",children:e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Al continuar, aceptas nuestros Términos y Condiciones"})})]})]})})};export{B as default};
